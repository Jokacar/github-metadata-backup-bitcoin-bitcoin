{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848",
    "id": 1596908988,
    "node_id": "PR_kwDOABII585fLuW8",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28848",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28848.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28848.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28848",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28848/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/4fb3340a1ac678165e6821645e6aa1e06f34921a",
    "number": 28848,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "bugfix, Change up submitpackage results to return results for all transactions",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This was prompted by errors being returned that didn't \"make any sense\" to me, because it would for example return a \"fee too low\" error, when the \"real\" error was the child had something invalid, which disallowed CPFP evaluation. Rather than make judgment calls on what error is important(which is currently just return the \"first\"!), we simply return all errors and let the callers determine what's best.\r\n\r\nAdded a top level `package_msg` for quick eye-balling of general success of the package.\r\n\r\nThis PR also fixes a couple bugs:\r\n\r\n1) Currently we don't actually broadcast a transaction, even if it was entered into our mempool, if a subsequent transaction causes `PKG_TX` failure.\r\n2) \"other-wtxid\" is uncovered by tests, but IIUC was previously required to return \"fees\" and \"vsize\" results, but did not. I just make those results optional.",
    "labels": [],
    "created_at": "2023-11-10T21:10:11Z",
    "updated_at": "2023-11-28T13:42:08Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "6259cf4e78678436d378ce2fd9474c1f674bd6b6",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "instagibbs:2023-11-submitpackage-results",
      "ref": "2023-11-submitpackage-results",
      "sha": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 13910191,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMzkxMDE5MQ==",
        "name": "bitcoin",
        "full_name": "instagibbs/bitcoin",
        "owner": {
          "login": "instagibbs",
          "id": 5767891,
          "node_id": "MDQ6VXNlcjU3Njc4OTE=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/instagibbs",
          "html_url": "https://github.com/instagibbs",
          "followers_url": "https://api.github.com/users/instagibbs/followers",
          "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
          "organizations_url": "https://api.github.com/users/instagibbs/orgs",
          "repos_url": "https://api.github.com/users/instagibbs/repos",
          "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/instagibbs/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/instagibbs/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/instagibbs/bitcoin",
        "archive_url": "https://api.github.com/repos/instagibbs/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/instagibbs/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/instagibbs/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/instagibbs/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/instagibbs/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/instagibbs/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/instagibbs/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/instagibbs/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/instagibbs/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/instagibbs/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/instagibbs/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/instagibbs/bitcoin/events",
        "forks_url": "https://api.github.com/repos/instagibbs/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/instagibbs/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/instagibbs/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/instagibbs/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/instagibbs/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/instagibbs/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/instagibbs/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/instagibbs/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/instagibbs/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/instagibbs/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/instagibbs/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/instagibbs/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/instagibbs/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:instagibbs/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/instagibbs/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/instagibbs/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/instagibbs/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/instagibbs/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/instagibbs/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/instagibbs/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/instagibbs/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/instagibbs/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/instagibbs/bitcoin/hooks",
        "svn_url": "https://github.com/instagibbs/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 224518,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-11-27T20:44:43Z",
        "created_at": "2013-10-27T20:56:53Z",
        "updated_at": "2022-12-28T23:57:23Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "5f9fd11680af43b0d0d80a6aa4f315aa04afeac4",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36033,
        "stargazers_count": 72349,
        "watchers_count": 72349,
        "size": 245536,
        "default_branch": "master",
        "open_issues_count": 657,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-11-28T13:45:10Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-11-28T13:15:09Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 58,
    "deletions": 29,
    "changed_files": 4,
    "commits": 1,
    "review_comments": 24,
    "comments": 6
  },
  "events": [
    {
      "event": "commented",
      "id": 1806438844,
      "node_id": "IC_kwDOABII585rrBG8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1806438844",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T21:10:14Z",
      "updated_at": "2023-11-28T13:42:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28848).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/28848#issuecomment-1829871990) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27591](https://github.com/bitcoin/bitcoin/pull/27591) (rpc: distinguish between vsize and sigop-adjusted mempool vsize by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#issuecomment-1806438844",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28848"
    },
    {
      "event": "renamed",
      "id": 10929672109,
      "node_id": "RTE_lADOABII5852hJ8BzwAAAAKLdY-t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10929672109",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T21:10:31Z",
      "rename": {
        "from": "Change up submitpackage results",
        "to": "Change up submitpackage results to return results for all transactions"
      }
    },
    {
      "event": "renamed",
      "id": 10929690965,
      "node_id": "RTE_lADOABII5852hJ8BzwAAAAKLddlV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10929690965",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T21:12:58Z",
      "rename": {
        "from": "Change up submitpackage results to return results for all transactions",
        "to": "bugfix, Change up submitpackage results to return results for all transactions"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10929707213,
      "node_id": "HRFPE_lADOABII5852hJ8BzwAAAAKLdhjN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10929707213",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T21:14:57Z"
    },
    {
      "event": "labeled",
      "id": 10929708120,
      "node_id": "LE_lADOABII5852hJ8BzwAAAAKLdhxY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10929708120",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T21:15:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10929981829,
      "node_id": "UNLE_lADOABII5852hJ8BzwAAAAKLekmF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10929981829",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T21:57:58Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10930009161,
      "node_id": "HRFPE_lADOABII5852hJ8BzwAAAAKLerRJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10930009161",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T22:01:02Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10930020065,
      "node_id": "HRFPE_lADOABII5852hJ8BzwAAAAKLet7h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10930020065",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T22:02:57Z"
    },
    {
      "event": "labeled",
      "id": 10930020880,
      "node_id": "LE_lADOABII5852hJ8BzwAAAAKLeuIQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10930020880",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T22:03:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10930421805,
      "node_id": "UNLE_lADOABII5852hJ8BzwAAAAKLgQAt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10930421805",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-10T23:14:42Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-11T02:05:12Z",
      "updated_at": "2023-11-11T02:05:12Z",
      "source": {
        "issue": {
          "id": 1699208383,
          "node_id": "PR_kwDOABII585P8ew0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27591",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27591/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27591/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27591/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27591",
          "number": 27591,
          "state": "open",
          "state_reason": null,
          "title": "rpc: distinguish between vsize and sigop-adjusted mempool vsize",
          "body": "`CTxMemPoolEntry::GetTxSize()` returns the maximum between vsize and \"sigop-adjusted size\" which is used by mempool validation and mining code as a heuristic to avoid 2DKnapsacking the block weight and sigop limits.\r\n\r\nSigop-adjusted vsize is returned as the \"vsize\" value of a transaction for RPCs retrieving mempool entry information (e.g. `getmempoolentry` and`getrawmempool`) and mempool acceptance (`testmempoolaccept` and `submitpackage`). The [documentation](https://github.com/bitcoin/bitcoin/blob/322ec63b01499c1ec52d3912ee382ebd59f2366b/src/rpc/mempool.cpp#L256) for these RPCs usually says \"virtual transaction size as defined in BIP 141\" without mentioning the sigop adjustment. At least 1 user has expressed confusion in a [tweet](https://twitter.com/mononautical/status/1646166180145577990?s=20).\r\n\r\nI think we should at least mention something in the docs about the sigop-adjusted size. But imo it would be better to provide 2 vsize results: one that is sigop-adjusted and one that isn't.\r\n\r\nSeeking feedback on what might be most clear/helpful for users.\r\n\r\nThis PR's approach is to change the result for \"vsize\" to not include sigop limits. The sigop-adjusted vsize is returned as a new result, \"mempool_vsize\".",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 1392286103,
              "node_id": "MDU6TGFiZWwxMzkyMjg2MTAz",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20Conceptual%20Review",
              "name": "Needs Conceptual Review",
              "description": "",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27591",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27591",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27591.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27591.patch"
          },
          "created_at": "2023-05-07T19:44:25Z",
          "updated_at": "2023-11-11T02:05:12Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1726021692,
      "node_id": "PRR_kwDOABII585m4QA8",
      "url": null,
      "actor": null,
      "commit_id": "e77b702e3bba30032fc6c34fe251b8145fadf48b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#pullrequestreview-1726021692",
      "submitted_at": "2023-11-11T09:25:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10943274115,
      "node_id": "HRFPE_lADOABII5852hJ8BzwAAAAKMRRyD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10943274115",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-13T15:28:22Z"
    },
    {
      "event": "reviewed",
      "id": 1727694604,
      "node_id": "PRR_kwDOABII585m-ocM",
      "url": null,
      "actor": null,
      "commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#pullrequestreview-1727694604",
      "submitted_at": "2023-11-13T16:39:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
    },
    {
      "event": "reviewed",
      "id": 1727753117,
      "node_id": "PRR_kwDOABII585m-2ud",
      "url": null,
      "actor": null,
      "commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#pullrequestreview-1727753117",
      "submitted_at": "2023-11-13T16:49:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10945279977,
      "node_id": "HRFPE_lADOABII5852hJ8BzwAAAAKMY7fp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10945279977",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-13T18:11:36Z"
    },
    {
      "event": "labeled",
      "id": 10945280753,
      "node_id": "LE_lADOABII5852hJ8BzwAAAAKMY7rx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10945280753",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-13T18:11:42Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10947666934,
      "node_id": "UNLE_lADOABII5852hJ8BzwAAAAKMiCP2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10947666934",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-13T22:16:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-14T01:01:13Z",
      "updated_at": "2023-11-14T01:01:13Z",
      "source": {
        "issue": {
          "id": 1668056618,
          "node_id": "I_kwDOABII585jbIYq",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/27463",
          "number": 27463,
          "state": "open",
          "state_reason": null,
          "title": "Package Relay Project Tracking",
          "body": "This issue will be edited frequently to reflect the current status of the project.\r\n\r\n**What should I review now?**\r\n:point_down: :point_down: :point_down: :point_down: :point_down: :point_down: :point_down:\r\n#28848 #28948\r\n:point_up: :point_up: :point_up: :point_up: :point_up: :point_up: :point_up:\r\n\r\n**(1) multi-parent-1-child package validation**\r\n\r\nWhat we get: the ability to validate multiple transactions, including CPFP of transactions below the mempool minimum feerate. An RPC to submit things locally.\r\n\r\n- Enable validation of multiple transactions in MemPoolAccept\r\n  - [x] Dependency: #21062\r\n  - [x] Dependency: #23381\r\n  - [x] Main feature 1/2: #20833\r\n  - [x] Main feature 2/2: #21800\r\n  - [x] Followup: #22084\r\n  - [x] Bug fix: #28471\r\n- Enable package CPFP\r\n  - [x] Main feature 1/2: #22674\r\n  - [x] Followup: #24310\r\n  - [x] Followup: #23804\r\n  - [x] Main feature 2/2: #24152\r\n- RPC access\r\n  - [x] #24836\r\n  - [x] #26646\r\n  - [x] #27609\r\n  - [ ] #28848\r\n- [x] short term bug fix: avoid the risk of below-minrelaytxfee transactions hanging around forever in the mempool  #26933\r\n- [x] Bug fix: #28251\r\n- [x] Bug fix: #28472\r\n- Fuzzing\r\n  - [x] #28450\r\n  - [x] #28764\r\n  - [x] #28825\r\n\r\n**(2) 1-parent-1-child package relay**\r\n\r\nWhat we get: package relay of 1-parent-1-child packages.\r\nProtocols like LN can use this to create 0-fee presigned transactions with a single, 0-value anchor output; 0-fee commitment transactions can replace each other using the fees of the child attached to the anchor.\r\nThis makes CPFP carve out unnecessary, so we can remove that and switch from ancestor/descendant package limits to cluster limits (see next step).\r\n\r\n- Add v3 rules that make transactions/packages easier to work with\r\n  - [ ] Main feature: #28948\r\n- Enable Package RBF for v3 only. Enables things like LN to sign things 0-fee, add fees at broadcast, and avoid pinning attacks (assuming package relay is available)\r\n   - [x] Dependency: #22796 \r\n   - [x] Dependency: #22675 \r\n   - [x] Dependency: #22855\r\n   - [ ] Main feature: #25038\r\n- Add Ephemeral Anchors rules for v3 transactions.\r\n  - [ ] Main feature: #26403\r\n- Opportunistically submit 1-parent-1-child packages\r\n  - [x] Dependency: #28785\r\n  - [ ] WIP https://github.com/glozow/bitcoin/commits/2023-11-1p1c\r\n- Try multiple peers for orphan resolution, make orphanage more robust\r\n  - [x] Dependency: #28785\r\n  - [x] Dependency: #28199\r\n  - [x] Dependency: #28364\r\n  - [ ] Main feature: #28031 \r\n  - [ ] WIP: token bucket orphanage protection\r\n\r\n**(3) cluster mempool**\r\n\r\nWhat we get: the ability to quickly assess the incentive compatibility of transactions, safer eviction, more incentive-compatible and pinning-free RBF rules.\r\n\r\n- [ ] Cluster Mempool #27677\r\n  - [ ] Dependency: Remove CPFP carve out\r\n  - [ ] See #28676\r\n\r\n**(4) TBD / other parts of package relay**\r\n\r\nGoals: propagate incentive-compatible packages that are more compelx than 1p1c, safely evaluate replacements within packages, handle orphans better.\r\n\r\n- WIP: Package RBF\r\n- WIP: Package validation of less restrictive topologies\r\n- [ ] use BIP 331 ancestor package relay for orphan-handling\r\n  - [ ] bitcoin/bips/pull/1382\r\n  - [ ] #27742 \r\n- [ ] Some sender-initiated protocol using chunks (?)\r\n\r\n<details><summary>See also:</summary>\r\n\r\nSuperseded/Deferred Work\r\n- Sub-package evaluation with ancestor packages\r\n- [x] #28758\r\n  - [x] #28808\r\n  - #26711 \r\n  - #28813\r\n- #27018\r\n\r\nPrehistory\r\n- [x] #16400 \r\n- #16401 \r\n- #14895 \r\n- #19621 \r\n- https://gist.github.com/sdaftuar/8756699bfcad4d3806ba9f3396d4e66a\r\n</details>",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            },
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 15,
          "created_at": "2023-04-14T11:14:50Z",
          "updated_at": "2023-11-27T15:47:22Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1746269146,
      "node_id": "PRR_kwDOABII585oFfPa",
      "url": null,
      "actor": null,
      "commit_id": "d72aab3dbd8847e851f8b724b195181e30e7bf02",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Mmm, excuse my ignorance, but shouldn't the minimum relay fee be ignored for packages? (Update: I see this is documented: https://github.com/bitcoin/bitcoin/blob/master/doc/policy/packages.md#package-fees-and-feerate, perhaps we could introduce a (test-only) startup argument to allow it? I'll bring this up in #26933)\r\n\r\nI created two transactions while offline, wiping the mempool afterwards. To simulate a busy mempool, I set the `-minrelaytxfee` to 100, giving the parent a little bit less, and the child a little more than the minimum. \r\n\r\n```\r\nsrc/bitcoind -signet -minrelaytxfee=0.00100\r\nsrc/bitcoin-cli -signet submitpackage '[\"02000000000101f7307b92590b1a7d82e878258a62ffaad05d0db510e947c3c331fe7400469cac0000000000fdffffff029d0c05020000000016001453dcf718842726f5236d0c05b1a5d43e12097731a086010000000000160014acdaaab857365e45724557f835694bdbb0c81231014009e5f00ec66eb80f497b771e2eb10cff222c60dc6b1fe865e5371142b1a02af7fbef913b0bc3bd49be679240e3c87bcde58532e53f657f9805352a43da036c965d9a0200\", \"02000000000101806ee5976b955c424940808f784fe92f746915a4d875dce994f3f72d8c8529aa0000000000fdffffff021027000000000000160014acdaaab857365e45724557f835694bdbb0c812317da7040200000000160014ef9af76b063593e215f4b861b61944b2e27624f60247304402200ac3df7c7e29df622a487ff075b8d224843e06f0848e16b2f02c55f9210eff9c0220133366f78a0191a74efbc348d2269326b6e27e11b885dd5b77a011de8a357fa00121031526c3e43061b7c9259695e75c512f5456b2dcb66ee475ece29b36688b1c35785d9a0200\"]'\r\n```\r\n\r\n```json\r\n{\r\n  \"package_msg\": \"transaction failed\",\r\n  \"tx-results\": {\r\n    \"43bb567b00ba2d4424441af6702f841f0953e7aadd18adb475a84d5986186199\": {\r\n      \"txid\": \"aa29858c2df7f394e9dc75d8a41569742fe94f788f804049425c956b97e56e80\",\r\n      \"error\": \"min relay fee not met, 12838 < 13000\"\r\n    },\r\n    \"dff806dff6456a11d8cd2318615ae5234a4e4d60662731fc39db2857472af4c9\": {\r\n      \"txid\": \"930455a47e5339e702cab0c435172a5497ff3af6d160d16224c9e9ad08cd8592\",\r\n      \"error\": \"bad-txns-inputs-missingorspent\"\r\n    }\r\n  },\r\n  \"replaced-transactions\": [\r\n  ]\r\n}\r\n```\r\n\r\nAlso why is `tx-results` not an array like the input? (also to make it easier to sanity check that I didn't submit them the wrong way around)\r\n\r\n(I can see how, for a script that submits transaction packages, this dictionary makes it easier to get feedback for specific transactions. For manual submission and debugging it's easier to keep the same ordering, but this may not be a common use case.)",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#pullrequestreview-1746269146",
      "submitted_at": "2023-11-23T12:26:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
    },
    {
      "event": "commented",
      "id": 1824515731,
      "node_id": "IC_kwDOABII585sv-aT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1824515731",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-23T14:19:52Z",
      "updated_at": "2023-11-23T14:19:52Z",
      "author_association": "MEMBER",
      "body": "@Sjors I think you can set `-minrelaytxfee=0` to work around it?",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#issuecomment-1824515731",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28848"
    },
    {
      "event": "mentioned",
      "id": 11048279300,
      "node_id": "MEE_lADOABII5852hJ8BzwAAAAKSh10E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11048279300",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-23T14:19:53Z"
    },
    {
      "event": "subscribed",
      "id": 11048279314,
      "node_id": "SE_lADOABII5852hJ8BzwAAAAKSh10S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11048279314",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-23T14:19:53Z"
    },
    {
      "event": "commented",
      "id": 1824570747,
      "node_id": "IC_kwDOABII585swL17",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1824570747",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-23T14:56:38Z",
      "updated_at": "2023-11-23T14:56:38Z",
      "author_association": "MEMBER",
      "body": "> @Sjors I think you can set `-minrelaytxfee=0` to work around it?\r\n\r\nThat doesn't simulate a full mempool though.\r\n\r\nI wrote a commit that lets my example go through: https://github.com/Sjors/bitcoin/commit/03baacd7643daf3d1c8efbc1a723719d8cc72dce\r\n\r\nHowever, not sure if it's worth the extra complexity.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#issuecomment-1824570747",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28848"
    },
    {
      "event": "mentioned",
      "id": 11048660804,
      "node_id": "MEE_lADOABII5852hJ8BzwAAAAKSjS9E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11048660804",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-23T14:56:39Z"
    },
    {
      "event": "subscribed",
      "id": 11048660817,
      "node_id": "SE_lADOABII5852hJ8BzwAAAAKSjS9R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11048660817",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-23T14:56:39Z"
    },
    {
      "event": "reviewed",
      "id": 1746652527,
      "node_id": "PRR_kwDOABII585oG81v",
      "url": null,
      "actor": null,
      "commit_id": "d72aab3dbd8847e851f8b724b195181e30e7bf02",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Anyway, my two main issues are about pre-existing behavior: `tx-results` was already a dictionary and `-minrelaytxfee` already behaved that way.\r\n\r\nd72aab3dbd8847e851f8b724b195181e30e7bf02 looks good, but I'm (obviously) not familiar enough with mempool stuff to know for sure.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#pullrequestreview-1746652527",
      "submitted_at": "2023-11-23T15:21:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRmYjMzNDBhMWFjNjc4MTY1ZTY4MjE2NDVlNmFhMWUwNmYzNDkyMWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "tree": {
        "sha": "c9406f911f406e3a10f2075339a4d40b9b962d1e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c9406f911f406e3a10f2075339a4d40b9b962d1e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1fdd832842f3b002ce0dd079747b6015fe5569cd",
          "sha": "1fdd832842f3b002ce0dd079747b6015fe5569cd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1fdd832842f3b002ce0dd079747b6015fe5569cd"
        }
      ],
      "message": "RPC submitpackage: change return format to allow partial errors\n\nBehavior prior to this commit allows some transactions to\nenter into the local mempool but not be reported to the user\nwhen encountering a PackageValidationResult::PCKG_TX result.\n\nThis is further compounded with the fact that any transactions\nsubmitted to the mempool during this call would also not be\nrelayed to peers, resulting in unexpected behavior.\n\nFix this by, if encountering a package error, reporting all\nwtxids, along with a new error field, and broadcasting every\ntransaction that was found in the mempool after submission.\n\nNote that this also changes fees and vsize to optional,\nwhich should also remove an issue with other-wtxid cases.",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-11-27T16:21:10Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-11-10T20:12:34Z"
      },
      "sha": "4fb3340a1ac678165e6821645e6aa1e06f34921a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11073206167,
      "node_id": "HRFPE_lADOABII5852hJ8BzwAAAAKUA7eX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11073206167",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T16:21:24Z"
    },
    {
      "event": "commented",
      "id": 1828167337,
      "node_id": "IC_kwDOABII585s956p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1828167337",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T16:21:50Z",
      "updated_at": "2023-11-27T16:21:50Z",
      "author_association": "MEMBER",
      "body": "> Also why is tx-results not an array like the input? (also to make it easier to sanity check that I didn't submit them the wrong way around)\r\n\r\nIf they're submitted \"backwards\" they'll be rejected.\r\n\r\n> (I can see how, for a script that submits transaction packages, this dictionary makes it easier to get feedback for specific transactions. For manual submission and debugging it's easier to keep the same ordering, but this may not be a common use case.)\r\n\r\nRight, I think this is 99%+ of the use-cases. \"typical\" usage of manual transaction creation should generate transactions with sufficient fees for an attempt at inclusion in a block.\r\n\r\n",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#issuecomment-1828167337",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28848"
    },
    {
      "event": "commented",
      "id": 1828269809,
      "node_id": "IC_kwDOABII585s-S7x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1828269809",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T17:09:13Z",
      "updated_at": "2023-11-27T17:09:13Z",
      "author_association": "MEMBER",
      "body": "all feedback is resolved",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#issuecomment-1828269809",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28848"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T19:54:22Z",
      "updated_at": "2023-11-27T19:54:22Z",
      "source": {
        "issue": {
          "id": 2012991870,
          "node_id": "PR_kwDOABII585gehvR",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28950",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28950/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28950/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28950/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28950",
          "number": 28950,
          "state": "open",
          "state_reason": null,
          "title": "RPC: Add maxfeerate and maxburnamount args to submitpackage",
          "body": "Resolves https://github.com/bitcoin/bitcoin/issues/28949\r\n\r\nDepends on https://github.com/bitcoin/bitcoin/pull/28848\r\n\r\nI couldn't manage to do it very cleanly outside of (sub)package evaluation itself, since it would change the current interface very heavily. Instead I threaded through the max fee argument and used that directly via ATMPArgs.\r\n\r\nThe implication here is that subpackages can be submitted to the mempool prior to hitting this new error condition. Therefore you'd likely want https://github.com/bitcoin/bitcoin/pull/28848 which would give detailed results of what made it in, versus what didn't.",
          "user": {
            "login": "instagibbs",
            "id": 5767891,
            "node_id": "MDQ6VXNlcjU3Njc4OTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/instagibbs",
            "html_url": "https://github.com/instagibbs",
            "followers_url": "https://api.github.com/users/instagibbs/followers",
            "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
            "organizations_url": "https://api.github.com/users/instagibbs/orgs",
            "repos_url": "https://api.github.com/users/instagibbs/repos",
            "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/instagibbs/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 1,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28950",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28950",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28950.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28950.patch"
          },
          "created_at": "2023-11-27T19:54:21Z",
          "updated_at": "2023-11-27T21:01:57Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1829871990,
      "node_id": "IC_kwDOABII585tEaF2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1829871990",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T13:42:04Z",
      "updated_at": "2023-11-28T13:42:04Z",
      "author_association": "MEMBER",
      "body": "ACK 4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#issuecomment-1829871990",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28848"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1390186647",
      "pull_request_review_id": 1726021692,
      "id": 1390186647,
      "node_id": "PRRC_kwDOABII585S3JCX",
      "diff_hunk": "@@ -841,14 +841,15 @@ static RPCHelpMan submitpackage()\n                     {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n                         {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n                         {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n-                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n-                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                        {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", /*optional=*/true, \"Transaction fees\", {\n                             {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n                             {RPCResult::Type::STR_AMOUNT, \"effective-feerate\", /*optional=*/true, \"if the transaction was not already in the mempool, the effective feerate in \" + CURRENCY_UNIT + \" per KvB. For example, the package feerate and/or feerate with modified fees from prioritisetransaction.\"},\n                             {RPCResult::Type::ARR, \"effective-includes\", /*optional=*/true, \"if effective-feerate is provided, the wtxids of the transactions whose fees and vsizes are included in effective-feerate.\",\n                                 {{RPCResult::Type::STR_HEX, \"\", \"transaction wtxid in hex\"},\n                             }},\n                         }},\n+                        {RPCResult::Type::STR, \"error\", /*optional=*/true, \"The transaction error string, if it was rejected by the mempool\"},\n                     }}\n                 }},\n                 {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",",
      "path": "src/rpc/mempool.cpp",
      "position": 32,
      "original_position": 26,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "e77b702e3bba30032fc6c34fe251b8145fadf48b",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe add an \"success\" field for the full package, for convenience? Otherwise the user has to iterate through all the results to find out whether everything got submitted (which is likely the most common result in practice?)",
      "created_at": "2023-11-11T09:25:34Z",
      "updated_at": "2023-11-11T09:25:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1390186647",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1390186647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 856,
      "original_line": 856,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391258045",
      "pull_request_review_id": 1727549452,
      "id": 1391258045,
      "node_id": "PRRC_kwDOABII585S7Om9",
      "diff_hunk": "@@ -841,14 +841,15 @@ static RPCHelpMan submitpackage()\n                     {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n                         {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n                         {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n-                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n-                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                        {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", /*optional=*/true, \"Transaction fees\", {\n                             {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n                             {RPCResult::Type::STR_AMOUNT, \"effective-feerate\", /*optional=*/true, \"if the transaction was not already in the mempool, the effective feerate in \" + CURRENCY_UNIT + \" per KvB. For example, the package feerate and/or feerate with modified fees from prioritisetransaction.\"},\n                             {RPCResult::Type::ARR, \"effective-includes\", /*optional=*/true, \"if effective-feerate is provided, the wtxids of the transactions whose fees and vsizes are included in effective-feerate.\",\n                                 {{RPCResult::Type::STR_HEX, \"\", \"transaction wtxid in hex\"},\n                             }},\n                         }},\n+                        {RPCResult::Type::STR, \"error\", /*optional=*/true, \"The transaction error string, if it was rejected by the mempool\"},\n                     }}\n                 }},\n                 {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",",
      "path": "src/rpc/mempool.cpp",
      "position": 32,
      "original_position": 26,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "e77b702e3bba30032fc6c34fe251b8145fadf48b",
      "in_reply_to_id": 1390186647,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "added a top-level \"package-msg\" response which is \"success\" when everything goes through.\r\n\r\nI also changed the logic to allow `PCKG_POLICY` to continue if there are transaction results, because this can happen if single transactions make it in, then a subsequent subpackage hits chain limits and is rejected.",
      "created_at": "2023-11-13T15:17:40Z",
      "updated_at": "2023-11-13T15:17:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391258045",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391258045"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 856,
      "original_line": 856,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391258432",
      "pull_request_review_id": 1727550117,
      "id": 1391258432,
      "node_id": "PRRC_kwDOABII585S7OtA",
      "diff_hunk": "@@ -841,14 +841,15 @@ static RPCHelpMan submitpackage()\n                     {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n                         {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n                         {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n-                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n-                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                        {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", /*optional=*/true, \"Transaction fees\", {\n                             {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n                             {RPCResult::Type::STR_AMOUNT, \"effective-feerate\", /*optional=*/true, \"if the transaction was not already in the mempool, the effective feerate in \" + CURRENCY_UNIT + \" per KvB. For example, the package feerate and/or feerate with modified fees from prioritisetransaction.\"},\n                             {RPCResult::Type::ARR, \"effective-includes\", /*optional=*/true, \"if effective-feerate is provided, the wtxids of the transactions whose fees and vsizes are included in effective-feerate.\",\n                                 {{RPCResult::Type::STR_HEX, \"\", \"transaction wtxid in hex\"},\n                             }},\n                         }},\n+                        {RPCResult::Type::STR, \"error\", /*optional=*/true, \"The transaction error string, if it was rejected by the mempool\"},\n                     }}\n                 }},\n                 {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",",
      "path": "src/rpc/mempool.cpp",
      "position": 32,
      "original_position": 26,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "e77b702e3bba30032fc6c34fe251b8145fadf48b",
      "in_reply_to_id": 1390186647,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I will squash if/when we decide this is a good direction",
      "created_at": "2023-11-13T15:17:57Z",
      "updated_at": "2023-11-13T15:17:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391258432",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391258432"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 856,
      "original_line": 856,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391301747",
      "pull_request_review_id": 1727618346,
      "id": 1391301747,
      "node_id": "PRRC_kwDOABII585S7ZRz",
      "diff_hunk": "@@ -841,14 +841,15 @@ static RPCHelpMan submitpackage()\n                     {RPCResult::Type::OBJ, \"wtxid\", \"transaction wtxid\", {\n                         {RPCResult::Type::STR_HEX, \"txid\", \"The transaction hash in hex\"},\n                         {RPCResult::Type::STR_HEX, \"other-wtxid\", /*optional=*/true, \"The wtxid of a different transaction with the same txid but different witness found in the mempool. This means the submitted transaction was ignored.\"},\n-                        {RPCResult::Type::NUM, \"vsize\", \"Virtual transaction size as defined in BIP 141.\"},\n-                        {RPCResult::Type::OBJ, \"fees\", \"Transaction fees\", {\n+                        {RPCResult::Type::NUM, \"vsize\", /*optional=*/true, \"Virtual transaction size as defined in BIP 141.\"},\n+                        {RPCResult::Type::OBJ, \"fees\", /*optional=*/true, \"Transaction fees\", {\n                             {RPCResult::Type::STR_AMOUNT, \"base\", \"transaction fee in \" + CURRENCY_UNIT},\n                             {RPCResult::Type::STR_AMOUNT, \"effective-feerate\", /*optional=*/true, \"if the transaction was not already in the mempool, the effective feerate in \" + CURRENCY_UNIT + \" per KvB. For example, the package feerate and/or feerate with modified fees from prioritisetransaction.\"},\n                             {RPCResult::Type::ARR, \"effective-includes\", /*optional=*/true, \"if effective-feerate is provided, the wtxids of the transactions whose fees and vsizes are included in effective-feerate.\",\n                                 {{RPCResult::Type::STR_HEX, \"\", \"transaction wtxid in hex\"},\n                             }},\n                         }},\n+                        {RPCResult::Type::STR, \"error\", /*optional=*/true, \"The transaction error string, if it was rejected by the mempool\"},\n                     }}\n                 }},\n                 {RPCResult::Type::ARR, \"replaced-transactions\", /*optional=*/true, \"List of txids of replaced transactions\",",
      "path": "src/rpc/mempool.cpp",
      "position": 32,
      "original_position": 26,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "e77b702e3bba30032fc6c34fe251b8145fadf48b",
      "in_reply_to_id": 1390186647,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Makes sense to me. I'm in favor of returning all the information that we can to the user",
      "created_at": "2023-11-13T15:49:44Z",
      "updated_at": "2023-11-13T15:49:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391301747",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391301747"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 856,
      "original_line": 856,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391348626",
      "pull_request_review_id": 1727694604,
      "id": 1391348626,
      "node_id": "PRRC_kwDOABII585S7kuS",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;\n+            std::string package_msg = \"success\";\n+\n+            // First catch any errors and capture useful error strings.\n             switch(package_result.m_state.GetResult()) {\n-                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n-                case PackageValidationResult::PCKG_POLICY:\n+                case PackageValidationResult::PCKG_RESULT_UNSET:\n                 {\n-                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n-                        package_result.m_state.GetRejectReason());\n+                    // Everything in the package should be submitted",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Comment says \"Everything in the package should be submitted\" but you're only checking that the results exist in `m_tx_results`. Do you want to check that `mempool.exists(wtxid)` as well?",
      "created_at": "2023-11-13T16:23:10Z",
      "updated_at": "2023-11-13T16:39:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391348626",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391348626"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 900,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391354199",
      "pull_request_review_id": 1727694604,
      "id": 1391354199,
      "node_id": "PRRC_kwDOABII585S7mFX",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;\n+            std::string package_msg = \"success\";\n+\n+            // First catch any errors and capture useful error strings.\n             switch(package_result.m_state.GetResult()) {\n-                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n-                case PackageValidationResult::PCKG_POLICY:\n+                case PackageValidationResult::PCKG_RESULT_UNSET:\n                 {\n-                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n-                        package_result.m_state.GetRejectReason());\n+                    // Everything in the package should be submitted\n+                    CHECK_NONFATAL(package_result.m_tx_results.size() == txns.size());\n+                    for (const auto& tx : txns) {\n+                        wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                    }\n+                    break;\n                 }\n                 case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n                 {\n+                    // This only happens with internal bug; user should stop and report\n                     throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n                         package_result.m_state.GetRejectReason());\n                 }\n+                case PackageValidationResult::PCKG_POLICY:\n                 case PackageValidationResult::PCKG_TX:\n                 {\n+                    // Package-wide error we want to return, but we also want to return individual responses\n+                    package_msg = package_result.m_state.GetRejectReason();\n+\n                     for (const auto& tx : txns) {\n                         auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n-                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n-                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n-                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        if (it != package_result.m_tx_results.end()) {\n+                            if (it->second.m_state.IsInvalid()) {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), it->second.m_state.ToString()});\n+                            } else {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                            }\n+                        } else {\n+                            // No result returned; report this helpfully\n+                            wtixd_to_error_strings.insert({tx->GetWitnessHash(), \"unevaluated\"});\n                         }\n                     }\n-                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n-                    NONFATAL_UNREACHABLE();\n+                    break;\n                 }\n             }\n+\n             size_t num_broadcast{0};\n             for (const auto& tx : txns) {\n+                // We don't want to re-submit the txn for validation in BroadcastTransaction\n+                if (!mempool.exists(GenTxid::Txid(tx->GetHash()))) {",
      "path": "src/rpc/mempool.cpp",
      "position": 82,
      "original_position": 93,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is using txid intentional here?\r\nIf you use txid, `BroadcastTransaction` will rebroadcast the mempool tx if the result was `DIFFERENT_WITNESS`.\r\nIf you use wtxid, we skip it.",
      "created_at": "2023-11-13T16:27:25Z",
      "updated_at": "2023-11-13T16:39:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391354199",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391354199"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 924,
      "original_line": 924,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391359467",
      "pull_request_review_id": 1727694604,
      "id": 1391359467,
      "node_id": "PRRC_kwDOABII585S7nXr",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;\n+            std::string package_msg = \"success\";\n+\n+            // First catch any errors and capture useful error strings.\n             switch(package_result.m_state.GetResult()) {\n-                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n-                case PackageValidationResult::PCKG_POLICY:\n+                case PackageValidationResult::PCKG_RESULT_UNSET:\n                 {\n-                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n-                        package_result.m_state.GetRejectReason());\n+                    // Everything in the package should be submitted\n+                    CHECK_NONFATAL(package_result.m_tx_results.size() == txns.size());\n+                    for (const auto& tx : txns) {\n+                        wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                    }\n+                    break;\n                 }\n                 case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n                 {\n+                    // This only happens with internal bug; user should stop and report\n                     throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n                         package_result.m_state.GetRejectReason());\n                 }\n+                case PackageValidationResult::PCKG_POLICY:\n                 case PackageValidationResult::PCKG_TX:\n                 {\n+                    // Package-wide error we want to return, but we also want to return individual responses\n+                    package_msg = package_result.m_state.GetRejectReason();\n+\n                     for (const auto& tx : txns) {\n                         auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n-                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n-                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n-                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        if (it != package_result.m_tx_results.end()) {\n+                            if (it->second.m_state.IsInvalid()) {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), it->second.m_state.ToString()});\n+                            } else {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                            }\n+                        } else {\n+                            // No result returned; report this helpfully\n+                            wtixd_to_error_strings.insert({tx->GetWitnessHash(), \"unevaluated\"});\n                         }\n                     }\n-                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n-                    NONFATAL_UNREACHABLE();\n+                    break;\n                 }\n             }\n+\n             size_t num_broadcast{0};\n             for (const auto& tx : txns) {\n+                // We don't want to re-submit the txn for validation in BroadcastTransaction\n+                if (!mempool.exists(GenTxid::Txid(tx->GetHash()))) {\n+                    continue;\n+                }\n+\n+                // We do not expect an error here; we are only broadcasting things already/still in mempool",
      "path": "src/rpc/mempool.cpp",
      "position": 86,
      "original_position": 97,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "\"all transactions were submitted\" is not necessarily true anymore, no?",
      "created_at": "2023-11-13T16:31:34Z",
      "updated_at": "2023-11-13T16:39:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391359467",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391359467"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 928,
      "original_line": 928,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391367243",
      "pull_request_review_id": 1727694604,
      "id": 1391367243,
      "node_id": "PRRC_kwDOABII585S7pRL",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "wtxid\r\n```suggestion\r\n            std::map<Wtxid, std::optional<std::string>> wtxid_to_error_strings;\r\n```",
      "created_at": "2023-11-13T16:38:07Z",
      "updated_at": "2023-11-13T16:39:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391367243",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391367243"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 893,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391368212",
      "pull_request_review_id": 1727694604,
      "id": 1391368212,
      "node_id": "PRRC_kwDOABII585S7pgU",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": 1391367243,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "also, why have this intermediate map? can't you do this in the loop at the end that populates `rpc_result`?",
      "created_at": "2023-11-13T16:38:57Z",
      "updated_at": "2023-11-13T16:39:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391368212",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391368212"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 893,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391386220",
      "pull_request_review_id": 1727753117,
      "id": 1391386220,
      "node_id": "PRRC_kwDOABII585S7t5s",
      "diff_hunk": "@@ -836,19 +836,21 @@ static RPCHelpMan submitpackage()\n         RPCResult{\n             RPCResult::Type::OBJ, \"\", \"\",\n             {\n+                {RPCResult::Type::STR, \"package-msg\", \"The transaction package result message. \\\"success\\\" indicates all transactions were accepted into or are already in the mempool.\"},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Prefer using underscores https://github.com/bitcoin/bitcoin/pull/27501#discussion_r1184510850",
      "created_at": "2023-11-13T16:49:09Z",
      "updated_at": "2023-11-13T16:49:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391386220",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391386220"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 839,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391493778",
      "pull_request_review_id": 1727929124,
      "id": 1391493778,
      "node_id": "PRRC_kwDOABII585S8IKS",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;\n+            std::string package_msg = \"success\";\n+\n+            // First catch any errors and capture useful error strings.\n             switch(package_result.m_state.GetResult()) {\n-                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n-                case PackageValidationResult::PCKG_POLICY:\n+                case PackageValidationResult::PCKG_RESULT_UNSET:\n                 {\n-                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n-                        package_result.m_state.GetRejectReason());\n+                    // Everything in the package should be submitted",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": 1391348626,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think the check would be for `Txid` since different witness isn't considered a failure? added",
      "created_at": "2023-11-13T18:11:29Z",
      "updated_at": "2023-11-13T18:11:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391493778",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391493778"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 900,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391493855",
      "pull_request_review_id": 1727929209,
      "id": 1391493855,
      "node_id": "PRRC_kwDOABII585S8ILf",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;\n+            std::string package_msg = \"success\";\n+\n+            // First catch any errors and capture useful error strings.\n             switch(package_result.m_state.GetResult()) {\n-                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n-                case PackageValidationResult::PCKG_POLICY:\n+                case PackageValidationResult::PCKG_RESULT_UNSET:\n                 {\n-                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n-                        package_result.m_state.GetRejectReason());\n+                    // Everything in the package should be submitted\n+                    CHECK_NONFATAL(package_result.m_tx_results.size() == txns.size());\n+                    for (const auto& tx : txns) {\n+                        wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                    }\n+                    break;\n                 }\n                 case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n                 {\n+                    // This only happens with internal bug; user should stop and report\n                     throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n                         package_result.m_state.GetRejectReason());\n                 }\n+                case PackageValidationResult::PCKG_POLICY:\n                 case PackageValidationResult::PCKG_TX:\n                 {\n+                    // Package-wide error we want to return, but we also want to return individual responses\n+                    package_msg = package_result.m_state.GetRejectReason();\n+\n                     for (const auto& tx : txns) {\n                         auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n-                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n-                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n-                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        if (it != package_result.m_tx_results.end()) {\n+                            if (it->second.m_state.IsInvalid()) {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), it->second.m_state.ToString()});\n+                            } else {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                            }\n+                        } else {\n+                            // No result returned; report this helpfully\n+                            wtixd_to_error_strings.insert({tx->GetWitnessHash(), \"unevaluated\"});\n                         }\n                     }\n-                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n-                    NONFATAL_UNREACHABLE();\n+                    break;\n                 }\n             }\n+\n             size_t num_broadcast{0};\n             for (const auto& tx : txns) {\n+                // We don't want to re-submit the txn for validation in BroadcastTransaction\n+                if (!mempool.exists(GenTxid::Txid(tx->GetHash()))) {",
      "path": "src/rpc/mempool.cpp",
      "position": 82,
      "original_position": 93,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": 1391354199,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "From my understanding: The current behavior in master is to re-broadcast anything in our mempool provided the txid matches something in the proposed package. If something in our mempool matches the `txid`, we (re)`BroadcastTransaction`. If it's not in our mempool, it means it was rejected, and we don't want to re-validate one by one.\r\n\r\nI think this is the behavior we want.",
      "created_at": "2023-11-13T18:11:33Z",
      "updated_at": "2023-11-13T18:11:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391493855",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391493855"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 924,
      "original_line": 924,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391493917",
      "pull_request_review_id": 1727929303,
      "id": 1391493917,
      "node_id": "PRRC_kwDOABII585S8IMd",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;\n+            std::string package_msg = \"success\";\n+\n+            // First catch any errors and capture useful error strings.\n             switch(package_result.m_state.GetResult()) {\n-                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n-                case PackageValidationResult::PCKG_POLICY:\n+                case PackageValidationResult::PCKG_RESULT_UNSET:\n                 {\n-                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n-                        package_result.m_state.GetRejectReason());\n+                    // Everything in the package should be submitted\n+                    CHECK_NONFATAL(package_result.m_tx_results.size() == txns.size());\n+                    for (const auto& tx : txns) {\n+                        wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                    }\n+                    break;\n                 }\n                 case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n                 {\n+                    // This only happens with internal bug; user should stop and report\n                     throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n                         package_result.m_state.GetRejectReason());\n                 }\n+                case PackageValidationResult::PCKG_POLICY:\n                 case PackageValidationResult::PCKG_TX:\n                 {\n+                    // Package-wide error we want to return, but we also want to return individual responses\n+                    package_msg = package_result.m_state.GetRejectReason();\n+\n                     for (const auto& tx : txns) {\n                         auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n-                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n-                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n-                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        if (it != package_result.m_tx_results.end()) {\n+                            if (it->second.m_state.IsInvalid()) {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), it->second.m_state.ToString()});\n+                            } else {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                            }\n+                        } else {\n+                            // No result returned; report this helpfully\n+                            wtixd_to_error_strings.insert({tx->GetWitnessHash(), \"unevaluated\"});\n                         }\n                     }\n-                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n-                    NONFATAL_UNREACHABLE();\n+                    break;\n                 }\n             }\n+\n             size_t num_broadcast{0};\n             for (const auto& tx : txns) {\n+                // We don't want to re-submit the txn for validation in BroadcastTransaction\n+                if (!mempool.exists(GenTxid::Txid(tx->GetHash()))) {\n+                    continue;\n+                }\n+\n+                // We do not expect an error here; we are only broadcasting things already/still in mempool",
      "path": "src/rpc/mempool.cpp",
      "position": 86,
      "original_position": 97,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": 1391359467,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed",
      "created_at": "2023-11-13T18:11:36Z",
      "updated_at": "2023-11-13T18:11:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391493917",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391493917"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 928,
      "original_line": 928,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391493972",
      "pull_request_review_id": 1727929425,
      "id": 1391493972,
      "node_id": "PRRC_kwDOABII585S8INU",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": 1391367243,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "removed the cruft",
      "created_at": "2023-11-13T18:11:42Z",
      "updated_at": "2023-11-13T18:11:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391493972",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391493972"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 893,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391494055",
      "pull_request_review_id": 1727929580,
      "id": 1391494055,
      "node_id": "PRRC_kwDOABII585S8IOn",
      "diff_hunk": "@@ -836,19 +836,21 @@ static RPCHelpMan submitpackage()\n         RPCResult{\n             RPCResult::Type::OBJ, \"\", \"\",\n             {\n+                {RPCResult::Type::STR, \"package-msg\", \"The transaction package result message. \\\"success\\\" indicates all transactions were accepted into or are already in the mempool.\"},",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": 1391386220,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-11-13T18:11:48Z",
      "updated_at": "2023-11-13T18:11:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391494055",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391494055"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 839,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391519236",
      "pull_request_review_id": 1727969241,
      "id": 1391519236,
      "node_id": "PRRC_kwDOABII585S8OYE",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;\n+            std::string package_msg = \"success\";\n+\n+            // First catch any errors and capture useful error strings.\n             switch(package_result.m_state.GetResult()) {\n-                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n-                case PackageValidationResult::PCKG_POLICY:\n+                case PackageValidationResult::PCKG_RESULT_UNSET:\n                 {\n-                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n-                        package_result.m_state.GetRejectReason());\n+                    // Everything in the package should be submitted",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": 1391348626,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "yeah makes sense",
      "created_at": "2023-11-13T18:34:47Z",
      "updated_at": "2023-11-13T18:34:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1391519236",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1391519236"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 900,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1403265805",
      "pull_request_review_id": 1746269146,
      "id": 1403265805,
      "node_id": "PRRC_kwDOABII585TpCMN",
      "diff_hunk": "@@ -822,7 +822,7 @@ static RPCHelpMan submitpackage()\n     return RPCHelpMan{\"submitpackage\",\n         \"Submit a package of raw transactions (serialized, hex-encoded) to local node.\\n\"\n         \"The package must consist of a child with its parents, and none of the parents may depend on one another.\\n\"\n-        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If a transaction passes, it will be accepted to mempool.\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "d72aab3dbd8847e851f8b724b195181e30e7bf02",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "a -> any ?",
      "created_at": "2023-11-23T11:42:54Z",
      "updated_at": "2023-11-23T12:26:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1403265805",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1403265805"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 825,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1403273829",
      "pull_request_review_id": 1746269146,
      "id": 1403273829,
      "node_id": "PRRC_kwDOABII585TpEJl",
      "diff_hunk": "@@ -822,7 +822,7 @@ static RPCHelpMan submitpackage()\n     return RPCHelpMan{\"submitpackage\",\n         \"Submit a package of raw transactions (serialized, hex-encoded) to local node.\\n\"\n         \"The package must consist of a child with its parents, and none of the parents may depend on one another.\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": 3,
      "original_position": 3,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "d72aab3dbd8847e851f8b724b195181e30e7bf02",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "consist of parents followed by exactly one child,",
      "created_at": "2023-11-23T11:49:59Z",
      "updated_at": "2023-11-23T12:26:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1403273829",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1403273829"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 824,
      "original_line": 824,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1403281170",
      "pull_request_review_id": 1746269146,
      "id": 1403281170,
      "node_id": "PRRC_kwDOABII585TpF8S",
      "diff_hunk": "@@ -822,7 +822,7 @@ static RPCHelpMan submitpackage()\n     return RPCHelpMan{\"submitpackage\",\n         \"Submit a package of raw transactions (serialized, hex-encoded) to local node.\\n\"\n         \"The package must consist of a child with its parents, and none of the parents may depend on one another.\\n\"\n-        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If a transaction passes, it will be accepted to mempool.\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "d72aab3dbd8847e851f8b724b195181e30e7bf02",
      "in_reply_to_id": 1403265805,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe add: \"A transaction that's already in the mempool is [ignored, rebroadcast?].\"",
      "created_at": "2023-11-23T11:52:15Z",
      "updated_at": "2023-11-23T12:26:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1403281170",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1403281170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 825,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1403506481",
      "pull_request_review_id": 1746652527,
      "id": 1403506481,
      "node_id": "PRRC_kwDOABII585Tp88x",
      "diff_hunk": "@@ -205,7 +206,7 @@ def test_mid_package_eviction(self):\n \n         # Package should be submitted, temporarily exceeding maxmempool, and then evicted.\n         with node.assert_debug_log(expected_msgs=[\"rolling minimum fee bumped\"]):\n-            assert_raises_rpc_error(-26, \"mempool full\", node.submitpackage, package_hex)\n+            node.submitpackage(package_hex)",
      "path": "test/functional/mempool_limit.py",
      "position": null,
      "original_position": 17,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "d72aab3dbd8847e851f8b724b195181e30e7bf02",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Do you still want to check \"mempool full\" like below?",
      "created_at": "2023-11-23T15:10:51Z",
      "updated_at": "2023-11-23T15:21:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1403506481",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1403506481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406419723",
      "pull_request_review_id": 1750846633,
      "id": 1406419723,
      "node_id": "PRRC_kwDOABII585T1EML",
      "diff_hunk": "@@ -205,7 +206,7 @@ def test_mid_package_eviction(self):\n \n         # Package should be submitted, temporarily exceeding maxmempool, and then evicted.\n         with node.assert_debug_log(expected_msgs=[\"rolling minimum fee bumped\"]):\n-            assert_raises_rpc_error(-26, \"mempool full\", node.submitpackage, package_hex)\n+            node.submitpackage(package_hex)",
      "path": "test/functional/mempool_limit.py",
      "position": null,
      "original_position": 17,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "d72aab3dbd8847e851f8b724b195181e30e7bf02",
      "in_reply_to_id": 1403506481,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "the check itself is a little weird, so I just double-checked that the package failed. The later checks should check invariants.",
      "created_at": "2023-11-27T16:21:19Z",
      "updated_at": "2023-11-27T16:21:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1406419723",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406419723"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406419792",
      "pull_request_review_id": 1750846734,
      "id": 1406419792,
      "node_id": "PRRC_kwDOABII585T1ENQ",
      "diff_hunk": "@@ -822,7 +822,7 @@ static RPCHelpMan submitpackage()\n     return RPCHelpMan{\"submitpackage\",\n         \"Submit a package of raw transactions (serialized, hex-encoded) to local node.\\n\"\n         \"The package must consist of a child with its parents, and none of the parents may depend on one another.\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": 3,
      "original_position": 3,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "d72aab3dbd8847e851f8b724b195181e30e7bf02",
      "in_reply_to_id": 1403273829,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "leaving un-touched, I think current text is correct",
      "created_at": "2023-11-27T16:21:22Z",
      "updated_at": "2023-11-27T16:21:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1406419792",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406419792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 824,
      "original_line": 824,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406420001",
      "pull_request_review_id": 1750847040,
      "id": 1406420001,
      "node_id": "PRRC_kwDOABII585T1EQh",
      "diff_hunk": "@@ -822,7 +822,7 @@ static RPCHelpMan submitpackage()\n     return RPCHelpMan{\"submitpackage\",\n         \"Submit a package of raw transactions (serialized, hex-encoded) to local node.\\n\"\n         \"The package must consist of a child with its parents, and none of the parents may depend on one another.\\n\"\n-        \"The package will be validated according to consensus and mempool policy rules. If all transactions pass, they will be accepted to mempool.\\n\"\n+        \"The package will be validated according to consensus and mempool policy rules. If a transaction passes, it will be accepted to mempool.\\n\"",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "d72aab3dbd8847e851f8b724b195181e30e7bf02",
      "in_reply_to_id": 1403265805,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> a -> any ?\r\n\r\ntaken\r\n\r\n> Maybe add: \"A transaction that's already in the mempool is [ignored, rebroadcast?].\"\r\n\r\nDo we want to promise that? I'm ambivalent for now.",
      "created_at": "2023-11-27T16:21:31Z",
      "updated_at": "2023-11-27T16:21:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1406420001",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406420001"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 825,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406474920",
      "pull_request_review_id": 1750934108,
      "id": 1406474920,
      "node_id": "PRRC_kwDOABII585T1Rqo",
      "diff_hunk": "@@ -888,34 +890,57 @@ static RPCHelpMan submitpackage()\n             Chainstate& chainstate = EnsureChainman(node).ActiveChainstate();\n             const auto package_result = WITH_LOCK(::cs_main, return ProcessNewPackage(chainstate, mempool, txns, /*test_accept=*/ false));\n \n-            // First catch any errors.\n+            std::map<Wtxid, std::optional<std::string>> wtixd_to_error_strings;\n+            std::string package_msg = \"success\";\n+\n+            // First catch any errors and capture useful error strings.\n             switch(package_result.m_state.GetResult()) {\n-                case PackageValidationResult::PCKG_RESULT_UNSET: break;\n-                case PackageValidationResult::PCKG_POLICY:\n+                case PackageValidationResult::PCKG_RESULT_UNSET:\n                 {\n-                    throw JSONRPCTransactionError(TransactionError::INVALID_PACKAGE,\n-                        package_result.m_state.GetRejectReason());\n+                    // Everything in the package should be submitted\n+                    CHECK_NONFATAL(package_result.m_tx_results.size() == txns.size());\n+                    for (const auto& tx : txns) {\n+                        wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                    }\n+                    break;\n                 }\n                 case PackageValidationResult::PCKG_MEMPOOL_ERROR:\n                 {\n+                    // This only happens with internal bug; user should stop and report\n                     throw JSONRPCTransactionError(TransactionError::MEMPOOL_ERROR,\n                         package_result.m_state.GetRejectReason());\n                 }\n+                case PackageValidationResult::PCKG_POLICY:\n                 case PackageValidationResult::PCKG_TX:\n                 {\n+                    // Package-wide error we want to return, but we also want to return individual responses\n+                    package_msg = package_result.m_state.GetRejectReason();\n+\n                     for (const auto& tx : txns) {\n                         auto it = package_result.m_tx_results.find(tx->GetWitnessHash());\n-                        if (it != package_result.m_tx_results.end() && it->second.m_state.IsInvalid()) {\n-                            throw JSONRPCTransactionError(TransactionError::MEMPOOL_REJECTED,\n-                                strprintf(\"%s failed: %s\", tx->GetHash().ToString(), it->second.m_state.GetRejectReason()));\n+                        if (it != package_result.m_tx_results.end()) {\n+                            if (it->second.m_state.IsInvalid()) {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), it->second.m_state.ToString()});\n+                            } else {\n+                                wtixd_to_error_strings.insert({tx->GetWitnessHash(), std::nullopt});\n+                            }\n+                        } else {\n+                            // No result returned; report this helpfully\n+                            wtixd_to_error_strings.insert({tx->GetWitnessHash(), \"unevaluated\"});\n                         }\n                     }\n-                    // If a PCKG_TX error was returned, there must have been an invalid transaction.\n-                    NONFATAL_UNREACHABLE();\n+                    break;\n                 }\n             }\n+\n             size_t num_broadcast{0};\n             for (const auto& tx : txns) {\n+                // We don't want to re-submit the txn for validation in BroadcastTransaction\n+                if (!mempool.exists(GenTxid::Txid(tx->GetHash()))) {",
      "path": "src/rpc/mempool.cpp",
      "position": 82,
      "original_position": 93,
      "commit_id": "4fb3340a1ac678165e6821645e6aa1e06f34921a",
      "original_commit_id": "ddd9224f09fc136544713701a4552f217b1c53c6",
      "in_reply_to_id": 1391354199,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah true, agree",
      "created_at": "2023-11-27T17:01:04Z",
      "updated_at": "2023-11-27T17:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28848#discussion_r1406474920",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406474920"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28848"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 924,
      "original_line": 924,
      "side": "RIGHT"
    }
  ]
}