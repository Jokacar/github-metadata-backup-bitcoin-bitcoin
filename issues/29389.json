{
  "type": "issue",
  "issue": {
    "id": 2119611589,
    "node_id": "I_kwDOABII585-VrTF",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29389",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29389/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29389/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29389/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/29389",
    "number": 29389,
    "state": "open",
    "state_reason": null,
    "title": "Monkey Test Feature (MTF)",
    "body": "### Monkey Test Feature (MTF)\r\n\r\nConsider the following scenario:\r\n\r\nSay Chad has a Bitcoin wallet and wants to send a large amount of Bitcoins to another wallet. Chad decides to send a smaller test amount first to make sure everything is OK. Chad proceeds to sign and send the transaction, however, the software has two bugs that transmit his entire balance to a wallet that is not under Chads control. Wouldn't it be nice to be able to perform a formal test (what i call a Monkey Test) that leverages the logic of the send utilities with a predefined amount (the minimal amount of Bitcoin one can conceivably send) that way these two theoretical bugs don't wipe out the entire wallet, allowing you to test one piece of functionality in isolation?\r\n\r\nMTF can also stand for M%%%%er F%%%er!, which is what we say when these two bugs compound one another to create total loss of funds when we are also trying to be responsible.\r\n",
    "user": {
      "login": "ThunderCat1000",
      "id": 107733608,
      "node_id": "U_kgDOBmviaA",
      "avatar_url": "https://avatars.githubusercontent.com/u/107733608?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ThunderCat1000",
      "html_url": "https://github.com/ThunderCat1000",
      "followers_url": "https://api.github.com/users/ThunderCat1000/followers",
      "following_url": "https://api.github.com/users/ThunderCat1000/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ThunderCat1000/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ThunderCat1000/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ThunderCat1000/subscriptions",
      "organizations_url": "https://api.github.com/users/ThunderCat1000/orgs",
      "repos_url": "https://api.github.com/users/ThunderCat1000/repos",
      "events_url": "https://api.github.com/users/ThunderCat1000/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ThunderCat1000/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 2,
    "created_at": "2024-02-05T22:54:03Z",
    "updated_at": "2024-02-06T00:57:03Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 11710847801,
      "node_id": "LE_lADOABII585-VrTFzwAAAAK6BVs5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11710847801",
      "actor": {
        "login": "ThunderCat1000",
        "id": 107733608,
        "node_id": "U_kgDOBmviaA",
        "avatar_url": "https://avatars.githubusercontent.com/u/107733608?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ThunderCat1000",
        "html_url": "https://github.com/ThunderCat1000",
        "followers_url": "https://api.github.com/users/ThunderCat1000/followers",
        "following_url": "https://api.github.com/users/ThunderCat1000/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ThunderCat1000/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ThunderCat1000/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ThunderCat1000/subscriptions",
        "organizations_url": "https://api.github.com/users/ThunderCat1000/orgs",
        "repos_url": "https://api.github.com/users/ThunderCat1000/repos",
        "events_url": "https://api.github.com/users/ThunderCat1000/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ThunderCat1000/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-05T22:54:03Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "commented",
      "id": 1928516796,
      "node_id": "IC_kwDOABII585y8tS8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1928516796",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-05T23:44:47Z",
      "updated_at": "2024-02-05T23:44:47Z",
      "author_association": "MEMBER",
      "body": "I don't see how this is at all useful. If you are concerned about the existence of such a bug, then you can make the test transactions yourself. However I don't see how such test transactions would safeguard the sender anyways - if there exists a bug that can send all funds in the wallet to someone else, then making a test transaction could hit that bug and send all funds regardless.\r\n\r\nA better method is to split up the steps of unsigned transaction creation, transaction signing, and transaction broadcast, and inspect the transaction after each step to verify that the transaction is indeed what you want. This can be done with PSBTs. You can create an unsigned transaction with `walletcreatefundedpsbt`. You can inspect the result with `decodepsbt` and check that the output addresses and amounts are what you expect them to be. You can sign by using `walletprocesspsbt` and then result again to make sure it hasn't changed except that signatures have been added. And then you can broadcast using `sendrawtransaction`. There are GUI counterparts for all of these too.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29389#issuecomment-1928516796",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29389"
    },
    {
      "event": "commented",
      "id": 1928583380,
      "node_id": "IC_kwDOABII585y89jU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1928583380",
      "actor": {
        "login": "ThunderCat1000",
        "id": 107733608,
        "node_id": "U_kgDOBmviaA",
        "avatar_url": "https://avatars.githubusercontent.com/u/107733608?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ThunderCat1000",
        "html_url": "https://github.com/ThunderCat1000",
        "followers_url": "https://api.github.com/users/ThunderCat1000/followers",
        "following_url": "https://api.github.com/users/ThunderCat1000/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ThunderCat1000/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ThunderCat1000/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ThunderCat1000/subscriptions",
        "organizations_url": "https://api.github.com/users/ThunderCat1000/orgs",
        "repos_url": "https://api.github.com/users/ThunderCat1000/repos",
        "events_url": "https://api.github.com/users/ThunderCat1000/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ThunderCat1000/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-06T00:57:01Z",
      "updated_at": "2024-02-06T00:57:01Z",
      "author_association": "NONE",
      "body": "The idea was that there can exist 2 bugs that work together to deplete your wallet when you are merely sending a dust transaction using a normal wallet. A standard feature for wallets to test one part of the transaction in isolation (the send to address function) without being impacted by other code that has a dynamic amount for the transaction, would give peace of mind without the complexity of the process you are suggesting. Hence the name \"Monkey Test\"",
      "user": {
        "login": "ThunderCat1000",
        "id": 107733608,
        "node_id": "U_kgDOBmviaA",
        "avatar_url": "https://avatars.githubusercontent.com/u/107733608?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ThunderCat1000",
        "html_url": "https://github.com/ThunderCat1000",
        "followers_url": "https://api.github.com/users/ThunderCat1000/followers",
        "following_url": "https://api.github.com/users/ThunderCat1000/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ThunderCat1000/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ThunderCat1000/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ThunderCat1000/subscriptions",
        "organizations_url": "https://api.github.com/users/ThunderCat1000/orgs",
        "repos_url": "https://api.github.com/users/ThunderCat1000/repos",
        "events_url": "https://api.github.com/users/ThunderCat1000/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ThunderCat1000/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29389#issuecomment-1928583380",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29389"
    }
  ]
}