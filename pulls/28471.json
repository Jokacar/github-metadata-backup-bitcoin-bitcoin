{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471",
    "id": 1514289105,
    "node_id": "PR_kwDOABII585aQjfR",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28471",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28471.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28471.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
    "number": 28471,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Fix virtual size limit enforcement in transaction package context",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "(Alternative) Minimal subset of https://github.com/bitcoin/bitcoin/pull/28345 to:\r\n\r\n1) Replace MAX_PACKAGE_SIZE with MAX_PACKAGE_WEIGHT which accounts for additional WU necessary to not exclude default chain limit transactions that would have been accepted individually. Avoids sigops vbyte confusion.\r\n2) pass correct vsize to chain limit evaluations in package context\r\n3) stop overly-large packages that have no existing mempool ancestors (also a bugfix by itself if someone sets non-standard chain limits)\r\n\r\nThis should fix the known issues while not blocking additional refactoring later.",
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 82428251,
        "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
        "name": "TX fees and policy",
        "color": "5319e7",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2023-09-13T17:34:31Z",
    "updated_at": "2023-09-15T15:09:49Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "2f40e5c4716b0b956f87d7390f38b0bed63a39de",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "instagibbs:package_eval_sigops",
      "ref": "package_eval_sigops",
      "sha": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 13910191,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMzkxMDE5MQ==",
        "name": "bitcoin",
        "full_name": "instagibbs/bitcoin",
        "owner": {
          "login": "instagibbs",
          "id": 5767891,
          "node_id": "MDQ6VXNlcjU3Njc4OTE=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/instagibbs",
          "html_url": "https://github.com/instagibbs",
          "followers_url": "https://api.github.com/users/instagibbs/followers",
          "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
          "organizations_url": "https://api.github.com/users/instagibbs/orgs",
          "repos_url": "https://api.github.com/users/instagibbs/repos",
          "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/instagibbs/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/instagibbs/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/instagibbs/bitcoin",
        "archive_url": "https://api.github.com/repos/instagibbs/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/instagibbs/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/instagibbs/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/instagibbs/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/instagibbs/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/instagibbs/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/instagibbs/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/instagibbs/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/instagibbs/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/instagibbs/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/instagibbs/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/instagibbs/bitcoin/events",
        "forks_url": "https://api.github.com/repos/instagibbs/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/instagibbs/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/instagibbs/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/instagibbs/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/instagibbs/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/instagibbs/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/instagibbs/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/instagibbs/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/instagibbs/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/instagibbs/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/instagibbs/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/instagibbs/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/instagibbs/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:instagibbs/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/instagibbs/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/instagibbs/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/instagibbs/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/instagibbs/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/instagibbs/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/instagibbs/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/instagibbs/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/instagibbs/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/instagibbs/bitcoin/hooks",
        "svn_url": "https://github.com/instagibbs/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 220074,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-15T15:09:39Z",
        "created_at": "2013-10-27T20:56:53Z",
        "updated_at": "2022-12-28T23:57:23Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "5c7cdda992442d8b1dce5bc4b239e8645c507a3c",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35678,
        "stargazers_count": 71362,
        "watchers_count": 71362,
        "size": 239508,
        "default_branch": "master",
        "open_issues_count": 687,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-15T15:09:44Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-09-15T15:13:49Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 106,
    "deletions": 29,
    "changed_files": 8,
    "commits": 4,
    "review_comments": 24,
    "comments": 4
  },
  "events": [
    {
      "event": "commented",
      "id": 1718044144,
      "node_id": "IC_kwDOABII585mZ0Xw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1718044144",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T17:34:34Z",
      "updated_at": "2023-09-15T13:57:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1629000702) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28472](https://github.com/bitcoin/bitcoin/pull/28472) (Remove MemPoolAccept::m_limits to avoid mutating it in package evaluation by instagibbs)\n* [#26711](https://github.com/bitcoin/bitcoin/pull/26711) (validate package transactions with their in-package ancestor sets by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1718044144",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T18:08:33Z",
      "updated_at": "2023-09-13T18:08:33Z",
      "source": {
        "issue": {
          "id": 1890612597,
          "node_id": "PR_kwDOABII585aB2AA",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28450",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28450/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28450/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28450/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28450",
          "number": 28450,
          "state": "open",
          "state_reason": null,
          "title": "Add package evaluation fuzzer",
          "body": "This fuzzer target caught the issue in https://github.com/bitcoin/bitcoin/pull/28251 within 5 minutes on master branch, and an additional issue which I've applied a preliminary patch to cover.\r\n\r\nFuzzer target does the following:\r\n\r\n1) Picks mempool confgs, including max package size, count, mempool size, etc\r\n2) Generates 1 to 26 transactions with arbitrary coins/fees, the first N-1 spending only confirmed outpoints\r\n3) Nth transaction, if >1, sweeps all unconfirmed outpoints in mempool\r\n4) If N==1, it may submit it through single-tx submission path, to allow for more interesting topologies\r\n5) Otherwise submits through package submission interface\r\n6) Repeat 1-5  a few hundred times per mempool instance\r\n\r\nIn other words, it ends up building chains of txns in the mempool using parents-and-children packages, which is currently the topology supported on master.\r\n\r\nThe test itself is a direct rip of tx_pool.cpp, with a number of assertions removed because they were failing for unknown reasons, likely due to the notification changes of single tx submission to package, which is used to track addition/removal of transactions in the test. I'll continue working on re-adding these assertions for further invariant testing.\r\n\r\nSecond commit is a commit that's required to not crash on master, also included in https://github.com/bitcoin/bitcoin/pull/28471",
          "user": {
            "login": "instagibbs",
            "id": 5767891,
            "node_id": "MDQ6VXNlcjU3Njc4OTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/instagibbs",
            "html_url": "https://github.com/instagibbs",
            "followers_url": "https://api.github.com/users/instagibbs/followers",
            "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
            "organizations_url": "https://api.github.com/users/instagibbs/orgs",
            "repos_url": "https://api.github.com/users/instagibbs/repos",
            "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/instagibbs/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28450",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28450",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28450.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28450.patch"
          },
          "created_at": "2023-09-11T14:10:48Z",
          "updated_at": "2023-09-15T13:46:44Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1626338420,
      "node_id": "PRR_kwDOABII585g7_R0",
      "url": null,
      "actor": null,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK, thanks for taking this over!",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1626338420",
      "submitted_at": "2023-09-14T08:40:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "reviewed",
      "id": 1626349423,
      "node_id": "PRR_kwDOABII585g8B9v",
      "url": null,
      "actor": null,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1626349423",
      "submitted_at": "2023-09-14T08:42:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T08:54:06Z",
      "updated_at": "2023-09-14T08:54:06Z",
      "source": {
        "issue": {
          "id": 1668056618,
          "node_id": "I_kwDOABII585jbIYq",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/27463",
          "number": 27463,
          "state": "open",
          "state_reason": null,
          "title": "Package Relay Project Tracking",
          "body": "This issue will be edited frequently to reflect the current status of the project.\r\n\r\n**What should I review now?**\r\n:point_down: :point_down: :point_down: :point_down: :point_down: :point_down: :point_down:\r\n#28471 #28450 #28472 #28481\r\n:point_up: :point_up: :point_up: :point_up: :point_up: :point_up: :point_up:\r\n\r\n**Mempool, Policy, Validation**\r\n- [x] Enable validation of multiple transactions in ATMP\r\n  - [x] Refactoring #21062, #22675, #23381\r\n  - [x] #20833\r\n  - [x] #21800\r\n  - [x] #22674\r\n- [x] #24152\r\n- [x] #24836 \r\n- [x] Avoid the risk of below-minrelaytxfee transactions hanging around forever in the mempool (currently only possible through reorgs and replacements after package CPFP). There are multiple options:\r\n   - Don't ever allow v1 and v2 txs below minrelaytxfee (#26933)\r\n   - Mine everything that makes it into in the mempool (default blockmintxfee to 0). Trim descendant packages <=0 fees, even when the mempool is not full (#27018)\r\n   - Other long-term improvements that address this problem, e.g. #27677.\r\n- [x] #28251\r\n- [ ] #28471\r\n- [ ] #28450\r\n- [ ] #28472\r\n- [ ] #26711\r\n- (Some existing DoS and incentive compatibility issues are addressed. It is safe to expose this interface on P2P)\r\n\r\n**Additional Policy**\r\n- [ ] Add v3 rules that make transactions/packages easier to work with (#25038)\r\n- [ ] Introduce a Miner Incentive Compatibility Score rule to RBF\r\n  - This is done for v3 transactions in #25038.\r\n  - Cluster-based mempool would allow this for all transactions: #27677.\r\n- [ ] Enable Package RBF for v3 transactions (#25038)\r\n- (Things like LN can sign things 0-fee, add fees at broadcast, and avoid pinning attacks. Assuming package relay is available.)\r\n- [ ] Add Ephemeral Anchors rules for v3 transactions (#26403)\r\n- (LN symmetry and other things can have 0-value anchors.)\r\n\r\n**P2P, Net Processing**\r\nFull implementation: #27742\r\n- [ ] BIP 331 (bitcoin/bips/pull/1382)\r\n- [ ] #28031\r\n  - [x] #28199\r\n  - [x] #28364\r\n  - [ ] #28481\r\n- (Orphan-handling is more robust)\r\n- [ ] (Milestone 2/3) Negotiate package relay support with peers, gated by config flag (`sendpackages`). Request ancestor package information for orphans (`MSG_ANCPKGINFO`, `ancpkginfo`).\r\n- (Assuming adoption, in most cases, package relay nodes never need to use txid-based relay)\r\n- [ ] (Milestone 3/3) Using package info, request (`getpkgtxns`), download (`pkgtxns`), and submit packages together.\r\n  - [ ] Introduce a mechanism for protecting orphan transactions from eviction.\r\n  - [ ] Avoid telling legacy peers about transactions that depend on below-fee-filter parents.\r\n- [ ] Default `-packagerelay` config flag to true.\r\n- (Assuming adoption, below-mempool min feerate CPFP'd transactions propagate.)",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            },
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 10,
          "created_at": "2023-04-14T11:14:50Z",
          "updated_at": "2023-09-14T14:02:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1626396875,
      "node_id": "PRR_kwDOABII585g8NjL",
      "url": null,
      "actor": null,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1626396875",
      "submitted_at": "2023-09-14T08:58:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T10:50:30Z",
      "updated_at": "2023-09-14T10:50:30Z",
      "source": {
        "issue": {
          "id": 1500046485,
          "node_id": "PR_kwDOABII585FocrT",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26711",
          "number": 26711,
          "state": "open",
          "state_reason": null,
          "title": "validate package transactions with their in-package ancestor sets",
          "body": "Builds on #28471 #28450 #28472, please review those first.\r\n\r\nThis contains everything to make mempool/validation logic ready for package relay (see #27463).\r\n\r\nThe hope here is to end up with the incentive-compatible transactions in our mempool. Prior to this commit, if parents within the package relied on each other, we could end up (1) accepting a low-feerate child or (2) rejecting high-feerate parents. See the \"interdependent parents\" test case for a specific example.\r\n\r\nA description of the package validation logic: https://github.com/bitcoin/bitcoin/pull/26711#issuecomment-1647523520",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26711",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26711",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26711.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26711.patch"
          },
          "created_at": "2022-12-16T11:27:00Z",
          "updated_at": "2023-09-15T02:45:44Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1719231937,
      "node_id": "IC_kwDOABII585meWXB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1719231937",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T10:59:02Z",
      "updated_at": "2023-09-14T10:59:02Z",
      "author_association": "MEMBER",
      "body": "Can you add tests for the bug fixes?",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1719231937",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T19:34:53Z",
      "updated_at": "2023-09-14T19:34:53Z",
      "source": {
        "issue": {
          "id": 1895049059,
          "node_id": "PR_kwDOABII585aQ1WG",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28472",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28472/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28472/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28472/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28472",
          "number": 28472,
          "state": "open",
          "state_reason": null,
          "title": "Remove MemPoolAccept::m_limits to avoid mutating it in package evaluation",
          "body": "Without remoing it, if we ever call `PreChecks()` multiple times for any reason during any one `MempoolAccept`, subsequent invocations may have incorrect limits, allowing longer/larger chains than should be allowed.\r\n\r\nCurrently this is only an issue with `submitpackage`, so this is not exposed on mainnet.",
          "user": {
            "login": "instagibbs",
            "id": 5767891,
            "node_id": "MDQ6VXNlcjU3Njc4OTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/instagibbs",
            "html_url": "https://github.com/instagibbs",
            "followers_url": "https://api.github.com/users/instagibbs/followers",
            "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
            "organizations_url": "https://api.github.com/users/instagibbs/orgs",
            "repos_url": "https://api.github.com/users/instagibbs/repos",
            "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/instagibbs/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28472",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28472",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28472.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28472.patch"
          },
          "created_at": "2023-09-13T18:33:27Z",
          "updated_at": "2023-09-15T15:37:20Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10376647921,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJqfxTx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10376647921",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T20:32:35Z"
    },
    {
      "event": "commented",
      "id": 1720109700,
      "node_id": "IC_kwDOABII585mhsqE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1720109700",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T20:34:32Z",
      "updated_at": "2023-09-14T20:34:32Z",
      "author_association": "MEMBER",
      "body": "> Can you add tests for the bug fixes?\r\n\r\nAdded.",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1720109700",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "reviewed",
      "id": 1628558831,
      "node_id": "PRR_kwDOABII585hEdXv",
      "url": null,
      "actor": null,
      "commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "LGTM except worried about rounding and error strings. Also a few nits on the test.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1628558831",
      "submitted_at": "2023-09-15T10:10:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10383504378,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq57P6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383504378",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:26:25Z"
    },
    {
      "event": "reviewed",
      "id": 1628960489,
      "node_id": "PRR_kwDOABII585hF_bp",
      "url": null,
      "actor": null,
      "commit_id": "0ad836975b435b3a26eb4008c65e976a64e08f04",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1628960489",
      "submitted_at": "2023-09-15T13:32:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10383649588,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq6es0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383649588",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:40:06Z"
    },
    {
      "event": "reviewed",
      "id": 1629000702,
      "node_id": "PRR_kwDOABII585hGJP-",
      "url": null,
      "actor": null,
      "commit_id": "3a4adfbfa6a947721bf140a534fb2aefdf0922fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 3a4adfbfa6a947721bf140a534fb2aefdf0922fd with a doc nit",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1629000702",
      "submitted_at": "2023-09-15T13:56:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10383834151,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq7Lwn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383834151",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:57:44Z"
    },
    {
      "event": "commented",
      "id": 1721330494,
      "node_id": "IC_kwDOABII585mmWs-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1721330494",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z",
      "updated_at": "2023-09-15T13:59:14Z",
      "author_association": "MEMBER",
      "body": "Could we get a review from maybe @luke-jr or @ariard?",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#issuecomment-1721330494",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28471"
    },
    {
      "event": "mentioned",
      "id": 10383849686,
      "node_id": "MEE_lADOABII585w8ugDzwAAAAJq7PjW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383849686",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z"
    },
    {
      "event": "subscribed",
      "id": 10383849700,
      "node_id": "SE_lADOABII585w8ugDzwAAAAJq7Pjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383849700",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z"
    },
    {
      "event": "mentioned",
      "id": 10383849714,
      "node_id": "MEE_lADOABII585w8ugDzwAAAAJq7Pjy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383849714",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z"
    },
    {
      "event": "subscribed",
      "id": 10383849729,
      "node_id": "SE_lADOABII585w8ugDzwAAAAJq7PkB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383849729",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T13:59:14Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T14:00:34Z",
      "updated_at": "2023-09-15T14:00:34Z",
      "source": {
        "issue": {
          "id": 906098291,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjU3MTMyNDg2",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22097",
          "number": 22097,
          "state": "closed",
          "state_reason": null,
          "title": "validation: Move package acceptance size limit from KvB to WU",
          "body": "Class of second-layers applications interested by the package acceptance API are mostly relying on trustless chain of transactions which are necessarily made of segwit input. As such, most of them are making their internal propagation sanity checks and feerate computations already in weight units (at least I can confirm for Lightning, it's mandatory in the spec to announce `feerate_per_kw` to your counterparty).\r\n\r\nTo reduce odds of bugs in second-layers implementations, such as the one mentioned in #13283, this PR changes the package acceptance size limit from kilo-bytes to weight units.\r\n\r\nE.g an internal Lightning onchain logic with an already-computed package weight of 404_002 (100_000 bytes of regular fields, 4002 bytes of witness fields), dividing by WITNESS_SCALE_FACTOR, obtaining 101_000 virtual bytes, checking against MAX_PACKAGE_SIZE and then wrongly evaluating the package as valid for mempool acceptance.\r\n\r\nIt also matches our max transaction size check already expressed in weight units (`MAX_STANDARD_TX_WEIGHT`).",
          "user": {
            "login": "ariard",
            "id": 23310655,
            "node_id": "MDQ6VXNlcjIzMzEwNjU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ariard",
            "html_url": "https://github.com/ariard",
            "followers_url": "https://api.github.com/users/ariard/followers",
            "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
            "organizations_url": "https://api.github.com/users/ariard/orgs",
            "repos_url": "https://api.github.com/users/ariard/repos",
            "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ariard/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22097",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22097",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22097.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22097.patch"
          },
          "closed_at": "2022-07-09T00:00:02Z",
          "created_at": "2021-05-28T21:37:41Z",
          "updated_at": "2023-09-15T14:00:34Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 10383884171,
      "node_id": "LE_lADOABII585w8ugDzwAAAAJq7X-L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10383884171",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T14:02:12Z",
      "label": {
        "name": "TX fees and policy",
        "color": "5319e7"
      }
    },
    {
      "event": "reviewed",
      "id": 1629076299,
      "node_id": "PRR_kwDOABII585hGbtL",
      "url": null,
      "actor": null,
      "commit_id": "204249bb727e23d9e01ae5c3947c2533e893914e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#pullrequestreview-1629076299",
      "submitted_at": "2023-09-15T14:25:48Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
    },
    {
      "event": "labeled",
      "id": 10384193095,
      "node_id": "LE_lADOABII585w8ugDzwAAAAJq8jZH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10384193095",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T14:30:16Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10384571691,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq9_0r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10384571691",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T15:04:48Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFmMjVkMGU2Mjk4MjBhODg1YTk0MjVkOGUwMTE1MDg3ZjgxODNjYjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1f25d0e629820a885a9425d8e0115087f8183cb3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1f25d0e629820a885a9425d8e0115087f8183cb3",
      "tree": {
        "sha": "e83296f1aba0b0c7335c10ed3300c8cced42a243",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e83296f1aba0b0c7335c10ed3300c8cced42a243"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f1a9fd627b1a669c4dfab797da42825230708f2a",
          "sha": "f1a9fd627b1a669c4dfab797da42825230708f2a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f1a9fd627b1a669c4dfab797da42825230708f2a"
        }
      ],
      "message": "Replace MAX_PACKAGE_SIZE with MAX_PACKAGE_WEIGHT to avoid vbyte confusion\n\nWhile allowing submitted packages to be slightly larger than what\nmay be allowed in the mempool to allow simpler reasoning\nabout contextual-less checks vs chain limits.",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-15T15:09:34Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-13T17:13:57Z"
      },
      "sha": "1f25d0e629820a885a9425d8e0115087f8183cb3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBiNTdlZTJkZDk3NzQ1ZjgzMmI5ZTE1Y2JhNjc4NzcwNDIwNjJmM2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b57ee2dd97745f832b9e15cba67877042062f3b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0b57ee2dd97745f832b9e15cba67877042062f3b",
      "tree": {
        "sha": "1f993485979fe0a2cdc3c2abff0b2306ce3ae036",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1f993485979fe0a2cdc3c2abff0b2306ce3ae036"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1f25d0e629820a885a9425d8e0115087f8183cb3",
          "sha": "1f25d0e629820a885a9425d8e0115087f8183cb3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1f25d0e629820a885a9425d8e0115087f8183cb3"
        }
      ],
      "message": "Bugfix: Pass correct virtual size to CheckPackageLimits",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-15T15:09:35Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-08-26T00:09:16Z"
      },
      "sha": "0b57ee2dd97745f832b9e15cba67877042062f3b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgzNjIxYjhlODFkMDQyNzM2Y2Y2ODA2MWY0YmJmNjIwYWQ1OTJiODY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/83621b8e81d042736cf68061f4bbf620ad592b86",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/83621b8e81d042736cf68061f4bbf620ad592b86",
      "tree": {
        "sha": "f6f2d8738212f32cc4b45c26f1ab84f1006839b0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f6f2d8738212f32cc4b45c26f1ab84f1006839b0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b57ee2dd97745f832b9e15cba67877042062f3b",
          "sha": "0b57ee2dd97745f832b9e15cba67877042062f3b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0b57ee2dd97745f832b9e15cba67877042062f3b"
        }
      ],
      "message": "Handle over-sized (in virtual bytes) packages with no in-mempool ancestors",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-15T15:09:35Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-11T13:55:39Z"
      },
      "sha": "83621b8e81d042736cf68061f4bbf620ad592b86"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk3ZDUzZmY0YzNlZGUxZDFmZGM2ZDkzMzg2ZjE0YzIzMGIwM2I5OGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "tree": {
        "sha": "07c3cf8fe258799258e4e74b45f2037a0378c0df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/07c3cf8fe258799258e4e74b45f2037a0378c0df"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/83621b8e81d042736cf68061f4bbf620ad592b86",
          "sha": "83621b8e81d042736cf68061f4bbf620ad592b86",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/83621b8e81d042736cf68061f4bbf620ad592b86"
        }
      ],
      "message": "Add functional test to catch too large vsize packages",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-15T15:09:35Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2023-09-14T20:29:55Z"
      },
      "sha": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10384622922,
      "node_id": "HRFPE_lADOABII585w8ugDzwAAAAJq-MVK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10384622922",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T15:09:43Z"
    },
    {
      "event": "labeled",
      "id": 10384624074,
      "node_id": "LE_lADOABII585w8ugDzwAAAAJq-MnK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10384624074",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T15:09:48Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325590380",
      "pull_request_review_id": 1626338420,
      "id": 1325590380,
      "node_id": "PRRC_kwDOABII585PAuds",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KB` total size",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 5,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "45b71639aee09bea75f521ebc86be9698ef655b7",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Would it be simpler / easier to understand if we just said there's a maximum weight `MAX_PACKAGE_WEIGHT=404000`?",
      "created_at": "2023-09-14T08:38:38Z",
      "updated_at": "2023-09-14T08:40:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1325590380",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325590380"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325595634",
      "pull_request_review_id": 1626349423,
      "id": 1325595634,
      "node_id": "PRRC_kwDOABII585PAvvy",
      "diff_hunk": "@@ -163,6 +163,17 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n     int64_t totalSizeWithAncestors = entry_size;\n     setEntries ancestors;\n \n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Needs test coverage, maybe in test/functional/mempool_sigoplimit.py? Or a unit test for `CheckPackageLimits`?",
      "created_at": "2023-09-14T08:42:20Z",
      "updated_at": "2023-09-14T08:42:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1325595634",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325595634"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 166,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325620063",
      "pull_request_review_id": 1626396875,
      "id": 1325620063,
      "node_id": "PRRC_kwDOABII585PA1tf",
      "diff_hunk": "",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "original_commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps include a note in the e4640da4bcacb513c7b602ff3127f65963c3bba4 commit message that you're specifically trying to catch when total package *sigop-adjusted* vsize. Might be helpful to a future git-blamer who may think this code is redundant with the other package size checks.",
      "created_at": "2023-09-14T08:58:41Z",
      "updated_at": "2023-09-14T08:58:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1325620063",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1325620063"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326488688",
      "pull_request_review_id": 1627711659,
      "id": 1326488688,
      "node_id": "PRRC_kwDOABII585PEJxw",
      "diff_hunk": "@@ -163,6 +163,17 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n     int64_t totalSizeWithAncestors = entry_size;\n     setEntries ancestors;\n \n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "in_reply_to_id": 1325595634,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Added in mempool_sigoplimit.py since this change threads through a few layers",
      "created_at": "2023-09-14T20:34:54Z",
      "updated_at": "2023-09-14T20:34:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1326488688",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326488688"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 166,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326488898",
      "pull_request_review_id": 1627711950,
      "id": 1326488898,
      "node_id": "PRRC_kwDOABII585PEJ1C",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KB` total size",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 5,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "45b71639aee09bea75f521ebc86be9698ef655b7",
      "in_reply_to_id": 1325590380,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "did MAX_PACKAGE_KWEIGHT=404",
      "created_at": "2023-09-14T20:35:07Z",
      "updated_at": "2023-09-14T20:35:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1326488898",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326488898"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326489211",
      "pull_request_review_id": 1627712498,
      "id": 1326489211,
      "node_id": "PRRC_kwDOABII585PEJ57",
      "diff_hunk": "",
      "path": "src/txmempool.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "original_commit_id": "e4640da4bcacb513c7b602ff3127f65963c3bba4",
      "in_reply_to_id": 1325620063,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-14T20:35:27Z",
      "updated_at": "2023-09-14T20:35:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1326489211",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1326489211"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327038069",
      "pull_request_review_id": 1628558831,
      "id": 1327038069,
      "node_id": "PRRC_kwDOABII585PGP51",
      "diff_hunk": "@@ -15,8 +15,11 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n+/** Default maximum total weight of transactions in a package in KWu and (non-virtual) KB\n+    to allow for context-less checks. */\n+static constexpr uint32_t MAX_PACKAGE_KWEIGHT = 404;\n+static constexpr uint32_t MAX_PACKAGE_SIZE{MAX_PACKAGE_KWEIGHT / WITNESS_SCALE_FACTOR};\n+static_assert(MAX_PACKAGE_SIZE == 101);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 10,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "86eb12aec1110dcf506846d1dbe4dc58b8254612",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "86eb12aec1110dcf506846d1dbe4dc58b8254612\r\n\r\nMight it be better to not define a `MAX_PACKAGE_SIZE` and just do weight instead? I'd be worried about rounding errors as they can add up as we round for each transaction's `GetVirtualTransactionSize()`.\r\n\r\nI suggest just doing a `MAX_PACKAGE_WEIGHT_KWU` and changing packages.cpp to sum `GetTransactionWeight` instead.",
      "created_at": "2023-09-15T09:21:42Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327038069",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327038069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 21,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327061651",
      "pull_request_review_id": 1628558831,
      "id": 1327061651,
      "node_id": "PRRC_kwDOABII585PGVqT",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 58,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "71930556bc30659e02a88b3a115c0d36dacd9545\r\n\r\nWorth checking + explaining the numbers?\r\n```suggestion\r\n        parent_individual_testres = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0]\r\n        assert parent_individual_testres[\"allowed\"]\r\n        # Multisig is counted as MAX_PUBKEYS_PER_MULTISIG = 20 sigops\r\n        assert_equal(parent_individual_testres[\"vsize\"], 5000 * 20)\r\n```",
      "created_at": "2023-09-15T09:43:06Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327061651",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327061651"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327063987",
      "pull_request_review_id": 1628558831,
      "id": 1327063987,
      "node_id": "PRRC_kwDOABII585PGWOz",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+\n+        # Transactions are tiny in weight\n+        assert_greater_than(500, len(tx_parent.serialize()) + len(tx_child.serialize()))",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 66,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "71930556bc30659e02a88b3a115c0d36dacd9545\r\nmaybe use the actual weight getter instead\r\n```suggestion\r\n        assert_greater_than(2000, tx_parent.get_weight() + tx_child.get_weight())\r\n```",
      "created_at": "2023-09-15T09:45:24Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327063987",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327063987"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327068385",
      "pull_request_review_id": 1628558831,
      "id": 1327068385,
      "node_id": "PRRC_kwDOABII585PGXTh",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 68,
      "original_position": 63,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "71930556bc30659e02a88b3a115c0d36dacd9545\r\n\r\nAdd comment explaining why the error message is different between testmempoolaccept and submitpackage\r\n```suggestion\r\n        # When we actually try to submit, the parent makes it into the mempool, but the child would exceed ancestor vsize limits\r\n       assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])\r\n       assert tx_parent.rehash() in self.nodes[0].getrawmempool()\r\n```",
      "created_at": "2023-09-15T09:49:40Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327068385",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327068385"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 175,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327086508",
      "pull_request_review_id": 1628558831,
      "id": 1327086508,
      "node_id": "PRRC_kwDOABII585PGbus",
      "diff_hunk": "@@ -163,6 +163,17 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n     int64_t totalSizeWithAncestors = entry_size;\n     setEntries ancestors;\n \n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (entry_count > static_cast<uint64_t>(limits.ancestor_count)) {\n+        return util::Error{Untranslated(strprintf(\"too many ancestors in package %u [limit: %u]\", entry_count, limits.ancestor_count))};\n+    } else if (entry_count > static_cast<uint64_t>(limits.descendant_count)) {\n+        return util::Error{Untranslated(strprintf(\"too many descendants in package %u [limit: %u]\", entry_count, limits.descendant_count))};\n+    } else if (entry_size > limits.ancestor_size_vbytes) {\n+        return util::Error{Untranslated(strprintf(\"exceeds ancestor size limit %u [limit: %u]\", entry_size, limits.ancestor_size_vbytes))};\n+    } else if (entry_size > limits.descendant_size_vbytes) {\n+        return util::Error{Untranslated(strprintf(\"exceeds descendant size limit for tx %u [limit: %u]\", entry_size, limits.descendant_size_vbytes))};",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "8a8a549a330ef3de99a6a3d7c150a6e2ab5ff11e",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "8a8a549a330ef3de99a6a3d7c150a6e2ab5ff11e\r\n\r\nWhy is this in `CalculateAncestorsAndCheckLimits` instead of `CheckPackageLimits`? Would be faster to check this before calculating `staged_ancestors`.\r\n\r\nAlso I wonder if this could be a confusing error string due to how we're checking. e.g. descendant limit < ancestor limit, so a child-with-24-parents package hits \"too many descendants\" even if everyone has a descendant count of 1 or 2.\r\n\r\nPerhaps more clear is \"package count exceeds ancestor count limit,\" \"package vsize exceeds ancestor count limit,\" etc.",
      "created_at": "2023-09-15T10:07:03Z",
      "updated_at": "2023-09-15T10:10:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327086508",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327086508"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 169,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288224",
      "pull_request_review_id": 1628954787,
      "id": 1327288224,
      "node_id": "PRRC_kwDOABII585PHM-g",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": 68,
      "original_position": 63,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": 1327068385,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-15T13:26:26Z",
      "updated_at": "2023-09-15T13:26:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327288224",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288224"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 175,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288287",
      "pull_request_review_id": 1628954898,
      "id": 1327288287,
      "node_id": "PRRC_kwDOABII585PHM_f",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]\n+\n+        # But together, it's exceeding limits\n+        packet_test = self.nodes[0].testmempoolaccept([tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+        assert_equal([x[\"package-error\"] for x in packet_test], [\"package-mempool-limits\", \"package-mempool-limits\"])\n+        assert_raises_rpc_error(-26, \"too-long-mempool-chain\", self.nodes[0].submitpackage, [tx_parent.serialize().hex(), tx_child.serialize().hex()])\n+\n+        # Transactions are tiny in weight\n+        assert_greater_than(500, len(tx_parent.serialize()) + len(tx_child.serialize()))",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 66,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": 1327063987,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-15T13:26:30Z",
      "updated_at": "2023-09-15T13:26:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327288287",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288287"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288376",
      "pull_request_review_id": 1628955021,
      "id": 1327288376,
      "node_id": "PRRC_kwDOABII585PHNA4",
      "diff_hunk": "@@ -133,6 +136,42 @@ def test_sigops_limit(self, bytes_per_sigop, num_sigops):\n         assert_equal(entry_parent['descendantcount'], 2)\n         assert_equal(entry_parent['descendantsize'], parent_tx.get_vsize() + sigop_equivalent_vsize)\n \n+    def test_sigops_package(self):\n+        # Make a 2-transaction package which fails vbyte checks even though\n+        # separately they would work.\n+        self.restart_node(0, extra_args=[\"-bytespersigop=5000\"] + self.extra_args[0])\n+\n+        _, pubkey = generate_keypair()\n+        amount_for_bare = 50000\n+        tx_parent_dict = self.wallet.create_self_transfer(fee=Decimal(\"3\"))\n+        tx_parent_utxo = tx_parent_dict[\"new_utxo\"]\n+        tx_parent = tx_parent_dict[\"tx\"]\n+        tx_parent.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_parent.vout[0].nValue -= amount_for_bare\n+        tx_parent.calc_sha256()\n+        tx_parent_utxo[\"txid\"] = tx_parent.hash\n+        tx_parent_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        tx_child_dict = self.wallet.create_self_transfer(utxo_to_spend=tx_parent_utxo, fee=Decimal(\"3\"))\n+        tx_child_utxo = tx_child_dict[\"new_utxo\"]\n+        tx_child = tx_child_dict[\"tx\"]\n+        tx_child.vout.append(CTxOut(amount_for_bare, keys_to_multisig_script([pubkey], k=1)))\n+        tx_child.vout[0].nValue -= amount_for_bare\n+        tx_child.calc_sha256()\n+        tx_child_utxo[\"txid\"] = tx_child.hash\n+        tx_child_utxo[\"value\"] -= Decimal(\"0.00005000\")\n+\n+        # Separately, the parent tx is ok\n+        assert self.nodes[0].testmempoolaccept([tx_parent.serialize().hex()])[0][\"allowed\"]",
      "path": "test/functional/mempool_sigoplimit.py",
      "position": null,
      "original_position": 58,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "71930556bc30659e02a88b3a115c0d36dacd9545",
      "in_reply_to_id": 1327061651,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-15T13:26:34Z",
      "updated_at": "2023-09-15T13:26:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327288376",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288376"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 165,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288442",
      "pull_request_review_id": 1628955130,
      "id": 1327288442,
      "node_id": "PRRC_kwDOABII585PHNB6",
      "diff_hunk": "@@ -15,8 +15,11 @@\n \n /** Default maximum number of transactions in a package. */\n static constexpr uint32_t MAX_PACKAGE_COUNT{25};\n-/** Default maximum total virtual size of transactions in a package in KvB. */\n-static constexpr uint32_t MAX_PACKAGE_SIZE{101};\n+/** Default maximum total weight of transactions in a package in KWu and (non-virtual) KB\n+    to allow for context-less checks. */\n+static constexpr uint32_t MAX_PACKAGE_KWEIGHT = 404;\n+static constexpr uint32_t MAX_PACKAGE_SIZE{MAX_PACKAGE_KWEIGHT / WITNESS_SCALE_FACTOR};\n+static_assert(MAX_PACKAGE_SIZE == 101);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 10,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "86eb12aec1110dcf506846d1dbe4dc58b8254612",
      "in_reply_to_id": 1327038069,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done.",
      "created_at": "2023-09-15T13:26:37Z",
      "updated_at": "2023-09-15T13:26:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327288442",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327288442"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 21,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327291876",
      "pull_request_review_id": 1628960489,
      "id": 1327291876,
      "node_id": "PRRC_kwDOABII585PHN3k",
      "diff_hunk": "@@ -47,7 +48,7 @@ class PackageValidationState : public ValidationState<PackageValidationResult> {\n \n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n- * 2. The total virtual size cannot exceed MAX_PACKAGE_SIZE.\n+ * 2. The total (non-virtual) size cannot exceed MAX_PACKAGE_KWU / WITNESS_SCALE_FACTOR.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 30,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "0774c39e86ca52b747ace02f367617f4d6d88305",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit 0774c39e86ca52b747ace02f367617f4d6d88305\r\n\r\ntotal weight",
      "created_at": "2023-09-15T13:29:29Z",
      "updated_at": "2023-09-15T13:32:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327291876",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327291876"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327293199",
      "pull_request_review_id": 1628960489,
      "id": 1327293199,
      "node_id": "PRRC_kwDOABII585PHOMP",
      "diff_hunk": "@@ -122,7 +122,7 @@ BOOST_FIXTURE_TEST_CASE(package_validation_tests, TestChain100Setup)\n \n     // A single, giant transaction submitted through ProcessNewPackage fails on single tx policy.\n     CTransactionRef giant_ptx = create_placeholder_tx(999, 999);\n-    BOOST_CHECK(GetVirtualTransactionSize(*giant_ptx) > MAX_PACKAGE_SIZE * 1000);\n+    BOOST_CHECK(GetVirtualTransactionSize(*giant_ptx) > DEFAULT_ANCESTOR_SIZE_LIMIT_KVB * 1000);",
      "path": "src/test/txpackage_tests.cpp",
      "position": 25,
      "original_position": 25,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "0774c39e86ca52b747ace02f367617f4d6d88305",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit 0774c39e86ca52b747ace02f367617f4d6d88305\r\n\r\nshould this be checking against `MAX_PACKAGE_KWU`?",
      "created_at": "2023-09-15T13:30:36Z",
      "updated_at": "2023-09-15T13:32:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327293199",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327293199"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 125,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327297684",
      "pull_request_review_id": 1628969173,
      "id": 1327297684,
      "node_id": "PRRC_kwDOABII585PHPSU",
      "diff_hunk": "@@ -122,7 +122,7 @@ BOOST_FIXTURE_TEST_CASE(package_validation_tests, TestChain100Setup)\n \n     // A single, giant transaction submitted through ProcessNewPackage fails on single tx policy.\n     CTransactionRef giant_ptx = create_placeholder_tx(999, 999);\n-    BOOST_CHECK(GetVirtualTransactionSize(*giant_ptx) > MAX_PACKAGE_SIZE * 1000);\n+    BOOST_CHECK(GetVirtualTransactionSize(*giant_ptx) > DEFAULT_ANCESTOR_SIZE_LIMIT_KVB * 1000);",
      "path": "src/test/txpackage_tests.cpp",
      "position": 25,
      "original_position": 25,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "0774c39e86ca52b747ace02f367617f4d6d88305",
      "in_reply_to_id": 1327293199,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> fails on single tx policy\r\n\r\nit's a single tx test check, not a package limit check? :shrug: ",
      "created_at": "2023-09-15T13:33:54Z",
      "updated_at": "2023-09-15T13:33:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327297684",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327297684"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 125,
      "original_line": 125,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327305214",
      "pull_request_review_id": 1628981564,
      "id": 1327305214,
      "node_id": "PRRC_kwDOABII585PHRH-",
      "diff_hunk": "@@ -47,7 +48,7 @@ class PackageValidationState : public ValidationState<PackageValidationResult> {\n \n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n- * 2. The total virtual size cannot exceed MAX_PACKAGE_SIZE.\n+ * 2. The total (non-virtual) size cannot exceed MAX_PACKAGE_KWU / WITNESS_SCALE_FACTOR.",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 30,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "0774c39e86ca52b747ace02f367617f4d6d88305",
      "in_reply_to_id": 1327291876,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "pushed cleanups",
      "created_at": "2023-09-15T13:40:09Z",
      "updated_at": "2023-09-15T13:40:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327305214",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327305214"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327317351",
      "pull_request_review_id": 1629000702,
      "id": 1327317351,
      "node_id": "PRRC_kwDOABII585PHUFn",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_WEIGHT_KWU=404` total weight",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 5,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "66f6868c4331d3c289221441130e6c1fb61bc60c",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "66f6868c4331d3c289221441130e6c1fb61bc60c\r\n\r\nthis says `MAX_PACKAGE_WEIGHT_KWU` but the variable is named `MAX_PACKAGE_KWU`",
      "created_at": "2023-09-15T13:49:44Z",
      "updated_at": "2023-09-15T13:56:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327317351",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327317351"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327323660",
      "pull_request_review_id": 1629010475,
      "id": 1327323660,
      "node_id": "PRRC_kwDOABII585PHVoM",
      "diff_hunk": "@@ -163,6 +163,17 @@ util::Result<CTxMemPool::setEntries> CTxMemPool::CalculateAncestorsAndCheckLimit\n     int64_t totalSizeWithAncestors = entry_size;\n     setEntries ancestors;\n \n+    // Package itself is busting mempool limits; should be rejected even if no staged_ancestors exist\n+    if (entry_count > static_cast<uint64_t>(limits.ancestor_count)) {\n+        return util::Error{Untranslated(strprintf(\"too many ancestors in package %u [limit: %u]\", entry_count, limits.ancestor_count))};\n+    } else if (entry_count > static_cast<uint64_t>(limits.descendant_count)) {\n+        return util::Error{Untranslated(strprintf(\"too many descendants in package %u [limit: %u]\", entry_count, limits.descendant_count))};\n+    } else if (entry_size > limits.ancestor_size_vbytes) {\n+        return util::Error{Untranslated(strprintf(\"exceeds ancestor size limit %u [limit: %u]\", entry_size, limits.ancestor_size_vbytes))};\n+    } else if (entry_size > limits.descendant_size_vbytes) {\n+        return util::Error{Untranslated(strprintf(\"exceeds descendant size limit for tx %u [limit: %u]\", entry_size, limits.descendant_size_vbytes))};",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "8a8a549a330ef3de99a6a3d7c150a6e2ab5ff11e",
      "in_reply_to_id": 1327086508,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-09-15T13:54:50Z",
      "updated_at": "2023-09-15T13:54:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327323660",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327323660"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": 169,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 174,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327327092",
      "pull_request_review_id": 1629015991,
      "id": 1327327092,
      "node_id": "PRRC_kwDOABII585PHWd0",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_WEIGHT_KWU=404` total weight",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 5,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "66f6868c4331d3c289221441130e6c1fb61bc60c",
      "in_reply_to_id": 1327317351,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed",
      "created_at": "2023-09-15T13:57:44Z",
      "updated_at": "2023-09-15T13:57:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327327092",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327327092"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327365279",
      "pull_request_review_id": 1629076299,
      "id": 1327365279,
      "node_id": "PRRC_kwDOABII585PHfyf",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_KWU=404` total weight\n    (#20833)\n \n    - *Rationale*: This is already enforced as mempool ancestor/descendant limits. If",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 8,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "204249bb727e23d9e01ae5c3947c2533e893914e",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah hold on, avoiding rounding is good but it does mean that this limit is effectively a few Wu smaller than the default ancestor size limit. (https://github.com/bitcoin/bitcoin/pull/22097#issuecomment-859901930 and https://github.com/bitcoin/bitcoin/pull/22097#issuecomment-862627568) so this statement is untrue.\r\n\r\nI think having this limit denominated in Wu is good and it should be distinct from the ancestor package limits anyway. But I agree with those comments that maybe it's best to not make this limit more restrictive than normal ancestor limits.\r\n\r\nWe can bake in the rounding so this limit is 404000Wu + MAX_PACKAGE_COUNT * (WITNESS_SCALE_FACTOR -1) = 404075Wu.\r\n\r\nAlso I think the primary Rationale (if you could edit this bullet point please) should be \"We want package size to be as small as possible to mitigate DoS via package validation. However, we want to make sure that the limit does not restrict ancestor packages that would be allowed if submitted individually.\"",
      "created_at": "2023-09-15T14:25:48Z",
      "updated_at": "2023-09-15T14:34:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327365279",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327365279"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327428231",
      "pull_request_review_id": 1629174147,
      "id": 1327428231,
      "node_id": "PRRC_kwDOABII585PHvKH",
      "diff_hunk": "@@ -18,7 +18,7 @@ tip or some preceding transaction in the package.\n \n The following rules are enforced for all packages:\n \n-* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_SIZE=101KvB` total size\n+* Packages cannot exceed `MAX_PACKAGE_COUNT=25` count and `MAX_PACKAGE_KWU=404` total weight\n    (#20833)\n \n    - *Rationale*: This is already enforced as mempool ancestor/descendant limits. If",
      "path": "doc/policy/packages.md",
      "position": null,
      "original_position": 8,
      "commit_id": "97d53ff4c3ede1d1fdc6d93386f14c230b03b98d",
      "original_commit_id": "204249bb727e23d9e01ae5c3947c2533e893914e",
      "in_reply_to_id": 1327365279,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed up as suggested, and fixed some inverted static asserts.\r\n\r\nI thought about calling it 405KWU and calling it a day, but I think that would make code history more difficult, so instead stayed precisely as calculated.",
      "created_at": "2023-09-15T15:05:48Z",
      "updated_at": "2023-09-15T15:05:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28471#discussion_r1327428231",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327428231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    }
  ]
}