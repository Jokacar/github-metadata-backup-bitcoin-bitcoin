{
  "type": "issue",
  "issue": {
    "id": 2673722706,
    "node_id": "I_kwDOABII586fXcVS",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31326",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31326/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31326/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31326/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/31326",
    "number": 31326,
    "state": "closed",
    "state_reason": "completed",
    "title": "Maximum dbcache too small",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\n28.0 gives 'out of space' and hangs when dbcache is set to 16384 and full chainstate -reindex is run.\n\n### Expected behaviour\n\nShould -reindex complete the reindexing.\n\n### Steps to reproduce\n\nHave whole blockchain on disk, txindex=1, dbcache=16384 and reindex whole chainstate with command line -reindex option.\n\n### Relevant log output\n\n2024-11-18T17:15:31Z Cache size (16396074160) exceeds total space (16395641600)\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\n28.0\n\n### Operating system and version\n\nWindows 10 Pro x64 PL\n\n### Machine specifications\n\n_No response_",
    "user": {
      "login": "pbies",
      "id": 39916932,
      "node_id": "MDQ6VXNlcjM5OTE2OTMy",
      "avatar_url": "https://avatars.githubusercontent.com/u/39916932?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pbies",
      "html_url": "https://github.com/pbies",
      "followers_url": "https://api.github.com/users/pbies/followers",
      "following_url": "https://api.github.com/users/pbies/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/pbies/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/pbies/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/pbies/subscriptions",
      "organizations_url": "https://api.github.com/users/pbies/orgs",
      "repos_url": "https://api.github.com/users/pbies/repos",
      "events_url": "https://api.github.com/users/pbies/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/pbies/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 3,
    "closed_at": "2024-11-25T13:07:37Z",
    "closed_by": {
      "login": "maflcko",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/maflcko",
      "html_url": "https://github.com/maflcko",
      "followers_url": "https://api.github.com/users/maflcko/followers",
      "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
      "organizations_url": "https://api.github.com/users/maflcko/orgs",
      "repos_url": "https://api.github.com/users/maflcko/repos",
      "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/maflcko/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "created_at": "2024-11-19T22:31:28Z",
    "updated_at": "2024-11-25T13:07:38Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 2486887198,
      "node_id": "IC_kwDOABII586UOuMe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2486887198",
      "actor": {
        "login": "pbies",
        "id": 39916932,
        "node_id": "MDQ6VXNlcjM5OTE2OTMy",
        "avatar_url": "https://avatars.githubusercontent.com/u/39916932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pbies",
        "html_url": "https://github.com/pbies",
        "followers_url": "https://api.github.com/users/pbies/followers",
        "following_url": "https://api.github.com/users/pbies/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pbies/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pbies/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pbies/subscriptions",
        "organizations_url": "https://api.github.com/users/pbies/orgs",
        "repos_url": "https://api.github.com/users/pbies/repos",
        "events_url": "https://api.github.com/users/pbies/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pbies/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-19T22:33:01Z",
      "updated_at": "2024-11-19T22:33:01Z",
      "author_association": "NONE",
      "body": "Seems like the issue is also here: https://github.com/bitcoin/bitcoin/issues/27599",
      "user": {
        "login": "pbies",
        "id": 39916932,
        "node_id": "MDQ6VXNlcjM5OTE2OTMy",
        "avatar_url": "https://avatars.githubusercontent.com/u/39916932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pbies",
        "html_url": "https://github.com/pbies",
        "followers_url": "https://api.github.com/users/pbies/followers",
        "following_url": "https://api.github.com/users/pbies/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pbies/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pbies/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pbies/subscriptions",
        "organizations_url": "https://api.github.com/users/pbies/orgs",
        "repos_url": "https://api.github.com/users/pbies/repos",
        "events_url": "https://api.github.com/users/pbies/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pbies/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31326#issuecomment-2486887198",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31326"
    },
    {
      "event": "commented",
      "id": 2486913781,
      "node_id": "IC_kwDOABII586UO0r1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2486913781",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-19T22:53:12Z",
      "updated_at": "2024-11-19T22:53:24Z",
      "author_association": "MEMBER",
      "body": "The \"hanging\" is caused by the cache flushing. For a 16GB cache, that can take quite a while, depending on your hardware. The only solution is to be patient and wait for it to finish flushing. If you turn on additional debug logging, you should see consistent log lines about it flushing entries to disk.\r\n\r\nIncreasing the cache will only make that \"hanging\" worse as the cache will be even bigger and so even more data to be flushed at once.\r\n\r\n#28358 dropped the dbcache limit, but that won't make this go away, it just means that once the node exits IBD, it'll spend a long time flushing the cache.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31326#issuecomment-2486913781",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31326"
    },
    {
      "event": "commented",
      "id": 2497978288,
      "node_id": "IC_kwDOABII586U5B-w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2497978288",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-25T13:07:37Z",
      "updated_at": "2024-11-25T13:07:37Z",
      "author_association": "MEMBER",
      "body": "> Seems like the issue is also here: #27599\r\n\r\nClosing for now as duplicate. Leave a comment, if this is not a duplicate, or if you have any other questions.\r\n\r\nIf you have more relevant details to add to #27599, please do so.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31326#issuecomment-2497978288",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31326"
    },
    {
      "event": "closed",
      "id": 15420474195,
      "node_id": "CE_lADOABII586fXcVSzwAAAAOXIcNT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15420474195",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-25T13:07:37Z"
    }
  ]
}