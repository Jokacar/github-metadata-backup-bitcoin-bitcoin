{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432",
    "id": 1725528875,
    "node_id": "PR_kwDOABII585m2Xsr",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/29432",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/29432.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/29432.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/624277663bfec8ef6b9dd72b6424527615ec3cc6",
    "number": 29432,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Stratum v2 Template Provider (take 3)",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Based on on @Fi3's https://github.com/bitcoin/bitcoin/compare/master...Fi3:bitcoin:PatchTemplates which is based on @ccdle12's #27854. I rebased it and re-wrote the commit history. Compared to #28983 it introduces EllSwift in the handshake and fixes various bugs. I used that opportunity to change the branch name, which makes testing against [SRI](https://github.com/stratum-mining/stratum) slightly easier. There's no conceptual discussion on #28983 so it can be ignored by reviewers.\r\n\r\nSee [docs/stratum-v2.md](https://github.com/Sjors/bitcoin/blob/sv2/doc/stratum-v2.md) for a brief description of Stratum v2 and the role of Bitcoin Core in that system..\r\n\r\n## What to test and review?\r\n\r\nI'll make separate pull requests for parts that are ready for detailed review.\r\n\r\n- [ ] #29346\r\n- [ ] #29295 \r\n- [ ] Custom signet mining improvement: #29032\r\n- [ ] Make nested pull-requests easier: #29274\r\n\r\nSee the [testing guide](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md#testing-guide) for various ways to test this PR. This branch is actively used by (testnet) pools, so it should be ready for high level review.\r\n\r\nNote: the SRI `main` branch is incompatible (hopefully just for a few days), you need to use https://github.com/stratum-mining/stratum/pull/737 and https://github.com/lorbax/stratum/pull/3\r\n\r\n## Implementation notes\r\n\r\n* the `ci:` commits (#29274) are there to facilitate PR's against this branch, but they are not blocking for Stratum v2\r\n* the commits that move `transport.h` and some other stuff from `node` to `common` are not blocking. But in the longer run I'd like to see process separation between the node and the template provider.\r\n* I will occasionally add commits to _undo_ bug fixes, in order to stay compatible with the SRI `main` branch. Those will get dropped over time and can be ignored. \r\n\r\n## Contributing\r\n\r\nIf you want to help out with any of the issues below, please open a PR to my fork. I will then squash your commits into my own where needed. \r\n\r\n## Upstream issues\r\n\r\n### Spec\r\n\r\n- [ ] modify spec to use `ProvideMissingTransactions`? (followup?)\r\n- [ ] pick a good default for `default_coinbase_tx_additional_output_size` (see `getblocktemplate` RPC)\r\n\r\n### Networking\r\n\r\n- [ ] add `-sv2bind` and `-sv2allowip`\r\n- [ ] optional `-sv2cert`\r\n- [ ] drop `Sv2TemplateProvider::SendBuf`, reuse p2p socket handling if possible\r\n- [ ] limit number of connected clients\r\n- [ ] maybe limit (number of) `coinbase_output_max_additional_size`\r\n- [ ] TMP / TODO comments at the top of `sv2_messages.h`\r\n\r\n### Testing\r\n\r\n- [ ] expand sv2_template_provider_tests\r\n- [ ] add transport fuzzer\r\n- [ ] add template provider fuzzer\r\n\r\n### Template generation and updating\r\n\r\n- [ ] group templates with the same `coinbase_tx_additional_output_size`\r\n- [ ] don't generate templates when no client is connected\r\n\r\n### Misc\r\n\r\n- [ ] move / refactor `GetMerklePathForCoinbase` helper (see Future Work in original PR, and https://github.com/stratum-mining/stratum/issues/567)\r\n- [ ] truncate long trace messages\r\n\r\n## Potential followups\r\n\r\n- [ ] implement Noise protocol and mock client in Python, add functional tests (based on `test/sv2_template_provider_tests.cpp`)\r\n- [ ] use process separation, e.g. a `bitcoin-tp` binary, see [multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/multiprocess.md?plain=1)\r\n- [ ] make template updates push based, on top of Cluster Mempool, see [docs/stratum-v2.md](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md) (for new blocks it's already push based)\r\n- [ ] push empty template for the next block (downstream can ignore or use, https://github.com/stratum-mining/stratum/issues/715)\r\n  - send prevhash for this template as soon as any new block arrives\r\n- [ ] push optimistic template for the next block\r\n  - send prevhash if and only if our template won (i.e. we got a `SubmitSolution` message)",
    "labels": [
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2024-02-14T11:34:49Z",
    "updated_at": "2024-02-15T15:35:07Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "521da845b61f1169163a599c1b55a4e596273241",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:sv2",
      "ref": "sv2",
      "sha": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 5,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 236588,
        "default_branch": "sv2",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-02-15T15:35:05Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2024-01-09T16:46:04Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "baed5edeb611d949982c849461949c645f8998a7",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36805,
        "stargazers_count": 73995,
        "watchers_count": 73995,
        "size": 249299,
        "default_branch": "master",
        "open_issues_count": 678,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-02-15T15:46:17Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-02-15T13:39:20Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 7440,
    "deletions": 1978,
    "changed_files": 50,
    "commits": 26,
    "review_comments": 11,
    "comments": 4
  },
  "events": [
    {
      "event": "mentioned",
      "id": 11800505244,
      "node_id": "MEE_lADOABII585_NKHDzwAAAAK_XWuc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11800505244",
      "actor": {
        "login": "Fi3",
        "id": 6207037,
        "node_id": "MDQ6VXNlcjYyMDcwMzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6207037?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fi3",
        "html_url": "https://github.com/Fi3",
        "followers_url": "https://api.github.com/users/Fi3/followers",
        "following_url": "https://api.github.com/users/Fi3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fi3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fi3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fi3/subscriptions",
        "organizations_url": "https://api.github.com/users/Fi3/orgs",
        "repos_url": "https://api.github.com/users/Fi3/repos",
        "events_url": "https://api.github.com/users/Fi3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fi3/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T11:34:50Z"
    },
    {
      "event": "subscribed",
      "id": 11800505253,
      "node_id": "SE_lADOABII585_NKHDzwAAAAK_XWul",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11800505253",
      "actor": {
        "login": "Fi3",
        "id": 6207037,
        "node_id": "MDQ6VXNlcjYyMDcwMzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6207037?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fi3",
        "html_url": "https://github.com/Fi3",
        "followers_url": "https://api.github.com/users/Fi3/followers",
        "following_url": "https://api.github.com/users/Fi3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fi3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fi3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fi3/subscriptions",
        "organizations_url": "https://api.github.com/users/Fi3/orgs",
        "repos_url": "https://api.github.com/users/Fi3/repos",
        "events_url": "https://api.github.com/users/Fi3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fi3/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T11:34:50Z"
    },
    {
      "event": "mentioned",
      "id": 11800505265,
      "node_id": "MEE_lADOABII585_NKHDzwAAAAK_XWux",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11800505265",
      "actor": {
        "login": "ccdle12",
        "id": 18324680,
        "node_id": "MDQ6VXNlcjE4MzI0Njgw",
        "avatar_url": "https://avatars.githubusercontent.com/u/18324680?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ccdle12",
        "html_url": "https://github.com/ccdle12",
        "followers_url": "https://api.github.com/users/ccdle12/followers",
        "following_url": "https://api.github.com/users/ccdle12/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ccdle12/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ccdle12/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ccdle12/subscriptions",
        "organizations_url": "https://api.github.com/users/ccdle12/orgs",
        "repos_url": "https://api.github.com/users/ccdle12/repos",
        "events_url": "https://api.github.com/users/ccdle12/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ccdle12/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T11:34:50Z"
    },
    {
      "event": "subscribed",
      "id": 11800505291,
      "node_id": "SE_lADOABII585_NKHDzwAAAAK_XWvL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11800505291",
      "actor": {
        "login": "ccdle12",
        "id": 18324680,
        "node_id": "MDQ6VXNlcjE4MzI0Njgw",
        "avatar_url": "https://avatars.githubusercontent.com/u/18324680?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ccdle12",
        "html_url": "https://github.com/ccdle12",
        "followers_url": "https://api.github.com/users/ccdle12/followers",
        "following_url": "https://api.github.com/users/ccdle12/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ccdle12/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ccdle12/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ccdle12/subscriptions",
        "organizations_url": "https://api.github.com/users/ccdle12/orgs",
        "repos_url": "https://api.github.com/users/ccdle12/repos",
        "events_url": "https://api.github.com/users/ccdle12/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ccdle12/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T11:34:50Z"
    },
    {
      "event": "commented",
      "id": 1943589322,
      "node_id": "IC_kwDOABII585z2NHK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1943589322",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T11:34:52Z",
      "updated_at": "2024-02-14T14:37:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29432).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29419](https://github.com/bitcoin/bitcoin/pull/29419) (log: deduplicate category names and improve logging.cpp by vasild)\n* [#29418](https://github.com/bitcoin/bitcoin/pull/29418) (rpc: provide per message stats for global traffic via new RPC 'getnetmsgstats' by vasild)\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n* [#29256](https://github.com/bitcoin/bitcoin/pull/29256) (Improve new LogDebug/Trace/Info/Warning/Error Macros by ryanofsky)\n* [#29119](https://github.com/bitcoin/bitcoin/pull/29119) (refactor: Use std::span over Span by maflcko)\n* [#29071](https://github.com/bitcoin/bitcoin/pull/29071) (refactor: Remove Span operator==, Use std::ranges::equal by maflcko)\n* [#29015](https://github.com/bitcoin/bitcoin/pull/29015) (kernel: Streamline util library by ryanofsky)\n* [#28955](https://github.com/bitcoin/bitcoin/pull/28955) (index: block filters sync, reduce disk read operations by caching last header by furszy)\n* [#28417](https://github.com/bitcoin/bitcoin/pull/28417) (contrib/signet/miner updates by ajtowns)\n* [#28241](https://github.com/bitcoin/bitcoin/pull/28241) (Silent payment index (for light wallets and consistency check) by Sjors)\n* [#26697](https://github.com/bitcoin/bitcoin/pull/26697) (logging: use bitset for categories by LarryRuane)\n* [#26593](https://github.com/bitcoin/bitcoin/pull/26593) (tracing: Only prepare tracepoint arguments when actually tracing by 0xB10C)\n* [#24539](https://github.com/bitcoin/bitcoin/pull/24539) (Add a \"tx output spender\" index by sstone)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#issuecomment-1943589322",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T11:35:18Z",
      "updated_at": "2024-02-14T11:35:18Z",
      "source": {
        "issue": {
          "id": 2020711772,
          "node_id": "PR_kwDOABII585g48_Q",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28983",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28983/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28983/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28983/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28983",
          "number": 28983,
          "state": "closed",
          "state_reason": null,
          "title": "Stratum v2 Template Provider (take 2)",
          "body": "Based on on @Fi3's https://github.com/bitcoin/bitcoin/compare/master...Fi3:bitcoin:PatchTemplates which is based on @ccdle12's #27854. I rebased it and re-wrote the commit history. See the original branch for the evolution of the spec.\r\n\r\nSee [docs/stratum-v2.md](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md) for a brief description of Stratum v2 and the role of Bitcoin Core in that system..\r\n\r\n## What to test and review? \r\n\r\n- [ ] #29295 \r\n- [ ] Custom signet mining improvement: #29032\r\n- [ ] Make nested pull-requests easier: #29274\r\n\r\nSee the [testing guide](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md#testing-guide) for various ways to test this PR. This branch is actively used by (testnet) pools, so it should be ready for high level review.\r\n\r\nI'll make separate pull requests for parts that are ready for detailed review. Probably starting with ECDH and the Noise Protocol.\r\n\r\n## Implementation notes\r\n\r\nSilent Payments also needs the ECDH module, so I cherry-picked the commit from #28122. It uses ECDH is a slightly different way, but perhaps there's more overlap to be had.\r\n\r\n## Contributing\r\n\r\nIf you want to help out with any of the issues below, please open a PR to my fork. I will then squash your commits into my own where needed. \r\n\r\n## Upstream issues\r\n\r\n### Spec\r\n\r\n- [ ] modify spec to use `ProvideMissingTransactions`? (followup?)\r\n- [ ] pick a good default for `default_coinbase_tx_additional_output_size` (see `getblocktemplate` RPC)\r\n\r\n### Noise\r\n\r\n- [ ] use EllSwift https://github.com/stratum-mining/sv2-spec/pull/66, implemented in https://github.com/Sjors/bitcoin/pull/28\r\n- [ ] certificate signing issue: https://github.com/stratum-mining/stratum/issues/717, fix in https://github.com/Sjors/bitcoin/pull/29\r\n\r\n### Networking\r\n\r\n- [ ] add `-sv2bind` and `-sv2allowip`\r\n- [x] persist static key (needs #29229)\r\n- [ ] optional `-sv2cert`\r\n- [x] create `Sv2Transport` subclass similar to `V2Transport`: https://github.com/Sjors/bitcoin/pull/27\r\n- [ ] drop `Sv2TemplateProvider::SendBuf`, reuse p2p socket handling if possible\r\n- [ ] limit number of connected clients\r\n- [ ] maybe limit (number of) `coinbase_output_max_additional_size`\r\n- [ ] TMP / TODO comments at the top of `sv2_messages.h`\r\n- [ ] adjust base58 encoding of authority public key https://github.com/stratum-mining/stratum/issues/721\r\n\r\n### Testing\r\n\r\n- [ ] expand sv2_template_provider_tests\r\n- [ ] add transport fuzzer\r\n- [ ] add template provider fuzzer\r\n\r\n### Template generation and updating\r\n\r\n- [x] hold on to templates a bit after a block is found https://github.com/stratum-mining/stratum/issues/709 (in case of race to prevent downstream crashes, though we still wouldn't relay it without additional changes)\r\n- [ ] hold on to template transactions even if the mempool drops them (for some time)\r\n- [ ] group templates with the same `coinbase_tx_additional_output_size`\r\n- [ ] don't generate templates when no client is connected\r\n\r\n### Misc\r\n\r\n- [ ] move / refactor `GetMerklePathForCoinbase` helper (see Future Work in original PR, and https://github.com/stratum-mining/stratum/issues/567)\r\n- [ ] truncate long trace messages\r\n\r\n## Potential followups\r\n\r\n- [ ] implement Noise protocol and mock client in Python, add functional tests (based on `test/sv2_template_provider_tests.cpp`)\r\n- [ ] use process separation, e.g. a `bitcoin-tp` binary, see [multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/multiprocess.md?plain=1)\r\n- [ ] make template updates push based, on top of Cluster Mempool, see [docs/stratum-v2.md](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md) (for new blocks it's already push based)\r\n- [ ] push empty template for the next block (downstream can ignore or use, https://github.com/stratum-mining/stratum/issues/715)\r\n  - send prevhash for this template as soon as any new block arrives\r\n- [ ] push optimistic template for the next block\r\n  - send prevhash if and only if our template won (i.e. we got a `SubmitSolution` message)",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118378960,
              "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
              "name": "Mining",
              "color": "c7def8",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 29,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28983",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28983",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28983.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28983.patch"
          },
          "closed_at": "2024-02-14T11:35:17Z",
          "created_at": "2023-12-01T11:39:27Z",
          "updated_at": "2024-02-14T11:35:18Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T11:46:06Z",
      "updated_at": "2024-02-14T11:46:06Z",
      "source": {
        "issue": {
          "id": 2105856059,
          "node_id": "PR_kwDOABII585lWGHe",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29346",
          "number": 29346,
          "state": "open",
          "state_reason": null,
          "title": "Stratum v2 Noise Protocol",
          "body": "Parent PR #29432 \r\n\r\nThis is the first part of the Stratum v2 Template Provider change that can be a standalone pull request.\r\n\r\nThe Noise Protocol Framework is defined here: https://noiseprotocol.org/noise.html\r\n\r\nIt's quite similar to BIP324. The main differences are explained here, including why Stratum v2 can't use BIP234 (yet): https://delvingbitcoin.org/t/stratum-v2-noise-protocol-bip324-nuggets/413\r\n\r\nThe implementation is based on revision 38, 2018-07-11 (most recent at the time of writing).\r\n\r\nThe Stratum v2 spec defines the specific choice of ciphers: https://github.com/stratum-mining/sv2-spec/blob/main/04-Protocol-Security.md\r\n\r\nThis protocol has been implemented in the Stratum Reference Implementation (SRI, using [rust-bitcoin](https://github.com/rust-bitcoin/rust-bitcoin)). https://github.com/stratum-mining/stratum\r\n\r\nIt has also been (independently) implemented in BraiinsOS. This part is currently not open source, and it's behind on some recent changes.\r\n\r\nThe classes in `sv2_noise.h` attempt to stay close to the paper, whereas the test and fuzzer code borrow heavily from BIP324.\r\n\r\nIt's ready for review, but not for merge:\r\n\r\n1. The parent PR may need more conceptual review (and perhaps the entire spec, but that would really slow things down)\r\n2. We could decide to not support Noise encryption at all and require users to install separate software for that. Code review of this PR could help inform that decision.\r\n\r\nYou can see this code in action in the parent PR #29432.\r\n\r\nInitial seed corpus: https://github.com/bitcoin-core/qa-assets/pull/169\r\n\r\n---\r\n\r\nThere are changes to SRI and the spec that are already implemented in this PR:\r\n\r\n* The spec is being modified to use EllSwift (instead of regular x-only) for the encoding of public keys and ECDH: https://github.com/stratum-mining/sv2-spec/pull/66\r\n\r\n* Certificate verification fix in SRI: https://github.com/lorbax/stratum/pull/3\r\n",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29346",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29346",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29346.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29346.patch"
          },
          "created_at": "2024-01-29T16:14:50Z",
          "updated_at": "2024-02-15T10:12:37Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 11801065208,
      "node_id": "LE_lADOABII585_NKHDzwAAAAK_Zfb4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11801065208",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T12:27:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1943673479,
      "node_id": "IC_kwDOABII585z2hqH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1943673479",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T12:27:21Z",
      "updated_at": "2024-02-14T12:27:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/21562393655</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#issuecomment-1943673479",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11801845077,
      "node_id": "HRFPE_lADOABII585_NKHDzwAAAAK_cd1V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11801845077",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T13:35:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11801877404,
      "node_id": "HRFPE_lADOABII585_NKHDzwAAAAK_cluc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11801877404",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T13:38:33Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11802374037,
      "node_id": "HRFPE_lADOABII585_NKHDzwAAAAK_ee-V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11802374037",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T14:15:45Z"
    },
    {
      "event": "reviewed",
      "id": 1880414088,
      "node_id": "PRR_kwDOABII585wFNeI",
      "url": null,
      "actor": null,
      "commit_id": "684890f900b2fee3f2c6e7610820d70de5f4f0fb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#pullrequestreview-1880414088",
      "submitted_at": "2024-02-14T14:21:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T14:46:20Z",
      "updated_at": "2024-02-14T14:46:20Z",
      "source": {
        "issue": {
          "id": 2129010635,
          "node_id": "PR_kwDOABII585mk94S",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29419",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29419/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29419/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29419/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29419",
          "number": 29419,
          "state": "open",
          "state_reason": null,
          "title": "log: deduplicate category names and improve logging.cpp",
          "body": "The code in `logging.cpp` needs to: \r\n* Get the category name given the flag (e.g. `BCLog::PRUNE` -> `\"prune\"`)\r\n* Get the flag given the category name (e.g. `\"prune\"` -> `BCLog::PRUNE`)\r\n* Get the list of category names sorted in alphabetical order\r\n\r\nAchieve this by using the proper std containers. The result is\r\n* less code (the diff of the first commit is +62 / -129)\r\n* faster code (to linear search and no copy+sort)\r\n* more maintainable code (the categories are no longer duplicated in `LogCategories[]` and `LogCategoryToStr()`)\r\n\r\nThis behavior is preserved:\r\n`BCLog::NONE` -> `\"\"` (lookup by `LogCategoryToStr()`)\r\n`\"\"` -> `BCLog::ALL` (lookup by `GetLogCategory(\"\")`)\r\n\r\n---\r\n\r\nAlso remove unused `BCLog::UTIL`.\r\n\r\n---\r\n\r\nThese changes (modulo the `BCLog::UTIL` removal) are part of https://github.com/bitcoin/bitcoin/pull/29415 but they make sense on their own and would be good to have them, regardless of the fate of https://github.com/bitcoin/bitcoin/pull/29415. Also, if this is merged, that would reduce the size of https://github.com/bitcoin/bitcoin/pull/29415, thus the current standalone PR.",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 1,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29419",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29419",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29419.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29419.patch"
          },
          "created_at": "2024-02-11T14:28:18Z",
          "updated_at": "2024-02-14T14:46:20Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T14:47:51Z",
      "updated_at": "2024-02-14T14:47:51Z",
      "source": {
        "issue": {
          "id": 2128913200,
          "node_id": "PR_kwDOABII585mkqvf",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29418",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29418/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29418/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29418/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29418",
          "number": 29418,
          "state": "open",
          "state_reason": null,
          "title": "rpc: provide per message stats for global traffic via new RPC 'getnetmsgstats'",
          "body": "Introduce a new RPC, `getnetmsgstats` to retrieve traffic bytes and count of messages possibly broken down by:\r\n* direction (sent or received)\r\n* network (ipv4, tor, etc)\r\n* connection type (outbound-full-relay, block-relay-only, etc)\r\n* message type (verack, ping, etc)\r\n\r\nImplements: https://github.com/bitcoin/bitcoin/issues/26337 Add per message stats to getnettotals rpc\r\n\r\n---\r\n\r\nExamples:\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats '[\"direction\", \"network\", \"connection_type\", \"message_type\"]'</summary>\r\n\r\n```\r\n{\r\n  \"bytes\": 5392756,\r\n  \"count\": 32683\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats '[\"direction\", \"network\", \"connection_type\"]'</summary>\r\n\r\n```\r\n{\r\n  \"sendcmpct\": {\r\n    \"bytes\": 975,\r\n    \"count\": 31\r\n  },\r\n  \"sendaddrv2\": {\r\n    \"bytes\": 816,\r\n    \"count\": 28\r\n  },\r\n  \"headers\": {\r\n    \"bytes\": 1786,\r\n    \"count\": 28\r\n  },\r\n  \"feefilter\": {\r\n    \"bytes\": 816,\r\n    \"count\": 27\r\n  },\r\n  \"version\": {\r\n    \"bytes\": 4843,\r\n    \"count\": 37\r\n  },\r\n  \"ping\": {\r\n    \"bytes\": 1104,\r\n    \"count\": 36\r\n  },\r\n  \"getaddr\": {\r\n    \"bytes\": 384,\r\n    \"count\": 13\r\n  },\r\n  \"block\": {\r\n    \"bytes\": 5128467,\r\n    \"count\": 20365\r\n  },\r\n  \"getheaders\": {\r\n    \"bytes\": 29436,\r\n    \"count\": 28\r\n  },\r\n  \"pong\": {\r\n    \"bytes\": 1040,\r\n    \"count\": 34\r\n  },\r\n  \"getdata\": {\r\n    \"bytes\": 1218925,\r\n    \"count\": 20008\r\n  },\r\n  \"sendheaders\": {\r\n    \"bytes\": 447,\r\n    \"count\": 16\r\n  },\r\n  \"wtxidrelay\": {\r\n    \"bytes\": 816,\r\n    \"count\": 28\r\n  },\r\n  \"addrv2\": {\r\n    \"bytes\": 301161,\r\n    \"count\": 25\r\n  },\r\n  \"verack\": {\r\n    \"bytes\": 816,\r\n    \"count\": 28\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats '[\"direction\", \"connection_type\", \"message_type\"]'</summary>\r\n\r\n```\r\n{\r\n  \"i2p\": {\r\n    \"bytes\": 1311861,\r\n    \"count\": 8226\r\n  },\r\n  \"onion\": {\r\n    \"bytes\": 3932760,\r\n    \"count\": 24272\r\n  },\r\n  \"ipv6\": {\r\n    \"bytes\": 631265,\r\n    \"count\": 3362\r\n  },\r\n  \"ipv4\": {\r\n    \"bytes\": 1300106,\r\n    \"count\": 7773\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n<details>\r\n<summary>bitcoin-cli getnetmsgstats</summary>\r\n\r\n```\r\n{\r\n  \"recv\": {\r\n    \"i2p\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 90,\r\n          \"count\": 3\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 309,\r\n          \"count\": 3\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 408,\r\n          \"count\": 3\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 432950,\r\n          \"count\": 1794\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 3150,\r\n          \"count\": 3\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 68508,\r\n          \"count\": 3\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        }\r\n      }\r\n    },\r\n    \"onion\": {\r\n      \"block-relay-only\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 66,\r\n          \"count\": 2\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 106,\r\n          \"count\": 1\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 126,\r\n          \"count\": 1\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 478479,\r\n          \"count\": 1896\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 195,\r\n          \"count\": 6\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 527,\r\n          \"count\": 5\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 157,\r\n          \"count\": 5\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 639,\r\n          \"count\": 5\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 189,\r\n          \"count\": 6\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 1465688,\r\n          \"count\": 5957\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 5262,\r\n          \"count\": 5\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 189,\r\n          \"count\": 6\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 120693,\r\n          \"count\": 9\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        }\r\n      }\r\n    },\r\n    \"ipv6\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 120,\r\n          \"count\": 4\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 412,\r\n          \"count\": 4\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 544,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 138074,\r\n          \"count\": 583\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 4200,\r\n          \"count\": 4\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 93436,\r\n          \"count\": 4\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"version\": {\r\n          \"bytes\": 126,\r\n          \"count\": 1\r\n        }\r\n      }\r\n    },\r\n    \"ipv4\": {\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 66,\r\n          \"count\": 2\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 106,\r\n          \"count\": 1\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 252,\r\n          \"count\": 2\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"block\": {\r\n          \"bytes\": 313988,\r\n          \"count\": 1255\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 40,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      }\r\n    }\r\n  },\r\n  \"sent\": {\r\n    \"i2p\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 90,\r\n          \"count\": 3\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 66,\r\n          \"count\": 3\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 544,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 3150,\r\n          \"count\": 3\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 87,\r\n          \"count\": 3\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 105382,\r\n          \"count\": 1789\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        }\r\n      }\r\n    },\r\n    \"onion\": {\r\n      \"block-relay-only\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 33,\r\n          \"count\": 1\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 25,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 127,\r\n          \"count\": 1\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 64,\r\n          \"count\": 2\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 115932,\r\n          \"count\": 1884\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 162,\r\n          \"count\": 5\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 122,\r\n          \"count\": 5\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 157,\r\n          \"count\": 5\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 771,\r\n          \"count\": 6\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 221,\r\n          \"count\": 7\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 5262,\r\n          \"count\": 5\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 189,\r\n          \"count\": 6\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 363478,\r\n          \"count\": 5932\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        },\r\n        \"addrv2\": {\r\n          \"bytes\": 231,\r\n          \"count\": 4\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 129,\r\n          \"count\": 5\r\n        }\r\n      }\r\n    },\r\n    \"ipv6\": {\r\n      \"manual\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 120,\r\n          \"count\": 4\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 88,\r\n          \"count\": 4\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 544,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 4200,\r\n          \"count\": 4\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 116,\r\n          \"count\": 4\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 35492,\r\n          \"count\": 584\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 99,\r\n          \"count\": 3\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 132,\r\n          \"count\": 4\r\n        }\r\n      },\r\n      \"outbound-full-relay\": {\r\n        \"version\": {\r\n          \"bytes\": 254,\r\n          \"count\": 2\r\n        }\r\n      }\r\n    },\r\n    \"ipv4\": {\r\n      \"outbound-full-relay\": {\r\n        \"sendcmpct\": {\r\n          \"bytes\": 33,\r\n          \"count\": 1\r\n        },\r\n        \"sendaddrv2\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"headers\": {\r\n          \"bytes\": 25,\r\n          \"count\": 1\r\n        },\r\n        \"feefilter\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"version\": {\r\n          \"bytes\": 508,\r\n          \"count\": 4\r\n        },\r\n        \"ping\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"getaddr\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"getheaders\": {\r\n          \"bytes\": 1053,\r\n          \"count\": 1\r\n        },\r\n        \"pong\": {\r\n          \"bytes\": 32,\r\n          \"count\": 1\r\n        },\r\n        \"getdata\": {\r\n          \"bytes\": 76531,\r\n          \"count\": 1231\r\n        },\r\n        \"sendheaders\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"wtxidrelay\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        },\r\n        \"verack\": {\r\n          \"bytes\": 24,\r\n          \"count\": 1\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n---\r\n\r\nPrevious incarnations of this:\r\nhttps://github.com/bitcoin/bitcoin/pull/27534 rpc: add 'getnetmsgstats', new rpc to view network message statistics (Thank you, @satsie!)\r\nhttps://github.com/bitcoin/bitcoin/pull/28926 rpc: add 'getnetmsgstats' RPC (Thank you, @willcl-ark!)",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29418",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29418",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29418.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29418.patch"
          },
          "created_at": "2024-02-11T09:32:51Z",
          "updated_at": "2024-02-14T14:47:50Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T14:49:23Z",
      "updated_at": "2024-02-14T14:49:23Z",
      "source": {
        "issue": {
          "id": 2127176950,
          "node_id": "PR_kwDOABII585me8Nn",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29415",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29415/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29415/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29415/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29415",
          "number": 29415,
          "state": "open",
          "state_reason": null,
          "title": "Broadcast own transactions only via short-lived Tor or I2P connections",
          "body": "To improve privacy, broadcast locally submitted transactions (from the `sendrawtransaction` RPC) to the P2P network only via Tor or I2P short-lived connections.\r\n\r\n* Introduce a new connection type for private broadcast of transactions with the following properties:\r\n  * started whenever there are local transactions to be sent\r\n  * only opened to Tor or I2P peers\r\n  * opened regardless of max connections limits\r\n  * after handshake is completed one local transaction is pushed to the peer, `PING` is sent and after receiving `PONG` the connection is closed\r\n  * ignore all incoming messages after handshake is completed (except `PONG`)\r\n\r\n* Broadcast transactions submitted via `sendrawtransaction` using this new mechanism, to a few Tor or I2P peers. Keep doing this until we receive an `INV` about this transaction from one of our ordinary peers (this takes about 1 second on mainnet).\r\n\r\n* The transaction is stored in peerman and does not enter the mempool.\r\n\r\n* Once we get an `INV` from somebody, then the normal flow executes: we request the transaction with `GETDATA`, receive it with a `TX` message, put it in our mempool and broadcast it to all our existent connections (as if we see it for the first time).\r\n\r\n* After we receive the full transaction as a `TX` message, in reply to our `GETDATA` request, only then consider the transaction has propagated through the network and remove it from the storage in peerman, ending the private broadcast attempts.\r\n\r\nThe messages exchange should look like this:\r\n\r\n```\r\ntx-sender >--- connect -------> tx-recipient\r\ntx-sender >--- VERSION -------> tx-recipient (dummy VERSION with no revealing data)\r\ntx-sender <--- VERSION -------< tx-recipient\r\ntx-sender <--- WTXIDRELAY ----< tx-recipient (maybe)\r\ntx-sender <--- SENDADDRV2 ----< tx-recipient (maybe)\r\ntx-sender <--- SENDTXRCNCL ---< tx-recipient (maybe)\r\ntx-sender <--- VERACK --------< tx-recipient\r\ntx-sender >--- VERACK --------> tx-recipient\r\ntx-sender >--- TX ------------> tx-recipient\r\ntx-sender >--- PING ----------> tx-recipient\r\ntx-sender <--- PONG ----------< tx-recipient\r\ntx-sender disconnects\r\n```\r\n\r\nWhenever a new transaction is received from `sendrawtransaction` RPC, the node will send it to 5 (`NUM_PRIVATE_BROADCAST_PER_TX`) recipients right away. If after 10-15 mins we still have not heard anything about the transaction from the network, then it will be sent to 1 more peer (see `PeerManagerImpl::ReattemptPrivateBroadcast()`).\r\n\r\nA few considerations:\r\n* The short-lived private broadcast connections are very cheap and fast wrt network traffic. It is expected that some of those peers could blackhole the transaction. Just one honest/proper peer is enough for successful propagation.\r\n* The peers that receive the transaction could deduce that this is initial transaction broadcast from the transaction originator. This is ok, they can't identify the sender.\r\n\r\n---\r\n\r\nSome explanation of the commits:\r\n\r\n* Independent improvement (also opened as a standalone PR at https://github.com/bitcoin/bitcoin/pull/29419):\r\n  * `log: deduplicate category names and improve logging.cpp`\r\n\r\n* New logging category and config option to enable private broadcast\r\n  * `log: introduce a new category for private broadcast`\r\n  * `init: introduce a new option to enable/disable private broadcast`\r\n\r\n* Implement the private broadcast connection handling on the `CConnman` side:\r\n  * `net: introduce a new connection type for private broadcast`\r\n  * `net: move peers counting before grant acquisition in ThreadOpenConnections()`\r\n  * `net: implement opening PRIVATE_BROADCAST connections`\r\n\r\n* Prepare `BroadcastTransaction()` for private broadcast requests:\r\n  * `net_processing: rename RelayTransaction to better describe what it does`\r\n  * `node: change a tx-relay on/off flag to a tri-state`\r\n  * `net_processing: store transactions for private broadcast in PeerManager`\r\n\r\n* Implement the private broadcast connection handling on the `PeerManager` side:\r\n  * `net_processing: reorder the code that handles the VERSION message`\r\n  * `net_processing: handle ConnectionType::PRIVATE_BROADCAST connections`\r\n  * `net_processing: stop private broadcast of a transaction after round-trip`\r\n  * `net_processing: retry private broadcast`\r\n\r\n* Engage the new functionality from `sendrawtransaction`:\r\n  * `rpc: use private broadcast from sendrawtransaction RPC if -privatebroadcast is ON`\r\n\r\n* Independent test framework improvements (also opened as a standalone PR at https://github.com/bitcoin/bitcoin/pull/29420):\r\n  * `test: improve debug log message from P2PConnection::connection_made()`\r\n  * `test: extend the SOCKS5 Python proxy to actually connect to a destination`\r\n  * `test: support WTX INVs from P2PDataStore and fix a comment`\r\n  * `test: set P2PConnection::p2p_connected_to_node in peer_connect_helper()`\r\n\r\n* New functional test that exercies some of the new code:\r\n  * `test: add functional test for local tx relay`\r\n\r\n---\r\n\r\nThis addresses:\r\nhttps://github.com/bitcoin/bitcoin/issues/3828 Clients leak IPs if they are recipients of a transaction\r\nhttps://github.com/bitcoin/bitcoin/issues/14692 Can't configure bitocoind to only send tx via Tor but receive clearnet transactions\r\nhttps://github.com/bitcoin/bitcoin/issues/19042 Tor-only transaction broadcast onlynet=onion alternative\r\nhttps://github.com/bitcoin/bitcoin/issues/24557 Option for receive events with all networks, but send transactions and/or blocks only with anonymous network[s]?\r\nhttps://github.com/bitcoin/bitcoin/issues/25450 Ability to broadcast wallet transactions only via dedicated oneshot Tor connections\r\n\r\nRelated, but different:\r\nhttps://github.com/bitcoin/bitcoin/issues/21876 Broadcast a transaction to specific nodes\r\nhttps://github.com/bitcoin/bitcoin/issues/28636 new RPC: sendrawtransactiontopeer\r\n\r\n---\r\n\r\n_A previous incarnation of this can be found at https://github.com/bitcoin/bitcoin/pull/27509. It puts the transaction in the mempool and (tries to) hide it from the outside observers. This turned out to be too error prone or maybe even impossible._\r\n",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29415",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29415",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29415.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29415.patch"
          },
          "created_at": "2024-02-09T13:39:10Z",
          "updated_at": "2024-02-14T23:58:49Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11803774786,
      "node_id": "HRFPE_lADOABII585_NKHDzwAAAAK_j09C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11803774786",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T15:50:34Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T15:51:02Z",
      "updated_at": "2024-02-14T15:51:02Z",
      "source": {
        "issue": {
          "id": 2085050770,
          "node_id": "PR_kwDOABII585kQNwH",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29256",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29256/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29256/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29256/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29256",
          "number": 29256,
          "state": "open",
          "state_reason": null,
          "title": "Improve new LogDebug/Trace/Info/Warning/Error Macros",
          "body": "Improve new LogDebug(), LogTrace(), LogInfo(),  LogWarning(), LogError() macros introduced in #28318:\r\n\r\n- Make them all accept log categories, to make it possible to filter or highlight log messages from a particular component.\r\n- Make them compatible with wallet logging, which includes the wallet name in log messages.\r\n- Make them not rely on a global LogInstance, to provide better control of logging in controlled environments, such as unit tests that want to selectively capture log output, or libbitcoinkernel applications that want to have multiple instances of validation objects without mixing their log output.\r\n- Make them consistent, now accepting the same parameters.\r\n- Make them less verbose by not requiring BCLog category constants to be specified in individual log prints.\r\n\r\nAn [overview](https://github.com/bitcoin/bitcoin/blob/99feed7350b5fc3ae3157dd395ae6260c5bfc092/src/logging.h#L285-L322) of the macros can be found in the logging header.\r\n\r\n### Problems this PR attempts to solve\r\n\r\nThe new log macros in introduced #28318 are generally great. They allow writing code that is succinct and clear, and they remove verbosity and a lot of ambiguity about log levels and categories. Unfortunately, the new macros are *slightly* less general than than needed to be used throughout the codebase. Particularly (1) These macros cannot be used directly in wallet code because wallet log prints are supposed to automatically attach wallet names to log messages. (2) These macros cannot be used at all in libbitcoinkernel code because they do not allow specifying a logger instance. If this PR is rejected, the only alternative approach to solving these problems would be to reimplement these macros outside of the logging framework so they can be used by wallet and validation code. So this PR takes the simple approach of making a small external change to these macros while they are still brand new, so the benefits they bring can be used everywhere.\r\n\r\n### Note to reviewers\r\n\r\n I would encourage first looking at the PR description and actual code changes in this PR to see what it is about (especially looking at changes to the actual log calls in the codebase). It should be possible to come to an independent judgement of this PR, before (or without necessarily) getting into the  discussion history of this PR. Unfortunately and regrettably, I made some dismissive comments on the previous PR, so the discussion here starts out immediately heated. I believe the criticism of this PR is well intended and made in good faith, but it brings up a lot of tangential issues, goes down some paths that are less constructive, and mostly is not focused on the problems this PR is trying to solve, or pointing out any potential harms that would be caused by merging this PR. I would very much welcome and encourage independent review while the other discussion is ongoing.\r\n\r\n\r\n\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29256",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29256",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29256.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29256.patch"
          },
          "created_at": "2024-01-16T22:09:35Z",
          "updated_at": "2024-02-14T15:51:01Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T16:35:08Z",
      "updated_at": "2024-02-14T16:35:08Z",
      "source": {
        "issue": {
          "id": 2049590379,
          "node_id": "PR_kwDOABII585ia4AQ",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29119",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29119/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29119/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29119/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29119",
          "number": 29119,
          "state": "open",
          "state_reason": null,
          "title": "refactor: Use std::span over Span",
          "body": "`std::span` allows static extents, which is a nice benefit over just `Span`.\r\n\r\nHowever, the interface of the two isn't identical and requires some more changes than just defining an alias. This is my current draft to *compile* with `std::span`. This should be the minimal changes required to get a green CI, but the changes may not be ideal, so this remains a draft.\r\n\r\nAlso, this requires and is based on #29071, which is blocked on OSS-Fuzz.\r\n\r\nIn the meantime, changes that make sense on their own, can be split up.",
          "user": {
            "login": "maflcko",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maflcko",
            "html_url": "https://github.com/maflcko",
            "followers_url": "https://api.github.com/users/maflcko/followers",
            "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
            "organizations_url": "https://api.github.com/users/maflcko/orgs",
            "repos_url": "https://api.github.com/users/maflcko/repos",
            "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/maflcko/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 1,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29119",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29119",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29119.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29119.patch"
          },
          "created_at": "2023-12-19T23:36:52Z",
          "updated_at": "2024-02-14T16:35:08Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T16:44:12Z",
      "updated_at": "2024-02-14T16:44:12Z",
      "source": {
        "issue": {
          "id": 2039458902,
          "node_id": "PR_kwDOABII585h4izR",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29071",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29071/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29071/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29071/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29071",
          "number": 29071,
          "state": "open",
          "state_reason": null,
          "title": "refactor: Remove Span operator==, Use std::ranges::equal",
          "body": "`std::span` removed the comparison operators, so it makes sense to remove them for the `Span` \"backport\" as well. Using `std::ranges::equal` also has the benefit that some `Span` temporary constructions can now be dropped.",
          "user": {
            "login": "maflcko",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maflcko",
            "html_url": "https://github.com/maflcko",
            "followers_url": "https://api.github.com/users/maflcko/followers",
            "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
            "organizations_url": "https://api.github.com/users/maflcko/orgs",
            "repos_url": "https://api.github.com/users/maflcko/repos",
            "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/maflcko/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/66",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/66",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/66/labels",
            "id": 10314936,
            "node_id": "MI_kwDOABII584AnWS4",
            "number": 66,
            "state": "open",
            "title": "28.0",
            "creator": {
              "login": "DrahtBot",
              "id": 39886733,
              "node_id": "MDQ6VXNlcjM5ODg2NzMz",
              "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/DrahtBot",
              "html_url": "https://github.com/DrahtBot",
              "followers_url": "https://api.github.com/users/DrahtBot/followers",
              "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
              "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
              "repos_url": "https://api.github.com/users/DrahtBot/repos",
              "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 6,
            "closed_issues": 0,
            "created_at": "2023-12-15T12:08:23Z",
            "updated_at": "2024-01-29T10:51:24Z"
          },
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29071",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29071",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29071.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29071.patch"
          },
          "created_at": "2023-12-13T10:58:46Z",
          "updated_at": "2024-02-14T16:44:11Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T16:54:58Z",
      "updated_at": "2024-02-14T16:54:58Z",
      "source": {
        "issue": {
          "id": 2029493410,
          "node_id": "PR_kwDOABII585hWvMx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29015",
          "number": 29015,
          "state": "open",
          "state_reason": null,
          "title": "kernel: Streamline util library",
          "body": "Remove `fees.h`, `errors.h`, and `spanparsing.h` from the util library. Specifically:\r\n\r\n- Move `Split` functions from `util/spanparsing.h` to `util/string.h`, using `util` namespace for clarity.\r\n- Move remaining spanparsing functions to `script/parsing.h` since they are used for descriptor and miniscript parsing.\r\n- Combine `util/fees.h` and `util/errors.h` into `common/messages.h` so there is a place for simple functions that generate user messages to live, and these functions are not part of the util library.\r\n\r\nMotivation for this change is that the util library is a dependency of the kernel, and we should remove functionality from util that shouldn't be called by kernel code or kernel applications. These changes should also improve code organization and make functions easier to discover. Some of these same moves are (or were) part of #28690, but did not help with code organization, or made it worse, so it is better to move them and clean them up in the same PR so code only has to change one time.\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 18,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29015",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29015",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29015.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29015.patch"
          },
          "created_at": "2023-12-06T22:26:39Z",
          "updated_at": "2024-02-15T13:16:44Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T17:08:53Z",
      "updated_at": "2024-02-14T17:08:53Z",
      "source": {
        "issue": {
          "id": 2014355259,
          "node_id": "PR_kwDOABII585gjLxA",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28955",
          "number": 28955,
          "state": "open",
          "state_reason": null,
          "title": "index: block filters sync, reduce disk read operations by caching last header",
          "body": "Work decoupled from #26966 per request.\r\n\r\nThe aim is to remove an unnecessary disk read operation that currently takes place with every new arriving block (or scanned block during background sync). Instead of reading the last filter header from disk merely to access its hash for constructing the next filter, this work caches it, occupying just 32 more bytes in memory.\r\n\r\nTesting Note:\r\nTo compare the changes, added a pretty basic benchmark in the second commit. Alternatively, could also test the changes by timing the block filter sync from scratch on any network; start the node with `-blockfilterindex` and monitor the logs until the syncing process finish.\r\n\r\nLocal Benchmark Results:\r\n\r\n*Master (c252a0fc0f4dc7d262b971a5e7ff01508159193b):\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|      132,042,516.60 |                7.57 |    0.3% |      7.79 | `BlockFilterIndexSync`\r\n\r\n*PR (43a212cfdac6c64e82b601c664443d022f191520):\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|      126,915,841.60 |                7.88 |    0.6% |      7.51 | `BlockFilterIndexSync`\r\n",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28955",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28955.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28955.patch"
          },
          "created_at": "2023-11-28T12:42:40Z",
          "updated_at": "2024-02-14T17:08:52Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:15:55Z",
      "updated_at": "2024-02-14T18:15:55Z",
      "source": {
        "issue": {
          "id": 1882278959,
          "node_id": "PR_kwDOABII585ZlyrP",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28417",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28417/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28417/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28417/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28417",
          "number": 28417,
          "state": "open",
          "state_reason": null,
          "title": "contrib/signet/miner updates",
          "body": "Refactors the code a bunch, and adds `--poolnum` / `--poolid` options so that signers can tag their coinbases in a way that explorers can recognise (see also https://github.com/bitcoin-data/mining-pools/pull/82 and https://github.com/mempool/mempool/issues/2903).\r\n\r\nThe refactoring in particular helps enable the \"try using inquisition's getblocktemplate, and if that doesn't work fall back to core's getblocktemplate\" logic, as described/implemented in https://github.com/bitcoin-inquisition/bitcoin/pull/7",
          "user": {
            "login": "ajtowns",
            "id": 127186,
            "node_id": "MDQ6VXNlcjEyNzE4Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ajtowns",
            "html_url": "https://github.com/ajtowns",
            "followers_url": "https://api.github.com/users/ajtowns/followers",
            "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
            "organizations_url": "https://api.github.com/users/ajtowns/orgs",
            "repos_url": "https://api.github.com/users/ajtowns/repos",
            "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ajtowns/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28417",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28417",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28417.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28417.patch"
          },
          "created_at": "2023-09-05T16:12:05Z",
          "updated_at": "2024-02-14T18:15:54Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T18:37:19Z",
      "updated_at": "2024-02-14T18:37:19Z",
      "source": {
        "issue": {
          "id": 1842817294,
          "node_id": "PR_kwDOABII585Xg45g",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28241",
          "number": 28241,
          "state": "open",
          "state_reason": null,
          "title": "Silent payment index (for light wallets and consistency check)",
          "body": "This PR adds an index with the silent payment tweak for every transaction. It builds on top of #28122.\r\n\r\nIt also adds a `getsilentpaymentblockdata` RPC that returns an array of silent payment tweaked public keys, one for each qualifying transaction. \r\n\r\nThis index serves two purposes:\r\n1. Light client support, see [BIP 352](https://github.com/josibake/bips/blob/silent-payments-bip/bip-0352.mediawiki#user-content-Tweak_Data)\r\n2. A more thorough check than the test vectors; e.g. by comparing a checksum of the index for all of mainnet.\r\n\r\nBased on the index that was originally part of #24897.\r\n\r\nTODO:\r\n- [ ] check correctness against another implementation\r\n- [ ] make `-silentpaymentindex=0` mean off (default), `-silentpaymentindex=v0` on\r\n- [ ] figure out how to do versioning (make the index flexible enough, or just rebuild the index at the next version)\r\n- [ ] remove dependency on wallet (move `GetSilentPaymentsTweakDataFromTxInputs` and everything it needs out of the wallet)\r\n- [ ] cleanup various TODO's in the code\r\n- [ ] brainstorm updating index when outputs are spent\r\n- add tests\r\n  - [ ] that a reorg adds the new blocks (and it's fine to keep the old one) ",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 29,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28241",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28241",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28241.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28241.patch"
          },
          "created_at": "2023-08-09T09:13:55Z",
          "updated_at": "2024-02-14T18:37:19Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11806417923,
      "node_id": "HRFPE_lADOABII585_NKHDzwAAAAK_t6QD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11806417923",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T20:01:07Z"
    },
    {
      "event": "reviewed",
      "id": 1881182173,
      "node_id": "PRR_kwDOABII585wII_d",
      "url": null,
      "actor": null,
      "commit_id": "1bacb8998725de866b109c4fdd9f8739fcfb2344",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#pullrequestreview-1881182173",
      "submitted_at": "2024-02-14T20:04:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T20:05:29Z",
      "updated_at": "2024-02-14T20:05:29Z",
      "source": {
        "issue": {
          "id": 1495740611,
          "node_id": "PR_kwDOABII585FZpvc",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26697",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26697/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26697/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26697/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26697",
          "number": 26697,
          "state": "open",
          "state_reason": null,
          "title": "logging: use bitset for categories",
          "body": "... rather than integer bitmasks such as (1 << 28). This removes the limit of 32 logging categories -- we're up to 28 currently.\r\n\r\nThis is an alternative to #26619 that was [suggested](https://github.com/bitcoin/bitcoin/pull/26619#issuecomment-1343902657) by luke-jr.\r\n\r\ntag jonatack klementtan",
          "user": {
            "login": "LarryRuane",
            "id": 8321330,
            "node_id": "MDQ6VXNlcjgzMjEzMzA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/LarryRuane",
            "html_url": "https://github.com/LarryRuane",
            "followers_url": "https://api.github.com/users/LarryRuane/followers",
            "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
            "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
            "repos_url": "https://api.github.com/users/LarryRuane/repos",
            "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 16,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26697",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26697",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26697.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26697.patch"
          },
          "created_at": "2022-12-14T05:40:18Z",
          "updated_at": "2024-02-14T20:05:29Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T20:11:31Z",
      "updated_at": "2024-02-14T20:11:31Z",
      "source": {
        "issue": {
          "id": 1467073842,
          "node_id": "PR_kwDOABII585D1g33",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26593",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26593/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26593/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26593/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26593",
          "number": 26593,
          "state": "open",
          "state_reason": null,
          "title": "tracing: Only prepare tracepoint arguments when actually tracing",
          "body": "Currently, if the tracepoints are compiled (e.g. in depends and release builds), we always prepare the tracepoint arguments regardless of the tracepoints being used or not. We made sure that the argument preparation is as cheap as possible, but we can almost completely eliminate any overhead for users not interested in the tracepoints (the vast majority), by gating the tracepoint argument preparation with an `if(something is attached to this tracepoint)`. To achieve this, we use the optional semaphore feature provided by SystemTap.\r\n\r\nThe first commit simplifies and deduplicates our tracepoint macros from 13 TRACEx macros to a single TRACEPOINT macro. This makes them easier to use and also avoids more duplicate macro definitions in the second commit.\r\n\r\nThe Linux tracing tools I'm aware of (bcc, bpftrace, libbpf, and systemtap) all support the semaphore gating feature. Thus, all existing tracepoints and their argument preparation is gated in the second commit. For details, please refer to the commit messages and the updated documentation in `doc/tracing.md`.\r\n\r\nAlso adding unit tests that include all tracepoint macros to make sure there are no compiler problems with them (e.g. some varadiac extension not supported). \r\n\r\nReviewers might want to check:\r\n- Do the tracepoints still work for you? Do the examples in `contrib/tracing/` run on your system (as bpftrace frequently breaks on every new version, please test master too if it should't work for you)? Do the CI interface tests still pass?\r\n- Is the new documentation clear? \r\n- The `TRACEPOINT_SEMAPHORE(event, context)` macros places global variables in our global namespace. Is this something we strictly want to avoid or maybe move to all `TRACEPOINT_SEMAPHORE`s to a separate .cpp file or even namespace? I like having the `TRACEPOINT_SEMAPHORE()` in same file as the `TRACEPOINT()`, but open for suggestion on alternative approaches. \r\n- Are newly added tracepoints in the unit tests visible when using `readelf -n /src/test/test_bitcoin`? You can run the new unit tests with `./src/test/test_bitcoin --run_test=util_trace_tests* --log_level=all`.\r\n<details><summary>Two of the added unit tests demonstrate that we are only processing the tracepoint arguments when attached by having a test-failure condition in the tracepoint argument preparation. The following bpftrace script can be used to demonstrate that the tests do indeed fail when attached to the tracepoints.</summary>\r\n\r\n`fail_tests.bt`:\r\n\r\n```c\r\n#!/usr/bin/env bpftrace\r\n\r\nusdt:./src/test/test_bitcoin:test:check_if_attached {\r\n  printf(\"the 'check_if_attached' test should have failed\\n\");\r\n}\r\n\r\nusdt:./src/test/test_bitcoin:test:expensive_section {\r\n  printf(\"the 'expensive_section' test should have failed\\n\");\r\n}\r\n```\r\n\r\nRun the unit tests with `./src/test/test_bitcoin` and start `bpftrace fail_tests.bt -p $(pidof test_bitcoin)` in a separate terminal. The unit tests should fail with:\r\n\r\n```\r\nRunning 594 test cases...\r\ntest/util_trace_tests.cpp(31): error: in \"util_trace_tests/test_tracepoint_check_if_attached\": check false has failed\r\ntest/util_trace_tests.cpp(51): error: in \"util_trace_tests/test_tracepoint_manual_tracepoint_active_check\": check false has failed\r\n\r\n*** 2 failures are detected in the test module \"Bitcoin Core Test Suite\"\r\n```\r\n\r\n</details>\r\n\r\nThese links might provide more contextual information for reviewers:\r\n- [How SystemTap Userspace Probes Work by eklitzke](https://eklitzke.org/how-sytemtap-userspace-probes-work) (actually an example on Bitcoin Core; mentions that with semaphores \"the overhead for an untraced process is effectively zero.\")\r\n- [libbpf comment on USDT semaphore handling](https://github.com/libbpf/libbpf/blob/1596a09b5de2a50ab8d44218fc29b6d42f886305/src/usdt.c#L83-L92) (can recommend the whole comment for background on how the tracepoints and tracing tools work together)\r\n- https://sourceware.org/systemtap/wiki/UserSpaceProbeImplementation#Semaphore_Handling",
          "user": {
            "login": "0xB10C",
            "id": 19157360,
            "node_id": "MDQ6VXNlcjE5MTU3MzYw",
            "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/0xB10C",
            "html_url": "https://github.com/0xB10C",
            "followers_url": "https://api.github.com/users/0xB10C/followers",
            "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
            "organizations_url": "https://api.github.com/users/0xB10C/orgs",
            "repos_url": "https://api.github.com/users/0xB10C/repos",
            "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/0xB10C/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 15,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26593",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26593",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26593.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26593.patch"
          },
          "created_at": "2022-11-28T20:50:26Z",
          "updated_at": "2024-02-14T20:11:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-14T20:45:02Z",
      "updated_at": "2024-02-14T20:45:02Z",
      "source": {
        "issue": {
          "id": 1166781352,
          "node_id": "PR_kwDOABII5840UWxr",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24539",
          "number": 24539,
          "state": "open",
          "state_reason": null,
          "title": "Add a \"tx output spender\" index",
          "body": "This PR adds a new \"tx output spender\" index, which allows users to query which tx spent a given outpoint with the `gettxspendingprevout` RPC call that was added by https://github.com/bitcoin/bitcoin/pull/24408.\r\n\r\nSuch an index would be extremely useful for Lightning, and probably for most layer-2 protocols that rely on chains of unpublished transactions.\r\n\r\nUPDATE: this PR is ready for review and issues have been addressed:\r\n- using a watch-only wallet instead would not work if there is a significant number of outpoints to watch (see https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276595646)\r\n- this PR does not require `-txindex` anymore\r\n\r\n\r\nI chose to store an outpoint (32 + 4 bytes) -> txid (32 bytes) index (so -txospenderindex requires -txindex) rather than a outpoint -> disk pos index.",
          "user": {
            "login": "sstone",
            "id": 1573866,
            "node_id": "MDQ6VXNlcjE1NzM4NjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sstone",
            "html_url": "https://github.com/sstone",
            "followers_url": "https://api.github.com/users/sstone/followers",
            "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
            "organizations_url": "https://api.github.com/users/sstone/orgs",
            "repos_url": "https://api.github.com/users/sstone/repos",
            "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sstone/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 23,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24539",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24539.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24539.patch"
          },
          "created_at": "2022-03-11T19:32:41Z",
          "updated_at": "2024-02-14T20:45:01Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFlNTgyYWY1M2EyOGNlY2EzNDQ5OTAzZTlmMGY4ZWRiYjY2ODQyMzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ae582af53a28ceca3449903e9f0f8edbb6684232",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ae582af53a28ceca3449903e9f0f8edbb6684232",
      "tree": {
        "sha": "6999726f50129eb5510fbdd9605ce52f4bdd9441",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6999726f50129eb5510fbdd9605ce52f4bdd9441"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6999726f50129eb5510fbdd9605ce52f4bdd9441\nparent baed5edeb611d949982c849461949c645f8998a7\nauthor Sjors Provoost <sjors@sprovoost.nl> 1701349128 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991527 +0100\n\nAdd sv2 log category for Stratum v2\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4ecACgkQV/+b28ww\nEAnLkA//fVikr/BJCBMydnyIYPk4M0Fh5LYc5hTKQEzDVaFPKQAUyesFfdEcSqF/\nn5ruotMpYEoxQRSrYSTfVBxzwCRZ/I7TmYW8tHUCs9IbjPBDbKKeXD6N4kvgATqc\nSWiVCGw2ykMyYhYEs6dM1vFUdpddggqjelwiyAhDMlEFc7HyFvk/lsO7s3DmcwH/\nJpmSNlHy7ic3gXjJETPVOx87jrxWi58JvmcP551091nFLGBY8sEB4mh2GXml4rPt\nEDfPwJKiQo3R83EWT9qaXcZ6dbujJD6sTa9oWI1bscc/3zkLkI5PVa8zwQRF0gf+\nPkIYpSiR8juStR/FXK+rRMJTJcEvv8oPpQT/O8/EBSwk9h8pWbXme8l7652RjLQ3\nPhdorUR6qe91Z8XarSKUcW+pknSuA18S9WmdJzMRBBuQoDYNrKJzjuC+0pU6wsmD\no/g/paJnpyUTvdPAs3AQLNuIgayASXOmSYhYYA+9z7w2PquDbaOxr6ss0HFuDbyI\nSeamZWkk52kuwoA3sAVCqfw2DHrYVKpx9O+IhIe30ev55VBfamGq5DPD6SR5KYEN\n1que0ExqcUjuFbC2KiVl3qEFq72wkbEbHHv+Fxkd8e4Rq36hxVnI6cSqz9N87yZQ\ntZSzQoDM1LRzv4g08m90LCFRaQGB22rVj2wpNSCEiGRVy5fSH18=\n=D3oh\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/baed5edeb611d949982c849461949c645f8998a7",
          "sha": "baed5edeb611d949982c849461949c645f8998a7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/baed5edeb611d949982c849461949c645f8998a7"
        }
      ],
      "message": "Add sv2 log category for Stratum v2",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:27Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-11-30T12:58:48Z"
      },
      "sha": "ae582af53a28ceca3449903e9f0f8edbb6684232"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFmOGU3MzhkMzdlYjM3ODdkOTFmZWMyNTBkODNjYzc4MTk3ZDE2ZTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/af8e738d37eb3787d91fec250d83cc78197d16e9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/af8e738d37eb3787d91fec250d83cc78197d16e9",
      "tree": {
        "sha": "35a8be4060936a10bc20b56371e4655cb46ad66e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/35a8be4060936a10bc20b56371e4655cb46ad66e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 35a8be4060936a10bc20b56371e4655cb46ad66e\nparent ae582af53a28ceca3449903e9f0f8edbb6684232\nauthor Sjors Provoost <sjors@sprovoost.nl> 1706876104 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991527 +0100\n\nAdd sv2 noise protocol\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4ecACgkQV/+b28ww\nEAmfhg/8CYTzziA5c4i+SbpF/YARMIQ84sRdfas23Kd5S6FtN9+Zc6jb0xbxB5tf\nmVWlaGtubE8r93YGaEGorFkvMPf9VDkWEod/ClE77aL3pIVI+qREI671XbEUi379\nNvURQLApGqD5R5qUziM+w2MnkXTbm8qZbOI0Fn0bwN6ohEjkxctoDgoVTKeXHZau\nFsj7NWKDnuivCj7UJz0I6E8JTJH/RaxyXuc40BT2xIrLY1Z3yottcamzR8++sSYl\nHsTA6v2TQ5fibnaQJs0RkidnGKtmpRrYKDokcLPpftIcdcRxJQDB/oHYT14V5w6T\ngkOKMmV1Kwu0qiGN7mduxv37ffZi7VjN6auAd/9HsegJcdbmMhoSlVHgmm4wyDY2\nXd0OYO8xcdYWRTrv2APXzxyyOpn3sdmvoz6+IZdqUjfJl2fPB1IWNQWPvG0W5JEA\nSfO75ifpRP62pSCV2FO3Fu8RAr0URepDr7hy8CgLi3uqhCwmMRCbt7ooQSvAEpzE\nNVNKVRTIonWU+aLS02kmTerhcAdWDYCDVCBwr5JsO7yJVAh5l/3mAiPZAjdVR1Uh\nLkCL3kDFB0z30RCXlxmxxpT6FcyQW36vQi4oR5A0tgtJ4Pd7F/nqPMfsvL26aoJJ\nIDdtwavEB4w5YsgBTsFPjj7U6L43hdmfTV+OKxOwhGDu/yXl2+8=\n=Sg5V\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ae582af53a28ceca3449903e9f0f8edbb6684232",
          "sha": "ae582af53a28ceca3449903e9f0f8edbb6684232",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ae582af53a28ceca3449903e9f0f8edbb6684232"
        }
      ],
      "message": "Add sv2 noise protocol\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:27Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-02T12:15:04Z"
      },
      "sha": "af8e738d37eb3787d91fec250d83cc78197d16e9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFlZGUzMGMxZGQ2NThmNWM3OTE1MmJhMTM0NDJkNTFkMjgyNGI5MTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1ede30c1dd658f5c79152ba13442d51d2824b916",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1ede30c1dd658f5c79152ba13442d51d2824b916",
      "tree": {
        "sha": "5132f74f9f9379b85f757cedebb09ba6c90961f0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5132f74f9f9379b85f757cedebb09ba6c90961f0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5132f74f9f9379b85f757cedebb09ba6c90961f0\nparent af8e738d37eb3787d91fec250d83cc78197d16e9\nauthor Sjors Provoost <sjors@sprovoost.nl> 1704740613 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991527 +0100\n\nmove-only: introduce common/transport.h\n\nThe proposed Stratum v2 integration introduces a new Transport subclass. This commit makes it easier in the future to move this integration to its own process.\n\nnet.cpp is currently part of libbitcoin_node. Avoid a dependency on the node by moving the Transport abstract class to common.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4ecACgkQV/+b28ww\nEAnoRhAAgg9xrUWYwWyXYflUIckuaye1ucGqroTmOlFsbLKUJ8yIw2Pn19jboW6e\n27H13ESb75UgbyCfBCKf8eIeTLk/jO01XWfRk+HhwnS4fIYfs2VNwxNU4hNIihWN\nhyUzoik12p/KjBRJpD+/VxW+ELk6vL0orF83N2eK5BYxypkv31X10M+8pZ+ZaTYo\nGh8aZHlimXr1Apus6IrrIdfpAiwn56Ew8d8om5YQYafmFX70G3MppYvbFz9myJil\nMtbhfMwwlG1BWZ76oAN5Yo3FK5BjP78ae4p9ud3kWDnY4v5lL8HyT9eDQ6EVw5ew\nK4PMctGBZTCj2jz/C4OF7P2vqFyOuMb0gM1vTdyXLqREXGSfmT4ez3YcxzrijMZg\nElYiSY5SIExZmpww+OnOdOn7QI6RDjAg25tjwzT/3JoTNvkfEwnKEMDRfyuomhu/\n6vf9dye4IvRvoPvwTLTvJ23rhRXwcxSiM67iH8HawhJq8WLM7z+su0B5hPUnlFTF\nJYZTZO+AQGlLT8EyZ2sz767jCSZR756SRmyZbKC7jaCr0ADrGwj94o8t2AH7rOHM\nfGSLc45CV2vpwptm9WhiFgDAgJCSFbAb4AsgAUlql+ZsN2/sBoTieGidG185C5vb\n46pX+vWMWno4TFsHFpApGWkGfZWWJWyYetOw2bsUPpvIs7CVPHY=\n=zR+H\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/af8e738d37eb3787d91fec250d83cc78197d16e9",
          "sha": "af8e738d37eb3787d91fec250d83cc78197d16e9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/af8e738d37eb3787d91fec250d83cc78197d16e9"
        }
      ],
      "message": "move-only: introduce common/transport.h\n\nThe proposed Stratum v2 integration introduces a new Transport subclass. This commit makes it easier in the future to move this integration to its own process.\n\nnet.cpp is currently part of libbitcoin_node. Avoid a dependency on the node by moving the Transport abstract class to common.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:27Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-08T19:03:33Z"
      },
      "sha": "1ede30c1dd658f5c79152ba13442d51d2824b916"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAwODE3N2IyYTIzNDc1YWMwZDliODQ4N2MwOGUwMzU1NzFkNzY2ZGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/008177b2a23475ac0d9b8487c08e035571d766dd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/008177b2a23475ac0d9b8487c08e035571d766dd",
      "tree": {
        "sha": "966d8d25f5002e1a24b09ef1518c36c5c8a94453",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/966d8d25f5002e1a24b09ef1518c36c5c8a94453"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 966d8d25f5002e1a24b09ef1518c36c5c8a94453\nparent 1ede30c1dd658f5c79152ba13442d51d2824b916\nauthor Sjors Provoost <sjors@sprovoost.nl> 1703854081 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991527 +0100\n\nmove-only: v1 and v2 transport to their own file\n\nThis helps reduce the size and scope net.h, as well as to make v1 and v2 transport usable outside libbitcoin_node. This is useful for utilities that need a one-shot p2p connection, e.g. to broadcast a transaction or fetch a specific block.\n\nThis commit is not necessary for Stratum v2 process separation.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4ecACgkQV/+b28ww\nEAlkIRAAqay/wjNnpOo2f4H/ratphrEFGROzqVMm85/k1Oa1eaJEiVhts8NXp7WR\nPOjsmDB6LlP5K6cCTbpWsfPcqxUfub/yuPRrFonyxphwjortRynXRrZHzFAKaZdA\nsiSRcrkPgh+mIOm2KSJ8gikQBjyzRe10nKjuQo0gePRNcr2bIw3YsbtlcV1DOwfe\nDggE+Jdpat3E4q+hsrbaG0815Bhq3juT7flXMAgT09z4DXHj7z1Zh4fvMZ0Ka+G0\nwE+vDrHKMJjgX7NM6HIoFQvfZCPTGmZpZDyOu34XC45W18b8jMS8pNNrhjTuQBcl\n1twXRUFnjNET7W2Cxw6Happ0OCaprmJ81XQ4JISlgOYBJ3/M/mV2jIDWIRU0CR1r\ntcMcknVrgjhUl78tAAUw8BzK4wOhRDGZw7lbkCtJESwPutjpVHQmL1G47bsvTA6Q\nsbIVCI/QBwxHOlbXsRajwyIyCwOWaOZ1Gxi3OmyrVJahEfzvQQDNHxCXceuRMLQR\nHFdaGnp3XfPyw3gmFo317kJh28B46SuuTPGXznv3xe7vx/d0lnZ2s0nEec4ExmEv\naJ1Zs32Y0X65dqA5QVVBtkVYwP2aSiSV7D/07fsAgmMa0Nt5FKNUdvYsxhXIYRvB\nAJfX8d0T5uaoHew0u2TXPxBlFgLPCOu5IK7ubartBE7Wv/tX0z8=\n=UlZ8\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1ede30c1dd658f5c79152ba13442d51d2824b916",
          "sha": "1ede30c1dd658f5c79152ba13442d51d2824b916",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1ede30c1dd658f5c79152ba13442d51d2824b916"
        }
      ],
      "message": "move-only: v1 and v2 transport to their own file\n\nThis helps reduce the size and scope net.h, as well as to make v1 and v2 transport usable outside libbitcoin_node. This is useful for utilities that need a one-shot p2p connection, e.g. to broadcast a transaction or fetch a specific block.\n\nThis commit is not necessary for Stratum v2 process separation.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:27Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-12-29T12:48:01Z"
      },
      "sha": "008177b2a23475ac0d9b8487c08e035571d766dd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1NDA0MzgyZjk1ZmY2Mzc1NDA3Y2RmYjMzYmQ0NWFhMWY4YWM2YjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5404382f95ff6375407cdfb33bd45aa1f8ac6b1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d5404382f95ff6375407cdfb33bd45aa1f8ac6b1",
      "tree": {
        "sha": "a38f113e9c7c3afb7a6843714c0b22c98d97c75f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a38f113e9c7c3afb7a6843714c0b22c98d97c75f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a38f113e9c7c3afb7a6843714c0b22c98d97c75f\nparent 008177b2a23475ac0d9b8487c08e035571d766dd\nauthor Sjors Provoost <sjors@sprovoost.nl> 1701423228 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991528 +0100\n\nAdd sv2 messages\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4egACgkQV/+b28ww\nEAk2NQ//fZzFQxsCefJhyIHw11quSqTaRV20gYvNPmcsEOHfPaKv519uuxypLhDT\n//TvyL9C0eKEo6eqgigm8zCJIHbFzIlYfj3rFt+8i7ls5y0xbPrPoNGe6tT1FP6i\nK8GyirvwTOp4jAw66i0M6gk0/K9zshGIRTJZue2NbwmZfneAbw+AHbsjgcvg+S3N\n6k5gLegGhB2+VimQmMGJCPtCGWHrpX+JOY6KxaStYkOOfWg7VsonLTq8rNkJMPSN\nliMZ0XH5l/3fHIfFY/ZiWLdgJefFMpSzejL5ExKJA6dPla2J3X2i8fdVAJkRCLMD\n1hxtHow8qbx82MMX0QnmELhAhRO7nMMEnVj1+pYD482GtiLQbt4frlLO30S87WDZ\nkWYF7SrDYMFwMRNQ6cdkVLs6a5qRZ1SojTT+sCkLS50+iFESaTdViFQ/4ABGwOSs\nYYsMmgeYD8KPwQ+BHc5ijiuTMa/XkQX5BFeCyrrxNjW3GGz2XVmPe51MOYKgDiYq\nx2icrVhWHVYykEgLJdgV+0seDAk3QQL5/K4uHDiK/+g/68cErTeeTCWUtjXQnAY6\nIs/1Fq4ltWxq4eVib9TBesGFbsPy5ugPy7bMwu5MyKcykYoqeCzfbh9hlt360B25\nfLatBuYAqqQHFCNSxj3MYrsg1U+2e3beFulmkVAHwwRcvD24BAw=\n=qvLz\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/008177b2a23475ac0d9b8487c08e035571d766dd",
          "sha": "008177b2a23475ac0d9b8487c08e035571d766dd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/008177b2a23475ac0d9b8487c08e035571d766dd"
        }
      ],
      "message": "Add sv2 messages\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:28Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-12-01T09:33:48Z"
      },
      "sha": "d5404382f95ff6375407cdfb33bd45aa1f8ac6b1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJkMGM5YWIxMjk4MDMyNDc2NzhhNThmZTA4MjdlM2E3ZmE2ZjM1ZGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bd0c9ab129803247678a58fe0827e3a7fa6f35df",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bd0c9ab129803247678a58fe0827e3a7fa6f35df",
      "tree": {
        "sha": "fe68fbb4bbc4b4bba9fc041f3c682ed1dd947765",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fe68fbb4bbc4b4bba9fc041f3c682ed1dd947765"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree fe68fbb4bbc4b4bba9fc041f3c682ed1dd947765\nparent d5404382f95ff6375407cdfb33bd45aa1f8ac6b1\nauthor Sjors Provoost <sjors@sprovoost.nl> 1704742135 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991528 +0100\n\nIntroduce Sv2Transport\n\nImplemented starting from a copy of V2Transport and the V2TransportTester, modifying it to fit Stratum v2 and Noise Protocol requirements.\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\nCo-Authored-By: Fi3\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4egACgkQV/+b28ww\nEAl7ehAAswtxraoA93GIsWDcyX8OawXDslH0JlxYXpICUoiQzu8+Zpvptu8eH308\nU4f7xLHxzK6fpb8kGU69q8PmIzDzLnc2Tqid0yvnzQCqIFGbpEx4veuk+96+N0IV\nbcFeS3y6qOQ8R6g2/4TFDXHamCy8/nxCrm9AF90sw7+OWymNQV5zFTUMOelpIvzx\nLi7k9WWnw8EOYf8hEIgi74rMKeRye3rQRr00ajMN6/ElGR5MoVMhcBpqkPIpitFl\nDjToic6uboMba5ZWuGDDxFcpAIFbBZ3bzoIRyV/xUpUvx1aS83Sh52fUxMpaPEeY\nx04jFJENhLnwuHhP/sbGiWmBbfFcR1BMifUMVGT/nGHuGEgTjkW40iZx2mQ3IZz8\nKFkNw79dx6XxCAHPky1AmQ68e7JZX4hy6nFvYlf8LkSpfd5jS1ZADuN+3ROcixB9\nTCRFYUvuqacUoBlPEcece7KMcuuXNVM791GcpigW0Wd79mbLQ81JLpygJcjwcXcy\ndrpYZ1U2WtcBk7OCJ9p//faHCJhWhfssOl9H0vZIKHeIu+z40+cvcoe2qHBDZWYg\nr5QyTwDr67IAa7jzHBN2BFmcSwqaImEXFWGL0ge1RVb/GMnHfzNx/Z0tqMsDKEeM\nSq7k7iYZ1xwIBi1sm3ULq/vVnqdvJlpDfu+UL6uFiSeq7SOOens=\n=hoj3\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5404382f95ff6375407cdfb33bd45aa1f8ac6b1",
          "sha": "d5404382f95ff6375407cdfb33bd45aa1f8ac6b1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d5404382f95ff6375407cdfb33bd45aa1f8ac6b1"
        }
      ],
      "message": "Introduce Sv2Transport\n\nImplemented starting from a copy of V2Transport and the V2TransportTester, modifying it to fit Stratum v2 and Noise Protocol requirements.\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\nCo-Authored-By: Fi3",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:28Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-08T19:28:55Z"
      },
      "sha": "bd0c9ab129803247678a58fe0827e3a7fa6f35df"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNkY2Q1OTAyZWRjOGY4ZDFkMjMyNTIxMmQ4OGNhMzdiYWUzMzRiMWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdcd5902edc8f8d1d2325212d88ca37bae334b1d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cdcd5902edc8f8d1d2325212d88ca37bae334b1d",
      "tree": {
        "sha": "06fdd1149c6e225c90df8bbd95c5442c3013de43",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/06fdd1149c6e225c90df8bbd95c5442c3013de43"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 06fdd1149c6e225c90df8bbd95c5442c3013de43\nparent bd0c9ab129803247678a58fe0827e3a7fa6f35df\nauthor Sjors Provoost <sjors@sprovoost.nl> 1706793529 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991528 +0100\n\nCKey: add Serialize and Unserialize\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4egACgkQV/+b28ww\nEAkMKQ/9EVzZfd9qy5ewWQ0wQzKwn6tAT7DonB5LJQfOn7OfUV1IFYYrdpWX7IWw\nwm2SS5M0yxJgD/VvvocsnbeE63KIlZu2f+9FmOJRnTxdW7SLifFxewt2bYsLQ01+\nEu1RNem1chxHUEe9jJqbuyWNRfNb6rh7Z6ZLrQt0/Kbz757vz9CRG7utRuIz8+tr\nAZGQfg16QofI07670dAyOTHrF8rOUNv0G1O3xCmpE7yTOo3sfDUfAC5Q12UWg9wc\npEu/xmQ6igHMJLhzCaAoYR+UqLI1b9iv1b+JThWzpruXcQ22JKbLaJFrV5ZlWstt\nTYHfeFniCYTdf8iBgk4guW23A2A7dYnH8KDBDVLfZ3ovhpXgTtBik3Ul4vUUil+j\ntR3RmytwoKhTYeP0dyiwtZNit6F9n80fcmKyuUNDhkGuBqhIUNLWkt//LAep532R\nIBC2xK150PhBUhAPahIxWPNiCpDPyRnjUytwuDy6VNs2aH6C6o+fJbenEjTDgOHZ\n7FE6PVLDMhp5A0IRZdFd1C3OgjZrX6Cr2sR829yF3a/fqCyJ4xXZygguHNWV0Bn8\n0WUh9w+F+O5pDSAXgTiruDCbVc8OZP9F7Xm/LMsMV2jYnJRdGMfbIufsYguCN17Y\nnJMKt+IwRYsK82rWzM7TFnSOkW7NsSe6eHqFr8iRWnnvNMJTC10=\n=RllC\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bd0c9ab129803247678a58fe0827e3a7fa6f35df",
          "sha": "bd0c9ab129803247678a58fe0827e3a7fa6f35df",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bd0c9ab129803247678a58fe0827e3a7fa6f35df"
        }
      ],
      "message": "CKey: add Serialize and Unserialize\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:28Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-01T13:18:49Z"
      },
      "sha": "cdcd5902edc8f8d1d2325212d88ca37bae334b1d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNiYWJiMTY5YjFmODIyYTEwYzEzYmNmZDc1NDJjOGY0N2M1MTUwZTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3babb169b1f822a10c13bcfd7542c8f47c5150e2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3babb169b1f822a10c13bcfd7542c8f47c5150e2",
      "tree": {
        "sha": "73dd9ae2f026a4d6735e2d2946634de5ccf4e188",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/73dd9ae2f026a4d6735e2d2946634de5ccf4e188"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 73dd9ae2f026a4d6735e2d2946634de5ccf4e188\nparent cdcd5902edc8f8d1d2325212d88ca37bae334b1d\nauthor Sjors Provoost <sjors@sprovoost.nl> 1701277619 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991528 +0100\n\nChainparams: add default sv2 port\n\nCo-authored-by: Christopher Coverdale <chris.coverdale24@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4egACgkQV/+b28ww\nEAlgaA//ea+R6W2a8cWbPgDTc4APw7mzgWm35guf218r4fZT9zVdoF8VG+rrYZ8q\nbK35YSgYho2ZqDEY9XIliLKbphFVubmjDSzeC/7h/mHVqev77Efm16+Mw6km1yXR\nx1hiJ7WHgVT9TF7R2YSVQsyk9FXdxsFvx/n1CQR+tGZOA9CI8apZ0k+LA69zlWME\n2eXhcw8AMcdGs56XE/EWseVAWTsVdEmwLoL99dbA2iHesEBS4LpVX1zh/WvcJEUV\n0y5gN1DC6j7hNFll3O1Du+oaaIRZONUfP/8rSAxO5VSDJe1TXMXEE20lUhifOnTA\n1CXIA8bVdfxEI3O7PK9hcb181aEk/pNf+8pNOnaiF1UnnQM/TcUDljVql+SI2AaT\nZiG8SC56HrAO4tE9FIk2KGmRhLiLN/MEcRp2JWG3BFxSDZTqiNisKtQAOED1kZMl\nhTdyR3Mf7bQ7WHKdGu1ak5rhCF5vlIMZ3qeRJUasOCloY4dHD35Lc9VNXyFqjROe\n1SUykmfprr7+ZmNl+WVX5QNFIvpfSzyCjipu4+55yG87Ai8LD+0qK27O5Ni16fUz\nQG+n19Xf0Lgb4U/dYxtQZe3eqYlBmttqMxdqWrDHEQ2Az4CLFa5ohRNyEynp41JG\nmqqxXII83j/VJdFxdizEvAlWLmUGP9kBFA3NW0o8Fo9ge9ckCBM=\n=q+kR\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdcd5902edc8f8d1d2325212d88ca37bae334b1d",
          "sha": "cdcd5902edc8f8d1d2325212d88ca37bae334b1d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cdcd5902edc8f8d1d2325212d88ca37bae334b1d"
        }
      ],
      "message": "Chainparams: add default sv2 port\n\nCo-authored-by: Christopher Coverdale <chris.coverdale24@gmail.com>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:28Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-11-29T17:06:59Z"
      },
      "sha": "3babb169b1f822a10c13bcfd7542c8f47c5150e2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM3YTAwYTFlNTI0NDMwNTgwOTcxM2VhYTQyYTg0YmM0MjE3YWRlMjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/37a00a1e5244305809713eaa42a84bc4217ade28",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/37a00a1e5244305809713eaa42a84bc4217ade28",
      "tree": {
        "sha": "3a6483ea2c111fb3454eca2c5412f8e3d9166cf6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3a6483ea2c111fb3454eca2c5412f8e3d9166cf6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3a6483ea2c111fb3454eca2c5412f8e3d9166cf6\nparent 3babb169b1f822a10c13bcfd7542c8f47c5150e2\nauthor Sjors Provoost <sjors@sprovoost.nl> 1704728495 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991528 +0100\n\nStratum v2 template provider scaffold\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4egACgkQV/+b28ww\nEAltXhAAv5ZKwmMSZVujMWUL+eQE99gM+MJhDjASg05jxYfnIq09T61aRdDRo5bw\n22Ek+/WC4Sr3J7LLR4DJwrMFWKpNW97oah5p0q5/NlAZssyABbbIr4Ru/xIOdgZZ\ngbyoUBoSTGygmUKIEzrTgN5DQgt3RmWVw7qvcw1zfGcqIhq51DFbykOyz/BWGeeH\nbCVH31dihae+L1IQ17GGu/5KK47lGf+P31G8YRRmPKTuP10DCFj1yWm8wYRAgj+C\nLyym54jwlUnrYaAtw82qkrIuJZdTqgYRB58YaZLAkhrKUyK/5Ray2ptIP9IoeEZa\nukU6jcLCX35/CA3OiZ3aummAKJrfKpvt3/6hS0y7JS3SLFx7Rq93NrzRg3LHTJ6y\nUys3kcsa+/pLa5ZZwGpBJaWd2b+agZjn5080XRbe4YAzw/wSV0mn4+5OthkthVXT\nyDPBD00hFItEqCpTMKP8HLa0beABY7d9hFhd5OXo8jI9hgIAUl9KHM6YPt7cAF2R\nBQYxrRv4gV6pkeLWyBA7tjPSZHALnKOda+1MNev79gr/smdpjND8qCdjbzN7IxQy\n6Oa0lZkZiN1vyWRMyOAPT3GR0kafzLmBVuIKaPtQKu8aj4hACGW2nBSnBHy8UrH1\nalERWkOhSI2tjgGo48Twz3SqB7muDw8momKIVWULsI4lxMg8vJI=\n=ZHDO\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3babb169b1f822a10c13bcfd7542c8f47c5150e2",
          "sha": "3babb169b1f822a10c13bcfd7542c8f47c5150e2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3babb169b1f822a10c13bcfd7542c8f47c5150e2"
        }
      ],
      "message": "Stratum v2 template provider scaffold\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:28Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-08T15:41:35Z"
      },
      "sha": "37a00a1e5244305809713eaa42a84bc4217ade28"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ5YmJjOWRmYWVjNWJhODc1ZWY1OWMyYTk3NmZlZTkxZjdiNTIwMjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d9bbc9dfaec5ba875ef59c2a976fee91f7b52023",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d9bbc9dfaec5ba875ef59c2a976fee91f7b52023",
      "tree": {
        "sha": "bd732b5037cad52a9509a90eaea6c6ad00723b74",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bd732b5037cad52a9509a90eaea6c6ad00723b74"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree bd732b5037cad52a9509a90eaea6c6ad00723b74\nparent 37a00a1e5244305809713eaa42a84bc4217ade28\nauthor Sjors Provoost <sjors@sprovoost.nl> 1707468085 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991528 +0100\n\nTemplate provider sv2 connection support\n\nThe template provider will listen for a Job Declarator client.\nIt can establish a connection and detect various protocol errors.\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\nCo-Authored-By: Fi3\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4egACgkQV/+b28ww\nEAksyRAApcLbbVmc0Q/3HG36C7kTtqR+JwLbCfN07Yno7bfyoG6+Wbm6Z4XLLi/+\nE2RC6MevmGgl3mNDTrLNrYfz8D03sjaIQkkbGMwuQctBDHiDI393B8SPpDtKG//R\n1fy9v/2lrZMo0dNXL9JUqphR1E5ntALo5f2TEAwSUphFc+rx+5f19UIm0cawFwCk\naw/4z7/8Uhzt1KD+ZOFfMMslnwW5HLwcjvxdJ4pVXqwdDLcxspSa8fL1bwRSFaHI\nyY40YBh43qS0CiriTLyvenqU90Ryml0p03qEd7XxYYjBOrnOx785SrJbX66UlZro\n+lRmZwj3pv1tJA+l/UBN7n2Y7T/5QSUI+aZMeZeXFy0SBslnwY7kpkhfcQxJggiZ\nwuw3VW1BplpDZwVvSju6i1IX53qTQOCUqca0CEt1X+gbFoHvg85d7SR3rky+dtnp\ngepicMwLu09yHsd+0qYHk73vkZYK+46qVcMXzxg6q+MJeMANPp6VxjBdA6jOx4Dn\nk2tpLavBJ130AfUIcsNIq1WEDqI+nIS6J55ocZK/59uykJeq+kM5s1N4cf7B6piL\nERLPhWSLy2mFQ1lkgY1Gt6LzUg+NZeeZl666ybstNNEn359yZwq7xvM5FJEYEp5Q\nNA19hLfWvx150kV5c7NeYW46oBFhmNh02MMW+KMXUBdWcNC2tVY=\n=NJ6n\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/37a00a1e5244305809713eaa42a84bc4217ade28",
          "sha": "37a00a1e5244305809713eaa42a84bc4217ade28",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/37a00a1e5244305809713eaa42a84bc4217ade28"
        }
      ],
      "message": "Template provider sv2 connection support\n\nThe template provider will listen for a Job Declarator client.\nIt can establish a connection and detect various protocol errors.\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\nCo-Authored-By: Fi3",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:28Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-09T08:41:25Z"
      },
      "sha": "d9bbc9dfaec5ba875ef59c2a976fee91f7b52023"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGViYWE0NTJiMTEyNDM0NmE1Zjg3Mjc4MmMzZmY4MWUxOTIxZmU0YjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ebaa452b1124346a5f872782c3ff81e1921fe4b4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ebaa452b1124346a5f872782c3ff81e1921fe4b4",
      "tree": {
        "sha": "51acd65bf08353e861984ed1b9dc0d1e45837153",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/51acd65bf08353e861984ed1b9dc0d1e45837153"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 51acd65bf08353e861984ed1b9dc0d1e45837153\nparent d9bbc9dfaec5ba875ef59c2a976fee91f7b52023\nauthor Sjors Provoost <sjors@sprovoost.nl> 1704985128 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1707991529 +0100\n\nPersist static key for Template Provider\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXN4ekACgkQV/+b28ww\nEAmZeQ//Yej2uWZE8nZuViQI1xGd9YkcqCeaEuck7ldMjSIEsbegVEoCDmH11wG2\ngUaYfYYwTjWec7Mc3Q925Evt7sEuYKXvtVkY64NhG7pbFwA/6oIZhB4Jo4gHnNX3\n9p2zW1yM8pQ4wQwnOYu3Tw8eunjdPYabziUhVJ6+umLuFckZGvjWj4zAtvwoqlvP\nbGOHwrhFh9DeZ8wM+VbSVFTaVfKQ7mY0fZN2aNiw34azzX9KQiYbOxd3ENSIGWin\nBRfpSFHB498uKLBycsR+dNWwDkKgsxLKCTN14M/96sti5Ia/HSWUSJSiOqzkegQO\nCqLZrZWamd831dub45kN+XGvQWiHnYeb/jOWtMTOLe6ngmQ11bdYv+fxMdQLdPyh\nsUEZb1x781ULNykcPsEi6Ts1rGrimOCK4/CXM6K9OQuNLpFNHeO1nf34uVf41cV6\n/KcQyYotXIczm85l2P1qFG06CqTqUc1y0pf7ZdCzxLXGLIo1vGcjp0G3dAuon/E+\nGcgBEexfo5rsemOa6MFjectEFboIoCaeMEqyZrFsQK7JJzHPZy23p2wFXCIWOyLU\nuYcsbT6AeLxN2nVHTmbMxw33K1rDE22kbA/BYgBeDdwC6xPm3Vw28psmKkLPnYqM\nvj96MMh4po5ipPlAlpyS/+Als/YXRHFzCCwWzl6NdERChoG4AQw=\n=NNoc\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d9bbc9dfaec5ba875ef59c2a976fee91f7b52023",
          "sha": "d9bbc9dfaec5ba875ef59c2a976fee91f7b52023",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d9bbc9dfaec5ba875ef59c2a976fee91f7b52023"
        }
      ],
      "message": "Persist static key for Template Provider",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T10:05:29Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-11T14:58:48Z"
      },
      "sha": "ebaa452b1124346a5f872782c3ff81e1921fe4b4"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11813556469,
      "node_id": "HRFPE_lADOABII585_NKHDzwAAAALAJJD1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11813556469",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T10:38:55Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNiMjE3ZTM4YzhkZmNmZDc2Y2JkYjczZGQwMDQ2YjNiMDIyMjNmNGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3b217e38c8dfcfd76cbdb73dd0046b3b02223f4e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3b217e38c8dfcfd76cbdb73dd0046b3b02223f4e",
      "tree": {
        "sha": "7015029474b46641b04937b211fb94a5f9b1f0a9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7015029474b46641b04937b211fb94a5f9b1f0a9"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7015029474b46641b04937b211fb94a5f9b1f0a9\nparent ebaa452b1124346a5f872782c3ff81e1921fe4b4\nauthor Sjors Provoost <sjors@sprovoost.nl> 1703773536 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708005227 +0100\n\nSv2: construct and submit block templates\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOF28ACgkQV/+b28ww\nEAn4vw/9GFw88cYsYMCcKT8SQsgE7p1IeS44v0QLskfWZowKbRtEJJi13S6fLLoL\nZQgscUDmGWM6XaOsVZX+9tMo7PB2UBf4ffQfotm0YoTOLNnelf4+ythA4A8iFhpx\nKvum36OPwhgVwA4xcLX3KXzDRdozMD5EwDdyKaI2l51VXkc65fBvaUOlMATtZaFt\nqQhu/DCCDG9WPyH2gmiDOo0qimV4K5QzhUkItMb05jr/dOKhyKEdoN5yE2cH++EA\ne6/t5zyX+A7mUukd7fJAo9F63LI7ZCQX8mrxORvBsLucgvtzZg6lSJ8lzkZ5TVg2\nwTDhgIR0WbGAN3BsUJtv4gJvB5fgFQj2lWV9HHyvYsN2R+oDgu8zvL6VZikBuIio\nLR0rvQvATYfT4UJzJ624foC6Mpw+Gnx6syLnZKHS7yCViuMlRmWFbohPTpOsLuFD\nbpY92cG1p8Lht8XbCuTWRguyJCsXDXtXsom0ECvibtcPZq47/O4vSo90Co+9GNwo\nLAX4X5mqGuF9l9iPEeQYmCIoZmLEZ1qQPB4sV46TKE4KCSDM5kw8B3wswmbNLS5o\nSqUN0dlI7vGo8dh2iJYtllVzbDTpZ10VfUZEB9MuMC7s4NkQ7h7MKSZPVyT0bknO\nw4L3N2D36SoqBMD+t4bzOciSIAmJLzF0PEBoGCcJOZOXMUXuaJQ=\n=PApM\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ebaa452b1124346a5f872782c3ff81e1921fe4b4",
          "sha": "ebaa452b1124346a5f872782c3ff81e1921fe4b4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ebaa452b1124346a5f872782c3ff81e1921fe4b4"
        }
      ],
      "message": "Sv2: construct and submit block templates\n\nCo-Authored-By: Christopher Coverdale <chris.coverdale24@gmail.com>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T13:53:47Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-12-28T14:25:36Z"
      },
      "sha": "3b217e38c8dfcfd76cbdb73dd0046b3b02223f4e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGEyMDM4ZDFkMzFjMGEwNGZhYWRhZmVhNmVhY2JhNDM5NjBlNjExMzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a2038d1d31c0a04faadafea6eacba43960e61138",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a2038d1d31c0a04faadafea6eacba43960e61138",
      "tree": {
        "sha": "2f5028eb0ce6e5a2f7282331f373d30151dfad63",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2f5028eb0ce6e5a2f7282331f373d30151dfad63"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2f5028eb0ce6e5a2f7282331f373d30151dfad63\nparent 3b217e38c8dfcfd76cbdb73dd0046b3b02223f4e\nauthor Sjors Provoost <sjors@sprovoost.nl> 1701357076 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708005354 +0100\n\nIncrementally update sv2 block template\n\nCo-Authored-By: Fi3\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOF+wACgkQV/+b28ww\nEAkyZBAAwzcSNK6gxrdF11P/oNEfhQy6Pkrkq3CQ2LT/8/hRrwnbPw+pXoi2F9qs\nzBour/Y7eDn32TmE7ekZtBG05vw/0nlcQJK2U2RY4Vt8NSdX2UCJ51Bz2S54LIZd\nq8m/4ArrV6VpQjAv2+QLQ85o53+qL2+jGtJIAII5UXMkSrVK51R5RVfnQGLNAhDF\neXzGcBGPfpqfEVx6CHIM4DU5mh8JwQRvBk5DHcD5c/8r991k8Xr5dUFIWMNM9LWH\nbVNVytZosqVXjRhOnyS9PrzkJfhj0Ic/RawOOxRLJDBJ/Q6bjkrLdar4i5XJX7cL\nzMf/XCIoADgyVma919X9kHyGPiJA8HiH91c+A0obPDCnwWfc8q+GUePlPJFncM5E\nu/qY+PETai/BGPaxj1gPSOkuuNoaQW2uo13uZCAY5WEPQB0bsquZtuBIx00/Dwub\n9UQ4rYVDSb14u6/v8ambihM10zg/98hhjGEhsWxhzZ3aYwDL8GE9AwTTlTXYgxJ9\nOq09wJtC1+zp5+XyJtSiXsoTQxZ5rtZrwIb6AM5wcwmTzfTby1MVvEJ3WrKPmTB8\n8PLRLPSkzVw+yEc4wJfIpE74/USy9Yb1PW3ttvkKJncqSUtAvThdX12RXMXJ9ILg\nAxmYfy58RKEKTaf5bFF4qpttZakh9YE0dkQjhpI6OtZ/plW65CE=\n=fZ83\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3b217e38c8dfcfd76cbdb73dd0046b3b02223f4e",
          "sha": "3b217e38c8dfcfd76cbdb73dd0046b3b02223f4e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3b217e38c8dfcfd76cbdb73dd0046b3b02223f4e"
        }
      ],
      "message": "Incrementally update sv2 block template\n\nCo-Authored-By: Fi3",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T13:55:54Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-11-30T15:11:16Z"
      },
      "sha": "a2038d1d31c0a04faadafea6eacba43960e61138"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIyYTQ5MjQ2ZDIxMzMwZTYzZmFhMThhODMwN2I3MjNhZGU3ZDBhOTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b2a49246d21330e63faa18a8307b723ade7d0a96",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b2a49246d21330e63faa18a8307b723ade7d0a96",
      "tree": {
        "sha": "711423630950018f1f64ce0a2bea4e7e2d06f320",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/711423630950018f1f64ce0a2bea4e7e2d06f320"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 711423630950018f1f64ce0a2bea4e7e2d06f320\nparent a2038d1d31c0a04faadafea6eacba43960e61138\nauthor Sjors Provoost <sjors@sprovoost.nl> 1707751785 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708005442 +0100\n\nReject RequestTransactionData for stale templates\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOGEMACgkQV/+b28ww\nEAmaUQ/8CqQ2AT8lMT8btiGaX4CDt0p7NC6eebgeSsqzeln6owgnQc4VnQN8PCc5\nXmZu8JzQHoi805bfVjDXCQdxMX+g40KWGqWaZeHW2Svj55IwPWL5f/ZiM9xISJRM\nx0Yl/HxbGRxqffbWKmmTlOUeQdqGcQeOoO8kLa92LWYsLWsWaCskNeEbnirMgOs4\nsjBeDju1CxG3qnWn1tgoHzdGKhtA0W4u/d5+LgBa9NzyFRl0qhI93rWwn2gSdX6e\n6YqzUxn7cBCKe0I9IEm+Rm6htKgMcZf7L017UYeDw8Wz7qCSA5gPiP0YJjmL/F1E\ngVrthAecDFU0oYRgLFhcOQU4FKrhBZJH2m+zz05rVyreAaejqjc5bH3edWqMT5JA\nsCVxNd4ZQdIHLAN5CS7D17EX2XtMog5MmMtqzbbZ/pprb65wd7QEm1ZkZ0FK9XXM\nER5Fm5LmAJOCqgwjSJ53MpkEpomNLd9d/+yzYDaaR6+6GLSVROGDtITZDNw1EeSf\nksMmq63MS/FgY7a7H/rv872dHqWtGvG9FD3uz+4Yetbo8XEy7GnnD3GOVguicC/W\niyEklevCeWPJsBSnnON7n5++zaxVgtktRg5n1Mt3ZrRkkzUrwgfhpRQt4DjvNeQV\nsOw7HqR32Hg/svMWe/aE4REeeg7FlgPeqmZWQXd//fbTfZwmRMg=\n=8L7o\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a2038d1d31c0a04faadafea6eacba43960e61138",
          "sha": "a2038d1d31c0a04faadafea6eacba43960e61138",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a2038d1d31c0a04faadafea6eacba43960e61138"
        }
      ],
      "message": "Reject RequestTransactionData for stale templates",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T13:57:22Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-12T15:29:45Z"
      },
      "sha": "b2a49246d21330e63faa18a8307b723ade7d0a96"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11815961938,
      "node_id": "HRFPE_lADOABII585_NKHDzwAAAALASUVS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11815961938",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T14:05:04Z"
    },
    {
      "event": "commented",
      "id": 1946168171,
      "node_id": "IC_kwDOABII5850ACtr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1946168171",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T14:07:31Z",
      "updated_at": "2024-02-15T14:07:31Z",
      "author_association": "MEMBER",
      "body": "Added `m_tp_mutex` to `Sv2TemplateProvider`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#issuecomment-1946168171",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432"
    },
    {
      "event": "commented",
      "id": 1946293497,
      "node_id": "IC_kwDOABII5850AhT5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1946293497",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T15:12:13Z",
      "updated_at": "2024-02-15T15:12:53Z",
      "author_association": "MEMBER",
      "body": "Bumping macOS to 14 on the CI does not help (tried in https://github.com/Sjors/bitcoin/pull/35). I also can't reproduce [this failure](https://github.com/bitcoin/bitcoin/actions/runs/7917147558/job/21612591013?pr=29432) on my own Intel macOS machines, not on 13.6.4 and not on 14.2.1. A `Sock` mock is probably the most robust solution, but it'd be nice to find another workaround.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#issuecomment-1946293497",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYwMzQzOGI2MzgzZGMxOGU0MjEwODRkODE3NTIyY2YwM2Q1NTU2M2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f03438b6383dc18e421084d817522cf03d55563c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f03438b6383dc18e421084d817522cf03d55563c",
      "tree": {
        "sha": "276b193dc2e91c92a22660bae130faa9875c12db",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/276b193dc2e91c92a22660bae130faa9875c12db"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 276b193dc2e91c92a22660bae130faa9875c12db\nparent b2a49246d21330e63faa18a8307b723ade7d0a96\nauthor Sjors Provoost <sjors@sprovoost.nl> 1707312064 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011290 +0100\n\ntest: Sv2TemplateProvider tests\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxoACgkQV/+b28ww\nEAndTg/8CMpuRGJxzdhq3jC+exlCWkrNHsxRyXlBPrJUFH3Ad/WeWtOT8O4x7QQH\nGQYg1VwgUbiIAGq7xPQLJiDGkXAx4v2FnEX86lnda4vox3YPJJKPo3LIglAwQe/n\nN/tDvB5Ycc8+XWG8/SpZ2sUBwkmp8o0/a+C7NA7ORp91NZCmYBF0zO9KvniIEZ46\ntMZmPgz58dWe5XK0UmJhtNwiCAPOCtxmLvX9ObfTmqbK5Jt7W+n/XKOErmqw85cs\nYIwwaLw9oxPjRwbeGp7P2DrvNVJ9h+qwfXXBL6LJFHKgswL5aKVMGTMIEUVUOri/\nJ3L5+3OuUlQ1SAiOlItB5UJR+dWMavg2EdEqQrqwBJqWghTkuLdKEPkHxe+jkf5T\nWsLDBixAlm/yac3Q4z83NKdA6wHW+rJK+ZfWnZpC/iGoh+LjBVSnrXeoEyIReQud\n3cHNiZtyrbw8XaauDPUrp00HQjthp3WXAjXomTa1m3C8414GcUAJZpJquhHoiwnD\n4ZjIh0q3W7nDIC12/lTIX8pJXqDxintddj4IOdMl9y/ePUiRWcFXxTMcWP851eV3\ntr7DXsOwaW/hPuoYBveHa+1A4MEiyBRX7OInn/Y5Y4RaVZt55lkGr+Zfo+pjVUP7\nI9a0WWbUhkQzt7XaSNmvI+zziuyrBt9XjHkpwo2Rm52g9VU0hSE=\n=eWFC\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b2a49246d21330e63faa18a8307b723ade7d0a96",
          "sha": "b2a49246d21330e63faa18a8307b723ade7d0a96",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b2a49246d21330e63faa18a8307b723ade7d0a96"
        }
      ],
      "message": "test: Sv2TemplateProvider tests",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:50Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-07T13:21:04Z"
      },
      "sha": "f03438b6383dc18e421084d817522cf03d55563c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZmNTI1ZmExMzZhZjY4YjU0MDg3ZmMzYzVhYzQ0OTkzZGIyMmM5NzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6f525fa136af68b54087fc3c5ac44993db22c976",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6f525fa136af68b54087fc3c5ac44993db22c976",
      "tree": {
        "sha": "3cf27dc147b2ea47c5c36e9434f07480d7762757",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3cf27dc147b2ea47c5c36e9434f07480d7762757"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3cf27dc147b2ea47c5c36e9434f07480d7762757\nparent f03438b6383dc18e421084d817522cf03d55563c\nauthor Sjors Provoost <sjors@sprovoost.nl> 1702044481 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011290 +0100\n\nsignet: miner skips PSBT step for OP_TRUE\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxoACgkQV/+b28ww\nEAkIKhAArH8SanJgtva70VrEti9mazUAuwT3XEg11Js8qUqncMNy3HDa6RttirjW\nHRXMEFUZtq2EhraHKzNXJ1HyUyozDwItXKaAhh6ZPYAZke1bAPN0xgdr/JhPrEz0\nlEBFbpght81Hxb4KbgihjsaQoAqdN7oZS+MNK8WFF1bSVKabzmEnd+gwcySGXlQx\nGzXLsdPNzUig/WnOfpWJi/zvrWQNqjEa7H6CadREXNmj4ayTbkr7+BtKwZXdD8rt\nlE21F8ZV1GrVZbDmNm6gp0Bl/GRRD3O9sRO0j/Q6rMPK3bN/hWp9+OITsUyYdyV8\nfJ5M/JGXb0oCR5PppjrrUGVxs0LfCg7BtocB0Lj8T7Ad52yMsh+xKDC9KI6dLBIs\noseG1LckjIAfQSZYTuu7bG4kjzCmpQTYt92drBgrxKgb7BTpP5A/6wVpxXuKkTJa\nmEytRNy72TEK21JSnIaYbd3xMHhpq4MACUrW/6LzarOqiX6p9SbHnarUo7GQ72C0\nLpFAsIR1s5iX6UFfpbDx4EqB+3ydfyRTnV/KlYfme+yZqxSbqy/a2G+9eaHV9oZe\nNiuvZl+PVbN2JZfaJYfOQAQK0ruJ+zuzKzDNEVgBpzScAHdBDEKt2V4mvbHix/ZU\nfwRDiMa+2D7+u5/FoU16x7VMejSz9k7RUtFwawUzQroIKy+/Vs8=\n=czoe\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f03438b6383dc18e421084d817522cf03d55563c",
          "sha": "f03438b6383dc18e421084d817522cf03d55563c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f03438b6383dc18e421084d817522cf03d55563c"
        }
      ],
      "message": "signet: miner skips PSBT step for OP_TRUE",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:50Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-12-08T14:08:01Z"
      },
      "sha": "6f525fa136af68b54087fc3c5ac44993db22c976"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI0MjZlMWZhNDAxZTMyYzZiM2I4OTFhMWQ5ZmI2OWExNGE3YWNhMTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2426e1fa401e32c6b3b891a1d9fb69a14a7aca19",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2426e1fa401e32c6b3b891a1d9fb69a14a7aca19",
      "tree": {
        "sha": "3013151a79d6043aaff5f06723cbe1293c4dcffa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3013151a79d6043aaff5f06723cbe1293c4dcffa"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3013151a79d6043aaff5f06723cbe1293c4dcffa\nparent 6f525fa136af68b54087fc3c5ac44993db22c976\nauthor Sjors Provoost <sjors@sprovoost.nl> 1703767798 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011290 +0100\n\ndoc: explain Stratum v2 design, testing and usage\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxoACgkQV/+b28ww\nEAkUKw//eGplubfY1TPtI5bo/X6h3GDxSqtOgkGxmY7DnfnGr3Fc/kDPU2TOFNA6\n3JZ3Goxl7707sZgM0BDt/4CJZ7GqW2CqRhO6Ayu3pwleT5nUVTtpuZKrjgHRmzML\n8LU0eDxDkKegSGTkJt9sSRB1ww+8TKx2p/dsyAxGYv8i45Ol7L5/ULcBy5gvkOEz\nleEQyvIivyT+NFQiRHWyIsyTsBilOh9Oel0xga6DIdZxJRTI3AWoK4B0t8T9bEo7\nl5KbvCDm65IR6Kk7/I8VapON5jr5Dv1kX8GhkynB5xafEDgxDyJXgBpkxv8lsNde\nVX2aFBD5xDOaBgU5Cjax6bdaFQ7HeQs+bjvRXnRpTaMNUVe9NShk+/qH+vA9ljFy\ngbJL7nspHzQZf9vf1VWQVgveOY00W7Evc4gR+ZERwJ13PvmGBnXhw3XR2bpyZmaK\nlSciFmYTasLzpM0UZgyeJZPh0QB95dnXd1cYwZM12jhc5AxRXGu85ljlD1mNIGcy\nmbxPpJe0qqp+w906HuUpPk7uM9QnXKo+1j4sE9uNWGUpVzSAeix2Ig02aEyJJFOx\nI2dwJg6kkkLXkai6HgAxZqUog6TwgzQlbOw+tNrkR5kJN8RyEzvbIsmLvPeQ7gHC\nAKpAiMrKwov/FaYNWi/xeZuglawo6EuFrXcJF97wCih1u2PiILA=\n=BLnC\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6f525fa136af68b54087fc3c5ac44993db22c976",
          "sha": "6f525fa136af68b54087fc3c5ac44993db22c976",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6f525fa136af68b54087fc3c5ac44993db22c976"
        }
      ],
      "message": "doc: explain Stratum v2 design, testing and usage",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:50Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2023-12-28T12:49:58Z"
      },
      "sha": "2426e1fa401e32c6b3b891a1d9fb69a14a7aca19"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAyYjAxODEzMjRkZmYxMGYyYTc2NWM5MGMyMDQ3Njg2NWRhNjA4OWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/02b0181324dff10f2a765c90c20476865da6089b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/02b0181324dff10f2a765c90c20476865da6089b",
      "tree": {
        "sha": "a50c4202752a1e0eaba4837daeb3fb69d2392d79",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a50c4202752a1e0eaba4837daeb3fb69d2392d79"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a50c4202752a1e0eaba4837daeb3fb69d2392d79\nparent 2426e1fa401e32c6b3b891a1d9fb69a14a7aca19\nauthor Sjors Provoost <sjors@sprovoost.nl> 1705442587 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011290 +0100\n\nci: vary /tmp/env\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxoACgkQV/+b28ww\nEAnmFg/7BaDf8Uguxxb8E46cupDZwpl94t9T0c+dDJDTKtCWnh45OV5qtWbSMDa4\nS0dSv+UqbbAI69nP+8OmTZjKp9IY7CdLY+dfB12v/W4NabqYsvGYnB8jvLt/IgHq\np4zg4TDjq0iqX/8ybRsjmHw80kV0wguGMdvJxepw5tSufLYEvQf7rOKaE328frfz\n/id7KOXmUIVD/vOmk3gCu64n4C9BG0Mux6t7CTksHdzeae0vjCsA04Un5vTuTOM0\ntZKikT0+Lmqbfqvlx5tNzmHxRGZpgHKh6ZpyF2SiGwkoYaLJLjvPZiq8Fo0QGqJC\n73DY+ssaO3L9ALt0kcG7cDVwjxf6jAflSvaV/OVGeukgpB361NhmyNH/Ha5rLxzT\nyTRyr7DrJHvbEag/VXRPxB1ytYoMVbZPgHaG3gI/VnpO/MTmZ8Cf11lt0woL1Iwc\nbdTU63+ADojlTQbLm+J0iY6wI0O5NFCEJTEutlrQ7DrQaw3rjwfEghBm8HoaBdd3\n+Ht3mYcJDVR6Qfnby5U14McFm9oNKmTgfrxxuLhyZHYwbzxdoOx0Li8BtKzuffgz\nEW807K4KJ10UJtwL05W2Q/rS74uYf7/qwJ7c3VgWNZnWR/clxVp/YSHTTzVByBG6\nptELEPqqySXjIWyAm4+3SuymQ5k43cSZmixBouodPhcGOOlSacU=\n=1UyF\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2426e1fa401e32c6b3b891a1d9fb69a14a7aca19",
          "sha": "2426e1fa401e32c6b3b891a1d9fb69a14a7aca19",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2426e1fa401e32c6b3b891a1d9fb69a14a7aca19"
        }
      ],
      "message": "ci: vary /tmp/env",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:50Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-16T22:03:07Z"
      },
      "sha": "02b0181324dff10f2a765c90c20476865da6089b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRhNzA5NWQ0MmNmZTE5NjEyYmJhZDE3ODUzM2Y4MDAxY2E0MmZhNjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/da7095d42cfe19612bbad178533f8001ca42fa69",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/da7095d42cfe19612bbad178533f8001ca42fa69",
      "tree": {
        "sha": "3b195c49ff4bbd1006cda0c55873ae4904e1c23a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3b195c49ff4bbd1006cda0c55873ae4904e1c23a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3b195c49ff4bbd1006cda0c55873ae4904e1c23a\nparent 02b0181324dff10f2a765c90c20476865da6089b\nauthor Sjors Provoost <sjors@sprovoost.nl> 1705434975 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011290 +0100\n\nci: refer to origin/master in linter script\n\nWhen this script is used as part of a Github Action, there is no master branch, only origin/master.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxsACgkQV/+b28ww\nEAlomhAAtodVslGXoE94qttpWJmsoR2P9dI/Zc/wSHkmUoLwNMYok67SGofYejn3\nWv/+pmP7L/E2h3oUEC/mRBABGRERQn0Gdg08UPOHFAkqIQ1I0tYAsVvCr9xAq6Zn\nkflGvo/D8gTxvZ/Izwkd3Cu+mbWKThqhD4p1IkV8rauW6StJAWe12DPVgnkA5Qyc\nqGrIMAo4bnmoNpBN5JfF7cDApaDzzOXY0TYWuDQRg/f/gPebcgQXcmQxTA6ynJx1\nXy5P9neuWbKwDcaNroY5W4xr+MVXc0kzaz2McFq1LJeo75WIQ+QWsvMzOKWYRHZi\nyXqaesG5EWn94ne3zNdAV6R9hjgwQNhMAHwhZCs18TjnozibmVP7aeiQW0ns/GgC\nzMRBfKOQOSyDVX1gwFP7DUrAwuaXyJdFE5h6Kz5v5x+pF/vfsKDUyH0VloBPpimQ\nIx2fEfCY+fBSSttBZsirOg0/BViNogwQpJW4mIl22pvLhoaNQTq8UYQ/JEdwhBMU\nZ1YtU941sIgSoI+KKSb26mUmsGtMPGJu+Loc8+pZobj3iMkA6lKA5Lg+Q8mUdqA+\n05k7r+ZWYuX3s66QFB2at3Xmt8xrEEWDTkvXAUA8B+Gcs76Ris6pfTLy5Khc93NY\nFoICF4MtHSmaahMDjT3GyDwPYDeWQtyLvYVD4wkTPU/i5g6YJyg=\n=kujK\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/02b0181324dff10f2a765c90c20476865da6089b",
          "sha": "02b0181324dff10f2a765c90c20476865da6089b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/02b0181324dff10f2a765c90c20476865da6089b"
        }
      ],
      "message": "ci: refer to origin/master in linter script\n\nWhen this script is used as part of a Github Action, there is no master branch, only origin/master.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:50Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-16T19:56:15Z"
      },
      "sha": "da7095d42cfe19612bbad178533f8001ca42fa69"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZiMmFkNGRhZDNkZjY4YTBmZmRiZjhmOTg4YzdiNjZiYjIzYzI5ZDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fb2ad4dad3df68a0ffdbf8f988c7b66bb23c29d8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fb2ad4dad3df68a0ffdbf8f988c7b66bb23c29d8",
      "tree": {
        "sha": "498e6c5a6ad673a15daed6321012169cc94daad8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/498e6c5a6ad673a15daed6321012169cc94daad8"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 498e6c5a6ad673a15daed6321012169cc94daad8\nparent da7095d42cfe19612bbad178533f8001ca42fa69\nauthor Sjors Provoost <sjors@sprovoost.nl> 1705595487 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011291 +0100\n\nci: forks can opt-out of CI branch push\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxsACgkQV/+b28ww\nEAk8chAAoHNNCbvg7QhgdRmxlTCW2ILTHXyt7F/FgVRHE+6z4eYnBlk0FIoXbwFE\nEZ+EwugndcG4PUPmfFACeC8QtnuXJmpek1pNHYF4dgI8z492W/znVFMPud8Vjc/6\n0UEy30qqArrhdzFyyOaxR5HyWqT5uwh/+ipxQhCGjOTDbm49EFPG0QLUuNFqVBe1\ncRLldfDidFZRxQcM+jjnDg97i94A4SbzkVh8nlmGgZojyQw07oHp0bVJJWLpts0x\nq15IFeq+7M3wMQV7U4lvTkaR1il4bI1o7L57x+ldw844NRqGZIp6TWlR7lOGMqZr\nwYSNOdXUG6o7o1U2YJtKCtt26HJzJK2q1OtGAEFoJYxP5D5ktIZHUd15bOxLyh04\n3WNUlCw0lOreiAdVyNqAyToIiOUciULwnhc2DLaeW5CxhO+wTKXnjxkRME7VY2rq\n22gXfs38mG8By2AP0DJEYQKuSXPoVQtxpNwj60cHNa6+uZQRPdWNoIkFmnATGznx\nkDN7s8/UEtaHF/s4jbTWZ2TUHGUECSPs9jDbdvZv9xrNXQMFE6INIeIr5Oe35UR3\nbM3aHUv7lnh/B+Q33y4XTEB2iSa/t37Y7OuoKGGkb0j5X50tLNqqcOTL3ru/3GBB\nMGIhpVkXP1fSVdCOhr3bfjNTJbviXVemA0cAmRQfiKhk2MCX148=\n=F5hR\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/da7095d42cfe19612bbad178533f8001ca42fa69",
          "sha": "da7095d42cfe19612bbad178533f8001ca42fa69",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/da7095d42cfe19612bbad178533f8001ca42fa69"
        }
      ],
      "message": "ci: forks can opt-out of CI branch push",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:51Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-18T16:31:27Z"
      },
      "sha": "fb2ad4dad3df68a0ffdbf8f988c7b66bb23c29d8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMxZDc1NTlhOWUyZThjYWMzYmViOTEwNWRmMmE1ZGM1N2NiOTEzZGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c1d7559a9e2e8cac3beb9105df2a5dc57cb913df",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c1d7559a9e2e8cac3beb9105df2a5dc57cb913df",
      "tree": {
        "sha": "8a77c103c6cd3ea4370c62f0355ddb0a90f2a89c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8a77c103c6cd3ea4370c62f0355ddb0a90f2a89c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 8a77c103c6cd3ea4370c62f0355ddb0a90f2a89c\nparent fb2ad4dad3df68a0ffdbf8f988c7b66bb23c29d8\nauthor Sjors Provoost <sjors@sprovoost.nl> 1705597885 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011291 +0100\n\nci: avoid sudo requirement for self-hosted cirrus\n\nCo-authored-by: MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxsACgkQV/+b28ww\nEAn4GBAAq8929Sce36Xw52MRSTlsaej7YmuRGS7ZtktqjFnyoZt36Vp/XfP7EVjO\nMuCBUANg5gxKm4K/tQJpI26v/diCSimG25CK9fM1IBoc3yyiWJ1tEuQ6M36UZuzj\nBS0V48Z18DzpthFyEQ0AyJt6MqN4KnOfJxJsnukHmZ9pCweByqnZppQjlJJlsj7B\nNH44swZcVLcgh8QvHgM7oy1bschnP9GfSpxap+BCTL6ghxpJErL9dCNIU9erLjxX\nsjf0B7SyAL4dMAt3wDJMUK8LgyUDjei1HyR5POvU2C/7R6IH+/0XO7oh/62EoPAB\nB6VTbyL6I42d/N3FlHlKpexmFgoXQAGb0E4xhvGy4FH3mqev5pnIbX77GoxCRc/w\n2CmKzeZlviy7GXydrEb6LycOou5hli84c1LQs+BP/VLrZM7TIwAJ8zW3ZKDSvQyA\nL5bNbbWxJ2SFTLeQUmfFE83PtPtulD78iAT9B17Nt2KO0vWqAnk4YRiwsfru1VQW\n373tj66Zb+ioyV925Xgy4s3774ZVmoV+GLBxL30m+o3Zzqd5P8/eisxx2f4El5Bv\nymJD6Wkk7HhX4kRpeom0N/CTo50mear9OaWBMAS/AxOGpCPh876pLCFNeEmHFvce\nkvzQil/wleJLAESJnmsWtoeDbR03+RU8An+84LX+ZB8KGDQYte4=\n=wiY7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fb2ad4dad3df68a0ffdbf8f988c7b66bb23c29d8",
          "sha": "fb2ad4dad3df68a0ffdbf8f988c7b66bb23c29d8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fb2ad4dad3df68a0ffdbf8f988c7b66bb23c29d8"
        }
      ],
      "message": "ci: avoid sudo requirement for self-hosted cirrus\n\nCo-authored-by: MarcoFalke <*~=`'#}+{/-|&$^_@721217.xyz>",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:51Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-18T17:11:25Z"
      },
      "sha": "c1d7559a9e2e8cac3beb9105df2a5dc57cb913df"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFiOTQ2ZGUwYWYxNTFhZWRlZjVlZjdjOWIzYzYxMDQ0YjllODMxYWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ab946de0af151aedef5ef7c9b3c61044b9e831ad",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ab946de0af151aedef5ef7c9b3c61044b9e831ad",
      "tree": {
        "sha": "3a67272ca10efbbf12cabbbc098952b64c78e903",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3a67272ca10efbbf12cabbbc098952b64c78e903"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3a67272ca10efbbf12cabbbc098952b64c78e903\nparent c1d7559a9e2e8cac3beb9105df2a5dc57cb913df\nauthor Sjors Provoost <sjors@sprovoost.nl> 1705584502 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011291 +0100\n\nci: skip arm and noble if no worker is configured\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxsACgkQV/+b28ww\nEAkImw//UZ84ZQpL3o10PFMg1pPgx0vRBlMYkHciaTWIrMbLO7OOSwuxCyH/6Sec\n/5op7J6yuJtDMxYHT3787hBVmcH1xkD7R39IMZgnaqW2Yym2w7de0MLyucPKstUY\nL5Yr/mjZ6PXLdUXTikTUFqcPasKHFZ3BRdcTploG57nu36CWHNu3rCeNKZ002680\nWqhrzXbo2n56Gjvm883T+g3aMFZZ5jRNVvltavKV7kEma+ZivD9AgxzkDB17iQNB\nYAchwLabL8AhiJ8ewijqsWz6bY/LmjuZe3uk0Rt88IJ3P5+8RpKUpVOGuPAwiN9A\niZMSElGvlrXdQxOe2bVOyZ5+IcZLjlOL2pfmm4ZF1s0zIQlDximFSG/QKlLFetKa\n7qS0zJg/aGdv6fMF6+ikrLibNsDFaniCi3xuqiiZIcv70XCIz9dCC0Sdub2ZnTaJ\nDkPlUsjxEzzCAEV+vRR1fzjZHk2Uq5eRJ1PQXiYocx0a3KN6IOyQ0CMQI2CyBdSK\n02FYhrY8LXGjSC+mqdKLUWVoLsUe6nPqLUy79O1DbtaG9SwALGuJHYVk9Q1nzjlZ\nVVL2eoYisaRSg3NxjbAuaRmjoWLwqePDSsR8pnKJpoVTMFrB+XFn+VTH+JHNE3wH\nM1zPglK4zvjSa8Ei3/DmJIXF1pFpe+paTw59NXm5RG5hZNaX9Zk=\n=z1Si\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c1d7559a9e2e8cac3beb9105df2a5dc57cb913df",
          "sha": "c1d7559a9e2e8cac3beb9105df2a5dc57cb913df",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c1d7559a9e2e8cac3beb9105df2a5dc57cb913df"
        }
      ],
      "message": "ci: skip arm and noble if no worker is configured",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:51Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-18T13:28:22Z"
      },
      "sha": "ab946de0af151aedef5ef7c9b3c61044b9e831ad"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU5MGI1NjAyOTZmYTY4NjRkMDliYzhlZGNlZmUyZDlkMWVlYTUxZDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/590b560296fa6864d09bc8edcefe2d9d1eea51d3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/590b560296fa6864d09bc8edcefe2d9d1eea51d3",
      "tree": {
        "sha": "1611d30bd47050063ab71d0ccb80b2f19c85c82b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1611d30bd47050063ab71d0ccb80b2f19c85c82b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1611d30bd47050063ab71d0ccb80b2f19c85c82b\nparent ab946de0af151aedef5ef7c9b3c61044b9e831ad\nauthor Sjors Provoost <sjors@sprovoost.nl> 1705595777 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011291 +0100\n\nci: skip Github CI on branch pushes for forks\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxsACgkQV/+b28ww\nEAn5BxAApbtuGTLws92/pTOu8HHq64qlV2kf6k7oOijsakOXFgk7kK3u2MhS1mZp\n8yZTlKATMAkDAwXKvlD+w+YswXdAc9KofOFy3HGVjGyNYSW8FCkHl45c01c8nakI\nJzYU0zuO/JgLkKVOpp45xrQPdF+XrbooDkFiZggAH7dBal3fmSG7+5tUvSWZRB3X\n9ZdKTMYYiF0SDVWa9iaY9CHxMkLBFHkz1CO+p8V5qk5ebAs37y+/rEeBc1Knl9PS\nkGkEidb55T0L2+aa48K8O2OXDTgiBHEtetJ4/qrNUlGbWA42MKYVzhPLHlApWKEU\nyEQqe5OARKBbYFfOuYlZMF0W9zqPYYK9jCyQe4Q2Qw9+Gl8FRSZvQTWaWrnVwR4U\nKho8zZuHntXJcGPNfjSh83b5vIYdxOf5VEia4PK2eBcW1cbAUdO7SxgP693emwqi\n1LRFjraifv35jI+i6crg9+5y1fkdgudWB7R8db9A6njIs/ss65sBamMSJvcCQRpF\nXkeO7yVcuB+lnzbOakBa1bHWBGmpbyzy+5kWOTYpT7JDlBYbvx2ZMmVH7hgkTgJz\n9hqw0N6SQszaKcVZts/NqnLyvsNMWcr3IOQ7LGgv5RSf57neoofusRLLyVXPOkBw\njJB5HqBr4jPOfiASxpEOsDNrKfSjiXrcxa+5EC4mQK844oQPMAs=\n=Ysyf\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ab946de0af151aedef5ef7c9b3c61044b9e831ad",
          "sha": "ab946de0af151aedef5ef7c9b3c61044b9e831ad",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ab946de0af151aedef5ef7c9b3c61044b9e831ad"
        }
      ],
      "message": "ci: skip Github CI on branch pushes for forks",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:51Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-18T16:36:17Z"
      },
      "sha": "590b560296fa6864d09bc8edcefe2d9d1eea51d3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY5NTBjYmQyNzk1ZjliY2NjZmRiOTYyNjY0YzBiYzVhNDY2NjE3MDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f950cbd2795f9bcccfdb962664c0bc5a46661709",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f950cbd2795f9bcccfdb962664c0bc5a46661709",
      "tree": {
        "sha": "9fe34f5198257ceb99a05f984698b49cc0db23b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9fe34f5198257ceb99a05f984698b49cc0db23b6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9fe34f5198257ceb99a05f984698b49cc0db23b6\nparent 590b560296fa6864d09bc8edcefe2d9d1eea51d3\nauthor Sjors Provoost <sjors@sprovoost.nl> 1705595814 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011291 +0100\n\nci: skip 'test each commit' task for forks\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxsACgkQV/+b28ww\nEAlYChAAhZ+sByWptLg8L6sD+oj9qdO9tAi2tMWlltQXPUInbI14CBVH7cNkIdYt\ntohDLZVjn9ItbaLj5i7/5HVvKb/DnSHDNwLfxj6FOTbAOXBTjSbhNOB6VFT4htfL\nkB27y93gNswPRQPsq0eH65Qhc3YgM7fFON3ZPjDM1rtskrLGzvuWSi29gdCxCJoh\nkHJSsF9YKOErI21G4sOMGHOXc+OVNKZSqZYwST7pRc+upAW7qYCl0hjzvw1Hri7I\nUP2ChT6aRks11xFu40A3KCgkePQwAgrneK2g4/cvI6xEGSp1YL9qQFcsYsebRCM6\n4uBE4793kZH4rX9o4F5ysPiiZ6yLLcp/hTW6J2HQa+UBILODX1190LFRks72v6MK\na54asp/GvUZnFgwROe12WtqBXcgSlDZGJqab0dtmQwFx5IFO8909mhVPrLc0kdOz\nBOeIqiuyD8nfki1SZCdvmkCa6j7iOg670rL+1XuG48+LAor6Uc9rr+cZhK+VfSoZ\nJoUG38KchmztQnteyRdHsrXXj61yRPkvESEF13SviLspcF17fnK23yir4tblTbc5\n72uB0TWZgCFjLzUc43w3qgpCcQ/H4YbO71BbsFd4/CCUDb/wbol/1MUqFL3lIIqY\nmpmFWl9S9+4BOSKgQ1PxASc9Vcx5d7KX/Qvk3kaReQV9PdaYFSs=\n=AckP\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/590b560296fa6864d09bc8edcefe2d9d1eea51d3",
          "sha": "590b560296fa6864d09bc8edcefe2d9d1eea51d3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/590b560296fa6864d09bc8edcefe2d9d1eea51d3"
        }
      ],
      "message": "ci: skip 'test each commit' task for forks",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:51Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-18T16:36:54Z"
      },
      "sha": "f950cbd2795f9bcccfdb962664c0bc5a46661709"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE2YzAxMDlmNWZiMzY3MDUwYzgzMDE1ZGExY2RiODU4OGE5NjQ4MDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a6c0109f5fb367050c83015da1cdb8588a964809",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a6c0109f5fb367050c83015da1cdb8588a964809",
      "tree": {
        "sha": "dd121cd8be9da6169eba2a5223be4a246a951c94",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dd121cd8be9da6169eba2a5223be4a246a951c94"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree dd121cd8be9da6169eba2a5223be4a246a951c94\nparent f950cbd2795f9bcccfdb962664c0bc5a46661709\nauthor Sjors Provoost <sjors@sprovoost.nl> 1706210459 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011291 +0100\n\nci: clarify Cirrus self-hosted workers setup\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxwACgkQV/+b28ww\nEAk5Rg//YnMoKhp0TNulJ1UxVkSelqP6brToQe1a0HXjD3F5QVwo6o5zVaQKrCal\n/OcRbSA1+dgPIaVP2GUOLPxdT1RVTNIavR3vpy2Ogri5v9Erc4x6y8UYZdzjXnCm\nAel4PGaVQOa9qRjyWqpUVPPRptCd09rtDNe4ww0NNCs0/gO/96/bmmGfohBPfjIu\nB7i3DOQ2og3jLAEGpYlKVs+d3ttYh7IHefE9KygDU879hfdVrZTtXSmT37G2JJX1\nr7KWJYv85Zs7oxi3/rQ/1wZY+NN1kLpY3fJ8ght0GwkLFQv5J9hfWYPUyrBMUf1t\njpSbVunPfPBguhTyh9NOuYavJMBLUtVs645Fzw3gG9NvjREgvtvW57OPMlR1O7Qi\n2VG9mRItnplxE3AXzd07gxpv4xQYVjUD6sJvblo6LuzvxBYZbCbBRg8+C7UP+cKG\ntRzbmi7c4qgyYctiySTtTJevYCb6M7gz66btEILMlspQxqxtn4GxBLWCK98Bl0M7\nnCq9hF3tA+OepICUsSZVK+cPO9Fg1el+MckEvTunHfej3YQUGnHytKkjtaqitvSJ\nWX28eK42sV5AzCwkDqTbtJP+Qd+xYRMiH6NMfmSYAeBQhMNDWQ2WFh1ZI4JgftFn\nlwuyHeO0mpMxl/PVEGH2l6S1R4i4bjSLVecUQJzrVQpQogrC53g=\n=egLh\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f950cbd2795f9bcccfdb962664c0bc5a46661709",
          "sha": "f950cbd2795f9bcccfdb962664c0bc5a46661709",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f950cbd2795f9bcccfdb962664c0bc5a46661709"
        }
      ],
      "message": "ci: clarify Cirrus self-hosted workers setup",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:51Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-01-25T19:20:59Z"
      },
      "sha": "a6c0109f5fb367050c83015da1cdb8588a964809"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDYyNDI3NzY2M2JmZWM4ZWY2YjlkZDcyYjY0MjQ1Mjc2MTVlYzNjYzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "tree": {
        "sha": "3efebb0ebd92cf678af9ebf95370221e59df0bfc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3efebb0ebd92cf678af9ebf95370221e59df0bfc"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3efebb0ebd92cf678af9ebf95370221e59df0bfc\nparent a6c0109f5fb367050c83015da1cdb8588a964809\nauthor Sjors Provoost <sjors@sprovoost.nl> 1707128393 +0100\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1708011292 +0100\n\nTemporarily break certificate generation and validation\n\nPending: https://github.com/stratum-mining/stratum/issues/717\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmXOLxwACgkQV/+b28ww\nEAlo1RAAl0nFkWPkb6Lgqc5zKhXLiNflWlEk7F95a2Clg1aHu6a32OLBw7FzC7ie\nCc/Bj4SgupXlAAYJ+mXgocLvxsaYKV2P3Q0K0embECYn+YHilh3ydZsUxolaBQ/2\nqEJZS9o1sOzMzx5ZMWbrNrY1qRop/nei3JP+iKTalxSCqQymXtqhRMLCsTm6kvRV\nRdmVjHhtyyLwVsIqLoqx8c0hIM5ewKRbCe1kiNz9o/mbrsG8f55m5ik8vRDQZK2e\nF1Zp/x1/JA267bl7uspm4qIO2Oo+aG87ao7wA/6zhQH4h0s0nB8RP1FC8LOC1MLB\nwobA8MyHMYQfbtitQKjN/t7+yJYflJIz7ce4QWMZseLfrve0IIHk7J4eDTAZykvv\n/MuNQgPF0kDATnD+7P5tMdjAXpZOkEDhIHmRDvCYfpTYTyJrJrVUIsjwQ6Um52Fc\nHmikErBxYXCMmX7NbAhNLlX7ky8wT430VjTnp8uJgjVGFLAQpNMB2WRABtU0/h3+\nBL1dokOjfNKpOiW8YUXlDiMBdF/2JR8CQqUjAVApzHfAu7OR5NubhgDTfXBlF/nM\n8mhpsu5IWl8hloQQRKZMd+nNUPS+kb+sDphELJdAs/DLUBoluRZ3U1h+w2sZ2avx\n4nmvX5DPFfpuu/JVnIGfUMDg+X6Osm1MCoGWra0TgKlYaEcBo1E=\n=UmZ3\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a6c0109f5fb367050c83015da1cdb8588a964809",
          "sha": "a6c0109f5fb367050c83015da1cdb8588a964809",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a6c0109f5fb367050c83015da1cdb8588a964809"
        }
      ],
      "message": "Temporarily break certificate generation and validation\n\nPending: https://github.com/stratum-mining/stratum/issues/717",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-15T15:34:52Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-02-05T10:19:53Z"
      },
      "sha": "624277663bfec8ef6b9dd72b6424527615ec3cc6"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11817232843,
      "node_id": "HRFPE_lADOABII585_NKHDzwAAAALAXKnL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11817232843",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-15T15:35:07Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489543326",
      "pull_request_review_id": 1880414088,
      "id": 1489543326,
      "node_id": "PRRC_kwDOABII585YyKCe",
      "diff_hunk": "@@ -0,0 +1,298 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 36,
      "original_position": 36,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "684890f900b2fee3f2c6e7610820d70de5f4f0fb",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The template provider tests are quite brittle because they use a real socket.",
      "created_at": "2024-02-14T14:17:54Z",
      "updated_at": "2024-02-14T14:21:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1489543326",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489543326"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 36,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489710751",
      "pull_request_review_id": 1880677814,
      "id": 1489710751,
      "node_id": "PRRC_kwDOABII585Yyy6f",
      "diff_hunk": "@@ -0,0 +1,298 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 36,
      "original_position": 36,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "684890f900b2fee3f2c6e7610820d70de5f4f0fb",
      "in_reply_to_id": 1489543326,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "For the time being I just added handling for `MSG_MORE` (on e.g. macOS sequential messages are sent separately while on Linux they're combined). I also made the timeouts a bit longer.\r\n\r\nHopefully that does the trick. This can be revisited closer to the time when the Template Provider is ready for its own PR.",
      "created_at": "2024-02-14T15:57:24Z",
      "updated_at": "2024-02-14T15:57:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1489710751",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489710751"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 36,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489927269",
      "pull_request_review_id": 1881030165,
      "id": 1489927269,
      "node_id": "PRRC_kwDOABII585Yznxl",
      "diff_hunk": "@@ -0,0 +1,298 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 36,
      "original_position": 36,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "684890f900b2fee3f2c6e7610820d70de5f4f0fb",
      "in_reply_to_id": 1489543326,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Except the macOS native CI... https://github.com/Sjors/bitcoin/actions/runs/7905485495/job/21578223892?pr=34#step:7:6060",
      "created_at": "2024-02-14T18:54:53Z",
      "updated_at": "2024-02-14T18:54:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1489927269",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489927269"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 36,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489958435",
      "pull_request_review_id": 1881082138,
      "id": 1489958435,
      "node_id": "PRRC_kwDOABII585YzvYj",
      "diff_hunk": "@@ -0,0 +1,298 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 36,
      "original_position": 36,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "684890f900b2fee3f2c6e7610820d70de5f4f0fb",
      "in_reply_to_id": 1489543326,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Working on a fix in https://github.com/Sjors/bitcoin/pull/34",
      "created_at": "2024-02-14T19:25:39Z",
      "updated_at": "2024-02-14T19:25:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1489958435",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489958435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 36,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489998271",
      "pull_request_review_id": 1881182173,
      "id": 1489998271,
      "node_id": "PRRC_kwDOABII585Yz5G_",
      "diff_hunk": "@@ -0,0 +1,314 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:\n+        UninterruptibleSleep(std::chrono::milliseconds{1000});\n+        return true;\n+    }\n+\n+    void SendPeerBytes()\n+    {\n+        int flags = MSG_NOSIGNAL | MSG_DONTWAIT;\n+        ssize_t sent = 0;\n+        const auto& [data, more] =m_peer_transport->GetBytesToSendSv2(/*have_next_message=*/false);\n+        BOOST_REQUIRE(data.size() > 0);\n+        sent = m_peer_socket->Send(data.data(), data.size(), flags);\n+        m_peer_transport->MarkBytesSent(sent);\n+\n+        BOOST_REQUIRE(sent > 0);\n+    }\n+\n+    // Have the peer receive and process bytes:\n+    size_t PeerReceiveBytes()\n+    {\n+        uint8_t bytes_received_buf[0x10000];\n+        const auto num_bytes_received = m_peer_socket->Recv(bytes_received_buf, sizeof(bytes_received_buf), MSG_DONTWAIT);\n+\n+        // Have peer process received bytes:\n+        Span<const uint8_t> received = Span(bytes_received_buf).subspan(0, num_bytes_received);\n+        BOOST_REQUIRE(m_peer_transport->ReceivedBytes(received));\n+\n+        return num_bytes_received;\n+    }\n+\n+    /* Create a new client and perform handshake */\n+    void handshake()\n+    {\n+        m_peer_transport.reset();\n+\n+        auto peer_static_key{GenerateRandomKey()};\n+        m_peer_transport = std::make_unique<Sv2Transport>(std::move(peer_static_key), m_tp->m_authority_pubkey);\n+\n+        // Connect client via socket to Template Provider\n+\n+        std::optional<CService> tp{Lookup(\"127.0.0.1\", 18447, /*fAllowLookup=*/false)};\n+        BOOST_REQUIRE(tp);\n+        m_peer_socket = CreateSock(*tp);\n+        BOOST_REQUIRE(m_peer_socket);\n+        bool connected = ConnectSocketDirectly(*tp, *m_peer_socket, /*nTimeout=*/100, true);\n+        BOOST_REQUIRE(connected);\n+\n+        // Flush transport for handshake part 1\n+        SendPeerBytes();\n+\n+        // Read handshake part 2 from transport\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        BOOST_REQUIRE_EQUAL(PeerReceiveBytes(), Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+    }\n+\n+    void receiveMessage(Sv2NetMsg msg)\n+    {\n+        // Client encrypts message and puts it on the transport:\n+        BOOST_REQUIRE(m_peer_transport->SetMessageToSend(msg));\n+        SendPeerBytes();\n+    }\n+\n+    void ProcessOurResponse(size_t reply_bytes_expected)\n+    {\n+        // Respond to peer\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        size_t bytes_received = PeerReceiveBytes();\n+\n+        // Wait for a possible second message (if MSG_MORE was set)\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+\n+        if (occurred != 0) {\n+            // Have peer process response bytes:\n+            bytes_received += PeerReceiveBytes();\n+        }\n+\n+        BOOST_REQUIRE_EQUAL(bytes_received, reply_bytes_expected);\n+    }\n+\n+    bool IsConnected()\n+    {\n+        return m_tp->ConnectedClients() > 0;\n+    }\n+\n+    bool IsFullyConnected()\n+    {\n+        return m_tp->FullyConnectedClients() > 0;\n+    }\n+\n+    Sv2NetMsg SetupConnectionMsg()\n+    {\n+        std::vector<uint8_t> bytes{\n+            0x02,                                                 // protocol\n+            0x02, 0x00,                                           // min_version\n+            0x02, 0x00,                                           // max_version\n+            0x01, 0x00, 0x00, 0x00,                               // flags\n+            0x07, 0x30, 0x2e, 0x30, 0x2e, 0x30, 0x2e, 0x30,       // endpoint_host\n+            0x61, 0x21,                                           // endpoint_port\n+            0x07, 0x42, 0x69, 0x74, 0x6d, 0x61, 0x69, 0x6e,       // vendor\n+            0x08, 0x53, 0x39, 0x69, 0x20, 0x31, 0x33, 0x2e, 0x35, // hardware_version\n+            0x1c, 0x62, 0x72, 0x61, 0x69, 0x69, 0x6e, 0x73, 0x2d, 0x6f, 0x73, 0x2d, 0x32, 0x30,\n+            0x31, 0x38, 0x2d, 0x30, 0x39, 0x2d, 0x32, 0x32, 0x2d, 0x31, 0x2d, 0x68, 0x61, 0x73,\n+            0x68, // firmware\n+            0x10, 0x73, 0x6f, 0x6d, 0x65, 0x2d, 0x64, 0x65, 0x76, 0x69, 0x63, 0x65, 0x2d, 0x75,\n+            0x75, 0x69, 0x64, // device_id\n+        };\n+\n+        node::Sv2NetHeader setup_conn_header = node::Sv2NetHeader{node::Sv2MsgType::SETUP_CONNECTION, static_cast<uint32_t>(bytes.size())};\n+        return node::Sv2NetMsg{std::move(setup_conn_header), std::move(bytes)};\n+    }\n+};\n+\n+BOOST_AUTO_TEST_CASE(client_tests)\n+{\n+    TPTester tester{*m_node.chainman, *m_node.mempool};\n+    BOOST_REQUIRE(tester.start());\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+    tester.handshake();\n+    BOOST_REQUIRE(tester.IsConnected());\n+    BOOST_REQUIRE(!tester.IsFullyConnected());\n+\n+    // After the handshake the client must send a SetupConnection message to the\n+    // Template Provider.\n+\n+    // An empty SetupConnection message should cause disconnection\n+    node::Sv2NetHeader setup_conn_header{node::Sv2MsgType::SETUP_CONNECTION, 0};\n+    node::Sv2NetMsg sv2_msg{std::move(setup_conn_header), {}};\n+    tester.receiveMessage(sv2_msg);\n+    tester.ProcessOurResponse(0);\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+\n+    // Reconnect\n+    tester.handshake();\n+\n+    node::Sv2NetMsg setup{tester.SetupConnectionMsg()};\n+    // SetupConnection.Success is 6 bytes\n+    tester.receiveMessage(setup);\n+    tester.ProcessOurResponse(SV2_HEADER_ENCRYPTED_SIZE + 6 + Poly1305::TAGLEN);\n+    BOOST_REQUIRE(tester.IsFullyConnected());\n+\n+    // There should be no block templates before any client gave us their coinbase\n+    // output data size:\n+    BOOST_REQUIRE(tester.m_tp->GetBlockTemplates().empty());\n+\n+    std::vector<uint8_t> coinbase_output_max_additional_size_bytes{\n+        0x01, 0x00, 0x00, 0x00\n+    };\n+    node::Sv2NetHeader cb_header{node::Sv2MsgType::COINBASE_OUTPUT_DATA_SIZE, 4};\n+    node::Sv2NetMsg msg{std::move(cb_header), std::move(coinbase_output_max_additional_size_bytes)};\n+    // The reply should be NewTemplate and SetNewPrevHash\n+    tester.receiveMessage(msg);\n+    tester.ProcessOurResponse(2 * SV2_HEADER_ENCRYPTED_SIZE + 91 + 80 + 2 * Poly1305::TAGLEN);\n+\n+    // There should now be one template\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Move mock time by at least DEFAULT_SV2_INTERVAL\n+    // If the mempool doesn't change, no new template is generated.\n+    SetMockTime(GetMockTime() + std::chrono::seconds{DEFAULT_SV2_INTERVAL});\n+    // Briefly wait for the timer in ThreadSv2Handler and block creation\n+    UninterruptibleSleep(std::chrono::milliseconds{200});\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Create a transaction with a large fee\n+    size_t tx_size;\n+    CKey key = GenerateRandomKey();\n+    CScript locking_script = GetScriptForDestination(PKHash(key.GetPubKey()));\n+    // Don't hold on to the transaction\n+    {\n+        auto mtx = CreateValidMempoolTransaction(/*input_transaction=*/m_coinbase_txns[0], /*input_vout=*/0,\n+                                                        /*input_height=*/0, /*input_signing_key=*/coinbaseKey,\n+                                                        /*output_destination=*/locking_script,\n+                                                        /*output_amount=*/CAmount(49 * COIN), /*submit=*/true);\n+        CTransactionRef tx = MakeTransactionRef(mtx);\n+\n+        // Get serialized transaction size\n+        DataStream ss;\n+        ss << TX_WITH_WITNESS(tx);\n+        tx_size = ss.size();\n+    }\n+",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 254,
      "original_position": 226,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "1bacb8998725de866b109c4fdd9f8739fcfb2344",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "TSAN is tripping up somewhere around here. The last thing it logs is ` - Connect 2 transactions:`. It doesn't get to ` - Verify ... txins:`. I wonder if this is related to mock time, which I'm testing in https://github.com/Sjors/bitcoin/pull/34",
      "created_at": "2024-02-14T20:04:56Z",
      "updated_at": "2024-02-14T20:17:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1489998271",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1489998271"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 254,
      "original_line": 254,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490054499",
      "pull_request_review_id": 1881291760,
      "id": 1490054499,
      "node_id": "PRRC_kwDOABII585Y0G1j",
      "diff_hunk": "@@ -0,0 +1,298 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 36,
      "original_position": 36,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "684890f900b2fee3f2c6e7610820d70de5f4f0fb",
      "in_reply_to_id": 1489543326,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I should probably look into using `StaticContentsSock`",
      "created_at": "2024-02-14T20:53:36Z",
      "updated_at": "2024-02-14T20:53:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1490054499",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490054499"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 36,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490849107",
      "pull_request_review_id": 1882502597,
      "id": 1490849107,
      "node_id": "PRRC_kwDOABII585Y3I1T",
      "diff_hunk": "@@ -0,0 +1,314 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:\n+        UninterruptibleSleep(std::chrono::milliseconds{1000});\n+        return true;\n+    }\n+\n+    void SendPeerBytes()\n+    {\n+        int flags = MSG_NOSIGNAL | MSG_DONTWAIT;\n+        ssize_t sent = 0;\n+        const auto& [data, more] =m_peer_transport->GetBytesToSendSv2(/*have_next_message=*/false);\n+        BOOST_REQUIRE(data.size() > 0);\n+        sent = m_peer_socket->Send(data.data(), data.size(), flags);\n+        m_peer_transport->MarkBytesSent(sent);\n+\n+        BOOST_REQUIRE(sent > 0);\n+    }\n+\n+    // Have the peer receive and process bytes:\n+    size_t PeerReceiveBytes()\n+    {\n+        uint8_t bytes_received_buf[0x10000];\n+        const auto num_bytes_received = m_peer_socket->Recv(bytes_received_buf, sizeof(bytes_received_buf), MSG_DONTWAIT);\n+\n+        // Have peer process received bytes:\n+        Span<const uint8_t> received = Span(bytes_received_buf).subspan(0, num_bytes_received);\n+        BOOST_REQUIRE(m_peer_transport->ReceivedBytes(received));\n+\n+        return num_bytes_received;\n+    }\n+\n+    /* Create a new client and perform handshake */\n+    void handshake()\n+    {\n+        m_peer_transport.reset();\n+\n+        auto peer_static_key{GenerateRandomKey()};\n+        m_peer_transport = std::make_unique<Sv2Transport>(std::move(peer_static_key), m_tp->m_authority_pubkey);\n+\n+        // Connect client via socket to Template Provider\n+\n+        std::optional<CService> tp{Lookup(\"127.0.0.1\", 18447, /*fAllowLookup=*/false)};\n+        BOOST_REQUIRE(tp);\n+        m_peer_socket = CreateSock(*tp);\n+        BOOST_REQUIRE(m_peer_socket);\n+        bool connected = ConnectSocketDirectly(*tp, *m_peer_socket, /*nTimeout=*/100, true);\n+        BOOST_REQUIRE(connected);\n+\n+        // Flush transport for handshake part 1\n+        SendPeerBytes();\n+\n+        // Read handshake part 2 from transport\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        BOOST_REQUIRE_EQUAL(PeerReceiveBytes(), Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+    }\n+\n+    void receiveMessage(Sv2NetMsg msg)\n+    {\n+        // Client encrypts message and puts it on the transport:\n+        BOOST_REQUIRE(m_peer_transport->SetMessageToSend(msg));\n+        SendPeerBytes();\n+    }\n+\n+    void ProcessOurResponse(size_t reply_bytes_expected)\n+    {\n+        // Respond to peer\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        size_t bytes_received = PeerReceiveBytes();\n+\n+        // Wait for a possible second message (if MSG_MORE was set)\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+\n+        if (occurred != 0) {\n+            // Have peer process response bytes:\n+            bytes_received += PeerReceiveBytes();\n+        }\n+\n+        BOOST_REQUIRE_EQUAL(bytes_received, reply_bytes_expected);\n+    }\n+\n+    bool IsConnected()\n+    {\n+        return m_tp->ConnectedClients() > 0;\n+    }\n+\n+    bool IsFullyConnected()\n+    {\n+        return m_tp->FullyConnectedClients() > 0;\n+    }\n+\n+    Sv2NetMsg SetupConnectionMsg()\n+    {\n+        std::vector<uint8_t> bytes{\n+            0x02,                                                 // protocol\n+            0x02, 0x00,                                           // min_version\n+            0x02, 0x00,                                           // max_version\n+            0x01, 0x00, 0x00, 0x00,                               // flags\n+            0x07, 0x30, 0x2e, 0x30, 0x2e, 0x30, 0x2e, 0x30,       // endpoint_host\n+            0x61, 0x21,                                           // endpoint_port\n+            0x07, 0x42, 0x69, 0x74, 0x6d, 0x61, 0x69, 0x6e,       // vendor\n+            0x08, 0x53, 0x39, 0x69, 0x20, 0x31, 0x33, 0x2e, 0x35, // hardware_version\n+            0x1c, 0x62, 0x72, 0x61, 0x69, 0x69, 0x6e, 0x73, 0x2d, 0x6f, 0x73, 0x2d, 0x32, 0x30,\n+            0x31, 0x38, 0x2d, 0x30, 0x39, 0x2d, 0x32, 0x32, 0x2d, 0x31, 0x2d, 0x68, 0x61, 0x73,\n+            0x68, // firmware\n+            0x10, 0x73, 0x6f, 0x6d, 0x65, 0x2d, 0x64, 0x65, 0x76, 0x69, 0x63, 0x65, 0x2d, 0x75,\n+            0x75, 0x69, 0x64, // device_id\n+        };\n+\n+        node::Sv2NetHeader setup_conn_header = node::Sv2NetHeader{node::Sv2MsgType::SETUP_CONNECTION, static_cast<uint32_t>(bytes.size())};\n+        return node::Sv2NetMsg{std::move(setup_conn_header), std::move(bytes)};\n+    }\n+};\n+\n+BOOST_AUTO_TEST_CASE(client_tests)\n+{\n+    TPTester tester{*m_node.chainman, *m_node.mempool};\n+    BOOST_REQUIRE(tester.start());\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+    tester.handshake();\n+    BOOST_REQUIRE(tester.IsConnected());\n+    BOOST_REQUIRE(!tester.IsFullyConnected());\n+\n+    // After the handshake the client must send a SetupConnection message to the\n+    // Template Provider.\n+\n+    // An empty SetupConnection message should cause disconnection\n+    node::Sv2NetHeader setup_conn_header{node::Sv2MsgType::SETUP_CONNECTION, 0};\n+    node::Sv2NetMsg sv2_msg{std::move(setup_conn_header), {}};\n+    tester.receiveMessage(sv2_msg);\n+    tester.ProcessOurResponse(0);\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+\n+    // Reconnect\n+    tester.handshake();\n+\n+    node::Sv2NetMsg setup{tester.SetupConnectionMsg()};\n+    // SetupConnection.Success is 6 bytes\n+    tester.receiveMessage(setup);\n+    tester.ProcessOurResponse(SV2_HEADER_ENCRYPTED_SIZE + 6 + Poly1305::TAGLEN);\n+    BOOST_REQUIRE(tester.IsFullyConnected());\n+\n+    // There should be no block templates before any client gave us their coinbase\n+    // output data size:\n+    BOOST_REQUIRE(tester.m_tp->GetBlockTemplates().empty());\n+\n+    std::vector<uint8_t> coinbase_output_max_additional_size_bytes{\n+        0x01, 0x00, 0x00, 0x00\n+    };\n+    node::Sv2NetHeader cb_header{node::Sv2MsgType::COINBASE_OUTPUT_DATA_SIZE, 4};\n+    node::Sv2NetMsg msg{std::move(cb_header), std::move(coinbase_output_max_additional_size_bytes)};\n+    // The reply should be NewTemplate and SetNewPrevHash\n+    tester.receiveMessage(msg);\n+    tester.ProcessOurResponse(2 * SV2_HEADER_ENCRYPTED_SIZE + 91 + 80 + 2 * Poly1305::TAGLEN);\n+\n+    // There should now be one template\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Move mock time by at least DEFAULT_SV2_INTERVAL\n+    // If the mempool doesn't change, no new template is generated.\n+    SetMockTime(GetMockTime() + std::chrono::seconds{DEFAULT_SV2_INTERVAL});\n+    // Briefly wait for the timer in ThreadSv2Handler and block creation\n+    UninterruptibleSleep(std::chrono::milliseconds{200});\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Create a transaction with a large fee\n+    size_t tx_size;\n+    CKey key = GenerateRandomKey();\n+    CScript locking_script = GetScriptForDestination(PKHash(key.GetPubKey()));\n+    // Don't hold on to the transaction\n+    {\n+        auto mtx = CreateValidMempoolTransaction(/*input_transaction=*/m_coinbase_txns[0], /*input_vout=*/0,\n+                                                        /*input_height=*/0, /*input_signing_key=*/coinbaseKey,\n+                                                        /*output_destination=*/locking_script,\n+                                                        /*output_amount=*/CAmount(49 * COIN), /*submit=*/true);\n+        CTransactionRef tx = MakeTransactionRef(mtx);\n+\n+        // Get serialized transaction size\n+        DataStream ss;\n+        ss << TX_WITH_WITNESS(tx);\n+        tx_size = ss.size();\n+    }\n+",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 254,
      "original_position": 226,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "1bacb8998725de866b109c4fdd9f8739fcfb2344",
      "in_reply_to_id": 1489998271,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@maflcko shouldn't TSan on CI output something useful about why it crashed? I currently only says \"error 2\": https://cirrus-ci.com/task/5124733717446656?logs=ci#L3531\r\n\r\nWhen running this locally on Ubuntu with clang 16.0.6 I get a `WARNING: ThreadSanitizer: data race` and significantly more details (still a bit cryptic, but hopefully enough to figure out what's happening).",
      "created_at": "2024-02-15T11:15:40Z",
      "updated_at": "2024-02-15T11:15:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1490849107",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490849107"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 254,
      "original_line": 254,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490855751",
      "pull_request_review_id": 1882517892,
      "id": 1490855751,
      "node_id": "PRRC_kwDOABII585Y3KdH",
      "diff_hunk": "@@ -0,0 +1,298 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 36,
      "original_position": 36,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "684890f900b2fee3f2c6e7610820d70de5f4f0fb",
      "in_reply_to_id": 1489543326,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@vasild any thoughts on how to make mock `Sock`s that can be used to play messages in two directions?",
      "created_at": "2024-02-15T11:20:56Z",
      "updated_at": "2024-02-15T11:20:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1490855751",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490855751"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 36,
      "original_line": 36,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490880303",
      "pull_request_review_id": 1882554577,
      "id": 1490880303,
      "node_id": "PRRC_kwDOABII585Y3Qcv",
      "diff_hunk": "@@ -0,0 +1,314 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:\n+        UninterruptibleSleep(std::chrono::milliseconds{1000});\n+        return true;\n+    }\n+\n+    void SendPeerBytes()\n+    {\n+        int flags = MSG_NOSIGNAL | MSG_DONTWAIT;\n+        ssize_t sent = 0;\n+        const auto& [data, more] =m_peer_transport->GetBytesToSendSv2(/*have_next_message=*/false);\n+        BOOST_REQUIRE(data.size() > 0);\n+        sent = m_peer_socket->Send(data.data(), data.size(), flags);\n+        m_peer_transport->MarkBytesSent(sent);\n+\n+        BOOST_REQUIRE(sent > 0);\n+    }\n+\n+    // Have the peer receive and process bytes:\n+    size_t PeerReceiveBytes()\n+    {\n+        uint8_t bytes_received_buf[0x10000];\n+        const auto num_bytes_received = m_peer_socket->Recv(bytes_received_buf, sizeof(bytes_received_buf), MSG_DONTWAIT);\n+\n+        // Have peer process received bytes:\n+        Span<const uint8_t> received = Span(bytes_received_buf).subspan(0, num_bytes_received);\n+        BOOST_REQUIRE(m_peer_transport->ReceivedBytes(received));\n+\n+        return num_bytes_received;\n+    }\n+\n+    /* Create a new client and perform handshake */\n+    void handshake()\n+    {\n+        m_peer_transport.reset();\n+\n+        auto peer_static_key{GenerateRandomKey()};\n+        m_peer_transport = std::make_unique<Sv2Transport>(std::move(peer_static_key), m_tp->m_authority_pubkey);\n+\n+        // Connect client via socket to Template Provider\n+\n+        std::optional<CService> tp{Lookup(\"127.0.0.1\", 18447, /*fAllowLookup=*/false)};\n+        BOOST_REQUIRE(tp);\n+        m_peer_socket = CreateSock(*tp);\n+        BOOST_REQUIRE(m_peer_socket);\n+        bool connected = ConnectSocketDirectly(*tp, *m_peer_socket, /*nTimeout=*/100, true);\n+        BOOST_REQUIRE(connected);\n+\n+        // Flush transport for handshake part 1\n+        SendPeerBytes();\n+\n+        // Read handshake part 2 from transport\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        BOOST_REQUIRE_EQUAL(PeerReceiveBytes(), Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+    }\n+\n+    void receiveMessage(Sv2NetMsg msg)\n+    {\n+        // Client encrypts message and puts it on the transport:\n+        BOOST_REQUIRE(m_peer_transport->SetMessageToSend(msg));\n+        SendPeerBytes();\n+    }\n+\n+    void ProcessOurResponse(size_t reply_bytes_expected)\n+    {\n+        // Respond to peer\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        size_t bytes_received = PeerReceiveBytes();\n+\n+        // Wait for a possible second message (if MSG_MORE was set)\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+\n+        if (occurred != 0) {\n+            // Have peer process response bytes:\n+            bytes_received += PeerReceiveBytes();\n+        }\n+\n+        BOOST_REQUIRE_EQUAL(bytes_received, reply_bytes_expected);\n+    }\n+\n+    bool IsConnected()\n+    {\n+        return m_tp->ConnectedClients() > 0;\n+    }\n+\n+    bool IsFullyConnected()\n+    {\n+        return m_tp->FullyConnectedClients() > 0;\n+    }\n+\n+    Sv2NetMsg SetupConnectionMsg()\n+    {\n+        std::vector<uint8_t> bytes{\n+            0x02,                                                 // protocol\n+            0x02, 0x00,                                           // min_version\n+            0x02, 0x00,                                           // max_version\n+            0x01, 0x00, 0x00, 0x00,                               // flags\n+            0x07, 0x30, 0x2e, 0x30, 0x2e, 0x30, 0x2e, 0x30,       // endpoint_host\n+            0x61, 0x21,                                           // endpoint_port\n+            0x07, 0x42, 0x69, 0x74, 0x6d, 0x61, 0x69, 0x6e,       // vendor\n+            0x08, 0x53, 0x39, 0x69, 0x20, 0x31, 0x33, 0x2e, 0x35, // hardware_version\n+            0x1c, 0x62, 0x72, 0x61, 0x69, 0x69, 0x6e, 0x73, 0x2d, 0x6f, 0x73, 0x2d, 0x32, 0x30,\n+            0x31, 0x38, 0x2d, 0x30, 0x39, 0x2d, 0x32, 0x32, 0x2d, 0x31, 0x2d, 0x68, 0x61, 0x73,\n+            0x68, // firmware\n+            0x10, 0x73, 0x6f, 0x6d, 0x65, 0x2d, 0x64, 0x65, 0x76, 0x69, 0x63, 0x65, 0x2d, 0x75,\n+            0x75, 0x69, 0x64, // device_id\n+        };\n+\n+        node::Sv2NetHeader setup_conn_header = node::Sv2NetHeader{node::Sv2MsgType::SETUP_CONNECTION, static_cast<uint32_t>(bytes.size())};\n+        return node::Sv2NetMsg{std::move(setup_conn_header), std::move(bytes)};\n+    }\n+};\n+\n+BOOST_AUTO_TEST_CASE(client_tests)\n+{\n+    TPTester tester{*m_node.chainman, *m_node.mempool};\n+    BOOST_REQUIRE(tester.start());\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+    tester.handshake();\n+    BOOST_REQUIRE(tester.IsConnected());\n+    BOOST_REQUIRE(!tester.IsFullyConnected());\n+\n+    // After the handshake the client must send a SetupConnection message to the\n+    // Template Provider.\n+\n+    // An empty SetupConnection message should cause disconnection\n+    node::Sv2NetHeader setup_conn_header{node::Sv2MsgType::SETUP_CONNECTION, 0};\n+    node::Sv2NetMsg sv2_msg{std::move(setup_conn_header), {}};\n+    tester.receiveMessage(sv2_msg);\n+    tester.ProcessOurResponse(0);\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+\n+    // Reconnect\n+    tester.handshake();\n+\n+    node::Sv2NetMsg setup{tester.SetupConnectionMsg()};\n+    // SetupConnection.Success is 6 bytes\n+    tester.receiveMessage(setup);\n+    tester.ProcessOurResponse(SV2_HEADER_ENCRYPTED_SIZE + 6 + Poly1305::TAGLEN);\n+    BOOST_REQUIRE(tester.IsFullyConnected());\n+\n+    // There should be no block templates before any client gave us their coinbase\n+    // output data size:\n+    BOOST_REQUIRE(tester.m_tp->GetBlockTemplates().empty());\n+\n+    std::vector<uint8_t> coinbase_output_max_additional_size_bytes{\n+        0x01, 0x00, 0x00, 0x00\n+    };\n+    node::Sv2NetHeader cb_header{node::Sv2MsgType::COINBASE_OUTPUT_DATA_SIZE, 4};\n+    node::Sv2NetMsg msg{std::move(cb_header), std::move(coinbase_output_max_additional_size_bytes)};\n+    // The reply should be NewTemplate and SetNewPrevHash\n+    tester.receiveMessage(msg);\n+    tester.ProcessOurResponse(2 * SV2_HEADER_ENCRYPTED_SIZE + 91 + 80 + 2 * Poly1305::TAGLEN);\n+\n+    // There should now be one template\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Move mock time by at least DEFAULT_SV2_INTERVAL\n+    // If the mempool doesn't change, no new template is generated.\n+    SetMockTime(GetMockTime() + std::chrono::seconds{DEFAULT_SV2_INTERVAL});\n+    // Briefly wait for the timer in ThreadSv2Handler and block creation\n+    UninterruptibleSleep(std::chrono::milliseconds{200});\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Create a transaction with a large fee\n+    size_t tx_size;\n+    CKey key = GenerateRandomKey();\n+    CScript locking_script = GetScriptForDestination(PKHash(key.GetPubKey()));\n+    // Don't hold on to the transaction\n+    {\n+        auto mtx = CreateValidMempoolTransaction(/*input_transaction=*/m_coinbase_txns[0], /*input_vout=*/0,\n+                                                        /*input_height=*/0, /*input_signing_key=*/coinbaseKey,\n+                                                        /*output_destination=*/locking_script,\n+                                                        /*output_amount=*/CAmount(49 * COIN), /*submit=*/true);\n+        CTransactionRef tx = MakeTransactionRef(mtx);\n+\n+        // Get serialized transaction size\n+        DataStream ss;\n+        ss << TX_WITH_WITNESS(tx);\n+        tx_size = ss.size();\n+    }\n+",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 254,
      "original_position": 226,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "1bacb8998725de866b109c4fdd9f8739fcfb2344",
      "in_reply_to_id": 1489998271,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah, I guess the unit tests don't capture the tsan output?",
      "created_at": "2024-02-15T11:39:27Z",
      "updated_at": "2024-02-15T11:39:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1490880303",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490880303"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 254,
      "original_line": 254,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490884343",
      "pull_request_review_id": 1882563090,
      "id": 1490884343,
      "node_id": "PRRC_kwDOABII585Y3Rb3",
      "diff_hunk": "@@ -0,0 +1,314 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:\n+        UninterruptibleSleep(std::chrono::milliseconds{1000});\n+        return true;\n+    }\n+\n+    void SendPeerBytes()\n+    {\n+        int flags = MSG_NOSIGNAL | MSG_DONTWAIT;\n+        ssize_t sent = 0;\n+        const auto& [data, more] =m_peer_transport->GetBytesToSendSv2(/*have_next_message=*/false);\n+        BOOST_REQUIRE(data.size() > 0);\n+        sent = m_peer_socket->Send(data.data(), data.size(), flags);\n+        m_peer_transport->MarkBytesSent(sent);\n+\n+        BOOST_REQUIRE(sent > 0);\n+    }\n+\n+    // Have the peer receive and process bytes:\n+    size_t PeerReceiveBytes()\n+    {\n+        uint8_t bytes_received_buf[0x10000];\n+        const auto num_bytes_received = m_peer_socket->Recv(bytes_received_buf, sizeof(bytes_received_buf), MSG_DONTWAIT);\n+\n+        // Have peer process received bytes:\n+        Span<const uint8_t> received = Span(bytes_received_buf).subspan(0, num_bytes_received);\n+        BOOST_REQUIRE(m_peer_transport->ReceivedBytes(received));\n+\n+        return num_bytes_received;\n+    }\n+\n+    /* Create a new client and perform handshake */\n+    void handshake()\n+    {\n+        m_peer_transport.reset();\n+\n+        auto peer_static_key{GenerateRandomKey()};\n+        m_peer_transport = std::make_unique<Sv2Transport>(std::move(peer_static_key), m_tp->m_authority_pubkey);\n+\n+        // Connect client via socket to Template Provider\n+\n+        std::optional<CService> tp{Lookup(\"127.0.0.1\", 18447, /*fAllowLookup=*/false)};\n+        BOOST_REQUIRE(tp);\n+        m_peer_socket = CreateSock(*tp);\n+        BOOST_REQUIRE(m_peer_socket);\n+        bool connected = ConnectSocketDirectly(*tp, *m_peer_socket, /*nTimeout=*/100, true);\n+        BOOST_REQUIRE(connected);\n+\n+        // Flush transport for handshake part 1\n+        SendPeerBytes();\n+\n+        // Read handshake part 2 from transport\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        BOOST_REQUIRE_EQUAL(PeerReceiveBytes(), Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+    }\n+\n+    void receiveMessage(Sv2NetMsg msg)\n+    {\n+        // Client encrypts message and puts it on the transport:\n+        BOOST_REQUIRE(m_peer_transport->SetMessageToSend(msg));\n+        SendPeerBytes();\n+    }\n+\n+    void ProcessOurResponse(size_t reply_bytes_expected)\n+    {\n+        // Respond to peer\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        size_t bytes_received = PeerReceiveBytes();\n+\n+        // Wait for a possible second message (if MSG_MORE was set)\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+\n+        if (occurred != 0) {\n+            // Have peer process response bytes:\n+            bytes_received += PeerReceiveBytes();\n+        }\n+\n+        BOOST_REQUIRE_EQUAL(bytes_received, reply_bytes_expected);\n+    }\n+\n+    bool IsConnected()\n+    {\n+        return m_tp->ConnectedClients() > 0;\n+    }\n+\n+    bool IsFullyConnected()\n+    {\n+        return m_tp->FullyConnectedClients() > 0;\n+    }\n+\n+    Sv2NetMsg SetupConnectionMsg()\n+    {\n+        std::vector<uint8_t> bytes{\n+            0x02,                                                 // protocol\n+            0x02, 0x00,                                           // min_version\n+            0x02, 0x00,                                           // max_version\n+            0x01, 0x00, 0x00, 0x00,                               // flags\n+            0x07, 0x30, 0x2e, 0x30, 0x2e, 0x30, 0x2e, 0x30,       // endpoint_host\n+            0x61, 0x21,                                           // endpoint_port\n+            0x07, 0x42, 0x69, 0x74, 0x6d, 0x61, 0x69, 0x6e,       // vendor\n+            0x08, 0x53, 0x39, 0x69, 0x20, 0x31, 0x33, 0x2e, 0x35, // hardware_version\n+            0x1c, 0x62, 0x72, 0x61, 0x69, 0x69, 0x6e, 0x73, 0x2d, 0x6f, 0x73, 0x2d, 0x32, 0x30,\n+            0x31, 0x38, 0x2d, 0x30, 0x39, 0x2d, 0x32, 0x32, 0x2d, 0x31, 0x2d, 0x68, 0x61, 0x73,\n+            0x68, // firmware\n+            0x10, 0x73, 0x6f, 0x6d, 0x65, 0x2d, 0x64, 0x65, 0x76, 0x69, 0x63, 0x65, 0x2d, 0x75,\n+            0x75, 0x69, 0x64, // device_id\n+        };\n+\n+        node::Sv2NetHeader setup_conn_header = node::Sv2NetHeader{node::Sv2MsgType::SETUP_CONNECTION, static_cast<uint32_t>(bytes.size())};\n+        return node::Sv2NetMsg{std::move(setup_conn_header), std::move(bytes)};\n+    }\n+};\n+\n+BOOST_AUTO_TEST_CASE(client_tests)\n+{\n+    TPTester tester{*m_node.chainman, *m_node.mempool};\n+    BOOST_REQUIRE(tester.start());\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+    tester.handshake();\n+    BOOST_REQUIRE(tester.IsConnected());\n+    BOOST_REQUIRE(!tester.IsFullyConnected());\n+\n+    // After the handshake the client must send a SetupConnection message to the\n+    // Template Provider.\n+\n+    // An empty SetupConnection message should cause disconnection\n+    node::Sv2NetHeader setup_conn_header{node::Sv2MsgType::SETUP_CONNECTION, 0};\n+    node::Sv2NetMsg sv2_msg{std::move(setup_conn_header), {}};\n+    tester.receiveMessage(sv2_msg);\n+    tester.ProcessOurResponse(0);\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+\n+    // Reconnect\n+    tester.handshake();\n+\n+    node::Sv2NetMsg setup{tester.SetupConnectionMsg()};\n+    // SetupConnection.Success is 6 bytes\n+    tester.receiveMessage(setup);\n+    tester.ProcessOurResponse(SV2_HEADER_ENCRYPTED_SIZE + 6 + Poly1305::TAGLEN);\n+    BOOST_REQUIRE(tester.IsFullyConnected());\n+\n+    // There should be no block templates before any client gave us their coinbase\n+    // output data size:\n+    BOOST_REQUIRE(tester.m_tp->GetBlockTemplates().empty());\n+\n+    std::vector<uint8_t> coinbase_output_max_additional_size_bytes{\n+        0x01, 0x00, 0x00, 0x00\n+    };\n+    node::Sv2NetHeader cb_header{node::Sv2MsgType::COINBASE_OUTPUT_DATA_SIZE, 4};\n+    node::Sv2NetMsg msg{std::move(cb_header), std::move(coinbase_output_max_additional_size_bytes)};\n+    // The reply should be NewTemplate and SetNewPrevHash\n+    tester.receiveMessage(msg);\n+    tester.ProcessOurResponse(2 * SV2_HEADER_ENCRYPTED_SIZE + 91 + 80 + 2 * Poly1305::TAGLEN);\n+\n+    // There should now be one template\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Move mock time by at least DEFAULT_SV2_INTERVAL\n+    // If the mempool doesn't change, no new template is generated.\n+    SetMockTime(GetMockTime() + std::chrono::seconds{DEFAULT_SV2_INTERVAL});\n+    // Briefly wait for the timer in ThreadSv2Handler and block creation\n+    UninterruptibleSleep(std::chrono::milliseconds{200});\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Create a transaction with a large fee\n+    size_t tx_size;\n+    CKey key = GenerateRandomKey();\n+    CScript locking_script = GetScriptForDestination(PKHash(key.GetPubKey()));\n+    // Don't hold on to the transaction\n+    {\n+        auto mtx = CreateValidMempoolTransaction(/*input_transaction=*/m_coinbase_txns[0], /*input_vout=*/0,\n+                                                        /*input_height=*/0, /*input_signing_key=*/coinbaseKey,\n+                                                        /*output_destination=*/locking_script,\n+                                                        /*output_amount=*/CAmount(49 * COIN), /*submit=*/true);\n+        CTransactionRef tx = MakeTransactionRef(mtx);\n+\n+        // Get serialized transaction size\n+        DataStream ss;\n+        ss << TX_WITH_WITNESS(tx);\n+        tx_size = ss.size();\n+    }\n+",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 254,
      "original_position": 226,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "1bacb8998725de866b109c4fdd9f8739fcfb2344",
      "in_reply_to_id": 1489998271,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "But they should. At least back when I tested https://github.com/bitcoin/bitcoin/pull/27667",
      "created_at": "2024-02-15T11:41:35Z",
      "updated_at": "2024-02-15T11:41:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1490884343",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490884343"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 254,
      "original_line": 254,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490885359",
      "pull_request_review_id": 1882564775,
      "id": 1490885359,
      "node_id": "PRRC_kwDOABII585Y3Rrv",
      "diff_hunk": "@@ -0,0 +1,314 @@\n+#include <addresstype.h>\n+#include <boost/test/unit_test.hpp>\n+#include <common/sv2_messages.h>\n+#include <node/transaction.h>\n+#include <node/sv2_template_provider.h>\n+#include <test/util/net.h>\n+#include <test/util/setup_common.h>\n+#include <test/util/transaction_utils.h>\n+#include <util/sock.h>\n+#include <util/strencodings.h>\n+\n+BOOST_FIXTURE_TEST_SUITE(sv2_template_provider_tests, TestChain100Setup)\n+\n+/**\n+  * A class for testing the Template Provider. Each TPTester encapsulates a\n+  * Sv2TemplateProvider (the one being tested) as well as a Sv2Cipher\n+  * to act as the other side.\n+  */\n+class TPTester {\n+private:\n+    std::unique_ptr<Sv2Transport> m_peer_transport; //!< Transport for peer\n+    std::unique_ptr<Sock> m_peer_socket;\n+\n+public:\n+    std::unique_ptr<Sv2TemplateProvider> m_tp; //!< Sv2TemplateProvider being tested\n+\n+    TPTester(ChainstateManager& chainman, CTxMemPool& mempool)\n+    {\n+        m_tp = std::make_unique<Sv2TemplateProvider>(chainman, mempool);\n+    }\n+\n+    bool start()\n+    {\n+        bool started = m_tp->Start(Sv2TemplateProviderOptions { .port = 18447 });\n+        if (! started) return false;\n+        // Avoid \"Connection refused\" on CI:\n+        UninterruptibleSleep(std::chrono::milliseconds{1000});\n+        return true;\n+    }\n+\n+    void SendPeerBytes()\n+    {\n+        int flags = MSG_NOSIGNAL | MSG_DONTWAIT;\n+        ssize_t sent = 0;\n+        const auto& [data, more] =m_peer_transport->GetBytesToSendSv2(/*have_next_message=*/false);\n+        BOOST_REQUIRE(data.size() > 0);\n+        sent = m_peer_socket->Send(data.data(), data.size(), flags);\n+        m_peer_transport->MarkBytesSent(sent);\n+\n+        BOOST_REQUIRE(sent > 0);\n+    }\n+\n+    // Have the peer receive and process bytes:\n+    size_t PeerReceiveBytes()\n+    {\n+        uint8_t bytes_received_buf[0x10000];\n+        const auto num_bytes_received = m_peer_socket->Recv(bytes_received_buf, sizeof(bytes_received_buf), MSG_DONTWAIT);\n+\n+        // Have peer process received bytes:\n+        Span<const uint8_t> received = Span(bytes_received_buf).subspan(0, num_bytes_received);\n+        BOOST_REQUIRE(m_peer_transport->ReceivedBytes(received));\n+\n+        return num_bytes_received;\n+    }\n+\n+    /* Create a new client and perform handshake */\n+    void handshake()\n+    {\n+        m_peer_transport.reset();\n+\n+        auto peer_static_key{GenerateRandomKey()};\n+        m_peer_transport = std::make_unique<Sv2Transport>(std::move(peer_static_key), m_tp->m_authority_pubkey);\n+\n+        // Connect client via socket to Template Provider\n+\n+        std::optional<CService> tp{Lookup(\"127.0.0.1\", 18447, /*fAllowLookup=*/false)};\n+        BOOST_REQUIRE(tp);\n+        m_peer_socket = CreateSock(*tp);\n+        BOOST_REQUIRE(m_peer_socket);\n+        bool connected = ConnectSocketDirectly(*tp, *m_peer_socket, /*nTimeout=*/100, true);\n+        BOOST_REQUIRE(connected);\n+\n+        // Flush transport for handshake part 1\n+        SendPeerBytes();\n+\n+        // Read handshake part 2 from transport\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        BOOST_REQUIRE_EQUAL(PeerReceiveBytes(), Sv2HandshakeState::HANDSHAKE_STEP2_SIZE);\n+    }\n+\n+    void receiveMessage(Sv2NetMsg msg)\n+    {\n+        // Client encrypts message and puts it on the transport:\n+        BOOST_REQUIRE(m_peer_transport->SetMessageToSend(msg));\n+        SendPeerBytes();\n+    }\n+\n+    void ProcessOurResponse(size_t reply_bytes_expected)\n+    {\n+        // Respond to peer\n+        constexpr auto timeout = std::chrono::milliseconds(1000);\n+        Sock::Event occurred;\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+        BOOST_REQUIRE(occurred != 0);\n+\n+        size_t bytes_received = PeerReceiveBytes();\n+\n+        // Wait for a possible second message (if MSG_MORE was set)\n+        BOOST_REQUIRE(m_peer_socket->Wait(timeout, Sock::RECV, &occurred));\n+\n+        if (occurred != 0) {\n+            // Have peer process response bytes:\n+            bytes_received += PeerReceiveBytes();\n+        }\n+\n+        BOOST_REQUIRE_EQUAL(bytes_received, reply_bytes_expected);\n+    }\n+\n+    bool IsConnected()\n+    {\n+        return m_tp->ConnectedClients() > 0;\n+    }\n+\n+    bool IsFullyConnected()\n+    {\n+        return m_tp->FullyConnectedClients() > 0;\n+    }\n+\n+    Sv2NetMsg SetupConnectionMsg()\n+    {\n+        std::vector<uint8_t> bytes{\n+            0x02,                                                 // protocol\n+            0x02, 0x00,                                           // min_version\n+            0x02, 0x00,                                           // max_version\n+            0x01, 0x00, 0x00, 0x00,                               // flags\n+            0x07, 0x30, 0x2e, 0x30, 0x2e, 0x30, 0x2e, 0x30,       // endpoint_host\n+            0x61, 0x21,                                           // endpoint_port\n+            0x07, 0x42, 0x69, 0x74, 0x6d, 0x61, 0x69, 0x6e,       // vendor\n+            0x08, 0x53, 0x39, 0x69, 0x20, 0x31, 0x33, 0x2e, 0x35, // hardware_version\n+            0x1c, 0x62, 0x72, 0x61, 0x69, 0x69, 0x6e, 0x73, 0x2d, 0x6f, 0x73, 0x2d, 0x32, 0x30,\n+            0x31, 0x38, 0x2d, 0x30, 0x39, 0x2d, 0x32, 0x32, 0x2d, 0x31, 0x2d, 0x68, 0x61, 0x73,\n+            0x68, // firmware\n+            0x10, 0x73, 0x6f, 0x6d, 0x65, 0x2d, 0x64, 0x65, 0x76, 0x69, 0x63, 0x65, 0x2d, 0x75,\n+            0x75, 0x69, 0x64, // device_id\n+        };\n+\n+        node::Sv2NetHeader setup_conn_header = node::Sv2NetHeader{node::Sv2MsgType::SETUP_CONNECTION, static_cast<uint32_t>(bytes.size())};\n+        return node::Sv2NetMsg{std::move(setup_conn_header), std::move(bytes)};\n+    }\n+};\n+\n+BOOST_AUTO_TEST_CASE(client_tests)\n+{\n+    TPTester tester{*m_node.chainman, *m_node.mempool};\n+    BOOST_REQUIRE(tester.start());\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+    tester.handshake();\n+    BOOST_REQUIRE(tester.IsConnected());\n+    BOOST_REQUIRE(!tester.IsFullyConnected());\n+\n+    // After the handshake the client must send a SetupConnection message to the\n+    // Template Provider.\n+\n+    // An empty SetupConnection message should cause disconnection\n+    node::Sv2NetHeader setup_conn_header{node::Sv2MsgType::SETUP_CONNECTION, 0};\n+    node::Sv2NetMsg sv2_msg{std::move(setup_conn_header), {}};\n+    tester.receiveMessage(sv2_msg);\n+    tester.ProcessOurResponse(0);\n+\n+    BOOST_REQUIRE(!tester.IsConnected());\n+\n+    // Reconnect\n+    tester.handshake();\n+\n+    node::Sv2NetMsg setup{tester.SetupConnectionMsg()};\n+    // SetupConnection.Success is 6 bytes\n+    tester.receiveMessage(setup);\n+    tester.ProcessOurResponse(SV2_HEADER_ENCRYPTED_SIZE + 6 + Poly1305::TAGLEN);\n+    BOOST_REQUIRE(tester.IsFullyConnected());\n+\n+    // There should be no block templates before any client gave us their coinbase\n+    // output data size:\n+    BOOST_REQUIRE(tester.m_tp->GetBlockTemplates().empty());\n+\n+    std::vector<uint8_t> coinbase_output_max_additional_size_bytes{\n+        0x01, 0x00, 0x00, 0x00\n+    };\n+    node::Sv2NetHeader cb_header{node::Sv2MsgType::COINBASE_OUTPUT_DATA_SIZE, 4};\n+    node::Sv2NetMsg msg{std::move(cb_header), std::move(coinbase_output_max_additional_size_bytes)};\n+    // The reply should be NewTemplate and SetNewPrevHash\n+    tester.receiveMessage(msg);\n+    tester.ProcessOurResponse(2 * SV2_HEADER_ENCRYPTED_SIZE + 91 + 80 + 2 * Poly1305::TAGLEN);\n+\n+    // There should now be one template\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Move mock time by at least DEFAULT_SV2_INTERVAL\n+    // If the mempool doesn't change, no new template is generated.\n+    SetMockTime(GetMockTime() + std::chrono::seconds{DEFAULT_SV2_INTERVAL});\n+    // Briefly wait for the timer in ThreadSv2Handler and block creation\n+    UninterruptibleSleep(std::chrono::milliseconds{200});\n+    BOOST_REQUIRE_EQUAL(tester.m_tp->GetBlockTemplates().size(), 1);\n+\n+    // Create a transaction with a large fee\n+    size_t tx_size;\n+    CKey key = GenerateRandomKey();\n+    CScript locking_script = GetScriptForDestination(PKHash(key.GetPubKey()));\n+    // Don't hold on to the transaction\n+    {\n+        auto mtx = CreateValidMempoolTransaction(/*input_transaction=*/m_coinbase_txns[0], /*input_vout=*/0,\n+                                                        /*input_height=*/0, /*input_signing_key=*/coinbaseKey,\n+                                                        /*output_destination=*/locking_script,\n+                                                        /*output_amount=*/CAmount(49 * COIN), /*submit=*/true);\n+        CTransactionRef tx = MakeTransactionRef(mtx);\n+\n+        // Get serialized transaction size\n+        DataStream ss;\n+        ss << TX_WITH_WITNESS(tx);\n+        tx_size = ss.size();\n+    }\n+",
      "path": "src/test/sv2_template_provider_tests.cpp",
      "position": 254,
      "original_position": 226,
      "commit_id": "624277663bfec8ef6b9dd72b6424527615ec3cc6",
      "original_commit_id": "1bacb8998725de866b109c4fdd9f8739fcfb2344",
      "in_reply_to_id": 1489998271,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe good to re-check this when/after the cmake migration is done?",
      "created_at": "2024-02-15T11:42:32Z",
      "updated_at": "2024-02-15T11:42:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29432#discussion_r1490885359",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1490885359"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 254,
      "original_line": 254,
      "side": "RIGHT"
    }
  ]
}