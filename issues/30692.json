{
  "type": "issue",
  "issue": {
    "id": 2479037160,
    "node_id": "I_kwDOABII586Twxro",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30692",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30692/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30692/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30692/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/30692",
    "number": 30692,
    "state": "open",
    "state_reason": null,
    "title": "Fatal LevelDB error: Corruption: block checksum mismatch on Linux ext4 SATA SSDs",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nI've been struggling with the errors mentioned here for a little while now:\r\nhttps://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2301642234\r\n\r\nI'm running this on a desktop machine, not in the cloud, and on external SATA ext4 disks because my main system drive is formatted with Btrfs, which doesn't work very well with key-value databases, I've found.\n\n### Expected behaviour\n\nI get this error during IBD and also during reindexing.\n\n### Steps to reproduce\n\nThis the command I'm running:\r\n\r\n`bitcoind -server -txindex=1 -datadir=/mnt/ThreeEight/bitcoind-mainnet -rpccookiefile=/mnt/ThreeEight/bitcoind-mainnet/.cookie`\n\n### Relevant log output\n\n```\r\n2024-08-21T19:18:30Z UpdateTip: new best=0000000000000000000187d6a944e562d55881b738db06f0580d138c6af52754 height=856674 version=0x2192a000 log2_work=95.095637 tx=1058965890 date='2024-08-14T01:14:02Z' progress=0.995862 cache=253.5MiB(2160229txo)\r\n2024-08-21T19:18:30Z UpdateTip: new best=0000000000000000000197cc7a6d13c63cd086ca46372cc94577ff62fa56d568 height=856675 version=0x3e000000 log2_work=95.095650 tx=1058971585 date='2024-08-14T01:18:33Z' progress=0.995863 cache=253.8MiB(2162814txo)\r\n2024-08-21T19:18:30Z LevelDB read failure: Corruption: block checksum mismatch: /mnt/ThreeEight/bitcoind-mainnet/chainstate/873236.ldb\r\n2024-08-21T19:18:30Z Fatal LevelDB error: Corruption: block checksum mismatch: /mnt/ThreeEight/bitcoind-mainnet/chainstate/873236.ldb\r\n2024-08-21T19:18:30Z You can use -debug=leveldb to get more complete diagnostic messages\r\n2024-08-21T19:18:30Z Error: Error reading from database, shutting down.\r\nError: Error reading from database, shutting down.\r\n2024-08-21T19:18:30Z Error reading from database: Fatal LevelDB error: Corruption: block checksum mismatch: /mnt/ThreeEight/bitcoind-mainnet/chainstate/873236.ldb\r\nfish: Job 1, 'bitcoind -server -txindex=1 -daâ€¦' terminated by signal SIGABRT (Abort)\r\n```\n\n### How did you obtain Bitcoin Core\n\nPackage manager\n\n### What version of Bitcoin Core are you using?\n\nv27.1.0\n\n### Operating system and version\n\nArch Linux\n\n### Machine specifications\n\nAMD 5950 CPU\r\n128GB DDR4\r\n4TB NVMe for OS\r\n2TB & 3.8 TB 2.5\" SATA SSDs",
    "user": {
      "login": "cryptoquick",
      "id": 285690,
      "node_id": "MDQ6VXNlcjI4NTY5MA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/285690?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cryptoquick",
      "html_url": "https://github.com/cryptoquick",
      "followers_url": "https://api.github.com/users/cryptoquick/followers",
      "following_url": "https://api.github.com/users/cryptoquick/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/cryptoquick/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/cryptoquick/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/cryptoquick/subscriptions",
      "organizations_url": "https://api.github.com/users/cryptoquick/orgs",
      "repos_url": "https://api.github.com/users/cryptoquick/repos",
      "events_url": "https://api.github.com/users/cryptoquick/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/cryptoquick/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 1,
    "created_at": "2024-08-21T20:27:56Z",
    "updated_at": "2024-08-21T21:16:04Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 2303027263,
      "node_id": "IC_kwDOABII586JRWg_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2303027263",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-21T21:16:02Z",
      "updated_at": "2024-08-21T21:16:02Z",
      "author_association": "MEMBER",
      "body": "This looks like a LevelDB corruption inside the txindex index. Does `-reindex` wipe those? If not, that would explain why a reindex doesn't fix the situation.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30692#issuecomment-2303027263",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30692"
    }
  ]
}