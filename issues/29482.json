{
  "type": "issue",
  "issue": {
    "id": 2154607848,
    "node_id": "I_kwDOABII586AbLTo",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/29482",
    "number": 29482,
    "state": "open",
    "state_reason": null,
    "title": "Inconsistent behavior when overriding bitcoin.conf options from settings.json",
    "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nWhen `bitcoind` is started with the following configuration files:\r\n\r\n`settings.json`:\r\n```\r\n{\r\n    \"listen\": false\r\n}\r\n```\r\n\r\n`bitcoin.conf`:\r\n```\r\nlisten=1\r\n```\r\n\r\nThen it does not listen. This is expected. Options from `settings.json` override ones from `bitcoin.conf`. Both options co-exist in `ArgsManager::m_settings::rw_settings` (listen=0) and `ArgsManager::m_settings::ro_config` (listen=1). Then `ArgsManager::GetBoolArg()` selects the value from `rw_settings`.\r\n\r\n### Expected behaviour\r\n\r\nWhat should be the behavior with the following?\r\n\r\n`settings.json`:\r\n```\r\n{\r\n    \"listen\": false\r\n}\r\n```\r\n\r\n`bitcoin.conf`:\r\n```\r\nlistenonion=1\r\n```\r\n\r\nI think that for consistency with the above, it should start and not listen. That is, `listenonion=1` from `bitcoin.conf` should be overriden / set to 0. But instead `bitcoind` refuses to start:\r\n\r\n```\r\n$ bitcoind\r\nError: Cannot set -listen=0 together with -listenonion=1\r\n```\r\n\r\n### Steps to reproduce\r\n\r\n* start `bitcoin-qt`, go to settings -> network and remove the checkbox from \"Allow incoming connections\"\r\n* shut down\r\n* add `listenonion=1` in `bitcoin.conf` (might as well be done as first step)\r\n* start `bitcoin-qt` - it refuses to start with `Error: Cannot set -listen=0 together with -listenonion=1`\r\n\r\n### Relevant log output\r\n\r\n_No response_\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster@7143d4388407ab3d12005e55a02d5e8f334e4dc9\r\n\r\n### Operating system and version\r\n\r\nany\r\n\r\n### Machine specifications\r\n\r\n_No response_",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 9,
    "created_at": "2024-02-26T16:33:23Z",
    "updated_at": "2024-02-29T14:41:38Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 1964589707,
      "node_id": "IC_kwDOABII5851GUKL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1964589707",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T16:34:04Z",
      "updated_at": "2024-02-26T16:34:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "First reported in https://github.com/bitcoin-core/gui/issues/567#issuecomment-1962422185",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29482#issuecomment-1964589707",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T16:35:29Z",
      "updated_at": "2024-02-26T16:35:29Z",
      "source": {
        "issue": {
          "id": 1176980516,
          "node_id": "I_kwDOEEET9c5GJ0wk",
          "url": "https://api.github.com/repos/bitcoin-core/gui/issues/567",
          "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
          "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/567/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/567/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/567/events",
          "html_url": "https://github.com/bitcoin-core/gui/issues/567",
          "number": 567,
          "state": "open",
          "state_reason": "reopened",
          "title": "Unable to open bitcoin-qt when incoming connections disabled in settings",
          "body": "<!-- Describe the issue -->\r\n\r\n\r\n\r\n\r\nbitcoin-qt throws an error and crashes if incoming connections are disabled in settings. This did not happen in v22.0 but noticed it in RC2 during testing.\r\n\r\n**Expected behavior**\r\n\r\n~~Disable listenonion and launch bitcoin-qt automatically.~~\r\nNo error and bitcoin-qt should start as it happens with v22.0\r\n\r\n**Actual behavior**\r\n\r\n![image](https://user-images.githubusercontent.com/94559964/159521316-cd3476e8-f176-478c-8ba6-43c552b2c546.png)\r\n\r\n![image](https://user-images.githubusercontent.com/94559964/159521030-63b3b2d2-5190-48bb-976f-8fb534e5dc4e.png)\r\n\r\n\r\n**To reproduce**\r\n\r\n1. Download [v22.0](https://bitcoincore.org/bin/bitcoin-core-22.0/), run and disable incoming connections in settings\r\n2. Restart bitcoin-qt \r\n3. Download [RC2](https://bitcoincore.org/bin/bitcoin-core-23.0/test.rc2/), run and look for errors when incoming connections are disabled\r\n\r\n**System information**\r\n\r\nConfirmed the issue on Ubuntu and Windows\r\n\r\n",
          "user": {
            "login": "ghost",
            "id": 10137,
            "node_id": "MDQ6VXNlcjEwMTM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ghost",
            "html_url": "https://github.com/ghost",
            "followers_url": "https://api.github.com/users/ghost/followers",
            "following_url": "https://api.github.com/users/ghost/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ghost/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ghost/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
            "organizations_url": "https://api.github.com/users/ghost/orgs",
            "repos_url": "https://api.github.com/users/ghost/repos",
            "events_url": "https://api.github.com/users/ghost/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ghost/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 2140649117,
              "node_id": "MDU6TGFiZWwyMTQwNjQ5MTE3",
              "url": "https://api.github.com/repos/bitcoin-core/gui/labels/Bug",
              "name": "Bug",
              "description": "Something isn't working",
              "color": "d73a4a",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin-core/gui/milestones/7",
            "html_url": "https://github.com/bitcoin-core/gui/milestone/7",
            "labels_url": "https://api.github.com/repos/bitcoin-core/gui/milestones/7/labels",
            "id": 7119355,
            "node_id": "MI_kwDOEEET9c4AbKH7",
            "number": 7,
            "state": "closed",
            "title": "23.0",
            "description": "",
            "creator": {
              "login": "hebasto",
              "id": 32963518,
              "node_id": "MDQ6VXNlcjMyOTYzNTE4",
              "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/hebasto",
              "html_url": "https://github.com/hebasto",
              "followers_url": "https://api.github.com/users/hebasto/followers",
              "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
              "organizations_url": "https://api.github.com/users/hebasto/orgs",
              "repos_url": "https://api.github.com/users/hebasto/repos",
              "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/hebasto/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 1,
            "closed_issues": 10,
            "created_at": "2021-09-03T10:20:23Z",
            "updated_at": "2024-02-24T16:55:40Z",
            "closed_at": "2022-12-25T11:04:17Z"
          },
          "locked": false,
          "comments": 11,
          "created_at": "2022-03-22T15:45:31Z",
          "updated_at": "2024-02-26T16:35:30Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1964605327,
      "node_id": "IC_kwDOABII5851GX-P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1964605327",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T16:40:45Z",
      "updated_at": "2024-02-26T16:40:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "So, `settings.json : listen=0` and `bitcoin.conf : listenonion=1` is interpreted as `bitcoind -listen=0 -listenonion=1` thus the rightful error. However `settings.json : listen=0` and `bitcoin.conf : listen=1` does not create a conflict even though, logically `listen=0` vs `listen=1` is even bigger conflict compared to `listen=0` vs `listenonion=1`.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29482#issuecomment-1964605327",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482"
    },
    {
      "event": "commented",
      "id": 1964629704,
      "node_id": "IC_kwDOABII5851Gd7I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1964629704",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T16:49:37Z",
      "updated_at": "2024-02-26T16:49:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think the expected behavior you suggested above seems reasonable, that if -listen=0 and -listenonion=1 are specified the -listen=0 option takes precedence and incoming connections are not accepted. It would be nice to log or show a warning in this case.\r\n\r\nI think current behavior of treating it like an error is also reasonable, too.\r\n\r\nI'm not sure about about the new bug reported in https://github.com/bitcoin-core/gui/issues/567#issuecomment-1962422185 since it is i just a screenshot without steps to reproduce. If that bug is happening without anything specified on the command line or in bitcoin.conf like the original bug https://github.com/bitcoin-core/gui/issues/567 then that is a real unexpected problem and bug.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29482#issuecomment-1964629704",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482"
    },
    {
      "event": "commented",
      "id": 1964642114,
      "node_id": "IC_kwDOABII5851Gg9C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1964642114",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T16:55:14Z",
      "updated_at": "2024-02-26T16:55:14Z",
      "author_association": "MEMBER",
      "body": "> When bitcoind is started with the following configuration files:\r\n\r\nCan you add steps for how bitcoind can get into this state (without manually creating a `settings.json`, which we don't support).",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29482#issuecomment-1964642114",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482"
    },
    {
      "event": "commented",
      "id": 1964653446,
      "node_id": "IC_kwDOABII5851GjuG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1964653446",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-26T17:00:45Z",
      "updated_at": "2024-02-26T17:00:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "> However `settings.json : listen=0` and `bitcoin.conf : listen=1` does not create a conflict even though, logically `listen=0` vs `listen=1` is even bigger conflict compared to `listen=0` vs `listenonion=1`.\r\n\r\nsettings.json is supposed to take precdence over bitcoin.conf. The idea is bitcoin.conf can have static values set by packager or os which are treated as defaults, and settings.json has dynamic values chosen by the user which override the defaults. But if user is both creating a bitcoin.conf and also changing settings.json through the gui or rpcs, settings.json will take precedence in that case too.\r\n\r\n> > When bitcoind is started with the following configuration files:\r\n> \r\n> Can you add steps for how bitcoind can get into this state (without manually creating a `settings.json`, which we don't support).\r\n\r\nIt would be good to add steps to the description, but if you use the GUI and uncheck \"allow in coming connections\" in the gui network settings, \"listen\": false will be added to settings.json.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29482#issuecomment-1964653446",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482"
    },
    {
      "event": "commented",
      "id": 1968774486,
      "node_id": "IC_kwDOABII5851WR1W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1968774486",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-28T11:22:49Z",
      "updated_at": "2024-02-28T11:22:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I'm not sure about about the new bug reported in https://github.com/bitcoin-core/gui/issues/567#issuecomment-1962422185 since it is i just a screenshot without steps to reproduce. If that bug is happening without anything specified on the command line or in bitcoin.conf like the original bug https://github.com/bitcoin-core/gui/issues/567 then that is a real unexpected problem and bug.\r\n\r\nIt requires `listenonion=1` in `bitcoin.conf`.\r\n\r\n> Can you add steps for how bitcoind can get into this state\r\n\r\nAdded elaborate steps to reproduce in the PR description.\r\n\r\nIs the solution here to set `listen: false, listenonion: false` in `settings.json` when \"Allow incoming connections\" is unchecked? Then any `listenonion=1` from `bitcoin.conf` would be overriden as well, like any `listen=1` is overriden now.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29482#issuecomment-1968774486",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482"
    },
    {
      "event": "commented",
      "id": 1969488304,
      "node_id": "IC_kwDOABII5851ZAGw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1969488304",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-28T17:27:24Z",
      "updated_at": "2024-02-28T17:27:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Is the solution here to set `listen: false, listenonion: false` in `settings.json` when \"Allow incoming connections\" is unchecked? \r\n\r\nI think that would be a good solution. Other solutions could be:\r\n\r\n- Adding the listenonion setting to the gui so it is visible (the proxy settings already have options for tor, so this would make the listening and proxy options more consistent)\r\n- Making the `listen=0` `listenonion=1` combination actually work by listening on only the localhost onion port only instead of allowing connections from anywhere.\r\n- Improving the current error message. If the user specified \"listenonion=1\" in the config file while also disabling connections it seems like a high chance that is unintentional. Probably it should just be a GUI warning, not a fatal error, though.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29482#issuecomment-1969488304",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482"
    },
    {
      "event": "commented",
      "id": 1971183431,
      "node_id": "IC_kwDOABII5851fd9H",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971183431",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-29T13:47:50Z",
      "updated_at": "2024-02-29T13:47:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "`listen=0` `listenonion=1` is not possible technically. Let me explain. The name `listenonion=` is really confusing and I got confused by it again. Maybe it is time to rename it. It has nothing to do with TCP listening (as in [`bind(2)`](https://www.man7.org/linux/man-pages/man2/bind.2.html) and [`listen(2)`](https://www.man7.org/linux/man-pages/man2/listen.2.html)). What `listenonion=` does is to connect to the Tor daemon and automatically create and configure a Tor service, like _\"Hey, Tor, please start listening on `foobar.onion:8333` and redirect all connections to that to `127.0.0.1:8334`\"_. It should be called `autocreatetorservice=`. Obviously, if we do not TCP listen on `127.0.0.1:8334` (controlled by `listen=`) then this cannot work.\r\n\r\nIt is further confusing because we can listen for onion connections even when `listenonion=0` - if the Tor daemon is configured manually to redirect connections to `foobar.onion:8333` to `127.0.0.1:8334` (where we run with `bind=127.0.0.1:8334=onion` which is the default).\r\n\r\n> Adding the listenonion setting to the gui so it is visible (the proxy settings already have options for tor, so this would make the listening and proxy options more consistent)\r\n\r\nIf this route is taken, then the GUI should only allow the following combinations:\r\n`listen=0` `listenonion=0`\r\n`listen=1` `listenonion=0`\r\n`listen=1` `listenonion=1`",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29482#issuecomment-1971183431",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482"
    },
    {
      "event": "commented",
      "id": 1971289826,
      "node_id": "IC_kwDOABII5851f37i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1971289826",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-29T14:41:37Z",
      "updated_at": "2024-02-29T14:41:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think that mostly makes sense, and definitely the most direct way to fix this issue would be one of the GUI fixes (making the Allow Incoming Connections checkbox disable both listen options, or improving the GUI error message and making it nonfatal, or adding a GUI option to control -listenonion).\r\n\r\nAnd I agree the options are really confusing and poorly named. IMO we should deprecate -listen, -listenonion, -bind, -whitebind options while interpreting them for backwards compatibility, and design a new option that lets you directly specify what addresses, ports, and sockets you want to listen on using a general syntax like [socat's](https://linux.die.net/man/1/socat).\r\n\r\nI just think, in theory, `listen=0 listenonion=1` could do a sensible thing and disable listening in general while still autoconfiguring tor and listening exclusively on the localhost onion service port. Probably not worth the implementation complexity, but I don't think it would be \"not possible technically\" unless I am missing something",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29482#issuecomment-1971289826",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29482"
    }
  ]
}