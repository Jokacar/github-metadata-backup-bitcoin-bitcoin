{
  "type": "issue",
  "issue": {
    "id": 1977578685,
    "node_id": "I_kwDOABII585133S9",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28795",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28795/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28795/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28795/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28795",
    "number": 28795,
    "state": "open",
    "state_reason": null,
    "title": "bitcoin core crashes and restarts syncing from beginning ",
    "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nOn multiple Raspberry Pi devices, while synchronizing the Bitcoin blockchain, I'm facing a recurring error:\r\n\r\n`LevelDB read failure: Corruption: block checksum mismatch`\r\n\r\nThis error consistently occurs at approximately the same blockchain timestamp (around `2016-01-28T16:10:24Z`). The specific cause of this error is unclear. Insights into this issue would be appreciated.\r\n\r\n### Expected behaviour\r\n\r\nThe Bitcoin full node is expected to synchronize fully without encountering corruption errors.\r\n\r\n### Steps to reproduce\r\n\r\nbitcoin.conf\r\n```\r\n# [core]\r\n# Specify a non-default location to store blockchain data.\r\nblocksdir=/mnt/usb/\r\n# Run in the background as a daemon and accept commands.\r\ndaemon=1\r\n```\r\n\r\n### Relevant log output\r\n\r\n2023-11-04T23:19:23Z UpdateTip: new best=000000000000000002a06e720b2c2d521c62a700ca0729185f1bcc4cfc4b4b28 height=397732 version=0x00000004 log2_work=84.082876 tx=109224564 date='2016-02-10T15:12:41Z' progress=0.122901 cache=517.2MiB(3856438txo)\r\n2023-11-04T23:19:23Z UpdateTip: new best=00000000000000000641d33199b04d9e2d997bba4a5576578dd64dd21d654114 height=397733 version=0x00000004 log2_work=84.082920 tx=109224565 date='2016-02-10T15:13:10Z' progress=0.122901 cache=517.2MiB(3856439txo)\r\n2023-11-04T23:19:24Z UpdateTip: new best=00000000000000000055df3510182efa1e765d67a37ac4b74f2a869327f7fd24 height=397734 version=0x00000004 log2_work=84.082963 tx=109225641 date='2016-02-10T15:15:54Z' progress=0.122902 cache=517.1MiB(3856394txo)\r\n2023-11-04T23:19:25Z UpdateTip: new best=00000000000000000307f416e26f7d613f2962feeb26e9dfeeb0ec8f5ea6ec31 height=397735 version=0x00000004 log2_work=84.083007 tx=109227498 date='2016-02-10T15:24:54Z' progress=0.122904 cache=517.1MiB(3856199txo)\r\n2023-11-04T23:19:26Z UpdateTip: new best=000000000000000006b7d8476c2db829352e4f22030d2580bac1b5538e152add height=397736 version=0x00000004 log2_work=84.083051 tx=109228974 date='2016-02-10T15:31:09Z' progress=0.122906 cache=517.3MiB(3857666txo)\r\n2023-11-04T23:19:27Z LevelDB read failure: Corruption: block checksum mismatch: /home/pi/.bitcoin/chainstate/018912.ldb\r\n2023-11-04T23:19:27Z Fatal LevelDB error: Corruption: block checksum mismatch: /home/pi/.bitcoin/chainstate/018912.ldb\r\n2023-11-04T23:19:27Z You can use -debug=leveldb to get more complete diagnostic messages\r\n2023-11-04T23:19:27Z Error: Error reading from database, shutting down.\r\n2023-11-04T23:19:27Z Error reading from database: Fatal LevelDB error: Corruption: block checksum mismatch: /home/pi/.bitcoin/chainstate/018912.ldb\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nPre-built binaries\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nv25.0\r\n\r\n### Operating system and version\r\n\r\nDebian\r\n\r\n### Machine specifications\r\n\r\nraspberrypi                 \r\n    description: Computer\r\n    product: Raspberry Pi 4 Model B Rev 1.1\r\n    serial: 10000000bca1fe28\r\n    width: 64 bits\r\n    capabilities: smp cp15_barrier setend swp tagged_addr_disabled\r\n  *-core\r\n       description: Motherboard\r\n       physical id: 0\r\n     *-cpu:0\r\n          description: CPU\r\n          product: cpu\r\n          physical id: 1\r\n          bus info: cpu@0\r\n          size: 1500MHz\r\n          capacity: 1500MHz\r\n          capabilities: fp asimd evtstrm crc32 cpuid cpufreq\r\n        *-cache\r\n             description: L1 Cache\r\n             physical id: 0\r\n             size: 32KiB\r\n     *-cpu:1\r\n          description: CPU\r\n          product: cpu\r\n          physical id: 2\r\n          bus info: cpu@1\r\n          size: 1500MHz\r\n          capacity: 1500MHz\r\n          capabilities: fp asimd evtstrm crc32 cpuid cpufreq\r\n        *-cache\r\n             description: L1 Cache\r\n             physical id: 0\r\n             size: 32KiB\r\n     *-cpu:2\r\n          description: CPU\r\n          product: cpu\r\n          physical id: 3\r\n          bus info: cpu@2\r\n          size: 1500MHz\r\n          capacity: 1500MHz\r\n          capabilities: fp asimd evtstrm crc32 cpuid cpufreq\r\n        *-cache\r\n             description: L1 Cache\r\n             physical id: 0\r\n             size: 32KiB\r\n     *-cpu:3\r\n          description: CPU\r\n          product: cpu\r\n          physical id: 4\r\n          bus info: cpu@3\r\n          size: 1500MHz\r\n          capacity: 1500MHz\r\n          capabilities: fp asimd evtstrm crc32 cpuid cpufreq\r\n        *-cache\r\n             description: L1 Cache\r\n             physical id: 0\r\n             size: 32KiB\r\n     *-cpu:4 DISABLED\r\n          description: CPU\r\n          product: l2-cache0\r\n          physical id: 5\r\n          bus info: cpu@4\r\n     *-memory\r\n          description: System memory\r\n          physical id: 6\r\n          size: 3793MiB\r\n     *-pci\r\n          description: PCI bridge\r\n          product: BCM2711 PCIe Bridge\r\n          vendor: Broadcom Inc. and subsidiaries\r\n          physical id: 0\r\n          bus info: pci@0000:00:00.0\r\n          version: 10\r\n          width: 32 bits\r\n          clock: 33MHz\r\n          capabilities: pci pm pciexpress normal_decode bus_master cap_list\r\n          configuration: driver=pcieport\r\n          resources: irq:30 memory:600000000-6000fffff\r\n        *-usb\r\n             description: USB controller\r\n             product: VL805/806 xHCI USB 3.0 Controller\r\n             vendor: VIA Technologies, Inc.\r\n             physical id: 0\r\n             bus info: pci@0000:01:00.0\r\n             version: 01\r\n             width: 64 bits\r\n             clock: 33MHz\r\n             capabilities: pm msi pciexpress xhci bus_master cap_list\r\n             configuration: driver=xhci_hcd latency=0\r\n             resources: irq:33 memory:600000000-600000fff\r\n           *-usbhost:0\r\n                product: xHCI Host Controller\r\n                vendor: Linux 6.1.0-rpi4-rpi-v8 xhci-hcd\r\n                physical id: 0\r\n                bus info: usb@1\r\n                logical name: usb1\r\n                version: 6.01\r\n                capabilities: usb-2.00\r\n                configuration: driver=hub slots=1 speed=480Mbit/s\r\n              *-usb\r\n                   description: USB hub\r\n                   product: USB2.0 Hub\r\n                   vendor: VIA Labs, Inc.\r\n                   physical id: 1\r\n                   bus info: usb@1:1\r\n                   version: 4.21\r\n                   capabilities: usb-2.10\r\n                   configuration: driver=hub maxpower=100mA slots=4 speed=480Mbit/s\r\n           *-usbhost:1\r\n                product: xHCI Host Controller\r\n                vendor: Linux 6.1.0-rpi4-rpi-v8 xhci-hcd\r\n                physical id: 1\r\n                bus info: usb@2\r\n                logical name: usb2\r\n                version: 6.01\r\n                capabilities: usb-3.00\r\n                configuration: driver=hub slots=4 speed=5000Mbit/s\r\n              *-usb\r\n                   description: Mass storage device\r\n                   product: X825\r\n                   vendor: SupTronics\r\n                   physical id: 2\r\n                   bus info: usb@2:2\r\n                   logical name: scsi0\r\n                   version: 1.00\r\n                   serial: 202010000096\r\n                   capabilities: usb-3.00 scsi\r\n                   configuration: driver=uas speed=5000Mbit/s\r\n                 *-disk\r\n                      description: SCSI Disk\r\n                      product: 2115\r\n                      vendor: ASMT\r\n                      physical id: 0.0.0\r\n                      bus info: scsi@0:0.0.0\r\n                      logical name: /dev/sda\r\n                      version: 0\r\n                      serial: 690000010202\r\n                      size: 931GiB (1TB)\r\n                      capabilities: gpt-1.00 partitioned partitioned:gpt\r\n                      configuration: ansiversion=6 guid=18ba2d83-2fe8-4a3a-aa32-0294591d70cd logicalsectorsize=512 sectorsize=512\r\n                    *-volume\r\n                         description: EXT4 volume\r\n                         vendor: Linux\r\n                         physical id: 1\r\n                         bus info: scsi@0:0.0.0,1\r\n                         logical name: /dev/sda1\r\n                         logical name: /mnt/usb\r\n                         version: 1.0\r\n                         serial: 5014ce6c-5caa-4ba4-8606-5f84501edf55\r\n                         size: 931GiB\r\n                         capacity: 931GiB\r\n                         capabilities: journaled extended_attributes large_files huge_files dir_nlink recover 64bit extents ext4 ext2 initialized\r\n                         configuration: created=2023-11-02 17:29:55 filesystem=ext4 lastmountpoint=/mnt/usb modified=2023-11-04 13:01:13 mount.fstype=ext4 mount.options=rw,nosuid,nodev,noexec,noatime,stripe=8191 mounted=2023-11-04 13:01:13 name=primary state=mounted\r\n  *-mmc0\r\n       description: MMC Host\r\n       physical id: 1\r\n       logical name: mmc0\r\n     *-device\r\n          description: SD Card\r\n          product: CBADS\r\n          vendor: Unknown (111)\r\n          physical id: b368\r\n          logical name: /dev/mmcblk0\r\n          version: 1.0\r\n          date: 06/2018\r\n          serial: 2852135273\r\n          size: 30GiB (32GB)\r\n          capabilities: sd partitioned partitioned:dos\r\n          configuration: logicalsectorsize=512 sectorsize=512 signature=88688bda\r\n        *-volume:0\r\n             description: Windows FAT volume\r\n             vendor: mkfs.fat\r\n             physical id: 1\r\n             logical name: /dev/mmcblk0p1\r\n             logical name: /boot/firmware\r\n             version: FAT32\r\n             serial: b49b-c102\r\n             size: 511MiB\r\n             capacity: 512MiB\r\n             capabilities: primary fat initialized\r\n             configuration: FATs=2 filesystem=fat label=bootfs mount.fstype=vfat mount.options=rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=ascii,shortname=mixed,errors=remount-ro state=mounted\r\n        *-volume:1\r\n             description: EXT4 volume\r\n             vendor: Linux\r\n             physical id: 2\r\n             logical name: /dev/mmcblk0p2\r\n             version: 1.0\r\n             serial: 6835594d-a5f3-459f-a244-318060e7e0ab\r\n             size: 29GiB\r\n             capacity: 29GiB\r\n             capabilities: primary journaled extended_attributes large_files dir_nlink recover extents ext4 ext2 initialized\r\n             configuration: created=2023-10-10 04:55:54 filesystem=ext4 label=rootfs lastmountpoint=/ modified=1970-01-01 01:00:03 mounted=2023-11-04 13:01:08 state=clean\r\n  *-sound\r\n       description: Headphones\r\n       physical id: 2\r\n       logical name: card0\r\n       logical name: /dev/snd/controlC0\r\n       logical name: /dev/snd/pcmC0D0p\r\n  *-network\r\n       description: Ethernet interface\r\n       physical id: 3\r\n       logical name: eth0\r\n       serial: dc:a6:32:5f:11:0d\r\n       size: 1Gbit/s\r\n       capacity: 1Gbit/s\r\n       capabilities: ethernet physical tp mii 10bt 10bt-fd 100bt 100bt-fd 1000bt 1000bt-fd autonegotiation\r\n       configuration: autonegotiation=on broadcast=yes driver=bcmgenet driverversion=6.1.0-rpi4-rpi-v8 duplex=full ip=192.168.1.200 link=yes multicast=yes port=twisted pair speed=1Gbit/s",
    "user": {
      "login": "gianlucamazza",
      "id": 25006045,
      "node_id": "MDQ6VXNlcjI1MDA2MDQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/25006045?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gianlucamazza",
      "html_url": "https://github.com/gianlucamazza",
      "followers_url": "https://api.github.com/users/gianlucamazza/followers",
      "following_url": "https://api.github.com/users/gianlucamazza/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/gianlucamazza/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/gianlucamazza/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/gianlucamazza/subscriptions",
      "organizations_url": "https://api.github.com/users/gianlucamazza/orgs",
      "repos_url": "https://api.github.com/users/gianlucamazza/repos",
      "events_url": "https://api.github.com/users/gianlucamazza/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/gianlucamazza/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 1,
    "created_at": "2023-11-05T01:01:22Z",
    "updated_at": "2023-11-06T07:47:35Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 1793707433,
      "node_id": "IC_kwDOABII585q6c2p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1793707433",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-05T11:16:44Z",
      "updated_at": "2023-11-05T11:16:44Z",
      "author_association": "MEMBER",
      "body": "You're running Bitcoin Core on a Raspberry Pi which can work with the right setup. Looks like you are storing blocks on an external drive of some kind, but the chainstate database might still be stored on the MicroSD card (?) and got corrupted.\r\n\r\nIt's a little hard to tell from your output what kind of external drive you have but assuming its a good quality SSD connected by USB3 to the Pi, you might consider mounting it directly to `/home/pi/.bitcoin` (this is what I do). Then all block, index, chainstate etc files are stored externally by default.\r\n\r\nOnce your configuration is improved you might try rebuilding the chainstate files with `-reindex-chainstate` which will NOT download the blockchain again, but will only work if those files (and their levelDB index) are not corrupted as well.",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28795#issuecomment-1793707433",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28795"
    }
  ]
}