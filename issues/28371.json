{
  "type": "issue",
  "issue": {
    "id": 1873781718,
    "node_id": "I_kwDOABII585vr6PW",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28371",
    "number": 28371,
    "state": "open",
    "state_reason": null,
    "title": "Seek more/different peers when ours all have too high feefilter",
    "body": "While investigating an issue with a non-propagating transaction with @TheBlueMatt, it occurred to us that it can be a problem for a node to get its transactions relayed when it's surrounded solely by low-mempool-limit peers (which correspondingly have a high announced minfeefilter value). And it appears this is detectable too, as our own `mempoolminfee` would be lower.\r\n\r\nWhile obviously relay can't be guaranteed, this is a detectable situation, and it could factor into the outbound replacement logic and/or trigger something similar to the \"seek more peers\" behavior we exhibit when we appear to be not getting blocks.\r\n",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      },
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 8,
    "created_at": "2023-08-30T14:17:36Z",
    "updated_at": "2024-02-12T21:22:58Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 10233738564,
      "node_id": "LE_lADOABII585vr6PWzwAAAAJh-nVE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10233738564",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T14:17:36Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "mentioned",
      "id": 10233738649,
      "node_id": "MEE_lADOABII585vr6PWzwAAAAJh-nWZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10233738649",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T14:17:37Z"
    },
    {
      "event": "subscribed",
      "id": 10233738674,
      "node_id": "SE_lADOABII585vr6PWzwAAAAJh-nWy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10233738674",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T14:17:37Z"
    },
    {
      "event": "labeled",
      "id": 10233790933,
      "node_id": "LE_lADOABII585vr6PWzwAAAAJh-0HV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10233790933",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T14:21:57Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "labeled",
      "id": 10233791729,
      "node_id": "LE_lADOABII585vr6PWzwAAAAJh-0Tx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10233791729",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T14:22:01Z",
      "label": {
        "name": "Brainstorming",
        "color": "ebd775"
      }
    },
    {
      "event": "unlabeled",
      "id": 10233793170,
      "node_id": "UNLE_lADOABII585vr6PWzwAAAAJh-0qS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10233793170",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T14:22:08Z",
      "label": {
        "name": "Brainstorming",
        "color": "ebd775"
      }
    },
    {
      "event": "commented",
      "id": 1699379249,
      "node_id": "IC_kwDOABII585lSngx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699379249",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T15:17:59Z",
      "updated_at": "2023-08-30T15:17:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "As nodes with limited mempools (presumably some of the RPi node things do this by default?) become more and more common, this is potentially gonna start to be an issue.  Of course post-package-relay+mempool-sync (heh) its less of an issue, but lightning nodes really care about this kinda thing...",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28371#issuecomment-1699379249",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371"
    },
    {
      "event": "commented",
      "id": 1704825553,
      "node_id": "IC_kwDOABII585lnZLR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1704825553",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-04T08:21:21Z",
      "updated_at": "2023-09-04T08:21:21Z",
      "author_association": "MEMBER",
      "body": "What about discouraging outbound peers with a mempool -say- 80% smaller than ours? It seems useful in general, would solve this situation for transactions with a reasonable fee attached, and for transactions with a fee such as it would be under 60MB of unconfirmed transactions.. it's the application's responsibility to prevent this?\r\n\r\nI understand for Lightning's commitment transactions you rely on your peer to cosign a feerate update, but you would most likely have dropped to chain before getting in a situation where you are holding a commit tx whose feerate is lower than that of 60MB worth of unconfirmed transactions?\r\n\r\nWe should probably check what the node-in-a-box projects set as `-maxmempool` too.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28371#issuecomment-1704825553",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371"
    },
    {
      "event": "commented",
      "id": 1712332704,
      "node_id": "IC_kwDOABII585mEB-g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1712332704",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-08T23:28:45Z",
      "updated_at": "2023-09-08T23:28:45Z",
      "author_association": "MEMBER",
      "body": "From my understanding of the current state of #27742 (package relay code), `m_fee_filter_received` is not looked on during the composition of the `ANCPKGINFO` reply in `ProcessGetData` / `MaybeGetAncPkgInfo`, neither in the further processing of complementary missing package txn relay at `GETPKGTXNS` so effectively package relay deployment should be a good hardening for time-sensitive lightning transactions with a pre-signed feerate, assuming Lightning node / softwares responsibly RBFing / CPFPing their low-feerate txn as timelock expiration is approaching.\r\n\r\nI think there is still a longer concern about a majority of low-mempool-limit peers (i.e low-value `-maxmempool`) screwing up the transaction-relay of low-feerate lightning transactions and therefore delaying the confirmation of those ones, or at least making not seen by the miners mempools and so _artificially fee-bumping them as timelocks expiration is approaching. So low-mempool-limit peers with a fee-filter not representing miners / default full-nodes mempool setting might be an individual source of failure for transaction-relay propagation and holistically a waste in fee-bumping reserves for Lightning nodes. \r\n\r\nI think it might makes sense in the long-term to discourage (or preferentially evict them) tx-relay peers with relatively lower mempool size than ours. I guess it would be better to get back on the table https://github.com/bitcoin/bitcoin/pull/20726 and BIP338 (clean up of features flow negotiated with peers) before we complexify discourage / peers disconnection on local node settings.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28371#issuecomment-1712332704",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T09:28:32Z",
      "updated_at": "2023-09-15T09:28:32Z",
      "source": {
        "issue": {
          "id": 1898055395,
          "node_id": "PR_kwDOABII585aa88U",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28488",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28488/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28488/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28488/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28488",
          "number": 28488,
          "state": "open",
          "state_reason": null,
          "title": "p2p: Evict outbound peers with high minFeeRate",
          "body": "See issue #28371\r\n\r\nHaving no peers with sufficiently broad mempool limits may prevent our low-fee transactions from propagating, even though they would seem perfectly valid for us locally.\r\n\r\nHaving too few such peers may cause privacy leaks.\r\n\r\nWe should periodically check that we have sufficient peers with mempool limits comparable to ours.\r\nIf that's not true, we should evict some high-minFeeRate outbound peers to make room for a new peer with hopefully broader limits.",
          "user": {
            "login": "naumenkogs",
            "id": 7975071,
            "node_id": "MDQ6VXNlcjc5NzUwNzE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/naumenkogs",
            "html_url": "https://github.com/naumenkogs",
            "followers_url": "https://api.github.com/users/naumenkogs/followers",
            "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
            "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
            "repos_url": "https://api.github.com/users/naumenkogs/repos",
            "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28488",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28488",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28488.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28488.patch"
          },
          "created_at": "2023-09-15T09:28:31Z",
          "updated_at": "2024-02-09T19:20:29Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "subscribed",
      "id": 10389048235,
      "node_id": "SE_lADOABII585vr6PWzwAAAAJrPEur",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10389048235",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-16T05:42:29Z"
    },
    {
      "event": "commented",
      "id": 1722904016,
      "node_id": "IC_kwDOABII585msW3Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1722904016",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-18T07:47:42Z",
      "updated_at": "2023-09-18T07:47:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "> As nodes with limited mempools (presumably some of the RPi node things do this by default?) become more and more common, this is potentially gonna start to be an issue. Of course post-package-relay+mempool-sync (heh) its less of an issue, but lightning nodes really care about this kinda thing...\r\n\r\nWhy would this become more common? I'm looking at Amazon right now, and the supermajority of Raspberry Pi's for sale are 4GB or higher, with only a few 2GB models and just one 1GB model (in the first page of results). The default is 300MB of actual RAM usage, which is just 15% of a 2GB RPi's available RAM. I'm also not aware of any RPi node software with a non-default max mempool.\r\n\r\nI've you've actually observed a problem that appears to be this, I'd be more inclined to suspect a cause like a sybil attack of badly written chainalysis tx monitoring nodes.",
      "user": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28371#issuecomment-1722904016",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371"
    },
    {
      "event": "commented",
      "id": 1723657682,
      "node_id": "IC_kwDOABII585mvO3S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1723657682",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-18T15:12:06Z",
      "updated_at": "2023-09-18T15:12:06Z",
      "author_association": "MEMBER",
      "body": "> The default is 300MB of actual RAM usage, which is just 15% of a 2GB RPi's available RAM. I'm also not aware of any RPi node software with a non-default max mempool.\r\n\r\nWhile a RPi can dedicate 15% of its available RAM to the mempool, there is no guarantee than actually users are not running with more constrained settings, e.g if they are sharing the platform with other process like lightning nodes or btcpay, consuming too RAM space.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28371#issuecomment-1723657682",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371"
    },
    {
      "event": "commented",
      "id": 1723832747,
      "node_id": "IC_kwDOABII585mv5mr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1723832747",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-18T16:16:25Z",
      "updated_at": "2023-09-18T16:16:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "On Mon, Sep 18, 2023 at 08:12:19AM -0700, Antoine Riard wrote:\n> > The default is 300MB of actual RAM usage, which is just 15% of a 2GB RPi's available RAM. I'm also not aware of any RPi node software with a non-default max mempool.\n> \n> While a RPi can dedicate 15% of its available RAM to the mempool, there is no guarantee than actually users are not running with more constrained settings, e.g if they are sharing the platform with other process like lightning nodes or btcpay, consuming too RAM space.\n\nI fully recognize that there is no guarantee. But my point is, there isn't that\nmuch motive. So I'd be surprised if there exists large numbers of genuine nodes\nwith lower than default mempool settings. And I don't see any reason for that\nsituation to change.\n",
      "user": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28371#issuecomment-1723832747",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371"
    },
    {
      "event": "commented",
      "id": 1725135809,
      "node_id": "IC_kwDOABII585m03vB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1725135809",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-19T09:20:20Z",
      "updated_at": "2023-09-19T09:20:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "Maybe it would be good to collect some empirical data of how frequent peers with significantly higher minfeefilter actually are. If it can be a problem to find peers relaying our transactions, maybe a very simple first step would be to not keep up full outbound connections to peers that don't support tx relay at all (e.g. because they might be running in `-blocksonly` mode).",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28371#issuecomment-1725135809",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-21T16:14:30Z",
      "updated_at": "2023-09-21T16:14:30Z",
      "source": {
        "issue": {
          "id": 469965789,
          "node_id": "MDU6SXNzdWU0Njk5NjU3ODk=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16418",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16418/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16418/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16418/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/16418",
          "number": 16418,
          "state": "open",
          "state_reason": null,
          "title": "Ensure we have sufficient transaction-relay peers",
          "body": "Currently, we have no protections in place if our outbound peers are running in `-blocksonly` mode.  In practice, we rely on our outbound peers to be our best source of announced transactions, but if all our outbound peers were `-blocksonly`, we would make no effort to disconnect any to find an alternative peer to receive transactions from.\r\n\r\nWe discover at connection time (in the VERSION message) whether our peer will relay transactions on our link.  Perhaps we should tolerate some number of `-blocksonly` peers as outbounds, and once we hit that threshold we should disconnect new blocksonly outbounds?\r\n\r\nI suppose another issue could be if it's worth having logic that tries to determine whether a peer is silently withholding transactions from us...  We have logic for blocks, where we try to find a new outbound peer if we haven't received a new block in a while, but I don't know if there's a reasonable way to do this for transactions.  My guess is that this is not a very pressing concern, but perhaps we could do something that just tried making new outbound connections if we aren't receiving any transactions at all?",
          "user": {
            "login": "sdaftuar",
            "id": 7463573,
            "node_id": "MDQ6VXNlcjc0NjM1NzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sdaftuar",
            "html_url": "https://github.com/sdaftuar",
            "followers_url": "https://api.github.com/users/sdaftuar/followers",
            "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
            "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
            "repos_url": "https://api.github.com/users/sdaftuar/repos",
            "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 6,
          "created_at": "2019-07-18T20:06:48Z",
          "updated_at": "2023-09-21T16:14:29Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-26T19:13:55Z",
      "updated_at": "2023-09-26T19:13:55Z",
      "source": {
        "issue": {
          "id": 1914146493,
          "node_id": "PR_kwDOABII585bQ_YW",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28538",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28538/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28538/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28538/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28538",
          "number": 28538,
          "state": "open",
          "state_reason": null,
          "title": "p2p: attempt to fill full outbound connection slots with peers that support tx relay",
          "body": "As described in the issues #16418 and #28371, it's a possibility that we could end up having an insufficient number of outbound peers relaying our transactions. Having fewer outbound peers support tx-relay could also have implications on [privacy](https://github.com/bitcoin/bitcoin/issues/16418#issuecomment-514328042) and fee estimation.\r\n\r\nWhile #28488 is suggesting meaures based on comparing fee filters / mempool sizes, there is also the simpler issue of peers that tell us they don't want transactions, which is determined by the `fRelay` field in the `version` msg. If such a peer runs bitcoin core, that usually means that it's running in `-blocksonly` mode and accepting inbound connections. The status quo is that we will not avoid these peers and just not send them any transactions.\r\n\r\nThis PR proposes not to waste any of our 8 full-relay outbound slots on these peers (unless we are in `-blocksonly` mode ourselves). Using them as outbound peers for block-relay-only connections is fine though and not impacted.\r\n\r\nAs was suggested by ajtowns below, we don't disconnect during version processing, but later during the regularly scheduled `EvictExtraOutboundPeers()` task, and only if we are at the maximum of full-outbound peers.\r\n\r\nIf reviewers think that this proposal is too aggressive, an alternative solution (with a little more complexity) would be to restrict the maximum number of outbound connections to `-blocksonly` peers to 1 or 2. Although I currently think that it's ok to be selective with outbound connections, so I didn't implement that right away.",
          "user": {
            "login": "mzumsande",
            "id": 48763452,
            "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mzumsande",
            "html_url": "https://github.com/mzumsande",
            "followers_url": "https://api.github.com/users/mzumsande/followers",
            "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
            "organizations_url": "https://api.github.com/users/mzumsande/orgs",
            "repos_url": "https://api.github.com/users/mzumsande/repos",
            "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/mzumsande/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28538",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28538",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28538.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28538.patch"
          },
          "created_at": "2023-09-26T19:13:54Z",
          "updated_at": "2024-01-20T22:31:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "yyforyongyu",
        "id": 5845072,
        "node_id": "MDQ6VXNlcjU4NDUwNzI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5845072?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yyforyongyu",
        "html_url": "https://github.com/yyforyongyu",
        "followers_url": "https://api.github.com/users/yyforyongyu/followers",
        "following_url": "https://api.github.com/users/yyforyongyu/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yyforyongyu/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yyforyongyu/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yyforyongyu/subscriptions",
        "organizations_url": "https://api.github.com/users/yyforyongyu/orgs",
        "repos_url": "https://api.github.com/users/yyforyongyu/repos",
        "events_url": "https://api.github.com/users/yyforyongyu/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yyforyongyu/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-07T10:34:13Z",
      "updated_at": "2024-02-07T10:34:13Z",
      "source": {
        "issue": {
          "id": 2098861495,
          "node_id": "PR_kwDOAvdcaM5k-_4O",
          "url": "https://api.github.com/repos/lightningnetwork/lnd/issues/8418",
          "repository_url": "https://api.github.com/repos/lightningnetwork/lnd",
          "labels_url": "https://api.github.com/repos/lightningnetwork/lnd/issues/8418/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/lightningnetwork/lnd/issues/8418/comments",
          "events_url": "https://api.github.com/repos/lightningnetwork/lnd/issues/8418/events",
          "html_url": "https://github.com/lightningnetwork/lnd/pull/8418",
          "number": 8418,
          "state": "open",
          "state_reason": null,
          "title": "chainfee: introduce filterManager and use it for fee floor",
          "body": "This commit introduces a filterManager that uses our outbound peers' feefilter values to determine an acceptable minimum feerate that ensures successful transaction propagation. Under the hood, a moving median is used as it is more resistant to shocks than a moving average.\r\n\r\nMostly looking for an approach ACK on:\r\n- the choice of a moving median compared to a moving average\r\n- the choice of exclusively using outbound peers' feefilter to avoid manipulation by an inbound attacker. The downside is that we get less datapoints\r\n- the choice of constants (polling interval and the moving window) which will affect the overall result\r\n  - a quicker polling interval means more up-to-date data but at the cost of taking up the window size with potentially stale data\r\n  - a larger moving window would give the moving median more \"memory\", but may end up carrying irrelevant data",
          "user": {
            "login": "Crypt-iQ",
            "id": 15145615,
            "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
            "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Crypt-iQ",
            "html_url": "https://github.com/Crypt-iQ",
            "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
            "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
            "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
            "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
            "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignee": {
            "login": "Crypt-iQ",
            "id": 15145615,
            "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
            "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Crypt-iQ",
            "html_url": "https://github.com/Crypt-iQ",
            "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
            "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
            "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
            "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
            "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "Crypt-iQ",
              "id": 15145615,
              "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
              "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/Crypt-iQ",
              "html_url": "https://github.com/Crypt-iQ",
              "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
              "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
              "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
              "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
              "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "COLLABORATOR",
          "milestone": {
            "url": "https://api.github.com/repos/lightningnetwork/lnd/milestones/46",
            "html_url": "https://github.com/lightningnetwork/lnd/milestone/46",
            "labels_url": "https://api.github.com/repos/lightningnetwork/lnd/milestones/46/labels",
            "id": 9743968,
            "node_id": "MI_kwDOAvdcaM4AlK5g",
            "number": 46,
            "state": "open",
            "title": "v0.18.0",
            "description": "Planned scope:\r\n- Relational DB for invoice data store\r\n- Route blinding\r\n- Inbound routing fee",
            "creator": {
              "login": "saubyk",
              "id": 39208279,
              "node_id": "MDQ6VXNlcjM5MjA4Mjc5",
              "avatar_url": "https://avatars.githubusercontent.com/u/39208279?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/saubyk",
              "html_url": "https://github.com/saubyk",
              "followers_url": "https://api.github.com/users/saubyk/followers",
              "following_url": "https://api.github.com/users/saubyk/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/saubyk/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/saubyk/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/saubyk/subscriptions",
              "organizations_url": "https://api.github.com/users/saubyk/orgs",
              "repos_url": "https://api.github.com/users/saubyk/repos",
              "events_url": "https://api.github.com/users/saubyk/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/saubyk/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 33,
            "closed_issues": 75,
            "created_at": "2023-08-04T16:56:31Z",
            "updated_at": "2024-02-06T18:50:05Z"
          },
          "locked": false,
          "comments": 25,
          "pull_request": {
            "url": "https://api.github.com/repos/lightningnetwork/lnd/pulls/8418",
            "html_url": "https://github.com/lightningnetwork/lnd/pull/8418",
            "diff_url": "https://github.com/lightningnetwork/lnd/pull/8418.diff",
            "patch_url": "https://github.com/lightningnetwork/lnd/pull/8418.patch"
          },
          "created_at": "2024-01-24T18:36:17Z",
          "updated_at": "2024-02-08T19:12:04Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1939604817,
      "node_id": "IC_kwDOABII585znAVR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1939604817",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-12T21:21:03Z",
      "updated_at": "2024-02-12T21:22:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Maybe it would be good to collect some empirical data of how frequent peers with significantly higher minfeefilter actually are.\r\n\r\nI made a network crawler for `feefilter` (sends version/verack and waits for feefilter) and for today this is the histogram of feefilters (sat/KvB) from ~16.8k nodes:\r\n\r\n![feefilter-0212-2](https://github.com/bitcoin/bitcoin/assets/15145615/68c11d20-3868-494b-b60d-ce349327fb1e)\r\n\r\nRight now, mempool.space says that the minimum fee to get into the mempool is at 4.35 sat/vbyte. There are ~7.3k nodes with minfeefilter set to >= 9.5 sat/vbyte. I've observed similar behavior over the past couple weeks where there's a chunk of peers that have higher feefilters than the standard 300MB mempool. ",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28371#issuecomment-1939604817",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28371"
    }
  ]
}