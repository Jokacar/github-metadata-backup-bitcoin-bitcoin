{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946",
    "id": 1617714149,
    "node_id": "PR_kwDOABII585gbFvl",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28946",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28946.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28946.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28946",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28946/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/98ba5ba0cc0cb94b51595248041db972a9ef5a09",
    "number": 28946,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "init: don't delete PID file if it was not generated",
    "user": {
      "login": "willcl-ark",
      "id": 6606587,
      "node_id": "MDQ6VXNlcjY2MDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/willcl-ark",
      "html_url": "https://github.com/willcl-ark",
      "followers_url": "https://api.github.com/users/willcl-ark/followers",
      "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
      "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
      "repos_url": "https://api.github.com/users/willcl-ark/repos",
      "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "In a similar vein to #28784, if a second `bitcoind` is started using the same datadir it will fail to start up, but during shutdown remove the PID file from the first `bitcoind` instance.",
    "labels": [],
    "created_at": "2023-11-27T10:42:19Z",
    "updated_at": "2023-11-27T14:57:10Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "d2fb09c996188df3450c0674079da3dd30e03761",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "willcl-ark:fix-pidfile-delete",
      "ref": "fix-pidfile-delete",
      "sha": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 164122552,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjQxMjI1NTI=",
        "name": "bitcoin",
        "full_name": "willcl-ark/bitcoin",
        "owner": {
          "login": "willcl-ark",
          "id": 6606587,
          "node_id": "MDQ6VXNlcjY2MDY1ODc=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/willcl-ark",
          "html_url": "https://github.com/willcl-ark",
          "followers_url": "https://api.github.com/users/willcl-ark/followers",
          "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
          "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
          "repos_url": "https://api.github.com/users/willcl-ark/repos",
          "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/willcl-ark/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/willcl-ark/bitcoin",
        "archive_url": "https://api.github.com/repos/willcl-ark/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/willcl-ark/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/willcl-ark/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/willcl-ark/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/willcl-ark/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/willcl-ark/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/willcl-ark/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/willcl-ark/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/willcl-ark/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/willcl-ark/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/willcl-ark/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/willcl-ark/bitcoin/events",
        "forks_url": "https://api.github.com/repos/willcl-ark/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/willcl-ark/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/willcl-ark/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/willcl-ark/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/willcl-ark/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/willcl-ark/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/willcl-ark/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/willcl-ark/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/willcl-ark/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/willcl-ark/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/willcl-ark/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/willcl-ark/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/willcl-ark/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:willcl-ark/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/willcl-ark/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/willcl-ark/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/willcl-ark/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/willcl-ark/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/willcl-ark/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/willcl-ark/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/willcl-ark/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/willcl-ark/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/willcl-ark/bitcoin/hooks",
        "svn_url": "https://github.com/willcl-ark/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 227446,
        "default_branch": "master",
        "open_issues_count": 5,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-11-27T10:54:23Z",
        "created_at": "2019-01-04T15:17:29Z",
        "updated_at": "2023-11-07T12:50:29Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "5f9fd11680af43b0d0d80a6aa4f315aa04afeac4",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36026,
        "stargazers_count": 72342,
        "watchers_count": 72342,
        "size": 245480,
        "default_branch": "master",
        "open_issues_count": 653,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-11-27T14:31:45Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-11-27T14:45:15Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 20,
    "deletions": 7,
    "changed_files": 2,
    "commits": 1,
    "review_comments": 11,
    "comments": 3
  },
  "events": [
    {
      "event": "commented",
      "id": 1827581320,
      "node_id": "IC_kwDOABII585s7q2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1827581320",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T10:42:22Z",
      "updated_at": "2023-11-27T14:57:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28946).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/28946#pullrequestreview-1750549060) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28784](https://github.com/bitcoin/bitcoin/pull/28784) (rpc: keep `.cookie` file if it was not generated by romanz)\n* [#28051](https://github.com/bitcoin/bitcoin/pull/28051) (Get rid of shutdown.cpp/shutdown.h, use SignalInterrupt directly by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#issuecomment-1827581320",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28946"
    },
    {
      "event": "commented",
      "id": 1827586352,
      "node_id": "IC_kwDOABII585s7sEw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1827586352",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T10:45:41Z",
      "updated_at": "2023-11-27T10:45:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "You can test similarly to #28784:\r\n\r\n```sh\r\nwill@ubuntu in ~ :\r\n₿ bitcoind -regtest -daemon=1\r\nBitcoin Core starting\r\n\r\nwill@ubuntu in ~ : \r\n₿ file ~/.bitcoin/regtest/bitcoind.pid\r\n/home/will/.bitcoin/regtest/bitcoind.pid: ASCII text\r\n\r\nwill@ubuntu in ~ :\r\n₿ bitcoind -regtest  -daemon=1\r\nError: Cannot obtain a lock on data directory /home/will/.bitcoin/regtest. Bitcoin Core is probably already running.\r\n\r\nwill@ubuntu in ~ :\r\n₿ file ~/.bitcoin/regtest/bitcoind.pid\r\n/home/will/.bitcoin/regtest/bitcoind.pid: cannot open `/home/will/.bitcoin/regtest/bitcoind.pid' (No such file or directory)\r\n```",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#issuecomment-1827586352",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28946"
    },
    {
      "event": "reviewed",
      "id": 1750142428,
      "node_id": "PRR_kwDOABII585oUQ3c",
      "url": null,
      "actor": null,
      "commit_id": "5eefe8d2433aa85f9dc866b7cf726ea436e6f80d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#pullrequestreview-1750142428",
      "submitted_at": "2023-11-27T10:48:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk4YmE1YmEwY2MwY2I5NGI1MTU5NTI0ODA0MWRiOTcyYTllZjVhMDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "tree": {
        "sha": "fd3371fb8d55da4b629bf6fd984cc88a0af0ebc5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fd3371fb8d55da4b629bf6fd984cc88a0af0ebc5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree fd3371fb8d55da4b629bf6fd984cc88a0af0ebc5\nparent 5f9fd11680af43b0d0d80a6aa4f315aa04afeac4\nauthor willcl-ark <will@256k1.dev> 1701080942 +0000\ncommitter willcl-ark <will@256k1.dev> 1701082453 +0000\n\ninit: don't delete PID file if it was not generated\n\nPreviously, starting a second bitcoind using the same datadir would\ncorrectly fail to init and shutdown. However during shutdown the PID\nfile from the first instance would be erroneously removed.\n\nFix this to only delete the PID file is we created it.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEoAg2YPI1onAAzTyBzm7EmUXBfqYFAmVkdVYACgkQzm7EmUXB\nfqZsfBAAik6HeD/+moRYBEMYmadLwPbLhN6Bw6ym1SgNA5UjAbhmJ10xcQb2FcBP\nnb83kOk8UdbX5KfYR96qFsNQt9chx66Z1v5hDFAaflsRAO9l2HlWYYOU9YhW4wqW\nQsFyJ4tAJqNpc3mrQPKIo803zL/voeJZzk6g4u7rUOaRXoGovWSSW0ASF0nc99fe\nj25tTlnHEUdyslFzIxAHpMZxjAi4sHQd8f0x3Hbb45N8ux7gYtS+qwns4inaRufP\n4jt3sERpKgcgPzWwK+3i83saaAXQ0SR+rJGWgYelxihAqoaOBwtfkLv1uS6DPb/1\nySMFnvO3pi1hDKECH9VI6OEyiqe38LjNfJN92gqSGVnLWNvY/Ssmc5yRq+CHAADA\nZcwuv4F1CHzHtgnloxm8z2j07hS1lJ6oLdbzntoRZ4UqAy22mPMtKN6cm89AXOPv\npkaCDJq5QyyHmK/EuEX2fM9Np2dHGiyiNYKvpVi9iyyAAejZQQGleex1iAZQAKYc\nVNJ16FzoS/gq/uSgSYdcQsd8OdUBo/9lFCiBgib2U0fsGYYBRAfP4udr7eGE8Zxh\nKLv9s8b5PIO9piGMhQNMNSHu13c083/3gA9M+pw4utdbBdnaBQsmh+gUEpNSO/L8\nR2QZsNGw0Omw7HH293RyrSdtkPLkyzL9VOi2zKghlE8LRTMoXvU=\n=O5vq\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f9fd11680af43b0d0d80a6aa4f315aa04afeac4",
          "sha": "5f9fd11680af43b0d0d80a6aa4f315aa04afeac4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5f9fd11680af43b0d0d80a6aa4f315aa04afeac4"
        }
      ],
      "message": "init: don't delete PID file if it was not generated\n\nPreviously, starting a second bitcoind using the same datadir would\ncorrectly fail to init and shutdown. However during shutdown the PID\nfile from the first instance would be erroneously removed.\n\nFix this to only delete the PID file is we created it.",
      "committer": {
        "name": "willcl-ark",
        "email": "will@256k1.dev",
        "date": "2023-11-27T10:54:13Z"
      },
      "author": {
        "name": "willcl-ark",
        "email": "will@256k1.dev",
        "date": "2023-11-27T10:29:02Z"
      },
      "sha": "98ba5ba0cc0cb94b51595248041db972a9ef5a09"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11069424546,
      "node_id": "HRFPE_lADOABII58537HoWzwAAAAKTygOi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11069424546",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T10:54:27Z"
    },
    {
      "event": "commented",
      "id": 1827601447,
      "node_id": "IC_kwDOABII585s7vwn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1827601447",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T10:54:55Z",
      "updated_at": "2023-11-27T10:54:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks @maflcko, I took the suggestions in 98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#issuecomment-1827601447",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28946"
    },
    {
      "event": "mentioned",
      "id": 11069430299,
      "node_id": "MEE_lADOABII58537HoWzwAAAAKTyhob",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11069430299",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T10:54:55Z"
    },
    {
      "event": "subscribed",
      "id": 11069430323,
      "node_id": "SE_lADOABII58537HoWzwAAAAKTyhoz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11069430323",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T10:54:55Z"
    },
    {
      "event": "reviewed",
      "id": 1750549060,
      "node_id": "PRR_kwDOABII585oV0JE",
      "url": null,
      "actor": null,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#pullrequestreview-1750549060",
      "submitted_at": "2023-11-27T14:41:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405973543",
      "pull_request_review_id": 1750142428,
      "id": 1405973543,
      "node_id": "PRRC_kwDOABII585TzXQn",
      "diff_hunk": "@@ -170,12 +171,26 @@ static fs::path GetPidFile(const ArgsManager& args)\n #else\n         tfm::format(file, \"%d\\n\", getpid());\n #endif\n+        g_generated_pid = true;\n         return true;\n     } else {\n         return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\n     }\n }\n \n+static void RemovePidFile(NodeContext& node)\n+{\n+    if (!g_generated_pid) return;\n+    try {\n+        if (!fs::remove(GetPidFile(*node.args))) {\n+            LogPrintf(\"%s: Unable to remove PID file: File does not exist\\n\", __func__);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "5eefe8d2433aa85f9dc866b7cf726ea436e6f80d",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n            LogPrintf(\"Unable to remove PID file: File does not exist\\n\");\r\n```\r\n\r\nnit: No need to take this over, if you change the function name, the warning is already unique, and user can enable to print the function name, if they really want to.",
      "created_at": "2023-11-27T10:48:22Z",
      "updated_at": "2023-11-27T10:48:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1405973543",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405973543"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 186,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405973897",
      "pull_request_review_id": 1750142428,
      "id": 1405973897,
      "node_id": "PRRC_kwDOABII585TzXWJ",
      "diff_hunk": "@@ -170,12 +171,26 @@ static fs::path GetPidFile(const ArgsManager& args)\n #else\n         tfm::format(file, \"%d\\n\", getpid());\n #endif\n+        g_generated_pid = true;\n         return true;\n     } else {\n         return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\n     }\n }\n \n+static void RemovePidFile(NodeContext& node)\n+{\n+    if (!g_generated_pid) return;\n+    try {\n+        if (!fs::remove(GetPidFile(*node.args))) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "5eefe8d2433aa85f9dc866b7cf726ea436e6f80d",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: No need to pass `node`, when you only need args?",
      "created_at": "2023-11-27T10:48:38Z",
      "updated_at": "2023-11-27T10:48:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1405973897",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405973897"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 185,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405974198",
      "pull_request_review_id": 1750142428,
      "id": 1405974198,
      "node_id": "PRRC_kwDOABII585TzXa2",
      "diff_hunk": "@@ -170,12 +171,26 @@ static fs::path GetPidFile(const ArgsManager& args)\n #else\n         tfm::format(file, \"%d\\n\", getpid());\n #endif\n+        g_generated_pid = true;\n         return true;\n     } else {\n         return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\n     }\n }\n \n+static void RemovePidFile(NodeContext& node)\n+{\n+    if (!g_generated_pid) return;\n+    try {\n+        if (!fs::remove(GetPidFile(*node.args))) {\n+            LogPrintf(\"%s: Unable to remove PID file: File does not exist\\n\", __func__);\n+        }\n+    } catch (const fs::filesystem_error& e) {\n+        LogPrintf(\"%s: Unable to remove PID file: %s\\n\", __func__, fsbridge::get_filesystem_error_message(e));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "5eefe8d2433aa85f9dc866b7cf726ea436e6f80d",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "same",
      "created_at": "2023-11-27T10:48:47Z",
      "updated_at": "2023-11-27T10:48:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1405974198",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405974198"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405978974",
      "pull_request_review_id": 1750150988,
      "id": 1405978974,
      "node_id": "PRRC_kwDOABII585TzYle",
      "diff_hunk": "@@ -170,12 +171,26 @@ static fs::path GetPidFile(const ArgsManager& args)\n #else\n         tfm::format(file, \"%d\\n\", getpid());\n #endif\n+        g_generated_pid = true;\n         return true;\n     } else {\n         return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\n     }\n }\n \n+static void RemovePidFile(NodeContext& node)\n+{\n+    if (!g_generated_pid) return;\n+    try {\n+        if (!fs::remove(GetPidFile(*node.args))) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "5eefe8d2433aa85f9dc866b7cf726ea436e6f80d",
      "in_reply_to_id": 1405973897,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh yeah, that's nicer. Will fix.",
      "created_at": "2023-11-27T10:51:06Z",
      "updated_at": "2023-11-27T10:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1405978974",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405978974"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 185,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406231483",
      "pull_request_review_id": 1750549060,
      "id": 1406231483,
      "node_id": "PRRC_kwDOABII585T0WO7",
      "diff_hunk": "@@ -170,12 +171,26 @@ static fs::path GetPidFile(const ArgsManager& args)\n #else\n         tfm::format(file, \"%d\\n\", getpid());\n #endif\n+        g_generated_pid = true;\n         return true;\n     } else {\n         return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\n     }\n }\n \n+static void RemovePidFile(const ArgsManager& args)\n+{\n+    if (!g_generated_pid) return;\n+    try {\n+        if (!fs::remove(GetPidFile(args))) {\n+            LogPrintf(\"Unable to remove PID file: File does not exist\\n\");\n+        }\n+    } catch (const fs::filesystem_error& e) {\n+        LogPrintf(\"Unable to remove PID file: %s\\n\", fsbridge::get_filesystem_error_message(e));\n+    }",
      "path": "src/init.cpp",
      "position": 28,
      "original_position": 28,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: can be simplified\r\n\r\n```suggestion\r\n    if (std::error_code error; !fs::remove(GetPidFile(args), error)) {\r\n        std::string msg{error ? error.message() : \"File does not exist\"};\r\n        LogPrintf(\"Unable to remove PID file: %s\\n\", msg);\r\n    }\r\n```",
      "created_at": "2023-11-27T14:18:54Z",
      "updated_at": "2023-11-27T14:41:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1406231483",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406231483"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": 184,
      "original_start_line": 184,
      "start_side": "RIGHT",
      "line": 190,
      "original_line": 190,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406240555",
      "pull_request_review_id": 1750549060,
      "id": 1406240555,
      "node_id": "PRRC_kwDOABII585T0Ycr",
      "diff_hunk": "@@ -30,6 +30,10 @@ def run_test(self):\n         expected_msg = f\"Error: Cannot obtain a lock on data directory {datadir}. {self.config['environment']['PACKAGE_NAME']} is probably already running.\"\n         self.nodes[1].assert_start_raises_init_error(extra_args=[f'-datadir={self.nodes[0].datadir_path}', '-noserver'], expected_msg=expected_msg)\n \n+        self.log.info(\"Check that cookie and PID files are not deleted when attempting to start a second bitcoind using the same datadir\")",
      "path": "test/functional/feature_filelock.py",
      "position": 4,
      "original_position": 4,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "cookie file is not yet checked here, would leave that for the other pull",
      "created_at": "2023-11-27T14:25:09Z",
      "updated_at": "2023-11-27T14:41:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1406240555",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406240555"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 33,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406262955",
      "pull_request_review_id": 1750549060,
      "id": 1406262955,
      "node_id": "PRRC_kwDOABII585T0d6r",
      "diff_hunk": "@@ -170,12 +171,26 @@ static fs::path GetPidFile(const ArgsManager& args)\n #else\n         tfm::format(file, \"%d\\n\", getpid());\n #endif\n+        g_generated_pid = true;\n         return true;\n     } else {\n         return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\n     }\n }\n \n+static void RemovePidFile(const ArgsManager& args)",
      "path": "src/init.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "~#28784 stores the path in `static std::optional<std::string> g_generated_cookie`~. I don't have a particularly strong conviction in either direction, but I'd use the same approach for both. Storing the location of the file to be deleted seems a bit more robust, so I think I'd lean towards this approach:\r\n\r\n<details>\r\n<summary>git diff on 98ba5ba0cc</summary>\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex afa0ab1ee6..f2d74db13f 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -96,6 +96,7 @@\r\n #include <cstdio>\r\n #include <fstream>\r\n #include <functional>\r\n+#include <optional>\r\n #include <set>\r\n #include <string>\r\n #include <thread>\r\n@@ -155,7 +156,7 @@ static const char* DEFAULT_ASMAP_FILENAME=\"ip_asn.map\";\r\n  * The PID file facilities.\r\n  */\r\n static const char* BITCOIN_PID_FILENAME = \"bitcoind.pid\";\r\n-static bool g_generated_pid{false};\r\n+static std::optional<fs::path> g_generated_pid;\r\n \r\n static fs::path GetPidFile(const ArgsManager& args)\r\n {\r\n@@ -164,25 +165,26 @@ static fs::path GetPidFile(const ArgsManager& args)\r\n \r\n [[nodiscard]] static bool CreatePidFile(const ArgsManager& args)\r\n {\r\n-    std::ofstream file{GetPidFile(args)};\r\n+    const fs::path pid_path{GetPidFile(args)};\r\n+    std::ofstream file{pid_path};\r\n     if (file) {\r\n #ifdef WIN32\r\n         tfm::format(file, \"%d\\n\", GetCurrentProcessId());\r\n #else\r\n         tfm::format(file, \"%d\\n\", getpid());\r\n #endif\r\n-        g_generated_pid = true;\r\n+        g_generated_pid = pid_path;\r\n         return true;\r\n     } else {\r\n-        return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\r\n+        return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(pid_path), SysErrorString(errno)));\r\n     }\r\n }\r\n \r\n-static void RemovePidFile(const ArgsManager& args)\r\n+static void RemovePidFile()\r\n {\r\n     if (!g_generated_pid) return;\r\n     try {\r\n-        if (!fs::remove(GetPidFile(args))) {\r\n+        if (!fs::remove(g_generated_pid.value())) {\r\n             LogPrintf(\"Unable to remove PID file: File does not exist\\n\");\r\n         }\r\n     } catch (const fs::filesystem_error& e) {\r\n@@ -364,7 +366,7 @@ void Shutdown(NodeContext& node)\r\n     node.scheduler.reset();\r\n     node.kernel.reset();\r\n \r\n-    RemovePidFile(*node.args);\r\n+    RemovePidFile();\r\n \r\n     LogPrintf(\"%s: done\\n\", __func__);\r\n }\r\n\r\n```\r\n</details>\r\n",
      "created_at": "2023-11-27T14:39:49Z",
      "updated_at": "2023-11-27T14:48:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1406262955",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406262955"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 181,
      "original_line": 181,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406269146",
      "pull_request_review_id": 1750607604,
      "id": 1406269146,
      "node_id": "PRRC_kwDOABII585T0fba",
      "diff_hunk": "@@ -30,6 +30,10 @@ def run_test(self):\n         expected_msg = f\"Error: Cannot obtain a lock on data directory {datadir}. {self.config['environment']['PACKAGE_NAME']} is probably already running.\"\n         self.nodes[1].assert_start_raises_init_error(extra_args=[f'-datadir={self.nodes[0].datadir_path}', '-noserver'], expected_msg=expected_msg)\n \n+        self.log.info(\"Check that cookie and PID files are not deleted when attempting to start a second bitcoind using the same datadir\")",
      "path": "test/functional/feature_filelock.py",
      "position": 4,
      "original_position": 4,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "in_reply_to_id": 1406240555,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh, thanks. I wrote this commit on top as I was reviewing the other one, then cherry-picked and made it standalone. I guess this slipped through.",
      "created_at": "2023-11-27T14:44:09Z",
      "updated_at": "2023-11-27T14:44:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1406269146",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406269146"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 33,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406269624",
      "pull_request_review_id": 1750608358,
      "id": 1406269624,
      "node_id": "PRRC_kwDOABII585T0fi4",
      "diff_hunk": "@@ -170,12 +171,26 @@ static fs::path GetPidFile(const ArgsManager& args)\n #else\n         tfm::format(file, \"%d\\n\", getpid());\n #endif\n+        g_generated_pid = true;\n         return true;\n     } else {\n         return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\n     }\n }\n \n+static void RemovePidFile(const ArgsManager& args)",
      "path": "src/init.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "in_reply_to_id": 1406262955,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oh, looking at 28784 more closely it seems `g_generated_cookie` stores the cookie, not the path. My bad.",
      "created_at": "2023-11-27T14:44:29Z",
      "updated_at": "2023-11-27T14:44:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1406269624",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406269624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 181,
      "original_line": 181,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406275659",
      "pull_request_review_id": 1750617730,
      "id": 1406275659,
      "node_id": "PRRC_kwDOABII585T0hBL",
      "diff_hunk": "@@ -170,12 +171,26 @@ static fs::path GetPidFile(const ArgsManager& args)\n #else\n         tfm::format(file, \"%d\\n\", getpid());\n #endif\n+        g_generated_pid = true;\n         return true;\n     } else {\n         return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\n     }\n }\n \n+static void RemovePidFile(const ArgsManager& args)",
      "path": "src/init.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "in_reply_to_id": 1406262955,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I prefer the idea of storing a bool with whether it has been generated or not, and use the `{Get|Create|Remove}PidFile()` functions as necessary.",
      "created_at": "2023-11-27T14:48:33Z",
      "updated_at": "2023-11-27T14:48:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1406275659",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406275659"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 181,
      "original_line": 181,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406279982",
      "pull_request_review_id": 1750624728,
      "id": 1406279982,
      "node_id": "PRRC_kwDOABII585T0iEu",
      "diff_hunk": "@@ -170,12 +171,26 @@ static fs::path GetPidFile(const ArgsManager& args)\n #else\n         tfm::format(file, \"%d\\n\", getpid());\n #endif\n+        g_generated_pid = true;\n         return true;\n     } else {\n         return InitError(strprintf(_(\"Unable to create the PID file '%s': %s\"), fs::PathToString(GetPidFile(args)), SysErrorString(errno)));\n     }\n }\n \n+static void RemovePidFile(const ArgsManager& args)\n+{\n+    if (!g_generated_pid) return;\n+    try {\n+        if (!fs::remove(GetPidFile(args))) {\n+            LogPrintf(\"Unable to remove PID file: File does not exist\\n\");\n+        }\n+    } catch (const fs::filesystem_error& e) {\n+        LogPrintf(\"Unable to remove PID file: %s\\n\", fsbridge::get_filesystem_error_message(e));\n+    }",
      "path": "src/init.cpp",
      "position": 28,
      "original_position": 28,
      "commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "original_commit_id": "98ba5ba0cc0cb94b51595248041db972a9ef5a09",
      "in_reply_to_id": 1406231483,
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is passing error codes our preferred error handling technique, or just slightly shorter?\r\n\r\nI'd naturally opt for the former, and I think errors from it will be slightly more detailed, including an error msg instead of only error code (although it doesn't make much difference in this case), but can very easily be persuaded to switch to the latter if it's preferred...",
      "created_at": "2023-11-27T14:51:31Z",
      "updated_at": "2023-11-27T14:51:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28946#discussion_r1406279982",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1406279982"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28946"
        }
      },
      "start_line": 184,
      "original_start_line": 184,
      "start_side": "RIGHT",
      "line": 190,
      "original_line": 190,
      "side": "RIGHT"
    }
  ]
}