{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974",
    "id": 813866369,
    "node_id": "PR_kwDOABII584wgp2B",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/23974",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/23974.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/23974.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23974",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23974/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/fa68a6c2fc6754c160e0f98007785602201b3c47",
    "number": 23974,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Make blockstorage globals private members of BlockManager",
    "user": {
      "login": "MarcoFalke",
      "id": 6399679,
      "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/MarcoFalke",
      "html_url": "https://github.com/MarcoFalke",
      "followers_url": "https://api.github.com/users/MarcoFalke/followers",
      "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
      "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
      "repos_url": "https://api.github.com/users/MarcoFalke/repos",
      "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Globals aren't too nice because they hide dependencies, also they make testing harder.\r\n\r\nFix that by removing some.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      },
      {
        "id": 219890555,
        "node_id": "MDU6TGFiZWwyMTk4OTA1NTU=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Block%20storage",
        "name": "Block storage",
        "color": "000000",
        "default": false
      }
    ],
    "created_at": "2022-01-04T13:36:14Z",
    "updated_at": "2023-01-08T10:07:00Z",
    "closed_at": "2022-01-07T03:14:36Z",
    "mergeable_state": "unknown",
    "merged_at": "2022-01-07T03:14:36Z",
    "merge_commit_sha": "4ada74206a533e14312477f36d5443da5caebba0",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "MarcoFalke:2201-LessGlobals",
      "ref": "2201-LessGlobals",
      "sha": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 40046254,
        "node_id": "MDEwOlJlcG9zaXRvcnk0MDA0NjI1NA==",
        "name": "b-c",
        "full_name": "MarcoFalke/b-c",
        "owner": {
          "login": "MarcoFalke",
          "id": 6399679,
          "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/MarcoFalke",
          "html_url": "https://github.com/MarcoFalke",
          "followers_url": "https://api.github.com/users/MarcoFalke/followers",
          "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
          "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
          "repos_url": "https://api.github.com/users/MarcoFalke/repos",
          "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/MarcoFalke/b-c",
        "fork": true,
        "url": "https://api.github.com/repos/MarcoFalke/b-c",
        "archive_url": "https://api.github.com/repos/MarcoFalke/b-c/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/MarcoFalke/b-c/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/MarcoFalke/b-c/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/MarcoFalke/b-c/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/MarcoFalke/b-c/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/MarcoFalke/b-c/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/MarcoFalke/b-c/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/MarcoFalke/b-c/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/MarcoFalke/b-c/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/MarcoFalke/b-c/contributors",
        "deployments_url": "https://api.github.com/repos/MarcoFalke/b-c/deployments",
        "downloads_url": "https://api.github.com/repos/MarcoFalke/b-c/downloads",
        "events_url": "https://api.github.com/repos/MarcoFalke/b-c/events",
        "forks_url": "https://api.github.com/repos/MarcoFalke/b-c/forks",
        "git_commits_url": "https://api.github.com/repos/MarcoFalke/b-c/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/MarcoFalke/b-c/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/MarcoFalke/b-c/git/tags%7B/sha%7D",
        "git_url": "git://github.com/MarcoFalke/b-c.git",
        "issue_comment_url": "https://api.github.com/repos/MarcoFalke/b-c/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/MarcoFalke/b-c/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/MarcoFalke/b-c/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/MarcoFalke/b-c/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/MarcoFalke/b-c/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/MarcoFalke/b-c/languages",
        "merges_url": "https://api.github.com/repos/MarcoFalke/b-c/merges",
        "milestones_url": "https://api.github.com/repos/MarcoFalke/b-c/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/MarcoFalke/b-c/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/MarcoFalke/b-c/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/MarcoFalke/b-c/releases%7B/id%7D",
        "ssh_url": "git@github.com:MarcoFalke/b-c.git",
        "stargazers_url": "https://api.github.com/repos/MarcoFalke/b-c/stargazers",
        "statuses_url": "https://api.github.com/repos/MarcoFalke/b-c/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/MarcoFalke/b-c/subscribers",
        "subscription_url": "https://api.github.com/repos/MarcoFalke/b-c/subscription",
        "tags_url": "https://api.github.com/repos/MarcoFalke/b-c/tags",
        "teams_url": "https://api.github.com/repos/MarcoFalke/b-c/teams",
        "trees_url": "https://api.github.com/repos/MarcoFalke/b-c/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/MarcoFalke/b-c.git",
        "hooks_url": "https://api.github.com/repos/MarcoFalke/b-c/hooks",
        "svn_url": "https://github.com/MarcoFalke/b-c",
        "homepage": "",
        "language": "C++",
        "forks_count": 12,
        "stargazers_count": 25,
        "watchers_count": 25,
        "size": 207848,
        "default_branch": "master",
        "open_issues_count": 25,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T15:31:58Z",
        "created_at": "2015-08-01T12:42:47Z",
        "updated_at": "2023-05-28T20:12:34Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "af7fba3af788e91a460582351d40f8f5e2118760",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 672,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T20:20:41Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 142,
    "deletions": 135,
    "changed_files": 6,
    "commits": 7,
    "review_comments": 8,
    "comments": 2
  },
  "events": [
    {
      "event": "labeled",
      "id": 5840468651,
      "node_id": "LE_lADOABII585BK2a9zwAAAAFcHnqr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5840468651",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-04T13:37:07Z",
      "label": {
        "name": "Block storage",
        "color": "000000"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-04T14:57:52Z",
      "updated_at": "2022-01-04T14:57:52Z",
      "source": {
        "issue": {
          "id": 1052156700,
          "node_id": "PR_kwDOABII584udyuw",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23497",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23497/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23497/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23497/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/23497",
          "number": 23497,
          "state": "closed",
          "state_reason": null,
          "title": "Add `src/node/` and `src/wallet/` code to `node::` and `wallet::` namespaces",
          "body": "There are no code changes, this is just adding `namespace` and `using` declarations and `node::` or `wallet::` qualifiers in some places.\r\n\r\nMotivations for this change are:\r\n\r\n- To make it easier to see when node and wallet code is being accessed places where it shouldn't be. For example if GUI code is accessing node and wallet internals or if wallet and node code are referencing each other.\r\n- To make source code organization clearer ([#15732](https://github.com/bitcoin/bitcoin/issues/15732)), being able to know that `wallet::` code is in `src/wallet/`, `node::` code is in `src/node/`, `init::` code is in `src/init/`, `util::` code is in `src/util/`, etc.\r\n\r\nReviewing with `git log -p -n1 -U0 --word-diff-regex=.` can be helpful to verify this is only updating declarations, not changing code.",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 22,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23497",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/23497",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/23497.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/23497.patch"
          },
          "closed_at": "2022-01-11T10:13:20Z",
          "created_at": "2021-11-12T16:36:53Z",
          "updated_at": "2023-01-11T10:07:21Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1005418998,
      "node_id": "IC_kwDOABII58477Xn2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1005418998",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-05T06:32:59Z",
      "updated_at": "2022-01-05T23:12:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#23497](https://github.com/bitcoin/bitcoin/pull/23497) (Add `src/node/` and `src/wallet/` code to `node::` and `wallet::` namespaces by ryanofsky)\n* [#22932](https://github.com/bitcoin/bitcoin/pull/22932) (Guard CBlockIndex::nStatus by cs_main, require GetBlockPos/GetUndoPos to hold cs_main by jonatack)\n* [#15606](https://github.com/bitcoin/bitcoin/pull/15606) (assumeutxo by jamesob)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#issuecomment-1005418998",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23974"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhODhjZmQzZjk4OTZkNWI1NmVhNmMxMTFhMjNmOTBhNzkyNTNjMTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa88cfd3f9896d5b56ea6c111a23f90a79253c18",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa88cfd3f9896d5b56ea6c111a23f90a79253c18",
      "tree": {
        "sha": "26a4488d3c655f90a298ec31f0bd9c941c7ed384",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/26a4488d3c655f90a298ec31f0bd9c941c7ed384"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 26a4488d3c655f90a298ec31f0bd9c941c7ed384\nparent e31cdb0238f048343eeca9bc9502625f1ca8a0e1\nauthor MarcoFalke <falke.marco@gmail.com> 1641301470 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1641391648 +0100\n\nMove functions to BlockManager\n\nNeeded for a later commit\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUh3nAv/b+jxibGmP/lw8VjnY93I5t6NOmKy/gUCFqXXzV25GUbWY/0xj7VxGfqT\nrIKUV71ZzQ3xNTiD0j/touIAFldgYKnXVC8aQf35u9nwc0xRpEG8U6xaBiVO5I4t\nawHOfoXlC8sdN1hYF8tyhuZJfYOjxta8zdZsCudpP0/tUQ6y2A2f3AeIg6q2won9\nramBKTy1pD3BbCcwmv+7PzRFWfZmGkLID1Dpqsa+TkyzisfgF7GopumWXzrd3zvN\nNO2Qj4nhaFzJ8peBFLs4Zl3BdSIBGimCMZUf+5iT/pbEXvo2KBqDF6TdnJpQvg0s\n9WmyXe79EkgC3EfbAjh2x8Uuefdtcj78L0V8ASYY1TxYUFXt0ZMuYQdMQZ6OGU0D\nOyFgHC2A5UIc7phWEdyd95kBu8unZyUSI2SOKzpn3DgiZvSS2D94QRU9BFrnvj8q\nUnwA8v57TE668tkYnJoNRyJ2b1qnskoml7lN/oa65FVG46r8byYqoowL0NaPwsra\nXWi81y2S\n=olBl\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e31cdb0238f048343eeca9bc9502625f1ca8a0e1",
          "sha": "e31cdb0238f048343eeca9bc9502625f1ca8a0e1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e31cdb0238f048343eeca9bc9502625f1ca8a0e1"
        }
      ],
      "message": "Move functions to BlockManager\n\nNeeded for a later commit",
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T14:07:28Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-04T13:04:30Z"
      },
      "sha": "fa88cfd3f9896d5b56ea6c111a23f90a79253c18"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhNDY3ZjM5MTM5MTg3MDFjNzY1ZjliYzc1NDIwM2I0NTkxYjg5NGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa467f3913918701c765f9bc754203b4591b894f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa467f3913918701c765f9bc754203b4591b894f",
      "tree": {
        "sha": "18cabb6f5817b62a07e72bbd201aa778a24284b8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/18cabb6f5817b62a07e72bbd201aa778a24284b8"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 18cabb6f5817b62a07e72bbd201aa778a24284b8\nparent fa88cfd3f9896d5b56ea6c111a23f90a79253c18\nauthor MarcoFalke <falke.marco@gmail.com> 1641391616 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1641391686 +0100\n\nmove-only: Create WriteBlockIndexDB helper\n\nCan be reviewed with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUi4iAv9EuF28DhhfR5AoM67rk4RqdP4hvrNBfbIdmlxDuY4EZvxnAtXlInmLYYK\n5TPSGyOeE/Mw7iLFptpAMPrx9w4eKna6zehYUNpLNt6QthIMCG1gV7DoJtECQMs7\nZzsAeruPfDX6+B8T7zosjted56dnFzNYR/B6KhR5NtUnG8Jxo3jz+l8yuKdlNWZh\nCqa1UTpMolTZhFkcG4J4zNMmF9gNXMV6sNu5s1VDDdpzIs71fgivX5yLf9QD20EG\nrIDmri3vaHeQNjLng5AHZe2sI3EZcMSEhZqUP+1sK/RfPt/trIA6+wyh6wGNTVfl\n9mSOj1Kr59PqFi4PbL/K7oaXL+X2Wt09xqawt3XRhTBwjm2NExtYsR2h3HHwzT95\nPpcfoNDa+Jf/IkSz96C03LDvkRs5fhyUjwqL+SGUDgux2JgJmjT01GTmh2aFdxLI\nNcImPr7VS9CV7f3RNWUJ6Ccq0uZuwLY3hDJw9Z0b21urUCviNbJqoM5TDUGboM2X\nxESWlj1B\n=jww6\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa88cfd3f9896d5b56ea6c111a23f90a79253c18",
          "sha": "fa88cfd3f9896d5b56ea6c111a23f90a79253c18",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa88cfd3f9896d5b56ea6c111a23f90a79253c18"
        }
      ],
      "message": "move-only: Create WriteBlockIndexDB helper\n\nCan be reviewed with --color-moved=dimmed-zebra --color-moved-ws=ignore-all-space",
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T14:08:06Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T14:06:56Z"
      },
      "sha": "fa467f3913918701c765f9bc754203b4591b894f"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5846665454,
      "node_id": "HRFPE_lADOABII585BK2a9zwAAAAFcfQju",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5846665454",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-05T14:09:50Z"
    },
    {
      "event": "reviewed",
      "id": 844649111,
      "node_id": "PRR_kwDOABII584yWFKX",
      "url": null,
      "actor": null,
      "commit_id": "faaecfe7a8f6d57d45cc7d67caa9b1b72c1c4a22",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#pullrequestreview-844649111",
      "submitted_at": "2022-01-05T14:20:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhYjI2MjE3NGI5Njg1NGQyZGY1YmVlN2RhNTc4OTkwYzllOWNiMWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fab262174b96854d2df5bee7da578990c9e9cb1e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fab262174b96854d2df5bee7da578990c9e9cb1e",
      "tree": {
        "sha": "475886d4eeed03785c333733a6b625365d15e095",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/475886d4eeed03785c333733a6b625365d15e095"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 475886d4eeed03785c333733a6b625365d15e095\nparent fa467f3913918701c765f9bc754203b4591b894f\nauthor MarcoFalke <falke.marco@gmail.com> 1641396235 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1641395704 +0100\n\nMove blockstorage-related unload to BlockManager::Unload\n\nThis is a refactor and safe to do because:\n* UnloadBlockIndex calls ChainstateManager::Unload, which calls\n  BlockManager::Unload\n* Only unit tests call Unload directly\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUiVCQwApVnlzHXSzZyrT3i5HXQnXfmIUUBUSrUEBCcgP6F3z4D8mGWq9woLmfUD\nFjBAta6nSkLEyTs9eDJm1RyvkXEuva67VISFGJw8nS1dh8LL5S8hWHkDGXQjn3xo\nAa47kgwWUTm47X/+bNvN5Jk6V/SeVYjsb6T+ZEt11LoOrMpQzLApBwbndeMwQCPD\nf656h21GaZwQ4C7SQc7N6j3t018MjJzgMg+N4kfotoIKR7a2cE79ORqU/AIHSuLJ\nkJ9+l4L1FJGxpGfd47qZwQxTsJF68JQ0/L4wMYiD+WSU67zlj9oB51WKTPiXjrUe\ncrvXb6R+mP5Ie5Qlkr4HLXD5xtEtWocM+R1ZKxiKb5Fcz6qXZzWmPVzm/5hJphRq\npjgw5OM+vUHnNagKxKNUdBRkgQKLWMtj2eEUcDxnDfmdqnsd7uywpmLfqLEITAA0\nwNwWXlEC7XsW8kIhJvK4gkJMIOMe1sfEoEZgAZ59pv3MeddynRqgC8CJ2AT0BAja\n6rmu96oA\n=MwoV\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa467f3913918701c765f9bc754203b4591b894f",
          "sha": "fa467f3913918701c765f9bc754203b4591b894f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fa467f3913918701c765f9bc754203b4591b894f"
        }
      ],
      "message": "Move blockstorage-related unload to BlockManager::Unload\n\nThis is a refactor and safe to do because:\n* UnloadBlockIndex calls ChainstateManager::Unload, which calls\n  BlockManager::Unload\n* Only unit tests call Unload directly",
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T15:15:04Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T15:23:55Z"
      },
      "sha": "fab262174b96854d2df5bee7da578990c9e9cb1e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhZDM4MWIyZjhlMWJlYjE4Zjc0OGZiZWI4MjBlNjM1NDViOWIwZmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad381b2f8e1beb18f748fbeb820e63545b9b0fd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fad381b2f8e1beb18f748fbeb820e63545b9b0fd",
      "tree": {
        "sha": "4c22b933d94499460650622c4afcc01d67643246",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4c22b933d94499460650622c4afcc01d67643246"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 4c22b933d94499460650622c4afcc01d67643246\nparent fab262174b96854d2df5bee7da578990c9e9cb1e\nauthor MarcoFalke <falke.marco@gmail.com> 1641396343 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1641395781 +0100\n\ntest: Load genesis block to allow flush\n\nThis is needed to turn globals into member variables. Otherwise, this\nwill lead to issues:\n\nruntime error: reference binding to null pointer of type 'CBlockFileInfo'\n    #0 in std::vector<CBlockFileInfo, std::allocator<CBlockFileInfo> >::operator[](unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/stl_vector.h:1046:2\n    #1 in BlockManager::FlushBlockFile(bool, bool) src/node/blockstorage.cpp:540:47\n    #2 in CChainState::FlushStateToDisk(BlockValidationState&, FlushStateMode, int) src/validation.cpp:2262:28\n    #3 in CChainState::ResizeCoinsCaches(unsigned long, unsigned long) src/validation.cpp:4414:15\n    #4 in validation_chainstate_tests::validation_chainstate_resize_caches::test_method() src/test/validation_chainstate_tests.cpp:66:12\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUiv0wwAiIkWaMsicQL6UtgmlMb7tpklO+Gc+bCMqPnu+aVR/HZ6nUd2F4qJHHGH\n/TTWt3amO+yVlWuZUqOeoLicbIlvFlXhPQYDf/j1symS0MXbDPDxF8NYXbwfQtJG\nJ4zxNjKnnXwKxAaVpJE/p7n5pbkV7UWe4+RnaqQNP07cXarIFypr/Qe1ixJp3LwI\nm1ArOmMGPflRyS2dSp2EQEwammKe8YPf/SA2REtas+cGK6rMQe6nvnknIiVjMulU\nd9Q1sqJrIYzSiaDVADCmPtB9rXZyZ1VQPRacPasPGV/5poy5W6Ym8JL6XOtM/ewi\nx8pnfV3fQyKoUyzedM3xMD1oZS5fX+5TDPuTaFVgSygh//RfQFkLGzIq9VvtS1dS\nNviF7eTcZ4Nlq9HX1Py1QjCRF+5+pA5ZinAc88YB0FKQOsJKSDF67ZFVe3p6wmL1\ncm9P9FJVSzp1XIYG9tbMvLR5P0o+WmqWiit9udPY9uK82vQY8rvyEv2B9gzZ295J\nEao/XR5j\n=1CjD\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fab262174b96854d2df5bee7da578990c9e9cb1e",
          "sha": "fab262174b96854d2df5bee7da578990c9e9cb1e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fab262174b96854d2df5bee7da578990c9e9cb1e"
        }
      ],
      "message": "test: Load genesis block to allow flush\n\nThis is needed to turn globals into member variables. Otherwise, this\nwill lead to issues:\n\nruntime error: reference binding to null pointer of type 'CBlockFileInfo'\n    #0 in std::vector<CBlockFileInfo, std::allocator<CBlockFileInfo> >::operator[](unsigned long) /usr/bin/../lib/gcc/x86_64-linux-gnu/11/../../../../include/c++/11/bits/stl_vector.h:1046:2\n    #1 in BlockManager::FlushBlockFile(bool, bool) src/node/blockstorage.cpp:540:47\n    #2 in CChainState::FlushStateToDisk(BlockValidationState&, FlushStateMode, int) src/validation.cpp:2262:28\n    #3 in CChainState::ResizeCoinsCaches(unsigned long, unsigned long) src/validation.cpp:4414:15\n    #4 in validation_chainstate_tests::validation_chainstate_resize_caches::test_method() src/test/validation_chainstate_tests.cpp:66:12",
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T15:16:21Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T15:25:43Z"
      },
      "sha": "fad381b2f8e1beb18f748fbeb820e63545b9b0fd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhYThjMmQ3ZDc1ZjhkOTc4MjcwOWU3M2UwMGUzNTg1MWUyMzMzOTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faa8c2d7d75f8d9782709e73e00e35851e233392",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/faa8c2d7d75f8d9782709e73e00e35851e233392",
      "tree": {
        "sha": "cb2519b5de811f7ad2efe4279a2ba49081b00afa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cb2519b5de811f7ad2efe4279a2ba49081b00afa"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree cb2519b5de811f7ad2efe4279a2ba49081b00afa\nparent fad381b2f8e1beb18f748fbeb820e63545b9b0fd\nauthor MarcoFalke <falke.marco@gmail.com> 1641396399 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1641395842 +0100\n\ndoc: Clarify nPruneAfterHeight for signet\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUjKZAv+PDpIAPOiO/OqJZwscUVyo2d4BixDGtKJPIfritzqTONAuO7dZGd0DcwN\nrTvcBpxhyG6MPrymQKTLxsfS4mbTh/VB0Kv66tFHwIgtylv9bMGbr3umlL8KkwHX\nmAclHW5MNOKcOaddjkjIUiwlSXeC8nZsDEExt+w9cgMqkM6c92RCOqNWA8EeVuKz\nn9LBNWnrdrVTXwWlaYMqWXhLg9O7Ul+QQrbg/iiWpn6IsZgMmYr2Fj+q53rowplr\n9cgIbx6EsWpwc1Zc6qJsb6e8Gnumyf7V8qNcF14yWQeNBwcx9f5qVL0A+bG19BBV\nWT1T6h5AZ0/kxfL1pFSjR6hGl0gj20r7XZQpWsXGsuH93kHZ3eWX1mJ82kNjeuyM\nwK4AQTvAq/GCkI/szL1icR7V9u98PUy5V+vxXOuDs8EBmYFNVF7Y6b1LdWcQUZzO\n1XNAdf0BpiSmU3SPxaY2wH6C65+6LNHBlQzjdFrbzmFmzcclhtKHvlPD4P2wgauM\nYuHZ7qxU\n=J26K\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fad381b2f8e1beb18f748fbeb820e63545b9b0fd",
          "sha": "fad381b2f8e1beb18f748fbeb820e63545b9b0fd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fad381b2f8e1beb18f748fbeb820e63545b9b0fd"
        }
      ],
      "message": "doc: Clarify nPruneAfterHeight for signet",
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T15:17:22Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T15:26:39Z"
      },
      "sha": "faa8c2d7d75f8d9782709e73e00e35851e233392"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhY2QzZGYyMWYzNDRkZDg0ZTVmMjg4NjIwNTY3MDBjMWZkZWQxN2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/facd3df21f344dd84e5f28862056700c1fded17c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/facd3df21f344dd84e5f28862056700c1fded17c",
      "tree": {
        "sha": "c6d17c7d72a95db54574f88ce3d44ab6d4e61bc1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c6d17c7d72a95db54574f88ce3d44ab6d4e61bc1"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree c6d17c7d72a95db54574f88ce3d44ab6d4e61bc1\nparent faa8c2d7d75f8d9782709e73e00e35851e233392\nauthor MarcoFalke <falke.marco@gmail.com> 1641304834 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1641395930 +0100\n\nMake blockstorage globals private members of BlockManager\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUhXDwwAkBTqMLY4aNjWLKRqm3V48vLAWxsDhNSP1iboNOLUYiJTlf0FUvjIGEUq\nOgkUw7fcU6Dy4B/xw7IEpCBiSza1siLxDXAmZ/uHDB0EUDGgpQTX8/rmmJ6Nzqtd\nHPdq22fy1yov0lCY9LcRejF2RF+0benArThUOJX/vSP23w4wVx0xMf7HnEVP90od\nxboQKe9eS2WmALnWno5QQ4cZUMnAhPXkF4IJcvdMmXOhJ5VbKfjYAXH9wuIPSNda\nVH++KwfhI8KTkdiQcOKrePYzLwJUOcrUwsV/4LrVii6or/Qdcl3o8MFT3lN2jt/W\nTPK2x1Lzwa3zIipac2eFNSzQ76tCwGAvBKUhsSw5B+yopMnwkwBbWp1Cu8FDN8gZ\nLYWymb2y/fA6GKKmrtslIxftfKya34QikUCEPoDxG0jbJQ8NNeIyh2iqT3fkNwVU\nRgnmQR5dUOZ+2DFv98VfhBdGjLU4tz2baPTB0v8TIwRC/iSuYr7Gp/oaT02FtqIJ\nt88pVGlL\n=pujM\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/faa8c2d7d75f8d9782709e73e00e35851e233392",
          "sha": "faa8c2d7d75f8d9782709e73e00e35851e233392",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/faa8c2d7d75f8d9782709e73e00e35851e233392"
        }
      ],
      "message": "Make blockstorage globals private members of BlockManager",
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T15:18:50Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-04T14:00:34Z"
      },
      "sha": "facd3df21f344dd84e5f28862056700c1fded17c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhNjhhNmMyZmM2NzU0YzE2MGUwZjk4MDA3Nzg1NjAyMjAxYjNjNDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fa68a6c2fc6754c160e0f98007785602201b3c47",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fa68a6c2fc6754c160e0f98007785602201b3c47",
      "tree": {
        "sha": "2e39fa8c8d8ad38a22c56a470b68c585dcad664a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2e39fa8c8d8ad38a22c56a470b68c585dcad664a"
      },
      "verification": {
        "verified": false,
        "reason": "no_user",
        "payload": "tree 2e39fa8c8d8ad38a22c56a470b68c585dcad664a\nparent facd3df21f344dd84e5f28862056700c1fded17c\nauthor MarcoFalke <falke.marco@gmail.com> 1641393856 +0100\ncommitter MarcoFalke <falke.marco@gmail.com> 1641395951 +0100\n\nscripted-diff: Rename touched member variables\n\n-BEGIN VERIFY SCRIPT-\n\n ren() { sed -i \"s/\\<$1\\>/$2/g\" $( git grep -l \"$1\" ./src/ ) ; }\n\n ren vinfoBlockFile     m_blockfile_info\n ren nLastBlockFile     m_last_blockfile\n ren fCheckForPruning   m_check_for_pruning\n ren setDirtyBlockIndex m_dirty_blockindex\n ren setDirtyFileInfo   m_dirty_fileinfo\n\n-END VERIFY SCRIPT-\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQGzBAABCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\npUgoZgwAx3vLlfmlpgIc8B52XMhT7s0Ifx/FqwAUfitGHBWyRJhvupL5VMV2bUW9\nwegvVD0MQCt96yDdaelUpTndYSVX+H8ch8TaJTWJSrYJxyvpPDeH3id1tI6rtvSl\nFaRYuiFPteVyU3K6+W9DbwGLsq+Q/apHfQgJJ17/faTRjKeRj8pZkFZAyh8iDgiv\nt50jqdVhpjemerNJ3OycfadAhKPhHR4iLG/qN3go4UDApTinrjkn1540h707GqrU\nmjMumtZaSm4dNkjNe3RvtwKVe9aL1HdCekWvIv4MSnaXOY2Idql05ipsfaTwcyaU\n4iv1B2cJfaIsE172+lQPoVm84DTJT4U7Y1sthOdp6t8xIrDwqEhXTdLaKpquvc4D\nB0quaLhyk89lBfglBeRQh9Ozm4MzaXXAhI4w3vtgNQDFOEmQjhmKPrH+CN/tAb/g\nEmwTXittWftnFfqcte7D3xei9LBIaiqN5oxi5f8TPi8oCqTl/BWBRX/Unhegz30D\n3BBHuodH\n=tL/7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/facd3df21f344dd84e5f28862056700c1fded17c",
          "sha": "facd3df21f344dd84e5f28862056700c1fded17c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/facd3df21f344dd84e5f28862056700c1fded17c"
        }
      ],
      "message": "scripted-diff: Rename touched member variables\n\n-BEGIN VERIFY SCRIPT-\n\n ren() { sed -i \"s/\\<$1\\>/$2/g\" $( git grep -l \"$1\" ./src/ ) ; }\n\n ren vinfoBlockFile     m_blockfile_info\n ren nLastBlockFile     m_last_blockfile\n ren fCheckForPruning   m_check_for_pruning\n ren setDirtyBlockIndex m_dirty_blockindex\n ren setDirtyFileInfo   m_dirty_fileinfo\n\n-END VERIFY SCRIPT-",
      "committer": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T15:19:11Z"
      },
      "author": {
        "name": "MarcoFalke",
        "email": "falke.marco@gmail.com",
        "date": "2022-01-05T14:44:16Z"
      },
      "sha": "fa68a6c2fc6754c160e0f98007785602201b3c47"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5847098198,
      "node_id": "HRFPE_lADOABII585BK2a9zwAAAAFcg6NW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5847098198",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-05T15:19:38Z"
    },
    {
      "event": "labeled",
      "id": 5847161183,
      "node_id": "LE_lADOABII585BK2a9zwAAAAFchJlf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5847161183",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-05T15:29:37Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "dongcarl",
        "id": 3445290,
        "node_id": "MDQ6VXNlcjM0NDUyOTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dongcarl",
        "html_url": "https://github.com/dongcarl",
        "followers_url": "https://api.github.com/users/dongcarl/followers",
        "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
        "organizations_url": "https://api.github.com/users/dongcarl/orgs",
        "repos_url": "https://api.github.com/users/dongcarl/repos",
        "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dongcarl/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-05T17:06:36Z",
      "updated_at": "2022-01-05T17:06:36Z",
      "source": {
        "issue": {
          "id": 954220384,
          "node_id": "MDExOlB1bGxSZXF1ZXN0Njk4MTUwMTI0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22564",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22564/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22564/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22564/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22564",
          "number": 22564,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Move mutable globals cleared in `::UnloadBlockIndex` to `BlockManager`",
          "body": "Fixes #22964\r\n\r\n-----\r\n\r\nThis is a small part of the work to accomplish what I described in 972c5166ee685447a6d4bf5e501b07a0871fba85:\r\n```\r\nOver time, we should probably move these mutable global state variables\r\ninto ChainstateManager or CChainState so it's easier to reason about\r\ntheir lifecycles.\r\n```\r\n\r\n`::UnloadBlockIndex` manually resets a subset of our mutable globals in addition to unloading the `ChainstateManager` and clearing the mempool. The need for this manual reset (AFAICT) arises out of the fact that many of these globals are closely related to the block index (hence `::UnloadBlockIndex`), and need to be reset with it.\r\n\r\nI've shot this \"manual reset\" gun at my foot several times while doing the de-globalize chainman work.\r\n\r\nThankfully, now that we have a `BlockManager` class that owns the block index, these globals should be moved under that class so that they can live and die with the block index. These moves, along with making the block index non-heap-based, eliminates:\r\n1. https://github.com/bitcoin/bitcoin/commit/3585b521392c5b2c855c3ba6dc9b7d2a171b3710 The need to reason about when we need to manually call `::UnloadBlockIndex` (this decision can at times seem almost arbitrary)\r\n2. https://github.com/bitcoin/bitcoin/commit/f741623c25455c20bff9eb1ddd10a4ac84dc5655 The need to have an `::UnloadBlockIndex` or explicit `~ChainstateManager` at all",
          "user": {
            "login": "dongcarl",
            "id": 3445290,
            "node_id": "MDQ6VXNlcjM0NDUyOTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dongcarl",
            "html_url": "https://github.com/dongcarl",
            "followers_url": "https://api.github.com/users/dongcarl/followers",
            "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
            "organizations_url": "https://api.github.com/users/dongcarl/orgs",
            "repos_url": "https://api.github.com/users/dongcarl/repos",
            "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/dongcarl/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/54",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/54",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/54/labels",
            "id": 7150037,
            "node_id": "MI_kwDOABII584AbRnV",
            "number": 54,
            "state": "closed",
            "title": "24.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 159,
            "created_at": "2021-09-14T08:27:02Z",
            "updated_at": "2022-11-29T15:44:44Z",
            "closed_at": "2022-11-29T15:44:44Z"
          },
          "locked": true,
          "comments": 38,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22564",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22564",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22564.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22564.patch"
          },
          "closed_at": "2022-04-28T10:17:08Z",
          "created_at": "2021-07-27T19:58:39Z",
          "updated_at": "2023-04-28T09:59:12Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 845025324,
      "node_id": "PRR_kwDOABII584yXhAs",
      "url": null,
      "actor": null,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK fa68a6c2fc6754c160e0f98007785602201b3c47. Nice changes!",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#pullrequestreview-845025324",
      "submitted_at": "2022-01-05T20:17:56Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-06T05:31:01Z",
      "updated_at": "2022-01-06T05:31:01Z",
      "source": {
        "issue": {
          "id": 992389027,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NzMwNzI4MzAy",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22932",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22932/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22932/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22932/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22932",
          "number": 22932,
          "state": "closed",
          "state_reason": null,
          "title": "Add CBlockIndex lock annotations, guard nStatus/nFile/nDataPos/nUndoPos by cs_main",
          "body": "Issues:\r\n\r\n- `CBlockIndex` member functions `GetBlockPos()`, `GetUndoPos()`, `IsAssumedValid()`, `RaiseValidity()`, and `IsValid()` and block storage functions `WriteUndoDataForBlock()` and `IsBlockPruned()` are missing thread safety lock annotations to help ensure that they are called with mutex cs_main to avoid bugs like #22895. Doing this also enables the next step:\r\n\r\n- `CBlockIndex::nStatus` may be racy, i.e. potentially accessed by multiple threads, see #17161. A solution is to guard it by cs_main, along with fellow data members `nFile`, `nDataPos` and `nUndoPos`.\r\n\r\nThis pull:\r\n\r\n- adds thread safety lock annotations for the functions listed above\r\n- guards `CBlockIndex::nStatus`, `nFile`, `nDataPos` and `nUndoPos` by cs_main\r\n\r\nHow to review and test:\r\n- debug build with clang and verify there are no `-Wthread-safety-analysis` warnings\r\n- review the code to verify each annotation or lock is necessary and sensible, or if any are missing\r\n- look for whether taking a lock can be replaced by a lock annotation instead\r\n- for more information about Clang thread safety analysis, see\r\n    - https://clang.llvm.org/docs/ThreadSafetyAnalysis.html\r\n    - https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#lockingmutex-usage-notes\r\n    - https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#threads-and-synchronization\r\n\r\nMitigates/potentially closes #17161.",
          "user": {
            "login": "jonatack",
            "id": 2415484,
            "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonatack",
            "html_url": "https://github.com/jonatack",
            "followers_url": "https://api.github.com/users/jonatack/followers",
            "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
            "organizations_url": "https://api.github.com/users/jonatack/orgs",
            "repos_url": "https://api.github.com/users/jonatack/repos",
            "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonatack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 219890555,
              "node_id": "MDU6TGFiZWwyMTk4OTA1NTU=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Block%20storage",
              "name": "Block storage",
              "color": "000000",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 20,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22932",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22932",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22932.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22932.patch"
          },
          "closed_at": "2022-01-27T09:58:01Z",
          "created_at": "2021-09-09T16:00:41Z",
          "updated_at": "2023-01-29T10:10:19Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-06T07:32:36Z",
      "updated_at": "2022-01-06T07:32:36Z",
      "source": {
        "issue": {
          "id": 421531882,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MjYxNTYxNTQ3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15606",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15606/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15606/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15606/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/15606",
          "number": 15606,
          "state": "closed",
          "state_reason": null,
          "title": "assumeutxo",
          "body": "**See the proposal for assumeutxo [here](https://github.com/jamesob/assumeutxo-docs/tree/2019-04-proposal/proposal).**\r\n\r\nTesting instructions can be found below the \"Progress\" section.\r\n\r\n---\r\n\r\n### Progress\r\n\r\nAll items here have corresponding commits here, but are unchecked if they haven't been merged yet.\r\n\r\n- [x] **Chainstate interface**\r\n  - https://github.com/bitcoin/bitcoin/pull/15976\r\n- [x] **Localize chainstate data**\r\n  - https://github.com/bitcoin/bitcoin/pull/16443\r\n- [x] **Share block data**\r\n  - https://github.com/bitcoin/bitcoin/pull/16194\r\n- [x] **Deglobalize chainstate**\r\n  - https://github.com/bitcoin/bitcoin/pull/15948\r\n- [x] **UpdateTip/CheckBlockIndex** modifications\r\n  - https://github.com/bitcoin/bitcoin/pull/21526\r\n- [x] **ChainstateManager**\r\n  - https://github.com/bitcoin/bitcoin/pull/17737\r\n- [x] **Mempool**\r\n  - https://github.com/bitcoin/bitcoin/pull/22415\r\n- [x] **LoadBlockIndex**\r\n  - https://github.com/bitcoin/bitcoin/pull/23174\r\n- [x] **Init/teardown**\r\n  - https://github.com/bitcoin/bitcoin/pull/24232\r\n  - https://github.com/bitcoin/bitcoin/pull/25667\r\n  - https://github.com/bitcoin/bitcoin/pull/25740\r\n- [x] **Wallet**: includes avoiding rescans when assumed-valid block data is in use\r\n  - https://github.com/bitcoin/bitcoin/pull/23997\r\n  - https://github.com/bitcoin/bitcoin/pull/26282\r\n- [ ] **P2P**: minor changes are made to `init.cpp` and `net_processing.cpp` to make simultaneous IBD across multiple chainstates work.\r\n  - #24008 \r\n- [ ] **Pruning**: implement correct pruning behavior when using a background chainstate\r\n- [ ] **Blockfile separation**: to prevent \"fragmentation\" in blockfile storage, have background chainstates use separate blockfiles from active snapshot chainstates to avoid interleaving heights and impairing pruning.\r\n- [ ] **Indexing**: all existing `CValidationInterface` events are given with an additional parameter, ChainstateRole, and all indexers ignore events from ChainstateRole::ASSUMEDVALID so that indexation only happens sequentially.\r\n- [ ] Raise error when both `-reindex` and assumeutxo are in use.\r\n- [ ] **RPC**: introduce RPC commands `dumptxoutset`, `loadtxoutset`, and (the probably temporary) `monitorsnapshot`.\r\n  - https://github.com/bitcoin/bitcoin/pull/16899\r\n- [ ] **Release docs & first assumeutxo commitment**: add notes and a particular assumeutxo hash value for first AU-enabled release.\r\n  - This will complete the project and allow use of UTXO snapshots for faster node bootstrap.\r\n- [ ] *(optional)* **Coinscache optimization**: allow flushing chainstate data without emptying the coins cache; results in better performance after UTXO snapshot load.\r\n  - https://github.com/bitcoin/bitcoin/pull/17487\r\n  - https://github.com/bitcoin/bitcoin/pull/27008\r\n\r\n---\r\n\r\n### Testing\r\n\r\n#### For fun (~5min)\r\n\r\nIf you want to do a quick test, you can run `./contrib/devtools/test_utxo_snapshots.sh` and follow the instructions. This is mostly obviated by the functional tests, though.\r\n\r\n#### For real (longer)\r\n\r\nIf you'd like to experience a real usage of assumeutxo, you can do that too.\r\nI've cut a new snapshot at height 788'000 (http://img.jameso.be/utxo-788000.dat - but you can do it yourself with `./contrib/devtools/utxo_snapshot.sh` if you want). Download that, and then create a datadir for testing:\r\n```sh\r\n$ cd ~/src/bitcoin  # or whatever\r\n\r\n# get the snapshot\r\n$ curl http://img.jameso.be/utxo-788000.dat > utxo-788000.dat\r\n\r\n# you'll want to do this if you like copy/pasting \r\n$ export AU_DATADIR=/home/${USER}/au-test # or wherever\r\n\r\n$ mkdir ${AU_DATADIR}\r\n$ vim ${AU_DATADIR}/bitcoin.conf\r\n\r\ndbcache=8000  # or, you know, something high\r\nblockfilterindex=1\r\ncoinstatsindex=1\r\nprune=3000\r\nlogthreadnames=1\r\n```\r\nObtain this branch, build it, and then start bitcoind:\r\n```sh\r\n$ git remote add jamesob https://github.com/jamesob/bitcoin\r\n$ git fetch jamesob utxo-dumpload-compressed\r\n$ git checkout jamesob/utxo-dumpload-compressed\r\n\r\n$ ./configure $conf_args && make  # (whatever you like to do here)\r\n\r\n# start 'er up and watch the logs\r\n$ ./src/bitcoind -datadir=${AU_DATADIR}\r\n```\r\nThen, in some other window, load the snapshot\r\n```sh\r\n$ ./src/bitcoin-cli -datadir=${AU_DATADIR} loadtxoutset $(pwd)/utxo-788000.dat\r\n```\r\n\r\nYou'll see some log messages about headers retrieval and waiting to see the snapshot in the headers chain. Once you get the full headers chain, you'll spend a decent amount of time (~10min) loading the snapshot, checking it, and flushing it to disk. After all that happens, you should be syncing to tip in pretty short order, and you'll see the occasional `[background validation]` log message go by.\r\n\r\nIn yet another window, you can check out chainstate status with\r\n```sh\r\n$ ./src/bitcoin-cli -datadir=${AU_DATADIR} getchainstates\r\n```\r\nas well as usual favorites like `getblockchaininfo`.\r\n\r\n---\r\n\r\n### Original change description\r\n\r\nFor those unfamiliar with assumeutxo, here's a brief summary from [the issue](https://github.com/bitcoin/bitcoin/issues/15605) (where any conceptual discussion not specific to this implementation should happen):\r\n\r\n> assumeutxo would be a way to initialize a node using a headers chain and a serialized version of the UTXO state which was generated from another node at some block height. A client making use of this UTXO \"snapshot\" would specify a hash and expect the content of the resulting UTXO set to yield this hash after deserialization. \r\n> \r\n> This would allow users to bootstrap a usable pruned node & wallet far more quickly (and with less disk usage) than waiting for a full initial block download to complete, since we only have to sync blocks between the base of the snapshot and the current network tip. Needless to say this is at expense of accepting a different trust model, though how different this really ends up being from `assumevalid` in effect is worth debate.\r\n\r\nIn short, this is an interesting change because it would allow nodes to get up and running within minutes given a ~3GB file (at time of writing) under an almost identical trust model to assumevalid.\r\n\r\nIn this implementation, I add a few RPC commands: `dumptxoutset` creates a UTXO snapshot and writes it to disk, and `loadtxoutset` intakes a snapshot from disk, constructs and activates chainstate based on it, and continues a from-scratch initial block download in the background for the sole purpose of validating the snapshot. Once the snapshot is validated, we throw away the chainstate used for background validation.\r\n\r\nThe assumeutxo procedure as implemented is as follows:\r\n\r\n1. A UTXO snapshot is loaded with the `loadtxoutset <path>` RPC command.\r\n1. A new chainstate (`CChainState`) is initialized using `ChainstateManager::ActivateSnapshot()`:\r\n   1. The serialized UTXO data is read in and various sanity checks are performed, e.g. compare expected coin count, recompute the hash and compare it with assumeutxo hash in source code.\r\n   1. We \"fast forward\" `new_chainstate->m_chain` to have a tip at the base of the snapshot (with or without block data). Lacking block data, we fake the `nTx` counts of the constituent `CBlockIndex` entries.\r\n   1. `LoadChainTip()` is called on the new snapshot and it is installed as our active chainstate.\r\n1. The new assumed-valid chainstate is now our active, and so that enters IBD until it is synced to the network's tip. Presumably the snapshot would be taken relatively close to the current tip but far enough away to avoid meaningful reorgs, say 10,000 blocks deep.\r\n1. Once the active chainstate is out of IBD, our old validation chain continues IBD \"in the background\" while the active chainstate services requests from most of the system.\r\n1. Once the background validation chainstate reaches a height equal the base of the snapshot, we take the hash of its UTXO set and ensure it equals the expected hash based on the snapshot. If the hashes are equivalent, we delete the validation chainstate and move on without event; if they aren't, we log loudly and fall back to the validation chainstate (we should probably just shut down).\r\n\r\nThe implicit assumption is that the background validation chain will always be a subset of the assumed-valid snapshot chain while the latter is active. We don't properly handle reorgs that go deeper than the base of the snapshot.\r\n\r\n### Changes (already merged/outdated)\r\n\r\n![chainstate-beforeafter (1)](https://user-images.githubusercontent.com/73197/54435797-a16b0780-4707-11e9-89c3-c90b5686804d.png)\r\n \r\nThe crux of this change is in removing any assumptions in the codebase that there is a single chainstate, i.e. any references to global variables `chainActive`, `pcoinsTip`, et al. need to be replaced with functions that return the relevant chainstate data at that moment in time. This change also takes `CChainState` to its logical conclusion by making it more self-contained - any references to globals like `chainActive` are removed with class-local references (`m_chain`).\r\n\r\nA few minor notes on the implementation:\r\n\r\n- When we attempt to load a wallet with a BestBlock locator lower than the base of a snapshot and the snapshot has not yet been validated, we refuse to load the wallet.\r\n\r\n- For additional notes, see [the new assumeutxo docs](https://github.com/jamesob/bitcoin/blob/utxo-dumpload-compressed/doc/assumeutxo.md).",
          "user": {
            "login": "jamesob",
            "id": 73197,
            "node_id": "MDQ6VXNlcjczMTk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jamesob",
            "html_url": "https://github.com/jamesob",
            "followers_url": "https://api.github.com/users/jamesob/followers",
            "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
            "organizations_url": "https://api.github.com/users/jamesob/orgs",
            "repos_url": "https://api.github.com/users/jamesob/repos",
            "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jamesob/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            },
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 66,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15606",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/15606",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/15606.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/15606.patch"
          },
          "closed_at": "2023-05-08T15:09:24Z",
          "created_at": "2019-03-15T13:58:22Z",
          "updated_at": "2023-05-08T15:09:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1006706769,
      "node_id": "IC_kwDOABII5848ASBR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1006706769",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-06T16:03:07Z",
      "updated_at": "2022-01-06T16:04:03Z",
      "author_association": "MEMBER",
      "body": "ACK fa68a6c2fc6754c160e0f98007785602201b3c47",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#issuecomment-1006706769",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23974"
    },
    {
      "event": "merged",
      "id": 5855718808,
      "node_id": "ME_lADOABII585BK2a9zwAAAAFdBy2Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5855718808",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4ada74206a533e14312477f36d5443da5caebba0",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/4ada74206a533e14312477f36d5443da5caebba0",
      "created_at": "2022-01-07T03:14:36Z"
    },
    {
      "event": "closed",
      "id": 5855718812,
      "node_id": "CE_lADOABII585BK2a9zwAAAAFdBy2c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5855718812",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-07T03:14:36Z"
    },
    {
      "event": "reviewed",
      "id": 846558755,
      "node_id": "PRR_kwDOABII584ydXYj",
      "url": null,
      "actor": null,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#pullrequestreview-846558755",
      "submitted_at": "2022-01-07T12:17:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
    },
    {
      "event": "reviewed",
      "id": 846615293,
      "node_id": "PRR_kwDOABII584ydlL9",
      "url": null,
      "actor": null,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#pullrequestreview-846615293",
      "submitted_at": "2022-01-07T13:38:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-07T13:39:36Z",
      "updated_at": "2022-01-07T13:39:36Z",
      "source": {
        "issue": {
          "id": 1096266702,
          "node_id": "PR_kwDOABII584wqDg7",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24002",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24002/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24002/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24002/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24002",
          "number": 24002,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: add thread safety lock assertion to WriteBlockIndexDB()",
          "body": "New helper function `BlockManager::WriteBlockIndexDB()` added in #23974 has a thread safety lock annotation in its declaration but is missing the corresponding run-time lock assertion in its definition.\r\n\r\nPer doc/developer-notes.md: \"Combine annotations in function declarations with run-time asserts in function definitions.\"\r\n",
          "user": {
            "login": "jonatack",
            "id": 2415484,
            "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonatack",
            "html_url": "https://github.com/jonatack",
            "followers_url": "https://api.github.com/users/jonatack/followers",
            "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
            "organizations_url": "https://api.github.com/users/jonatack/orgs",
            "repos_url": "https://api.github.com/users/jonatack/repos",
            "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonatack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 219890555,
              "node_id": "MDU6TGFiZWwyMTk4OTA1NTU=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Block%20storage",
              "name": "Block storage",
              "color": "000000",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24002",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24002",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24002.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24002.patch"
          },
          "closed_at": "2022-01-08T08:11:32Z",
          "created_at": "2022-01-07T12:16:45Z",
          "updated_at": "2023-01-08T10:06:59Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 5858805526,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAFdNkcW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5858805526",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a523ac9e01604c2ad07981c66604c830a39a8620",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/a523ac9e01604c2ad07981c66604c830a39a8620",
      "created_at": "2022-01-07T16:34:23Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "psgreco",
        "id": 12950210,
        "node_id": "MDQ6VXNlcjEyOTUwMjEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/12950210?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psgreco",
        "html_url": "https://github.com/psgreco",
        "followers_url": "https://api.github.com/users/psgreco/followers",
        "following_url": "https://api.github.com/users/psgreco/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psgreco/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psgreco/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psgreco/subscriptions",
        "organizations_url": "https://api.github.com/users/psgreco/orgs",
        "repos_url": "https://api.github.com/users/psgreco/repos",
        "events_url": "https://api.github.com/users/psgreco/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psgreco/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-08T01:34:50Z",
      "updated_at": "2022-01-08T01:34:50Z",
      "source": {
        "issue": {
          "id": 1096800054,
          "node_id": "I_kwDOABII585BX9c2",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24010",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24010/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24010/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24010/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/24010",
          "number": 24010,
          "state": "closed",
          "state_reason": "completed",
          "title": "Guix builds failing after #23778",
          "body": "Doing a guix build after https://github.com/bitcoin/bitcoin/pull/23778 (commit https://github.com/bitcoin/bitcoin/commit/711ce2e5333bd6717f9b114abe7ec1d1994afbc4) fails with the following error\r\n\r\n```\r\nsubstitute: updating substitutes from 'https://guix.carldong.io'... 100.0%\r\n linux-libre-headers-5.10.35  1.1MiB                                                                                                                                                               105.7MiB/s 00:00 [##################] 100.0%\r\n libgit2-1.3.0-checkout  3.1MiB                                                                                                                                                                      823KiB/s 00:03 [###############   ]  87.9%Backtrace:\r\nIn ice-9/boot-9.scm:\r\n  1736:10 19 (with-exception-handler _ _ #:unwind? _ # _)\r\n  1736:10 18 (with-exception-handler _ _ #:unwind? _ # _)\r\n  1731:15 17 (with-exception-handler #<procedure 7f146e169ba0 at ic?> ?)\r\nIn guix/scripts/substitute.scm:\r\n   765:15 16 (_)\r\n    538:9 15 (process-substitution #<output: file 4> _ _ #:cache-urls ?)\r\nIn guix/serialization.scm:\r\n    424:4 14 (fold-archive _ _ _ _)\r\n   468:33 13 (read \"/gnu/store/l3nzsf04lai8kis5g75rfrmvb7c78gig-lib?\" ?)\r\n   468:33 12 (read \"/gnu/store/l3nzsf04lai8kis5g75rfrmvb7c78gig-lib?\" ?)\r\n   468:33 11 (read \"/gnu/store/l3nzsf04lai8kis5g75rfrmvb7c78gig-lib?\" ?)\r\n   468:33 10 (read \"/gnu/store/l3nzsf04lai8kis5g75rfrmvb7c78gig-lib?\" ?)\r\n   442:24  9 (read \"/gnu/store/l3nzsf04lai8kis5g75rfrmvb7c78gig-lib?\" ?)\r\n   525:24  8 (_ \"/gnu/store/l3nzsf04lai8kis5g75rfrmvb7c78gig-libgit?\" ?)\r\nIn guix/store/deduplication.scm:\r\n    227:2  7 (dump-file/deduplicate \"/gnu/store/l3nzsf04lai8kis5g75?\" ?)\r\nIn ice-9/ports.scm:\r\n   461:11  6 (call-with-output-file \"/gnu/store/l3nzsf04lai8kis5g75?\" ?)\r\nIn unknown file:\r\n           5 (open-file \"/gnu/store/l3nzsf04lai8kis5g75rfrmvb7c78gi?\" ?)\r\nIn ice-9/boot-9.scm:\r\n  1669:16  4 (raise-exception _ #:continuable? _)\r\n  1669:16  3 (raise-exception _ #:continuable? _)\r\n  1764:13  2 (_ #<&compound-exception components: (#<&error> #<&orig?>)\r\n  1669:16  1 (raise-exception _ #:continuable? _)\r\n  1669:16  0 (raise-exception _ #:continuable? _)\r\n\r\nice-9/boot-9.scm:1669:16: In procedure raise-exception:\r\nThrow to key `encoding-error' with args `(\"scm_to_stringn\" \"cannot convert wide string to output locale\" 84 #f #f)'.\r\nsubstitution of /gnu/store/l3nzsf04lai8kis5g75rfrmvb7c78gig-libgit2-1.3.0-checkout failed\r\nguix time-machine: error: corrupt input while restoring archive from #<closed: file 7fb8786b4700>\r\n```\r\n\r\nTried building several times, same result.\r\n\r\nReverting to https://github.com/bitcoin/bitcoin/pull/23974 (commit https://github.com/bitcoin/bitcoin/commit/4ada74206a533e14312477f36d5443da5caebba0) builds without issues\r\n\r\n",
          "user": {
            "login": "psgreco",
            "id": 12950210,
            "node_id": "MDQ6VXNlcjEyOTUwMjEw",
            "avatar_url": "https://avatars.githubusercontent.com/u/12950210?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/psgreco",
            "html_url": "https://github.com/psgreco",
            "followers_url": "https://api.github.com/users/psgreco/followers",
            "following_url": "https://api.github.com/users/psgreco/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/psgreco/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/psgreco/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/psgreco/subscriptions",
            "organizations_url": "https://api.github.com/users/psgreco/orgs",
            "repos_url": "https://api.github.com/users/psgreco/repos",
            "events_url": "https://api.github.com/users/psgreco/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/psgreco/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/52",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/52",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/52/labels",
            "id": 6179837,
            "node_id": "MDk6TWlsZXN0b25lNjE3OTgzNw==",
            "number": 52,
            "state": "closed",
            "title": "23.0",
            "description": "",
            "creator": {
              "login": "MarcoFalke",
              "id": 6399679,
              "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
              "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/MarcoFalke",
              "html_url": "https://github.com/MarcoFalke",
              "followers_url": "https://api.github.com/users/MarcoFalke/followers",
              "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
              "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
              "repos_url": "https://api.github.com/users/MarcoFalke/repos",
              "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 123,
            "created_at": "2020-12-04T08:54:20Z",
            "updated_at": "2022-04-25T20:51:00Z",
            "closed_at": "2022-04-22T18:08:30Z"
          },
          "locked": true,
          "comments": 7,
          "closed_at": "2022-01-18T02:47:48Z",
          "created_at": "2022-01-08T01:34:50Z",
          "updated_at": "2023-01-18T10:08:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 5860981047,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAFdV3k3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5860981047",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6182e5086fc82b49a5f0d2abdab4bc7e2a4686ef",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/6182e5086fc82b49a5f0d2abdab4bc7e2a4686ef",
      "created_at": "2022-01-08T08:11:25Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 5861002177,
      "node_id": "HRDE_lADOABII585BK2a9zwAAAAFdV8vB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5861002177",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-08T08:40:34Z"
    },
    {
      "event": "referenced",
      "id": 5862653497,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAFdcP45",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5862653497",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "191608dff81765162fe5dead6f81816bc70bb6dc",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/191608dff81765162fe5dead6f81816bc70bb6dc",
      "created_at": "2022-01-09T19:05:12Z"
    },
    {
      "event": "subscribed",
      "id": 7547052723,
      "node_id": "SE_lADOABII585BK2a9zwAAAAHB1uKz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7547052723",
      "actor": {
        "login": "Leylimahmud",
        "id": 99537361,
        "node_id": "U_kgDOBe7R0Q",
        "avatar_url": "https://avatars.githubusercontent.com/u/99537361?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Leylimahmud",
        "html_url": "https://github.com/Leylimahmud",
        "followers_url": "https://api.github.com/users/Leylimahmud/followers",
        "following_url": "https://api.github.com/users/Leylimahmud/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Leylimahmud/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Leylimahmud/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Leylimahmud/subscriptions",
        "organizations_url": "https://api.github.com/users/Leylimahmud/orgs",
        "repos_url": "https://api.github.com/users/Leylimahmud/repos",
        "events_url": "https://api.github.com/users/Leylimahmud/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Leylimahmud/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-07T23:32:34Z"
    },
    {
      "event": "referenced",
      "id": 7832283461,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAHS1ylF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7832283461",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d965a961b8f1bdb914e464eca10d1c3e2d81551c",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/d965a961b8f1bdb914e464eca10d1c3e2d81551c",
      "created_at": "2022-11-17T10:11:42Z"
    },
    {
      "event": "referenced",
      "id": 7832283466,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAHS1ylK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7832283466",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "64321b46c04e21229435e665766904a951a77ab1",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/64321b46c04e21229435e665766904a951a77ab1",
      "created_at": "2022-11-17T10:11:42Z"
    },
    {
      "event": "referenced",
      "id": 7832283476,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAHS1ylU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7832283476",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d218c9c0304e22f503463882b64f1ba70bf1059f",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/d218c9c0304e22f503463882b64f1ba70bf1059f",
      "created_at": "2022-11-17T10:11:42Z"
    },
    {
      "event": "referenced",
      "id": 7832283528,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAHS1ymI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7832283528",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "e9a3a974e401550786c3865123b9860ccb6ddd97",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/e9a3a974e401550786c3865123b9860ccb6ddd97",
      "created_at": "2022-11-17T10:11:42Z"
    },
    {
      "event": "referenced",
      "id": 7832283540,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAHS1ymU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7832283540",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6476bba7b79b53022415c17d16a80b4452535be7",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/6476bba7b79b53022415c17d16a80b4452535be7",
      "created_at": "2022-11-17T10:11:42Z"
    },
    {
      "event": "referenced",
      "id": 7832283551,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAHS1ymf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7832283551",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ae6e4269f6dcacafde7d90df83f477b4b106dd93",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/ae6e4269f6dcacafde7d90df83f477b4b106dd93",
      "created_at": "2022-11-17T10:11:42Z"
    },
    {
      "event": "referenced",
      "id": 7832283558,
      "node_id": "REFE_lADOABII585BK2a9zwAAAAHS1ymm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7832283558",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "15a33f9e067ac26493b83f1814380ae557d756cc",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/15a33f9e067ac26493b83f1814380ae557d756cc",
      "created_at": "2022-11-17T10:11:42Z"
    },
    {
      "event": "locked",
      "id": 8176256594,
      "node_id": "LOE_lADOABII585BK2a9zwAAAAHnV8ZS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8176256594",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-08T10:07:00Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/778853318",
      "pull_request_review_id": 844649111,
      "id": 778853318,
      "node_id": "PRRC_kwDOABII584ubFvG",
      "diff_hunk": "@@ -348,6 +331,11 @@ void BlockManager::Unload()\n     }\n \n     m_block_index.clear();\n+\n+    vinfoBlockFile.clear();\n+    nLastBlockFile = 0;\n+    setDirtyBlockIndex.clear();\n+    setDirtyFileInfo.clear();",
      "path": "src/node/blockstorage.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "original_commit_id": "fad81b7a0f8ea300708321c3fcae7f75cade14ba",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Make blockstorage globals private members of BlockManager\" (fad81b7a0f8ea300708321c3fcae7f75cade14ba)\r\n\r\nIs this a pure refactor, or is there some change in behavior here? It seems like these lines are being moved from `UnloadBlockIndex` to `BlockManager::Unload` but neither function is directly calling the other.\r\n\r\nIt might be good to move this change to a separate commit before the \"make private members\" commit with an explanation about why it's safe. Not saying it's unsafe. It's just not obviously safe.",
      "created_at": "2022-01-05T14:19:54Z",
      "updated_at": "2022-01-05T14:20:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#discussion_r778853318",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/778853318"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
        }
      },
      "start_line": null,
      "original_start_line": 335,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 338,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/778855826",
      "pull_request_review_id": 844654618,
      "id": 778855826,
      "node_id": "PRRC_kwDOABII584ubGWS",
      "diff_hunk": "@@ -348,6 +331,11 @@ void BlockManager::Unload()\n     }\n \n     m_block_index.clear();\n+\n+    vinfoBlockFile.clear();\n+    nLastBlockFile = 0;\n+    setDirtyBlockIndex.clear();\n+    setDirtyFileInfo.clear();",
      "path": "src/node/blockstorage.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "original_commit_id": "fad81b7a0f8ea300708321c3fcae7f75cade14ba",
      "in_reply_to_id": 778853318,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`UnloadBlockIndex` calls `chainman.Unload()`, which again should call `BlockManager::Unload`. So only change should be the destruction order",
      "created_at": "2022-01-05T14:23:11Z",
      "updated_at": "2022-01-05T14:23:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#discussion_r778855826",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/778855826"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
        }
      },
      "start_line": null,
      "original_start_line": 335,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 338,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/778868958",
      "pull_request_review_id": 844673266,
      "id": 778868958,
      "node_id": "PRRC_kwDOABII584ubJje",
      "diff_hunk": "@@ -348,6 +331,11 @@ void BlockManager::Unload()\n     }\n \n     m_block_index.clear();\n+\n+    vinfoBlockFile.clear();\n+    nLastBlockFile = 0;\n+    setDirtyBlockIndex.clear();\n+    setDirtyFileInfo.clear();",
      "path": "src/node/blockstorage.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "original_commit_id": "fad81b7a0f8ea300708321c3fcae7f75cade14ba",
      "in_reply_to_id": 778853318,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> `UnloadBlockIndex` calls `chainman.Unload()`, which again should call `BlockManager::Unload`. So only change should be the destruction order\r\n\r\nSo there is no code in some other place calling `BlockManager::Unload` and now having extra state cleared?\r\n\r\nIf you put this change in a separate commit and explicitly say whether it's _supposed_ to change behavior and maybe say how it doesn't change behavior, it can make it easier for future reviewers and future regression bugfixers, who I think would logically be asking these questions.",
      "created_at": "2022-01-05T14:39:07Z",
      "updated_at": "2022-01-05T14:39:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#discussion_r778868958",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/778868958"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
        }
      },
      "start_line": null,
      "original_start_line": 335,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 338,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/778912434",
      "pull_request_review_id": 844735928,
      "id": 778912434,
      "node_id": "PRRC_kwDOABII584ubUKy",
      "diff_hunk": "@@ -348,6 +331,11 @@ void BlockManager::Unload()\n     }\n \n     m_block_index.clear();\n+\n+    vinfoBlockFile.clear();\n+    nLastBlockFile = 0;\n+    setDirtyBlockIndex.clear();\n+    setDirtyFileInfo.clear();",
      "path": "src/node/blockstorage.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "original_commit_id": "fad81b7a0f8ea300708321c3fcae7f75cade14ba",
      "in_reply_to_id": 778853318,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks Ryan. Reworked the pull into more commits with descriptions in the body.",
      "created_at": "2022-01-05T15:29:17Z",
      "updated_at": "2022-01-05T15:29:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#discussion_r778912434",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/778912434"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
        }
      },
      "start_line": null,
      "original_start_line": 335,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 338,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779112149",
      "pull_request_review_id": 845027881,
      "id": 779112149,
      "node_id": "PRRC_kwDOABII584ucE7V",
      "diff_hunk": "@@ -348,6 +331,11 @@ void BlockManager::Unload()\n     }\n \n     m_block_index.clear();\n+\n+    vinfoBlockFile.clear();\n+    nLastBlockFile = 0;\n+    setDirtyBlockIndex.clear();\n+    setDirtyFileInfo.clear();",
      "path": "src/node/blockstorage.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "original_commit_id": "fad81b7a0f8ea300708321c3fcae7f75cade14ba",
      "in_reply_to_id": 778853318,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Thanks Ryan.\r\n\r\nOk, you finally convinced me",
      "created_at": "2022-01-05T20:21:11Z",
      "updated_at": "2022-01-05T20:21:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#discussion_r779112149",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/779112149"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
        }
      },
      "start_line": null,
      "original_start_line": 335,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 338,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/780228630",
      "pull_request_review_id": 846558755,
      "id": 780228630,
      "node_id": "PRRC_kwDOABII584ugVgW",
      "diff_hunk": "@@ -348,6 +331,31 @@ void BlockManager::Unload()\n     }\n \n     m_block_index.clear();\n+\n+    m_blockfile_info.clear();\n+    m_last_blockfile = 0;\n+    m_dirty_blockindex.clear();\n+    m_dirty_fileinfo.clear();\n+}\n+\n+bool BlockManager::WriteBlockIndexDB()\n+{",
      "path": "src/node/blockstorage.cpp",
      "position": 108,
      "original_position": 108,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "original_commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fa467f3913918701 Missing `AssertLockHeld(::cs_main)` in the definition of this new helper. Added in #24002.",
      "created_at": "2022-01-07T12:17:06Z",
      "updated_at": "2022-01-07T12:17:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#discussion_r780228630",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/780228630"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 342,
      "original_line": 342,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/780267759",
      "pull_request_review_id": 846615293,
      "id": 780267759,
      "node_id": "PRRC_kwDOABII584ugfDv",
      "diff_hunk": "@@ -120,6 +142,16 @@ class BlockManager\n \n     CBlockIndex* LookupBlockIndex(const uint256& hash) const EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n+    /** Get block file info entry for one block file */",
      "path": "src/node/blockstorage.h",
      "position": 68,
      "original_position": 68,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "original_commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Would be it worth mentioning that this function is only used by the unit tests? If yes, can add to #24002. \r\n\r\n```diff\r\n-    /** Get block file info entry for one block file */\r\n+    /** Get block file info entry for one block file. Currently only used for unit tests. */\r\n```\r\n",
      "created_at": "2022-01-07T13:38:16Z",
      "updated_at": "2022-01-07T13:38:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#discussion_r780267759",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/780267759"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 145,
      "original_line": 145,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/780647277",
      "pull_request_review_id": 847134684,
      "id": 780647277,
      "node_id": "PRRC_kwDOABII584uh7tt",
      "diff_hunk": "@@ -120,6 +142,16 @@ class BlockManager\n \n     CBlockIndex* LookupBlockIndex(const uint256& hash) const EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n+    /** Get block file info entry for one block file */",
      "path": "src/node/blockstorage.h",
      "position": 68,
      "original_position": 68,
      "commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "original_commit_id": "fa68a6c2fc6754c160e0f98007785602201b3c47",
      "in_reply_to_id": 780267759,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It might be better to move the function to the test, if it is only used there.",
      "created_at": "2022-01-08T08:40:30Z",
      "updated_at": "2022-01-08T08:40:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/23974#discussion_r780647277",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/780647277"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23974"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 145,
      "original_line": 145,
      "side": "RIGHT"
    }
  ]
}