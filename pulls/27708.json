{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708",
    "id": 1357978172,
    "node_id": "PR_kwDOABII585Q8Ro8",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/27708",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/27708.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/27708.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/61c569ab6069d04079a0831468eb713983919636",
    "number": 27708,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Return EXIT_FAILURE on post-init fatal errors",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "It seems odd to return `EXIT_SUCCESS` when the node aborted execution due a fatal internal error\r\nor any post-init problem that triggers an unrequested shutdown.\r\n\r\ne.g. blocks or coins db I/O errors, disconnect block failure, failure during thread import (external\r\nblocks loading process error), among others.",
    "labels": [],
    "created_at": "2023-05-20T15:04:25Z",
    "updated_at": "2024-12-05T07:15:46Z",
    "closed_at": "2023-06-12T16:55:02Z",
    "mergeable_state": "unknown",
    "merged_at": "2023-06-12T16:55:02Z",
    "merged_by": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "merge_commit_sha": "c92fd638860c5b4477851fb3790bc8068f808d3e",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "furszy:2023_main_exit_failure",
      "ref": "2023_main_exit_failure",
      "sha": "61c569ab6069d04079a0831468eb713983919636",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 4,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 417778,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-12-05T02:55:15Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2024-11-25T20:15:51Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "153a6882f42fff3fdc63bf770d4c86a62c46c448",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36477,
        "stargazers_count": 80034,
        "watchers_count": 80034,
        "size": 273413,
        "default_branch": "master",
        "open_issues_count": 656,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-12-04T20:35:08Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-12-05T07:52:15Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 85,
    "deletions": 56,
    "changed_files": 14,
    "commits": 5,
    "review_comments": 33,
    "comments": 13
  },
  "events": [
    {
      "event": "commented",
      "id": 1555931428,
      "node_id": "IC_kwDOABII585cvaEk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1555931428",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-20T15:04:28Z",
      "updated_at": "2023-06-12T16:53:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1474247182), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1474958262), [pinheadmz](https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1475189635), [theStack](https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1475379282) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27607](https://github.com/bitcoin/bitcoin/pull/27607) (index: improve initialization and pruning violation check by furszy)\n* [#26966](https://github.com/bitcoin/bitcoin/pull/26966) (index: blockfilter initial sync speedup, parallelize process by furszy)\n* [#26697](https://github.com/bitcoin/bitcoin/pull/26697) (logging: use bitset for categories by LarryRuane)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1555931428",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "unsubscribed",
      "id": 9294830170,
      "node_id": "UE_lADOABII585maZ9VzwAAAAIqA9pa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9294830170",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-20T18:35:00Z"
    },
    {
      "event": "commented",
      "id": 1562915943,
      "node_id": "IC_kwDOABII585dKDRn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1562915943",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-25T13:31:50Z",
      "updated_at": "2023-05-25T13:31:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1562915943",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "reviewed",
      "id": 1443959388,
      "node_id": "PRR_kwDOABII585WERJc",
      "url": null,
      "actor": null,
      "commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Was wondering if this was attempted before and skimmed through the pull request history, but I did not find prior attempts. ",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1443959388",
      "submitted_at": "2023-05-25T15:13:53Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9372015858,
      "node_id": "HRFPE_lADOABII585maZ9VzwAAAAIunZzy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9372015858",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-29T21:58:31Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9372122838,
      "node_id": "HRFPE_lADOABII585maZ9VzwAAAAIunz7W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9372122838",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-29T22:23:15Z"
    },
    {
      "event": "labeled",
      "id": 9372123061,
      "node_id": "LE_lADOABII585maZ9VzwAAAAIunz-1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9372123061",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-29T22:23:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9372429847,
      "node_id": "UNLE_lADOABII585maZ9VzwAAAAIuo-4X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9372429847",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-29T23:58:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1572294451,
      "node_id": "IC_kwDOABII585dt08z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1572294451",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-01T15:41:29Z",
      "updated_at": "2023-06-01T15:41:29Z",
      "author_association": "MEMBER",
      "body": "Feedback tackled. Thanks TheCharlatan!. Changes:\r\n\r\n* Moved ThreadImport ABC error to use `AbortNode`. Per [comment](https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1206967261).\r\n* And moved `AbortNode` code below `StartShutdown` so it can use the introduced static function instead of having to add a public `StartErrorShutdown` function that is only used by the .cpp file and not externally.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1572294451",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "reviewed",
      "id": 1465636707,
      "node_id": "PRR_kwDOABII585XW9dj",
      "url": null,
      "actor": null,
      "commit_id": "d44dd73bcabc694880dfc966fad21980cd3b4c64",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nRegarding the conclusion in the first commit (_\"'StartShutdown' should only be used for user requested shutdowns. Internal errors that cause a shutdown should use 'AbortNode'.\"_), the following is probably another candidate where `AbortNode` is preferred over `StartShutdown`? \r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/8cc65f093c0cf7a27b3bfc6da90fd7a6ac8f5e48/src/index/base.cpp#L33-L41\r\n\r\n(not saying it necessarily has to happen in this PR though, if it makes sense).",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1465636707",
      "submitted_at": "2023-06-06T16:43:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "reviewed",
      "id": 1465970269,
      "node_id": "PRR_kwDOABII585XYO5d",
      "url": null,
      "actor": null,
      "commit_id": "d44dd73bcabc694880dfc966fad21980cd3b4c64",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "> Regarding the conclusion in the first commit (_\"'StartShutdown' should only be used for user requested shutdowns. Internal errors that cause a shutdown should use 'AbortNode'.\"_), the following is probably another candidate where `AbortNode` is preferred over `StartShutdown`?\r\n\r\nYeah absolutely. Good eye. If you compare it in-detail, that function is a plain copy of `AbortNode`: it (1) calls `SetMiscWarning`, (2) logs the error, (3) notifies the UI by calling `InitError` (noui listeners as well) and (4) calls to the shutdown function..\r\nSo, we can just get rid of it.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1465970269",
      "submitted_at": "2023-06-06T19:55:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "commented",
      "id": 1579532617,
      "node_id": "IC_kwDOABII585eJcFJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1579532617",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-06T22:20:35Z",
      "updated_at": "2023-06-06T22:20:35Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > Regarding the conclusion in the first commit (_\"'StartShutdown' should only be used for user requested shutdowns. Internal errors that cause a shutdown should use 'AbortNode'.\"_), the following is probably another candidate where `AbortNode` is preferred over `StartShutdown`?\r\n> \r\n> Yeah absolutely. Good eye. If you compare it in-detail, that function is a plain copy of `AbortNode`: it (1) calls `SetMiscWarning`, (2) logs the error, (3) notifies the UI by calling `InitError` (noui listeners as well) and (4) calls to the shutdown function.. So, we can just get rid of it.\r\n\r\nOh you're right, didn't look at `AbortNode` before, it's indeed almost the same. Feel free to pull in the dedup commit then: https://github.com/theStack/bitcoin/commit/3eca21000eb33b96063fdcdf30e8ad8514e41126 Note that I still kept the `FatalError` helper for ease-of-use for the callers, as it still is useful for not having to call `tfm::format(...)` each time (thanks to simple template magic).",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1579532617",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9459754366,
      "node_id": "HRFPE_lADOABII585maZ9VzwAAAAIz2GV-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9459754366",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-07T14:04:22Z"
    },
    {
      "event": "commented",
      "id": 1580895192,
      "node_id": "IC_kwDOABII585eOovY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1580895192",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-07T14:05:44Z",
      "updated_at": "2023-06-07T14:05:44Z",
      "author_association": "MEMBER",
      "body": "done, cherry-picked 🚜.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1580895192",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "labeled",
      "id": 9461339784,
      "node_id": "LE_lADOABII585maZ9VzwAAAAIz8JaI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9461339784",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-07T16:01:27Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1581200866,
      "node_id": "IC_kwDOABII585ePzXi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1581200866",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-07T16:57:10Z",
      "updated_at": "2023-06-07T16:57:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK d44dd73bcabc694880dfc966fad21980cd3b4c64. Need to review more closely, but these changes look very good and should help with #27711",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1581200866",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "reviewed",
      "id": 1468674496,
      "node_id": "PRR_kwDOABII585XijHA",
      "url": null,
      "actor": null,
      "commit_id": "292a610cff7db9f03a0beb584a08753e5e5e35ed",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK d44dd73bcabc694880dfc966fad21980cd3b4c64. But it would be nice to extend this change to work with bitcoin-qt as well. I also think it would be good to apply the following changes, which replace the `bool shutdown_due_error` global with an `int exit_status{EXIT_SUCCESS}` `NodeContext` member. \r\n\r\n<details><summary>diff</summary>\r\n<p>\r\n\r\n```diff\r\ndiff --git a/src/bitcoind.cpp b/src/bitcoind.cpp\r\nindex c305d5e6cdc1..0a2a6ed4ebc2 100644\r\n--- a/src/bitcoind.cpp\r\n+++ b/src/bitcoind.cpp\r\n@@ -169,6 +169,9 @@ static bool AppInit(NodeContext& node, int argc, char* argv[])\r\n         // Set this early so that parameter interactions go to console\r\n         InitLogging(args);\r\n         InitParameterInteraction(args);\r\n+        if (!InitShutdownState(node.exit_status)) {\r\n+            return InitError(Untranslated(\"Initializing wait-for-shutdown state failed.\"));\r\n+        }\r\n         if (!AppInitBasicSetup(args)) {\r\n             // InitError will have been called with detailed error, which ends up on console\r\n             return false;\r\n@@ -236,11 +239,6 @@ static bool AppInit(NodeContext& node, int argc, char* argv[])\r\n     }\r\n #endif\r\n     SetSyscallSandboxPolicy(SyscallSandboxPolicy::SHUTOFF);\r\n-    if (fRet) {\r\n-        fRet = WaitForShutdown();\r\n-    }\r\n-    Interrupt(node);\r\n-    Shutdown(node);\r\n \r\n     return fRet;\r\n }\r\n@@ -264,5 +262,12 @@ MAIN_FUNCTION\r\n     // Connect bitcoind signal handlers\r\n     noui_connect();\r\n \r\n-    return (AppInit(node, argc, argv) ? EXIT_SUCCESS : EXIT_FAILURE);\r\n+    if (AppInit(node, argc, argv)) {\r\n+        WaitForShutdown();\r\n+    } else {\r\n+        node.exit_status = EXIT_FAILURE;\r\n+    }\r\n+    Interrupt(node);\r\n+    Shutdown(node);\r\n+    return node.exit_status;\r\n }\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex 1ae21ec8d2dd..c4b09eb2373c 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -812,9 +812,6 @@ bool AppInitBasicSetup(const ArgsManager& args)\r\n     // Enable heap terminate-on-corruption\r\n     HeapSetInformation(nullptr, HeapEnableTerminationOnCorruption, nullptr, 0);\r\n #endif\r\n-    if (!InitShutdownState()) {\r\n-        return InitError(Untranslated(\"Initializing wait-for-shutdown state failed.\"));\r\n-    }\r\n \r\n     if (!SetupNetworking()) {\r\n         return InitError(Untranslated(\"Initializing networking failed.\"));\r\ndiff --git a/src/node/context.h b/src/node/context.h\r\nindex 84f4053c8407..b24f778f4f64 100644\r\n--- a/src/node/context.h\r\n+++ b/src/node/context.h\r\n@@ -7,7 +7,9 @@\r\n \r\n #include <kernel/context.h>\r\n \r\n+#include <atomic>\r\n #include <cassert>\r\n+#include <cstdlib>\r\n #include <functional>\r\n #include <memory>\r\n #include <vector>\r\n@@ -62,6 +64,7 @@ struct NodeContext {\r\n     interfaces::WalletLoader* wallet_loader{nullptr};\r\n     std::unique_ptr<CScheduler> scheduler;\r\n     std::function<void()> rpc_interruption_point = [] {};\r\n+    std::atomic<int> exit_status{EXIT_SUCCESS};\r\n \r\n     //! Declare default constructor and destructor that are not inline, so code\r\n     //! instantiating the NodeContext struct doesn't need to #include class\r\ndiff --git a/src/shutdown.cpp b/src/shutdown.cpp\r\nindex 72f23be21ca0..7641ee3b066a 100644\r\n--- a/src/shutdown.cpp\r\n+++ b/src/shutdown.cpp\r\n@@ -11,6 +11,7 @@\r\n \r\n #include <logging.h>\r\n #include <node/interface_ui.h>\r\n+#include <util/check.h>\r\n #include <util/tokenpipe.h>\r\n #include <warnings.h>\r\n \r\n@@ -21,8 +22,7 @@\r\n #endif\r\n \r\n static std::atomic<bool> fRequestShutdown(false);\r\n-// Whether shutdown was requested by the user or because of an internal error\r\n-static std::atomic<bool> shutdown_due_error{false};\r\n+static std::atomic<int>* g_exit_status{nullptr};\r\n \r\n #ifdef WIN32\r\n /** On windows it is possible to simply use a condition variable. */\r\n@@ -35,8 +35,9 @@ static TokenPipeEnd g_shutdown_r;\r\n static TokenPipeEnd g_shutdown_w;\r\n #endif\r\n \r\n-bool InitShutdownState()\r\n+bool InitShutdownState(std::atomic<int>& exit_status)\r\n {\r\n+    g_exit_status = &exit_status;\r\n #ifndef WIN32\r\n     std::optional<TokenPipe> pipe = TokenPipe::Make();\r\n     if (!pipe) return false;\r\n@@ -46,9 +47,8 @@ bool InitShutdownState()\r\n     return true;\r\n }\r\n \r\n-static void StartShutdown(bool error)\r\n+void StartShutdown()\r\n {\r\n-    if (error) shutdown_due_error.exchange(error);\r\n #ifdef WIN32\r\n     std::unique_lock<std::mutex> lk(g_shutdown_mutex);\r\n     fRequestShutdown = true;\r\n@@ -68,8 +68,6 @@ static void StartShutdown(bool error)\r\n #endif\r\n }\r\n \r\n-void StartShutdown() { return StartShutdown(/*error=*/false); }\r\n-\r\n bool AbortNode(const std::string& strMessage, bilingual_str user_message)\r\n {\r\n     SetMiscWarning(Untranslated(strMessage));\r\n@@ -78,7 +76,8 @@ bool AbortNode(const std::string& strMessage, bilingual_str user_message)\r\n         user_message = _(\"A fatal internal error occurred, see debug.log for details\");\r\n     }\r\n     InitError(user_message);\r\n-    StartShutdown(/*error=*/true);\r\n+    Assert(g_exit_status)->store(EXIT_FAILURE);\r\n+    StartShutdown();\r\n     return false;\r\n }\r\n \r\n@@ -97,7 +96,7 @@ bool ShutdownRequested()\r\n     return fRequestShutdown;\r\n }\r\n \r\n-bool WaitForShutdown()\r\n+void WaitForShutdown()\r\n {\r\n #ifdef WIN32\r\n     std::unique_lock<std::mutex> lk(g_shutdown_mutex);\r\n@@ -109,5 +108,4 @@ bool WaitForShutdown()\r\n         assert(0);\r\n     }\r\n #endif\r\n-    return !shutdown_due_error;\r\n }\r\ndiff --git a/src/shutdown.h b/src/shutdown.h\r\nindex 34d5d30bc074..2b8fdb779ac6 100644\r\n--- a/src/shutdown.h\r\n+++ b/src/shutdown.h\r\n@@ -8,10 +8,12 @@\r\n \r\n #include <util/translation.h> // For bilingual_str\r\n \r\n+#include <atomic>\r\n+\r\n /** Initialize shutdown state. This must be called before using either StartShutdown(),\r\n  * AbortShutdown() or WaitForShutdown(). Calling ShutdownRequested() is always safe.\r\n  */\r\n-bool InitShutdownState();\r\n+bool InitShutdownState(std::atomic<int>& exit_status);\r\n \r\n /** Request shutdown of the application. */\r\n void StartShutdown();\r\n@@ -29,9 +31,7 @@ bool ShutdownRequested();\r\n \r\n /** Wait for StartShutdown to be called in any thread. This can only be used\r\n  * from a single thread.\r\n- * Returns true if shutdown was requested by the user. Otherwise, it's an\r\n- * internally requested shutdown which only happens when an error arises.\r\n  */\r\n-bool WaitForShutdown();\r\n+void WaitForShutdown();\r\n \r\n #endif // BITCOIN_SHUTDOWN_H\r\n```\r\n</p>\r\n</details>\r\n\r\nI think this approach has a few advantages:\r\n\r\n- Avoids adding a new shutdown global right before [#27711](https://github.com/bitcoin/bitcoin/pull/27711) removes all the shutdown globals, so there is less cleanup [#27711](https://github.com/bitcoin/bitcoin/pull/27711) needs to do later.\r\n- I think semantics of an `exit_status` field are more obvious than a `shutdown_due_error` field. Easier to think concretely about what the exit code will be than abstractly about \"whether shutdown was requested by the user\".\r\n- Having a `NodeContext::exit_status` field should make it easier to port this change to the GUI, since the GUI doesn't use the `WaitForShutdown` function.\r\n\r\n(EDIT: Updated code suggestion above to fix early return bug in initial post)",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1468674496",
      "submitted_at": "2023-06-07T22:15:54Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "reviewed",
      "id": 1470217367,
      "node_id": "PRR_kwDOABII585XobyX",
      "url": null,
      "actor": null,
      "commit_id": "292a610cff7db9f03a0beb584a08753e5e5e35ed",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Thanks @ryanofsky! I see most of the changes great, except one.\r\n\r\nIf we change `AppInit` return value to be an int, we need to change all the\r\nreturn lines to return an int, not only the ones at the end of the function.\r\n\r\nOtherwise, the `return false` (or `return error(msg)`) statements will be treated as\r\n`return 0` which means `EXIT_SUCCESS`, which is the opposite that we want.\r\n\r\nOther than that nuance, pulling them :).",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1470217367",
      "submitted_at": "2023-06-08T15:27:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "commented",
      "id": 1582902399,
      "node_id": "IC_kwDOABII585eWSx_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1582902399",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-08T15:57:03Z",
      "updated_at": "2023-06-08T15:57:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "Oh, you are right. I thought I searched for early returns, but somehow I missed seeing them. I updated the suggestion above to fix this. I think AppInit should keep returning bool not int to keep the changes minimal, and because returning bool is better for following existing coding conventions.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1582902399",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9476192160,
      "node_id": "HRFPE_lADOABII585maZ9VzwAAAAI00zeg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9476192160",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-08T19:38:07Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDlkZGY3ZTAzYTM1NTkyNjE3YTAxNjQxOGZkMzIwY2M5M2M4ZDFhYmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9ddf7e03a35592617a016418fd320cc93c8d1abd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9ddf7e03a35592617a016418fd320cc93c8d1abd",
      "tree": {
        "sha": "1ce52cd3576408fd7e4123eb044a32a799ec4ec6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1ce52cd3576408fd7e4123eb044a32a799ec4ec6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1ce52cd3576408fd7e4123eb044a32a799ec4ec6\nparent a36134fcc7b40671d538931f621c8c15ffacc3d2\nauthor furszy <matiasfurszyfer@protonmail.com> 1685397418 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1686253116 -0300\n\nmove ThreadImport ABC error to use AbortNode\n\n'StartShutdown' should only be used for user requested\nshutdowns. Internal errors that cause a shutdown should\nuse 'AbortNode'.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmSCLjwACgkQXdI8zGhq\npiPBuQ//SpurAkCE27xeGBeFxjPe3fuHd2FiNmUfIcYTB0KMFczZFysZ8apnpNR8\nTEGvm+CfTbmmiYphteUhNXIbfsFDh7RJjRlcew01nS/87yirAcrIBQaZtkBVe5mm\nt8FQ/+P4tvH+mlHa83kgFPSfsoScVZOSCkbAvdxpMXUzR2MV+LSm2MOH3peBjxAW\n0988qyVmExbYtIC7eJ/LiH4VmulsgMYq6aZ8bMXGsunf98aA0prdghivJPwTOPmz\nrJ0Y9OwN00yzAzbgxXUr4xc9DrqpjsU2O1hOFm/jd7al+m8LRIDBBJ+B5ovc++fO\nc7lwkRccgteRXbfxEg+/nrs8n24wvHbrHd1rsRWw2u08qZNB53/UsvM6OeCriCRM\nL/vXNOW3VLOizgi7y8fmUl8oJMEsZz01oYvxFgfdgDNYiBBjA5AMoKHRV4HyyrR5\nplJ/RcivEizX0/TESHaIUBgWNLJ7igFbP+UZVSCDiWzJ6GMUZzFEuWwUid0Lw4gS\nfs/1JZmB8E2FV702QvitID+tpTKxw2gVHxWpcvv55K/ue3CTSJroGkinGNG39S5J\nG/eOuXkE4+WSg4TP2z0ZY4BB5L7jN8LhV6cqlpGGT0cW9OoQdHAlkccKei+zkxmc\nwRn/VlFKfbjAO7pCJOJXcVmUSiKkpU3DU3f7HBxVdc6tNBpQD98=\n=NTnW\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a36134fcc7b40671d538931f621c8c15ffacc3d2",
          "sha": "a36134fcc7b40671d538931f621c8c15ffacc3d2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a36134fcc7b40671d538931f621c8c15ffacc3d2"
        }
      ],
      "message": "move ThreadImport ABC error to use AbortNode\n\n'StartShutdown' should only be used for user requested\nshutdowns. Internal errors that cause a shutdown should\nuse 'AbortNode'.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-06-08T19:38:36Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-05-29T21:56:58Z"
      },
      "sha": "9ddf7e03a35592617a016418fd320cc93c8d1abd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNjMDY5MjZjZjIxZGNjYTMwNzRlZjUxNTA2ZjU1NmIyMjg2YzI5OWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3c06926cf21dcca3074ef51506f556b2286c299b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3c06926cf21dcca3074ef51506f556b2286c299b",
      "tree": {
        "sha": "017eaa823a0f5065ae83c8d17d746158d91a3841",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/017eaa823a0f5065ae83c8d17d746158d91a3841"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 017eaa823a0f5065ae83c8d17d746158d91a3841\nparent 9ddf7e03a35592617a016418fd320cc93c8d1abd\nauthor Sebastian Falbesoner <sebastian.falbesoner@gmail.com> 1686089097 +0200\ncommitter furszy <matiasfurszyfer@protonmail.com> 1686253116 -0300\n\nrefactor: index: use `AbortNode` in fatal error helper\n\nDeduplicates code in the `FatalError` template function by using\n`AbortNode` which does the exact same thing if called without any user\nmessage (i.e. without second parameter specified). The template is still\nkept for ease-of-use w.r.t. not having to call `tfm::format(...)` at the\ncall-side each time, and also to keep the diff minimal.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmSCLjwACgkQXdI8zGhq\npiOI3g//SPSRmrNIRUbz7KFReACfAFfexoNnhtgBIaSXW13nxlLdjIQiZP0Miqwh\ndMGvqGouKHZzhUJTkZxRmDHKNyC1WpLUXNWpsAWNdYR4wC9yacImvnjb7SKQ7w+W\n0tauTIqdTlHIjTJ0iGDQECyMUakgvemDBwAhH2MZH/eU+g6O49GPJK1eFNeaj8NF\nOwpTAwDAEBWsXdQL4K0Wm9YWPwAuSPDjtz6u2fHmY/xVAVEVxNBQwMaMEb1WJoPv\nL8HaqBUlpd8Ra/7a6bboycQF+BNvYbhPTdmDWP/VWE7g9jaakRrtHRcZTFjlwuBh\n612t45AyT+MG/gG0dlQXsPmKyQYLTPu7uVDuLGT51yIlkTPyhA0NTNZMcHfvaNoz\nxpBwTc9QCYSG9yyW2Vmww2+tbgwS2nPfx+TGIiBfqqBAlUR04DJhcPHFEqSnkCcQ\ncLV4erM/RJCEwXgJ/zc0z2IxFZ2pyOvL6OLgGQYt36x6OG5yu3+YntD/5Mj8UHJf\ns1Clyx0j7gWTtqH7oGJq2yVA56TR7ZybtisTyCOAnm2s5LkRMRWAH8kUQ6WaTEH1\njKpOmJHg1KPZHOSOh/l++pdyndGCvHlrL8h9qcCYokwlmdIjd8XM9YeLt6+UfTE8\n0JQ9jREb2C3+9tgYHndiUfvBQoZtJptRRrIO3D4lRSEuBvi8NJ4=\n=0k1H\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9ddf7e03a35592617a016418fd320cc93c8d1abd",
          "sha": "9ddf7e03a35592617a016418fd320cc93c8d1abd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9ddf7e03a35592617a016418fd320cc93c8d1abd"
        }
      ],
      "message": "refactor: index: use `AbortNode` in fatal error helper\n\nDeduplicates code in the `FatalError` template function by using\n`AbortNode` which does the exact same thing if called without any user\nmessage (i.e. without second parameter specified). The template is still\nkept for ease-of-use w.r.t. not having to call `tfm::format(...)` at the\ncall-side each time, and also to keep the diff minimal.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-06-08T19:38:36Z"
      },
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2023-06-06T22:04:57Z"
      },
      "sha": "3c06926cf21dcca3074ef51506f556b2286c299b"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9476225928,
      "node_id": "HRFPE_lADOABII585maZ9VzwAAAAI007uI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9476225928",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-08T19:41:34Z"
    },
    {
      "event": "commented",
      "id": 1583255041,
      "node_id": "IC_kwDOABII585eXo4B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1583255041",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-08T19:54:56Z",
      "updated_at": "2023-06-08T23:13:06Z",
      "author_association": "MEMBER",
      "body": "Thanks ryanofsky, updated per feedback with a tiny diff:\r\n\r\nDidn't move `InitShutdownState` from `AppInitBasicSetup` to `AppInit` and instead provided the `NodeContext` ref to `AppInitBasicSetup`.\r\nNot sure if you have an strong opinion about this (shoot if you have it) but the rationale was to keep the same workflow as we have now so the bitcoin-qt related changes b0267f2 doesn't introduce another `InitShutdownState` call.\r\n\r\n> I think AppInit should keep returning bool not int to keep the changes minimal, and because returning bool is better for following existing coding conventions.\r\n\r\nFunny enough, `GuiMain()` function returns an int. I think that we just don't have a convention here.\r\nStill, agree to follow the simpler path.\r\n\r\nAnother topic would be whether to drop 99d3212 or not. It is not needed anymore.\r\nI was going to drop it but.. it feels good to place the global booleans first in the .cpp file and not in the middle of it. Thoughts?",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1583255041",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9476774023,
      "node_id": "HRFPE_lADOABII585maZ9VzwAAAAI03BiH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9476774023",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-08T20:44:47Z"
    },
    {
      "event": "commented",
      "id": 1583329813,
      "node_id": "IC_kwDOABII585eX7IV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1583329813",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-08T20:54:48Z",
      "updated_at": "2023-06-08T20:54:48Z",
      "author_association": "MEMBER",
      "body": "Reworked the diff a bit more [check](https://github.com/bitcoin/bitcoin/compare/b0267f23b1cb732693c485e9b242ff3b004804bd..500d3e901c146e3a2f6ef04456c53fe3a5302c11).\r\n\r\nIt's because `AppInit` can return true without initializing the shutdown pipe. e.g. when the user starts bitcoind with a `-h` or `-version`. Which leads to an assertion error at the `WaitForShutdown` call.\r\n\r\nProbably we should refactor `AppInit` in the future, I liked where you were going.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1583329813",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "unlabeled",
      "id": 9478171145,
      "node_id": "UNLE_lADOABII585maZ9VzwAAAAI08WoJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9478171145",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-08T23:46:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1471861464,
      "node_id": "PRR_kwDOABII585XutLY",
      "url": null,
      "actor": null,
      "commit_id": "500d3e901c146e3a2f6ef04456c53fe3a5302c11",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK f13880e83200ec824d7528061f96708d96bf9bd4\r\n\r\nThis looks good as is, but would suggest two changes if you feel like making them:\r\n\r\n1. Maybe drop the \"move 'AbortNode' after 'StartShutdown'\" commit if it is not needed anymore. Dropping it would help git blame work better and make history more legible. Also [#27711](https://github.com/bitcoin/bitcoin/pull/27711) is going to remove `AbortNode` so moving it now will cause an uglier conflict.\r\n\r\n2. I think it would be better if the main() function always returned `node.exit_status` instead conditionally returning it. Better to make it clear that setting `node.exit_status` always determines the exit code and not create doubt about whether the value will be ignored. Would suggest the following (despite slightly longer diff)\r\n\r\n```diff\r\ndiff --git a/src/bitcoind.cpp b/src/bitcoind.cpp\r\nindex 71b2eef814c6..4133269b3433 100644\r\n--- a/src/bitcoind.cpp\r\n+++ b/src/bitcoind.cpp\r\n@@ -236,13 +236,6 @@ static bool AppInit(NodeContext& node, int argc, char* argv[])\r\n     }\r\n #endif\r\n     SetSyscallSandboxPolicy(SyscallSandboxPolicy::SHUTOFF);\r\n-    if (fRet) {\r\n-        WaitForShutdown();\r\n-    } else {\r\n-        node.exit_status = EXIT_FAILURE;\r\n-    }\r\n-    Interrupt(node);\r\n-    Shutdown(node);\r\n \r\n     return fRet;\r\n }\r\n@@ -266,5 +259,13 @@ MAIN_FUNCTION\r\n     // Connect bitcoind signal handlers\r\n     noui_connect();\r\n \r\n-    return AppInit(node, argc, argv) ? node.exit_status.load() : EXIT_FAILURE;\r\n+    if (AppInit(node, argc, argv)) {\r\n+        WaitForShutdown();\r\n+    } else {\r\n+        node.exit_status = EXIT_FAILURE;\r\n+    }\r\n+    Interrupt(node);\r\n+    Shutdown(node);\r\n+\r\n+    return node.exit_status;\r\n }\r\n```\r\n\r\nI think this would be a general improvement anyway because it reduces complexity of `AppInit` and make it a pure initialization function, not a function that initializes, interrupts, and waits.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1471861464",
      "submitted_at": "2023-06-09T12:12:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "reviewed",
      "id": 1472123008,
      "node_id": "PRR_kwDOABII585XvtCA",
      "url": null,
      "actor": null,
      "commit_id": "500d3e901c146e3a2f6ef04456c53fe3a5302c11",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "> 2. I think it would be better if the main() function always returned `node.exit_status` instead conditionally returning it. Better to make it clear that setting `node.exit_status` always determines the exit code and not create doubt about whether the value will be ignored. \r\n> I think this would be a general improvement anyway because it reduces complexity of `AppInit` and make it a pure initialization function, not a function that initializes, interrupts, and waits.\r\n\r\nHmm, isn't the diff exactly what I changed in my last push? check https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1583329813.\r\n\r\nThe bug there is that `AppInit` can return true without initializing the shutdown pipe, which makes `WaitForShutdown` assertion fail (cannot call `WaitForShutdown` without initializing the pipe). The user could have provided the `-help` or `-version` arguments, [see](https://github.com/bitcoin/bitcoin/blob/a36134fcc7b40671d538931f621c8c15ffacc3d2/src/bitcoind.cpp#L142), which prints information and return early without initializing the node.\r\n\r\nOverall, I like where those changes are going, but they require to refactor `AppInit` further so the args parsing step, and the execution of commands that return early without initializing the node, are performed in a different function.\r\nIf you feel strong on adding it here, I could add it. Not really a thing to introduce more changes for me.\r\n\r\n> Maybe drop the \"move 'AbortNode' after 'StartShutdown'\" commit if it is not needed anymore. Dropping it would help git blame work better and make history more legible. Also https://github.com/bitcoin/bitcoin/pull/27711 is going to remove AbortNode so moving it now will cause an uglier conflict.\r\n\r\nk good, didn't know about 27711 removing it. Will drop it.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1472123008",
      "submitted_at": "2023-06-09T13:43:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9484761647,
      "node_id": "HRFPE_lADOABII585maZ9VzwAAAAI1Vfov",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9484761647",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-09T13:51:51Z"
    },
    {
      "event": "commented",
      "id": 1584647614,
      "node_id": "IC_kwDOABII585ec82-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1584647614",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-09T14:13:26Z",
      "updated_at": "2023-06-09T15:26:02Z",
      "author_association": "MEMBER",
      "body": "Have quickly drafted the needed changes to make your diff work so we are in the same page, check 61fe1af.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1584647614",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "reviewed",
      "id": 1472293444,
      "node_id": "PRR_kwDOABII585XwWpE",
      "url": null,
      "actor": null,
      "commit_id": "61fe1af01418d8b93d38aba8aeb65aecfa6a95cd",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 61fe1af01418d8b93d38aba8aeb65aecfa6a95cd. This looks very good. \r\n\r\nAppreciate you cleaning up the code to make it more obvious when the new `exit_status` value will and won't be returned. (And sorry I posted another buggy diff that forgot about the early returns!) Left a few more minor suggestions that you could take or leave.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1472293444",
      "submitted_at": "2023-06-09T15:26:30Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "labeled",
      "id": 9486632267,
      "node_id": "LE_lADOABII585maZ9VzwAAAAI1coVL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9486632267",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-09T17:19:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNiMmM2MWU4MTk4YmNlZmIxYzIzNDNjYWZmMWQ3MDU5NTEwMjZjYzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3b2c61e8198bcefb1c2343caff1d705951026cc4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3b2c61e8198bcefb1c2343caff1d705951026cc4",
      "tree": {
        "sha": "c4ad99b748548d76a15ffaf32d9dad44c774e1ec",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c4ad99b748548d76a15ffaf32d9dad44c774e1ec"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c4ad99b748548d76a15ffaf32d9dad44c774e1ec\nparent 3c06926cf21dcca3074ef51506f556b2286c299b\nauthor furszy <matiasfurszyfer@protonmail.com> 1684590677 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1686343943 -0300\n\nReturn EXIT_FAILURE on post-init fatal errors\n\nIt seems odd to return `EXIT_SUCCESS` when the node aborted\nexecution due a fatal internal error or any post-init problem\nthat triggers an unrequested shutdown.\n\ne.g. blocks or coins db I/O errors, disconnect block failure,\nfailure during thread import (external blocks loading process\nerror), among others.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmSDkQcACgkQXdI8zGhq\npiMjgQ//XbK7EWfMR6VyeVkp1ZN4X5wJOfFRE09bgdyFrFmz4ISxEeqgaZ1P5Qu2\nB5yPEGbb6cXyLiPdK3JEElyG+CBV9uF23j3H+iDNsab1t1/g3+TCNSF74OePpG7R\n33hkkeZXeRSSR+gRwMjtmse4OeinIvICF6AmWGhJZ1CHT+HxG7iGkYy0IqphszE3\nq4CmVmT+TP37K8PoM8YsrybbutcrYRQuvpM7MHcPPIWlNTd0E67kqjrt0wj6yk5t\naNQ7bXsWuR7pKL554zuT3gTlKIiAhPD7Gts1xp5tCceWY/ZIsNnISeAdb+HlUh6P\nyb8fpQgLDIrPnUZOmLa4zVcm45vWVeEn+3ihDascydBUXDfbM3gEqQ/e9kIAIpcd\n8A2NoxasSZTWsEEP8X19wVIDycvY1ebY7fUmCiHLuT5CdpKiux608/W0qACai9SW\nDyh9rxcrPgdPWLtBPK0yzWaGKSy/DPsLcbZ6KPGYeAShm7MHDa+d7XormdsgbCZ3\nNKrCwEPFBVgse6kk3u+riDs0v3aj9khMpvoh47j+KV3DEI/J/dXFKkze76AmJpw7\ngIFBgJ0jCetj1fH8ql13Q/ViX18slljJu1CJmAp9gVJ7RB8l7OqYcBCWOb68Opqm\nUbpSprHid7vfjUW4kJ/b3E/NvF4g9yR/0SsICgSWrn1YggIChOc=\n=7y/I\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3c06926cf21dcca3074ef51506f556b2286c299b",
          "sha": "3c06926cf21dcca3074ef51506f556b2286c299b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3c06926cf21dcca3074ef51506f556b2286c299b"
        }
      ],
      "message": "Return EXIT_FAILURE on post-init fatal errors\n\nIt seems odd to return `EXIT_SUCCESS` when the node aborted\nexecution due a fatal internal error or any post-init problem\nthat triggers an unrequested shutdown.\n\ne.g. blocks or coins db I/O errors, disconnect block failure,\nfailure during thread import (external blocks loading process\nerror), among others.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-06-09T20:52:23Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-05-20T13:51:17Z"
      },
      "sha": "3b2c61e8198bcefb1c2343caff1d705951026cc4"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9488115948,
      "node_id": "HRFPE_lADOABII585maZ9VzwAAAAI1iSjs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9488115948",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-09T20:55:04Z"
    },
    {
      "event": "commented",
      "id": 1585125402,
      "node_id": "IC_kwDOABII585eexga",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1585125402",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-09T21:01:55Z",
      "updated_at": "2023-06-09T21:01:55Z",
      "author_association": "MEMBER",
      "body": "Thanks @ryanofsky!\r\nFeedback tackled. Small [diff](https://github.com/bitcoin/bitcoin/compare/61fe1af01418d8b93d38aba8aeb65aecfa6a95cd..da60d86bfbe7fe49ce7181b5b394c0e3d8c53854).",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1585125402",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "mentioned",
      "id": 9488164661,
      "node_id": "MEE_lADOABII585maZ9VzwAAAAI1iec1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9488164661",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-09T21:01:56Z"
    },
    {
      "event": "subscribed",
      "id": 9488164674,
      "node_id": "SE_lADOABII585maZ9VzwAAAAI1iedC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9488164674",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-09T21:01:56Z"
    },
    {
      "event": "unlabeled",
      "id": 9488503847,
      "node_id": "UNLE_lADOABII585maZ9VzwAAAAI1jxQn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9488503847",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-09T22:02:50Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1473159658,
      "node_id": "PRR_kwDOABII585XzqHq",
      "url": null,
      "actor": null,
      "commit_id": "da60d86bfbe7fe49ce7181b5b394c0e3d8c53854",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK da60d86bfbe7fe49ce7181b5b394c0e3d8c53854\r\n\r\nThanks for following up on earlier suggestions. Left some new comments below, but this also looks good in it's current form.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1473159658",
      "submitted_at": "2023-06-09T23:25:03Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ5MjcxNjdmODU1ZjhlZDNiYmY2ZDI3NjZmNjEyMjlmNzQyZTYzMmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4927167f855f8ed3bbf6d2766f61229f742e632a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4927167f855f8ed3bbf6d2766f61229f742e632a",
      "tree": {
        "sha": "d6cc80afde57f8374588f492d8cdcde471b4a80b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d6cc80afde57f8374588f492d8cdcde471b4a80b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d6cc80afde57f8374588f492d8cdcde471b4a80b\nparent 3b2c61e8198bcefb1c2343caff1d705951026cc4\nauthor furszy <matiasfurszyfer@protonmail.com> 1686237383 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1686406229 -0300\n\ngui: return EXIT_FAILURE on post-init fatal errors\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmSEhFUACgkQXdI8zGhq\npiNA3Q//X0vEr9xcoRABaCudv7r1Jrsxyv6n+rWGb/+/wwUCqJLi/+xxdsp+fMwq\n5w9E1YXYASeMQ2IxfGU2GOgkA/ngInidQqgjVBwi1MA4K+yS1e9CyqFj0tu+gxY9\nEmKQSvpFfJwh3bYE6GUp/PkXcOOQlt8CWX/dMoV3x3QT3wmzC2/M9f/elRTyXSDH\n97PgPxAG2QfKUrb3FJosfZOhDwww2+9AQRl45VsV+hLCNfH785PeUlhetQ6CdPAl\nF4hYrVkEE65+AHtv3L190DB24YdYGxY2JF+HGo8U1jgdIazSKHKv7wpWof4zjALb\nBgVEaxput6g45VoMbD/3I7myDO0/3Kkt14X9SZmdnepggH/qvOcaURc3BYyrKmdv\nlVUkKQenWhcnkoiPCdJ/mgyHXFBCj1fJB+o336aT/VZwZGtKIwhh9cwEMzhnmJCa\nEGuvzxMQEkKTHXn8vPLitkWFvucegZ9yGrG+XLShhc9G8wdC5aouI3d3VAgOpYS6\nS+BgBLsH5gZQSF57m212h+UfGCA9wjI7FiOgnmAuv6+ACxijlnN+hg3OVi1k6tTC\nhslj+try8GC8y4zpJT8hsVp3HO/CEho5/fpJ0qFp3fIJq7yEpYTo6qFxFUH+tLCi\n/fVLQyAREJiY6BJHvE8PBBqAUhsw+8p+RoO2rRVw4HpHEqq+/SI=\n=aEbi\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3b2c61e8198bcefb1c2343caff1d705951026cc4",
          "sha": "3b2c61e8198bcefb1c2343caff1d705951026cc4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3b2c61e8198bcefb1c2343caff1d705951026cc4"
        }
      ],
      "message": "gui: return EXIT_FAILURE on post-init fatal errors",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-06-10T14:10:29Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-06-08T15:16:23Z"
      },
      "sha": "4927167f855f8ed3bbf6d2766f61229f742e632a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDYxYzU2OWFiNjA2OWQwNDA3OWEwODMxNDY4ZWI3MTM5ODM5MTk2MzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/61c569ab6069d04079a0831468eb713983919636",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/61c569ab6069d04079a0831468eb713983919636",
      "tree": {
        "sha": "8938fc5fca28dc4ef57587eb7ed513980d65fecc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8938fc5fca28dc4ef57587eb7ed513980d65fecc"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 8938fc5fca28dc4ef57587eb7ed513980d65fecc\nparent 4927167f855f8ed3bbf6d2766f61229f742e632a\nauthor furszy <matiasfurszyfer@protonmail.com> 1686319511 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1686406229 -0300\n\nrefactor: decouple early return commands from AppInit\n\nCleaned up the init flow to make it more obvious when\nthe 'exit_status' value will and won't be returned.\n\nThis is because it was confusing that `AppInit` was\nreturning true under two different circumstances:\n\n1) When bitcoind was launched only to retrieve the \"-help\"\nor \"-version\" information. In this case, the app was\nnot initialized.\n\n2) When the user triggers a shutdown. In this case,\nthe app was fully initialized.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmSEhFUACgkQXdI8zGhq\npiNUiQ//ajgSN2UkP5X0iVlQwGiI/qwGoxHAc/ZYgXPEqWYijUsWUhB3CSn5IZI8\n8aQWJQeE9rlZEjPLNxdz7/uMTHyP+4JX45fR/In19IDx4yiyR0po40LisG9A3oZB\nRvVmZsHe79MBstuQaXXE9zJW5HvV6LO8PUQS4uGd+U4TluIuEe+OUEl06r0qkpHo\nAtsYTCIZwHYA983JSDySWgM3k8AasZRD0Ouk91Kq+/Q7x4Kh1bQWnju0w6fXo/GL\nEAwlROHX1beO+ehoCmRyyXPYWV9EPVhYCjbInxs+yDee4zObap1jcHkHJ0yURDZ3\nt+d3MTSpfO+E9iYfSBa2LngtKaDBI7rRe6GyN9YDdwkabMqX93LeX/NHDrarQktu\nyYPfyPCs4YcUzZvbvfCBqizBWnBxVDJ/Sh3W29u0COyEJdT3tpizg1NFGS1Be1aI\n0Tpc5kHf7G6Tcjsj1Z+cOWUwPfmDN8AMZ8CVFFJkWHZcF8KqcBK7JqdhTiSZfflw\n4jn+LzLEkvgJGWgZSqjqSQIfmOez4ng2GgunqeAkgVot13CIKFkDUf2aycTi0ThQ\nSeOrvR6SzjRJ0R7VX6RIWJlUTsgqSaZKCoeh0faBndoAkX17xq/xM7Vhzu4DC/MM\n7RrOBS/WnTAhEEyzNYwb0VRVIgKKZ5J/4j3rOSh0zvWvViESFRM=\n=IFIn\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4927167f855f8ed3bbf6d2766f61229f742e632a",
          "sha": "4927167f855f8ed3bbf6d2766f61229f742e632a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4927167f855f8ed3bbf6d2766f61229f742e632a"
        }
      ],
      "message": "refactor: decouple early return commands from AppInit\n\nCleaned up the init flow to make it more obvious when\nthe 'exit_status' value will and won't be returned.\n\nThis is because it was confusing that `AppInit` was\nreturning true under two different circumstances:\n\n1) When bitcoind was launched only to retrieve the \"-help\"\nor \"-version\" information. In this case, the app was\nnot initialized.\n\n2) When the user triggers a shutdown. In this case,\nthe app was fully initialized.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-06-10T14:10:29Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-06-09T14:05:11Z"
      },
      "sha": "61c569ab6069d04079a0831468eb713983919636"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9490982374,
      "node_id": "HRFPE_lADOABII585maZ9VzwAAAAI1tOXm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9490982374",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-10T14:26:43Z"
    },
    {
      "event": "commented",
      "id": 1585690708,
      "node_id": "IC_kwDOABII585eg7hU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1585690708",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-10T14:40:52Z",
      "updated_at": "2023-06-10T14:40:52Z",
      "author_association": "MEMBER",
      "body": "Updated per feedback, thanks ryanofsky. [Tiny diff](https://github.com/bitcoin/bitcoin/compare/da60d86bfbe7fe49ce7181b5b394c0e3d8c53854..61c569ab6069d04079a0831468eb713983919636):\r\n\r\n- Removed `BitcoinApplication::getExitStatus`.\r\n- Moved `exit_status.store(EXIT_FAILURE)` to the interface `appInitMain()` method to be compatible with [#10102](https://github.com/bitcoin/bitcoin/pull/10102).\r\n\r\n",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1585690708",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "labeled",
      "id": 9491088848,
      "node_id": "LE_lADOABII585maZ9VzwAAAAI1toXQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9491088848",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-10T15:29:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1585761906,
      "node_id": "IC_kwDOABII585ehM5y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1585761906",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-10T18:24:56Z",
      "updated_at": "2023-06-10T18:24:56Z",
      "author_association": "MEMBER",
      "body": "concept ACK\r\n\r\nI was looking for this writing https://github.com/bitcoin/bitcoin/pull/27850 was surprised that a fatal internal error didn't satisfy the python test for assert init error on startup",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#issuecomment-1585761906",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27708"
    },
    {
      "event": "unlabeled",
      "id": 9493071807,
      "node_id": "UNLE_lADOABII585maZ9VzwAAAAI11Me_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9493071807",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-11T07:39:01Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1474247182,
      "node_id": "PRR_kwDOABII585X3zoO",
      "url": null,
      "actor": null,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 61c569ab6069d04079a0831468eb713983919636",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1474247182",
      "submitted_at": "2023-06-12T07:44:07Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "review_requested",
      "id": 9498761915,
      "node_id": "RRE_lADOABII585maZ9VzwAAAAI2K5q7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9498761915",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-12T07:44:12Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 1474958262,
      "node_id": "PRR_kwDOABII585X6hO2",
      "url": null,
      "actor": null,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 61c569ab6069d04079a0831468eb713983919636\r\n\r\nThis should be a really nice change because it actually makes `bitcoind` return an error code when there is an error. But it also clears out `StartShutdown` clutter and makes the `main()` function comprehensible, so is a nice code improvment.\r\n\r\nI think this would be ready for merge if another reviewer added an ACK.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1474958262",
      "submitted_at": "2023-06-12T13:40:39Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "review_requested",
      "id": 9502900497,
      "node_id": "RRE_lADOABII585maZ9VzwAAAAI2asER",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9502900497",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-12T13:40:44Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_request_removed",
      "id": 9502934261,
      "node_id": "RRRE_lADOABII585maZ9VzwAAAAI2a0T1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9502934261",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-12T13:43:41Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 1475189635,
      "node_id": "PRR_kwDOABII585X7ZuD",
      "url": null,
      "actor": null,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 61c569ab6069d04079a0831468eb713983919636\r\n\r\nA few non-breaking questions below. Reviewed each commit and ran all tests locally. Confirmed that #2039 behavior now exits with code `1` instead of `0` like it did on master. Also confirmed that remaining `StartShutdown()` calls are all user-triggered.\r\n\r\n<details><summary>Show Signature</summary>\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA256\r\n\r\nACK 61c569ab6069d04079a0831468eb713983919636\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQIzBAEBCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmSHODIACgkQ5+KYS2KJ\r\nyTpd4g/+I56MeCxiLqHXVtFe2yUw9JY1wYNeo6kuLU2A5Yx+kWeTBKZl9dA/lTIu\r\n5/TYbFaTai5px1HZzynnfD+XrFLtjaxynGqHhbfRmX8cGUyo5WkRRY6IcYUuqiXs\r\nFBUsTqlXrEq00j012RL63xpiZhswUZTEpw3BzHD5c1IlK7FkdCWCVT0xl3o68ivs\r\nW0pfXRXnAcAtseWgMlrZtPHGaEsQS1CMHAaz2KXvRPbOCu0p0vjAuGkzqpBZuu3x\r\n2kzVcPnuUunb6F+t62Q2Mrk4bCuKYlT9I5CozGVV8W9rWJODvzKyTCmTLCXbIxC0\r\nMrGN6DHn0AzBbCBm6E65o5B80czNzM0Wci/7ZElmjBkDJxWP0KPDtaNp9QsazYbO\r\nAVWhKfMMBDEqmwRyXvMK1iv/zJrZ2Y2QQf/LPt1vbLjVwHT2wF7HyEOUJHKKmrI2\r\nfLWf62JKvBvrrNdeb12s5ZaMwMgcM5UA/8H2YuDw/zOvgJYZZiXAiRI3ETDvsm5B\r\ndFIgn0M5njMq3UFgRl2hHW/qBwKiufs8QvrKw8zxuXxF5H+4sQcwCVtiwe//dsDY\r\n179WwJQcQ3t7iwg1TNgscv9nVY5nRJvPzHs4iopLbPhks60akDic1g6ruMCdbAEj\r\n/Md+oVk7d59HJLvhDlR6xpS8iKycyadFcsiMlOuK/Xn56ZPLKt0=\r\n=N/HN\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\npinheadmz's public key is [on keybase](https://keybase.io/pinheadmz/pgp_keys.asc?fingerprint=e61773cd6e01040e2f1bd78ce7e2984b6289c93a)\r\n</details>\r\n",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1475189635",
      "submitted_at": "2023-06-12T15:24:32Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "reviewed",
      "id": 1475379282,
      "node_id": "PRR_kwDOABII585X8IBS",
      "url": null,
      "actor": null,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code-review ACK 61c569ab6069d04079a0831468eb713983919636",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1475379282",
      "submitted_at": "2023-06-12T16:53:35Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "merged",
      "id": 9505134235,
      "node_id": "ME_lADOABII585maZ9VzwAAAAI2jNab",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9505134235",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c92fd638860c5b4477851fb3790bc8068f808d3e",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c92fd638860c5b4477851fb3790bc8068f808d3e",
      "created_at": "2023-06-12T16:55:02Z"
    },
    {
      "event": "closed",
      "id": 9505134280,
      "node_id": "CE_lADOABII585maZ9VzwAAAAI2jNbI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9505134280",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-12T16:55:02Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 9505147629,
      "node_id": "HRDE_lADOABII585maZ9VzwAAAAI2jQrt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9505147629",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-12T16:55:50Z"
    },
    {
      "event": "reviewed",
      "id": 1476651234,
      "node_id": "PRR_kwDOABII585YA-ji",
      "url": null,
      "actor": null,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "left a question / test nit for follow-up",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#pullrequestreview-1476651234",
      "submitted_at": "2023-06-13T09:08:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
    },
    {
      "event": "referenced",
      "id": 9541962073,
      "node_id": "REFE_lADOABII585maZ9VzwAAAAI4vslZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9541962073",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "160ad972a43129dcf531e69f7c11f8aa83a1f40d",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/160ad972a43129dcf531e69f7c11f8aa83a1f40d",
      "created_at": "2023-06-15T15:24:29Z"
    },
    {
      "event": "referenced",
      "id": 10111783471,
      "node_id": "REFE_lADOABII585maZ9VzwAAAAJatZIv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10111783471",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "b2be79f213e11c42db5fed87d98697c84bc0a90a",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/b2be79f213e11c42db5fed87d98697c84bc0a90a",
      "created_at": "2023-08-16T18:56:28Z"
    },
    {
      "event": "referenced",
      "id": 10111783489,
      "node_id": "REFE_lADOABII585maZ9VzwAAAAJatZJB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10111783489",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3be6b482c4d7311360228720fecb13ea22d21631",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/3be6b482c4d7311360228720fecb13ea22d21631",
      "created_at": "2023-08-16T18:56:28Z"
    },
    {
      "event": "referenced",
      "id": 10111783504,
      "node_id": "REFE_lADOABII585maZ9VzwAAAAJatZJQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10111783504",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1edcbb9ae5f2526114fbe870317c80592439cab8",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/1edcbb9ae5f2526114fbe870317c80592439cab8",
      "created_at": "2023-08-16T18:56:28Z"
    },
    {
      "event": "referenced",
      "id": 10111783515,
      "node_id": "REFE_lADOABII585maZ9VzwAAAAJatZJb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10111783515",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a6fbe3e6b5991317b6d1bf38fd3d8b44890ee22a",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/a6fbe3e6b5991317b6d1bf38fd3d8b44890ee22a",
      "created_at": "2023-08-16T18:56:28Z"
    },
    {
      "event": "locked",
      "id": 15537703208,
      "node_id": "LOE_lADOABII585maZ9VzwAAAAOeHoko",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15537703208",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-05T07:15:46Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1205560303",
      "pull_request_review_id": 1443959388,
      "id": 1205560303,
      "node_id": "PRRC_kwDOABII585H22Pv",
      "diff_hunk": "@@ -19,6 +19,9 @@ bool InitShutdownState();\n /** Request shutdown of the application. */\n void StartShutdown();\n \n+/** Request application shutdown due an internal error. */\n+void StartErrorShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Could this just be a local static function in shutdown.cpp and not exposed in the header?",
      "created_at": "2023-05-25T13:56:07Z",
      "updated_at": "2023-05-25T15:13:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1205560303",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1205560303"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1205561022",
      "pull_request_review_id": 1443959388,
      "id": 1205561022,
      "node_id": "PRRC_kwDOABII585H22a-",
      "diff_hunk": "@@ -29,7 +32,9 @@ bool ShutdownRequested();\n \n /** Wait for StartShutdown to be called in any thread. This can only be used\n  * from a single thread.\n+ * Returns true if shutdown was requested by the user. Otherwise, it's an\n+ * internally requested shutdown which only happens when an error arises.\n  */\n-void WaitForShutdown();\n+bool WaitForShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 18,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Does it make sense to add `[[nodiscard]]` here?",
      "created_at": "2023-05-25T13:56:40Z",
      "updated_at": "2023-05-25T15:13:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1205561022",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1205561022"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1205612087",
      "pull_request_review_id": 1443959388,
      "id": 1205612087,
      "node_id": "PRRC_kwDOABII585H3C43",
      "diff_hunk": "@@ -29,7 +32,9 @@ bool ShutdownRequested();\n \n /** Wait for StartShutdown to be called in any thread. This can only be used\n  * from a single thread.\n+ * Returns true if shutdown was requested by the user. Otherwise, it's an\n+ * internally requested shutdown which only happens when an error arises.",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 15,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This comment seems a bit inaccurate, e.g. we may have `stop_at_height` set, but shutdown is still triggered internally. There is also one error case in https://github.com/bitcoin/bitcoin/blob/master/src/node/blockstorage.cpp#L931 that triggers a normal shutdown.",
      "created_at": "2023-05-25T14:33:12Z",
      "updated_at": "2023-05-25T15:13:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1205612087",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1205612087"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206869341",
      "pull_request_review_id": 1446355484,
      "id": 1206869341,
      "node_id": "PRRC_kwDOABII585H711d",
      "diff_hunk": "@@ -19,6 +19,9 @@ bool InitShutdownState();\n /** Request shutdown of the application. */\n void StartShutdown();\n \n+/** Request application shutdown due an internal error. */\n+void StartErrorShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": 1205560303,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The reason behind that is https://github.com/bitcoin/bitcoin/pull/27607#discussion_r1199624849.\r\nBut.. could not expose it and move the caller to use `AbortNode()` instead. Same as we do with the external block import failures.\r\n\r\n",
      "created_at": "2023-05-26T14:26:09Z",
      "updated_at": "2023-05-26T14:26:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1206869341",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206869341"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206881682",
      "pull_request_review_id": 1446372379,
      "id": 1206881682,
      "node_id": "PRRC_kwDOABII585H742S",
      "diff_hunk": "@@ -19,6 +19,9 @@ bool InitShutdownState();\n /** Request shutdown of the application. */\n void StartShutdown();\n \n+/** Request application shutdown due an internal error. */\n+void StartErrorShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": 1205560303,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Still, in order to do that in the cleanest possible way, will need to refactor `shutdown.cpp`, so `AbortNode` is placed after the static `StartErrorShutdown` function. Which I'm not so sure that worth it due the conflicts that could cause with your PRs. Thoughts?",
      "created_at": "2023-05-26T14:34:17Z",
      "updated_at": "2023-05-26T14:34:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1206881682",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206881682"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206916333",
      "pull_request_review_id": 1446418102,
      "id": 1206916333,
      "node_id": "PRRC_kwDOABII585H8BTt",
      "diff_hunk": "@@ -19,6 +19,9 @@ bool InitShutdownState();\n /** Request shutdown of the application. */\n void StartShutdown();\n \n+/** Request application shutdown due an internal error. */\n+void StartErrorShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": 1205560303,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "So IIUC, this call [here](https://github.com/bitcoin/bitcoin/commit/ca3041984cf3665e27b6783c923ab1c32682500a#diff-b1e19192258d83199d8adaa5ac31f067af98f63554bfdd679bd8e8073815e69dR1669) would call `StartErrorShutdown`?",
      "created_at": "2023-05-26T14:58:44Z",
      "updated_at": "2023-05-26T15:08:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1206916333",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206916333"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206928091",
      "pull_request_review_id": 1446440158,
      "id": 1206928091,
      "node_id": "PRRC_kwDOABII585H8ELb",
      "diff_hunk": "@@ -19,6 +19,9 @@ bool InitShutdownState();\n /** Request shutdown of the application. */\n void StartShutdown();\n \n+/** Request application shutdown due an internal error. */\n+void StartErrorShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": 1205560303,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yeah [here](https://github.com/bitcoin/bitcoin/commit/bc2315d86f13e6e15f681ecaf5efc9b33e6128a3#diff-b1e19192258d83199d8adaa5ac31f067af98f63554bfdd679bd8e8073815e69dR1675), I just rebased #27607 on top of this one.\r\n\r\nNo problem on using `AbortNode` there. Just would need to bubble up the indexes error so it can be provided to `AbortNode`. Which.. isn't bad as it will remove another `ui_interface` dependency.",
      "created_at": "2023-05-26T15:05:33Z",
      "updated_at": "2023-05-26T15:48:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1206928091",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206928091"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206967261",
      "pull_request_review_id": 1446487768,
      "id": 1206967261,
      "node_id": "PRRC_kwDOABII585H8Nvd",
      "diff_hunk": "@@ -29,7 +32,9 @@ bool ShutdownRequested();\n \n /** Wait for StartShutdown to be called in any thread. This can only be used\n  * from a single thread.\n+ * Returns true if shutdown was requested by the user. Otherwise, it's an\n+ * internally requested shutdown which only happens when an error arises.",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 15,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": 1205612087,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> This comment seems a bit inaccurate, e.g. we may have `stop_at_height` set, but shutdown is still triggered internally. There is also one error case in https://github.com/bitcoin/bitcoin/blob/master/src/node/blockstorage.cpp#L931 that triggers a normal shutdown.\r\n\r\nI would label `stop_at_height` as an action requested by the user. The user had to provide `-stopatheight` at startup so the shutdown is expected.\r\n\r\nOn the other hand, https://github.com/bitcoin/bitcoin/blob/master/src/node/blockstorage.cpp#L931 seems to be a good candidate for `AbortNode`. It's a error in the `ThreadImport`, so either the db data got modified in some wrong way or the user provided invalid external blocks.",
      "created_at": "2023-05-26T15:33:47Z",
      "updated_at": "2023-05-26T15:33:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1206967261",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206967261"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206969917",
      "pull_request_review_id": 1446491982,
      "id": 1206969917,
      "node_id": "PRRC_kwDOABII585H8OY9",
      "diff_hunk": "@@ -29,7 +32,9 @@ bool ShutdownRequested();\n \n /** Wait for StartShutdown to be called in any thread. This can only be used\n  * from a single thread.\n+ * Returns true if shutdown was requested by the user. Otherwise, it's an\n+ * internally requested shutdown which only happens when an error arises.\n  */\n-void WaitForShutdown();\n+bool WaitForShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 18,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": 1205561022,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "sure",
      "created_at": "2023-05-26T15:35:51Z",
      "updated_at": "2023-05-26T15:35:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1206969917",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1206969917"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1207346355",
      "pull_request_review_id": 1446966193,
      "id": 1207346355,
      "node_id": "PRRC_kwDOABII585H9qSz",
      "diff_hunk": "@@ -19,6 +19,9 @@ bool InitShutdownState();\n /** Request shutdown of the application. */\n void StartShutdown();\n \n+/** Request application shutdown due an internal error. */\n+void StartErrorShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": 1205560303,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Which.. isn't bad as it will remove another ui_interface dependency.\r\n\r\nCan you elaborate on this point? `AbortNode` still relies on `ui_interface` from what I can tell. \r\n\r\nFrom my current understanding both the `StartShutdown` in `ThreadImport` and in the check are call shutdown and node `AbortNode`, because `BlockImport` might run before the ui is available (this is me guessing out of historical reasons). I am not sold on this point though, since this runs in another thread and we also provide the noui consumer of the ui interface. So I think these should both become calls to `AbortNode`.",
      "created_at": "2023-05-26T21:03:31Z",
      "updated_at": "2023-05-26T21:03:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1207346355",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1207346355"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1207406938",
      "pull_request_review_id": 1447004254,
      "id": 1207406938,
      "node_id": "PRRC_kwDOABII585H95Fa",
      "diff_hunk": "@@ -19,6 +19,9 @@ bool InitShutdownState();\n /** Request shutdown of the application. */\n void StartShutdown();\n \n+/** Request application shutdown due an internal error. */\n+void StartErrorShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": 1205560303,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> > Which.. isn't bad as it will remove another ui_interface dependency.\r\n> \r\n> Can you elaborate on this point? `AbortNode` still relies on `ui_interface` from what I can tell.\r\n\r\nOk, sorry for the confusion.\r\n\r\nThe ui_interface dependency that can be removed is the `base.cpp` one. Thus why said to \"bubble up\" the error string up to `init.cpp` instead of calling `InitError` from the index base class `Start` method.\r\n\r\n> From my current understanding both the `StartShutdown` in `ThreadImport` and in the check are call shutdown and node `AbortNode`, because `BlockImport` might run before the ui is available (this is me guessing out of historical reasons).\r\n\r\n`AbortNode` isn't doing anything special. We already use `InitError` in `init.cpp` prior spawning the import thread.\r\nWhat the node will do when there is no gui is print the error to the command line, and the debug file, prior shutting down (using the noui consumer as you said).\r\n\r\n> I am not sold on this point though, since this runs in another thread and we also provide the noui consumer of the ui interface. So I think these should both become calls to `AbortNode`.\r\n\r\nYeah, that is my idea as well. The `ThreadImport` \"fatal\" failures should use `AbortNode`.",
      "created_at": "2023-05-26T21:52:02Z",
      "updated_at": "2023-05-26T22:02:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1207406938",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1207406938"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1213346408",
      "pull_request_review_id": 1455780287,
      "id": 1213346408,
      "node_id": "PRRC_kwDOABII585IUjJo",
      "diff_hunk": "@@ -29,7 +32,9 @@ bool ShutdownRequested();\n \n /** Wait for StartShutdown to be called in any thread. This can only be used\n  * from a single thread.\n+ * Returns true if shutdown was requested by the user. Otherwise, it's an\n+ * internally requested shutdown which only happens when an error arises.\n  */\n-void WaitForShutdown();\n+bool WaitForShutdown();",
      "path": "src/shutdown.h",
      "position": null,
      "original_position": 18,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c4e32eb72cae62eff510692a8df08181a2202a9d",
      "in_reply_to_id": 1205561022,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Ended up not adding this change to not modify `AbortShutdown()`.",
      "created_at": "2023-06-01T15:38:20Z",
      "updated_at": "2023-06-01T15:38:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1213346408",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1213346408"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224398844",
      "pull_request_review_id": 1472293444,
      "id": 1224398844,
      "node_id": "PRRC_kwDOABII585I-tf8",
      "diff_hunk": "@@ -112,12 +112,8 @@ int fork_daemon(bool nochdir, bool noclose, TokenPipeEnd& endpoint)\n \n #endif\n \n-static bool AppInit(NodeContext& node, int argc, char* argv[])\n+static bool ParseArgs(NodeContext& node, int argc, char* argv[])",
      "path": "src/bitcoind.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "61fe1af01418d8b93d38aba8aeb65aecfa6a95cd",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"refactor: decouple early return commands from AppInit\" (61fe1af01418d8b93d38aba8aeb65aecfa6a95cd)\r\n\r\nWould be nice to just pass `ArgsManager&` to this function instead of `NodeContext& node`, since accessing other parts of the context is not needed.",
      "created_at": "2023-06-09T14:39:50Z",
      "updated_at": "2023-06-09T15:26:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224398844",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224398844"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 115,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224430665",
      "pull_request_review_id": 1472293444,
      "id": 1224430665,
      "node_id": "PRRC_kwDOABII585I-1RJ",
      "diff_hunk": "@@ -800,7 +800,7 @@ std::set<BlockFilterType> g_enabled_filter_types;\n     std::terminate();\n };\n \n-bool AppInitBasicSetup(const ArgsManager& args)\n+bool AppInitBasicSetup(const ArgsManager& args, NodeContext& node)",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "aa415e885e4d693bc861a0b157761deb714e2b91",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"refactor: index: use `AbortNode` in fatal error helper\" (3c06926cf21dcca3074ef51506f556b2286c299b)\r\n\r\nIt would be slightly better to just pass a reference to node.exit_status instead of passing the whole NodeContext, because passing NodeContext exposes a lot of other state this function doesn't need to have access to. But it's not important because #27711 gets rid of the InitShutdownState function and will drop the parameter anyway.",
      "created_at": "2023-06-09T15:05:13Z",
      "updated_at": "2023-06-09T15:26:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224430665",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224430665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 803,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224433824",
      "pull_request_review_id": 1472293444,
      "id": 1224433824,
      "node_id": "PRRC_kwDOABII585I-2Cg",
      "diff_hunk": "@@ -398,8 +399,7 @@ void BitcoinApplication::initializeResult(bool success, interfaces::BlockAndHead\n     qDebug() << __func__ << \": Initialization result: \" << success;\n \n     // Set exit result.",
      "path": "src/qt/bitcoin.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c8806e972f2be9f8a05bf11b1f6a8a2e70e01962",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"gui: return EXIT_FAILURE on post-init fatal errors\" (c8806e972f2be9f8a05bf11b1f6a8a2e70e01962)\r\n\r\nShould delete the \"Set exit result\" comment here or move it down below. Probably fine to delete because `exit_status.store(EXIT_FAILURE)` should pretty clear by itself.",
      "created_at": "2023-06-09T15:08:24Z",
      "updated_at": "2023-06-09T15:26:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224433824",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224433824"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 401,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224438294",
      "pull_request_review_id": 1472293444,
      "id": 1224438294,
      "node_id": "PRRC_kwDOABII585I-3IW",
      "diff_hunk": "@@ -464,6 +465,10 @@ void BitcoinApplication::handleNonFatalException(const QString& message)\n         QLatin1String(\"<br><br>\") + GUIUtil::MakeHtmlLink(message, PACKAGE_BUGREPORT));\n }\n \n+int BitcoinApplication::getExitStatus() const {\n+    return node().context()->exit_status.load();",
      "path": "src/qt/bitcoin.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c8806e972f2be9f8a05bf11b1f6a8a2e70e01962",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"gui: return EXIT_FAILURE on post-init fatal errors\" (c8806e972f2be9f8a05bf11b1f6a8a2e70e01962)\r\n\r\nThis is ok for now, but if you want to future-proof the code and make it compatible with #10102, it would be better to add an `interfaces::Node::getExitStatus()` method and have GUI call `node().getExitStatus()`. The problem is that with  #10102, `node().context()` will return null when the node is running in a different process than the GUI.\r\n\r\nI also think it might be clearer just to delete the `BitcoinApplication::getExitStatus` method entirely and just `return node().getExitStatus()` at the end of `GuiMain()`\r\n\r\nEDIT: I guess you would also need to add a `interfaces::Node::setExitStatus()` method as well to replace 'm_node->context()->exit_status.store` above. Would be nice, but this is also fine for now.",
      "created_at": "2023-06-09T15:13:04Z",
      "updated_at": "2023-06-09T15:34:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224438294",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224438294"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224448255",
      "pull_request_review_id": 1472293444,
      "id": 1224448255,
      "node_id": "PRRC_kwDOABII585I-5j_",
      "diff_hunk": "@@ -153,17 +172,6 @@ static bool AppInit(NodeContext& node, int argc, char* argv[])\n     std::any context{&node};\n     try\n     {\n-        if (auto error = common::InitConfig(args)) {",
      "path": "src/bitcoind.cpp",
      "position": 56,
      "original_position": 55,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "61fe1af01418d8b93d38aba8aeb65aecfa6a95cd",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"refactor: decouple early return commands from AppInit\" (61fe1af01418d8b93d38aba8aeb65aecfa6a95cd)\r\n\r\nNote for reviewers: Moving the `common::InitConfig` call out of the try block means if InitConfig throws an exception it won't be caught. But this is good and should not change behavior because InitConfig is already catching `std::exception` internally and should just be doing basic parsing and not triggering other types of exceptions.",
      "created_at": "2023-06-09T15:22:02Z",
      "updated_at": "2023-06-09T15:26:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224448255",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224448255"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 156,
      "original_line": 156,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224765526",
      "pull_request_review_id": 1473043683,
      "id": 1224765526,
      "node_id": "PRRC_kwDOABII585JAHBW",
      "diff_hunk": "@@ -464,6 +465,10 @@ void BitcoinApplication::handleNonFatalException(const QString& message)\n         QLatin1String(\"<br><br>\") + GUIUtil::MakeHtmlLink(message, PACKAGE_BUGREPORT));\n }\n \n+int BitcoinApplication::getExitStatus() const {\n+    return node().context()->exit_status.load();",
      "path": "src/qt/bitcoin.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c8806e972f2be9f8a05bf11b1f6a8a2e70e01962",
      "in_reply_to_id": 1224438294,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> I also think it might be clearer just to delete the BitcoinApplication::getExitStatus method entirely and just return node().getExitStatus() at the end of GuiMain()\r\n\r\nThat was my first idea too but `GuiMain()` is a static function with no direct access to the node interface. The interface is created inside the `BitcoinApplication::createNode` class method.\r\n\r\n> This is ok for now, but if you want to future-proof the code and make it compatible with https://github.com/bitcoin/bitcoin/pull/10102, it would be better to add an interfaces::Node::getExitStatus() method and have GUI call node().getExitStatus().\r\n\r\nYeah, good. Added `getExitStatus()` to the node interface.",
      "created_at": "2023-06-09T20:53:52Z",
      "updated_at": "2023-06-09T20:53:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224765526",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224765526"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224766573",
      "pull_request_review_id": 1473044775,
      "id": 1224766573,
      "node_id": "PRRC_kwDOABII585JAHRt",
      "diff_hunk": "@@ -398,8 +399,7 @@ void BitcoinApplication::initializeResult(bool success, interfaces::BlockAndHead\n     qDebug() << __func__ << \": Initialization result: \" << success;\n \n     // Set exit result.",
      "path": "src/qt/bitcoin.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c8806e972f2be9f8a05bf11b1f6a8a2e70e01962",
      "in_reply_to_id": 1224433824,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done, deleted",
      "created_at": "2023-06-09T20:55:04Z",
      "updated_at": "2023-06-09T20:55:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224766573",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224766573"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 401,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224767267",
      "pull_request_review_id": 1473045545,
      "id": 1224767267,
      "node_id": "PRRC_kwDOABII585JAHcj",
      "diff_hunk": "@@ -800,7 +800,7 @@ std::set<BlockFilterType> g_enabled_filter_types;\n     std::terminate();\n };\n \n-bool AppInitBasicSetup(const ArgsManager& args)\n+bool AppInitBasicSetup(const ArgsManager& args, NodeContext& node)",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "aa415e885e4d693bc861a0b157761deb714e2b91",
      "in_reply_to_id": 1224430665,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done. Refactored to pass `exit_status` ref.",
      "created_at": "2023-06-09T20:55:58Z",
      "updated_at": "2023-06-09T20:55:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224767267",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224767267"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 803,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224767427",
      "pull_request_review_id": 1473045674,
      "id": 1224767427,
      "node_id": "PRRC_kwDOABII585JAHfD",
      "diff_hunk": "@@ -112,12 +112,8 @@ int fork_daemon(bool nochdir, bool noclose, TokenPipeEnd& endpoint)\n \n #endif\n \n-static bool AppInit(NodeContext& node, int argc, char* argv[])\n+static bool ParseArgs(NodeContext& node, int argc, char* argv[])",
      "path": "src/bitcoind.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "61fe1af01418d8b93d38aba8aeb65aecfa6a95cd",
      "in_reply_to_id": 1224398844,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2023-06-09T20:56:06Z",
      "updated_at": "2023-06-09T20:56:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224767427",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224767427"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 115,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224770367",
      "pull_request_review_id": 1473049130,
      "id": 1224770367,
      "node_id": "PRRC_kwDOABII585JAIM_",
      "diff_hunk": "@@ -153,17 +172,6 @@ static bool AppInit(NodeContext& node, int argc, char* argv[])\n     std::any context{&node};\n     try\n     {\n-        if (auto error = common::InitConfig(args)) {",
      "path": "src/bitcoind.cpp",
      "position": 56,
      "original_position": 55,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "61fe1af01418d8b93d38aba8aeb65aecfa6a95cd",
      "in_reply_to_id": 1224448255,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "yeah, same note applies for the other loop that was moved out of the try catch. The one that calls `IsSwitchChar()`.",
      "created_at": "2023-06-09T20:59:05Z",
      "updated_at": "2023-06-09T20:59:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224770367",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224770367"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 156,
      "original_line": 156,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224879234",
      "pull_request_review_id": 1473159658,
      "id": 1224879234,
      "node_id": "PRRC_kwDOABII585JAiyC",
      "diff_hunk": "@@ -441,6 +440,7 @@ void BitcoinApplication::initializeResult(bool success, interfaces::BlockAndHead\n #endif\n         pollShutdownTimer->start(SHUTDOWN_POLLING_DELAY);\n     } else {\n+        m_node->context()->exit_status.store(EXIT_FAILURE);",
      "path": "src/qt/bitcoin.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "624340f9acbdd3c2d54c3824248e2c0cff4cf487",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"gui: return EXIT_FAILURE on post-init fatal errors\" (624340f9acbdd3c2d54c3824248e2c0cff4cf487)\r\n\r\nNot necessary to address here, but with #10102 when the node and GUI are running in separate processes, `m_node->context()` will be null, so this will crash.\r\n\r\nYou could fix and future-proof this by adding a `interfaces::Node::setExitStatus()` function, or just update the existing [`appInitMain()`](https://github.com/bitcoin/bitcoin/blob/153a6882f42fff3fdc63bf770d4c86a62c46c448/src/node/interfaces.cpp#L106-L109) function to set the error code:\r\n\r\n```c++\r\n    bool appInitMain(interfaces::BlockAndHeaderTipInfo* tip_info) override\r\n    {\r\n        if (!AppInitMain(*m_context, tip_info)) {\r\n            m_context->exit_status.store(EXIT_FAILURE);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n```\r\n\r\nIf you let `appInitMain` set the error code, you could also simplify GUI code even more, skipping `Q_EMIT initializeResult(rv, tip_info)` when `appInitMain` fails and getting rid of the `rv` parameter.",
      "created_at": "2023-06-09T23:16:03Z",
      "updated_at": "2023-06-09T23:25:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224879234",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224879234"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 443,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224882202",
      "pull_request_review_id": 1473159658,
      "id": 1224882202,
      "node_id": "PRRC_kwDOABII585JAjga",
      "diff_hunk": "@@ -464,6 +465,10 @@ void BitcoinApplication::handleNonFatalException(const QString& message)\n         QLatin1String(\"<br><br>\") + GUIUtil::MakeHtmlLink(message, PACKAGE_BUGREPORT));\n }\n \n+int BitcoinApplication::getExitStatus() const {\n+    return node().context()->exit_status.load();",
      "path": "src/qt/bitcoin.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c8806e972f2be9f8a05bf11b1f6a8a2e70e01962",
      "in_reply_to_id": 1224438294,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224765526\r\n\r\n> That was my first idea too but `GuiMain()` is a static function with no direct access to the node interface.\r\n\r\nI think it can just do `return app.node().getExitStatus();`. The `app.node()` method is public and already used in `GuiMain()`",
      "created_at": "2023-06-09T23:23:12Z",
      "updated_at": "2023-06-09T23:25:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1224882202",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1224882202"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1225398417",
      "pull_request_review_id": 1473431374,
      "id": 1225398417,
      "node_id": "PRRC_kwDOABII585JChiR",
      "diff_hunk": "@@ -441,6 +440,7 @@ void BitcoinApplication::initializeResult(bool success, interfaces::BlockAndHead\n #endif\n         pollShutdownTimer->start(SHUTDOWN_POLLING_DELAY);\n     } else {\n+        m_node->context()->exit_status.store(EXIT_FAILURE);",
      "path": "src/qt/bitcoin.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "624340f9acbdd3c2d54c3824248e2c0cff4cf487",
      "in_reply_to_id": 1224879234,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> You could fix and future-proof this by adding a interfaces::Node::setExitStatus() function, or just update the existing [appInitMain()](https://github.com/bitcoin/bitcoin/blob/153a6882f42fff3fdc63bf770d4c86a62c46c448/src/node/interfaces.cpp#L106-L109) function to set the error code.\r\n\r\nGreat, added it. Thanks!\r\n\r\n> If you let appInitMain set the error code, you could also simplify GUI code even more, skipping Q_EMIT initializeResult(rv, tip_info) when appInitMain fails and getting rid of the rv parameter.\r\n\r\nHmm, that would be nice but, in a quick glance, I don't think that we can remove the `rv` parameter without introducing another signal to the `InitExecutor` class (which wouldn't be bad). Because we still need to call to the shutdown function at the GUI level: the `BitcoinApplication::requestShutdown` that is called inside `BitcoinApplication::initializeResult` when the rv parameter is false.\r\n\r\nStill, even when I would love to keep cleaning stuff, maybe better to leave it for a follow-up so the gui related changes are minimal here.",
      "created_at": "2023-06-10T14:35:17Z",
      "updated_at": "2023-06-12T11:25:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1225398417",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1225398417"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 443,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1225399092",
      "pull_request_review_id": 1473431501,
      "id": 1225399092,
      "node_id": "PRRC_kwDOABII585JChs0",
      "diff_hunk": "@@ -464,6 +465,10 @@ void BitcoinApplication::handleNonFatalException(const QString& message)\n         QLatin1String(\"<br><br>\") + GUIUtil::MakeHtmlLink(message, PACKAGE_BUGREPORT));\n }\n \n+int BitcoinApplication::getExitStatus() const {\n+    return node().context()->exit_status.load();",
      "path": "src/qt/bitcoin.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "c8806e972f2be9f8a05bf11b1f6a8a2e70e01962",
      "in_reply_to_id": 1224438294,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done, added",
      "created_at": "2023-06-10T14:36:46Z",
      "updated_at": "2023-06-10T14:36:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1225399092",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1225399092"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 469,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226838300",
      "pull_request_review_id": 1475189635,
      "id": 1226838300,
      "node_id": "PRRC_kwDOABII585JIBEc",
      "diff_hunk": "@@ -28,6 +31,7 @@ bool AbortNode(const std::string& strMessage, bilingual_str user_message)\n         user_message = _(\"A fatal internal error occurred, see debug.log for details\");\n     }\n     InitError(user_message);\n+    Assert(g_exit_status)->store(EXIT_FAILURE);",
      "path": "src/shutdown.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "3b2c61e8198bcefb1c2343caff1d705951026cc4",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Does this make `InitShutdownState()` required before calling `AbortNode()` ? \r\nI suppose that could be added to the comment here. I'm just making sure I understand, I don't think you need to retouch:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/6f5f37eefd425faabd9a97a3c3028395c34f08c4/src/shutdown.h#L14-L17",
      "created_at": "2023-06-12T15:18:14Z",
      "updated_at": "2023-06-12T15:24:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1226838300",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226838300"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 34,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226843760",
      "pull_request_review_id": 1475189635,
      "id": 1226843760,
      "node_id": "PRRC_kwDOABII585JICZw",
      "diff_hunk": "@@ -20,6 +21,8 @@\n #include <condition_variable>\n #endif\n \n+static std::atomic<int>* g_exit_status{nullptr};",
      "path": "src/shutdown.cpp",
      "position": 12,
      "original_position": 12,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "3b2c61e8198bcefb1c2343caff1d705951026cc4",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I am guessing we need a new global here because we can't otherwise access `NodeContext::exit_status`?",
      "created_at": "2023-06-12T15:22:07Z",
      "updated_at": "2023-06-12T15:24:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1226843760",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226843760"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226886073",
      "pull_request_review_id": 1475262688,
      "id": 1226886073,
      "node_id": "PRRC_kwDOABII585JIMu5",
      "diff_hunk": "@@ -20,6 +21,8 @@\n #include <condition_variable>\n #endif\n \n+static std::atomic<int>* g_exit_status{nullptr};",
      "path": "src/shutdown.cpp",
      "position": 12,
      "original_position": 12,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "3b2c61e8198bcefb1c2343caff1d705951026cc4",
      "in_reply_to_id": 1226843760,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "FWIW, this could be de-globalized again by the interrupt class introduced in https://github.com/bitcoin/bitcoin/pull/27861.",
      "created_at": "2023-06-12T15:55:24Z",
      "updated_at": "2023-06-12T15:55:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1226886073",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226886073"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226913429",
      "pull_request_review_id": 1475310359,
      "id": 1226913429,
      "node_id": "PRRC_kwDOABII585JITaV",
      "diff_hunk": "@@ -20,6 +21,8 @@\n #include <condition_variable>\n #endif\n \n+static std::atomic<int>* g_exit_status{nullptr};",
      "path": "src/shutdown.cpp",
      "position": 12,
      "original_position": 12,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "3b2c61e8198bcefb1c2343caff1d705951026cc4",
      "in_reply_to_id": 1226843760,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> FWIW, this could be de-globalized again by the interrupt class introduced in #27861.\r\n\r\nYes #27861 replaces the `AbortNode` function with a `KernelNotifications::fatalError` method that can access whatever state it needs through the `KernelNotifications` class without needing any globals. `AbortNode` is the only function using `g_exit_status` so it should just disappear then.",
      "created_at": "2023-06-12T16:20:00Z",
      "updated_at": "2023-06-12T16:21:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1226913429",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226913429"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226914676",
      "pull_request_review_id": 1475310359,
      "id": 1226914676,
      "node_id": "PRRC_kwDOABII585JITt0",
      "diff_hunk": "@@ -28,6 +31,7 @@ bool AbortNode(const std::string& strMessage, bilingual_str user_message)\n         user_message = _(\"A fatal internal error occurred, see debug.log for details\");\n     }\n     InitError(user_message);\n+    Assert(g_exit_status)->store(EXIT_FAILURE);",
      "path": "src/shutdown.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "3b2c61e8198bcefb1c2343caff1d705951026cc4",
      "in_reply_to_id": 1226838300,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Does this make `InitShutdownState()` required before calling `AbortNode()` ? I suppose that could be added to the comment here.\r\n\r\nIt could be mentioned but `AbortNode` is about to be removed in https://github.com/bitcoin/bitcoin/pull/27861, so it isn't too important",
      "created_at": "2023-06-12T16:21:10Z",
      "updated_at": "2023-06-12T16:21:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1226914676",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226914676"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 34,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226949554",
      "pull_request_review_id": 1475379282,
      "id": 1226949554,
      "node_id": "PRRC_kwDOABII585JIcOy",
      "diff_hunk": "@@ -377,17 +377,23 @@ def is_node_stopped(self):\n             return False\n \n         # process has stopped. Assert that it didn't return an error code.\n-        assert return_code == 0, self._node_msg(\n-            \"Node returned non-zero exit code (%d) when stopping\" % return_code)\n+        # unless 'expected_ret_code' is provided.\n+        if expected_ret_code is not None:\n+            assert return_code == expected_ret_code, self._node_msg(\n+                \"Node returned unexpected exit code (%d) vs (%d) when stopping\" % (return_code, expected_ret_code))",
      "path": "test/functional/test_framework/test_node.py",
      "position": 18,
      "original_position": 18,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "3b2c61e8198bcefb1c2343caff1d705951026cc4",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit, could take the opportunity to change to f-strings here (and below), as [suggested in the functional test style guidelines](https://github.com/bitcoin/bitcoin/blob/361a0c00b3fdac7149c027c2c69e4db60ee5aa86/test/functional/README.md?plain=1#L39):\r\n```suggestion\r\n                 f\"Node returned unexpected exit code ({return_code}) vs ({expected_ret_code}) when stopping\")\r\n```",
      "created_at": "2023-06-12T16:50:33Z",
      "updated_at": "2023-06-12T16:53:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1226949554",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1226949554"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 383,
      "original_line": 383,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1227794716",
      "pull_request_review_id": 1476651234,
      "id": 1227794716,
      "node_id": "PRRC_kwDOABII585JLqkc",
      "diff_hunk": "@@ -377,17 +377,23 @@ def is_node_stopped(self):\n             return False\n \n         # process has stopped. Assert that it didn't return an error code.\n-        assert return_code == 0, self._node_msg(\n-            \"Node returned non-zero exit code (%d) when stopping\" % return_code)\n+        # unless 'expected_ret_code' is provided.\n+        if expected_ret_code is not None:\n+            assert return_code == expected_ret_code, self._node_msg(\n+                \"Node returned unexpected exit code (%d) vs (%d) when stopping\" % (return_code, expected_ret_code))\n+        else:",
      "path": "test/functional/test_framework/test_node.py",
      "position": 19,
      "original_position": 19,
      "commit_id": "61c569ab6069d04079a0831468eb713983919636",
      "original_commit_id": "3b2c61e8198bcefb1c2343caff1d705951026cc4",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In 3b2c61e8198bcefb1c2343caff1d705951026cc4:\r\n\r\nAny reason to make `expected_ret_code` optional? Seems easier to just make the default value `0` and drop this whole `else` block.",
      "created_at": "2023-06-13T09:08:19Z",
      "updated_at": "2023-06-13T09:08:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27708#discussion_r1227794716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1227794716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27708"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 384,
      "original_line": 384,
      "side": "RIGHT"
    }
  ]
}