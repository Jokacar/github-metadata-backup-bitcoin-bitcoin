{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214",
    "id": 1898129875,
    "node_id": "PR_kwDOABII585xIynT",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30214",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30214.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30214.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/2c1d8b426fa1832fa464c12f3cae7e2976584430",
    "number": 30214,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor: Improve assumeutxo state representation",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR contains the first part of #28608, which tries to make assumeutxo code more maintainable, and improve it by not locking `cs_main` for a long time when the snapshot block is connected, and by deleting the snapshot validation chainstate when it is no longer used, instead of waiting until the next restart.\r\n\r\nThe changes in this PR are just refactoring. They make `Chainstate` objects self-contained, so for example, it is possible to determine what blocks to connect to a chainstate without querying `ChainstateManager`, and to determine whether a Chainstate is validated without basing it on inferences like `&cs != &ActiveChainstate()` or `GetAll().size() == 1`.\r\n\r\nThe PR also tries to make assumeutxo terminology less confusing, using \"current chainstate\" to refer to the chainstate targeting the current network tip, and \"historical chainstate\" to refer to the chainstate downloading old blocks and validating the assumeutxo snapshot. It removes uses of the terms \"active chainstate,\" \"usable chainstate,\" \"disabled chainstate,\" \"ibd chainstate,\" and \"snapshot chainstate\" which are confusing for various reasons.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "created_at": "2024-05-31T14:53:10Z",
    "updated_at": "2024-07-19T22:21:05Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "9e660e55c4448e3c2f29dc17eaf8f73579f99185",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ryanofsky:pr/cstate",
      "ref": "pr/cstate",
      "sha": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 69901633,
        "node_id": "MDEwOlJlcG9zaXRvcnk2OTkwMTYzMw==",
        "name": "bitcoin",
        "full_name": "ryanofsky/bitcoin",
        "owner": {
          "login": "ryanofsky",
          "id": 7133040,
          "node_id": "MDQ6VXNlcjcxMzMwNDA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ryanofsky",
          "html_url": "https://github.com/ryanofsky",
          "followers_url": "https://api.github.com/users/ryanofsky/followers",
          "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
          "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
          "repos_url": "https://api.github.com/users/ryanofsky/repos",
          "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/ryanofsky/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ryanofsky/bitcoin",
        "archive_url": "https://api.github.com/repos/ryanofsky/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ryanofsky/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ryanofsky/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ryanofsky/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ryanofsky/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ryanofsky/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ryanofsky/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ryanofsky/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ryanofsky/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ryanofsky/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ryanofsky/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ryanofsky/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ryanofsky/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ryanofsky/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ryanofsky/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ryanofsky/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ryanofsky/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ryanofsky/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ryanofsky/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ryanofsky/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ryanofsky/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ryanofsky/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ryanofsky/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ryanofsky/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ryanofsky/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ryanofsky/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ryanofsky/bitcoin/hooks",
        "svn_url": "https://github.com/ryanofsky/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 12,
        "watchers_count": 12,
        "size": 260308,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-19T21:56:03Z",
        "created_at": "2016-10-03T19:05:43Z",
        "updated_at": "2024-01-25T23:52:08Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ed739d14b58b5e772a65b85bb421703963b06852",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35654,
        "stargazers_count": 77266,
        "watchers_count": 77266,
        "size": 263305,
        "default_branch": "master",
        "open_issues_count": 671,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-19T21:56:07Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-07-19T22:53:55Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 656,
    "deletions": 721,
    "changed_files": 38,
    "commits": 16,
    "review_comments": 10,
    "comments": 3
  },
  "events": [
    {
      "event": "commented",
      "id": 2142439540,
      "node_id": "IC_kwDOABII585_swh0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2142439540",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T14:53:13Z",
      "updated_at": "2024-07-15T11:11:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30214).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Approach ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/30214#pullrequestreview-2177291599) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30320](https://github.com/bitcoin/bitcoin/pull/30320) (assumeutxo: Don't load a snapshot if it's not in the best header chain by mzumsande)\n* [#30267](https://github.com/bitcoin/bitcoin/pull/30267) (assumeutxo: Check snapshot base block is not in invalid chain by fjahr)\n* [#30221](https://github.com/bitcoin/bitcoin/pull/30221) (wallet: Ensure best block matches wallet scan state by achow101)\n* [#30200](https://github.com/bitcoin/bitcoin/pull/30200) (Introduce Mining interface by Sjors)\n* [#30141](https://github.com/bitcoin/bitcoin/pull/30141) (kernel: De-globalize validation caches by TheCharlatan)\n* [#30111](https://github.com/bitcoin/bitcoin/pull/30111) (locks: introduce mutex for tx download, flush rejection filters on UpdatedBlockTip by glozow)\n* [#29700](https://github.com/bitcoin/bitcoin/pull/29700) (kernel, refactor: return error status on all fatal errors by ryanofsky)\n* [#29680](https://github.com/bitcoin/bitcoin/pull/29680) (wallet: fix unrelated parent conflict doesn't cause child tx to be marked as conflict by Eunovo)\n* [#29656](https://github.com/bitcoin/bitcoin/pull/29656) (chainparams: Change nChainTx type to uint64_t by fjahr)\n* [#29652](https://github.com/bitcoin/bitcoin/pull/29652) (wallet: Avoid potentially writing incorrect best block locator by ryanofsky)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo/LogDebug over LogPrintf/LogPrint by maflcko)\n* [#28616](https://github.com/bitcoin/bitcoin/pull/28616) (Show transactions as not fully confirmed during background validation by Sjors)\n* [#26593](https://github.com/bitcoin/bitcoin/pull/26593) (tracing: Only prepare tracepoint arguments when actually tracing by 0xB10C)\n* [#26022](https://github.com/bitcoin/bitcoin/pull/26022) (Add util::ResultPtr class by ryanofsky)\n* [#25722](https://github.com/bitcoin/bitcoin/pull/25722) (refactor: Use util::Result class for wallet loading by ryanofsky)\n* [#25665](https://github.com/bitcoin/bitcoin/pull/25665) (refactor: Add util::Result failure values, multiple error and warning messages by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#issuecomment-2142439540",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214"
    },
    {
      "event": "labeled",
      "id": 13001884170,
      "node_id": "LE_lADOABII586KwuWzzwAAAAMG-QIK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13001884170",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T14:53:15Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "labeled",
      "id": 13005246304,
      "node_id": "LE_lADOABII586KwuWzzwAAAAMHLE9g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13005246304",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T19:56:38Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2142897707,
      "node_id": "IC_kwDOABII585_ugYr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2142897707",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T19:56:39Z",
      "updated_at": "2024-05-31T19:56:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/25656143496</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#issuecomment-2142897707",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13026031143,
      "node_id": "HRFPE_lADOABII586KwuWzzwAAAAMIaXYn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13026031143",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-03T19:38:28Z"
    },
    {
      "event": "unlabeled",
      "id": 13041415557,
      "node_id": "UNLE_lADOABII586KwuWzzwAAAAMJVDWF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13041415557",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-04T20:15:11Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2155889026,
      "node_id": "IC_kwDOABII586AgEGC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2155889026",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-08T09:21:00Z",
      "updated_at": "2024-06-08T09:21:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#issuecomment-2155889026",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214"
    },
    {
      "event": "labeled",
      "id": 13103465275,
      "node_id": "LE_lADOABII586KwuWzzwAAAAMNBwM7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13103465275",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T15:31:29Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13188697652,
      "node_id": "HRFPE_lADOABII586KwuWzzwAAAAMSG440",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13188697652",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T16:52:15Z"
    },
    {
      "event": "unlabeled",
      "id": 13188709437,
      "node_id": "UNLE_lADOABII586KwuWzzwAAAAMSG7w9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13188709437",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T16:53:19Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13191760481,
      "node_id": "LE_lADOABII586KwuWzzwAAAAMSSkph",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13191760481",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T21:15:41Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13192550228,
      "node_id": "HRFPE_lADOABII586KwuWzzwAAAAMSVldU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13192550228",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T22:54:13Z"
    },
    {
      "event": "unlabeled",
      "id": 13192801579,
      "node_id": "UNLE_lADOABII586KwuWzzwAAAAMSWi0r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13192801579",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T23:28:48Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13273157528,
      "node_id": "LE_lADOABII586KwuWzzwAAAAMXJE-Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13273157528",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-25T00:04:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2177291599,
      "node_id": "PRR_kwDOABII586BxtVP",
      "url": null,
      "actor": null,
      "commit_id": "493d3844cfc8628fd63184fa7a657126d9b5dc95",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK\r\n\r\nI think pretty much everything here is a worth while improvement and should set up the following improvements well. I am not so deep into the current state of the kernel work though, so I can not comment on that part, for example the newly introduced typing file. I guess @TheCharlatan could give his nod to that here.\r\n\r\n> It removes uses of the terms \"active chainstate,\" \"usable chainstate,\" \"disabled chainstate,\" \"ibd chainstate,\" and \"snapshot chainstate\" which are confusing for various reasons.\r\n\r\nI think this is a bit confusing because it sounds like you are getting rid of this completely but it's actually just avoided where you touch the code, right? Cleaning the terms up everywhere can be a follow-up, I would like to try to rewrite the design doc a bit more anyway. But I think (selfishly) would like to break it up into design and usage docs because IMO that makes it way more manageable, i.e. the last commit of #29553.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#pullrequestreview-2177291599",
      "submitted_at": "2024-07-15T11:11:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
    },
    {
      "event": "reviewed",
      "id": 2186500256,
      "node_id": "PRR_kwDOABII586CU1ig",
      "url": null,
      "actor": null,
      "commit_id": "493d3844cfc8628fd63184fa7a657126d9b5dc95",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30214#pullrequestreview-2177291599\r\n\r\nThanks for reviewing! Will rebase and try to address comments. I'm especially interested if you have ideas on splitting up documentation and code changes into separate PRs.\r\n\r\n> I am not so deep into the current state of the kernel work though, so I can not comment on that part, for example the newly introduced typing file. I guess @TheCharlatan could give his nod to that here.\r\n\r\nSure, for background kernel/types.h is analogous to node/types.h, wallet/types.h, and common/types.h. The types files are used when libraries want to define shared struct and enum types that can be used by code NOT directly depending on the library. For example the gui code uses the `wallet::isminetype` enum type, but the gui should not depend on the wallet library, so the enum is defined in a shared header `wallet/types.h`. In this PR, wallet code uses the `kernel::ChainstateRole` struct type, but the wallet code should not depend on the kernel library, so the struct is defined in a shared header `kernel/types.h`. This pattern started with the wallet library, but has been useful for node and common libraries as well, so it is natural to extend to the kernel.\r\n\r\nA more stricter separation between libraries would be possible with a more complicated structure, but having shared types files has been a reasonable way to separate the libraries while having a 1 library = 1 directory = 1 namespace structure.\r\n\r\n> > It removes uses of the terms \"active chainstate,\" \"usable chainstate,\" \"disabled chainstate,\" \"ibd chainstate,\" and \"snapshot chainstate\" which are confusing for various reasons.\r\n>\r\n> I think this is a bit confusing because it sounds like you are getting rid of this completely but it's actually just avoided where you touch the code, right? Cleaning the terms up everywhere can be a follow-up, I would like to try to rewrite the design doc a bit more anyway. But I think (selfishly) would like to break it up into design and usage docs because IMO that makes it way more manageable, i.e. the last commit of #29553.\r\n\r\nYeah this description was written aspirationally before I implemented this PR and I did not get around to removing all the old language. I'd be interested if you have specific ideas on how to break this PR up better. I definitely think it could make sense to move documentation / comment changes to a separate PR, and I hope #29553 can be reviewed more and merged soon, before this PR. (This is a good reminder for me to re-ack #29553)\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#pullrequestreview-2186500256",
      "submitted_at": "2024-07-18T18:41:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGEyNDE1YzA5ZjZkMmI5NDM1M2FlNTY0ZmQzODM0YmVkODg1NjE0YzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a2415c09f6d2b94353ae564fd3834bed885614c1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a2415c09f6d2b94353ae564fd3834bed885614c1",
      "tree": {
        "sha": "6d28b74668297fa13ae108adf9575e2a2a7323fa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6d28b74668297fa13ae108adf9575e2a2a7323fa"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ed739d14b58b5e772a65b85bb421703963b06852",
          "sha": "ed739d14b58b5e772a65b85bb421703963b06852",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ed739d14b58b5e772a65b85bb421703963b06852"
        }
      ],
      "message": "test: Fix broken chainstatemanager_snapshot_init check\n\nThe following test code never checked anything because the if statement was\nalways false:\n\n    if (cs != &chainman_restarted.ActiveChainstate()) {\n        BOOST_CHECK_EQUAL(cs->m_chain.Height(), 109);\n    }\n\nAlso, the height of the background chainstate it was intending to check is 110,\nnot 109. Fix both problems by rewriting the check.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T08:59:02Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T10:53:50Z"
      },
      "sha": "a2415c09f6d2b94353ae564fd3834bed885614c1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRjZjk0MWZkZWUxOGU3OGQ3NTA3NTQ0ZWJlYWI4NzFmYzg3ODM2ODE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4cf941fdee18e78d7507544ebeab871fc8783681",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4cf941fdee18e78d7507544ebeab871fc8783681",
      "tree": {
        "sha": "a04211faf9431c45687677b1d89c7ea313473238",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a04211faf9431c45687677b1d89c7ea313473238"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a2415c09f6d2b94353ae564fd3834bed885614c1",
          "sha": "a2415c09f6d2b94353ae564fd3834bed885614c1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a2415c09f6d2b94353ae564fd3834bed885614c1"
        }
      ],
      "message": "refactor: Add Chainstate::m_target_blockhash member\n\nMake Chainstate objects aware of what block they are targeting. This makes\nChainstate objects more self contained, so it's possible to determine what\nblocks should be downloaded and connected to them without needing to query\nChainstateManager or look at other Chainstate objects.\n\nThe motivation for this change is to make code more readable, so it only\nrequires knowing about Chainstate targets, not reasoning about the assumeutxo\nsnapshot validation sequence. This change also enables simplifications to the\nChainstateManager interface in subsequent commits, and could make it easier to\nimplement new features like creating new Chainstate objects to generate UTXO\nsnapshots or index UTXO data.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T08:59:02Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T00:27:27Z"
      },
      "sha": "4cf941fdee18e78d7507544ebeab871fc8783681"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI2MGQyNzMxNjViOGNhY2Q2NTQ3MWQwNzM0MWE1MDc3NjNlZjU4ZjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/260d273165b8cacd65471d07341a507763ef58f3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/260d273165b8cacd65471d07341a507763ef58f3",
      "tree": {
        "sha": "6711cfd154e81b8ed97b7fc58078fbb134e30ab1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6711cfd154e81b8ed97b7fc58078fbb134e30ab1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4cf941fdee18e78d7507544ebeab871fc8783681",
          "sha": "4cf941fdee18e78d7507544ebeab871fc8783681",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4cf941fdee18e78d7507544ebeab871fc8783681"
        }
      ],
      "message": "refactor: Add Chainstate m_validity and m_target_blockhash members\n\nGet rid of m_disabled/IsUsable members. Instead of marking chains disabled for\ndifferent reasons, record chainstate validity and validation progress\nexplicitly and use that information directly.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T08:59:02Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T12:55:17Z"
      },
      "sha": "260d273165b8cacd65471d07341a507763ef58f3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY2YzU5N2NmMzE3MDFiMGRhMGVhNjU4YTY5ZTc5MjU4MTdmNTAzYmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/66c597cf31701b0da0ea658a69e7925817f503be",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/66c597cf31701b0da0ea658a69e7925817f503be",
      "tree": {
        "sha": "394a664697a4f2294dd7f99881c21c9565aa1a09",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/394a664697a4f2294dd7f99881c21c9565aa1a09"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/260d273165b8cacd65471d07341a507763ef58f3",
          "sha": "260d273165b8cacd65471d07341a507763ef58f3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/260d273165b8cacd65471d07341a507763ef58f3"
        }
      ],
      "message": "refactor: Deduplicate Chainstate activation code\n\nMove duplicate code from ChainstateManager::ActivateSnapshot and\nChainstateManager::ActivateExistingSnapshot methods to a new\nChainstateManager::AddChainstate method.\n\nThe \"AddChainstate\" method name doesn't mention snapshots even though it is\nonly used to add snapshot chainstates now, because it becomes more generalized\nin a later commit in this PR (\"refactor: Add ChainstateManager::m_chainstates\nmember\")",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T08:59:02Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T13:42:03Z"
      },
      "sha": "66c597cf31701b0da0ea658a69e7925817f503be"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc1ZjRmYjFmMWIyZDQwNzE2YWMyM2Q4YThmMDRkODI4NDBlZjJjZWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/75f4fb1f1b2d40716ac23d8a8f04d82840ef2cec",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/75f4fb1f1b2d40716ac23d8a8f04d82840ef2cec",
      "tree": {
        "sha": "c4db97e0f39f7491b554c7fc98e1e2b28be26f00",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c4db97e0f39f7491b554c7fc98e1e2b28be26f00"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/66c597cf31701b0da0ea658a69e7925817f503be",
          "sha": "66c597cf31701b0da0ea658a69e7925817f503be",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/66c597cf31701b0da0ea658a69e7925817f503be"
        }
      ],
      "message": "refactor: Pass chainstate parameters to MaybeCompleteSnapshotValidation\n\nRemove hardcoded references to m_ibd_chainstate and m_snapshot_chainstate so\nMaybeCompleteSnapshotValidation function can be simpler and focus on validating\nthe snapshot without dealing with internal ChainstateManager states.\n\nThis is a step towards being able to validate the snapshot outside of\nActivateBestChain loop so cs_main is not locked for minutes when the snapshot\nblock is connected.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T08:59:02Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T13:17:10Z"
      },
      "sha": "75f4fb1f1b2d40716ac23d8a8f04d82840ef2cec"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI1MTIyZTdmY2YwNzdjODk4MmNkYjY1MTI5YzYxYjZiNzE0MjNkOTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/25122e7fcf077c8982cdb65129c61b6b71423d97",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/25122e7fcf077c8982cdb65129c61b6b71423d97",
      "tree": {
        "sha": "9d9edd82689657e031a4e5de6b1eb373bea10edc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9d9edd82689657e031a4e5de6b1eb373bea10edc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/75f4fb1f1b2d40716ac23d8a8f04d82840ef2cec",
          "sha": "75f4fb1f1b2d40716ac23d8a8f04d82840ef2cec",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/75f4fb1f1b2d40716ac23d8a8f04d82840ef2cec"
        }
      ],
      "message": "refactor: Add Chainstate::StoragePath() method\n\nUse to simplify code determining the chainstate leveldb paths.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T08:59:02Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T15:25:04Z"
      },
      "sha": "25122e7fcf077c8982cdb65129c61b6b71423d97"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFkMTA3ZDgzYjg0NTZjMzE5YmI1ZjExOTExY2QxMWUwZDQ3OGE4Njk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad107d83b8456c319bb5f11911cd11e0d478a869",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ad107d83b8456c319bb5f11911cd11e0d478a869",
      "tree": {
        "sha": "5b6ef1e64558ec7a512d698e999590b6c0c3b992",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5b6ef1e64558ec7a512d698e999590b6c0c3b992"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/25122e7fcf077c8982cdb65129c61b6b71423d97",
          "sha": "25122e7fcf077c8982cdb65129c61b6b71423d97",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/25122e7fcf077c8982cdb65129c61b6b71423d97"
        }
      ],
      "message": "refactor: Add ChainstateManager::CurrentChainstate() method\n\nCurrentChainstate() is basically the same as ActiveChainstate() except it\nrequires cs_main to be locked when it is called, instead of locking cs_main\ninternally.\n\nThe name \"current\" should also be less confusing than \"active\" because multiple\nchainstates can be active, and CurrentChainstate() returns the chainstate\ntargeting the current network tip, regardless of what chainstates are being\ndownloaded or how they are used.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T08:59:02Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T16:03:47Z"
      },
      "sha": "ad107d83b8456c319bb5f11911cd11e0d478a869"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRjYzk3ZWRjZTA0YzA3NWMwYmRkMWNmODU3MzkwY2RmZjEyYTcwYTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4cc97edce04c075c0bdd1cf857390cdff12a70a8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4cc97edce04c075c0bdd1cf857390cdff12a70a8",
      "tree": {
        "sha": "667589dfbf8200b274cddde02668432b110b008f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/667589dfbf8200b274cddde02668432b110b008f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad107d83b8456c319bb5f11911cd11e0d478a869",
          "sha": "ad107d83b8456c319bb5f11911cd11e0d478a869",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ad107d83b8456c319bb5f11911cd11e0d478a869"
        }
      ],
      "message": "refactor: Add ChainstateManager::ValidatedChainstate() method\n\nValidatedChainstate() accessor replaces GetChainstateForIndexing() with no\nchange in behavior.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T08:59:02Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T16:03:47Z"
      },
      "sha": "4cc97edce04c075c0bdd1cf857390cdff12a70a8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE3MDJjZjI1ODg1YjY0OWI4NzljNzA0NTc4Y2JkNzYyMzQ2NTUyMjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a702cf25885b649b879c704578cbd76234655220",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a702cf25885b649b879c704578cbd76234655220",
      "tree": {
        "sha": "a50c01c6a5409803b8986bc10923a910bd78ed55",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a50c01c6a5409803b8986bc10923a910bd78ed55"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4cc97edce04c075c0bdd1cf857390cdff12a70a8",
          "sha": "4cc97edce04c075c0bdd1cf857390cdff12a70a8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4cc97edce04c075c0bdd1cf857390cdff12a70a8"
        }
      ],
      "message": "refactor: Convert ChainstateRole enum to struct\n\nChange ChainstateRole parameter passed to wallets and indexes. Wallets and\nindexes need to know whether chainstate is historical and whether it is fully\nvalidated. They should not be aware of the assumeutxo snapshot validation\nprocess.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T16:12:07Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T16:12:07Z"
      },
      "sha": "a702cf25885b649b879c704578cbd76234655220"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM3OTUzNGRhZTI0MzMxNDE1OTk0ZDU4NjM3NTA2ZmNmM2Q2OTUzMWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c79534dae24331415994d58637506fcf3d69531b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c79534dae24331415994d58637506fcf3d69531b",
      "tree": {
        "sha": "293d24f34a10585c9385baa58ecf44cde96fdb8d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/293d24f34a10585c9385baa58ecf44cde96fdb8d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a702cf25885b649b879c704578cbd76234655220",
          "sha": "a702cf25885b649b879c704578cbd76234655220",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a702cf25885b649b879c704578cbd76234655220"
        }
      ],
      "message": "refactor: Delete ChainstateManager::IsSnapshotActive() method\n\nIsSnapshotActive() method is only called one place outside of tests and\nasserts, and is confusing because it returns true even after the snapshot is\nfully validated.\n\nThe documentation which said this \"implies that a background validation\nchainstate is also in use\" is also incorrect, because after the snapshot is\nvalidated, the background chainstate gets disabled and IsUsable() would return\nfalse.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T16:12:07Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-31T11:00:40Z"
      },
      "sha": "c79534dae24331415994d58637506fcf3d69531b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIwY2FhNDdmZDAyNDZhZTU1MWI3NTJmMzllOWI1NDc0YzgzMDQ3ZjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/20caa47fd0246ae551b752f39e9b5474c83047f2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/20caa47fd0246ae551b752f39e9b5474c83047f2",
      "tree": {
        "sha": "dff0a9412823a0d6fd1de6ee073f09cb953fd293",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dff0a9412823a0d6fd1de6ee073f09cb953fd293"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c79534dae24331415994d58637506fcf3d69531b",
          "sha": "c79534dae24331415994d58637506fcf3d69531b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c79534dae24331415994d58637506fcf3d69531b"
        }
      ],
      "message": "refactor: Delete ChainstateManager::IsSnapshotValidated() method\n\nIsSnapshotValidated() is only called one place outside of tests, and is use\nredundantly in some tests, asserting that a snapshot is not validated when a\nsnapshot chainstate does not even exist. Simplify by dropping the method and\nchecking Chainstate validity field directly.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T16:12:07Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T20:14:42Z"
      },
      "sha": "20caa47fd0246ae551b752f39e9b5474c83047f2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZhZmIzZWJjZDhkNzZmMjU1NDE0NjQyMTA2MmM5MjQ2OTAxNGU5YTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fafb3ebcd8d76f2554146421062c92469014e9a0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fafb3ebcd8d76f2554146421062c92469014e9a0",
      "tree": {
        "sha": "722df15d6b66a7aada41853a611a1b4054176763",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/722df15d6b66a7aada41853a611a1b4054176763"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/20caa47fd0246ae551b752f39e9b5474c83047f2",
          "sha": "20caa47fd0246ae551b752f39e9b5474c83047f2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/20caa47fd0246ae551b752f39e9b5474c83047f2"
        }
      ],
      "message": "refactor: Delete ChainstateManager::SnapshotBlockhash() method\n\nSnapshotBlockhash() is only called two places outside of tests, and is used\nredundantly in some tests, checking the same field as other checks. Simplify by\ndropping the method and using the m_from_snapshot_blockhash field directly.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T16:12:07Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T20:30:22Z"
      },
      "sha": "fafb3ebcd8d76f2554146421062c92469014e9a0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY5NjIzN2MwYjBhYzg0MTc4ZDhhYTAzNTk3OTdlOGVjNDZkMTk1MWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f96237c0b0ac84178d8aa0359797e8ec46d1951f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f96237c0b0ac84178d8aa0359797e8ec46d1951f",
      "tree": {
        "sha": "f0932694853235dbcaea9d9f8da3f2834f23e06d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f0932694853235dbcaea9d9f8da3f2834f23e06d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fafb3ebcd8d76f2554146421062c92469014e9a0",
          "sha": "fafb3ebcd8d76f2554146421062c92469014e9a0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fafb3ebcd8d76f2554146421062c92469014e9a0"
        }
      ],
      "message": "refactor: Add ChainstateManager::m_chainstates member\n\nUse to replace m_active_chainstate, m_ibd_chainstate, and m_snapshot_chainstate\nmembers.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T16:12:07Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T17:26:01Z"
      },
      "sha": "f96237c0b0ac84178d8aa0359797e8ec46d1951f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQyMjY1YjFjZGNjNGNjYTVlYjU1MmFiYzAzNGVmMWU4Yzg2OWZlOTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d2265b1cdcc4cca5eb552abc034ef1e8c869fe97",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d2265b1cdcc4cca5eb552abc034ef1e8c869fe97",
      "tree": {
        "sha": "ef735b11331e01cb146ef35dd1b7fddb78d7e402",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ef735b11331e01cb146ef35dd1b7fddb78d7e402"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f96237c0b0ac84178d8aa0359797e8ec46d1951f",
          "sha": "f96237c0b0ac84178d8aa0359797e8ec46d1951f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f96237c0b0ac84178d8aa0359797e8ec46d1951f"
        }
      ],
      "message": "refactor: Add ChainstateManager::ActivateBestChains() method\n\nDeduplicate code looping over chainstate objects and calling\nActivateBestChain().",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T16:12:07Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T18:52:28Z"
      },
      "sha": "d2265b1cdcc4cca5eb552abc034ef1e8c869fe97"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZlZTkxMjYyZGM1YmJmMTU5MjRiMjA0ZDkyOTk1YTczZDlkYTE0ZGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fee91262dc5bbf15924b204d92995a73d9da14df",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fee91262dc5bbf15924b204d92995a73d9da14df",
      "tree": {
        "sha": "45578eaf7125548d563f8aab6f714ac0d8231594",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/45578eaf7125548d563f8aab6f714ac0d8231594"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d2265b1cdcc4cca5eb552abc034ef1e8c869fe97",
          "sha": "d2265b1cdcc4cca5eb552abc034ef1e8c869fe97",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d2265b1cdcc4cca5eb552abc034ef1e8c869fe97"
        }
      ],
      "message": "refactor: Delete ChainstateManager::GetAll() method\n\nJust use m_chainstates array instead.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T16:12:07Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T23:45:14Z"
      },
      "sha": "fee91262dc5bbf15924b204d92995a73d9da14df"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJjMWQ4YjQyNmZhMTgzMmZhNDY0YzEyZjNjYWU3ZTI5NzY1ODQ0MzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "tree": {
        "sha": "216e88eb2bcd07c068e9abb63d149d7d88c7345c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/216e88eb2bcd07c068e9abb63d149d7d88c7345c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fee91262dc5bbf15924b204d92995a73d9da14df",
          "sha": "fee91262dc5bbf15924b204d92995a73d9da14df",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fee91262dc5bbf15924b204d92995a73d9da14df"
        }
      ],
      "message": "doc: Improve ChainstateManager documentation, use consistent terms",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-07-19T16:12:07Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-05-30T23:50:47Z"
      },
      "sha": "2c1d8b426fa1832fa464c12f3cae7e2976584430"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13582586904,
      "node_id": "HRFPE_lADOABII586KwuWzzwAAAAMpldQY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13582586904",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-19T21:52:57Z"
    },
    {
      "event": "reviewed",
      "id": 2189391816,
      "node_id": "PRR_kwDOABII586Cf3fI",
      "url": null,
      "actor": null,
      "commit_id": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Rebased 493d3844cfc8628fd63184fa7a657126d9b5dc95 -> 2c1d8b426fa1832fa464c12f3cae7e2976584430 ([`pr/cstate.4`](https://github.com/ryanofsky/bitcoin/commits/pr/cstate.4) -> [`pr/cstate.5`](https://github.com/ryanofsky/bitcoin/commits/pr/cstate.5), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/cstate.4-rebase..pr/cstate.5)) due to conflicts with various prs including #30267, #30388, #30395, #29996, #30406, #30320. Also made suggested simplifications.\r\n\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#pullrequestreview-2189391816",
      "submitted_at": "2024-07-19T21:55:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
    },
    {
      "event": "unlabeled",
      "id": 13583496678,
      "node_id": "UNLE_lADOABII586KwuWzzwAAAAMpo7Xm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13583496678",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-19T22:21:05Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677573399",
      "pull_request_review_id": 2177291599,
      "id": 1677573399,
      "node_id": "PRRC_kwDOABII585j_b0X",
      "diff_hunk": "@@ -544,6 +546,18 @@ class Chainstate\n     //! @sa ChainstateRole\n     ChainstateRole GetRole() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n \n+    //! Return whether chain is fully validated, assumed valid, or invalid.\n+    ChainValidity Validity() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main)\n+    {\n+        return m_validity;\n+    }\n+\n+    //! Return true if chainstate fully validated or is assumed valid.\n+    bool IsValid() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main)",
      "path": "src/validation.h",
      "position": null,
      "original_position": 55,
      "commit_id": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "original_commit_id": "cdc44e878a859a34dfe0c198641531ec26b0730d",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: In other places similar checks are inlined without a helper method. That might be actually a bit more clear as well.",
      "created_at": "2024-07-15T09:49:39Z",
      "updated_at": "2024-07-15T11:11:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1677573399",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677573399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 556,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677599944",
      "pull_request_review_id": 2177291599,
      "id": 1677599944,
      "node_id": "PRRC_kwDOABII585j_iTI",
      "diff_hunk": "@@ -29,6 +29,17 @@ using node::BlockManager;\n using node::KernelNotifications;\n using node::SnapshotMetadata;\n \n+static std::vector<Chainstate*> GetAll(const ChainstateManager& chainman)",
      "path": "src/test/validation_chainstatemanager_tests.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "original_commit_id": "ce02d68008c2f61a6033b22df1a5ef54bba38d9f",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why do you add this function around here instead of using `m_chainstates` as well?",
      "created_at": "2024-07-15T10:13:00Z",
      "updated_at": "2024-07-15T11:11:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1677599944",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677599944"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677640152",
      "pull_request_review_id": 2177291599,
      "id": 1677640152,
      "node_id": "PRRC_kwDOABII585j_sHY",
      "diff_hunk": "@@ -535,11 +542,26 @@ class Chainstate\n         ChainstateManager& chainman,\n         std::optional<uint256> from_snapshot_blockhash = std::nullopt);\n \n+    //! Return path to chainstate leveldb directory.\n+    fs::path StoragePath() const;\n+\n     //! Return the current role of the chainstate. See `ChainstateManager`\n     //! documentation for a description of the different types of chainstates.\n     //!\n     //! @sa ChainstateRole\n-    ChainstateRole GetRole() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n+    kernel::ChainstateRole GetRole() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n+\n+    //! Return whether chain is fully validated, assumed valid, or invalid.\n+    ChainValidity Validity() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main)",
      "path": "src/validation.h",
      "position": 72,
      "original_position": 80,
      "commit_id": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "original_commit_id": "493d3844cfc8628fd63184fa7a657126d9b5dc95",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not sure why we need this when in another commit we remove `GetAll()` and instead use `m_chainstates`. Seems kind of inconsistent but maybe I am missing something.",
      "created_at": "2024-07-15T10:51:47Z",
      "updated_at": "2024-07-15T11:11:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1677640152",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1677640152"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 579,
      "original_line": 579,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1683252537",
      "pull_request_review_id": 2186500256,
      "id": 1683252537,
      "node_id": "PRRC_kwDOABII585kVGU5",
      "diff_hunk": "@@ -29,6 +29,17 @@ using node::BlockManager;\n using node::KernelNotifications;\n using node::SnapshotMetadata;\n \n+static std::vector<Chainstate*> GetAll(const ChainstateManager& chainman)",
      "path": "src/test/validation_chainstatemanager_tests.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "original_commit_id": "ce02d68008c2f61a6033b22df1a5ef54bba38d9f",
      "in_reply_to_id": 1677599944,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Why do you add this function around here instead of using `m_chainstates` as well?\r\n\r\nI need to double-check but IIRC, the issue is that m_chainstates requires a lock to access, and it would require larger changes and more verbosity in the tests if they had to be changed to access m_chainstates directly. Will follow up and add a comment describing purpose of this function.",
      "created_at": "2024-07-18T17:43:21Z",
      "updated_at": "2024-07-18T18:41:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1683252537",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1683252537"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1683252990",
      "pull_request_review_id": 2186500256,
      "id": 1683252990,
      "node_id": "PRRC_kwDOABII585kVGb-",
      "diff_hunk": "@@ -535,11 +542,26 @@ class Chainstate\n         ChainstateManager& chainman,\n         std::optional<uint256> from_snapshot_blockhash = std::nullopt);\n \n+    //! Return path to chainstate leveldb directory.\n+    fs::path StoragePath() const;\n+\n     //! Return the current role of the chainstate. See `ChainstateManager`\n     //! documentation for a description of the different types of chainstates.\n     //!\n     //! @sa ChainstateRole\n-    ChainstateRole GetRole() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n+    kernel::ChainstateRole GetRole() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n+\n+    //! Return whether chain is fully validated, assumed valid, or invalid.\n+    ChainValidity Validity() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main)",
      "path": "src/validation.h",
      "position": 72,
      "original_position": 80,
      "commit_id": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "original_commit_id": "493d3844cfc8628fd63184fa7a657126d9b5dc95",
      "in_reply_to_id": 1677640152,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1677640152\r\n\r\n> Not sure why we need this when in another commit we remove `GetAll()` and instead use `m_chainstates`. Seems kind of inconsistent but maybe I am missing something.\r\n\r\nIs this comment about the `Validity()` method? This is just supposed to be a public accessor for code that cannot access the private m_validity member/",
      "created_at": "2024-07-18T17:43:36Z",
      "updated_at": "2024-07-18T18:41:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1683252990",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1683252990"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 579,
      "original_line": 579,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1683253240",
      "pull_request_review_id": 2186500256,
      "id": 1683253240,
      "node_id": "PRRC_kwDOABII585kVGf4",
      "diff_hunk": "@@ -544,6 +546,18 @@ class Chainstate\n     //! @sa ChainstateRole\n     ChainstateRole GetRole() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n \n+    //! Return whether chain is fully validated, assumed valid, or invalid.\n+    ChainValidity Validity() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main)\n+    {\n+        return m_validity;\n+    }\n+\n+    //! Return true if chainstate fully validated or is assumed valid.\n+    bool IsValid() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main)",
      "path": "src/validation.h",
      "position": null,
      "original_position": 55,
      "commit_id": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "original_commit_id": "cdc44e878a859a34dfe0c198641531ec26b0730d",
      "in_reply_to_id": 1677573399,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1677573399\r\n\r\n> nit: In other places similar checks are inlined without a helper method. That might be actually a bit more clear as well.\r\n\r\nGood point, at least at first glance this looks reasonable to inline.",
      "created_at": "2024-07-18T17:43:47Z",
      "updated_at": "2024-07-18T18:41:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1683253240",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1683253240"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 556,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1685023046",
      "pull_request_review_id": 2189391816,
      "id": 1685023046,
      "node_id": "PRRC_kwDOABII585kb2lG",
      "diff_hunk": "@@ -29,6 +29,17 @@ using node::BlockManager;\n using node::KernelNotifications;\n using node::SnapshotMetadata;\n \n+static std::vector<Chainstate*> GetAll(const ChainstateManager& chainman)",
      "path": "src/test/validation_chainstatemanager_tests.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "original_commit_id": "ce02d68008c2f61a6033b22df1a5ef54bba38d9f",
      "in_reply_to_id": 1677599944,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1677599944\r\n\r\n> Why do you add this function around here instead of using `m_chainstates` as well?\r\n\r\nDropped this function now, it was not hard to get rid of.",
      "created_at": "2024-07-19T21:47:51Z",
      "updated_at": "2024-07-19T21:55:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1685023046",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1685023046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1685023239",
      "pull_request_review_id": 2189391816,
      "id": 1685023239,
      "node_id": "PRRC_kwDOABII585kb2oH",
      "diff_hunk": "@@ -544,6 +546,18 @@ class Chainstate\n     //! @sa ChainstateRole\n     ChainstateRole GetRole() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n \n+    //! Return whether chain is fully validated, assumed valid, or invalid.\n+    ChainValidity Validity() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main)\n+    {\n+        return m_validity;\n+    }\n+\n+    //! Return true if chainstate fully validated or is assumed valid.\n+    bool IsValid() const EXCLUSIVE_LOCKS_REQUIRED(::cs_main)",
      "path": "src/validation.h",
      "position": null,
      "original_position": 55,
      "commit_id": "2c1d8b426fa1832fa464c12f3cae7e2976584430",
      "original_commit_id": "cdc44e878a859a34dfe0c198641531ec26b0730d",
      "in_reply_to_id": 1677573399,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1677573399\r\n\r\n> nit: In other places similar checks are inlined without a helper method. That might be actually a bit more clear as well.\r\n\r\nYou're right, that is clearer. Updated different places where this was used.\r\n",
      "created_at": "2024-07-19T21:48:04Z",
      "updated_at": "2024-07-19T21:55:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30214#discussion_r1685023239",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1685023239"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 556,
      "side": "RIGHT"
    }
  ]
}