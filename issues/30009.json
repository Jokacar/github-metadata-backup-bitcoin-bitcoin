{
  "type": "issue",
  "issue": {
    "id": 2272605641,
    "node_id": "I_kwDOABII586HdTXJ",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30009",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30009/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30009/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30009/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/30009",
    "number": 30009,
    "state": "open",
    "state_reason": null,
    "title": "Change estimate_mode default to \"ECONOMICAL\" in these RPC calls",
    "body": "The default fee estimate mode for the following RPC calls is set to \"ECONOMICAL\" rather than \"CONSERVATIVE\".\r\n\r\nMy observation running a Bitcoin non-custodial exchange and payment processor which creates a lot transactions is that Bitcoin Core on conservative mode consistently overpays transaction fees as compared to mempool's fee estimation algorithm. I have collected data on this, if anyone needs convincing, but I think this is common knowledge.\r\n\r\nSince RBF, it is standard best practice for advanced Bitcoin users to \"lowall\" transaction fees instead and RBF later if their transaction. Unfortunately, Bitcoin Core users and wallets which use Bitcoin Core's fee estimation will probably use the default mode (as users always do) and this will lead them to \"overpay\" more often than not.\r\n\r\nTherefore, I suggest changing the default fee estimation mode to \"ECONOMICAL\" in the following RPCs\r\n\r\n[estimatesmartfee](https://developer.bitcoin.org/reference/rpc/estimatesmartfee.html?highlight=estimate_mode)\r\n\r\n[send](https://developer.bitcoin.org/reference/rpc/send.html?highlight=estimate_mode)\r\n\r\n[sendmany](https://developer.bitcoin.org/reference/rpc/sendmany.html?highlight=estimate_mode)\r\n\r\n[sendtoaddress](https://developer.bitcoin.org/reference/rpc/sendtoaddress.html?highlight=estimate_mode)\r\n\r\n[fundrawtransaction](https://developer.bitcoin.org/reference/rpc/fundrawtransaction.html?highlight=estimate_mode)\r\n\r\n[Getting Started](https://developer.bitcoin.org/index.html?highlight=estimate_mode)\r\n\r\n[walletcreatefundedpsbt](https://developer.bitcoin.org/reference/rpc/walletcreatefundedpsbt.html?highlight=estimate_mode)\r\n\r\nI would exclude this change from RBF related RPCs, where the user probably wants the RBF to be sucessful and is clearly willing to pay more for faster confirmation.\r\n\r\n[psbtbumpfee](https://developer.bitcoin.org/reference/rpc/psbtbumpfee.html?highlight=estimate_mode)\r\n\r\n[bumpfee](https://developer.bitcoin.org/reference/rpc/bumpfee.html?highlight=estimate_mode)\r\n\r\nI'm not a developer but am willing to financially support a developer willing to make a PR for this if there is interest.\r\n",
    "user": {
      "login": "BullishNode",
      "id": 75800272,
      "node_id": "MDQ6VXNlcjc1ODAwMjcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/75800272?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/BullishNode",
      "html_url": "https://github.com/BullishNode",
      "followers_url": "https://api.github.com/users/BullishNode/followers",
      "following_url": "https://api.github.com/users/BullishNode/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/BullishNode/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/BullishNode/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/BullishNode/subscriptions",
      "organizations_url": "https://api.github.com/users/BullishNode/orgs",
      "repos_url": "https://api.github.com/users/BullishNode/repos",
      "events_url": "https://api.github.com/users/BullishNode/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/BullishNode/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 3,
    "created_at": "2024-04-30T22:48:25Z",
    "updated_at": "2024-05-01T16:22:33Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 12664829318,
      "node_id": "LE_lADOABII586HdTXJzwAAAALy4fWG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12664829318",
      "actor": {
        "login": "BullishNode",
        "id": 75800272,
        "node_id": "MDQ6VXNlcjc1ODAwMjcy",
        "avatar_url": "https://avatars.githubusercontent.com/u/75800272?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BullishNode",
        "html_url": "https://github.com/BullishNode",
        "followers_url": "https://api.github.com/users/BullishNode/followers",
        "following_url": "https://api.github.com/users/BullishNode/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BullishNode/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BullishNode/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BullishNode/subscriptions",
        "organizations_url": "https://api.github.com/users/BullishNode/orgs",
        "repos_url": "https://api.github.com/users/BullishNode/repos",
        "events_url": "https://api.github.com/users/BullishNode/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BullishNode/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-30T22:48:25Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "commented",
      "id": 2087669682,
      "node_id": "IC_kwDOABII5858b0-y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2087669682",
      "actor": {
        "login": "BullishNode",
        "id": 75800272,
        "node_id": "MDQ6VXNlcjc1ODAwMjcy",
        "avatar_url": "https://avatars.githubusercontent.com/u/75800272?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BullishNode",
        "html_url": "https://github.com/BullishNode",
        "followers_url": "https://api.github.com/users/BullishNode/followers",
        "following_url": "https://api.github.com/users/BullishNode/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BullishNode/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BullishNode/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BullishNode/subscriptions",
        "organizations_url": "https://api.github.com/users/BullishNode/orgs",
        "repos_url": "https://api.github.com/users/BullishNode/repos",
        "events_url": "https://api.github.com/users/BullishNode/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BullishNode/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-30T22:54:34Z",
      "updated_at": "2024-04-30T22:54:34Z",
      "author_association": "NONE",
      "body": "Another option would be to have a config for default estimate mode but in that case also the default should be \"ECONOMICAL\" and not \"CONSERVATIVE\"",
      "user": {
        "login": "BullishNode",
        "id": 75800272,
        "node_id": "MDQ6VXNlcjc1ODAwMjcy",
        "avatar_url": "https://avatars.githubusercontent.com/u/75800272?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BullishNode",
        "html_url": "https://github.com/BullishNode",
        "followers_url": "https://api.github.com/users/BullishNode/followers",
        "following_url": "https://api.github.com/users/BullishNode/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BullishNode/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BullishNode/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BullishNode/subscriptions",
        "organizations_url": "https://api.github.com/users/BullishNode/orgs",
        "repos_url": "https://api.github.com/users/BullishNode/repos",
        "events_url": "https://api.github.com/users/BullishNode/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BullishNode/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30009#issuecomment-2087669682",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30009"
    },
    {
      "event": "commented",
      "id": 2088162169,
      "node_id": "IC_kwDOABII5858dtN5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2088162169",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-01T08:42:22Z",
      "updated_at": "2024-05-01T08:42:22Z",
      "author_association": "MEMBER",
      "body": "> Therefore, I suggest changing the default fee estimation mode to \"ECONOMICAL\" in the following RPCs\r\n\r\nUnfortunately even \"economic\" mode still overestimate so changing default mode to \"economic\" does not fix this issue.\r\n\r\nThere is an ongoing effort \"see [delving post](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703)\" where contributors are discussing the challenges of `CBlockPolicyEstimator` which is the fee estimation strategy used by all those RPC's.\r\n\r\nYes this is a known issue and there is a work in progress to resolve it.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30009#issuecomment-2088162169",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30009"
    },
    {
      "event": "commented",
      "id": 2088717254,
      "node_id": "IC_kwDOABII5858f0vG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2088717254",
      "actor": {
        "login": "dupontcy",
        "id": 1293089,
        "node_id": "MDQ6VXNlcjEyOTMwODk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1293089?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dupontcy",
        "html_url": "https://github.com/dupontcy",
        "followers_url": "https://api.github.com/users/dupontcy/followers",
        "following_url": "https://api.github.com/users/dupontcy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dupontcy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dupontcy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dupontcy/subscriptions",
        "organizations_url": "https://api.github.com/users/dupontcy/orgs",
        "repos_url": "https://api.github.com/users/dupontcy/repos",
        "events_url": "https://api.github.com/users/dupontcy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dupontcy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-01T16:22:32Z",
      "updated_at": "2024-05-01T16:22:32Z",
      "author_association": "NONE",
      "body": "> Unfortunately even \"economic\" mode still overestimate so changing default mode to \"economic\" does not fix this issue.\r\n\r\nMaybe it does not fix it all together, but it makes it overestimate less.\r\n\r\nThe difference between ECONOMICAL and CONSERVATIVE for a confirmation target of  2 to 12 blocks is HUGE (by a factor of 7)\r\nHere is recent data from our node with a confirmation target of 2 blocks\r\nECONOMICAL:   0.00020106 \r\nCONSERVATIVE:  0.00141359\r\n\r\nThe CONSERVATIVE mode uses the long stats for the 95% confirmation target, they have a half-time of 1008 blocks!\r\nAny spike in fees and number transaction will get into the long stats and decay only very very slowly.",
      "user": {
        "login": "dupontcy",
        "id": 1293089,
        "node_id": "MDQ6VXNlcjEyOTMwODk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1293089?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dupontcy",
        "html_url": "https://github.com/dupontcy",
        "followers_url": "https://api.github.com/users/dupontcy/followers",
        "following_url": "https://api.github.com/users/dupontcy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dupontcy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dupontcy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dupontcy/subscriptions",
        "organizations_url": "https://api.github.com/users/dupontcy/orgs",
        "repos_url": "https://api.github.com/users/dupontcy/repos",
        "events_url": "https://api.github.com/users/dupontcy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dupontcy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30009#issuecomment-2088717254",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30009"
    }
  ]
}