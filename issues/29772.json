{
  "type": "issue",
  "issue": {
    "id": 2216803310,
    "node_id": "I_kwDOABII586EIbvu",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29772",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29772/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29772/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29772/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/29772",
    "number": 29772,
    "state": "open",
    "state_reason": null,
    "title": "importaddress failed, Only legacy wallets are supported by this command.",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nI want to import the address or public key into bitcoind because I want to list the unspent utxo based on my bitcoind node and then assemble the transaction on the client side. However, an error will be reported when importing the address and public key.\r\n\r\nError:\r\n```\r\nerror code: -4\r\nerror message:\r\nOnly legacy wallets are supported by this command\r\n```\n\n### Expected behaviour\n\nsuccess and list unspent utxo success.\n\n### Steps to reproduce\n\n`bitcoin-cli importaddress mk4xz7tbbQDcQY68qYehydV9PRBWdVGNw1 \"ray\"`\r\n\r\n```\r\nerror code: -4\r\nerror message:\r\nOnly legacy wallets are supported by this command\r\n```\r\n\r\n`bitcoin-cli importpubkey 03f3de8f736a0bff7dfe446138acf98c23199c0710c704416dc9b6338bf37900e9  \"ray_pub\" true`\r\n\r\n```\r\nerror code: -4\r\nerror message:\r\nOnly legacy wallets are supported by this command\r\n```\r\n\r\nbitcoind start cmd:\r\n`bitcoind -blocksonly=false -wallet=ray -addresstype=legacy`\r\n\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nBitcoin Core version v25.0.0\n\n### Operating system and version\n\nUbuntu 22.04.3 LTS\n\n### Machine specifications\n\n_No response_",
    "user": {
      "login": "ray2cycle",
      "id": 152759428,
      "node_id": "U_kgDOCRrshA",
      "avatar_url": "https://avatars.githubusercontent.com/u/152759428?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ray2cycle",
      "html_url": "https://github.com/ray2cycle",
      "followers_url": "https://api.github.com/users/ray2cycle/followers",
      "following_url": "https://api.github.com/users/ray2cycle/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ray2cycle/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ray2cycle/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ray2cycle/subscriptions",
      "organizations_url": "https://api.github.com/users/ray2cycle/orgs",
      "repos_url": "https://api.github.com/users/ray2cycle/repos",
      "events_url": "https://api.github.com/users/ray2cycle/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ray2cycle/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      },
      {
        "id": 477890092,
        "node_id": "MDU6TGFiZWw0Nzc4OTAwOTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Questions%20and%20Help",
        "name": "Questions and Help",
        "color": "006688",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 1,
    "created_at": "2024-03-31T06:21:23Z",
    "updated_at": "2024-04-01T09:40:14Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 2028589391,
      "node_id": "IC_kwDOABII58546dFP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2028589391",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-31T07:45:18Z",
      "updated_at": "2024-03-31T07:45:18Z",
      "author_association": "NONE",
      "body": "This should work for a descriptor wallet with `disable_private_keys=true`:\r\n\r\n```\r\n$ bitcoin-cli importdescriptors '[{ \"desc\": \"addr(mk4xz7tbbQDcQY68qYehydV9PRBWdVGNw1)#CHECKSUM\", \"timestamp\":\"now\", \"label\": \"ray\"}]'\r\n```\r\n\r\nYou will get the CHECKSUM with `getdescriptorinfo \"addr(mk4xz7tbbQDcQY68qYehydV9PRBWdVGNw1)\"`",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29772#issuecomment-2028589391",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29772"
    },
    {
      "event": "labeled",
      "id": 12308846714,
      "node_id": "LE_lADOABII586EIbvuzwAAAALdqhh6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12308846714",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-01T09:40:14Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "labeled",
      "id": 12308846721,
      "node_id": "LE_lADOABII586EIbvuzwAAAALdqhiB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12308846721",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-01T09:40:14Z",
      "label": {
        "name": "Questions and Help",
        "color": "006688"
      }
    }
  ]
}