{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955",
    "id": 1619835968,
    "node_id": "PR_kwDOABII585gjLxA",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28955",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28955.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28955.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/b19585e00a52c0b571e70ddb8f7c996d598c3435",
    "number": 28955,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "index: block filters sync, reduce disk read operations by caching last header",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Work decoupled from #26966 per request.\r\n\r\nThe aim is to remove an unnecessary disk read operation that currently takes place with every new arriving block (or scanned block during background sync). Instead of reading the last filter header from disk merely to access its hash for constructing the next filter, this work caches it, occupying just 32 more bytes in memory.\r\n\r\nTesting Note:\r\nTo compare the changes, added a pretty basic benchmark in the second commit. Alternatively, could also test the changes by timing the block filter sync from scratch on any network; start the node with `-blockfilterindex` and monitor the logs until the syncing process finish.\r\n\r\nLocal Benchmark Results:\r\n\r\n*Master (c252a0fc0f4dc7d262b971a5e7ff01508159193b):\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|      132,042,516.60 |                7.57 |    0.3% |      7.79 | `BlockFilterIndexSync`\r\n\r\n*PR (43a212cfdac6c64e82b601c664443d022f191520):\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|      126,915,841.60 |                7.88 |    0.6% |      7.51 | `BlockFilterIndexSync`\r\n",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      }
    ],
    "created_at": "2023-11-28T12:42:40Z",
    "updated_at": "2023-12-15T01:04:36Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "5b96e882f68c92ce5f54ba93d96ae5012241e97c",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2023_index_blockfilter_cache_header",
      "ref": "2023_index_blockfilter_cache_header",
      "sha": "b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 3,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 389858,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-12-14T21:47:57Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2023-08-30T13:12:58Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "7bc8c5312bf51edd3d85e1599b5d6ae32c8fd7b5",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36165,
        "stargazers_count": 72648,
        "watchers_count": 72648,
        "size": 246727,
        "default_branch": "master",
        "open_issues_count": 669,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-12-15T01:03:33Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-12-14T23:56:24Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 118,
    "deletions": 58,
    "changed_files": 7,
    "commits": 7,
    "review_comments": 5,
    "comments": 4
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc4MTg1OGI5NWNjZWFhYjNlYTY1MTM1YTdmYzliZTlhMTFlNmVmODU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/781858b95cceaab3ea65135a7fc9be9a11e6ef85",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/781858b95cceaab3ea65135a7fc9be9a11e6ef85",
      "tree": {
        "sha": "ffe2458b57fe2d583b7bf1d576275a39661b2ce3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ffe2458b57fe2d583b7bf1d576275a39661b2ce3"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ffe2458b57fe2d583b7bf1d576275a39661b2ce3\nparent b5a271334ca81a6adcb1c608d85c83621a9eae47\nauthor furszy <matiasfurszyfer@protonmail.com> 1700925052 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1701174538 -0300\n\nrefactor: index, make synchronous Sync() mechanism accessible\n\nno behavior change.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmVl3QsACgkQXdI8zGhq\npiOm+Q//apiYZKYuBjMKJ53snm/2xNUL3BAC/baXw9TyBtvxt50FYMQ2FjjFp3Z+\nXQ72RAk8zfP/zijqAi7qG6RM50NA9Vw1CpjaSDnPYf7MNlOFjyPhaL7yqVTsm1bv\nuyKlSHom4xn1hSv+MYKYzgL2pYDnr+ErNStjI6VjvllIe1fF5JpkbG+XkM/hTVxO\nwp+adSHsU4qsOm6iIJQnVF8J4jDhBLnoFhfBHYqv399B478FIIerRXdpNYc3GybZ\n9TA1KRPjeFH/BU72BpgOnROFxGgh2L1AUPHqE/b8i0L3lSZnmjiq/bQk6Pxcb0e3\nc81A/huz6+jjsEVf+2EWIQWxidFf+QXmhcRU0o+gWEl49xl3gIb13eXFUIMY29z/\nIj1c2w9zZyJh4v2GnpHdElKNFIl7Tnr1Wvd4+PeC/cFccuDnCGEWmWy4JLnrm/IJ\n5eMlClHO9tR4j8F7DPkoW+H5qQFnsIbDeiqf3zXFU1/pUOBu0p5YbjnzStPlWafW\n7DKMDCNBP1UjH2caipy2/H0PaYnCa6xXvNsXk/lOTDE0F/+jMpHP0C4sZPfQMR0T\nZmrL9Stpq90IA2MjSFFtKxpiQ0EyvOE/iiWBOXMTZklDjNhLshzRiQpoLKmsuPY8\nkSdTXpK6QuVuaxZVC5hU13Ssh7sveRQ52Sv2vUBjbD07nMyuRYw=\n=rkDv\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b5a271334ca81a6adcb1c608d85c83621a9eae47",
          "sha": "b5a271334ca81a6adcb1c608d85c83621a9eae47",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b5a271334ca81a6adcb1c608d85c83621a9eae47"
        }
      ],
      "message": "refactor: index, make synchronous Sync() mechanism accessible\n\nno behavior change.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-28T12:28:58Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-25T15:10:52Z"
      },
      "sha": "781858b95cceaab3ea65135a7fc9be9a11e6ef85"
    },
    {
      "event": "commented",
      "id": 1829768023,
      "node_id": "IC_kwDOABII585tEAtX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1829768023",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T12:42:43Z",
      "updated_at": "2023-12-15T01:04:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28955).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/28955#pullrequestreview-1757956519) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28983](https://github.com/bitcoin/bitcoin/pull/28983) (Stratum v2 Template Provider (take 2) by Sjors)\n* [#28241](https://github.com/bitcoin/bitcoin/pull/28241) (Silent payment index (for light wallets and consistency check) by Sjors)\n* [#24539](https://github.com/bitcoin/bitcoin/pull/24539) (Add a \"tx output spender\" index by sstone)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#issuecomment-1829768023",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955"
    },
    {
      "event": "labeled",
      "id": 11083083159,
      "node_id": "LE_lADOABII5854EJ87zwAAAAKUmm2X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11083083159",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T12:42:46Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "commented",
      "id": 1829918403,
      "node_id": "IC_kwDOABII585tElbD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1829918403",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T14:09:17Z",
      "updated_at": "2023-11-28T14:09:17Z",
      "author_association": "MEMBER",
      "body": "Ran bench on MacBook Pro 2019 (2,3 GHz 8-Core Intel Core i9, SSD):\r\n\r\n```sh\r\nsrc/bench/bench_bitcoin -filter=BlockFilterIndexSync\r\n```\r\n\r\nBefore (486c71bc707f5765fc6698a746cf221bab1ac357):\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|      336,034,835.00 |                2.98 |    0.6% |     19.86 | `BlockFilterIndexSync`\r\n\r\nAfter:\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|      339,403,771.80 |                2.95 |    0.6% |     19.98 | `BlockFilterIndexSync`\r\n\r\nNot seeing any improvement in the bench. Haven't tried running the full indexer though.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#issuecomment-1829918403",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955"
    },
    {
      "event": "commented",
      "id": 1829948567,
      "node_id": "IC_kwDOABII585tEsyX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1829948567",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T14:26:24Z",
      "updated_at": "2023-11-28T14:29:04Z",
      "author_association": "MEMBER",
      "body": "> Ran bench on MacBook Pro 2019 (2,3 GHz 8-Core Intel Core i9, SSD):\r\n> \r\n> ```shell\r\n> src/bench/bench_bitcoin -filter=BlockFilterIndexSync\r\n> ```\r\n> \r\n> Before ([486c71b](https://github.com/bitcoin/bitcoin/commit/486c71bc707f5765fc6698a746cf221bab1ac357)):\r\n> \r\n> ns/op\top/s\terr%\ttotal\tbenchmark\r\n> 336,034,835.00\t2.98\t0.6%\t19.86\t`BlockFilterIndexSync`\r\n> After:\r\n> \r\n> ns/op\top/s\terr%\ttotal\tbenchmark\r\n> 339,403,771.80\t2.95\t0.6%\t19.98\t`BlockFilterIndexSync`\r\n> Not seeing any improvement in the bench. Haven't tried running the full indexer though.\r\n\r\nProbably, it is because the benchmarks, same as the unit tests, create temp directories. Which may be faster to access than regular directories. See https://github.com/bitcoin/bitcoin/pull/26684#pullrequestreview-1566578747.\r\nI should verify if the bench framework accepts custom paths so we can test this differently. Most likely, it doesn't and we should add the feature.\r\n\r\nAlso, you could increase the `CHAIN_SIZE` variable inside the benchmark. Go from 600, to 3000 or more. The time should grow up linearly. I didn't do it merely because the bench would take longer to setup but the difference should be evident with a longer chain.\r\n",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#issuecomment-1829948567",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T16:33:56Z",
      "updated_at": "2023-11-28T16:33:56Z",
      "source": {
        "issue": {
          "id": 1842817294,
          "node_id": "PR_kwDOABII585Xg45g",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28241",
          "number": 28241,
          "state": "open",
          "state_reason": null,
          "title": "Silent payment index (for light wallets and consistency check)",
          "body": "This PR adds an index with the silent payment tweak for every transaction. It builds on top of #28122.\r\n\r\nIt also adds a `getsilentpaymentblockdata` RPC that returns an array of silent payment tweaked public keys, one for each qualifying transaction. \r\n\r\nThis index serves two purposes:\r\n1. Light client support, see [BIP 352](https://github.com/josibake/bips/blob/silent-payments-bip/bip-0352.mediawiki#user-content-Tweak_Data)\r\n2. A more thorough check than the test vectors; e.g. by comparing a checksum of the index for all of mainnet.\r\n\r\nBased on the index that was originally part of #24897.\r\n\r\nTODO:\r\n- [ ] check correctness against another implementation\r\n- [ ] make `-silentpaymentindex=0` mean off (default), `-silentpaymentindex=v0` on\r\n- [ ] figure out how to do versioning (make the index flexible enough, or just rebuild the index at the next version)\r\n- [ ] remove dependency on wallet (move `GetSilentPaymentsTweakDataFromTxInputs` and everything it needs out of the wallet)\r\n- [ ] cleanup various TODO's in the code\r\n- [ ] brainstorm updating index when outputs are spent\r\n- add tests\r\n  - [ ] that a reorg adds the new blocks (and it's fine to keep the old one) ",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 20,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28241",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28241",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28241.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28241.patch"
          },
          "created_at": "2023-08-09T09:13:55Z",
          "updated_at": "2023-12-13T16:00:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T17:31:54Z",
      "updated_at": "2023-11-28T17:31:54Z",
      "source": {
        "issue": {
          "id": 1556671710,
          "node_id": "PR_kwDOABII585Ig7Js",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26966",
          "number": 26966,
          "state": "open",
          "state_reason": null,
          "title": "index: blockfilter initial sync speedup, parallelize process",
          "body": "The current procedure for building the block filter index involves processing filters one at a time;\r\nReading blocks, undo data, and previous headers from disk sequentially.\r\n\r\nThis PR introduces a new mechanism to perform the work concurrently. Dividing the filters\r\ngeneration workload among a pool of workers that can be configured by the user,\r\nsignificantly increasing the speed of the index construction process.\r\n\r\nThe same concurrent processing model has been applied to the transactions index as well.\r\n\r\nThe newly introduced init flag `-indexworkers=<n>` enables the concurrent sync\r\nbehavior.\r\nWhere \"n\" is the number of worker threads that will be spawned at startup to create ranges\r\nof block filters during the initial sync process. Destroying the workers pool once the\r\ninitial sync completes.\r\nNote: by default, the parallelized sync process is not enabled.\r\n\r\nNow the juicy part:\r\nIn my computer, with the node in debug mode and on IBD, with `-indexworkers=4`, the\r\nblock filter index generation took less than an hour. While, in master, the sync took more than 7 hours.\r\n\r\nImportant Note:\r\nAs the access to the block data on disk is protected by `cs_main`, this new feature runs substantially\r\nfaster when the node is not in IBD.\r\n\r\nFootnote:\r\nThis is part of a larger project :).",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 13,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26966",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26966.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26966.patch"
          },
          "created_at": "2023-01-25T13:36:23Z",
          "updated_at": "2023-12-14T21:54:47Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T18:06:56Z",
      "updated_at": "2023-11-28T18:06:56Z",
      "source": {
        "issue": {
          "id": 1166781352,
          "node_id": "PR_kwDOABII5840UWxr",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24539",
          "number": 24539,
          "state": "open",
          "state_reason": null,
          "title": "Add a \"tx output spender\" index",
          "body": "This PR adds a new \"tx output spender\" index, which allows users to query which tx spent a given outpoint with the `gettxspendingprevout` RPC call that was added by https://github.com/bitcoin/bitcoin/pull/24408.\r\n\r\nSuch an index would be extremely useful for Lightning, and probably for most layer-2 protocols that rely on chains of unpublished transactions.\r\n\r\nUPDATE: this PR is ready for review and issues have been addressed:\r\n- using a watch-only wallet instead would not work if there is a significant number of outpoints to watch (see https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276595646)\r\n- this PR does not require `-txindex` anymore\r\n\r\n\r\nI chose to store an outpoint (32 + 4 bytes) -> txid (32 bytes) index (so -txospenderindex requires -txindex) rather than a outpoint -> disk pos index.",
          "user": {
            "login": "sstone",
            "id": 1573866,
            "node_id": "MDQ6VXNlcjE1NzM4NjY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sstone",
            "html_url": "https://github.com/sstone",
            "followers_url": "https://api.github.com/users/sstone/followers",
            "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
            "organizations_url": "https://api.github.com/users/sstone/orgs",
            "repos_url": "https://api.github.com/users/sstone/repos",
            "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sstone/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 23,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24539",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24539.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24539.patch"
          },
          "created_at": "2022-03-11T19:32:41Z",
          "updated_at": "2023-12-11T16:45:52Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1755516656,
      "node_id": "PRR_kwDOABII585oow7w",
      "url": null,
      "actor": null,
      "commit_id": "63ef83d72a979e9e557eec9fe87c2795a963dedb",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 63ef83d72a979e9e557eec9fe87c2795a963dedb",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#pullrequestreview-1755516656",
      "submitted_at": "2023-11-29T15:33:14Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMzZTI5MTViMTQ5MDBjMTM3OWU0YzNmMWFjMDI2MmY2MGIzNjI0MzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c3e2915b14900c1379e4c3f1ac0262f60b362431",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c3e2915b14900c1379e4c3f1ac0262f60b362431",
      "tree": {
        "sha": "3c3f8ad4ac2bc80c27455fd1a1e537855d95d657",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3c3f8ad4ac2bc80c27455fd1a1e537855d95d657"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3c3f8ad4ac2bc80c27455fd1a1e537855d95d657\nparent 781858b95cceaab3ea65135a7fc9be9a11e6ef85\nauthor furszy <matiasfurszyfer@protonmail.com> 1700864058 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1701309835 -0300\n\nbench: basic block filter index initial sync\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmVn7YsACgkQXdI8zGhq\npiP+5A//eVdbNmpYsFHl8z2tIyeEwIt//M/YqpTucvJqLhcy97EiS4ttXXRD1qxX\nvOpa+TPxBavx8XiGNjZo6PrxHowM5/u1gguUyWB+SAAlEScjd3/2gKuEMHPH7Ky9\naL6abF3qcwFscphWVqhFdmyJRqxbGwWL4+8NEQ1s8RuJ9iT7jviU7E5+K1a7ANG5\n0K3sftvPtwhc/dY8LoImkxaxI2dga4CyOovwtUwfQbuNjbAJTF9Sv69/Q1/oDDtU\njCYk3PzX1DFALoKq7QTHtWd++yce9NvgLIIGIcTvn+duD3JEyvRwMotsgPgMRNyi\nKEULaOWGJqdeiVETjVbfURNbQeUMi8upze0j6blxa/pMsAdXu343gKxjYnp98Vmq\nSON4YvZ+vbhc4DddrCTSTA4LFsQI8JFlcUrLd7O+3xplmEVT+NOFze6wyGwBxPfc\n1kq3jTJ63WmEwWoET3629vcyfAaT2FDwe1sI4ShmoGqmGiJdUX5dWMIfPaAjoqmL\nSD3MRLyjQTjAcLhpx6pibyiKOlGVuYkLW4QgdsLJFJUq4oUDAciSe6fparam41TD\nzZetRkn8NS7OAIxn97y7aWH2xyiFxPg4MoL0axpVgDjZgkROEdVm07bFGM8yzgpv\n9r2suyGAJi+3GckSzYBw6uEP1UL/JwwiYhz31AyXZXRK0Z9+d98=\n=7AtV\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/781858b95cceaab3ea65135a7fc9be9a11e6ef85",
          "sha": "781858b95cceaab3ea65135a7fc9be9a11e6ef85",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/781858b95cceaab3ea65135a7fc9be9a11e6ef85"
        }
      ],
      "message": "bench: basic block filter index initial sync",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-30T02:03:55Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-24T22:14:18Z"
      },
      "sha": "c3e2915b14900c1379e4c3f1ac0262f60b362431"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkxMTYxODQxZmUyNDQ5YTk1NmI1ZWVhNzZkNWViZWM2MjZjZTE2MWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91161841fe2449a956b5eea76d5ebec626ce161e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/91161841fe2449a956b5eea76d5ebec626ce161e",
      "tree": {
        "sha": "3c5906b963a79e7b9a143209075ae9edf2339620",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3c5906b963a79e7b9a143209075ae9edf2339620"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3c5906b963a79e7b9a143209075ae9edf2339620\nparent c3e2915b14900c1379e4c3f1ac0262f60b362431\nauthor furszy <matiasfurszyfer@protonmail.com> 1674604182 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1701309835 -0300\n\nindex: blockfilter, decouple Write into its own function\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmVn7YsACgkQXdI8zGhq\npiPp+g//cPwWfR5hULy1VL6uOOwKuRAb+9pzbqrO0vKqLn3T85Ya2qih90mO0We5\nIcs6hr8nVBGUPr1g6UAax7ZeByeiJWSrE3Ew18kaZ4bx62gZ1a1+j4N7BWL0MlvZ\nMpVtG9zEL9VX32KX52wRL3cd/TVWzYJBuGAT+UeZ/plsywmWH8UC1ha4OxtSmNrT\nh092t2InhoMU6OUv+feEYLfYPZ4R4l+cvMuHgswYi/UsE9ztwsGOzPL407GWGtOA\npmFaF9TIPR1e2wKqT30CnWIb9CBstbAYW9MQTo6dyOr/ZNKdSme47kKWiTnqqeHJ\nObiGGzyn8qqmeVOnpJcGsUV8kwtK6kjya3Kzjb7S964jhIMdpDCJlF+7ng6PlyFi\nUZ8Cu1v6Rx82Jc7JJUbMfEJZAw/b+d4tLCVvguXdr4ZZ4xAMKsQ5eNUBnncC0Gff\nw9JNFj9022wbu9SlMQLuF5g8Oz5x4G5UVn4Y4QYa6Xrpp/ljXvZCyd/h8rrUAcPi\n2amO1D2PTJPGUD03RaA3qI/XmpAIzMAa4U9ZrKqxejVENhbCF7OQdBgQerScVWKQ\nrAuDjn10McE2mlj22yfWRekZIPp9NFHxvXpqzJyr0iDXOr5FqHtpOH3wbDcINDbr\nUyqPWuVBdEu7kFq+0RTuU+To0MqOzKk1fcfuKfG8Hj17H9eAaQw=\n=8Oj+\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c3e2915b14900c1379e4c3f1ac0262f60b362431",
          "sha": "c3e2915b14900c1379e4c3f1ac0262f60b362431",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c3e2915b14900c1379e4c3f1ac0262f60b362431"
        }
      ],
      "message": "index: blockfilter, decouple Write into its own function",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-30T02:03:55Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-01-24T23:49:42Z"
      },
      "sha": "91161841fe2449a956b5eea76d5ebec626ce161e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhjZjhhNDM0YWEyNTNkNDBhYzE5MDg1YWE4NTA1ZjFlZWFjNmY3NDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8cf8a434aa253d40ac19085aa8505f1eeac6f748",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8cf8a434aa253d40ac19085aa8505f1eeac6f748",
      "tree": {
        "sha": "8f3424022e4f9fd4576f1820ffe965acef871f94",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8f3424022e4f9fd4576f1820ffe965acef871f94"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 8f3424022e4f9fd4576f1820ffe965acef871f94\nparent 91161841fe2449a956b5eea76d5ebec626ce161e\nauthor furszy <matiasfurszyfer@protonmail.com> 1675111876 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1701309836 -0300\n\nindex: blockfilter, decouple header lookup into its own function\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmVn7YwACgkQXdI8zGhq\npiNWIA/+LaZ5ydI+gFHYiK9TrZzXF9dsu8MQVQzkxZ+5pyFtSt9O5UDpxOqmGIUJ\nYaPiAgJJZmDm9vlucOhXD5EiKhFWsgW2wgJTjCUxMHDsM7kOYJTo7IR3hsZmIG84\nssfBb2UL9OpdK6gJRb5NUMFDcm6KErLvmzYbc20sCxvYTTyrRud9bsrR3oIhj9xr\nREJXtNvNLpNJePy7FXSebOvxZ6CYQ8D0ubwK1HL4W2pKUgN+alv/5bscOEYZ9Xae\nHjTUPPXBv5Ck/Ucc6obB1IBgQUR2Ak8GHoGw5TURb7lv31b3xJu95iW6kWtlFooj\neu+YfRaQeZnyAtDTQEf4MXNAJf1lVUd6LZNUu9d6oz/vj93d7tDepeI2+JTisi4m\nMASwQU7GW7ycFuL9f67kM0cK+Ww1P+9H9PisW7tOc1Lsjiu4VZqX0d6Fk1hs2XZq\nSq1/f8NPpFQ0boXrdjndpXt/79p8nzfLLKppyEtrakVPXQ2wMapDcRBbEGp9YVhB\nZ1WtBo2RD5mkCaTGvIZkOfHuwG83kwZj03KkKXkP1R0kKi7IQ3WMgudi/8mTS6zG\nJBpSWiwaZt0lNybBwsOWFPlWQKRcZHhfuEI2w0IABW2zezfDYGZSvhyqt0XIxTu6\nVA5b4vWeVwIPWv0U1lx3xMzsTcyH9XiYXM2tr/jNI8jiThUnsCM=\n=uvdd\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91161841fe2449a956b5eea76d5ebec626ce161e",
          "sha": "91161841fe2449a956b5eea76d5ebec626ce161e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/91161841fe2449a956b5eea76d5ebec626ce161e"
        }
      ],
      "message": "index: blockfilter, decouple header lookup into its own function",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-30T02:03:56Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-01-30T20:51:16Z"
      },
      "sha": "8cf8a434aa253d40ac19085aa8505f1eeac6f748"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkwOTY5YzJhY2I2MTU0ZGY1YjQ2MjlmNjlkZDJmZmMzYTk0ODBjYjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/90969c2acb6154df5b4629f69dd2ffc3a9480cb7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/90969c2acb6154df5b4629f69dd2ffc3a9480cb7",
      "tree": {
        "sha": "3fce4b7c12915cc39c28ebf26d2c098ce217b954",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3fce4b7c12915cc39c28ebf26d2c098ce217b954"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3fce4b7c12915cc39c28ebf26d2c098ce217b954\nparent 8cf8a434aa253d40ac19085aa8505f1eeac6f748\nauthor furszy <matiasfurszyfer@protonmail.com> 1676562230 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1701309836 -0300\n\nindex: cache last block filter header\n\navoid disk read on every new processed block.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmVn7YwACgkQXdI8zGhq\npiPTyxAA0BscCmWpUUuct6YuxRRLdSvLummcYMJYisWBZkwKxSRCU8E8TEgroGs+\nODVUEJF/F2Ru0ZHU8mfNh3WUCB9WXxWQV+K43hrIytFOHWQ+hTrqJLCq3ldwZMeX\n46kkaaefkIOOi2FG6uIrPzXCWzgQZmEB0eQsGw50dqTcRDQB22ncu3O9GQXupG0p\nvM54pSOgQSrq/0G3q+Eq8WFQ9CmZEKdJiInsBoYsy46K6jsSL8iy5s0/vOd3Vm4y\ns1uP5dNlDu2RceSt3eM8yEZ74YZ7q+M7CJKAirqyhxF6OiuyEJRB4dboiOWgi8IS\nEQKnxYGHBDUteZ6n+fE9rpk3syUhu07BG4UX67cZEqi8pjDxIyENxU/9HTTKP0ui\no4Fw91XNbzgNdTjtxvfKFve+K6jLHA+px+C9Vk/tUG5E0Z92VnMprjTKmNo6D3nd\ntmHuz35hHo8zb/sIaiXP3JL0lbBE2gRLFpUL7bq5v3Xto1P+cu2fezsqNqOI+WGw\nu6yX9qTZypqUq87XCohQrlk/rFbLY35POCoirU+xoSr3YK9TI75TVO3WOoh55OIi\nSWkfLtglgnpyeHEDNSa5UHI27T76tZjELf3jQb0eKuKHuHo6yGwckIt/OwtRRLpE\nv6fcXjAHN980egMkgqhCNBdcpk7RcMHz6bxL5desb4Bz7NUPojY=\n=ZDsB\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8cf8a434aa253d40ac19085aa8505f1eeac6f748",
          "sha": "8cf8a434aa253d40ac19085aa8505f1eeac6f748",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8cf8a434aa253d40ac19085aa8505f1eeac6f748"
        }
      ],
      "message": "index: cache last block filter header\n\navoid disk read on every new processed block.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-30T02:03:56Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-02-16T15:43:50Z"
      },
      "sha": "90969c2acb6154df5b4629f69dd2ffc3a9480cb7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVkNWUyMmI5NzlkMDBjYTNkM2M0YjQwMTNmZWE0M2JhNThmNTcxYmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5d5e22b979d00ca3d3c4b4013fea43ba58f571bc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5d5e22b979d00ca3d3c4b4013fea43ba58f571bc",
      "tree": {
        "sha": "3f9704e83308ffa78ac8fb2f25f09cfe6215ed44",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3f9704e83308ffa78ac8fb2f25f09cfe6215ed44"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3f9704e83308ffa78ac8fb2f25f09cfe6215ed44\nparent 90969c2acb6154df5b4629f69dd2ffc3a9480cb7\nauthor furszy <matiasfurszyfer@protonmail.com> 1676579100 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1701309836 -0300\n\nindex: decrease ThreadSync cs_main contention\n\nOnly NextSyncBlock requires cs_main lock. The\nother function calls like Commit or Rewind will\nlock or not cs_main internally when they need it.\n\nAvoiding keeping cs_main locked when Commit() or\nRewind() write data to disk.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmVn7YwACgkQXdI8zGhq\npiPY9A//bOPGqXzolSsLCurKOOmdFL/3Gna1npAkps6gQIQkmFhbjDEhf6meuJbY\nPO9sQfu6/YfBeluDPcj4VUK9Ue7xjNFT9C+OVj7bVuZbnSskS7pmhs6cFmPjjKh/\nq+FeTKFUbuQvaBkeMVfOFRlqozLru1OQtfwV/o4w0+yRH4IxwvQChSViEqTZd8lG\nmGGLDeJ10UbLhoetLpw+CcvJll9Hfs5oKts12xM2SVk6E4MDjzyFWFiioDv63SfZ\nB9FFaCe1/8ABMGstYMjnEYdwRDAtqJBlJeuOrWyyxkQpHeSozHwGfxGACyifXE+P\nScCLUoQtWs9r4JAAMCVvvJeKpaYRJ1rwc07C2CnEFOTOArfHMHiWHSHKX9KqYxTs\nOyP7GTwx6J5MNn9AOHXDvlSDBBKab1BfPtMUcLXzKb6quKo1hSfg7ebDPahy0Kmq\ne3+KhfkcnB6XAc/LgxX0c8QIzIgYVnb7C8g7lTg1zrBwR9Zej2BHKAtLPmzF3RU+\nLwLsg91SFkPNRNq0NLykSVwyaoiEZPChS/VHC0tuiIi9cQiuk1fLsQtD5OXmAgtM\nlkB/Vk3zsKSh5813NcbK3s6lJvxTcL5NL9zDwSaK/PaqcB2qfvp1DYz1i1v3nHkq\npWw9YiTVWYV1CLonVyB07h2EGVCeglHykrf3A44QrzENNyik0zM=\n=+p6b\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/90969c2acb6154df5b4629f69dd2ffc3a9480cb7",
          "sha": "90969c2acb6154df5b4629f69dd2ffc3a9480cb7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/90969c2acb6154df5b4629f69dd2ffc3a9480cb7"
        }
      ],
      "message": "index: decrease ThreadSync cs_main contention\n\nOnly NextSyncBlock requires cs_main lock. The\nother function calls like Commit or Rewind will\nlock or not cs_main internally when they need it.\n\nAvoiding keeping cs_main locked when Commit() or\nRewind() write data to disk.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-30T02:03:56Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-02-16T20:25:00Z"
      },
      "sha": "5d5e22b979d00ca3d3c4b4013fea43ba58f571bc"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIxOTU4NWUwMGE1MmMwYjU3MWU3MGRkYjhmN2M5OTZkNTk4YzM0MzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "tree": {
        "sha": "5faed607485f30c5c1f752154b7526a80ba1df1f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5faed607485f30c5c1f752154b7526a80ba1df1f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5faed607485f30c5c1f752154b7526a80ba1df1f\nparent 5d5e22b979d00ca3d3c4b4013fea43ba58f571bc\nauthor furszy <matiasfurszyfer@protonmail.com> 1701172920 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1701309836 -0300\n\nrefactor: init, simplify index shutdown code\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmVn7YwACgkQXdI8zGhq\npiNvNA/7BGA97add9vJ/GiE/tYMcJ35Iqh5jd9iJOXD/j9Igi4xOlPDCHQqdw9hY\nu7KkEHrnsbzyLKIt/UdIYMi31BJSQZb5ALaEkv8d+OjjkK1qzOOh371hTDMXY+nn\nmpkNSDtV5swmc/5Invf8mbbP6C04+tJF3Nwh3SfKqsP0Rin+g0atSAF4rTvILbaA\nS2etQ6mY/yuLTMWGAAHgHM6Vt40NqNnLYDlAGdESjc2CzcbeKZ48d7Hg4w+mfXPW\n8hIwXHO2WcuVpr0H0lxf2o6J089nDbwRf2SOd197UgLoKcU6SUPpm7+0M64x0SaH\nTFj0Z4hxzMQ2tNPR8vKua/DbvPOMRDHEA9mn1A3U8c3k6BPymZDjbhwcBBoi95do\ndFbXQ4TiD1vaj3BgwNRkkQe9qFaY124auyaLKhYGmRfI8MiajVcXWYUY68Bzdo7x\nQ/z3mkhPGWHH0kfUdPz2ZanLfb+KhrijLVwn7s3cIlIsymVbcqE1CzHXMRhYjwz2\nCOPSsymr19o2MLlE/xWw/31OltNtymwBS+REVGM4nNg03ArhV592xIPn3ZttzjYj\n+bb5uWVgIw1KiTv5W5Ef9Kqhg9BL4BLwTfPcDSco1klgbGx+pt1d4YT5sSM8bKRU\ncfr91y60oWvKdtDkavYUttGxa6dlSeO221GSZx12dA0IKPbz0pE=\n=C0FJ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5d5e22b979d00ca3d3c4b4013fea43ba58f571bc",
          "sha": "5d5e22b979d00ca3d3c4b4013fea43ba58f571bc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5d5e22b979d00ca3d3c4b4013fea43ba58f571bc"
        }
      ],
      "message": "refactor: init, simplify index shutdown code",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-30T02:03:56Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-11-28T12:02:00Z"
      },
      "sha": "b19585e00a52c0b571e70ddb8f7c996d598c3435"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11103355345,
      "node_id": "HRFPE_lADOABII5854EJ87zwAAAAKVz8HR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11103355345",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-30T02:04:58Z"
    },
    {
      "event": "reviewed",
      "id": 1757956519,
      "node_id": "PRR_kwDOABII585oyEmn",
      "url": null,
      "actor": null,
      "commit_id": "b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Re-ACK b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#pullrequestreview-1757956519",
      "submitted_at": "2023-11-30T17:01:01Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-01T13:17:09Z",
      "updated_at": "2023-12-01T13:17:09Z",
      "source": {
        "issue": {
          "id": 2020711772,
          "node_id": "PR_kwDOABII585g48_Q",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28983",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28983/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28983/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28983/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28983",
          "number": 28983,
          "state": "open",
          "state_reason": null,
          "title": "Stratum v2 Template Provider (take 2)",
          "body": "Based on on @Fi3's https://github.com/bitcoin/bitcoin/compare/master...Fi3:bitcoin:PatchTemplates which is based on @ccdle12's #27854. I rebased it and re-wrote the commit history. See the original branch for the evolution of the spec.\r\n\r\nThe Stratum v2 [spec](https://github.com/stratum-mining/sv2-spec) describes various roles, but for Bitcoin Core the role of the [Template Provider](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md) is the most interesting. It generates block templates and _pushes_ those out (to a [Job Declarator client](https://github.com/stratum-mining/stratum/tree/dev/roles/jd-client), which declares it to a Job Declarator server, which either accepts or rejects it - nothing the node needs worry about).\r\n\r\nAdditionally, as a Template Provider we need to attempt broadcasting new blocks when they're found, as announced to us by the Job Declarator client to use via a `SubmitSolution` message.\r\n\r\n## Testing guide\r\n\r\nTo get help with the stratum side of things, this Discord may be useful: https://discord.gg/fsEW23wFYs\r\nOr file a Github issue at [stratum-mining/stratum](https://github.com/stratum-mining/stratum) (most action is in the dev branch)\r\nThe dev branch code crashes sometimes, as does the tesnet pool server.\r\n\r\n### Method 1: Bring your own ASIC, external (testnet) pool\r\n\r\nFirst start the node:\r\n\r\n```\r\nsrc/bitcoind -testnet -stratumv2 -debug=sv2 -loglevel=sv2:debug\r\n```\r\n\r\nThen build and run a Job Declator client: [stratum-mining/stratum/tree/dev/roles/jd-client](https://github.com/stratum-mining/stratum/tree/dev/roles/jd-client)\r\n\r\nThis client connects to your node to receive new block templates and then \"declares\" them to a Job Declarator server. Additionally it connects to the pool itself. Try this config (see documentation for more):\r\n\r\n```toml\r\n[[upstreams]]\r\nauthority_pubkey = \"3VANfft6ei6jQq1At7d8nmiZzVhBFS4CiQujdgim1ign\"\r\npool_address = \"89.116.25.191:34254\"\r\njd_address = \"89.116.25.191:34264\"\r\n```\r\n\r\nFinally you most likely need to use the v1 to v2 translator: [stratum-mining/stratum/tree/dev/roles/translator](https://github.com/stratum-mining/stratum/tree/dev/roles/translator), even when you have a stratum v2 capable miner. At least until Braiins and others release new firmware that supports the latest updates to the spec. Hopefully this is temporary, because the translator adds extra complexity.\r\n\r\nYou need to point the translator to your job declator client, which in turn already connects to the pool.\r\n\r\nAs soon as you turn on the translator, the Bitcoin Core log should show a `SetupConnection` [message](https://github.com/stratum-mining/sv2-spec/blob/main/08-Message-Types.md). \r\n\r\nNow point your ASIC to the translator. At this point you should be seeing `NewTemplate`, `SetNewPrevHash` and `SetNewPrevHash` messages. \r\n\r\n- [ ] TODO: figure out how to recognize your own blocks\r\n- [ ] figure out how much hash power is enough to at least occasionally produce a block on testnet, i.e. what the minimum required hardware for testing is\r\n\r\n### Method 2: CPU mine, run your own pool (regtest)\r\n\r\n- [ ] TODO: figure out and explain\r\n\r\nLast time I tried this there was no Stratum v2 capable CPU miner. You'd have to use the translator. This wouldn't work with a normal pool, because the CPU miner can't provide shares without difficulty. So you'd have to run a pool locally, which is more complicated than method 1.\r\n\r\n### Method 3: Mainnet\r\n\r\nSame as method 1, find a pool with stratum v2 support and good debug logging.\r\n\r\nTesting on mainnet, although reckless, may be very useful to find performance bottlenecks.\r\n\r\n## Implementation notes\r\n\r\nOnce the spec is mature enough (???) and this PR is improved (???) I plan to make separate pull request. Probably starting with ECDH and the noise protocol.\r\n\r\nSilent Payments also needs the ECDH module, so I cherry-picked the commit from #28122. It uses ECDH is a slightly different way, but perhaps there's more overlap to be had.\r\n\r\n# Spec notes\r\n\r\n- Why does it use noise instead of BIP324? I need to read up on this, but my preliminary thought is that unlike p2p, for mining identity does matter, so there's different trade-offs. Perhaps there's still be some overlap to be gained in the implementation?\r\n\r\n- [ ] TODO (for me): study the most recent spec and compare to the code\r\n\r\n### Do more, do less?\r\n\r\nBecause stratum v2 is push based, having an external tool poll the `getblocktemplate` RPC would add unnecessary delay.\r\n\r\nHowever there's still discussion to be had about how much of Stratum v2 needs to be implemented here, vs what can be done by an external tool and e.g. pushing templates via ZMQ. Some discussion in the original PR https://github.com/bitcoin/bitcoin/pull/27854#issuecomment-1586988190\r\n\r\nNote that any miner still has to run their own Job Declarator client. In the reference implementation this software decides which pool to use, and which Bitcoin address to use for solo-mining fallback, so it's clearly trusted. If it's also running on the same machine, like in Setup 1, then the noise protocol and message overhead seems unnecessary.\r\n\r\nOn the other hand, if the goal is to have other software than Bitcoin Core also generate templates, then relying on ZMQ as a communication standard may not be ideal, especially when the rest of the mining ecosystem relies on the noise protocol and sv2 message types.\r\n\r\n## Outstanding issues\r\n\r\nThis is an incomplete list. I still need to study much of this code myself.\r\n\r\n- [ ] fix test (happens on Ubuntu, not on macOS in b02f5a0e8eda58912167695d794fcfbbafea555d)\r\n- [ ] push more often / smartly: we currently push a template after a new block is found and then every 30 seconds\r\n- [ ] don't generate templates when no client is connected\r\n- [ ] obey may chunk size: https://github.com/stratum-mining/stratum/issues/687 (this may block mainnet, which needs bigger messages)\r\n- [ ] fix various TODO's in the new code\r\n- [ ] limit on the number of downstream connections, if needed\r\n- [ ] see \"full merkle path\" in original PR description\r\n- [ ] go through code review comments on the original PR\r\n- [ ] way more tests",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118378960,
              "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
              "name": "Mining",
              "color": "c7def8",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28983",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28983",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28983.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28983.patch"
          },
          "created_at": "2023-12-01T11:39:27Z",
          "updated_at": "2023-12-15T00:54:57Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1839900641,
      "node_id": "IC_kwDOABII585tqqfh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1839900641",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-05T02:37:58Z",
      "updated_at": "2023-12-05T02:37:58Z",
      "author_association": "MEMBER",
      "body": ">Probably, it is because the benchmarks, same as the unit tests, create temp directories. Which may be faster to access than regular directories.\r\n\r\nIs it, though? I would think the OS should have this cached regardless?",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#issuecomment-1839900641",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28955"
    },
    {
      "event": "reviewed",
      "id": 1766044359,
      "node_id": "PRR_kwDOABII585pQ7LH",
      "url": null,
      "actor": null,
      "commit_id": "b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "> > Probably, it is because the benchmarks, same as the unit tests, create temp directories. Which may be faster to access than regular directories.\r\n> \r\n> Is it, though? I would think the OS should have this cached regardless?\r\n\r\nWe will know it soon. I'm working on a way to test it inside https://github.com/bitcoin/bitcoin/pull/26564#pullrequestreview-1761271269.\r\n\r\nBut, it seems to be an orthogonal topic. Regardless of the result, which could vary depending on the OS, the changes in this PR should be good to go as is.\r\n\r\nConceptually, the block filter index synchronization process makes a db call on every new block (forever) just to get the tip's header hash when it could just cache those 32 bytes.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#pullrequestreview-1766044359",
      "submitted_at": "2023-12-05T20:24:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-08T00:38:15Z",
      "updated_at": "2023-12-08T00:38:15Z",
      "source": {
        "issue": {
          "id": 1462653243,
          "node_id": "PR_kwDOABII585DnDFl",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26564",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26564/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26564/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26564/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26564",
          "number": 26564,
          "state": "open",
          "state_reason": null,
          "title": "test: test_bitcoin: allow -testdatadir=<datadir>",
          "body": "This backward-compatible change would help with code review and testing. When `test_bitcoin` runs, it creates a working or data directory within `/tmp/test_common_Bitcoin\\ Core/`, named as a long random (hex) string.\r\n\r\nThis small patch does three things:\r\n\r\n- If the (new) argument `-testdatadir=<datadir>` is given, it replaces the random string path component with this argument as the test's working directory\r\n- When the test starts, remove the working directory if it exists from an earlier run (currently, it's presumed not to exist due to the long random string)\r\n- Don't delete the working directory at the end of the test if a custom data directory is being used\r\n\r\nExample usage:\r\n```\r\ntest_bitcoin --run_test=getarg_tests/boolarg -- -testdatadir=mydatadir\r\n```\r\n\r\nNote that the data directory is constrained to always be within `/tmp/test_common_Bitcoin\\ Core/`. This change affects only `test_bitcoin`; it could also be applied to `test_bitcoin-qt` but that's slightly more involved so I'm skipping that for now.\r\n\r\nThe rationale for this change is that, when running the test using the debugger, it's often useful to watch `debug.log` as the test runs, and inspect some of the other files (I've looked at some of the generated `blknnnn.dat` files for example). Currently, that requires figuring out where the test's working directory is since it changes on every test run. Tests can be run with `-printtoconsole=1` to show debug logging to the terminal, but it's nice to have access to a fixed-named `debug.log` file using an editor, for example.\r\n\r\nEven if not using a debugger, it's sometimes helpful to see `debug.log` and other artifacts after the test completes.\r\n\r\nSimilar functionality is already possible with the functional tests using the `--tmpdir=` and `--nocleanup` arguments.\r\n\r\n(Note, this PR previously allowed the user to specify the data directory using an environment variable, but the command-line argument is more intuitive, thanks @furszy.)",
          "user": {
            "login": "LarryRuane",
            "id": 8321330,
            "node_id": "MDQ6VXNlcjgzMjEzMzA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/LarryRuane",
            "html_url": "https://github.com/LarryRuane",
            "followers_url": "https://api.github.com/users/LarryRuane/followers",
            "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
            "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
            "repos_url": "https://api.github.com/users/LarryRuane/repos",
            "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26564",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26564",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26564.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26564.patch"
          },
          "created_at": "2022-11-24T02:13:25Z",
          "updated_at": "2023-12-14T17:55:27Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-12T18:43:57Z",
      "updated_at": "2023-12-12T18:43:57Z",
      "source": {
        "issue": {
          "id": 1606662830,
          "node_id": "I_kwDOABII585fw7qu",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27188",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27188/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27188/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27188/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/27188",
          "number": 27188,
          "state": "closed",
          "state_reason": "completed",
          "title": "Use of a wallet shouldn't be blocked in prune mode (\"wallet loading failed... beyond pruned data\")",
          "body": "It is impossible to load and use a wallet neither in Bitcoin-qt GUI nor console/RPC commands. The wallet is only about 2 weeks old and typical settings are used (data pruned to 2 GB).\r\n\r\n**Expected behavior**\r\n\r\n- A wallet is loaded (either manually or automatically on startup) and addresses are shown in Bitcoin-qt, \r\n- successful execution of wallet RPC commands, e.g. getwalletinfo, dumpwallet, walletpassphrasechange etc. \r\n\r\n(not different from the way it had worked and looked the previous time a user started Bitcoin Core).\r\n\r\n**Actual behavior**\r\n\r\n![wallet loading failed  Prune](https://user-images.githubusercontent.com/111286121/222418406-67836dd2-f28b-4611-baeb-055ae21d9834.png)\r\n\r\n> Wallet loading failed. Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex (download the whole blockchain again in case of pruned node)\r\n\r\nAlso, RPC commands fail, for example: loadwallet, getwalletinfo, dumpwallet (except for listwallets).\r\n\r\n**To reproduce**\r\n\r\n1. Start Bitcoin-qt\r\n2. Select File->Open Wallet->[Wallet name]\r\n\r\nReproducible every time in prune mode. The wallet was created at the time for which data were pruned. The wallet was created in bitcoin-qt.\r\n\r\n**System information**\r\n\r\nOfficial binary Bitcoin Core 24.0.1, Windows 11.",
          "user": {
            "login": "GregTonoski",
            "id": 111286121,
            "node_id": "U_kgDOBqIXaQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/111286121?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GregTonoski",
            "html_url": "https://github.com/GregTonoski",
            "followers_url": "https://api.github.com/users/GregTonoski/followers",
            "following_url": "https://api.github.com/users/GregTonoski/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/GregTonoski/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/GregTonoski/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/GregTonoski/subscriptions",
            "organizations_url": "https://api.github.com/users/GregTonoski/orgs",
            "repos_url": "https://api.github.com/users/GregTonoski/repos",
            "events_url": "https://api.github.com/users/GregTonoski/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/GregTonoski/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64585,
              "node_id": "MDU6TGFiZWw2NDU4NQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
              "name": "Bug",
              "color": "FBBAAB",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 10,
          "closed_at": "2023-03-22T15:26:37Z",
          "created_at": "2023-03-02T11:54:22Z",
          "updated_at": "2023-12-14T16:42:59Z"
        },
        "type": "issue"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1409433959",
      "pull_request_review_id": 1755516656,
      "id": 1409433959,
      "node_id": "PRRC_kwDOABII585UAkFn",
      "diff_hunk": "@@ -0,0 +1,44 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+#include <addresstype.h>\n+#include <index/blockfilterindex.h>\n+#include <node/chainstate.h>\n+#include <node/context.h>\n+#include <test/util/index.h>\n+#include <test/util/mining.h>\n+#include <test/util/setup_common.h>\n+#include <util/strencodings.h>",
      "path": "src/bench/index_blockfilter.cpp",
      "position": 12,
      "original_position": 13,
      "commit_id": "b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "original_commit_id": "486c71bc707f5765fc6698a746cf221bab1ac357",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: Can you make this new file IWYU-correct?",
      "created_at": "2023-11-29T15:13:20Z",
      "updated_at": "2023-11-29T15:33:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#discussion_r1409433959",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1409433959"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 12,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1409450985",
      "pull_request_review_id": 1755516656,
      "id": 1409450985,
      "node_id": "PRRC_kwDOABII585UAoPp",
      "diff_hunk": "@@ -0,0 +1,44 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>",
      "path": "src/bench/index_blockfilter.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "original_commit_id": "486c71bc707f5765fc6698a746cf221bab1ac357",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: Put this include on its own line (like e.g. in `bip324_ecdh.cpp`), or fix the include order.",
      "created_at": "2023-11-29T15:24:14Z",
      "updated_at": "2023-11-29T15:33:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#discussion_r1409450985",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1409450985"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1409454594",
      "pull_request_review_id": 1755516656,
      "id": 1409454594,
      "node_id": "PRRC_kwDOABII585UApIC",
      "diff_hunk": "@@ -160,23 +160,21 @@ void BaseIndex::Sync()\n                 return;\n             }\n \n-            {\n-                LOCK(cs_main);\n-                const CBlockIndex* pindex_next = NextSyncBlock(pindex, m_chainstate->m_chain);\n-                if (!pindex_next) {\n-                    SetBestBlockIndex(pindex);\n-                    m_synced = true;\n-                    // No need to handle errors in Commit. See rationale above.\n-                    Commit();\n-                    break;\n-                }\n-                if (pindex_next->pprev != pindex && !Rewind(pindex, pindex_next->pprev)) {\n-                    FatalErrorf(\"%s: Failed to rewind index %s to a previous chain tip\",\n-                               __func__, GetName());\n-                    return;\n-                }\n-                pindex = pindex_next;\n+            const CBlockIndex* pindex_next = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n+            if (!pindex_next) {\n+                SetBestBlockIndex(pindex);\n+                m_synced = true;\n+                // No need to handle errors in Commit. See rationale above.\n+                Commit();\n+                break;\n             }\n+            if (pindex_next->pprev != pindex && !Rewind(pindex, pindex_next->pprev)) {\n+                FatalErrorf(\"%s: Failed to rewind index %s to a previous chain tip\",\n+                           __func__, GetName());",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "original_commit_id": "fe6a520aa81e6aadf662bb3208d7e339b151af41",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit: There is a whitespace issue at the start of this line.",
      "created_at": "2023-11-29T15:25:58Z",
      "updated_at": "2023-11-29T15:33:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#discussion_r1409454594",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1409454594"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1410072567",
      "pull_request_review_id": 1756514593,
      "id": 1410072567,
      "node_id": "PRRC_kwDOABII585UC__3",
      "diff_hunk": "@@ -0,0 +1,44 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>",
      "path": "src/bench/index_blockfilter.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "original_commit_id": "486c71bc707f5765fc6698a746cf221bab1ac357",
      "in_reply_to_id": 1409450985,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-11-30T02:06:36Z",
      "updated_at": "2023-11-30T02:06:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#discussion_r1410072567",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1410072567"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1410073612",
      "pull_request_review_id": 1756516032,
      "id": 1410073612,
      "node_id": "PRRC_kwDOABII585UDAQM",
      "diff_hunk": "@@ -160,23 +160,21 @@ void BaseIndex::Sync()\n                 return;\n             }\n \n-            {\n-                LOCK(cs_main);\n-                const CBlockIndex* pindex_next = NextSyncBlock(pindex, m_chainstate->m_chain);\n-                if (!pindex_next) {\n-                    SetBestBlockIndex(pindex);\n-                    m_synced = true;\n-                    // No need to handle errors in Commit. See rationale above.\n-                    Commit();\n-                    break;\n-                }\n-                if (pindex_next->pprev != pindex && !Rewind(pindex, pindex_next->pprev)) {\n-                    FatalErrorf(\"%s: Failed to rewind index %s to a previous chain tip\",\n-                               __func__, GetName());\n-                    return;\n-                }\n-                pindex = pindex_next;\n+            const CBlockIndex* pindex_next = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n+            if (!pindex_next) {\n+                SetBestBlockIndex(pindex);\n+                m_synced = true;\n+                // No need to handle errors in Commit. See rationale above.\n+                Commit();\n+                break;\n             }\n+            if (pindex_next->pprev != pindex && !Rewind(pindex, pindex_next->pprev)) {\n+                FatalErrorf(\"%s: Failed to rewind index %s to a previous chain tip\",\n+                           __func__, GetName());",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "b19585e00a52c0b571e70ddb8f7c996d598c3435",
      "original_commit_id": "fe6a520aa81e6aadf662bb3208d7e339b151af41",
      "in_reply_to_id": 1409454594,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed",
      "created_at": "2023-11-30T02:08:52Z",
      "updated_at": "2023-11-30T02:09:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28955#discussion_r1410073612",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1410073612"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28955"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 173,
      "side": "RIGHT"
    }
  ]
}