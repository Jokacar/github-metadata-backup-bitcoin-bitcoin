{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363",
    "id": 2196846832,
    "node_id": "PR_kwDOABII586C8Tjw",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31363",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31363.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31363.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/a93de3b63fbd20ef3a2c0a5019f41f0e5c6ad8da",
    "number": 31363,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "cluster mempool: introduce TxGraph",
    "user": {
      "login": "sipa",
      "id": 548488,
      "node_id": "MDQ6VXNlcjU0ODQ4OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sipa",
      "html_url": "https://github.com/sipa",
      "followers_url": "https://api.github.com/users/sipa/followers",
      "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
      "organizations_url": "https://api.github.com/users/sipa/orgs",
      "repos_url": "https://api.github.com/users/sipa/repos",
      "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sipa/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Part of cluster mempool: #30289.\r\n\r\n### 1. Overview\r\n\r\nThis introduces the `TxGraph` class, which encapsulates knowledge about the fees, sizes, and dependencies between all mempool transactions, but nothing else. In particular, it lacks knowledge about `CTransaction`, inputs, outputs, txids, wtxids, prioritization, validatity, policy rules, and a lot more. Being restricted to just those aspects of the mempool makes the behavior very easy to fully specify (ignoring the actual linearizations produced), and write simulation-based tests for (which are included in this PR).\r\n\r\n### 2. Interface\r\n\r\nThe interface can be largely categorized into:\r\n* Mutation functions:\r\n  * `AddTransaction` (add a new transaction with specified feerate, and get a `Ref` object back to identify it).\r\n  * `RemoveTransaction` (given a `Ref` object, remove the transaction).\r\n  * `AddDependency` (given two `Ref` objects, add a dependency between them).\r\n  * `SetTransactionFeerate` (modify the feerate associated with a Ref object).\r\n* Inspector functions:\r\n  * `GetAncestors` (get the ancestor set in the form of `Ref*` pointers)\r\n  * `GetDescendants` (get the descendant set in the form of `Ref*` pointers)\r\n  * `GetCluster` (get the connected component set in the form of `Ref*` pointers, in the order they would be mined).\r\n  * `GetIndividualFeerate` (get the feerate of a tranaction)\r\n  * `GetChunkFeerate` (get the mining score of a transaction)\r\n* Staging functions:\r\n  * `StartStaging` (make all future mutations operate on a proposed transaction graph)\r\n  * `CommitStaging` (apply all the changes that are staged)\r\n  * `AbortStaging` (discard all the changes that are staged)\r\n\r\n### 3. Implementation\r\n\r\nInternally the graph data is kept in clustered form (partitioned into connected components), for which linearizations are maintained and updated as needed using the `cluster_linearize.h` algorithms under the hood, but this is hidden from the users of this class. Implementation-wise, mutations are generally applied lazily, appending to queues of to-be-removed transactions and to-be-added dependencies, so they can be batched for higher performance. Inspectors will generally only evaluate as much as is needed to answer queries, with roughly 5 levels of processing to go to fully instantiated and acceptable cluster linearizations, in order:\r\n1. `ApplyRemovals` (take batches of to-be-removed transactions and translate them to \"holes\" in the corresponding Clusters/DepGraphs).\r\n2. `SplitAll` (creating holes in Clusters may cause them to break apart into smaller connected components, so make turn them into separate Clusters/linearizations).\r\n3. `GroupClusters` (figure out which Clusters will need to be combined in order to add requested to-be-added dependencies, as these may span clusters).\r\n4. `ApplyDependencies` (actually merge Clusters as precomputed by `GroupClusters`, and add the dependencies between them).\r\n5. `MakeAcceptable` (perform the LIMO linearization algorithm on Clusters to make sure their linearizations are acceptable).\r\n\r\n### 4. Future work\r\n\r\nThis is only an initial version of TxGraph, and some functionality is missing before #28676 can be rebased on top of it:\n* The ability to get comparative feerate diagrams before/after for the set of staged changes (to evaluate RBF incentive-compatibility).\r\n* Mining interface (ability to iterate transactions quickly in mining score order).\r\n* Eviction interface (reverse of mining order, plus memory usage accounting).\r\n* Ability to inspect the would-be-constructed clusters (so they can be \"fixed\" if they violate policy rules, as opposed to just accepted/rejected, before applying - this is needed for reorgs which are not optional).\r\n* Interface for controlling how much effort is spent on LIMO. In this PR it is hardcoded.\r\n\r\nThen there are further improvements possible which would not block other work:\r\n* Making Cluster a virtual class with different implementations based on transaction count (which could dramatically reduce memory usage, as most Clusters are just a single transaction, for which the current implementation is overkill).\r\n* The ability to have background thread(s) for improving cluster linearizations.",
    "labels": [],
    "created_at": "2024-11-24T15:59:18Z",
    "updated_at": "2024-11-26T15:09:11Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "d55de3573f3614b2dcd2f6715b4696cc61cd6388",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "sipa:202411_txgraph",
      "ref": "202411_txgraph",
      "sha": "a93de3b63fbd20ef3a2c0a5019f41f0e5c6ad8da",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1458655,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDU4NjU1",
        "name": "bitcoin",
        "full_name": "sipa/bitcoin",
        "owner": {
          "login": "sipa",
          "id": 548488,
          "node_id": "MDQ6VXNlcjU0ODQ4OA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sipa",
          "html_url": "https://github.com/sipa",
          "followers_url": "https://api.github.com/users/sipa/followers",
          "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
          "organizations_url": "https://api.github.com/users/sipa/orgs",
          "repos_url": "https://api.github.com/users/sipa/repos",
          "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sipa/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/sipa/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sipa/bitcoin",
        "archive_url": "https://api.github.com/repos/sipa/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sipa/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sipa/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sipa/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sipa/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sipa/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sipa/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sipa/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sipa/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sipa/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sipa/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sipa/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sipa/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sipa/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sipa/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sipa/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sipa/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sipa/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sipa/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sipa/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sipa/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sipa/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sipa/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sipa/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sipa/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sipa/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sipa/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sipa/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sipa/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sipa/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sipa/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sipa/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sipa/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sipa/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sipa/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sipa/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sipa/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sipa/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sipa/bitcoin/hooks",
        "svn_url": "https://github.com/sipa/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "TypeScript",
        "forks_count": 21,
        "stargazers_count": 90,
        "watchers_count": 90,
        "size": 252304,
        "default_branch": "lows",
        "open_issues_count": 16,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-11-26T02:50:54Z",
        "created_at": "2011-03-09T10:46:59Z",
        "updated_at": "2024-11-25T23:11:09Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "f7144b24be09e7db2173a0b15d73f99a08b98118",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36470,
        "stargazers_count": 79833,
        "watchers_count": 79833,
        "size": 272711,
        "default_branch": "master",
        "open_issues_count": 664,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-11-25T18:48:53Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-11-26T15:01:02Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31363"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 2436,
    "deletions": 14,
    "changed_files": 8,
    "commits": 13,
    "review_comments": 0,
    "comments": 2
  },
  "events": [
    {
      "event": "commented",
      "id": 2496083772,
      "node_id": "IC_kwDOABII586Uxzc8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2496083772",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-24T15:59:21Z",
      "updated_at": "2024-11-25T00:29:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31363.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28676](https://github.com/bitcoin/bitcoin/pull/28676) ([WIP] Cluster mempool implementation by sdaftuar)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2496083772",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15410951192,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOWkHQY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15410951192",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "eff65737e508a6b6a1254858bbbe1792f3c36da6",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/eff65737e508a6b6a1254858bbbe1792f3c36da6",
      "created_at": "2024-11-24T16:20:24Z"
    },
    {
      "event": "commented",
      "id": 2496093320,
      "node_id": "IC_kwDOABII586Ux1yI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2496093320",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-24T16:20:29Z",
      "updated_at": "2024-11-24T16:20:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/33443336095</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31363#issuecomment-2496093320",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31363"
    },
    {
      "event": "labeled",
      "id": 15410951366,
      "node_id": "LE_lADOABII586gNt5RzwAAAAOWkHTG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15410951366",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-24T16:20:29Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15411081261,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOWknAt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15411081261",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1e432cae6b5005db209c10c28e9aa47cc3ac68df",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/1e432cae6b5005db209c10c28e9aa47cc3ac68df",
      "created_at": "2024-11-24T17:24:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15411231038,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOWlLk-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15411231038",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "36a9db46b664e2637a8add9201d2b5a91d7c24f1",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/36a9db46b664e2637a8add9201d2b5a91d7c24f1",
      "created_at": "2024-11-24T18:46:41Z"
    },
    {
      "event": "unlabeled",
      "id": 15411323294,
      "node_id": "UNLE_lADOABII586gNt5RzwAAAAOWliGe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15411323294",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-24T19:39:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15421286163,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOXLicT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15421286163",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "aa430ddacab7e119f36bc73dd46dd19ee4ac9180",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/aa430ddacab7e119f36bc73dd46dd19ee4ac9180",
      "created_at": "2024-11-25T14:04:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15421321817,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOXLrJZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15421321817",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "84fcb24ee16802e3538a0e7ee40d66b78bfad2e2",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/84fcb24ee16802e3538a0e7ee40d66b78bfad2e2",
      "created_at": "2024-11-25T14:07:29Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJhNTdmYmNhNGJkYWIxMjAwOGUzYmUxZjZiNWI5NWZjNTA2ZmUxNGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2a57fbca4bdab12008e3be1f6b5b95fc506fe14e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2a57fbca4bdab12008e3be1f6b5b95fc506fe14e",
      "tree": {
        "sha": "e745d88cb1c89ea6e9b84270ef9c449297eb1b5f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e745d88cb1c89ea6e9b84270ef9c449297eb1b5f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f7144b24be09e7db2173a0b15d73f99a08b98118",
          "sha": "f7144b24be09e7db2173a0b15d73f99a08b98118",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f7144b24be09e7db2173a0b15d73f99a08b98118"
        }
      ],
      "message": "clusterlin: add FixLinearization function + fuzz test\n\nThis function takes an existing ordering for transactions in a DepGraph, and\nmakes it a valid linearization for it (i.e., topological). Any topological\nprefix of the input remains untouched.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-10-25T18:11:50Z"
      },
      "sha": "2a57fbca4bdab12008e3be1f6b5b95fc506fe14e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg1MzRhZmEyZDQ2ZjQzZjc0YmRlZTFlNmM0NDFjZjU4MjMxNWFlNWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8534afa2d46f43f74bdee1e6c441cf582315ae5c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8534afa2d46f43f74bdee1e6c441cf582315ae5c",
      "tree": {
        "sha": "1f955b34784fa43da54d877cddfd01fd5b899d3d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1f955b34784fa43da54d877cddfd01fd5b899d3d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2a57fbca4bdab12008e3be1f6b5b95fc506fe14e",
          "sha": "2a57fbca4bdab12008e3be1f6b5b95fc506fe14e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2a57fbca4bdab12008e3be1f6b5b95fc506fe14e"
        }
      ],
      "message": "clusterlin: make IsAcyclic() a DepGraph member function\n\n... instead of being a separate test-only function.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-12T20:13:58Z"
      },
      "sha": "8534afa2d46f43f74bdee1e6c441cf582315ae5c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU4YjYxZGM3YmMzZDM1ZTMzZTMzMWU5ZTkzMzc5ZjY0ODQ5OTY4N2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58b61dc7bc3d35e33e331e9e93379f648499687b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/58b61dc7bc3d35e33e331e9e93379f648499687b",
      "tree": {
        "sha": "5b2d83fcf0dd2e3875397cd0aae4a7d360a7b388",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5b2d83fcf0dd2e3875397cd0aae4a7d360a7b388"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8534afa2d46f43f74bdee1e6c441cf582315ae5c",
          "sha": "8534afa2d46f43f74bdee1e6c441cf582315ae5c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8534afa2d46f43f74bdee1e6c441cf582315ae5c"
        }
      ],
      "message": "txgraph: (feature) add initial version\n\nThis adds an initial version of the txgraph module, with the TxGraph class.\nIt encapsulates knowledge about the fees, sizes, and dependencies between all\nmempool transactions, but nothing else.\n\nIn particular, it lacks knowledge about txids, inputs, outputs, CTransactions,\n... and so for. Instead, it exposes a generic TxGraph::Ref type to reference\nnodes in the TxGraph, which can be passed around and stored by layers on top.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-08-21T18:37:00Z"
      },
      "sha": "58b61dc7bc3d35e33e331e9e93379f648499687b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZlM2IwMTA2NzAwMzE2Yjc3NTg3N2MzOTYyZTcwMmY5MGE1MDg3MzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fe3b0106700316b775877c3962e702f90a508732",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fe3b0106700316b775877c3962e702f90a508732",
      "tree": {
        "sha": "c4f76011b68f37a9ecaf0f438ae1ab5758a825af",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c4f76011b68f37a9ecaf0f438ae1ab5758a825af"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/58b61dc7bc3d35e33e331e9e93379f648499687b",
          "sha": "58b61dc7bc3d35e33e331e9e93379f648499687b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/58b61dc7bc3d35e33e331e9e93379f648499687b"
        }
      ],
      "message": "txgraph: (tests) add simulation fuzz test\n\nThis adds a simulation fuzz test for txgraph, by comparing with a naive\nreimplementation that models the entire graph as a single DepGraph, and\nclusters in TxGraph as connected components within that DepGraph.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-15T19:15:12Z"
      },
      "sha": "fe3b0106700316b775877c3962e702f90a508732"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYzMTBiMjdkOTFiNjRmNWNiMTMxMGJjNzVlODRmZjY3YjJhZGUzN2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f310b27d91b64f5cb1310bc75e84ff67b2ade37a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f310b27d91b64f5cb1310bc75e84ff67b2ade37a",
      "tree": {
        "sha": "6e05ae59014dd347503698d7a861e2480fd7e86a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6e05ae59014dd347503698d7a861e2480fd7e86a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fe3b0106700316b775877c3962e702f90a508732",
          "sha": "fe3b0106700316b775877c3962e702f90a508732",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fe3b0106700316b775877c3962e702f90a508732"
        }
      ],
      "message": "txgraph: (tests) add internal sanity check function\n\nTo make testing more powerful, expose a function to perform an internal sanity\ncheck on the state of a TxGraph. This is especially important as TxGraphImpl\ncontains many redundantly represented pieces of information:\n\n* graph contains clusters, which refer to entries, but the entries refer back\n* graph maintains pointers to Ref objects, which point back to the graph.\n\nThis lets us make sure they are always in sync.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-15T03:45:46Z"
      },
      "sha": "f310b27d91b64f5cb1310bc75e84ff67b2ade37a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhhNzg5NjRiYjJkMjU1NzE4ODlmYTVhMDE0M2JmOWQ1NGRhYTYxNmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8a78964bb2d25571889fa5a0143bf9d54daa616f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8a78964bb2d25571889fa5a0143bf9d54daa616f",
      "tree": {
        "sha": "d333a6915124a2890b66f5d871c04be0883367ef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d333a6915124a2890b66f5d871c04be0883367ef"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f310b27d91b64f5cb1310bc75e84ff67b2ade37a",
          "sha": "f310b27d91b64f5cb1310bc75e84ff67b2ade37a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f310b27d91b64f5cb1310bc75e84ff67b2ade37a"
        }
      ],
      "message": "txgraph: (feature) make max cluster count configurable and \"oversize\" state\n\nInstead of leaving the responsibility on higher layers to guarantee that\nno connected component within TxGraph (a barely exposed concept, except through\nGetCluster()) exceeds the cluster count limit, move this responsibility to\nTxGraph itself:\n* TxGraph retains a cluster count limit, but it becomes configurable at construction\n  time (this primarily helps with testing that it is properly enforced).\n* It is always allowed to perform mutators on TxGraph, even if they would cause the\n  cluster count limit to be exceeded. Instead, TxGraph exposes an IsOversized()\n  function, which queries whether it is in a special \"oversize\" state.\n* During oversize state, many inspectors are unavailable, but mutators remain valid,\n  so the higher layer can \"fix\" the oversize state before continuing.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-24T13:53:50Z"
      },
      "sha": "8a78964bb2d25571889fa5a0143bf9d54daa616f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVlYzdkYzE4ZTFiY2Y2Y2UxOWJhNjIzNjMwOTExOGRjZDA5MzZjMGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eec7dc18e1bcf6ce19ba6236309118dcd0936c0d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/eec7dc18e1bcf6ce19ba6236309118dcd0936c0d",
      "tree": {
        "sha": "3bde204dea9ef34e374c86354633aab3e2d4845d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3bde204dea9ef34e374c86354633aab3e2d4845d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8a78964bb2d25571889fa5a0143bf9d54daa616f",
          "sha": "8a78964bb2d25571889fa5a0143bf9d54daa616f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8a78964bb2d25571889fa5a0143bf9d54daa616f"
        }
      ],
      "message": "txgraph: (optimization) delay chunking while sub-acceptable\n\nChunk-based information (primarily, chunk feerates) are never accessed without\nfirst bringing the relevant Clusters to an \"acceptable\" quality level. Thus,\nwhile operations are ongoing and Clusters are not acceptable, we can omit\ncomputing the chunkings and chunk feerates for Clusters.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-15T18:31:23Z"
      },
      "sha": "eec7dc18e1bcf6ce19ba6236309118dcd0936c0d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ4N2JjNjBkYTFkZjZjNzIyZmM3MTI4MzA5NDk3OWE5NWQ4MzFhYWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d87bc60da1df6c722fc71283094979a95d831aaa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d87bc60da1df6c722fc71283094979a95d831aaa",
      "tree": {
        "sha": "7791c67589bed2efef16bdc43dcde1f7f5f3c87f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7791c67589bed2efef16bdc43dcde1f7f5f3c87f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eec7dc18e1bcf6ce19ba6236309118dcd0936c0d",
          "sha": "eec7dc18e1bcf6ce19ba6236309118dcd0936c0d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/eec7dc18e1bcf6ce19ba6236309118dcd0936c0d"
        }
      ],
      "message": "txgraph: (optimization) special-case removal of tail of cluster\n\nWhen transactions are removed from the tail of a cluster, we know the existing\nlinearization remains acceptable/optimal (if it already was), but may just need\nsplitting, so special case these into separate quality levels.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-14T23:10:24Z"
      },
      "sha": "d87bc60da1df6c722fc71283094979a95d831aaa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE3MWVlZGVlMTVjNWZiODA0YmI5NDhiNzgzMjhlNzhhNzQyNWEyNTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/171eedee15c5fb804bb948b78328e78a7425a259",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/171eedee15c5fb804bb948b78328e78a7425a259",
      "tree": {
        "sha": "96a6ae15eb40121212e2c431a0c9ae2afe203f85",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/96a6ae15eb40121212e2c431a0c9ae2afe203f85"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d87bc60da1df6c722fc71283094979a95d831aaa",
          "sha": "d87bc60da1df6c722fc71283094979a95d831aaa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d87bc60da1df6c722fc71283094979a95d831aaa"
        }
      ],
      "message": "txgraph: (refactor) group per-graph data in ClusterSet\n\nThis is a preparation for a next commit where a TxGraph will start representing\npotentially two distinct graphs (a main one, and a staging one with proposed\nchanges).",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-24T13:37:53Z"
      },
      "sha": "171eedee15c5fb804bb948b78328e78a7425a259"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQyOTg2MWRkNzZhNTI5ODE5M2YxMmM5ZjkzZmZlYjllZWU1ZGE5ZGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/429861dd76a5298193f12c9f93ffeb9eee5da9de",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/429861dd76a5298193f12c9f93ffeb9eee5da9de",
      "tree": {
        "sha": "96f00130eec56e5cbf422a0a6462d936084a4974",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/96f00130eec56e5cbf422a0a6462d936084a4974"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/171eedee15c5fb804bb948b78328e78a7425a259",
          "sha": "171eedee15c5fb804bb948b78328e78a7425a259",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/171eedee15c5fb804bb948b78328e78a7425a259"
        }
      ],
      "message": "txgraph: (refactor) abstract out ClearLocator\n\nMove a number of related modifications to TxGraphImpl into a separate\nfunction for removal of transactions. This is preparation for a later\ncommit where this will be useful in more than one place.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-24T15:00:59Z"
      },
      "sha": "429861dd76a5298193f12c9f93ffeb9eee5da9de"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE4ZDM5OTRiYzc0YjlmZThmODhmNmEwNGE5MDM5ZGQ3MTdkMDFiMTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a8d3994bc74b9fe8f88f6a04a9039dd717d01b15",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a8d3994bc74b9fe8f88f6a04a9039dd717d01b15",
      "tree": {
        "sha": "8a3e84c0f2d6352b623f288a24ea439071a5d0a9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8a3e84c0f2d6352b623f288a24ea439071a5d0a9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/429861dd76a5298193f12c9f93ffeb9eee5da9de",
          "sha": "429861dd76a5298193f12c9f93ffeb9eee5da9de",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/429861dd76a5298193f12c9f93ffeb9eee5da9de"
        }
      ],
      "message": "txgraph: (feature) add staging support\n\nIn order to make it easy to evaluate proposed changes to a TxGraph, introduce a\n\"staging\" mode, where mutators (AddTransaction, AddDependency, RemoveTransaction)\ndo not modify the actual graph, but just a staging version of it. That staging\ngraph can then be commited (replacing the main one with it), or aborted (discarding\nthe staging).",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:06:16Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-24T15:01:01Z"
      },
      "sha": "a8d3994bc74b9fe8f88f6a04a9039dd717d01b15"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDlmOWYzY2VkYjZiMjY3MDA1ODdhYzY1Njc5YzM4ZTU1ZjhiMTM0YWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9f9f3cedb6b26700587ac65679c38e55f8b134ae",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9f9f3cedb6b26700587ac65679c38e55f8b134ae",
      "tree": {
        "sha": "6f3115d49f20ed5ba63567c6b6ec58d9a3072e2a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6f3115d49f20ed5ba63567c6b6ec58d9a3072e2a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a8d3994bc74b9fe8f88f6a04a9039dd717d01b15",
          "sha": "a8d3994bc74b9fe8f88f6a04a9039dd717d01b15",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a8d3994bc74b9fe8f88f6a04a9039dd717d01b15"
        }
      ],
      "message": "txgraph: (feature) destroying Ref means removing transaction\n\nBefore this commit, if a TxGraph::Ref object is destroyed, it becomes impossible\nto refer to, but the actual corresponding transaction node in the TxGraph remains,\nand remains indefinitely as there is no way to remove it.\n\nFix this by making the destruction of TxGraph::Ref trigger immediate removal of\nthe corresponding transaction in TxGraph, both in main and staging if it exists.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:24:39Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-23T04:37:50Z"
      },
      "sha": "9f9f3cedb6b26700587ac65679c38e55f8b134ae"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE5M2RlM2I2M2ZiZDIwZWYzYTJjMGE1MDE5ZjQxZjBlNWM2YWQ4ZGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a93de3b63fbd20ef3a2c0a5019f41f0e5c6ad8da",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a93de3b63fbd20ef3a2c0a5019f41f0e5c6ad8da",
      "tree": {
        "sha": "98df7e48df71b70b74b55ede2f6c9af8fd30e133",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/98df7e48df71b70b74b55ede2f6c9af8fd30e133"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9f9f3cedb6b26700587ac65679c38e55f8b134ae",
          "sha": "9f9f3cedb6b26700587ac65679c38e55f8b134ae",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9f9f3cedb6b26700587ac65679c38e55f8b134ae"
        }
      ],
      "message": "txgraph: (feature) expose ability to compare transactions\n\nIn order to make it possible for higher layers to compare transaction quality\n(ordering within the implicit total ordering on the mempool), expose a comparison\nfunction and test it.",
      "committer": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-25T22:25:15Z"
      },
      "author": {
        "name": "Pieter Wuille",
        "email": "pieter@wuille.net",
        "date": "2024-11-14T21:16:59Z"
      },
      "sha": "a93de3b63fbd20ef3a2c0a5019f41f0e5c6ad8da"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15427571318,
      "node_id": "HRFPE_lADOABII586gNt5RzwAAAAOXjg52",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15427571318",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a93de3b63fbd20ef3a2c0a5019f41f0e5c6ad8da",
      "commit_url": "https://api.github.com/repos/sipa/bitcoin/commits/a93de3b63fbd20ef3a2c0a5019f41f0e5c6ad8da",
      "created_at": "2024-11-25T22:35:30Z"
    }
  ],
  "comments": []
}