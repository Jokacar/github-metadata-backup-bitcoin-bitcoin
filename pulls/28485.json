{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485",
    "id": 1516340844,
    "node_id": "PR_kwDOABII585aYYZs",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28485",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28485.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28485.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28485",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28485/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/fb288f331277536c8b528c0eae44d81617fcbee6",
    "number": 28485,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "test: Extends MEMPOOL msg functional test",
    "user": {
      "login": "sr-gi",
      "id": 6665628,
      "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sr-gi",
      "html_url": "https://github.com/sr-gi",
      "followers_url": "https://api.github.com/users/sr-gi/followers",
      "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
      "organizations_url": "https://api.github.com/users/sr-gi/orgs",
      "repos_url": "https://api.github.com/users/sr-gi/repos",
      "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sr-gi/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Currently, p2p_filter.py::test_msg_mempool is not testing much. This extends the tests so the interaction between sending `MEMPOOL` messages with a filter that does not include all transactions in the mempool reacts, plus how it interacts with `INV` messages, especially after the changes introduced by #27675 \r\n\r\n\r\n",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2023-09-14T20:47:30Z",
    "updated_at": "2023-12-05T14:44:32Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "ebb10b1f29a9e46f14e91db24cbbe3c175fb1ac2",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "sr-gi:2023-09-mempool-msg-test",
      "ref": "2023-09-mempool-msg-test",
      "sha": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "user": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 217783888,
        "node_id": "MDEwOlJlcG9zaXRvcnkyMTc3ODM4ODg=",
        "name": "bitcoin",
        "full_name": "sr-gi/bitcoin",
        "owner": {
          "login": "sr-gi",
          "id": 6665628,
          "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
          "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sr-gi",
          "html_url": "https://github.com/sr-gi",
          "followers_url": "https://api.github.com/users/sr-gi/followers",
          "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
          "organizations_url": "https://api.github.com/users/sr-gi/orgs",
          "repos_url": "https://api.github.com/users/sr-gi/repos",
          "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sr-gi/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/sr-gi/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sr-gi/bitcoin",
        "archive_url": "https://api.github.com/repos/sr-gi/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sr-gi/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sr-gi/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sr-gi/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sr-gi/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sr-gi/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sr-gi/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sr-gi/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sr-gi/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sr-gi/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sr-gi/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sr-gi/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sr-gi/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sr-gi/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sr-gi/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sr-gi/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sr-gi/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sr-gi/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sr-gi/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sr-gi/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sr-gi/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sr-gi/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sr-gi/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sr-gi/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sr-gi/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sr-gi/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sr-gi/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sr-gi/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sr-gi/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sr-gi/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sr-gi/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sr-gi/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sr-gi/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sr-gi/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sr-gi/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sr-gi/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sr-gi/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sr-gi/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sr-gi/bitcoin/hooks",
        "svn_url": "https://github.com/sr-gi/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 227859,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-11-15T18:03:33Z",
        "created_at": "2019-10-27T00:01:30Z",
        "updated_at": "2022-12-03T16:59:20Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "744157ef1a0b61ceb714cc27c9ae158907aecdc9",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36083,
        "stargazers_count": 72469,
        "watchers_count": 72469,
        "size": 246263,
        "default_branch": "master",
        "open_issues_count": 650,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-12-05T14:41:08Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-12-05T14:48:47Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 15,
    "deletions": 6,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 16,
    "comments": 2
  },
  "events": [
    {
      "event": "commented",
      "id": 1720131657,
      "node_id": "IC_kwDOABII585mhyBJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1720131657",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T20:47:33Z",
      "updated_at": "2023-12-05T14:44:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28485).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [glozow](https://github.com/bitcoin/bitcoin/pull/28485#pullrequestreview-1676529186), [theStack](https://github.com/bitcoin/bitcoin/pull/28485#pullrequestreview-1765277701) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#issuecomment-1720131657",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28485"
    },
    {
      "event": "labeled",
      "id": 10376776238,
      "node_id": "LE_lADOABII585xFku7zwAAAAJqgQou",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10376776238",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T20:47:34Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10376928446,
      "node_id": "HRFPE_lADOABII585xFku7zwAAAAJqg1y-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10376928446",
      "actor": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T21:09:16Z"
    },
    {
      "event": "labeled",
      "id": 10376928893,
      "node_id": "LE_lADOABII585xFku7zwAAAAJqg159",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10376928893",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T21:09:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10378466376,
      "node_id": "UNLE_lADOABII585xFku7zwAAAAJqmtRI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10378466376",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T02:50:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1628630549,
      "node_id": "PRR_kwDOABII585hEu4V",
      "url": null,
      "actor": null,
      "commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#pullrequestreview-1628630549",
      "submitted_at": "2023-09-15T10:06:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10413650547,
      "node_id": "HRFPE_lADOABII585xFku7zwAAAAJss7Jz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10413650547",
      "actor": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-19T17:41:45Z"
    },
    {
      "event": "review_requested",
      "id": 10554058905,
      "node_id": "RRE_lADOABII585xFku7zwAAAAJ1EiiZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10554058905",
      "actor": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-04T17:42:58Z",
      "requested_reviewer": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 10554059120,
      "node_id": "RRE_lADOABII585xFku7zwAAAAJ1Eilw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10554059120",
      "actor": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-04T17:43:00Z",
      "requested_reviewer": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1659651583,
      "node_id": "PRR_kwDOABII585i7EX_",
      "url": null,
      "actor": null,
      "commit_id": "c9e31a40d23109bc5063ceda0f9a2abe55a9f305",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#pullrequestreview-1659651583",
      "submitted_at": "2023-10-05T11:58:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10581078125,
      "node_id": "HRFPE_lADOABII585xFku7zwAAAAJ2rnBt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10581078125",
      "actor": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-07T03:46:46Z"
    },
    {
      "event": "labeled",
      "id": 10581208818,
      "node_id": "LE_lADOABII585xFku7zwAAAAJ2sG7y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10581208818",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-07T05:16:38Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1670485583,
      "node_id": "PRR_kwDOABII585jkZZP",
      "url": null,
      "actor": null,
      "commit_id": "d10acba3d730397484f10ccb2f1116544161507d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK d10acba3d730397484f10ccb2f1116544161507d, with some nits",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#pullrequestreview-1670485583",
      "submitted_at": "2023-10-11T08:59:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZiMjg4ZjMzMTI3NzUzNmM4YjUyOGMwZWFlNDRkODE2MTdmY2JlZTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fb288f331277536c8b528c0eae44d81617fcbee6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fb288f331277536c8b528c0eae44d81617fcbee6",
      "tree": {
        "sha": "c3284a82a05c22e329cae8dcdc2b09e97ef8d9f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c3284a82a05c22e329cae8dcdc2b09e97ef8d9f2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5c5ddafbcaad7225312cb032b108a3527f0ac0f",
          "sha": "f5c5ddafbcaad7225312cb032b108a3527f0ac0f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f5c5ddafbcaad7225312cb032b108a3527f0ac0f"
        }
      ],
      "message": "test: Extends MEMPOOL msg functional test\n\nCurrently, p2p_filter.py::test_msg_mempool is not testing much.\nThis extends the tests so the interaction between sending MEMPOOL messages with\na filter that does not include all transactions in the mempool reacts, plus how\nit interacts with INV messages",
      "committer": {
        "name": "Sergi Delgado Segura",
        "email": "sergi.delgado.s@gmail.com",
        "date": "2023-10-11T16:04:05Z"
      },
      "author": {
        "name": "Sergi Delgado Segura",
        "email": "sergi.delgado.s@gmail.com",
        "date": "2023-09-14T20:05:51Z"
      },
      "sha": "fb288f331277536c8b528c0eae44d81617fcbee6"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10620866098,
      "node_id": "HRFPE_lADOABII585xFku7zwAAAAJ5DY4y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10620866098",
      "actor": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-11T16:04:15Z"
    },
    {
      "event": "commented",
      "id": 1758026304,
      "node_id": "IC_kwDOABII585oyVpA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1758026304",
      "actor": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-11T16:04:45Z",
      "updated_at": "2023-10-11T16:04:45Z",
      "author_association": "MEMBER",
      "body": "Addressed nits ",
      "user": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#issuecomment-1758026304",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28485"
    },
    {
      "event": "unlabeled",
      "id": 10622610646,
      "node_id": "UNLE_lADOABII585xFku7zwAAAAJ5KCzW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10622610646",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-11T18:39:51Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1676529186,
      "node_id": "PRR_kwDOABII585j7c4i",
      "url": null,
      "actor": null,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "reACK fb288f331277536c8b528c0eae44d81617fcbee6, only diff is the 2 nits on logging",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#pullrequestreview-1676529186",
      "submitted_at": "2023-10-13T13:38:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
    },
    {
      "event": "reviewed",
      "id": 1765277701,
      "node_id": "PRR_kwDOABII585pOAAF",
      "url": null,
      "actor": null,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK fb288f331277536c8b528c0eae44d81617fcbee6",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#pullrequestreview-1765277701",
      "submitted_at": "2023-12-05T14:44:29Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327085783",
      "pull_request_review_id": 1628630549,
      "id": 1327085783,
      "node_id": "PRRC_kwDOABII585PGbjX",
      "diff_hunk": "@@ -135,14 +136,29 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We won't be able to request this one given and INV was not sent since it entered the mempool\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 39,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I wonder why, given that this test uses immediate tx-relay. Shouldn't this check fail?",
      "created_at": "2023-09-15T10:06:17Z",
      "updated_at": "2023-09-15T10:06:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1327085783",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327085783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327101950",
      "pull_request_review_id": 1628655240,
      "id": 1327101950,
      "node_id": "PRRC_kwDOABII585PGff-",
      "diff_hunk": "@@ -135,14 +136,29 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We won't be able to request this one given and INV was not sent since it entered the mempool\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 39,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "in_reply_to_id": 1327085783,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe there hasn't been a `SendMessages` yet?",
      "created_at": "2023-09-15T10:22:28Z",
      "updated_at": "2023-09-15T10:22:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1327101950",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327101950"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327105421",
      "pull_request_review_id": 1628660501,
      "id": 1327105421,
      "node_id": "PRRC_kwDOABII585PGgWN",
      "diff_hunk": "@@ -135,14 +136,29 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We won't be able to request this one given and INV was not sent since it entered the mempool\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 39,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "in_reply_to_id": 1327085783,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "IIRC `send_and_ping` should force a `SendMessages` now (on current master)",
      "created_at": "2023-09-15T10:26:06Z",
      "updated_at": "2023-09-15T10:26:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1327105421",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327105421"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327337796",
      "pull_request_review_id": 1629032789,
      "id": 1327337796,
      "node_id": "PRRC_kwDOABII585PHZFE",
      "diff_hunk": "@@ -135,14 +136,29 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We won't be able to request this one given and INV was not sent since it entered the mempool\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 39,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "in_reply_to_id": 1327085783,
      "user": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I may be missing the point here, but why should it fail? Even if `send_and_ping` forces `SendMessages`, aren't invs still delayed?\r\n\r\nIf the following is added at the end of the test, you can see how the transaction is served:\r\n\r\n```\r\nfilter_peer.send_and_ping(msg_inv([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\r\nfilter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\r\nassert filter_peer.tx_received\r\n```",
      "created_at": "2023-09-15T14:06:07Z",
      "updated_at": "2023-09-15T14:06:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1327337796",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327337796"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327362253",
      "pull_request_review_id": 1629071792,
      "id": 1327362253,
      "node_id": "PRRC_kwDOABII585PHfDN",
      "diff_hunk": "@@ -135,14 +136,29 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We won't be able to request this one given and INV was not sent since it entered the mempool\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 39,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "in_reply_to_id": 1327085783,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "You can add a `import time;time.sleep(.1)` after the `wallet.send_to` to observe that the test fails.",
      "created_at": "2023-09-15T14:23:49Z",
      "updated_at": "2023-09-15T14:23:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1327362253",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327362253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327397596",
      "pull_request_review_id": 1629127547,
      "id": 1327397596,
      "node_id": "PRRC_kwDOABII585PHnrc",
      "diff_hunk": "@@ -135,14 +136,29 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We won't be able to request this one given and INV was not sent since it entered the mempool\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 39,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "in_reply_to_id": 1327085783,
      "user": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should we be using `send_message` instead so `SendMessages` is not forced, or just get rid of this third tx request?\r\n\r\nFWIW, adding a sleep after `send_message` will make it fail too",
      "created_at": "2023-09-15T14:48:47Z",
      "updated_at": "2023-09-15T14:56:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1327397596",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327397596"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327443910",
      "pull_request_review_id": 1629198840,
      "id": 1327443910,
      "node_id": "PRRC_kwDOABII585PHy_G",
      "diff_hunk": "@@ -135,14 +136,29 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We won't be able to request this one given and INV was not sent since it entered the mempool\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 39,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "in_reply_to_id": 1327085783,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Tests must pass in all environments. If you rely on a race condition for the test to pass, it will fail eventually.",
      "created_at": "2023-09-15T15:17:31Z",
      "updated_at": "2023-09-15T15:17:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1327443910",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1327443910"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1329013797",
      "pull_request_review_id": 1631539174,
      "id": 1329013797,
      "node_id": "PRRC_kwDOABII585PNyQl",
      "diff_hunk": "@@ -135,14 +136,29 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We won't be able to request this one given and INV was not sent since it entered the mempool\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 39,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "in_reply_to_id": 1327085783,
      "user": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sure, my point was whether the last check was even worth it. I finally figured out what was going on (h/t to @glozow for being my rubber duckie):\r\n\r\nIt turns out `m_last_inv_sequence` is not updated every single time an `INV` is sent, but every single time an `INV` may be sent. As long as the node trickles for that peer, `m_last_inv_sequence` is increased, hence why the transaction was requestable even though no `INV` was being sent.\r\n\r\nTherefore, by using `sync_and_ping`, which forces `SendMessages`, we can assert that the transaction is requestable. ",
      "created_at": "2023-09-18T16:45:32Z",
      "updated_at": "2023-09-19T17:47:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1329013797",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1329013797"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330496696",
      "pull_request_review_id": 1633872326,
      "id": 1330496696,
      "node_id": "PRRC_kwDOABII585PTcS4",
      "diff_hunk": "@@ -135,14 +136,29 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We won't be able to request this one given and INV was not sent since it entered the mempool\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 39,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "eb4b020e3d2df5d8babd087b1085ffc99425460d",
      "in_reply_to_id": 1327085783,
      "user": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "[c9e31a4](https://github.com/bitcoin/bitcoin/pull/28485/commits/c9e31a40d23109bc5063ceda0f9a2abe55a9f305) should have fixed this",
      "created_at": "2023-09-19T17:42:10Z",
      "updated_at": "2023-09-19T17:42:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1330496696",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1330496696"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 160,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347297098",
      "pull_request_review_id": 1659651583,
      "id": 1347297098,
      "node_id": "PRRC_kwDOABII585QTh9K",
      "diff_hunk": "@@ -135,14 +136,32 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 32,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "c9e31a40d23109bc5063ceda0f9a2abe55a9f305",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        self.log.info(\"We should get it anyway because it was in the mempool when the MEMPOOL message was sent\")\r\n```",
      "created_at": "2023-10-05T11:49:26Z",
      "updated_at": "2023-10-05T11:58:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1347297098",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347297098"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 153,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347303470",
      "pull_request_review_id": 1659651583,
      "id": 1347303470,
      "node_id": "PRRC_kwDOABII585QTjgu",
      "diff_hunk": "@@ -135,14 +136,32 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 33,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "c9e31a40d23109bc5063ceda0f9a2abe55a9f305",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "instead of using `tx_received`, `wait_for_tx` will also assert that you're receiving the right tx:\r\n```suggestion\r\n        filter_peer.wait_for_tx(irr_txid)\r\n```",
      "created_at": "2023-10-05T11:54:44Z",
      "updated_at": "2023-10-05T11:58:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1347303470",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347303470"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 154,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347305666",
      "pull_request_review_id": 1659651583,
      "id": 1347305666,
      "node_id": "PRRC_kwDOABII585QTkDC",
      "diff_hunk": "@@ -135,14 +136,32 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        # sync_with_ping forces the node to trickle, which increases m_last_inv_sequence\n+        filter_peer.sync_with_ping()\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We should be able to request this one given too since we force the node to trickle\")\n+        assert filter_peer.tx_received",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 42,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "c9e31a40d23109bc5063ceda0f9a2abe55a9f305",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "What's the purpose of this test? It seems like we're just testing that we don't delay announcements to peers with noban permissions. That doesn't have anything to do with bloom filters or the mempool message.\r\n\r\nAssuming the original intent was to check that they won't be able to request the tx before announcement, you could remove noban permissions and assert the opposite, but I think that's covered in other tests already.",
      "created_at": "2023-10-05T11:56:41Z",
      "updated_at": "2023-10-05T11:58:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1347305666",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347305666"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": 156,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347869253",
      "pull_request_review_id": 1660550043,
      "id": 1347869253,
      "node_id": "PRRC_kwDOABII585QVtpF",
      "diff_hunk": "@@ -135,14 +136,32 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")\n+        filter_peer.tx_received = False\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(irr_wtxid, 16))]))\n+        self.log.info(\"We should get it anyway given it was on the mempool when the MEMPOOL message was sent\")\n+        assert filter_peer.tx_received\n+\n+        self.log.info(\"Create a third transaction (that was therefore not part of the mempool message) and try to retrieve it\")\n+        filter_peer.tx_received = False\n+        add_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=3 * COIN)[\"txid\"]\n+        # sync_with_ping forces the node to trickle, which increases m_last_inv_sequence\n+        filter_peer.sync_with_ping()\n+        filter_peer.send_and_ping(msg_getdata([CInv(t=MSG_WTX, h=int(self.nodes[0].getmempoolentry(add_txid)[\"wtxid\"], 16))]))\n+        self.log.info(\"We should be able to request this one given too since we force the node to trickle\")\n+        assert filter_peer.tx_received",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 42,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "c9e31a40d23109bc5063ceda0f9a2abe55a9f305",
      "in_reply_to_id": 1347305666,
      "user": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I guess we could get rid of this bit. \r\n\r\nThe purpose was really to test how the transaction won't be available until the node has trickled for the requesting peer, but that is not something we can check without introducing a time-variant to the test that will make it fail sparsely.",
      "created_at": "2023-10-05T19:19:41Z",
      "updated_at": "2023-10-05T19:19:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1347869253",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1347869253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": 156,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1354482033",
      "pull_request_review_id": 1670485583,
      "id": 1354482033,
      "node_id": "PRRC_kwDOABII585Qu8Fx",
      "diff_hunk": "@@ -135,14 +136,22 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 20,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "d10acba3d730397484f10ccb2f1116544161507d",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: in the context of tx relay I typically prefer to use more specific words to disambiguate between getting invs and transaction data\r\n```suggestion\r\n        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is announced\")\r\n```",
      "created_at": "2023-10-11T08:57:47Z",
      "updated_at": "2023-10-11T08:59:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1354482033",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1354482033"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 144,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1354483187",
      "pull_request_review_id": 1670485583,
      "id": 1354483187,
      "node_id": "PRRC_kwDOABII585Qu8Xz",
      "diff_hunk": "@@ -135,14 +136,22 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]\n \n-        self.log.debug(\"Send a mempool msg after connecting and check that the tx is received\")\n+        self.log.info(\"Send a mempool msg after connecting and check that the relevant tx is received\")\n         self.nodes[0].add_p2p_connection(filter_peer)\n-        filter_peer.send_and_ping(filter_peer.watch_filter_init)\n-        filter_peer.send_message(msg_mempool())\n-        filter_peer.wait_for_tx(txid)\n+        filter_peer.send_message(filter_peer.watch_filter_init)\n+        filter_peer.send_and_ping(msg_mempool())\n+        filter_peer.wait_for_tx(rel_txid)\n+\n+        self.log.info(\"Request the irrelevant transaction even though it has not being offered to us\")",
      "path": "test/functional/p2p_filter.py",
      "position": null,
      "original_position": 29,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "d10acba3d730397484f10ccb2f1116544161507d",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: grammar and I think \"announced\" is more fitting than \"offered\"\r\n```suggestion\r\n        self.log.info(\"Request the irrelevant transaction even though it was not announced\")\r\n```",
      "created_at": "2023-10-11T08:58:41Z",
      "updated_at": "2023-10-11T08:59:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1354483187",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1354483187"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 150,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415732765",
      "pull_request_review_id": 1765277701,
      "id": 1415732765,
      "node_id": "PRRC_kwDOABII585UYl4d",
      "diff_hunk": "@@ -135,14 +136,22 @@ def test_msg_mempool(self):\n         self.log.info(\"Check that a node with bloom filters enabled services p2p mempool messages\")\n         filter_peer = P2PBloomFilter()\n \n-        self.log.debug(\"Create a tx relevant to the peer before connecting\")\n-        txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=9 * COIN)[\"txid\"]\n+        self.log.info(\"Create two tx before connecting, one relevant to the node another that is not\")\n+        rel_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=filter_peer.watch_script_pubkey, amount=1 * COIN)[\"txid\"]\n+        irr_txid = self.wallet.send_to(from_node=self.nodes[0], scriptPubKey=getnewdestination()[1], amount=2 * COIN)[\"txid\"]\n+        irr_wtxid = self.nodes[0].getmempoolentry(irr_txid)[\"wtxid\"]",
      "path": "test/functional/p2p_filter.py",
      "position": 17,
      "original_position": 17,
      "commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "original_commit_id": "fb288f331277536c8b528c0eae44d81617fcbee6",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit (feel free to ignore): MiniWallet's `send_to` already returns both txid and wtxid, so one doesn't need the extra `getmempoolentry` RPC call.",
      "created_at": "2023-12-05T14:44:18Z",
      "updated_at": "2023-12-05T14:44:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28485#discussion_r1415732765",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415732765"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28485"
        }
      },
      "start_line": 141,
      "original_start_line": 141,
      "start_side": "RIGHT",
      "line": 142,
      "original_line": 142,
      "side": "RIGHT"
    }
  ]
}