{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017",
    "id": 368367434,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MzY4MzY3NDM0",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/18017",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/18017.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/18017.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/fd6580e405699ccb051fd2a34525e48d3253673d",
    "number": 18017,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "txmempool: split epoch logic into class",
    "user": {
      "login": "ajtowns",
      "id": 127186,
      "node_id": "MDQ6VXNlcjEyNzE4Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ajtowns",
      "html_url": "https://github.com/ajtowns",
      "followers_url": "https://api.github.com/users/ajtowns/followers",
      "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
      "organizations_url": "https://api.github.com/users/ajtowns/orgs",
      "repos_url": "https://api.github.com/users/ajtowns/repos",
      "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ajtowns/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Splits the epoch logic introduced in #17925 into a separate class.\r\n\r\nUses clang's thread safety annotations and encapsulates the data more strongly to reduce chances of bugs from API misuse.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      },
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2020-01-29T04:46:08Z",
    "updated_at": "2022-08-16T17:05:21Z",
    "closed_at": "2021-02-24T08:57:57Z",
    "mergeable_state": "unknown",
    "merged_at": "2021-02-24T08:57:57Z",
    "merge_commit_sha": "b59f2787e53318caad6d3292de2cc6e17995d277",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "ajtowns:202001-epoch",
      "ref": "202001-epoch",
      "sha": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 53941525,
        "node_id": "MDEwOlJlcG9zaXRvcnk1Mzk0MTUyNQ==",
        "name": "bitcoin",
        "full_name": "ajtowns/bitcoin",
        "owner": {
          "login": "ajtowns",
          "id": 127186,
          "node_id": "MDQ6VXNlcjEyNzE4Ng==",
          "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ajtowns",
          "html_url": "https://github.com/ajtowns",
          "followers_url": "https://api.github.com/users/ajtowns/followers",
          "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
          "organizations_url": "https://api.github.com/users/ajtowns/orgs",
          "repos_url": "https://api.github.com/users/ajtowns/repos",
          "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ajtowns/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/ajtowns/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ajtowns/bitcoin",
        "archive_url": "https://api.github.com/repos/ajtowns/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ajtowns/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ajtowns/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ajtowns/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ajtowns/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ajtowns/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ajtowns/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ajtowns/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ajtowns/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ajtowns/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ajtowns/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ajtowns/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ajtowns/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ajtowns/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ajtowns/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ajtowns/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ajtowns/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ajtowns/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ajtowns/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ajtowns/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ajtowns/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ajtowns/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ajtowns/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ajtowns/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ajtowns/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ajtowns/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ajtowns/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ajtowns/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ajtowns/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ajtowns/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ajtowns/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ajtowns/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ajtowns/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ajtowns/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ajtowns/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ajtowns/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ajtowns/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ajtowns/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ajtowns/bitcoin/hooks",
        "svn_url": "https://github.com/ajtowns/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 7,
        "watchers_count": 7,
        "size": 263761,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-07-27T02:52:21Z",
        "created_at": "2016-03-15T12:11:24Z",
        "updated_at": "2023-03-19T19:22:46Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b09ad737eef63ee527083d9a5fafea4c2237470b",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 672,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T19:06:37Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 107,
    "deletions": 63,
    "changed_files": 4,
    "commits": 1,
    "review_comments": 28,
    "comments": 13
  },
  "events": [
    {
      "event": "labeled",
      "id": 2988154015,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDI5ODgxNTQwMTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2988154015",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-29T04:46:08Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "labeled",
      "id": 2988154017,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDI5ODgxNTQwMTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2988154017",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-29T04:46:08Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-29T04:46:48Z",
      "updated_at": "2020-01-29T04:46:48Z",
      "source": {
        "issue": {
          "id": 549822165,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MzYyODQxODcz",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17925",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17925/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17925/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17925/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/17925",
          "number": 17925,
          "state": "closed",
          "state_reason": null,
          "title": "Improve UpdateTransactionsFromBlock with Epochs",
          "body": "UpdateTransactionsFromBlock is called during a re-org. When a re-org occurs, all of the transactions in the mempool may be descendants from a transaction which is in the pre-reorg block. This can cause us to propagate updates, worst case, to every transaction in the mempool.\r\n\r\nBecause we construct a `setEntries setChildren`, which is backed by a `std::set`, it is possible that this algorithm is `O(N log N)`.\r\n\r\nBy using an Epoch visitor pattern, we can limit this to `O(N)` worst case behavior.\r\n\r\nEpochs are also less resource intensive than almost any set option (e.g., hash set) because they are allocation free.\r\n\r\nThis PR is related to https://github.com/bitcoin/bitcoin/pull/17268, it is a small subset of the changes which have been refactored slightly to ease review. If this PR gets review & merge, I will follow up with more PRs (similar to #17268) to improve the mempool ",
          "user": {
            "login": "JeremyRubin",
            "id": 886523,
            "node_id": "MDQ6VXNlcjg4NjUyMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JeremyRubin",
            "html_url": "https://github.com/JeremyRubin",
            "followers_url": "https://api.github.com/users/JeremyRubin/followers",
            "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
            "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
            "repos_url": "https://api.github.com/users/JeremyRubin/repos",
            "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17925",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/17925",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/17925.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/17925.patch"
          },
          "closed_at": "2020-02-03T10:55:30Z",
          "created_at": "2020-01-14T21:14:45Z",
          "updated_at": "2022-02-15T10:57:47Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "review_requested",
      "id": 2988155230,
      "node_id": "MDIwOlJldmlld1JlcXVlc3RlZEV2ZW50Mjk4ODE1NTIzMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2988155230",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-29T04:46:59Z",
      "requested_reviewer": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 579594113,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU3OTU5NDExMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579594113",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-29T05:04:14Z",
      "updated_at": "2020-01-29T05:04:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK. Will need to play around with it a little bit to test that clang actually prevents compiling incorrect uses.",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-579594113",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "commented",
      "id": 579666481,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU3OTY2NjQ4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/579666481",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-29T09:20:53Z",
      "updated_at": "2021-02-09T21:01:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-579666481",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3002083210,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzAwMjA4MzIxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3002083210",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-02-03T12:56:00Z"
    },
    {
      "event": "ready_for_review",
      "id": 3002083873,
      "node_id": "MDE5OlJlYWR5Rm9yUmV2aWV3RXZlbnQzMDAyMDgzODcz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3002083873",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-02-03T12:56:12Z"
    },
    {
      "event": "commented",
      "id": 584205068,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU4NDIwNTA2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/584205068",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-02-10T16:21:07Z",
      "updated_at": "2020-02-10T16:21:07Z",
      "author_association": "MEMBER",
      "body": "Concept ACK, nice",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-584205068",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-02-11T19:08:07Z",
      "updated_at": "2020-02-11T19:08:07Z",
      "source": {
        "issue": {
          "id": 561381093,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MzcyMjAyOTI0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18086",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18086/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18086/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18086/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/18086",
          "number": 18086,
          "state": "closed",
          "state_reason": null,
          "title": "Accurately account for mempool index memory",
          "body": "This introduces a C++ allocator class (`memusage::AccountingAllocator`) which enables containers that accurately account for all their memory allocations in a tracker variable.\r\n\r\nThis is then used to replace the heuristics in the mempool to guess memory usage.",
          "user": {
            "login": "sipa",
            "id": 548488,
            "node_id": "MDQ6VXNlcjU0ODQ4OA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sipa",
            "html_url": "https://github.com/sipa",
            "followers_url": "https://api.github.com/users/sipa/followers",
            "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
            "organizations_url": "https://api.github.com/users/sipa/orgs",
            "repos_url": "https://api.github.com/users/sipa/repos",
            "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sipa/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            },
            {
              "id": 326918230,
              "node_id": "MDU6TGFiZWwzMjY5MTgyMzA=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Resource%20usage",
              "name": "Resource usage",
              "color": "981023",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 27,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18086",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/18086",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/18086.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/18086.patch"
          },
          "closed_at": "2022-03-22T10:56:46Z",
          "created_at": "2020-02-07T02:21:54Z",
          "updated_at": "2022-12-01T08:51:18Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-02-11T20:42:05Z",
      "updated_at": "2020-02-11T20:42:05Z",
      "source": {
        "issue": {
          "id": 541348481,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MzU2MDE2MTI5",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17786",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17786/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17786/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17786/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/17786",
          "number": 17786,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Nuke policy/fees->mempool circular dependencies",
          "body": "This PR:\r\n- gets rid of the `policy/fees` -> `txmempool` -> `policy/fees` circular dependency\r\n- is an alternative to #13949, which nukes only one circular dependency",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 45,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/17786",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/17786",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/17786.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/17786.patch"
          },
          "closed_at": "2022-11-19T01:05:22Z",
          "created_at": "2019-12-21T17:08:37Z",
          "updated_at": "2022-11-30T10:42:30Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-02-12T00:15:43Z",
      "updated_at": "2020-02-12T00:15:43Z",
      "source": {
        "issue": {
          "id": 230539233,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTIxODgwMDE0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10443",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10443/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10443/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10443/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/10443",
          "number": 10443,
          "state": "open",
          "state_reason": null,
          "title": "Add fee_est tool for debugging fee estimation code",
          "body": "This PR adds an `-estlog` option for saving live fee estimation data from a bitcoin node, and a `fee_est` command line tool for processing the data and testing fee estimation code.\r\n\r\nThe idea is to make it easier to test improvements to fee estimation like https://github.com/bitcoin/bitcoin/pull/10199 in a more systematic and reproducible way.\r\n\r\nSome documentation is in [`src/test/fee_est/README.md`](https://github.com/ryanofsky/bitcoin/blob/pr/fee/src/test/fee_est/README.md)\r\n\r\nSample log file: [`est.log.xz`](https://storage.googleapis.com/ryanofsky/est.log.xz) (65M)\r\n\r\nSample [`fee_est.cpp`](https://github.com/ryanofsky/bitcoin/blob/pr/fee/src/test/fee_est/fee_est.cpp)  graph output: \r\n\r\n![graph](https://cloud.githubusercontent.com/assets/7133040/26331057/f2de8d0c-3f1c-11e7-99ea-de1801d13b05.png)\r\n\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 20,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10443",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/10443",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/10443.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/10443.patch"
          },
          "created_at": "2017-05-22T22:40:55Z",
          "updated_at": "2023-06-20T17:24:07Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-02-22T09:26:15Z",
      "updated_at": "2020-02-22T09:26:15Z",
      "source": {
        "issue": {
          "id": 569278507,
          "node_id": "MDExOlB1bGxSZXF1ZXN0Mzc4NTQ5MTUz",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18191",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18191/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18191/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18191/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/18191",
          "number": 18191,
          "state": "closed",
          "state_reason": null,
          "title": "Change UpdateForDescendants to use Epochs",
          "body": "This patch  replaces #18120, fixing some regressions or issues with that PR. The overall change here should be easier to review as well.\r\n\r\nRefactors UpdateForDescendants to use Epochs instead of sets to de-duplicate traversal, and replaces the cache entries with a vector instead of a set. This is a straightforward win. The algorithm is a bit clever so as not to require two separate vectors for txiters that need expanding and txiters that have already been processed, but I think it's relatively easy to reason about.\r\n\r\nThis is extracted from #18063 as a standalone because it turns out the DoS issues with this code perhaps merit more extensive review http://gnusha.org/bitcoin-core-dev/2020-02-11.log. That PR will stay open for review, but this PR is designed as an \"obviously better\" win that can be merged now to keep progress up on the mempool project.\r\n\r\nsdaftuar can you re-run your bench from #18120?",
          "user": {
            "login": "JeremyRubin",
            "id": 886523,
            "node_id": "MDQ6VXNlcjg4NjUyMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JeremyRubin",
            "html_url": "https://github.com/JeremyRubin",
            "followers_url": "https://api.github.com/users/JeremyRubin/followers",
            "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
            "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
            "repos_url": "https://api.github.com/users/JeremyRubin/repos",
            "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 26,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18191",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/18191",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/18191.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/18191.patch"
          },
          "closed_at": "2022-04-25T09:01:32Z",
          "created_at": "2020-02-22T04:19:12Z",
          "updated_at": "2023-04-25T14:45:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-03T15:14:19Z",
      "updated_at": "2020-03-03T15:14:19Z",
      "source": {
        "issue": {
          "id": 574690122,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MzgyOTY5MDU3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18253",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18253/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18253/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18253/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/18253",
          "number": 18253,
          "state": "closed",
          "state_reason": null,
          "title": "doc: Correct spelling errors in comments",
          "body": "And ci script output.\r\n\r\nIdentified via test/lint/lint-spelling\r\n\r\nBefore:\r\n```\r\n$ test/lint/lint-spelling.sh \r\nci/test/05_before_script.sh:29: explicitely  ==> explicitly\r\nsrc/compressor.h:43: Ser  ==> Set\r\nsrc/compressor.h:78: Ser  ==> Set\r\nsrc/logging/timer.h:88: outputing  ==> outputting\r\nsrc/node/psbt.cpp:87: minumum  ==> minimum\r\nsrc/qt/coincontroldialog.cpp:372: UnSelect  ==> deselect\r\nsrc/qt/coincontroldialog.cpp:443: unselect  ==> deselect\r\nsrc/qt/coincontroldialog.cpp:448: UnSelect  ==> deselect\r\nsrc/qt/coincontroldialog.cpp:699: UnSelect  ==> deselect\r\nsrc/serialize.h:211: Ser  ==> Set\r\nsrc/serialize.h:213: Ser  ==> Set\r\nsrc/serialize.h:228: Ser  ==> Set\r\nsrc/serialize.h:246: Ser  ==> Set\r\nsrc/serialize.h:484: Ser  ==> Set\r\nsrc/serialize.h:490: Ser  ==> Set\r\nsrc/serialize.h:510: Ser  ==> Set\r\nsrc/serialize.h:622: Ser  ==> Set\r\nsrc/serialize.h:740: Ser  ==> Set\r\nsrc/test/base32_tests.cpp:14: fo  ==> of, for\r\nsrc/test/base64_tests.cpp:14: fo  ==> of, for\r\nsrc/txmempool.h:756: incomaptible  ==> incompatible\r\nsrc/undo.h:26: Ser  ==> Set\r\nsrc/wallet/coincontrol.h:74: UnSelect  ==> deselect\r\ntest/functional/feature_backwards_compatibility.py:116: Abondon  ==> Abandon\r\ntest/functional/rpc_getaddressinfo_label_deprecation.py:7: superceded  ==> superseded\r\ntest/lint/lint-shell.sh:44: desriptor  ==> descriptor\r\n^ Warning: codespell identified likely spelling errors. Any false positives? Add them to the list of ignored words in test/lint/lint-spelling.ignore-words.txt\r\n```\r\n\r\nAfter:\r\n```\r\n$ test/lint/lint-spelling.sh \r\nsrc/test/base32_tests.cpp:14: fo  ==> of, for\r\nsrc/test/base64_tests.cpp:14: fo  ==> of, for\r\ntest/functional/rpc_getaddressinfo_label_deprecation.py:7: superceded  ==> superseded\r\n^ Warning: codespell identified likely spelling errors. Any false positives? Add them to the list of ignored words in test/lint/lint-spelling.ignore-words.txt\r\n```",
          "user": {
            "login": "Empact",
            "id": 5470,
            "node_id": "MDQ6VXNlcjU0NzA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Empact",
            "html_url": "https://github.com/Empact",
            "followers_url": "https://api.github.com/users/Empact/followers",
            "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
            "organizations_url": "https://api.github.com/users/Empact/orgs",
            "repos_url": "https://api.github.com/users/Empact/repos",
            "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Empact/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 148216,
              "node_id": "MDU6TGFiZWwxNDgyMTY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Docs",
              "name": "Docs",
              "color": "02d7e1",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18253",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/18253",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/18253.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/18253.patch"
          },
          "closed_at": "2020-03-04T04:22:35Z",
          "created_at": "2020-03-03T14:02:47Z",
          "updated_at": "2022-02-15T11:14:56Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 3095106186,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDMwOTUxMDYxODY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3095106186",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-04T06:09:26Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3107513596,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzEwNzUxMzU5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3107513596",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-07T06:45:33Z"
    },
    {
      "event": "unlabeled",
      "id": 3107525393,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50MzEwNzUyNTM5Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3107525393",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-03-07T07:14:11Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 633196020,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzE5NjAyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/633196020",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-24T08:12:48Z",
      "updated_at": "2020-05-24T08:12:48Z",
      "author_association": "MEMBER",
      "body": "Concept ACK.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-633196020",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "reviewed",
      "id": 417338366,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE3MzM4MzY2",
      "url": null,
      "actor": null,
      "commit_id": "7485e0f9db4455212e930ba68c26daa972956faf",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "A brilliant idea to leverage the Clang Thread Safety Analysis!",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#pullrequestreview-417338366",
      "submitted_at": "2020-05-24T11:41:54Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3373225582,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50MzM3MzIyNTU4Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3373225582",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T12:05:25Z"
    },
    {
      "event": "commented",
      "id": 633984070,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzMzk4NDA3MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/633984070",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T12:07:20Z",
      "updated_at": "2020-05-26T12:07:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "Incorporated @hebasto's suggested changes",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-633984070",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "mentioned",
      "id": 3373232132,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzM3MzIzMjEzMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3373232132",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T12:07:20Z"
    },
    {
      "event": "subscribed",
      "id": 3373232137,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzNzMyMzIxMzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3373232137",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T12:07:20Z"
    },
    {
      "event": "reviewed",
      "id": 418439956,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDE4NDM5OTU2",
      "url": null,
      "actor": null,
      "commit_id": "837d4e4f5aeb2f110143c59b7dd05eac6ae52b63",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 837d4e4f5aeb2f110143c59b7dd05eac6ae52b63, tested on Linux Mint 19.3: the Clang's thread safety annotations indeed reduce chances of the `Epoch` class misuse (verified by different code manipulations).\r\n\r\nMay I suggest two additional annotations:\r\n```diff\r\n--- a/src/txmempool.cpp\r\n+++ b/src/txmempool.cpp\r\n@@ -107,6 +107,7 @@ void CTxMemPool::UpdateForDescendants(txiter updateIt, cacheMap &cachedDescendan\r\n void CTxMemPool::UpdateTransactionsFromBlock(const std::vector<uint256> &vHashesToUpdate)\r\n {\r\n     AssertLockHeld(cs);\r\n+    AssertLockNotHeld(m_epoch);\r\n     // For each entry in vHashesToUpdate, store the set of in-mempool, but not\r\n     // in-vHashesToUpdate transactions, so that we don't have to recalculate\r\n     // descendants when we come across a previously seen entry.\r\ndiff --git a/src/txmempool.h b/src/txmempool.h\r\nindex 655afc3b8..b72ad229c 100644\r\n--- a/src/txmempool.h\r\n+++ b/src/txmempool.h\r\n@@ -797,7 +797,7 @@ private:\r\n      */\r\n     void UpdateForDescendants(txiter updateIt,\r\n             cacheMap &cachedDescendants,\r\n-            const std::set<uint256> &setExclude) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n+            const std::set<uint256> &setExclude) EXCLUSIVE_LOCKS_REQUIRED(cs) LOCKS_EXCLUDED(m_epoch);\r\n     /** Update ancestors of hash to add/remove it as a descendant transaction. */\r\n     void UpdateAncestorsOf(bool add, txiter hash, setEntries &setAncestors) EXCLUSIVE_LOCKS_REQUIRED(cs);\r\n     /** Set ancestor state for an entry */\r\n```\r\n?",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#pullrequestreview-418439956",
      "submitted_at": "2020-05-26T15:52:20Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
    },
    {
      "event": "commented",
      "id": 634134624,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDEzNDYyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634134624",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T16:30:34Z",
      "updated_at": "2020-05-26T16:30:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "@hebasto - `AssertLockNotHeld(m_epoch)` won't work -- epochs aren't sync.h locks. I think the annotation for UpdateForDescendents would be better made after #18191 is merged?",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-634134624",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "mentioned",
      "id": 3374374867,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzM3NDM3NDg2Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3374374867",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T16:30:34Z"
    },
    {
      "event": "subscribed",
      "id": 3374374873,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzNzQzNzQ4NzM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3374374873",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T16:30:34Z"
    },
    {
      "event": "commented",
      "id": 634138030,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYzNDEzODAzMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/634138030",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T16:36:53Z",
      "updated_at": "2020-05-26T16:36:53Z",
      "author_association": "MEMBER",
      "body": "@ajtowns \r\n> @hebasto - `AssertLockNotHeld(m_epoch)` won't work -- epochs aren't sync.h locks. I think the annotation for UpdateForDescendents would be better made after #18191 is merged?\r\n\r\nAgree.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-634138030",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "mentioned",
      "id": 3374399420,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzM3NDM5OTQyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3374399420",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T16:36:53Z"
    },
    {
      "event": "subscribed",
      "id": 3374399425,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzNzQzOTk0MjU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3374399425",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T16:36:53Z"
    },
    {
      "event": "mentioned",
      "id": 3374399430,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzM3NDM5OTQzMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3374399430",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T16:36:53Z"
    },
    {
      "event": "subscribed",
      "id": 3374399434,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDMzNzQzOTk0MzQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3374399434",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-26T16:36:53Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-06-17T23:20:16Z",
      "updated_at": "2020-06-17T23:20:16Z",
      "source": {
        "issue": {
          "id": 640570342,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDM1OTU2NDUx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19306",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19306/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19306/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19306/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19306",
          "number": 19306,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Replace RecursiveMutex with Mutex in CTxMemPool",
          "body": "This PR replaces `RecursiveMutex CTxMemPool::cs` with `Mutex CTxMemPool:cs`.\r\n\r\nAll of the related code branches are covered by appropriate lock assertions to insure that the mutex locking policy has not been changed by accident\r\n\r\nRelated to #19303.",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19306",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19306",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19306.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19306.patch"
          },
          "closed_at": "2021-08-24T15:37:39Z",
          "created_at": "2020-06-17T16:15:04Z",
          "updated_at": "2022-08-24T17:35:52Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-10T02:21:16Z",
      "updated_at": "2020-07-10T02:21:16Z",
      "source": {
        "issue": {
          "id": 654341795,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDQ3MDg4ODUx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19478",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19478/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19478/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19478/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19478",
          "number": 19478,
          "state": "closed",
          "state_reason": null,
          "title": "Remove CTxMempool::mapLinks data structure member",
          "body": "Currently we have a peculiar data structure in the mempool called maplinks. Maplinks job is to track the in-pool children and parents of each transaction. This PR can be primarily understood and reviewed as a simple refactoring to remove this extra data structure, although it comes with a nice memory and performance improvement for free.\r\n\r\nMaplinks is particularly peculiar because removing it is not as simple as just moving it's inner structure to the owning CTxMempoolEntry. Because TxLinks (the class storing the setEntries for parents and children) store txiters to each entry in the mempool corresponding to the parent or child, it means that the TxLinks type is \"aware\" of the boost multiindex (mapTx) it's coming from, which is in turn, aware of the entry type stored in mapTx. Thus we used maplinks to store this entry associated data we in an entirely separate data structure just to avoid a circular type reference caused by storing a txiter inside a CTxMempoolEntry.\r\n\r\nIt turns out, we can kill this circular reference by making use of iterator_to multiindex function and std::reference_wrapper. This allows us to get rid of the maplinks data structure and move the ownership of the parents/child sets to the entries themselves.\r\n\r\nThe benefit of this good all around, for any of the reasons given below the change would be acceptable, and it doesn't make the code harder to reason about or worse in any respect (as far as I can tell, there's no tradeoff).\r\n\r\n### Simpler ownership model \r\nNo longer having to consistency check that mapLinks did have records for our CTxMempoolEntry, impossible to have a mapLinks entry outlive or incorrectly die before a CTxMempoolEntry.\r\n\r\n### Memory Usage\r\nWe get rid of a O(Transactions) sized map in the mempool, which is a long lived data structure. \r\n\r\n### Performance\r\nIf you have a CTxMemPoolEntry, you immediately know the address of it's children/parents, rather than having to do a O(log(Transactions)) lookup via maplinks (which we do very often). We do it in *so many* places that a true benchmark has to look at a full running node, but it is easy enough to show an improvement in this case.\r\n\r\nThe ComplexMemPool shows a good coherence check that we see the expected result of it being 12.5% faster / 1.14x faster.\r\n```\r\nBefore:\r\n# Benchmark, evals, iterations, total, min, max, median\r\nComplexMemPool, 5, 1, 1.40462, 0.277222, 0.285339, 0.279793\r\n\r\nAfter:\r\n# Benchmark, evals, iterations, total, min, max, median\r\nComplexMemPool, 5, 1, 1.22586, 0.243831, 0.247076, 0.244596\r\n```\r\nThe ComplexMemPool benchmark only checks doing addUnchecked and TrimToSize for 800 transactions. While this bench does a good job of hammering the relevant types of function, it doesn't test everything. \r\n\r\nSubbing in 5000 transactions shows a that the advantage isn't completely wiped out by other asymptotic factors (this isn't the only bottleneck in growing the mempool), but it's only a bit proportionally slower (10.8%, 1.12x), which adds evidence that this will be a good change for performance minded users.\r\n\r\n```\r\n# Benchmark, evals, iterations, total, min, max, median\r\nComplexMemPool, 5, 1, 59.1321, 11.5919, 12.235, 11.7068\r\n\r\n# Benchmark, evals, iterations, total, min, max, median\r\nComplexMemPool, 5, 1, 52.1307, 10.2641, 10.5206, 10.4306\r\n```\r\nI don't think it's possible to come up with an example of where a maplinks based design would have better performance, but it's something for reviewers to consider.\r\n\r\n# Discussion\r\n## Why maplinks in the first place?\r\n\r\nI spoke with the author of mapLinks (sdaftuar) a while back, and my recollection from our conversation was that it was implemented because he did not know how to resolve the circular dependency at the time, and there was no other reason for making it a separate map.\r\n\r\n## Is iterator_to weird?\r\n\r\niterator_to is expressly for this purpose, see https://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/tutorial/indices.html#iterator_to \r\n\r\n>  iterator_to provides a way to retrieve an iterator to an element from a pointer to the element, thus making iterators and pointers interchangeable for the purposes of element pointing (not so for traversal) in many situations. This notwithstanding, it is not the aim of iterator_to to promote the usage of pointers as substitutes for real iterators: the latter are specifically designed for handling the elements of a container, and not only benefit from the iterator orientation of container interfaces, but are also capable of exposing many more programming bugs than raw pointers, both at compile and run time. iterator_to is thus meant to be used in scenarios where access via iterators is not suitable or desireable:\r\n> \r\n>     - Interoperability with preexisting APIs based on pointers or references.\r\n>     - Publication of pointer-based interfaces (for instance, when designing a C-compatible library).\r\n>     - The exposure of pointers in place of iterators can act as a type erasure barrier effectively decoupling the user of the code from the implementation detail of which particular container is being used. Similar techniques, like the famous Pimpl idiom, are used in large projects to reduce dependencies and build times.\r\n>     - Self-referencing contexts where an element acts upon its owner container and no iterator to itself is available.\r\n\r\nIn other words, iterator_to is the perfect tool for the job by the last reason given. Under the hood it should just be a simple pointer cast and have no major runtime overhead (depending on if the function call is inlined).\r\n\r\nEdit by laanwj: removed at sign from the description",
          "user": {
            "login": "JeremyRubin",
            "id": 886523,
            "node_id": "MDQ6VXNlcjg4NjUyMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JeremyRubin",
            "html_url": "https://github.com/JeremyRubin",
            "followers_url": "https://api.github.com/users/JeremyRubin/followers",
            "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
            "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
            "repos_url": "https://api.github.com/users/JeremyRubin/repos",
            "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            },
            {
              "id": 326918230,
              "node_id": "MDU6TGFiZWwzMjY5MTgyMzA=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Resource%20usage",
              "name": "Resource usage",
              "color": "981023",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 29,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19478",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19478",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19478.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19478.patch"
          },
          "closed_at": "2020-09-07T10:10:26Z",
          "created_at": "2020-07-09T20:54:36Z",
          "updated_at": "2022-10-08T19:59:56Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-30T03:48:54Z",
      "updated_at": "2020-07-30T03:48:54Z",
      "source": {
        "issue": {
          "id": 606814450,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDA4OTQwNDUy",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18766",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18766/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18766/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18766/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/18766",
          "number": 18766,
          "state": "closed",
          "state_reason": null,
          "title": "Disable fee estimation in blocksonly mode (by removing the fee estimates global)",
          "body": "If the `blocksonly` mode is turned on after running with transaction\r\nrelay enabled for a while, the fee estimation will serve outdated data\r\nto both the internal wallet and to external applications that might be\r\nfeerate-sensitive and make use of `estimatesmartfee` (for example a\r\nLightning Network node).\r\n\r\nThis has already caused issues (for example https://github.com/bitcoin/bitcoin/issues/16840 (C-lightning), or https://github.com/lightningnetwork/lnd/issues/2562 (LND)) and it seems prudent to fail rather than to give inaccurate values.\r\n\r\nThis fixes #16840, and closes #16890 which tried to fix the symptoms (RPC) but not the cause as mentioned by sdaftuar :\r\n> If this is a substantial problem, then I would think we should take action to protect our own wallet users as well (rather than hide the results of what our fee estimation would do!).",
          "user": {
            "login": "darosior",
            "id": 22457751,
            "node_id": "MDQ6VXNlcjIyNDU3NzUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/darosior",
            "html_url": "https://github.com/darosior",
            "followers_url": "https://api.github.com/users/darosior/followers",
            "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
            "organizations_url": "https://api.github.com/users/darosior/orgs",
            "repos_url": "https://api.github.com/users/darosior/repos",
            "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/darosior/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 36,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18766",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/18766",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/18766.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/18766.patch"
          },
          "closed_at": "2020-12-07T12:02:02Z",
          "created_at": "2020-04-25T17:13:47Z",
          "updated_at": "2022-08-16T17:02:38Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 3736694895,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM3MzY2OTQ4OTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3736694895",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-07T11:21:41Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3753505701,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzc1MzUwNTcwMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3753505701",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-10T22:57:18Z"
    },
    {
      "event": "commented",
      "id": 690774658,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY5MDc3NDY1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/690774658",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-10T22:57:41Z",
      "updated_at": "2020-09-10T22:57:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-690774658",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "unlabeled",
      "id": 3753513874,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50Mzc1MzUxMzg3NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3753513874",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-10T23:00:29Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 486487328,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg2NDg3MzI4",
      "url": null,
      "actor": null,
      "commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code Review ACK.",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#pullrequestreview-486487328",
      "submitted_at": "2020-09-11T06:03:22Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3766133408,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzc2NjEzMzQwOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3766133408",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-15T02:42:10Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3766202062,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzc2NjIwMjA2Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3766202062",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-15T03:18:35Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3766218176,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzc2NjIxODE3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3766218176",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-15T03:27:30Z"
    },
    {
      "event": "reviewed",
      "id": 488839517,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NDg4ODM5NTE3",
      "url": null,
      "actor": null,
      "commit_id": "55c1c7e5db72a343936487c03d555974f97daaf5",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#pullrequestreview-488839517",
      "submitted_at": "2020-09-15T16:04:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
    },
    {
      "event": "commented",
      "id": 692815496,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY5MjgxNTQ5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/692815496",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-15T16:05:18Z",
      "updated_at": "2020-09-15T16:05:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "re CR-ACK",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-692815496",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3770753407,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzc3MDc1MzQwNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3770753407",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-16T00:00:03Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 3775908581,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50Mzc3NTkwODU4MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3775908581",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-17T03:38:40Z"
    },
    {
      "event": "commented",
      "id": 694737531,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY5NDczNzUzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/694737531",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-18T08:37:56Z",
      "updated_at": "2020-09-18T08:37:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, the code looks like a nice refactoring.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-694737531",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-19T13:40:30Z",
      "updated_at": "2020-09-19T13:40:30Z",
      "source": {
        "issue": {
          "id": 698134045,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDg0MDA3NTQw",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19935",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19935/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19935/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19935/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19935",
          "number": 19935,
          "state": "closed",
          "state_reason": null,
          "title": "Move SaltedHashers to separate file and add some new ones",
          "body": "There are existing `SaltedOutPointHasher` and `SaltedTxidHasher` classes used for `std::unordered_map` and `std::unordered_set` that could be useful in other places in the codebase. So we these to their own `saltedhash.{cpp/h}` file. An existing `KeyIDHasher` is moved there too. Additionally, `ScriptIDHasher`, `SaltedPubkeyHasher`, and `SaltedScriptHasher` are added so that they can be used in future work.\r\n\r\n`KeyIDHasher` and `ScriptIDHasher` are not salted so that equality comparisons of maps and sets keyed by `CKeyID` and `CScriptID` will actually work.\r\n\r\nSplit from #19602 (and a few other PRs/branches I have).",
          "user": {
            "login": "achow101",
            "id": 3782274,
            "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/achow101",
            "html_url": "https://github.com/achow101",
            "followers_url": "https://api.github.com/users/achow101/followers",
            "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
            "organizations_url": "https://api.github.com/users/achow101/orgs",
            "repos_url": "https://api.github.com/users/achow101/repos",
            "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/achow101/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            },
            {
              "id": 1648013533,
              "node_id": "MDU6TGFiZWwxNjQ4MDEzNTMz",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Review%20club",
              "name": "Review club",
              "description": "",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19935",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19935",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19935.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19935.patch"
          },
          "closed_at": "2021-01-13T07:50:28Z",
          "created_at": "2020-09-10T15:33:43Z",
          "updated_at": "2022-08-16T17:02:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-19T13:47:19Z",
      "updated_at": "2020-09-19T13:47:19Z",
      "source": {
        "issue": {
          "id": 695177712,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDgxNDU3MDI1",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19909",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19909/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19909/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19909/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19909",
          "number": 19909,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Remove unused CTxMemPool::clear() helper",
          "body": "Seems odd to have code in Bitcoin Core that is unused.\r\n\r\nMoreover the function was broken (see https://github.com/bitcoin/bitcoin/pull/24145) and is brittle, as there is nothing that prevents similar bugs from re-appearing.\r\n\r\nFix both issues by replacing it with C++11 member initializers.",
          "user": {
            "login": "MarcoFalke",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MarcoFalke",
            "html_url": "https://github.com/MarcoFalke",
            "followers_url": "https://api.github.com/users/MarcoFalke/followers",
            "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
            "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
            "repos_url": "https://api.github.com/users/MarcoFalke/repos",
            "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19909",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19909",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19909.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19909.patch"
          },
          "closed_at": "2023-01-04T08:45:25Z",
          "created_at": "2020-09-07T14:48:42Z",
          "updated_at": "2023-01-04T10:30:02Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-19T14:48:59Z",
      "updated_at": "2020-09-19T14:48:59Z",
      "source": {
        "issue": {
          "id": 666560839,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDU3MzgyMzM0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19602",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19602/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19602/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19602/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19602",
          "number": 19602,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Migrate legacy wallets to descriptor wallets",
          "body": "This PR adds a new `migratewallet` RPC which migrates a legacy wallet to a descriptor wallet. Migrated wallets will need a new backup. If a wallet has watchonly stuff in it, a new watchonly descriptor wallet will be created containing those watchonly things. The related transactions, labels, and descriptors for those watchonly things will be removed from the original wallet. Migrated wallets will not have any of the legacy things be available for fetching from `getnewaddress` or `getrawchangeaddress`. Wallets that have private keys enabled will have newly generated descriptors. Wallets with private keys disabled will not have any active `ScriptPubKeyMan`s.\r\n\r\nFor the basic HD wallet case of just generated keys, in addition to the standard descriptor wallet descriptors using the master key derived from the pre-existing hd seed, the migration will also create 3 descriptors for each HD chain in: a ranged combo external, a ranged combo internal, and a single key combo for the seed (the seed is a valid key that we can receive coins at!). The migrated wallet will then have newly generated descriptors as the active `ScriptPubKeyMan`s. This is equivalent to creating a new descriptor wallet and importing the 3 descriptors for each HD chain. For wallets containing non-HD keys, each key will have its own combo descriptor.\r\n\r\nThere are also tests.",
          "user": {
            "login": "achow101",
            "id": 3782274,
            "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/achow101",
            "html_url": "https://github.com/achow101",
            "followers_url": "https://api.github.com/users/achow101/followers",
            "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
            "organizations_url": "https://api.github.com/users/achow101/orgs",
            "repos_url": "https://api.github.com/users/achow101/repos",
            "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/achow101/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/54",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/54",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/54/labels",
            "id": 7150037,
            "node_id": "MI_kwDOABII584AbRnV",
            "number": 54,
            "state": "closed",
            "title": "24.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 159,
            "created_at": "2021-09-14T08:27:02Z",
            "updated_at": "2022-11-29T15:44:44Z",
            "closed_at": "2022-11-29T15:44:44Z"
          },
          "locked": false,
          "comments": 50,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19602",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19602",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19602.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19602.patch"
          },
          "closed_at": "2022-09-01T19:44:11Z",
          "created_at": "2020-07-27T20:22:25Z",
          "updated_at": "2023-03-13T22:00:30Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-12T22:17:39Z",
      "updated_at": "2020-10-12T22:17:39Z",
      "source": {
        "issue": {
          "id": 705355883,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDkwMDk4NTgx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19988",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19988/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19988/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19988/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19988",
          "number": 19988,
          "state": "closed",
          "state_reason": null,
          "title": "Overhaul transaction request logic",
          "body": "This replaces the transaction request logic with an encapsulated class that maintains all the state surrounding it. By keeping it stand alone, it can be easily tested (using included unit tests and fuzz tests).\r\n\r\nThe major changes are:\r\n\r\n* Announcements from outbound (and whitelisted) peers are now always preferred over those from inbound peers. This used to be the case for the first request (by delaying the first request from inbound peers), and a bias afters. The 2s delay for requests from inbound peers still exists, but after that, if viable outbound peers remain for any given transaction, they will always be tried first.\r\n* No more hard cap of 100 in flight transactions per peer, as there is less need for it (memory usage is linear in the number of announcements, but independent from the number in flight, and CPU usage isn't affected by it). Furthermore, if only one peer announces a transaction, and it has over 100 in flight already, we still want to request it from them. The cap is replaced with a rule that announcements from such overloaded peers get an additional 2s delay (possibly combined with the existing 2s delays for inbound connections, and for txid peers when wtxid peers are available).\r\n* The limit of 100000 tracked announcements is reduced to 5000; this was excessive. This can be bypassed using the PF_RELAY permission (to accommodate locally dumping a batch of many transactions).\r\n\r\nThis replaces #19184, rebased on #18044 and with many small changes.",
          "user": {
            "login": "sipa",
            "id": 548488,
            "node_id": "MDQ6VXNlcjU0ODQ4OA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sipa",
            "html_url": "https://github.com/sipa",
            "followers_url": "https://api.github.com/users/sipa/followers",
            "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
            "organizations_url": "https://api.github.com/users/sipa/orgs",
            "repos_url": "https://api.github.com/users/sipa/repos",
            "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sipa/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/45",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/45",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/45/labels",
            "id": 4914019,
            "node_id": "MDk6TWlsZXN0b25lNDkxNDAxOQ==",
            "number": 45,
            "state": "closed",
            "title": "0.21.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 132,
            "created_at": "2019-12-09T08:39:58Z",
            "updated_at": "2021-01-15T19:50:53Z",
            "closed_at": "2021-01-15T19:50:53Z"
          },
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 28,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19988",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19988",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19988.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19988.patch"
          },
          "closed_at": "2020-10-14T16:37:52Z",
          "created_at": "2020-09-21T07:21:31Z",
          "updated_at": "2022-02-15T10:37:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-22T22:34:34Z",
      "updated_at": "2020-10-22T22:34:34Z",
      "source": {
        "issue": {
          "id": 727598082,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTA4NDU5MjU5",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20222",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20222/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20222/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20222/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/20222",
          "number": 20222,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: CTxMempool constructor clean up",
          "body": "This PR cleans up the CTxMemPool interface by including the ratio used to determine when a mempool sanity check should run in the constructor of CTxMempool instead of using nCheckFrequency which required a cast from a double to a uint32_t. Since nCheckFrequency (now called m_check_ratio) is set in the constructor and only every read from there after, it can be turned into a const and no longer needs to be guarded by the 'cs' lock. \r\n\r\nSince nCheckFrequency/m_check_ratio no longer needs to lock the 'cs' mutux, mutex lock line in the \"CTxMempool::check\" function can be moved below where the m_check_ratio variable is checked. Since the variable is 0 by default (meaning that \"CTxMempool::check\" will most likely not run its logic) this saves us from unnecessarily grabbing the lock.",
          "user": {
            "login": "ellemouton",
            "id": 25280249,
            "node_id": "MDQ6VXNlcjI1MjgwMjQ5",
            "avatar_url": "https://avatars.githubusercontent.com/u/25280249?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ellemouton",
            "html_url": "https://github.com/ellemouton",
            "followers_url": "https://api.github.com/users/ellemouton/followers",
            "following_url": "https://api.github.com/users/ellemouton/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ellemouton/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ellemouton/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ellemouton/subscriptions",
            "organizations_url": "https://api.github.com/users/ellemouton/orgs",
            "repos_url": "https://api.github.com/users/ellemouton/repos",
            "events_url": "https://api.github.com/users/ellemouton/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ellemouton/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 11,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20222",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/20222",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/20222.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/20222.patch"
          },
          "closed_at": "2020-12-01T09:04:48Z",
          "created_at": "2020-10-22T17:49:49Z",
          "updated_at": "2022-02-15T11:01:04Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-30T02:09:10Z",
      "updated_at": "2020-11-30T02:09:10Z",
      "source": {
        "issue": {
          "id": 752978324,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTI5MTUyMTkx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20530",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20530/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20530/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20530/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/20530",
          "number": 20530,
          "state": "closed",
          "state_reason": null,
          "title": "lint, refactor: Update cppcheck linter to c++17 and improve explicit usage",
          "body": "I found the `extended-lint-cppcheck` linter still uses `std=c++11` when reviewing #20471. The only difference in the output after this change is one line is missing:\r\n\r\n```\r\nsrc/script/descriptor.cpp:159:5: warning: Struct 'PubkeyProvider' has a constructor with 1 argument that is not explicit. [noExplicitConstructor]\r\n```\r\n\r\nAfter some digging, I am still not sure why this one is ignored with c++17 when 40 other`noExplicitConstructor` warnings were still appearing.\r\n\r\nIn the second commit, I fix these warnings, adding `explicit` where appropriate and adding fixes to ignore otherwise.",
          "user": {
            "login": "fjahr",
            "id": 1322187,
            "node_id": "MDQ6VXNlcjEzMjIxODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjahr",
            "html_url": "https://github.com/fjahr",
            "followers_url": "https://api.github.com/users/fjahr/followers",
            "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
            "organizations_url": "https://api.github.com/users/fjahr/orgs",
            "repos_url": "https://api.github.com/users/fjahr/repos",
            "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fjahr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 231994551,
              "node_id": "MDU6TGFiZWwyMzE5OTQ1NTE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Scripts%20and%20tools",
              "name": "Scripts and tools",
              "color": "ffffee",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20530",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/20530",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/20530.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/20530.patch"
          },
          "closed_at": "2020-12-02T12:52:45Z",
          "created_at": "2020-11-29T18:36:48Z",
          "updated_at": "2022-02-15T10:39:11Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 4056143500,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQwNTYxNDM1MDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4056143500",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-01T09:44:41Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4060153985,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDA2MDE1Mzk4NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4060153985",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-02T02:48:58Z"
    },
    {
      "event": "unlabeled",
      "id": 4060409300,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDA2MDQwOTMwMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4060409300",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-02T04:48:45Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 4062295085,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQwNjIyOTUwODU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4062295085",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-02T13:16:53Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4070799248,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDA3MDc5OTI0OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4070799248",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-04T03:16:40Z"
    },
    {
      "event": "unlabeled",
      "id": 4071032396,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDA3MTAzMjM5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4071032396",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-12-04T05:15:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 4200158700,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQyMDAxNTg3MDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4200158700",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-13T09:13:18Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4205725196,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDIwNTcyNTE5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4205725196",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-14T11:13:37Z"
    },
    {
      "event": "commented",
      "id": 760130294,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc2MDEzMDI5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/760130294",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-14T11:14:23Z",
      "updated_at": "2021-01-14T11:14:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased to deal with adjacent lines changed in #19935",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-760130294",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "unlabeled",
      "id": 4205979605,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDIwNTk3OTYwNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4205979605",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-14T12:23:26Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 569581969,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5NTgxOTY5",
      "url": null,
      "actor": null,
      "commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "utACK",
      "user": {
        "login": "felipsoarez",
        "id": 62164241,
        "node_id": "MDQ6VXNlcjYyMTY0MjQx",
        "avatar_url": "https://avatars.githubusercontent.com/u/62164241?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/felipsoarez",
        "html_url": "https://github.com/felipsoarez",
        "followers_url": "https://api.github.com/users/felipsoarez/followers",
        "following_url": "https://api.github.com/users/felipsoarez/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/felipsoarez/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/felipsoarez/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/felipsoarez/subscriptions",
        "organizations_url": "https://api.github.com/users/felipsoarez/orgs",
        "repos_url": "https://api.github.com/users/felipsoarez/repos",
        "events_url": "https://api.github.com/users/felipsoarez/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/felipsoarez/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#pullrequestreview-569581969",
      "submitted_at": "2021-01-15T20:03:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
    },
    {
      "event": "reviewed",
      "id": 569619362,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTY5NjE5MzYy",
      "url": null,
      "actor": null,
      "commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 88019f9a183d396713fd357604a6e472c5ed8807\r\n\r\nIt seems both `CTxMemPool::visited` member functions could be `private`.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#pullrequestreview-569619362",
      "submitted_at": "2021-01-15T21:46:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-16T02:56:11Z",
      "updated_at": "2021-01-16T02:56:11Z",
      "source": {
        "issue": {
          "id": 787157276,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTU1OTE2ODIw",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20944",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20944/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20944/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20944/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/20944",
          "number": 20944,
          "state": "closed",
          "state_reason": null,
          "title": "rpc: Return total fee in getmempoolinfo",
          "body": "This avoids having to loop over the whole mempool to query each entry's fee",
          "user": {
            "login": "MarcoFalke",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MarcoFalke",
            "html_url": "https://github.com/MarcoFalke",
            "followers_url": "https://api.github.com/users/MarcoFalke/followers",
            "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
            "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
            "repos_url": "https://api.github.com/users/MarcoFalke/repos",
            "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20944",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/20944",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/20944.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/20944.patch"
          },
          "closed_at": "2021-02-08T19:38:18Z",
          "created_at": "2021-01-15T19:57:10Z",
          "updated_at": "2022-08-16T17:04:03Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 4305556330,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQzMDU1NTYzMzA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4305556330",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-08T20:21:13Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzpmZDY1ODBlNDA1Njk5Y2NiMDUxZmQyYTM0NTI1ZTQ4ZDMyNTM2NzNk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fd6580e405699ccb051fd2a34525e48d3253673d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fd6580e405699ccb051fd2a34525e48d3253673d",
      "tree": {
        "sha": "e0812c48cdf0dbb5222e69b9e5ab764a9a115bbf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e0812c48cdf0dbb5222e69b9e5ab764a9a115bbf"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b09ad737eef63ee527083d9a5fafea4c2237470b",
          "sha": "b09ad737eef63ee527083d9a5fafea4c2237470b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b09ad737eef63ee527083d9a5fafea4c2237470b"
        }
      ],
      "message": "[refactor] txmempool: split epoch logic into class",
      "committer": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2021-02-09T05:10:46Z"
      },
      "author": {
        "name": "Anthony Towns",
        "email": "aj@erisian.com.au",
        "date": "2020-12-04T02:49:22Z"
      },
      "sha": "fd6580e405699ccb051fd2a34525e48d3253673d"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 4307250955,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50NDMwNzI1MDk1NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4307250955",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-09T05:37:52Z"
    },
    {
      "event": "commented",
      "id": 775682083,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc3NTY4MjA4Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/775682083",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-09T05:41:39Z",
      "updated_at": "2021-02-09T05:41:39Z",
      "author_association": "CONTRIBUTOR",
      "body": ":birthday: This PR turned 1 the other week! Rebased on top of #20944 due to header reordering, and addressed @hebasto's nits.\r\n\r\n(I think the mempool visited methods are public deliberately, so that they could be used by external functions if desired; so haven't made them private)",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-775682083",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "mentioned",
      "id": 4307261183,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDMwNzI2MTE4Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4307261183",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-09T05:41:39Z"
    },
    {
      "event": "subscribed",
      "id": 4307261189,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQzMDcyNjExODk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4307261189",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-09T05:41:39Z"
    },
    {
      "event": "unlabeled",
      "id": 4307444950,
      "node_id": "MDE0OlVubGFiZWxlZEV2ZW50NDMwNzQ0NDk1MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4307444950",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-09T06:45:05Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 776435206,
      "node_id": "MDEyOklzc3VlQ29tbWVudDc3NjQzNTIwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/776435206",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-10T04:42:30Z",
      "updated_at": "2021-02-10T04:42:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "Yes this is correct; IIRC there's some stalled out patches which require them to be visible :)",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#issuecomment-776435206",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/18017"
    },
    {
      "event": "reviewed",
      "id": 587905023,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTg3OTA1MDIz",
      "url": null,
      "actor": null,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK fd6580e405699ccb051fd2a34525e48d3253673d using clang thread safety annotations looks like a very good idea, and the encapsulation this change adds should improve robustness (and possible unit test-ability) of the code. Verified that changing some of the locking duly provoked build-time warnings with Clang 9 on Debian and that small changes in the new `Epoch` class were covered by failing functional test assertions in `mempool_updatefromblock.py`, `mempool_resurrect.py`, and `mempool_reorg.py`\r\n\r\nexample clang warning\r\n```\r\n/txmempool.h:840:24: warning: calling function 'visited' requires holding mutex 'm_epoch' exclusively [-Wthread-safety-analysis]\r\n        return m_epoch.visited(it->m_epoch_marker);\r\n```\r\n\r\nIgnore the two comments below unless you need to retouch anything (the documentation was move-only anyway).",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#pullrequestreview-587905023",
      "submitted_at": "2021-02-10T19:02:34Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
    },
    {
      "event": "reviewed",
      "id": 597200208,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3NTk3MjAwMjA4",
      "url": null,
      "actor": null,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "re-ACK fd6580e405699ccb051fd2a34525e48d3253673d, since my [previous](https://github.com/bitcoin/bitcoin/pull/18017#pullrequestreview-569619362) review:\r\n- rebased\r\n- style nits and typo addressed\r\n- added `assert(m_epoch.m_guarded);` as [suggested](https://github.com/bitcoin/bitcoin/pull/18017#discussion_r558607064)\r\n- the `Epoch` ctor is `default` now (was empty)",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#pullrequestreview-597200208",
      "submitted_at": "2021-02-24T08:12:17Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
    },
    {
      "event": "merged",
      "id": 4369686987,
      "node_id": "MDExOk1lcmdlZEV2ZW50NDM2OTY4Njk4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4369686987",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b59f2787e53318caad6d3292de2cc6e17995d277",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/b59f2787e53318caad6d3292de2cc6e17995d277",
      "created_at": "2021-02-24T08:57:57Z"
    },
    {
      "event": "closed",
      "id": 4369687004,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDM2OTY4NzAwNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4369687004",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-02-24T08:57:57Z"
    },
    {
      "event": "referenced",
      "id": 4371490664,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQzNzE0OTA2NjQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4371490664",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "866b0fef80a5dfbeecdafb002d769fde959c0ae5",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/866b0fef80a5dfbeecdafb002d769fde959c0ae5",
      "created_at": "2021-02-24T15:08:21Z"
    },
    {
      "event": "referenced",
      "id": 6380213419,
      "node_id": "REFE_lADOABII584hLYwqzwAAAAF8SlSr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6380213419",
      "actor": {
        "login": "Fabcien",
        "id": 44533924,
        "node_id": "MDQ6VXNlcjQ0NTMzOTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/44533924?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fabcien",
        "html_url": "https://github.com/Fabcien",
        "followers_url": "https://api.github.com/users/Fabcien/followers",
        "following_url": "https://api.github.com/users/Fabcien/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fabcien/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fabcien/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fabcien/subscriptions",
        "organizations_url": "https://api.github.com/users/Fabcien/orgs",
        "repos_url": "https://api.github.com/users/Fabcien/repos",
        "events_url": "https://api.github.com/users/Fabcien/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fabcien/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "d4e83e3031ce2b539e0fbb080588187a5b5fb244",
      "commit_url": "https://api.github.com/repos/Bitcoin-ABC/bitcoin-abc/commits/d4e83e3031ce2b539e0fbb080588187a5b5fb244",
      "created_at": "2022-04-06T13:31:45Z"
    },
    {
      "event": "locked",
      "id": 7199023760,
      "node_id": "LOE_lADOABII584hLYwqzwAAAAGtGGKQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7199023760",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-16T17:05:21Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429613083",
      "pull_request_review_id": 417338366,
      "id": 429613083,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYxMzA4Mw==",
      "diff_hunk": "@@ -50,6 +50,68 @@ struct LockPoints\n     LockPoints() : height(0), time(0), maxInputBlock(nullptr) { }\n };\n \n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch;\n+    bool m_guarded;\n+\n+public:\n+    Epoch() : m_raw_epoch{0}, m_guarded{false} { }",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 31,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "7485e0f9db4455212e930ba68c26daa972956faf",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Mind switching from the member initialization list to the default member initializers?",
      "created_at": "2020-05-24T08:37:48Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r429613083",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429613083"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429613209",
      "pull_request_review_id": 417338366,
      "id": 429613209,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYxMzIwOQ==",
      "diff_hunk": "@@ -50,6 +50,68 @@ struct LockPoints\n     LockPoints() : height(0), time(0), maxInputBlock(nullptr) { }\n };\n \n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch;\n+    bool m_guarded;\n+\n+public:\n+    Epoch() : m_raw_epoch{0}, m_guarded{false} { }\n+\n+    Epoch(const Epoch&) = delete; // no copy constructor\n+    Epoch& operator=(const Epoch&) = delete; // not assignable\n+\n+    bool guarded() const { return m_guarded; }\n+\n+    class Marker {\n+    private:\n+        uint64_t m_marker;\n+\n+    public:\n+        Marker() : m_marker{0} { }",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 43,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "7485e0f9db4455212e930ba68c26daa972956faf",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Mind switching from the member initialization list to the default member initializer?",
      "created_at": "2020-05-24T08:39:33Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r429613209",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429613209"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 92,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429621402",
      "pull_request_review_id": 417338366,
      "id": 429621402,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyMTQwMg==",
      "diff_hunk": "@@ -50,6 +50,68 @@ struct LockPoints\n     LockPoints() : height(0), time(0), maxInputBlock(nullptr) { }\n };\n \n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch;\n+    bool m_guarded;\n+\n+public:\n+    Epoch() : m_raw_epoch{0}, m_guarded{false} { }\n+\n+    Epoch(const Epoch&) = delete; // no copy constructor\n+    Epoch& operator=(const Epoch&) = delete; // not assignable",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 34,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "7485e0f9db4455212e930ba68c26daa972956faf",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "micro-nit: These comments are so obvious that seem redundant :)",
      "created_at": "2020-05-24T10:23:22Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r429621402",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429621402"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": 82,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429627015",
      "pull_request_review_id": 417338366,
      "id": 429627015,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyNzAxNQ==",
      "diff_hunk": "@@ -50,6 +50,68 @@ struct LockPoints\n     LockPoints() : height(0), time(0), maxInputBlock(nullptr) { }\n };\n \n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class Epoch",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 24,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "7485e0f9db4455212e930ba68c26daa972956faf",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Tested on top of the #18635, and had loads of warnings:\r\n```\r\n./txmempool.h:102:38: warning: 'exclusive_lock_function' attribute requires arguments whose type is annotated with 'capability' attribute; type here is 'Epoch' [-Wthread-safety-attributes]\r\n        explicit Guard(Epoch& epoch) EXCLUSIVE_LOCK_FUNCTION(epoch) LOCKS_EXCLUDED(epoch);\r\n                                     ^\r\n...\r\n./txmempool.h:106:40: warning: 'exclusive_locks_required' attribute requires arguments whose type is annotated with 'capability' attribute; type here is 'const Epoch' [-Wthread-safety-attributes]\r\n    bool visited(Marker& marker) const EXCLUSIVE_LOCKS_REQUIRED(*this) {\r\n                                       ^\r\n...\r\n./txmempool.h:691:121: warning: 'locks_excluded' attribute requires arguments whose type is annotated with 'capability' attribute; type here is 'Epoch' [-Wthread-safety-attributes]\r\n    void UpdateTransactionsFromBlock(const std::vector<uint256>& vHashesToUpdate) EXCLUSIVE_LOCKS_REQUIRED(cs, cs_main) LOCKS_EXCLUDED(m_epoch);\r\n                                                                                                                        ^\r\n...\r\n./txmempool.h:812:41: warning: 'exclusive_locks_required' attribute requires arguments whose type is annotated with 'capability' attribute; type here is 'Epoch' [-Wthread-safety-attributes]\r\n    bool visited(const txiter it) const EXCLUSIVE_LOCKS_REQUIRED(cs, m_epoch) {\r\n                                        ^\r\n...\r\n./txmempool.h:816:45: warning: 'exclusive_locks_required' attribute requires arguments whose type is annotated with 'capability' attribute; type here is 'Epoch' [-Wthread-safety-attributes]\r\n    bool visited(Optional<txiter> it) const EXCLUSIVE_LOCKS_REQUIRED(cs, m_epoch) {\r\n                                            ^\r\n```\r\n\r\nTo make the Clang Thread Safety Analysis work as expected I suggest: \r\n```suggestion\r\nclass LOCKABLE Epoch\r\n```\r\n\r\n_and_ change the type of the `Epoch::Guard::m_epoch` from `Epoch&` to `Epoch*`.",
      "created_at": "2020-05-24T11:33:51Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r429627015",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429627015"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 73,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429627231",
      "pull_request_review_id": 417338366,
      "id": 429627231,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQyOTYyNzIzMQ==",
      "diff_hunk": "@@ -50,6 +50,68 @@ struct LockPoints\n     LockPoints() : height(0), time(0), maxInputBlock(nullptr) { }\n };\n \n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch;\n+    bool m_guarded;\n+\n+public:\n+    Epoch() : m_raw_epoch{0}, m_guarded{false} { }\n+\n+    Epoch(const Epoch&) = delete; // no copy constructor\n+    Epoch& operator=(const Epoch&) = delete; // not assignable\n+\n+    bool guarded() const { return m_guarded; }\n+\n+    class Marker {\n+    private:\n+        uint64_t m_marker;\n+\n+    public:\n+        Marker() : m_marker{0} { }\n+\n+        friend class Epoch;\n+    };\n+\n+    class SCOPED_LOCKABLE Guard {\n+    private:\n+        Epoch& m_epoch;\n+\n+    public:\n+        explicit Guard(Epoch& epoch) EXCLUSIVE_LOCK_FUNCTION(epoch) LOCKS_EXCLUDED(epoch);",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 53,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "7485e0f9db4455212e930ba68c26daa972956faf",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "From the Thread Safety Analysis [docs](https://clang.llvm.org/docs/ThreadSafetyAnalysis.html#acquire-acquire-shared-release-release-shared):\r\n> The caller must not hold the given capability on entry\r\n\r\nIt seems `LOCKS_EXCLUDED(epoch)` is redundant, no?",
      "created_at": "2020-05-24T11:37:01Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r429627231",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/429627231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430353995",
      "pull_request_review_id": 418221221,
      "id": 430353995,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDM1Mzk5NQ==",
      "diff_hunk": "@@ -50,6 +50,68 @@ struct LockPoints\n     LockPoints() : height(0), time(0), maxInputBlock(nullptr) { }\n };\n \n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class Epoch",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 24,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "7485e0f9db4455212e930ba68c26daa972956faf",
      "in_reply_to_id": 429627015,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not seeing what benefit changing `Epoch::Guard::m_epoch` from reference to pointer would have -- the analysis shouldn't (and doesn't) treat them any different, as far as I can see?",
      "created_at": "2020-05-26T11:51:32Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r430353995",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430353995"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 73,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430479806",
      "pull_request_review_id": 418386811,
      "id": 430479806,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQzMDQ3OTgwNg==",
      "diff_hunk": "@@ -50,6 +50,68 @@ struct LockPoints\n     LockPoints() : height(0), time(0), maxInputBlock(nullptr) { }\n };\n \n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class Epoch",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 24,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "7485e0f9db4455212e930ba68c26daa972956faf",
      "in_reply_to_id": 429627015,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Indeed :)\r\nIDK why I saw warnings...",
      "created_at": "2020-05-26T14:59:56Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r430479806",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/430479806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 73,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486785464",
      "pull_request_review_id": 486487328,
      "id": 486785464,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc4NTQ2NA==",
      "diff_hunk": "@@ -63,6 +63,64 @@ struct CompareIteratorByHash {\n         return a->GetTx().GetHash() < b->GetTx().GetHash();\n     }\n };\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 36,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is this used?",
      "created_at": "2020-09-11T05:41:41Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r486785464",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486785464"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486785695",
      "pull_request_review_id": 486487328,
      "id": 486785695,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc4NTY5NQ==",
      "diff_hunk": "@@ -63,6 +63,64 @@ struct CompareIteratorByHash {\n         return a->GetTx().GetHash() < b->GetTx().GetHash();\n     }\n };\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 36,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "in_reply_to_id": 486785464,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "(I'm fine leaving it if it isn't used, just curious).",
      "created_at": "2020-09-11T05:42:24Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r486785695",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486785695"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486788819",
      "pull_request_review_id": 486487328,
      "id": 486788819,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc4ODgxOQ==",
      "diff_hunk": "@@ -63,6 +63,64 @@ struct CompareIteratorByHash {\n         return a->GetTx().GetHash() < b->GetTx().GetHash();\n     }\n };\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }\n+\n+    class Marker {\n+    private:\n+        uint64_t m_marker = 0;\n+        friend class Epoch;\n+    };\n+\n+    class SCOPED_LOCKABLE Guard {\n+    private:\n+        Epoch& m_epoch;\n+\n+    public:\n+        explicit Guard(Epoch& epoch) EXCLUSIVE_LOCK_FUNCTION(epoch);\n+        ~Guard() UNLOCK_FUNCTION();\n+    };\n+\n+    bool visited(Marker& marker) const EXCLUSIVE_LOCKS_REQUIRED(*this) {\n+        assert(m_guarded);\n+        bool ret = marker.m_marker >= m_raw_epoch;\n+        if (!ret) marker.m_marker = m_raw_epoch;\n+        return ret;\n+    }",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 58,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: how would you feel about:\r\n\r\n```\r\nuint64_t marker_old = marker.m_marker;\r\nmarker.m_marker = std::max(marker.m_marker, m_raw_epoch);\r\nreturn marker.m_marker != marker_old;\r\n```\r\n\r\nfor whatever reason I find it easier to read/reason about when we always set it to max.",
      "created_at": "2020-09-11T05:52:31Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r486788819",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486788819"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486790383",
      "pull_request_review_id": 486487328,
      "id": 486790383,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4Njc5MDM4Mw==",
      "diff_hunk": "@@ -1113,22 +1113,17 @@ void CTxMemPool::SetIsLoaded(bool loaded)\n }\n \n \n-CTxMemPool::EpochGuard CTxMemPool::GetFreshEpoch() const\n+Epoch::Guard::Guard(Epoch& epoch) : m_epoch(epoch)",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe best to move this into it's own header-only file/all headers to minimize conflict with #17786?",
      "created_at": "2020-09-11T05:57:40Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r486790383",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/486790383"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1116,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488334488",
      "pull_request_review_id": 488267663,
      "id": 488334488,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODMzNDQ4OA==",
      "diff_hunk": "@@ -63,6 +63,64 @@ struct CompareIteratorByHash {\n         return a->GetTx().GetHash() < b->GetTx().GetHash();\n     }\n };\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 36,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "in_reply_to_id": 486785464,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There's an `assert(m_epoch.guarded());` in `CTxMemPool::visited(Optional<txiter> it)` to check the lock's held in the case where `it->visited` isn't called.",
      "created_at": "2020-09-15T01:52:04Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r488334488",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488334488"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488339385",
      "pull_request_review_id": 488272985,
      "id": 488339385,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODMzOTM4NQ==",
      "diff_hunk": "@@ -63,6 +63,64 @@ struct CompareIteratorByHash {\n         return a->GetTx().GetHash() < b->GetTx().GetHash();\n     }\n };\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }\n+\n+    class Marker {\n+    private:\n+        uint64_t m_marker = 0;\n+        friend class Epoch;\n+    };\n+\n+    class SCOPED_LOCKABLE Guard {\n+    private:\n+        Epoch& m_epoch;\n+\n+    public:\n+        explicit Guard(Epoch& epoch) EXCLUSIVE_LOCK_FUNCTION(epoch);\n+        ~Guard() UNLOCK_FUNCTION();\n+    };\n+\n+    bool visited(Marker& marker) const EXCLUSIVE_LOCKS_REQUIRED(*this) {\n+        assert(m_guarded);\n+        bool ret = marker.m_marker >= m_raw_epoch;\n+        if (!ret) marker.m_marker = m_raw_epoch;\n+        return ret;\n+    }",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 58,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "in_reply_to_id": 486788819,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That reverses the logic (`ret == false` causes `m_marker` to change originally, but your code returns `true` if `m_marker` changed) ? Seems like that's evidence it's not that easy to read/reason about? :)\r\n\r\nIt might be less confusing to write it out in full:\r\n\r\n```c++\r\nif (marker.m_marker < m_raw_epoch ) {\r\n    // this entry is from an earlier epoch, so it hasn't been visited\r\n    marker.m_marker = m_raw_epoch;\r\n    return false;\r\n} else {\r\n    return true;\r\n}\r\n```\r\n\r\nI'd guess the compiler will make all these variants essentially the same anyway, so no objection to any variation from me.",
      "created_at": "2020-09-15T02:09:23Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r488339385",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488339385"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488347408",
      "pull_request_review_id": 488282100,
      "id": 488347408,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM0NzQwOA==",
      "diff_hunk": "@@ -63,6 +63,64 @@ struct CompareIteratorByHash {\n         return a->GetTx().GetHash() < b->GetTx().GetHash();\n     }\n };\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }\n+\n+    class Marker {\n+    private:\n+        uint64_t m_marker = 0;\n+        friend class Epoch;\n+    };\n+\n+    class SCOPED_LOCKABLE Guard {\n+    private:\n+        Epoch& m_epoch;\n+\n+    public:\n+        explicit Guard(Epoch& epoch) EXCLUSIVE_LOCK_FUNCTION(epoch);\n+        ~Guard() UNLOCK_FUNCTION();\n+    };\n+\n+    bool visited(Marker& marker) const EXCLUSIVE_LOCKS_REQUIRED(*this) {\n+        assert(m_guarded);\n+        bool ret = marker.m_marker >= m_raw_epoch;\n+        if (!ret) marker.m_marker = m_raw_epoch;\n+        return ret;\n+    }",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 58,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "in_reply_to_id": 486788819,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ah my bad, I've made a case against myself -- for what it's worth, I made the proposed version by translating your proposed version, which I have trouble parsing logically, and thought it was equivalent to that logic (and still can't figure out the concrete reason it's opposite).\r\n\r\nI'm fine with the completely written out version as it is the most obvious for sleepy brains like mine.",
      "created_at": "2020-09-15T02:37:57Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r488347408",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488347408"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488358871",
      "pull_request_review_id": 488294821,
      "id": 488358871,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM1ODg3MQ==",
      "diff_hunk": "@@ -63,6 +63,64 @@ struct CompareIteratorByHash {\n         return a->GetTx().GetHash() < b->GetTx().GetHash();\n     }\n };\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }\n+\n+    class Marker {\n+    private:\n+        uint64_t m_marker = 0;\n+        friend class Epoch;\n+    };\n+\n+    class SCOPED_LOCKABLE Guard {\n+    private:\n+        Epoch& m_epoch;\n+\n+    public:\n+        explicit Guard(Epoch& epoch) EXCLUSIVE_LOCK_FUNCTION(epoch);\n+        ~Guard() UNLOCK_FUNCTION();\n+    };\n+\n+    bool visited(Marker& marker) const EXCLUSIVE_LOCKS_REQUIRED(*this) {\n+        assert(m_guarded);\n+        bool ret = marker.m_marker >= m_raw_epoch;\n+        if (!ret) marker.m_marker = m_raw_epoch;\n+        return ret;\n+    }",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 58,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "in_reply_to_id": 486788819,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think the translation goes:\r\n\r\n- `r = a >= b; if (!r) a = b; return r;`  (current)\r\n- `o = a; if (! (a >= b)) a = b; return o >= b;`   (store old value, replace `r`)\r\n- `o = a; if (a < b) a = b; return !(o < b);`  (switch to less than)\r\n- `o = a; a = max(a,b); return !(o != a);`  (`o < b` iff the if was taken, and `a` was changed)\r\n- `o = a; a = max(a,b); return o == a;`  (simplify)\r\n\r\nAnyway, changed to KISS version.",
      "created_at": "2020-09-15T03:20:48Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r488358871",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488358871"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488358955",
      "pull_request_review_id": 488294926,
      "id": 488358955,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODM1ODk1NQ==",
      "diff_hunk": "@@ -1113,22 +1113,17 @@ void CTxMemPool::SetIsLoaded(bool loaded)\n }\n \n \n-CTxMemPool::EpochGuard CTxMemPool::GetFreshEpoch() const\n+Epoch::Guard::Guard(Epoch& epoch) : m_epoch(epoch)",
      "path": "src/txmempool.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "c95663c9350735a6200f9d29a1d8ac0ca8d41a4c",
      "in_reply_to_id": 486790383,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Moved into util/epochguard.h",
      "created_at": "2020-09-15T03:21:04Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r488358955",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488358955"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1116,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488785835",
      "pull_request_review_id": 488839517,
      "id": 488785835,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDQ4ODc4NTgzNQ==",
      "diff_hunk": "@@ -814,52 +815,20 @@ class CTxMemPool\n      */\n     void removeUnchecked(txiter entry, MemPoolRemovalReason reason) EXCLUSIVE_LOCKS_REQUIRED(cs);\n public:\n-    /** EpochGuard: RAII-style guard for using epoch-based graph traversal algorithms.\n-     *     When walking ancestors or descendants, we generally want to avoid\n-     * visiting the same transactions twice. Some traversal algorithms use\n-     * std::set (or setEntries) to deduplicate the transaction we visit.\n-     * However, use of std::set is algorithmically undesirable because it both\n-     * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n-     * more dynamic memory allocations.\n-     *     In many algorithms we can replace std::set with an internal mempool\n-     * counter to track the time (or, \"epoch\") that we began a traversal, and\n-     * check + update a per-transaction epoch for each transaction we look at to\n-     * determine if that transaction has not yet been visited during the current\n-     * traversal's epoch.\n-     *     Algorithms using std::set can be replaced on a one by one basis.\n-     * Both techniques are not fundamentally incompatible across the codebase.\n-     * Generally speaking, however, the remaining use of std::set for mempool\n-     * traversal should be viewed as a TODO for replacement with an epoch based\n-     * traversal, rather than a preference for std::set over epochs in that\n-     * algorithm.\n-     */\n-    class EpochGuard {\n-        const CTxMemPool& pool;\n-        public:\n-        EpochGuard(const CTxMemPool& in);\n-        ~EpochGuard();\n-    };\n-    // N.B. GetFreshEpoch modifies mutable state via the EpochGuard construction\n-    // (and later destruction)\n-    EpochGuard GetFreshEpoch() const EXCLUSIVE_LOCKS_REQUIRED(cs);\n-\n     /** visited marks a CTxMemPoolEntry as having been traversed\n-     * during the lifetime of the most recently created EpochGuard\n+     * during the lifetime of the most recently created Epoch::Guard\n      * and returns false if we are the first visitor, true otherwise.\n      *\n-     * An EpochGuard must be held when visited is called or an assert will be\n+     * An Epoch::Guard must be held when visited is called or an assert will be\n      * triggered.\n      *\n      */\n-    bool visited(txiter it) const EXCLUSIVE_LOCKS_REQUIRED(cs) {\n-        assert(m_has_epoch_guard);\n-        bool ret = it->m_epoch >= m_epoch;\n-        it->m_epoch = std::max(it->m_epoch, m_epoch);\n-        return ret;\n+    bool visited(const txiter it) const EXCLUSIVE_LOCKS_REQUIRED(cs, m_epoch) {\n+        return m_epoch.visited(it->m_epoch_marker);\n     }\n \n-    bool visited(Optional<txiter> it) const EXCLUSIVE_LOCKS_REQUIRED(cs) {\n-        assert(m_has_epoch_guard);\n+    bool visited(Optional<txiter> it) const EXCLUSIVE_LOCKS_REQUIRED(cs, m_epoch) {\n+        assert(m_epoch.guarded());",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 99,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "55c1c7e5db72a343936487c03d555974f97daaf5",
      "in_reply_to_id": null,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "micronit: may be worth adding a comment here that the assert is redundant when it != nullopt, but is used for consistency when it == nullopt.",
      "created_at": "2020-09-15T16:04:41Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r488785835",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/488785835"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 831,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558593664",
      "pull_request_review_id": 569619362,
      "id": 558593664,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODU5MzY2NA==",
      "diff_hunk": "@@ -21,6 +21,7 @@\n #include <primitives/transaction.h>\n #include <sync.h>\n #include <random.h>\n+#include <util/epochguard.h>",
      "path": "src/txmempool.h",
      "position": 4,
      "original_position": 4,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "style nit: while touching headers they could be sorted:\r\n```\r\n#include <random.h>\r\n#include <sync.h>\r\n#include <util/epochguard.h>\r\n```",
      "created_at": "2021-01-15T21:09:00Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r558593664",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558593664"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558595243",
      "pull_request_review_id": 569619362,
      "id": 558595243,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODU5NTI0Mw==",
      "diff_hunk": "@@ -819,52 +820,20 @@ class CTxMemPool\n      */\n     void removeUnchecked(txiter entry, MemPoolRemovalReason reason) EXCLUSIVE_LOCKS_REQUIRED(cs);\n public:\n-    /** EpochGuard: RAII-style guard for using epoch-based graph traversal algorithms.\n-     *     When walking ancestors or descendants, we generally want to avoid\n-     * visiting the same transactions twice. Some traversal algorithms use\n-     * std::set (or setEntries) to deduplicate the transaction we visit.\n-     * However, use of std::set is algorithmically undesirable because it both\n-     * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n-     * more dynamic memory allocations.\n-     *     In many algorithms we can replace std::set with an internal mempool\n-     * counter to track the time (or, \"epoch\") that we began a traversal, and\n-     * check + update a per-transaction epoch for each transaction we look at to\n-     * determine if that transaction has not yet been visited during the current\n-     * traversal's epoch.\n-     *     Algorithms using std::set can be replaced on a one by one basis.\n-     * Both techniques are not fundamentally incompatible across the codebase.\n-     * Generally speaking, however, the remaining use of std::set for mempool\n-     * traversal should be viewed as a TODO for replacement with an epoch based\n-     * traversal, rather than a preference for std::set over epochs in that\n-     * algorithm.\n-     */\n-    class EpochGuard {\n-        const CTxMemPool& pool;\n-        public:\n-        explicit EpochGuard(const CTxMemPool& in);\n-        ~EpochGuard();\n-    };\n-    // N.B. GetFreshEpoch modifies mutable state via the EpochGuard construction\n-    // (and later destruction)\n-    EpochGuard GetFreshEpoch() const EXCLUSIVE_LOCKS_REQUIRED(cs);\n-\n     /** visited marks a CTxMemPoolEntry as having been traversed\n-     * during the lifetime of the most recently created EpochGuard\n+     * during the lifetime of the most recently created Epoch::Guard\n      * and returns false if we are the first visitor, true otherwise.\n      *\n-     * An EpochGuard must be held when visited is called or an assert will be\n+     * An Epoch::Guard must be held when visited is called or an assert will be\n      * triggered.\n      *\n      */\n-    bool visited(txiter it) const EXCLUSIVE_LOCKS_REQUIRED(cs) {\n-        assert(m_has_epoch_guard);\n-        bool ret = it->m_epoch >= m_epoch;\n-        it->m_epoch = std::max(it->m_epoch, m_epoch);\n-        return ret;\n+    bool visited(const txiter it) const EXCLUSIVE_LOCKS_REQUIRED(cs, m_epoch) {",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 92,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "style nit, suggested by `clang-format`:\r\n```suggestion\r\n    bool visited(const txiter it) const EXCLUSIVE_LOCKS_REQUIRED(cs, m_epoch)\r\n    {\r\n```",
      "created_at": "2021-01-15T21:13:01Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r558595243",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558595243"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 831,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558595646",
      "pull_request_review_id": 569619362,
      "id": 558595646,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODU5NTY0Ng==",
      "diff_hunk": "@@ -819,52 +820,20 @@ class CTxMemPool\n      */\n     void removeUnchecked(txiter entry, MemPoolRemovalReason reason) EXCLUSIVE_LOCKS_REQUIRED(cs);\n public:\n-    /** EpochGuard: RAII-style guard for using epoch-based graph traversal algorithms.\n-     *     When walking ancestors or descendants, we generally want to avoid\n-     * visiting the same transactions twice. Some traversal algorithms use\n-     * std::set (or setEntries) to deduplicate the transaction we visit.\n-     * However, use of std::set is algorithmically undesirable because it both\n-     * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n-     * more dynamic memory allocations.\n-     *     In many algorithms we can replace std::set with an internal mempool\n-     * counter to track the time (or, \"epoch\") that we began a traversal, and\n-     * check + update a per-transaction epoch for each transaction we look at to\n-     * determine if that transaction has not yet been visited during the current\n-     * traversal's epoch.\n-     *     Algorithms using std::set can be replaced on a one by one basis.\n-     * Both techniques are not fundamentally incompatible across the codebase.\n-     * Generally speaking, however, the remaining use of std::set for mempool\n-     * traversal should be viewed as a TODO for replacement with an epoch based\n-     * traversal, rather than a preference for std::set over epochs in that\n-     * algorithm.\n-     */\n-    class EpochGuard {\n-        const CTxMemPool& pool;\n-        public:\n-        explicit EpochGuard(const CTxMemPool& in);\n-        ~EpochGuard();\n-    };\n-    // N.B. GetFreshEpoch modifies mutable state via the EpochGuard construction\n-    // (and later destruction)\n-    EpochGuard GetFreshEpoch() const EXCLUSIVE_LOCKS_REQUIRED(cs);\n-\n     /** visited marks a CTxMemPoolEntry as having been traversed\n-     * during the lifetime of the most recently created EpochGuard\n+     * during the lifetime of the most recently created Epoch::Guard\n      * and returns false if we are the first visitor, true otherwise.\n      *\n-     * An EpochGuard must be held when visited is called or an assert will be\n+     * An Epoch::Guard must be held when visited is called or an assert will be\n      * triggered.\n      *\n      */\n-    bool visited(txiter it) const EXCLUSIVE_LOCKS_REQUIRED(cs) {\n-        assert(m_has_epoch_guard);\n-        bool ret = it->m_epoch >= m_epoch;\n-        it->m_epoch = std::max(it->m_epoch, m_epoch);\n-        return ret;\n+    bool visited(const txiter it) const EXCLUSIVE_LOCKS_REQUIRED(cs, m_epoch) {\n+        return m_epoch.visited(it->m_epoch_marker);\n     }\n \n-    bool visited(Optional<txiter> it) const EXCLUSIVE_LOCKS_REQUIRED(cs) {\n-        assert(m_has_epoch_guard);\n+    bool visited(Optional<txiter> it) const EXCLUSIVE_LOCKS_REQUIRED(cs, m_epoch) {",
      "path": "src/txmempool.h",
      "position": null,
      "original_position": 98,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "style nit, suggested by `clang-format`:\r\n```suggestion\r\n    bool visited(Optional<txiter> it) const EXCLUSIVE_LOCKS_REQUIRED(cs, m_epoch)\r\n    {\r\n```",
      "created_at": "2021-01-15T21:14:04Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r558595646",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558595646"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 835,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558595862",
      "pull_request_review_id": 569619362,
      "id": 558595862,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODU5NTg2Mg==",
      "diff_hunk": "@@ -0,0 +1,88 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_EPOCHGUARD_H\n+#define BITCOIN_UTIL_EPOCHGUARD_H\n+\n+#include <threadsafety.h>\n+\n+#include <cassert>\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }",
      "path": "src/util/epochguard.h",
      "position": null,
      "original_position": 40,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "style nit, suggested by `clang-format`:\r\n```suggestion\r\n    Epoch() {}\r\n```",
      "created_at": "2021-01-15T21:14:35Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r558595862",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558595862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 40,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558596003",
      "pull_request_review_id": 569619362,
      "id": 558596003,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODU5NjAwMw==",
      "diff_hunk": "@@ -0,0 +1,88 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_EPOCHGUARD_H\n+#define BITCOIN_UTIL_EPOCHGUARD_H\n+\n+#include <threadsafety.h>\n+\n+#include <cassert>\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }\n+\n+    class Marker {",
      "path": "src/util/epochguard.h",
      "position": null,
      "original_position": 46,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "style nit, suggested by `clang-format`:\r\n```suggestion\r\n    class Marker\r\n    {\r\n```",
      "created_at": "2021-01-15T21:14:58Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r558596003",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558596003"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558596167",
      "pull_request_review_id": 569619362,
      "id": 558596167,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODU5NjE2Nw==",
      "diff_hunk": "@@ -0,0 +1,88 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_EPOCHGUARD_H\n+#define BITCOIN_UTIL_EPOCHGUARD_H\n+\n+#include <threadsafety.h>\n+\n+#include <cassert>\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }\n+\n+    class Marker {\n+    private:\n+        uint64_t m_marker = 0;\n+\n+        // only allow modification via Epoch member functions\n+        friend class Epoch;\n+        Marker& operator=(const Marker&) = delete;\n+    };\n+\n+    class SCOPED_LOCKABLE Guard {",
      "path": "src/util/epochguard.h",
      "position": null,
      "original_position": 55,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "style nit, suggested by `clang-format`:\r\n```suggestion\r\n    class SCOPED_LOCKABLE Guard\r\n    {\r\n```",
      "created_at": "2021-01-15T21:15:22Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r558596167",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558596167"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 55,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558596990",
      "pull_request_review_id": 569619362,
      "id": 558596990,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODU5Njk5MA==",
      "diff_hunk": "@@ -0,0 +1,88 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_EPOCHGUARD_H\n+#define BITCOIN_UTIL_EPOCHGUARD_H\n+\n+#include <threadsafety.h>\n+\n+#include <cassert>\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)",
      "path": "src/util/epochguard.h",
      "position": null,
      "original_position": 18,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "typo, https://github.com/bitcoin/bitcoin/pull/17925#discussion_r374052497:\r\n```suggestion\r\n * adds an asymptotic factor of O(log n) to traversals cost and triggers O(n)\r\n```",
      "created_at": "2021-01-15T21:17:15Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r558596990",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558596990"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 18,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558607064",
      "pull_request_review_id": 569619362,
      "id": 558607064,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU1ODYwNzA2NA==",
      "diff_hunk": "@@ -0,0 +1,88 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_EPOCHGUARD_H\n+#define BITCOIN_UTIL_EPOCHGUARD_H\n+\n+#include <threadsafety.h>\n+\n+#include <cassert>\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traverals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based\n+ * traversal, rather than a preference for std::set over epochs in that\n+ * algorithm.\n+ */\n+\n+class LOCKABLE Epoch\n+{\n+private:\n+    uint64_t m_raw_epoch = 0;\n+    bool m_guarded = false;\n+\n+public:\n+    Epoch() { }\n+    Epoch(const Epoch&) = delete;\n+    Epoch& operator=(const Epoch&) = delete;\n+\n+    bool guarded() const { return m_guarded; }\n+\n+    class Marker {\n+    private:\n+        uint64_t m_marker = 0;\n+\n+        // only allow modification via Epoch member functions\n+        friend class Epoch;\n+        Marker& operator=(const Marker&) = delete;\n+    };\n+\n+    class SCOPED_LOCKABLE Guard {\n+    private:\n+        Epoch& m_epoch;\n+\n+    public:\n+        explicit Guard(Epoch& epoch) EXCLUSIVE_LOCK_FUNCTION(epoch) : m_epoch(epoch)\n+        {\n+            assert(!m_epoch.m_guarded);\n+            ++m_epoch.m_raw_epoch;\n+            m_epoch.m_guarded = true;\n+        }\n+        ~Guard() UNLOCK_FUNCTION()\n+        {\n+            ++m_epoch.m_raw_epoch; // ensure clear separation between epochs",
      "path": "src/util/epochguard.h",
      "position": null,
      "original_position": 68,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "in_reply_to_id": null,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        {\r\n            assert(m_epoch.m_guarded);\r\n            ++m_epoch.m_raw_epoch; // ensure clear separation between epochs\r\n```",
      "created_at": "2021-01-15T21:40:39Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r558607064",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/558607064"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": 67,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 71,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572593067",
      "pull_request_review_id": 586178649,
      "id": 572593067,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3MjU5MzA2Nw==",
      "diff_hunk": "@@ -21,6 +21,7 @@\n #include <primitives/transaction.h>\n #include <sync.h>\n #include <random.h>\n+#include <util/epochguard.h>",
      "path": "src/txmempool.h",
      "position": 4,
      "original_position": 4,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "88019f9a183d396713fd357604a6e472c5ed8807",
      "in_reply_to_id": 558593664,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Sorted in #20944",
      "created_at": "2021-02-09T04:53:23Z",
      "updated_at": "2021-02-09T05:37:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r572593067",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/572593067"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573958822",
      "pull_request_review_id": 587905023,
      "id": 573958822,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3Mzk1ODgyMg==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_EPOCHGUARD_H\n+#define BITCOIN_UTIL_EPOCHGUARD_H\n+\n+#include <threadsafety.h>\n+\n+#include <cassert>\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traversals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and",
      "path": "src/util/epochguard.h",
      "position": 21,
      "original_position": 21,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n * counter to track the time (or, \"epoch\") that we began a traversal and\r\n```",
      "created_at": "2021-02-10T18:10:07Z",
      "updated_at": "2021-02-10T19:02:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r573958822",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573958822"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 21,
      "original_line": 21,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573959000",
      "pull_request_review_id": 587905023,
      "id": 573959000,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDU3Mzk1OTAwMA==",
      "diff_hunk": "@@ -0,0 +1,91 @@\n+// Copyright (c) 2009-2010 Satoshi Nakamoto\n+// Copyright (c) 2009-2020 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_EPOCHGUARD_H\n+#define BITCOIN_UTIL_EPOCHGUARD_H\n+\n+#include <threadsafety.h>\n+\n+#include <cassert>\n+\n+/** Epoch: RAII-style guard for using epoch-based graph traversal algorithms.\n+ *     When walking ancestors or descendants, we generally want to avoid\n+ * visiting the same transactions twice. Some traversal algorithms use\n+ * std::set (or setEntries) to deduplicate the transaction we visit.\n+ * However, use of std::set is algorithmically undesirable because it both\n+ * adds an asymptotic factor of O(log n) to traversals cost and triggers O(n)\n+ * more dynamic memory allocations.\n+ *     In many algorithms we can replace std::set with an internal mempool\n+ * counter to track the time (or, \"epoch\") that we began a traversal, and\n+ * check + update a per-transaction epoch for each transaction we look at to\n+ * determine if that transaction has not yet been visited during the current\n+ * traversal's epoch.\n+ *     Algorithms using std::set can be replaced on a one by one basis.\n+ * Both techniques are not fundamentally incompatible across the codebase.\n+ * Generally speaking, however, the remaining use of std::set for mempool\n+ * traversal should be viewed as a TODO for replacement with an epoch based",
      "path": "src/util/epochguard.h",
      "position": 28,
      "original_position": 28,
      "commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "original_commit_id": "fd6580e405699ccb051fd2a34525e48d3253673d",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n * traversal should be viewed as a TODO for replacement with an epoch-based\r\n```",
      "created_at": "2021-02-10T18:10:20Z",
      "updated_at": "2021-02-10T19:02:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/18017#discussion_r573959000",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/573959000"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/18017"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    }
  ]
}