{
  "type": "issue",
  "issue": {
    "id": 729097256,
    "node_id": "MDU6SXNzdWU3MjkwOTcyNTY=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20239",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20239/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20239/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20239/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/20239",
    "number": 20239,
    "state": "closed",
    "state_reason": "completed",
    "title": "Hardcoded seeds for Torv3 addresses",
    "body": "For the 0.22 release we'll want to start hardcoding Torv3 addresses instead of (or in addition to) Torv2.\r\n\r\nThe biggest challenge here is not how to hardcode them, although that will require a few minor script and code changes, but how to collect them. The release process is to get the addresses from DNS seeders, however these currently don't support the `addrv2` message nor Torv3 addresses in the first place. Nor do they really have a need to.",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      },
      {
        "id": 64584,
        "node_id": "MDU6TGFiZWw2NDU4NA==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
        "name": "Brainstorming",
        "color": "ebd775",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/47",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/47",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/47/labels",
      "id": 5347322,
      "node_id": "MDk6TWlsZXN0b25lNTM0NzMyMg==",
      "number": 47,
      "state": "closed",
      "title": "22.0",
      "description": "",
      "creator": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 0,
      "closed_issues": 124,
      "created_at": "2020-04-25T00:14:49Z",
      "updated_at": "2021-09-14T07:16:53Z",
      "closed_at": "2021-09-09T12:47:52Z"
    },
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 3,
    "closed_at": "2021-04-06T08:48:05Z",
    "created_at": "2020-10-25T19:41:27Z",
    "updated_at": "2022-08-18T18:34:55Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 3918159050,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM5MTgxNTkwNTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3918159050",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-25T19:41:27Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "labeled",
      "id": 3918159051,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDM5MTgxNTkwNTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3918159051",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-25T19:41:27Z",
      "label": {
        "name": "Brainstorming",
        "color": "ebd775"
      }
    },
    {
      "event": "milestoned",
      "id": 3918159053,
      "node_id": "MDE1Ok1pbGVzdG9uZWRFdmVudDM5MTgxNTkwNTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3918159053",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-25T19:41:27Z",
      "milestone": {
        "title": "22.0"
      }
    },
    {
      "event": "commented",
      "id": 716208224,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjIwODIyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/716208224",
      "actor": {
        "login": "Saibato",
        "id": 34917548,
        "node_id": "MDQ6VXNlcjM0OTE3NTQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/34917548?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Saibato",
        "html_url": "https://github.com/Saibato",
        "followers_url": "https://api.github.com/users/Saibato/followers",
        "following_url": "https://api.github.com/users/Saibato/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Saibato/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Saibato/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Saibato/subscriptions",
        "organizations_url": "https://api.github.com/users/Saibato/orgs",
        "repos_url": "https://api.github.com/users/Saibato/repos",
        "events_url": "https://api.github.com/users/Saibato/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Saibato/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-25T20:37:40Z",
      "updated_at": "2020-10-25T20:46:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "We would have non of this problems, if we had just encoded one v3 address in 3 or 4 ipv6 ADDR messages with some checksum and hash sort indexes btw.\r\n\r\nBut its not to late to use this method to hard encode them and have with some minor changes in the seeders software a DNS A/AAAA  compatible way,\r\nIf we don't want to use SRV records, what is even a greater hassle, \r\n\r\nOn the other hand, since we seed with Tor only anyway with ADDR or ADDRv2 messages we learn form the first ipv4 or ipv6 DNS response when we try to resolve the seeders FQDN.\r\nWe could just call them directly over a Tor onion address,  its almost the same outcome.\r\nand we would stay in Tor and not use exit nodes,\r\nSome or one seeder must only update one of there nodes and learn from the ADDRv2 messages.\r\nThat should build up fast if ppl use 0.21.and gossip ADDRv2\r\nIf we call then these v3 node directly on first virgin bootstrap, by  just add them to the seeds list like we do with signet we stay in Tor and bootstrap with learned v3 addresses and leak even less,\r\nFor storage in the code we would just add onion as the fqdn in the list that is only a minor change, since vseeds can hold even now fqdn like the seeders name. \r\n\r\nOr we use the lightning method ref in #20175 to collect them.",
      "user": {
        "login": "Saibato",
        "id": 34917548,
        "node_id": "MDQ6VXNlcjM0OTE3NTQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/34917548?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Saibato",
        "html_url": "https://github.com/Saibato",
        "followers_url": "https://api.github.com/users/Saibato/followers",
        "following_url": "https://api.github.com/users/Saibato/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Saibato/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Saibato/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Saibato/subscriptions",
        "organizations_url": "https://api.github.com/users/Saibato/orgs",
        "repos_url": "https://api.github.com/users/Saibato/repos",
        "events_url": "https://api.github.com/users/Saibato/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Saibato/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/20239#issuecomment-716208224",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20239"
    },
    {
      "event": "commented",
      "id": 716210958,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjIxMDk1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/716210958",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-25T20:58:02Z",
      "updated_at": "2020-10-25T21:16:04Z",
      "author_association": "MEMBER",
      "body": "> We would have non of this problems, if we had just encoded one v3 address in 3 or 4 ipv6 ADDR messages with some checksum and hash sort indexes btw.\r\n\r\nI don't think there's any guarantee for intermediate DNS servers to keep the results in the same order, or even not to remove results. But it doesn't matter, it's a red herring in the first place: there is no a reason to serve them over DNS. A node behind Tor can't do the kind of DNS lookup that returns multiple results.\r\n\r\nDespite that, the DNS seeder 'network exploration' code could still collect them, in principle, for the purpose of making a list of hardcoded seeds and for statistics.\r\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/20239#issuecomment-716210958",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20239"
    },
    {
      "event": "commented",
      "id": 716213688,
      "node_id": "MDEyOklzc3VlQ29tbWVudDcxNjIxMzY4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/716213688",
      "actor": {
        "login": "Saibato",
        "id": 34917548,
        "node_id": "MDQ6VXNlcjM0OTE3NTQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/34917548?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Saibato",
        "html_url": "https://github.com/Saibato",
        "followers_url": "https://api.github.com/users/Saibato/followers",
        "following_url": "https://api.github.com/users/Saibato/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Saibato/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Saibato/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Saibato/subscriptions",
        "organizations_url": "https://api.github.com/users/Saibato/orgs",
        "repos_url": "https://api.github.com/users/Saibato/repos",
        "events_url": "https://api.github.com/users/Saibato/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Saibato/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-25T21:20:09Z",
      "updated_at": "2020-10-25T21:55:43Z",
      "author_association": "CONTRIBUTOR",
      "body": ">  A node behind Tor can't do the kind of DNS lookup that returns multiple results.\r\n\r\nExactly that's my point all the time and its even hard to say if a rouge exit node give us even the first and only entry correct when we resolve the seeders names indirect over Tor to get a socket for our seeders name ( could be the first entry of the DNS call that the exit makes for himself or anything else ) or that the exit give us even the correct socket on return to a real bitcoin full node and because Tor only nodes would have and do bootstrap anyway over ADDR messages by the socket returned when we ask for seeder names or if we use the hard encoding, if we say -dnsseed=0, we could have just called seeders Tor addresses full nodes in Tor always directly and have let all other ip4/ip6 nodes give us dns A/AAAAA records as is learend from seeders or gossip and encoding v3 in AAAA and btw we would also be backwards compatible, if old node would run script and generate a connect or addnode list?\r\n\r\n> servers to keep the results in the same order\r\n\r\nThat's why we would have needed some hashing and sortindex, redundancy to reassemble them correctly like a protocol that hides in a protocol. if we would  have used the old A/AAAA aproach ",
      "user": {
        "login": "Saibato",
        "id": 34917548,
        "node_id": "MDQ6VXNlcjM0OTE3NTQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/34917548?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Saibato",
        "html_url": "https://github.com/Saibato",
        "followers_url": "https://api.github.com/users/Saibato/followers",
        "following_url": "https://api.github.com/users/Saibato/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Saibato/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Saibato/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Saibato/subscriptions",
        "organizations_url": "https://api.github.com/users/Saibato/orgs",
        "repos_url": "https://api.github.com/users/Saibato/repos",
        "events_url": "https://api.github.com/users/Saibato/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Saibato/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/20239#issuecomment-716213688",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20239"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-10-29T10:37:51Z",
      "updated_at": "2020-10-29T10:37:51Z",
      "source": {
        "issue": {
          "id": 501439297,
          "node_id": "MDU6SXNzdWU1MDE0MzkyOTc=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17020",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17020/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17020/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/17020/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/17020",
          "number": 17020,
          "state": "open",
          "state_reason": null,
          "title": "contrib: makeseeds.py improvements",
          "body": "Some suggestions for improvements, or at least for discussion between major releases:\r\n\r\n\r\n- [x] Read [suspicious hosts](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-536869449)  from a file (done in #17823, removed completely in #24862)\r\n- [x] [Determinism](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-537070141) could be improved (this is useful for cross-checking)\r\n    - [x] Read ASNs from a file (Done in #24864)\r\n    - [x] Per-ASN limit [isn't consistently enforced?](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-537173086)\r\n- [x] [A max of 2 seeds per ASN seems a bit strict](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-536999544) at lest for IPv6 (done in #24818)\r\n- [x] [Should we bump MIN_BLOCKS?](https://github.com/bitcoin/bitcoin/pull/16999#issuecomment-536999544) (done in #24818)\r\n- [x] Some [typos](https://github.com/bitcoin/bitcoin/pull/16999#pullrequestreview-295794240) in the comments\r\n- [x] Handle and hardcode TorV3 peers (after #19954), see #20239\r\n- [ ] Bring back onion functionality past TorV3 switch\r\n    - [ ] We need a source of non-hardcoded V3 peers, currently the only ones are hardcoded and the seeder hasn't been updated to crawl v3 nodes yet (see sipa/bitcoin-seeder#92)\r\n    - [ ] Consider increasing uptime requirements for Tor nodes from 10% as there [appear to be enough](#issuecomment-718622693)\r\n\r\n#7398 was a previous attempt to improve this script, but was abandoned, maybe some changes are useful.",
          "user": {
            "login": "laanwj",
            "id": 126646,
            "node_id": "MDQ6VXNlcjEyNjY0Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/laanwj",
            "html_url": "https://github.com/laanwj",
            "followers_url": "https://api.github.com/users/laanwj/followers",
            "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
            "organizations_url": "https://api.github.com/users/laanwj/orgs",
            "repos_url": "https://api.github.com/users/laanwj/repos",
            "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/laanwj/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 231994551,
              "node_id": "MDU6TGFiZWwyMzE5OTQ1NTE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Scripts%20and%20tools",
              "name": "Scripts and tools",
              "color": "ffffee",
              "default": false
            },
            {
              "id": 349312277,
              "node_id": "MDU6TGFiZWwzNDkzMTIyNzc=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/good%20first%20issue",
              "name": "good first issue",
              "color": "c2e0c6",
              "default": true
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 14,
          "created_at": "2019-10-02T11:46:27Z",
          "updated_at": "2023-01-29T21:10:17Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-30T22:27:18Z",
      "updated_at": "2021-03-30T22:27:18Z",
      "source": {
        "issue": {
          "id": 821131494,
          "node_id": "MDU6SXNzdWU4MjExMzE0OTQ=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21351",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21351/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21351/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21351/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/21351",
          "number": 21351,
          "state": "closed",
          "state_reason": "completed",
          "title": "net: No more v2 onion support in upstream Tor master",
          "body": "One of my nodes using `onlynet=tor` nodes is completely broken with current master as of 97a35f3ae5bff7f4a25d37d8961191fdbc8c5b67.\r\n\r\nTor is manually configured. Relevant `bitcoin.conf`:\r\n```\r\nonlynet=onion\r\nproxy=127.0.0.1:9050\r\nonion=127.0.0.1:9050\r\n```\r\n\r\nIt does not manage to make any outgoing connections. The log has an endless stream of:\r\n```\r\n2021-03-03T13:42:13Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:13Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:14Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:14Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:15Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:15Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:16Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:16Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:17Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:17Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:18Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:18Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:19Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:19Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:20Z Socks5() connect to […].onion:8333 failed: general failure\r\n2021-03-03T13:42:20Z Socks5() connect to […].onion:8333 failed: general failure\r\n…\r\n```\r\n(multiple messages per second, all `[…]` are short v2 onion addresses)\r\n\r\n```\r\n$ systemctl status tor\r\n● tor.service - Anonymizing overlay network for TCP\r\n     Loaded: loaded (/etc/systemd/system/tor.service; enabled; vendor preset: enabled)\r\n     Active: active (running) since Wed 2021-03-03 14:45:24 CET; 3min 0s ago\r\n    Process: 158931 ExecStartPre=/opt/tor/bin/tor -f /opt/tor/etc/tor/torrc --verify-config (code=exited, status=0/SUCCESS)\r\n   Main PID: 158962 (tor)\r\n      Tasks: 1 (limit: 9367)\r\n     Memory: 38.4M\r\n     CGroup: /system.slice/tor.service\r\n             └─158962 /opt/tor/bin/tor -f /opt/tor/etc/tor/torrc\r\n\r\nMar 03 14:48:20 tor[158962]: Mar 03 14:48:20.000 [warn] Invalid hostname [scrubbed]; rejecting\r\nMar 03 14:48:20 tor[158962]: Mar 03 14:48:20.000 [warn] Invalid hostname [scrubbed]; rejecting\r\nMar 03 14:48:21 tor[158962]: Mar 03 14:48:21.000 [warn] Invalid hostname [scrubbed]; rejecting\r\nMar 03 14:48:21 tor[158962]: Mar 03 14:48:21.000 [warn] Invalid hostname [scrubbed]; rejecting\r\nMar 03 14:48:22 tor[158962]: Mar 03 14:48:22.000 [warn] Invalid hostname [scrubbed]; rejecting\r\nMar 03 14:48:22 tor[158962]: Mar 03 14:48:22.000 [warn] Invalid hostname [scrubbed]; rejecting\r\nMar 03 14:48:23 tor[158962]: Mar 03 14:48:23.000 [warn] Invalid hostname [scrubbed]; rejecting\r\nMar 03 14:48:23 tor[158962]: Mar 03 14:48:23.000 [warn] Invalid hostname [scrubbed]; rejecting\r\nMar 03 14:48:24 tor[158962]: Mar 03 14:48:24.000 [warn] Invalid hostname [scrubbed]; rejecting\r\nMar 03 14:48:24 tor[158962]: Mar 03 14:48:24.000 [warn] Invalid hostname [scrubbed]; rejecting\r\n```\r\n\r\nI'll try to see if I can figure out what it's sending. Tor (current master) is otherwise successfully able to connect to hidden services, at least v3 ones.\r\n\r\nDid Tor completely remove v2 support?\r\n\r\n```\r\n$ /opt/tor/bin/tor --version\r\nTor version 0.4.6.0-alpha-dev (git-8020ae02abb105db).\r\nTor is running on Linux with Libevent 2.1.11-stable, OpenSSL 1.1.1f, Zlib 1.2.11, Liblzma 5.2.4, Libzstd N/A and Glibc 2.31 as libc.\r\nTor compiled with GCC version 9.3.0\r\n```",
          "user": {
            "login": "laanwj",
            "id": 126646,
            "node_id": "MDQ6VXNlcjEyNjY0Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/laanwj",
            "html_url": "https://github.com/laanwj",
            "followers_url": "https://api.github.com/users/laanwj/followers",
            "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
            "organizations_url": "https://api.github.com/users/laanwj/orgs",
            "repos_url": "https://api.github.com/users/laanwj/repos",
            "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/laanwj/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 159815356,
              "node_id": "MDU6TGFiZWwxNTk4MTUzNTY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Upstream",
              "name": "Upstream",
              "color": "bfd4f2",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 22,
          "closed_at": "2021-08-17T12:55:02Z",
          "created_at": "2021-03-03T13:54:44Z",
          "updated_at": "2023-03-07T10:17:53Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-03-31T11:50:33Z",
      "updated_at": "2021-03-31T11:50:33Z",
      "source": {
        "issue": {
          "id": 846507792,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjA1NTk5MDAx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21560",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21560/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21560/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21560/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/21560",
          "number": 21560,
          "state": "closed",
          "state_reason": null,
          "title": "net: Add Tor v3 hardcoded seeds",
          "body": "Closes #20239 and mitigates my node's problem in #21351.\r\n\r\n- Add a few hardcoded seeds for TorV3\r\n  - As the [bitcoin-seeder](https://github.com/sipa/bitcoin-seeder) doesn't collect TorV3 addresses yet, I have extracted these from my own node using [a script](https://gist.github.com/laanwj/b3d7b01ef61ce07c2eff0a72a6b90183) and added them manually. This is intended to be a temporary stop gap until 22.0's seeds update.\r\n\r\n- Change hardcoded seeds to variable length BIP155 binary format.\r\n  - It is stored as a single serialized blob in a byte array, instead of pseudo-IPv6 address slots. This is more flexible and, assuming most of the list is IPv4, more compact.\r\n  - Only the (networkID, addr, port) subset (CService). Services and time are construed on the fly as before.\r\n\r\n- Change input format for `nodes_*.txt`.\r\n  - Drop legacy `0xAABBCCDD` format for IPv4. It is never generated by `makeseeds.py`.\r\n  - Stop interpreting lack of port as default port, interpret it as 'no port', to accomodate I2P and other port-less protocols (not handled in this PR). An explicit port is always generated by `makeseeds.py` so in practice this makes no difference right now.\r\n\r\nA follow-up to this PR could do the same for I2P.",
          "user": {
            "login": "laanwj",
            "id": 126646,
            "node_id": "MDQ6VXNlcjEyNjY0Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/laanwj",
            "html_url": "https://github.com/laanwj",
            "followers_url": "https://api.github.com/users/laanwj/followers",
            "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
            "organizations_url": "https://api.github.com/users/laanwj/orgs",
            "repos_url": "https://api.github.com/users/laanwj/repos",
            "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/laanwj/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/47",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/47",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/47/labels",
            "id": 5347322,
            "node_id": "MDk6TWlsZXN0b25lNTM0NzMyMg==",
            "number": 47,
            "state": "closed",
            "title": "22.0",
            "description": "",
            "creator": {
              "login": "MarcoFalke",
              "id": 6399679,
              "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
              "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/MarcoFalke",
              "html_url": "https://github.com/MarcoFalke",
              "followers_url": "https://api.github.com/users/MarcoFalke/followers",
              "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
              "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
              "repos_url": "https://api.github.com/users/MarcoFalke/repos",
              "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 124,
            "created_at": "2020-04-25T00:14:49Z",
            "updated_at": "2021-09-14T07:16:53Z",
            "closed_at": "2021-09-09T12:47:52Z"
          },
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21560",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/21560",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/21560.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/21560.patch"
          },
          "closed_at": "2021-04-06T08:48:06Z",
          "created_at": "2021-03-31T11:50:32Z",
          "updated_at": "2022-08-18T18:20:28Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "closed",
      "id": 4555440329,
      "node_id": "MDExOkNsb3NlZEV2ZW50NDU1NTQ0MDMyOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4555440329",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9be7fe4849310884294669b019dd8300f69bc334",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/9be7fe4849310884294669b019dd8300f69bc334",
      "created_at": "2021-04-06T08:48:05Z"
    },
    {
      "event": "locked",
      "id": 7216602453,
      "node_id": "LOE_lADOABII584rdSQozwAAAAGuJJ1V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7216602453",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-18T18:34:55Z",
      "lock_reason": "resolved"
    }
  ]
}