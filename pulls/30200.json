{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200",
    "id": 1895929433,
    "node_id": "PR_kwDOABII585xAZZZ",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30200",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30200.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30200.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/febd3d1c3d41cf6083baf990fb2a3a69cade364a",
    "number": 30200,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Introduce Mining interface",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Introduce a `Mining` interface for the `getblocktemplate` and `generateblock` RPC to use now, and for Stratum v2 to use later.\r\n\r\nSuggested here: https://github.com/bitcoin/bitcoin/pull/29346#issuecomment-2108528652\r\n\r\nThe selection of methods added to the interface is mostly based on what the Template Provider in #29432 uses. It could be expanded further so that `rpc/mining.cpp` no longer needs `EnsureMemPool` and `EnsureChainman`.\r\n\r\nThis PR should be a pure refactor.",
    "labels": [],
    "created_at": "2024-05-30T12:34:31Z",
    "updated_at": "2024-06-07T19:42:31Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "542a71d2bfcdcd48382614626b546757a76a8b62",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2024/05/miner-interface",
      "ref": "2024/05/miner-interface",
      "sha": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 239352,
        "default_branch": "sv2",
        "open_issues_count": 3,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-07T16:50:29Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2024-06-07T15:16:27Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "feab35189bc00bc4cf15e9dcb5cf6b34ff3a1e91",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35484,
        "stargazers_count": 76819,
        "watchers_count": 76819,
        "size": 260263,
        "default_branch": "master",
        "open_issues_count": 686,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-07T18:52:52Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-06-07T18:50:10Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 212,
    "deletions": 62,
    "changed_files": 21,
    "commits": 8,
    "review_comments": 12,
    "comments": 8
  },
  "events": [
    {
      "event": "commented",
      "id": 2139458980,
      "node_id": "IC_kwDOABII585_hY2k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2139458980",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T12:34:34Z",
      "updated_at": "2024-06-07T09:55:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30200).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2140862734) |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2096918003) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30214](https://github.com/bitcoin/bitcoin/pull/30214) (refactor: Improve assumeutxo state representation by ryanofsky)\n* [#29015](https://github.com/bitcoin/bitcoin/pull/29015) (kernel: Streamline util library by ryanofsky)\n* [#28843](https://github.com/bitcoin/bitcoin/pull/28843) ([refactor] Remove BlockAssembler m_mempool member by TheCharlatan)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2139458980",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "commented",
      "id": 2139459750,
      "node_id": "IC_kwDOABII585_hZCm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2139459750",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T12:35:03Z",
      "updated_at": "2024-05-30T12:35:12Z",
      "author_association": "MEMBER",
      "body": "The first commit is all the boilerplate plus a single method `isTestChain()` that's used by the `getblocktemplate` RPC.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2139459750",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T12:35:28Z",
      "updated_at": "2024-05-30T12:35:28Z",
      "source": {
        "issue": {
          "id": 2105856059,
          "node_id": "PR_kwDOABII585lWGHe",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29346",
          "number": 29346,
          "state": "open",
          "state_reason": null,
          "title": "Stratum v2 Noise Protocol",
          "body": "Parent PR #29432 \r\n\r\nThis is the first part of the Stratum v2 Template Provider change that can be a standalone pull request.\r\n\r\nThe Noise Protocol Framework is defined here: https://noiseprotocol.org/noise.html\r\n\r\nIt's quite similar to BIP324. The main differences are explained here, including why Stratum v2 can't use BIP234 (yet): https://delvingbitcoin.org/t/stratum-v2-noise-protocol-bip324-nuggets/413\r\n\r\nThe implementation is based on revision 38, 2018-07-11 (most recent at the time of writing).\r\n\r\nThe Stratum v2 spec defines the specific choice of ciphers: https://github.com/stratum-mining/sv2-spec/blob/main/04-Protocol-Security.md\r\n\r\nThis protocol has been implemented in the Stratum Reference Implementation (SRI, using [rust-bitcoin](https://github.com/rust-bitcoin/rust-bitcoin)). https://github.com/stratum-mining/stratum\r\n\r\nIt has also been (independently) implemented in BraiinsOS. This part is currently not open source, and it's behind on some recent changes.\r\n\r\nThe classes in `sv2_noise.h` attempt to stay close to the paper, whereas the test and fuzzer code borrow heavily from BIP324.\r\n\r\nIt's ready for review, but not for merge:\r\n\r\n1. The parent PR may need more conceptual review (and perhaps the entire spec, but that would really slow things down)\r\n2. We could decide to not support Noise encryption at all and require users to install separate software for that. Code review of this PR could help inform that decision.\r\n\r\nYou can see this code in action in the parent PR #29432.\r\n\r\nInitial seed corpus: https://github.com/bitcoin-core/qa-assets/pull/169\r\n\r\n---\r\n\r\nThe following spec change is already implemented in this PR and in SRI:\r\n\r\n* The spec is being modified to use EllSwift (instead of regular x-only) for the encoding of public keys and ECDH: https://github.com/stratum-mining/sv2-spec/pull/66",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 16,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29346",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29346",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29346.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29346.patch"
          },
          "created_at": "2024-01-29T16:14:50Z",
          "updated_at": "2024-06-06T16:10:55Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12987643549,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMGH7ad",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12987643549",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T15:08:58Z"
    },
    {
      "event": "ready_for_review",
      "id": 12987684427,
      "node_id": "RFRE_lADOABII586KnWy7zwAAAAMGIFZL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12987684427",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T15:10:38Z"
    },
    {
      "event": "commented",
      "id": 2140187315,
      "node_id": "IC_kwDOABII585_kKqz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2140187315",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T16:34:12Z",
      "updated_at": "2024-05-30T16:34:12Z",
      "author_association": "MEMBER",
      "body": "Let me know if I should expand the interface to cover more of `rpc/mining.cpp` or stick to this for now.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2140187315",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "reviewed",
      "id": 2088822400,
      "node_id": "PRR_kwDOABII5858gOaA",
      "url": null,
      "actor": null,
      "commit_id": "f04cf9f75054573c204245f7bb1e6813cce1fed8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2088822400",
      "submitted_at": "2024-05-30T16:36:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "reviewed",
      "id": 2088829216,
      "node_id": "PRR_kwDOABII5858gQEg",
      "url": null,
      "actor": null,
      "commit_id": "b30a8aca5191186f56eb1e9bd8f1a1d899a07039",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2088829216",
      "submitted_at": "2024-05-30T16:40:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "commented",
      "id": 2140862734,
      "node_id": "IC_kwDOABII585_mvkO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2140862734",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T21:05:18Z",
      "updated_at": "2024-05-30T21:05:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2140862734",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T06:59:28Z",
      "updated_at": "2024-05-31T06:59:28Z",
      "source": {
        "issue": {
          "id": 2029493410,
          "node_id": "PR_kwDOABII585hWvMx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29015",
          "number": 29015,
          "state": "open",
          "state_reason": null,
          "title": "kernel: Streamline util library",
          "body": "Remove `fees.h`, `errors.h`, and `spanparsing.h` from the util library. Specifically:\r\n\r\n- Move `Split` functions from `util/spanparsing.h` to `util/string.h`, using `util` namespace for clarity.\r\n- Move remaining spanparsing functions to `script/parsing.h` since they are used for descriptor and miniscript parsing.\r\n- Combine `util/fees.h` and `util/errors.h` into `common/messages.h` so there is a place for simple functions that generate user messages to live, and these functions are not part of the util library.\r\n\r\nMotivation for this change is that the util library is a dependency of the kernel, and we should remove functionality from util that shouldn't be called by kernel code or kernel applications. These changes should also improve code organization and make functions easier to discover. Some of these same moves are (or were) part of #28690, but did not help with code organization, or made it worse, so it is better to move them and clean them up in the same PR so code only has to change one time.\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 6861582155,
              "node_id": "LA_kwDOABII588AAAABmPtvSw",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20CMake%20port",
              "name": "Needs CMake port",
              "description": "",
              "color": "0e8a16",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 34,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29015",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29015",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29015.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29015.patch"
          },
          "created_at": "2023-12-06T22:26:39Z",
          "updated_at": "2024-06-06T17:12:38Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T07:22:57Z",
      "updated_at": "2024-05-31T07:22:57Z",
      "source": {
        "issue": {
          "id": 1987412902,
          "node_id": "PR_kwDOABII585fITQi",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28843",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28843/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28843/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28843/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28843",
          "number": 28843,
          "state": "open",
          "state_reason": null,
          "title": "[refactor] Remove BlockAssembler m_mempool member",
          "body": "Instead, pass the mempool pointer as an argument to CreateNewBlock and pass that on to addPackageTxs. Before, addPackageTxs had access to both the m_mempool member and the passed in mempool, which could be confusing. This was noticed in this PR review: https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898164322.\r\n\r\n",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28843",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28843",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28843.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28843.patch"
          },
          "created_at": "2023-11-10T11:06:22Z",
          "updated_at": "2024-06-06T17:30:21Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T23:49:10Z",
      "updated_at": "2024-05-31T23:49:10Z",
      "source": {
        "issue": {
          "id": 2328028595,
          "node_id": "PR_kwDOABII585xIynT",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/30214",
          "number": 30214,
          "state": "open",
          "state_reason": null,
          "title": "refactor: Improve assumeutxo state representation",
          "body": "This PR contains the first part of #28608, which tries to make assumeutxo code more maintainable, and improve it by not locking `cs_main` for a long time when the snapshot block is connected, and by deleting the snapshot validation chainstate when it is no longer used, instead of waiting until the next restart.\r\n\r\nThe changes in this PR are just refactoring. They make `Chainstate` objects self-contained, so for example, it is possible to determine what blocks to connect to a chainstate without querying `ChainstateManager`, and to determine whether a Chainstate is validated without basing it on inferences like `&cs != &ActiveChainstate()` or `GetAll().size() == 1`.\r\n\r\nThe PR also tries to make assumeutxo terminology less confusing, using \"current chainstate\" to refer to the chainstate targeting the current network tip, and \"historical chainstate\" to refer to the chainstate downloading old blocks and validating the assumeutxo snapshot. It removes uses of the terms \"active chainstate,\" \"usable chainstate,\" \"disabled chainstate,\" \"ibd chainstate,\" and \"snapshot chainstate\" which are confusing for various reasons.",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/30214",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/30214.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/30214.patch"
          },
          "created_at": "2024-05-31T14:53:10Z",
          "updated_at": "2024-06-07T11:55:09Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 2096918003,
      "node_id": "PRR_kwDOABII5858_G3z",
      "url": null,
      "actor": null,
      "commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 87ba70a2731951a16432ca2d8d55c62bad87dd41\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2140187315\r\n\r\n> Let me know if I should expand the interface to cover more of `rpc/mining.cpp` or stick to this for now.\r\n\r\nI think it's just important for the interface to be usable for stratum code so is not too tied to node internals. It should be ok for RPC code to go around the interface and not use it for everything.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2096918003",
      "submitted_at": "2024-06-04T17:41:24Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "review_requested",
      "id": 13039893045,
      "node_id": "RRE_lADOABII586KnWy7zwAAAAMJPPo1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13039893045",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-04T17:41:27Z",
      "requested_reviewer": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13078207514,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMLhZwa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078207514",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T09:55:48Z"
    },
    {
      "event": "commented",
      "id": 2154504861,
      "node_id": "IC_kwDOABII586AayKd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2154504861",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T09:57:00Z",
      "updated_at": "2024-06-07T10:54:27Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky thanks for the review! I rebased and changed a few things to address comments, see inline.\r\n\r\nI'll cherry-pick this into #29432 to see if we need anything more.\r\n\r\n---\r\n\r\nSwitched back to draft.\r\n\r\nI need to add `IsInitialBlockDownload`, which was the last thing `Sv2TemplateProvider` still needs `ChainstateManager& m_chainman;` for.\r\n\r\nI also need to be able to pass `BlockAssembler::Options` into `createNewBlock` (in a serialisable way).\r\n\r\nForgot to rename `miner` on `NodeContext`, and `makeMiner` to `makeMining` in `init.h`. \r\n\r\nAdditionally the template provider needs to wait, to see if there's a new tip, with `g_best_block_cv.wait_until`. How would I go about moving that into this interface?",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2154504861",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "mentioned",
      "id": 13078222849,
      "node_id": "MEE_lADOABII586KnWy7zwAAAAMLhdgB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078222849",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T09:57:01Z"
    },
    {
      "event": "subscribed",
      "id": 13078222865,
      "node_id": "SE_lADOABII586KnWy7zwAAAAMLhdgR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078222865",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T09:57:02Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T10:00:52Z",
      "updated_at": "2024-06-07T10:00:52Z",
      "source": {
        "issue": {
          "id": 2134155715,
          "node_id": "PR_kwDOABII585m2Xsr",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29432",
          "number": 29432,
          "state": "open",
          "state_reason": null,
          "title": "Stratum v2 Template Provider (take 3)",
          "body": "Based on on @Fi3's https://github.com/bitcoin/bitcoin/compare/master...Fi3:bitcoin:PatchTemplates which is based on @ccdle12's #27854. I rebased it and re-wrote the commit history. Compared to #28983 it introduces EllSwift in the handshake and fixes various bugs. I used that opportunity to change the branch name, which makes testing against [SRI](https://github.com/stratum-mining/stratum) slightly easier. There's no conceptual discussion on #28983 so it can be ignored by reviewers.\r\n\r\nSee [docs/stratum-v2.md](https://github.com/Sjors/bitcoin/blob/sv2/doc/stratum-v2.md) for a brief description of Stratum v2 and the role of Bitcoin Core in that system..\r\n\r\n## What to test and review?\r\n\r\nI'll make separate pull requests for parts that are ready for detailed review.\r\n\r\n- [ ] #29346\r\n- [ ] #30200\r\n- [ ] #29295\r\n- [ ] Custom signet mining improvement: #29032\r\n- [ ] Make nested pull-requests easier: #29274\r\n\r\nSee the [testing guide](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md#testing-guide) for various ways to test this PR. This branch is actively used by (testnet) pools, so it should be ready for high level review.\r\n\r\n### Related useful PRs\r\n\r\n- [ ] #30205\r\n\r\n### Related useful issues\r\n\r\n- [ ] #30209\r\n\r\n## Implementation notes\r\n\r\nThere's roughly three layers:\r\n\r\n1. Noise encryption #29346\r\n2. Messages and transport layer\r\n3. The Template Provider\r\n\r\n* the `ci:` commits (#29274) are there to facilitate PR's against this branch, but they are not blocking for Stratum v2\r\n* the commits that move `transport.h` and some other stuff from `node` to `common` are not blocking. But in the longer run I'd like to see process separation between the node and the template provider.\r\n* I will occasionally add commits to _undo_ bug fixes, in order to stay compatible with the SRI `main` branch. Those will get dropped over time and can be ignored. \r\n\r\n## Contributing\r\n\r\nIf you want to help out with any of the issues below, please open a PR to my fork. I will then squash your commits into my own where needed. \r\n\r\n## Things left todo\r\n\r\n### Spec\r\n\r\n- [ ] modify spec to use `ProvideMissingTransactions`? (followup?)\r\n- [ ] pick a good default for `default_coinbase_tx_additional_output_size` (see `getblocktemplate` RPC)\r\n\r\n### Networking\r\n\r\n- [ ] add `-sv2bind` and `-sv2allowip`\r\n- [ ] optional `-sv2cert`\r\n- [ ] drop `Sv2TemplateProvider::SendBuf`, reuse p2p socket handling if possible\r\n- [ ] limit number of connected clients\r\n- [ ] maybe limit (number of) `coinbase_output_max_additional_size`\r\n- [ ] TMP / TODO comments at the top of `sv2_messages.h`\r\n\r\n### Testing\r\n\r\n- [ ] expand sv2_template_provider_tests\r\n- [ ] add transport fuzzer\r\n- [ ] add template provider fuzzer\r\n\r\n### Template generation and updating\r\n\r\n- [ ] group templates with the same `coinbase_tx_additional_output_size`\r\n- [ ] don't generate templates when no client is connected\r\n\r\n### Misc\r\n\r\n- [ ] move / refactor `GetMerklePathForCoinbase` helper (see Future Work in original PR, and https://github.com/stratum-mining/stratum/issues/567)\r\n- [ ] truncate long trace messages\r\n\r\n## Potential followups\r\n\r\n- [ ] implement Noise protocol and mock client in Python, add functional tests (based on `test/sv2_template_provider_tests.cpp`)\r\n- [ ] use process separation, e.g. a `bitcoin-tp` binary, see [multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/multiprocess.md?plain=1)\r\n- [ ] make template updates push based, on top of Cluster Mempool, see [docs/stratum-v2.md](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md) (for new blocks it's already push based)\r\n- [ ] push empty template for the next block (downstream can ignore or use, https://github.com/stratum-mining/stratum/issues/715)\r\n  - send prevhash for this template as soon as any new block arrives\r\n- [ ] push optimistic template for the next block\r\n  - send prevhash if and only if our template won (i.e. we got a `SubmitSolution` message)",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 16,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29432",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29432.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29432.patch"
          },
          "created_at": "2024-02-14T11:34:49Z",
          "updated_at": "2024-06-07T16:35:18Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "renamed",
      "id": 13078274580,
      "node_id": "RTE_lADOABII586KnWy7zwAAAAMLhqIU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078274580",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T10:01:08Z",
      "rename": {
        "from": "Introduce Miner interface",
        "to": "Introduce Mining interface"
      }
    },
    {
      "event": "convert_to_draft",
      "id": 13078468506,
      "node_id": "CTDE_lADOABII586KnWy7zwAAAAMLiZea",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078468506",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T10:16:49Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBjMmY2OTNmYmMxN2VhZjYxODEzNWY3ZjE0ZmMwMmU5OWNkY2ZmYjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0c2f693fbc17eaf618135f7f14fc02e99cdcffb0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0c2f693fbc17eaf618135f7f14fc02e99cdcffb0",
      "tree": {
        "sha": "aae485f8edf1075b0f7cd349fb40617d18bff81c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/aae485f8edf1075b0f7cd349fb40617d18bff81c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree aae485f8edf1075b0f7cd349fb40617d18bff81c\nparent feab35189bc00bc4cf15e9dcb5cf6b34ff3a1e91\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717752164 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1717768615 +0200\n\nIntroduce Mining interface\n\nStart out with a single method isTestChain() that's used by the getblocktemplate RPC.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZjEacACgkQV/+b28ww\nEAmMvg/8Dq+viYKquwukkvcqc3tVgif/RV6SflCScE/mcXaFpsv7D1eNOL3jUzDu\na4krccqdr4a1sE8dhg05gDSVatYc7d42mMbAyKICa0OthBgXelhTg3GAyErU3Sup\ncGNtCd+/I4VwPO6IIg6YxfeEsoGjR0f4opo7wUZoVG8NuIcuiaFgJlvVzLbGGucY\nkWDXxq7rZ9dJybPx05sjnpfD1NhSD7HdAd2zkxXQKWdVxrWWFkI0qGgKIZwbqD/9\ndJY6a7mYcrlKRybIWUFWgK7ePNfmQPlVgLEzGPl+Kb9C5M6mZAo4VjkcvBHEnHxO\nP2WXgVnPFPffu2n+axUAvxYWdwhT6qkeJaSnXqXCDXxJIu+ekQ+KcRt+G7zNXsbv\npaHksolLaLrus/i7w12/SscJQ64c2cmnUp9+9XDf7Z0Gv1gJlhmRGQrDwidUaQN5\nQIL+7MKCTtSs/55y1PwAvwRDWEoowV1XsXf2pmLwPK+65lgg28pM6NtrMKmRk4oQ\nJyHGm3mnomBO2P1l4fKT+giTBiMP8q9FHGMo83JEXMo2hy2tH8UVtkBclCNbr1Px\nEtOLh+ohMHqitIOvuQEWDgPlaA3NCI5PYg2TJfYYh7bnzHpHoKDMdWJgKW0N124s\nhQB3+2JYrQ13pKytPwo3K+cORrwGUY/K7R2hfBiWjXdbThoqK/E=\n=rM2f\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/feab35189bc00bc4cf15e9dcb5cf6b34ff3a1e91",
          "sha": "feab35189bc00bc4cf15e9dcb5cf6b34ff3a1e91",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/feab35189bc00bc4cf15e9dcb5cf6b34ff3a1e91"
        }
      ],
      "message": "Introduce Mining interface\n\nStart out with a single method isTestChain() that's used by the getblocktemplate RPC.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T13:56:55Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T09:22:44Z"
      },
      "sha": "0c2f693fbc17eaf618135f7f14fc02e99cdcffb0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg1ODllNmM0NDcyNmQ2YjU3NjAwOTVkNzJjMzc5MzRlNGJlMzMxNWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8589e6c44726d6b5760095d72c37934e4be3315c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8589e6c44726d6b5760095d72c37934e4be3315c",
      "tree": {
        "sha": "b79df1a689c1cded11fae411ea44db318ab908e5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b79df1a689c1cded11fae411ea44db318ab908e5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b79df1a689c1cded11fae411ea44db318ab908e5\nparent 0c2f693fbc17eaf618135f7f14fc02e99cdcffb0\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717076012 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1717768615 +0200\n\nrpc: call TestBlockValidity via miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZjEacACgkQV/+b28ww\nEAkNeQ/+NvdjJ2jQR3yU1Vmni6sJFphH/i1U/QhbHgUra8NUdrSvykGVaRmdmign\nJGjtPv5kyfA2zxuv5y0TL2TipRM4/n3lMKkdXui8O0N/oktno8vB8paxuG71Dmg4\nOs9JrRpGHODqMe3wDUuwL/zVddPUUwrkZ7IZOCI6KnR9Bg512LWKDhrYNYjEE8uY\nVmIt5J0KOQ64oleUsndbAVWKlnrFoBQhNO7ko+CZ937OXrcWWD4hYOtRd7PD63LT\nOmi6vDShXLEaseDezsrx3MhLRielZLtjv3q9eFhefHZ9JyBVIYBD8OK5T1kz6fhz\nkNLqPsFF4LMvIhgK17XIyzMeHc8HbQCJqBZthaH7IoeGPPTcSl3T5s/JQ7kY2o5k\n6ZNz3/gyau5JBnIm9qN0DHWWwqcYPk2urMJxamrRHi/A+83NpI/s27nIUGQzRmES\nd55chjycHarlbEO3WbETBXwqt8vy3OcwUyFbeAxpCqULDiWrqh6Oidane6mohj9z\nRKzdxvupBz6s5HRBOZvqdvrfRiF+QpNzuPxeIjijrqz73MCQGGTYR9XT4P1h1RxP\n51QzAP0R2O+OPKe/wnTj8s/aX8fm7QRYynnFzULlC1tb6QsX0JuEnVXskfnCT22/\nMknm/hMQrvmP6bvzgZzkvh9LudzIsjpU3iK8cgmGdC3djbS4aRE=\n=9q2u\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0c2f693fbc17eaf618135f7f14fc02e99cdcffb0",
          "sha": "0c2f693fbc17eaf618135f7f14fc02e99cdcffb0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0c2f693fbc17eaf618135f7f14fc02e99cdcffb0"
        }
      ],
      "message": "rpc: call TestBlockValidity via miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T13:56:55Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-05-30T13:33:32Z"
      },
      "sha": "8589e6c44726d6b5760095d72c37934e4be3315c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDljMjI2YzVjMzgxOGVmMTU3ZmM1MGE1ZjZlY2M1MzRhNjEyYWMxZDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9c226c5c3818ef157fc50a5f6ecc534a612ac1d0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9c226c5c3818ef157fc50a5f6ecc534a612ac1d0",
      "tree": {
        "sha": "9543ea2c1dba45b14f0bf3e71a74b13a65299c56",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9543ea2c1dba45b14f0bf3e71a74b13a65299c56"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9543ea2c1dba45b14f0bf3e71a74b13a65299c56\nparent 8589e6c44726d6b5760095d72c37934e4be3315c\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717077302 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1717768615 +0200\n\nrpc: getblocktemplate getTip() via Miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZjEacACgkQV/+b28ww\nEAn60Q//YeiS7Yxnup0UVhGR1KGs6+0wZVzbhLH0SCOgOtInlU6d1Oi/O4uEwW8H\nTotw0m2h0XLfOiklxtYWfFkylGUWJqSd5EXa1UfYASsByWDvxJGPepT0lnajsNUO\nNmmXaTRP1ig99Z+9bYn1teBbYKiqmHzfGHYXU348md8IDrR1J9NvahCxe1E8F6oB\nwdBFebtKQujYmTHJXwSTC8i4jBpOFENvZKal3S+C0jYtvWw1cOc8MH3DLxskXMfo\nyJJK84nVJRlVcJH6BeFUPmZ+zcBKeFHNJw8cpCPDDJLMUUNTAuAfNdXKZBI/EV9H\nyEGUu2tMrq2qyGeJDtOktfPlp8LwQJbJ4qkg/Mfb7O3/WFcByGBCqVcBMhnK1npf\nQWHp5apluts1onfjyviH9CnVXZzYjNbYfaV2buAG2TG/biXWQBojY3481y9Gi4OU\nMdXfi2lbTo0SwzvIpPiLqZLU0TmsuUIyBeLB7Uu5lK4OOMgxXc9DrWrEX2Q90Q8Z\nduaEjW+DFGpdt6/xMKtLeQYEDm6j9CkcYWUjPfkizL214mJmUz0y6WbUm288maXn\nCmrtsLdOdB3iMP8PfVpOL701LtjwTE8VkIa5ZPRjDU04kdsCD05rpEwF56wRYjNV\n/wG7lmfEo+8qIUPV3DZzC+oQ60Z9bBVLQhqn2zLIdhunxeq6sIw=\n=FREh\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8589e6c44726d6b5760095d72c37934e4be3315c",
          "sha": "8589e6c44726d6b5760095d72c37934e4be3315c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8589e6c44726d6b5760095d72c37934e4be3315c"
        }
      ],
      "message": "rpc: getblocktemplate getTip() via Miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T13:56:55Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-05-30T13:55:02Z"
      },
      "sha": "9c226c5c3818ef157fc50a5f6ecc534a612ac1d0"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13081451302,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMLtxsm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13081451302",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T13:57:53Z"
    },
    {
      "event": "commented",
      "id": 2154903353,
      "node_id": "IC_kwDOABII586AcTc5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2154903353",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T13:57:56Z",
      "updated_at": "2024-06-07T13:57:56Z",
      "author_association": "MEMBER",
      "body": "All the above should be fixed now, except for `g_best_block_cv.wait_until` (but that's not blocking).\r\n\r\nThe biggest change is in 914c26bbd4d7e87af4e0d0edf9af69ae76668b7e. It now makes the `options` argument mandatory for `BlockAssembler` constructor, dropping implicit handling of `ArgsManager`. The caller i.e. the `Mining` interface implementation now handles this.\r\n\r\nIn Stratum v2 the pool communicates how many extra bytes it needs for its own outputs (payouts, extra commitments, etc). This needs to be subtracted from what the user set as -blockmaxweight. To achieve that the caller would have to pass in an options object, and not forget to also process `-blockmintxfee` - a mistake I made in #29432.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2154903353",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "commented",
      "id": 2154948888,
      "node_id": "IC_kwDOABII586AcekY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2154948888",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T14:20:29Z",
      "updated_at": "2024-06-07T15:16:57Z",
      "author_association": "MEMBER",
      "body": "You can see the interface in action in https://github.com/bitcoin/bitcoin/pull/29432/commits/5078e51f4ad3c6bd01580d583274dd5faaf01c70, with one additional argument added to `createNewBlock ` in https://github.com/bitcoin/bitcoin/pull/29432/commits/41ac95ea547eef8c79eb8d2e995df8241f53c030\r\n\r\n--- \r\n\r\nOops, 914c26bbd4d7e87af4e0d0edf9af69ae76668b7e broke some tests, e.g. `test/functional/rpc_generate.py` ...",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2154948888",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "ready_for_review",
      "id": 13081793442,
      "node_id": "RFRE_lADOABII586KnWy7zwAAAAMLvFOi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13081793442",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T14:20:30Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYzNzVmYjlhMGRmZjdjY2VhZDgwNjI2ZjRhZWU4NTNkYjc3OTllNmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f375fb9a0dff7ccead80626f4aee853db7799e6f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f375fb9a0dff7ccead80626f4aee853db7799e6f",
      "tree": {
        "sha": "49e87521d66643a5d1a60681d3e7378348f4df29",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/49e87521d66643a5d1a60681d3e7378348f4df29"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 49e87521d66643a5d1a60681d3e7378348f4df29\nparent 9c226c5c3818ef157fc50a5f6ecc534a612ac1d0\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717079626 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1717772458 +0200\n\nrpc: call CreateNewBlock via miner interface\n\nThis makes the options argument mandatory for BlockAssembler constructor,\ndropping implicit handling of ArgsManager. The caller i.e. the Mining\ninterface implementation now handles this.\n\nIn Stratum v2 the pool communicates how many extra bytes it needs for\nits own outputs (payouts, extra commitments, etc). This needs to be\nsubstracted from what the user set as -blockmaxweight.\n\nTo achieve that the caller would have to pass in an options object,\nand not forget to also process -blockmintxfee.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZjIKoACgkQV/+b28ww\nEAnetBAAxKOadW/Zf+E1Jx3eD0puj0oGxOrTeFPKff9LohDTnyQnrBGfcI8QASZg\nQO8o0smDjZZUqCtvDTQgWMKpBdU6ZToxq+cqDpGE9fI/UfvY5uDibAAjqKmmc8IK\nJWYglOD3SpAP5iKV2vngnIk8rVbfdFD4M15TCAy1L5325oR5vc2o6wYiPS8yW9Uk\naZst+YOeGpF5QxW1bD6eIbo02BGngKNBx89+gJjkM8HbOhbwlVUMWjiFtNdD9X6Y\ni98FOp0jSQgURJeX9U0CFqELHPPirdSSfvpCJSrYP4OBU0qM2Y0e8u0o7xklzgR5\nQW8fwtZluXLkfBBHEcmaFGJnAGWZtErymJa6Mvzz32PnCENrBnruYDJBvMK8YrmP\n6zvev4LdJUtXBPJQqFlUiExYHe1LSs3jg8apG7YEtkssUldyH5XQPfpv4X7UP2jA\nqEM/XHow4Tf43rVfLbo/5nvJJf5por/tGEKAv2XSrvET4cIwaCirc983nud372tI\n39cc0JL5kdZGlbWdkZCEyUPc+hGqaVrSHTqYxhinq5XruU+7peY0pzjmFb6hoHEG\nwV9RmlYxbhBwU4zsqIguGXC7IF0XjoacDCsDkAF6UW8Tuig//um4s8+GzJK08zhJ\nRruFS/c5rK98vDlXxTLwbDjmnlU/Q0y6hdKjf8gohAHTiAx4klk=\n=Xi07\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9c226c5c3818ef157fc50a5f6ecc534a612ac1d0",
          "sha": "9c226c5c3818ef157fc50a5f6ecc534a612ac1d0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9c226c5c3818ef157fc50a5f6ecc534a612ac1d0"
        }
      ],
      "message": "rpc: call CreateNewBlock via miner interface\n\nThis makes the options argument mandatory for BlockAssembler constructor,\ndropping implicit handling of ArgsManager. The caller i.e. the Mining\ninterface implementation now handles this.\n\nIn Stratum v2 the pool communicates how many extra bytes it needs for\nits own outputs (payouts, extra commitments, etc). This needs to be\nsubstracted from what the user set as -blockmaxweight.\n\nTo achieve that the caller would have to pass in an options object,\nand not forget to also process -blockmintxfee.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T15:00:58Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-05-30T14:33:46Z"
      },
      "sha": "f375fb9a0dff7ccead80626f4aee853db7799e6f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQyYTY0YmIwYmY5OWZiMDM2MDI3NTVjYjUyMzY1N2NjZjhlOWNhNGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d2a64bb0bf99fb03602755cb523657ccf8e9ca4a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d2a64bb0bf99fb03602755cb523657ccf8e9ca4a",
      "tree": {
        "sha": "113d9f40c9a306b0dc141d2bbe96018b8ef4b39d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/113d9f40c9a306b0dc141d2bbe96018b8ef4b39d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 113d9f40c9a306b0dc141d2bbe96018b8ef4b39d\nparent f375fb9a0dff7ccead80626f4aee853db7799e6f\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717080389 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1717772458 +0200\n\nrpc: getTransactionsUpdated via miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZjIKoACgkQV/+b28ww\nEAluIQ//T5K7N1WmTsGiI/FyE1RqIzGQ4i9I0dYwBspxDnygMPPBJ/LYdYdA/xI3\njmmMqf2TmPrFB2tK8whR++4UExH1rzo8EIqifQ+OKLQlry6v+bNl/7fe4KjYa8kw\nylurzPLYIIBi0sJOUJyvSFLpOENENuK3XtSqooLNGHBd4oJsZ0B3CxgTDXOMe4GP\nj3lW0Z6qteauLbm32/2NbqsqbQwh5n0PpB5rEgnMP/F+uL5bLp3M/y6vW3yD0l+8\nl0TQO/xFfjs/FQVcmu+HTgWv4/gOYY4neWk6M/1/UBSzrEjQs42C3w90e8mJikPK\nBfa/LZ5AnLSk2caABzywaTJxo6okNWNMZat/dis3+iup5I3SwDbTy1HF1u5q5HPm\nFdThfWi8LeoXl1Y+X7qOlHV/rJeAyQqaBTXshuyULnXPNWRBKUx1ehEFjiiXiEMx\nb0RUSiPqwRk0xvUaSDOTNKF6yyhjFBQgSeCN/EXGEgbzjYJhD3Pc1eIh5CwQysJr\np0CpqejdCGvcw4g6pi9L01+0Oq6Kl8SvY09j2K/ENTnn4CJBII0BtkS9hWsYbx2U\ntEG6v3jS0uVr1jrJ06apHqlHb5C5uouVTMuWRYUSKuiOkyxH8Nm36QCLQhUv618H\nDGkf13wJ+jWQRIOJ0Ort0fForgZn6L8tkU3q5de7ls+XpsIQ5i8=\n=69eT\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f375fb9a0dff7ccead80626f4aee853db7799e6f",
          "sha": "f375fb9a0dff7ccead80626f4aee853db7799e6f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f375fb9a0dff7ccead80626f4aee853db7799e6f"
        }
      ],
      "message": "rpc: getTransactionsUpdated via miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T15:00:58Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-05-30T14:46:29Z"
      },
      "sha": "d2a64bb0bf99fb03602755cb523657ccf8e9ca4a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNjMmM0ZWE4MzZhMzRjZTZiNzViYTY0YTdjMDI5Mzg5YTdiOWE2MmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cc2c4ea836a34ce6b75ba64a7c029389a7b9a62e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cc2c4ea836a34ce6b75ba64a7c029389a7b9a62e",
      "tree": {
        "sha": "20d32480fa05f56ad97ef74f929fc17b029de0c8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/20d32480fa05f56ad97ef74f929fc17b029de0c8"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 20d32480fa05f56ad97ef74f929fc17b029de0c8\nparent d2a64bb0bf99fb03602755cb523657ccf8e9ca4a\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717081619 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1717772458 +0200\n\nrpc: call processNewBlock via miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZjIKoACgkQV/+b28ww\nEAk6JBAAhWPfGmbUHhpubXaXgf4bRIeXdVH8wBJgUt8gE76b2xrlAPyji3y+vVDN\ncluVOb/Y2tuUEaW/hCA8qK5Zpj0QcBrZJDAeCq52oo0MWHPnvfeezQizs8b2fOMk\nZAnIywBqGI7oX0RXsCqziirwoAQaarPwT2rskfVxf+9yqxS3VjVsjRUBmGAr3hTV\nSiB5rdeEXGRtI/PS/C9LhSDZfhOOD4fgysqQ8vt3uGM4zT0fk0PUfQBjgM0zk5Rl\nVgjKj0IGywyxWS1cTM05Fi8hUZq1Ow77A8EbLOcWFRF94MkaOYIb0X3r/c8NTG4o\neZTxyR/ziwdXmVUFS0qYPQQD/akaABfSPYLyLKoEevUxuq8wgEPsdMGddWuBj0qm\n8+5Cpc72y47B6WO3rOBJM8+Q9NS9YYZd2dCG1bGsU0E/WNvUzMKMdggodjjGOrhr\n22RzdRNFYmyPMOQqJ+Ca6PxgQnKllN+HScqUlKxz1nwmrbU6NpjASJUuXGbCj2Hw\nHgEUsUWH72YFiro3Mp9hnVXuni8K23Gqxm6w6xtbQbXQCdefzouzulhYhfDQ9lDY\nC+vnwf5omJmEhfg2+aD+KXbQ9GcNbzGOGT1ZRxyyqSSUGwVINwzAKD8pD8JrWojj\nmW9nWjWcZaHByWITY8s/wu//29bi0RoclG6q08yiEBacfKig1AA=\n=7zFx\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d2a64bb0bf99fb03602755cb523657ccf8e9ca4a",
          "sha": "d2a64bb0bf99fb03602755cb523657ccf8e9ca4a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d2a64bb0bf99fb03602755cb523657ccf8e9ca4a"
        }
      ],
      "message": "rpc: call processNewBlock via miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T15:00:58Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-05-30T15:06:59Z"
      },
      "sha": "cc2c4ea836a34ce6b75ba64a7c029389a7b9a62e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFjNTUyNjk4ODUxM2ZmNTY4ZThiMDdlMGU0MDg0NmNlYjA2MDJmNmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c5526988513ff568e8b07e0e40846ceb0602f6b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1c5526988513ff568e8b07e0e40846ceb0602f6b",
      "tree": {
        "sha": "d5aa0c968e543819de47248faf3959dc762f1f67",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d5aa0c968e543819de47248faf3959dc762f1f67"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d5aa0c968e543819de47248faf3959dc762f1f67\nparent cc2c4ea836a34ce6b75ba64a7c029389a7b9a62e\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717753878 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1717772458 +0200\n\nrpc: minize getTipHash() calls in gbt\n\nSet tip at the start of the function and only update it for a long poll.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZjIKsACgkQV/+b28ww\nEAmeBg//fy6YBsX94Co17EtQ3hm9RwA6jv6954/hdBzt3CHS5RrCG8G80iWTQAQQ\nMXKGek+y/qEysR6nKPUKttDqoVDXDGAS+IKBLRrTR5WDSjXE2+gXP1f/1yrusWp0\nLOyzxoQO80pLV2ARBqx+IA4Ajx1U1oL7P2ZrVjAUP40YTLgJBv1nMwuGdFCVTBxJ\n6w5GIauod0RRjZtkljusVAShuhCf1IiVGHFNz+YogaAJgKMMHy4BbmgP1f2SiBL8\nhihTVYsLSlUkiGQIW1MFt0i1aGApuXC4z24ww2gifznEcv026Y+wVcO0FcUFp+2N\n6Mk6nVB3h1PM/Q8PQ/I1MZlrbbuYLpWEoVXR02EisG1jxlb+KDIgkSbs/tB7cBgc\n6NI/m58V5lFy3l8yCrGX/0+FZTrvcF/2Vi4L9xv/rc4oIYJR4/Nsc3YJjAM3sY0v\nX3n9GwCIQxguVO7+SqXqHpjAxIkhuiYlAayckhT1wOzeucs7mVSAlXDDBzVo6q7r\n4noSGZQoSxEv9kUUci2OQRDJT7wJorViQEycqbZSsTaYCYO0CUl074+lwTfeZsXR\nI603oFTVx42YW3S0/CfLvDSqo0efT97SFucEwxY5e2LBhRuI+cRy2Zdl+Ot9fiXH\nXNir+DQB2jY6A0ZHbsEuRZ2PHD9X/nEl2eo7pMoCZqz1X+H8xBs=\n=kUms\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cc2c4ea836a34ce6b75ba64a7c029389a7b9a62e",
          "sha": "cc2c4ea836a34ce6b75ba64a7c029389a7b9a62e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cc2c4ea836a34ce6b75ba64a7c029389a7b9a62e"
        }
      ],
      "message": "rpc: minize getTipHash() calls in gbt\n\nSet tip at the start of the function and only update it for a long poll.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T15:00:58Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T09:51:18Z"
      },
      "sha": "1c5526988513ff568e8b07e0e40846ceb0602f6b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZlYmQzZDFjM2Q0MWNmNjA4M2JhZjk5MGZiMmEzYTY5Y2FkZTM2NGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "tree": {
        "sha": "c1d19b9f998e1e61205676b0c827eafcd0f9aca9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c1d19b9f998e1e61205676b0c827eafcd0f9aca9"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c1d19b9f998e1e61205676b0c827eafcd0f9aca9\nparent 1c5526988513ff568e8b07e0e40846ceb0602f6b\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717764538 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1717772459 +0200\n\nrpc: call IsInitialBlockDownload via miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZjIKsACgkQV/+b28ww\nEAlQiRAAkvmNzJBzP8am8FDcqBqGVZasXbY8RYcj1KWtICRzG5rznpw7H8qMKibz\nArZK6Fu2eakYDz9rZGBthy84hQ1wmLOW34M+cPLQja/OiwT2wHNJfHJASZFeK4YG\nPF+BRSDoffWFt/6F2JJNyshbtYlasdv67bvUbJ/xNcyJ7kGFZC5A8QgTf6um70cS\n1sM8Eh0EceQlMwPVwdlsNkMY0mX6/Crhl6Ro37wEwJwonYhoivJV3QP7o7GeaKXs\n77Uyhw5tGXPqAuk02/XENv7m2j+WkR5KEt6SO+qs75PPChY+W2I40/bkRUpQDYet\nlZCuQc90khkHxUH0rP6IRhkYAOUgmhqGiE0e8pIAKVa2xQFByTBWdku/tZchRybK\nES35PBrHkx5TTOJ4T65oagcuwD+QZ0FPNlR9Gwjr3mi2nGE6zhxIHFMMutzvEJ8t\nv6mHqlaxzra0tX2uE0jvuDeX5VtGHxjNquKoYBmlv1RJjC3UjgKdZr0f+0sLHEuK\nQ4gUlIIZiPKrQWKUNlnEi/+38ijf9ZyV3nTvL6FnnQusUebpyApog02EDHJU6kLY\nY5KlbZsaUU+/DDOHI65M3jsgMv5J2IX0JwkNPugjc2jbQr3Xgm8r+Tm55VZiTArH\ndL5f7MGAoDBjBmktfshAUbg/PTF+4f1fSaGO22g78+kVm1Xxbg4=\n=5qss\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c5526988513ff568e8b07e0e40846ceb0602f6b",
          "sha": "1c5526988513ff568e8b07e0e40846ceb0602f6b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1c5526988513ff568e8b07e0e40846ceb0602f6b"
        }
      ],
      "message": "rpc: call IsInitialBlockDownload via miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T15:00:59Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T12:48:58Z"
      },
      "sha": "febd3d1c3d41cf6083baf990fb2a3a69cade364a"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13082327651,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMLxHpj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13082327651",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T15:04:10Z"
    },
    {
      "event": "labeled",
      "id": 13082328585,
      "node_id": "LE_lADOABII586KnWy7zwAAAAMLxH4J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13082328585",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T15:04:15Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2155027685,
      "node_id": "IC_kwDOABII586Acxzl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2155027685",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T15:04:18Z",
      "updated_at": "2024-06-07T15:05:11Z",
      "author_association": "MEMBER",
      "body": "The `generateblock` RPC relies on not passing the mempool to `BlockAssembler`, in order to allow manual transaction selection. So I added `bool use_mempool = true` to `createNewBlock`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2155027685",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "unlabeled",
      "id": 13084879056,
      "node_id": "UNLE_lADOABII586KnWy7zwAAAAML62jQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13084879056",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T19:42:31Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1621067334",
      "pull_request_review_id": 2088822400,
      "id": 1621067334,
      "node_id": "PRRC_kwDOABII585gn4ZG",
      "diff_hunk": "@@ -854,6 +856,13 @@ class MinerImpl : public Miner\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, chainman().ActiveChain().Tip(), /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& scriptPubKeyIn) override\n+    {\n+        LOCK(::cs_main);\n+        // TODO pass mempool sanely\n+        return BlockAssembler{chainman().ActiveChainstate(), &*(context()->mempool)}.CreateNewBlock(scriptPubKeyIn);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "f04cf9f75054573c204245f7bb1e6813cce1fed8",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "f04cf9f75054573c204245f7bb1e6813cce1fed8: I guess I should change the `BlockAssembler` constructor",
      "created_at": "2024-05-30T16:36:58Z",
      "updated_at": "2024-05-30T16:36:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1621067334",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1621067334"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 863,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1621071328",
      "pull_request_review_id": 2088829216,
      "id": 1621071328,
      "node_id": "PRRC_kwDOABII585gn5Xg",
      "diff_hunk": "@@ -31,6 +34,7 @@ ChainstateManager& EnsureAnyChainman(const std::any& context);\n CBlockPolicyEstimator& EnsureFeeEstimator(const node::NodeContext& node);\n CBlockPolicyEstimator& EnsureAnyFeeEstimator(const std::any& context);\n CConnman& EnsureConnman(const node::NodeContext& node);\n+interfaces::Miner& EnsureMiner(const node::NodeContext& node);",
      "path": "src/rpc/server_util.h",
      "position": null,
      "original_position": 14,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "b30a8aca5191186f56eb1e9bd8f1a1d899a07039",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@ryanofsky I'm not sure what the design philophy is behind `Ensure` and `EnsureAny`. The other methods here return more low level objects.\r\n\r\nPerhaps related to what you said in https://github.com/bitcoin/bitcoin/pull/29346#issuecomment-2110376536:\r\n\r\n> I think of \"Context\" as being a passive container for state instead of an object you would call methods on. The top level interfaces like `interfaces::Chain` `interface::Node` `interfaces::Wallet` are actually stateless themselves, and only point to state stored in other places. (The idea is to let interface instances be created and destroyed freely, since with multiprocess support new processes can connect and create interface pointers that get destroyed on disconnection, and the state of the node shouldn't be affected too much from connections and disconnections. Anyway, the mining interface could follow this pattern.)",
      "created_at": "2024-05-30T16:40:43Z",
      "updated_at": "2024-05-30T16:41:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1621071328",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1621071328"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626320289",
      "pull_request_review_id": 2096918003,
      "id": 1626320289,
      "node_id": "PRRC_kwDOABII585g762h",
      "diff_hunk": "@@ -31,6 +34,7 @@ ChainstateManager& EnsureAnyChainman(const std::any& context);\n CBlockPolicyEstimator& EnsureFeeEstimator(const node::NodeContext& node);\n CBlockPolicyEstimator& EnsureAnyFeeEstimator(const std::any& context);\n CConnman& EnsureConnman(const node::NodeContext& node);\n+interfaces::Miner& EnsureMiner(const node::NodeContext& node);",
      "path": "src/rpc/server_util.h",
      "position": null,
      "original_position": 14,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "b30a8aca5191186f56eb1e9bd8f1a1d899a07039",
      "in_reply_to_id": 1621071328,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1621071328\r\n\r\nIn commit \"Introduce Miner interface\" (b30a8aca5191186f56eb1e9bd8f1a1d899a07039)\r\n\r\n> @ryanofsky I'm not sure what the design philophy is behind `Ensure` and `EnsureAny`. The other methods here return more low level objects.\r\n\r\nThis looks good to me. Ensure functions are just supposed to make it possible to access node/wallet state from RPCs in a type-safe way. There are similar functions for the wallet in src/wallet/rpc/util.h.\r\n\r\nIt is true that existing RPC methods just call node and wallet functions directly, instead of going through interface classes like the GUI does, because there hasn't been a need for preventing RPC methods from accessing node or wallet internals.\r\n\r\nBut it would be nice if we could prevent Stratum code from accessing node internals, so having a mining interface seems useful, and having the mining RPCs use the interface is a nice way to test it and make sure it is full-featured.",
      "created_at": "2024-06-04T16:43:01Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626320289",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626320289"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626328774",
      "pull_request_review_id": 2096918003,
      "id": 1626328774,
      "node_id": "PRRC_kwDOABII585g787G",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INTERFACES_MINER_H\n+#define BITCOIN_INTERFACES_MINER_H\n+\n+namespace node {\n+struct CBlockTemplate;\n+struct NodeContext;\n+} // namespace node\n+\n+class CBlockIndex;\n+class BlockValidationState;\n+class CBlockIndex;\n+\n+namespace interfaces {\n+\n+//! Interface giving clients (RPC, Stratum v2 Template Provider in the future)\n+//! ability to create block templates.\n+\n+class Miner\n+{\n+public:\n+    virtual ~Miner() {}\n+\n+    /** If this chain is exclusively used for testing */\n+    virtual bool isTestChain() = 0;\n+\n+    //! Returns the index entry for the tip of this chain, or nullptr if none.\n+    virtual CBlockIndex* getTip() = 0;",
      "path": "src/interfaces/miner.h",
      "position": null,
      "original_position": 31,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: getblocktemplate getTip() via Miner interface\" (d5b354ed93266d76ab9e2dd2af9c9b611583a1ee)\r\n\r\nIt looks like all the other `Miner` parameters and return values are serializable except this CBlockIndex pointer. \r\n\r\nThis is fine for this PR, but if you wanted to support stratum code running in another process and calling this, you could change this return value to a struct containing whatever information the miner needs to know about the tip (block hash, previous block hash, block time, etc), instead returning of this pointer to a tree of blocks, which can't easily be used from another process.",
      "created_at": "2024-06-04T16:50:24Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626328774",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626328774"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626346904",
      "pull_request_review_id": 2096918003,
      "id": 1626346904,
      "node_id": "PRRC_kwDOABII585g8BWY",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INTERFACES_MINER_H\n+#define BITCOIN_INTERFACES_MINER_H\n+\n+namespace node {\n+struct CBlockTemplate;\n+struct NodeContext;\n+} // namespace node\n+\n+class CBlockIndex;\n+class BlockValidationState;\n+class CBlockIndex;\n+\n+namespace interfaces {\n+\n+//! Interface giving clients (RPC, Stratum v2 Template Provider in the future)\n+//! ability to create block templates.\n+\n+class Miner",
      "path": "src/interfaces/miner.h",
      "position": null,
      "original_position": 22,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Introduce Miner interface\" (b30a8aca5191186f56eb1e9bd8f1a1d899a07039)\r\n\r\nNot important, but could consider renaming this class.\r\n\r\n- interfaces::Node is an interface used by the gui to control the node\r\n- interfaces::Wallet is an interface used by the gui to control the node\r\n- interface::Chain is an interface used by the wallet and indexes to sync with the chain\r\n\r\ninterfaces::Miner sounds like an interface that would be used to control a miner, which is not really what this is. Maybe interfaces::Mining or interfaces::MiningService would be better.",
      "created_at": "2024-06-04T17:05:24Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626346904",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626346904"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626351637",
      "pull_request_review_id": 2096918003,
      "id": 1626351637,
      "node_id": "PRRC_kwDOABII585g8CgV",
      "diff_hunk": "@@ -694,6 +696,7 @@ static RPCHelpMan getblocktemplate()\n                 throw JSONRPCError(RPC_DESERIALIZATION_ERROR, \"Block decode failed\");\n \n             uint256 hash = block.GetHash();\n+",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "d880aa0ebe374394b2f8c061ebc7d428f899b59b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: call TestBlockValidity via miner interface\" (d880aa0ebe374394b2f8c061ebc7d428f899b59b)\r\n\r\nMaybe unintended whitespace change here",
      "created_at": "2024-06-04T17:09:37Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626351637",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626351637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 699,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626371955",
      "pull_request_review_id": 2096918003,
      "id": 1626371955,
      "node_id": "PRRC_kwDOABII585g8Hdz",
      "diff_hunk": "@@ -761,7 +759,7 @@ static RPCHelpMan getblocktemplate()\n         else\n         {\n             // NOTE: Spec does not specify behaviour for non-string longpollid, but this makes testing easier\n-            hashWatchedChain = active_chain.Tip()->GetBlockHash();\n+            hashWatchedChain = miner.getTip()->GetBlockHash();",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "d5b354ed93266d76ab9e2dd2af9c9b611583a1ee",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: getblocktemplate getTip() via Miner interface\" (d5b354ed93266d76ab9e2dd2af9c9b611583a1ee)\r\n\r\nWould suggest introducing a `CBlockIndex* tip{miner.getTip()};` variable, using it where possible, and updating it as needed instead of calling `miner.getTip()` repeatedly in this function.\r\n\r\nIt seems like the reason it is ok to make multiple getTip() calls is that cs_main is locked for most of this function. But more ideally, this function would not be locking cs_main directly, only calling interface methods which lock cs_main internally. Using a tip variable in this code, instead of just assuming tip cannot change, would get closer to this state.",
      "created_at": "2024-06-04T17:24:56Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626371955",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626371955"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 762,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626379012",
      "pull_request_review_id": 2096918003,
      "id": 1626379012,
      "node_id": "PRRC_kwDOABII585g8JME",
      "diff_hunk": "@@ -854,6 +856,13 @@ class MinerImpl : public Miner\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, chainman().ActiveChain().Tip(), /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& scriptPubKeyIn) override\n+    {\n+        LOCK(::cs_main);\n+        // TODO pass mempool sanely\n+        return BlockAssembler{chainman().ActiveChainstate(), &*(context()->mempool)}.CreateNewBlock(scriptPubKeyIn);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "f04cf9f75054573c204245f7bb1e6813cce1fed8",
      "in_reply_to_id": 1621067334,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1621067334\r\n\r\n> I guess I should change the `BlockAssembler` constructor\r\n\r\nIn commit \"rpc: call CreateNewBlock via miner interface\" (f04cf9f75054573c204245f7bb1e6813cce1fed8)\r\n\r\nI don't actually understand the TODO here. The way the mempool is passed seems ok. You could do mempool.get() instead of &*mempool, but both should be equivalent.",
      "created_at": "2024-06-04T17:30:34Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626379012",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626379012"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 863,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967421",
      "pull_request_review_id": 2104138088,
      "id": 1630967421,
      "node_id": "PRRC_kwDOABII585hNpZ9",
      "diff_hunk": "@@ -761,7 +759,7 @@ static RPCHelpMan getblocktemplate()\n         else\n         {\n             // NOTE: Spec does not specify behaviour for non-string longpollid, but this makes testing easier\n-            hashWatchedChain = active_chain.Tip()->GetBlockHash();\n+            hashWatchedChain = miner.getTip()->GetBlockHash();",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "d5b354ed93266d76ab9e2dd2af9c9b611583a1ee",
      "in_reply_to_id": 1626371955,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm now setting `uint256 tip{miner.getTipHash()};` at the top. For long polls it's updated after the wait. See d1be135e568605539fa3932da6e7c5032816825b.",
      "created_at": "2024-06-07T09:56:37Z",
      "updated_at": "2024-06-07T09:56:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1630967421",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967421"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 762,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967487",
      "pull_request_review_id": 2104138185,
      "id": 1630967487,
      "node_id": "PRRC_kwDOABII585hNpa_",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INTERFACES_MINER_H\n+#define BITCOIN_INTERFACES_MINER_H\n+\n+namespace node {\n+struct CBlockTemplate;\n+struct NodeContext;\n+} // namespace node\n+\n+class CBlockIndex;\n+class BlockValidationState;\n+class CBlockIndex;\n+\n+namespace interfaces {\n+\n+//! Interface giving clients (RPC, Stratum v2 Template Provider in the future)\n+//! ability to create block templates.\n+\n+class Miner",
      "path": "src/interfaces/miner.h",
      "position": null,
      "original_position": 22,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "in_reply_to_id": 1626346904,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Renamed to `Mining`",
      "created_at": "2024-06-07T09:56:40Z",
      "updated_at": "2024-06-07T09:56:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1630967487",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967487"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967663",
      "pull_request_review_id": 2104138482,
      "id": 1630967663,
      "node_id": "PRRC_kwDOABII585hNpdv",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INTERFACES_MINER_H\n+#define BITCOIN_INTERFACES_MINER_H\n+\n+namespace node {\n+struct CBlockTemplate;\n+struct NodeContext;\n+} // namespace node\n+\n+class CBlockIndex;\n+class BlockValidationState;\n+class CBlockIndex;\n+\n+namespace interfaces {\n+\n+//! Interface giving clients (RPC, Stratum v2 Template Provider in the future)\n+//! ability to create block templates.\n+\n+class Miner\n+{\n+public:\n+    virtual ~Miner() {}\n+\n+    /** If this chain is exclusively used for testing */\n+    virtual bool isTestChain() = 0;\n+\n+    //! Returns the index entry for the tip of this chain, or nullptr if none.\n+    virtual CBlockIndex* getTip() = 0;",
      "path": "src/interfaces/miner.h",
      "position": null,
      "original_position": 31,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "in_reply_to_id": 1626328774,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I replaced `getTip()` with `getTipHash()`. `Sv2TemplateProvider` doesn't need it, so for now I use it in a few places in `rpc/mining.cpp`, but then fall back to `chainman.m_blockman.LookupBlockIndex(miner.getTipHash())` where we need more info.\r\n\r\nA future refactor could move more of `getblocktemplate` implementation details out of the RPC.",
      "created_at": "2024-06-07T09:56:48Z",
      "updated_at": "2024-06-07T09:56:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1630967663",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967783",
      "pull_request_review_id": 2104138685,
      "id": 1630967783,
      "node_id": "PRRC_kwDOABII585hNpfn",
      "diff_hunk": "@@ -854,6 +856,13 @@ class MinerImpl : public Miner\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, chainman().ActiveChain().Tip(), /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& scriptPubKeyIn) override\n+    {\n+        LOCK(::cs_main);\n+        // TODO pass mempool sanely\n+        return BlockAssembler{chainman().ActiveChainstate(), &*(context()->mempool)}.CreateNewBlock(scriptPubKeyIn);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "original_commit_id": "f04cf9f75054573c204245f7bb1e6813cce1fed8",
      "in_reply_to_id": 1621067334,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, replaced it with `get()`.",
      "created_at": "2024-06-07T09:56:55Z",
      "updated_at": "2024-06-07T09:56:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1630967783",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 863,
      "side": "RIGHT"
    }
  ]
}