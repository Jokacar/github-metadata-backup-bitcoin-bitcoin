{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553",
    "id": 1755036646,
    "node_id": "PR_kwDOABII585om7vm",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/29553",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/29553.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/29553.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
    "number": 29553,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "assumeutxo: Add dumptxoutset height param, remove shell scripts",
    "user": {
      "login": "fjahr",
      "id": 1322187,
      "node_id": "MDQ6VXNlcjEzMjIxODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fjahr",
      "html_url": "https://github.com/fjahr",
      "followers_url": "https://api.github.com/users/fjahr/followers",
      "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
      "organizations_url": "https://api.github.com/users/fjahr/orgs",
      "repos_url": "https://api.github.com/users/fjahr/repos",
      "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fjahr/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This adds a height parameter to the `dumptxoutset` RPC. This internalizes the workflow that was previously done by scripts: roll back the chain to the height we actually want the snapshot from, create the snapshot, roll forward to the real tip again.\r\n\r\nThe nice thing about internalizing this functionality is that we can write tests for the code and it gives us more options to make the functionality robust. The shell scripts we have so far will be more cumbersome to maintain in the long run, especially since we will only notice later when we have broken them. I think it's safe to remove these `test_utxo_snapshots.sh` as well when we have this option in `dumptxoutset` because we have also added some good additional functional test coverage for this functionality.",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "created_at": "2024-03-04T15:58:11Z",
    "updated_at": "2024-06-06T15:30:40Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "f638b769a45f82f58555ff8a6e711280a34c2986",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "BrandonOdiwuor",
        "id": 15610188,
        "node_id": "MDQ6VXNlcjE1NjEwMTg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/15610188?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BrandonOdiwuor",
        "html_url": "https://github.com/BrandonOdiwuor",
        "followers_url": "https://api.github.com/users/BrandonOdiwuor/followers",
        "following_url": "https://api.github.com/users/BrandonOdiwuor/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BrandonOdiwuor/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BrandonOdiwuor/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BrandonOdiwuor/subscriptions",
        "organizations_url": "https://api.github.com/users/BrandonOdiwuor/orgs",
        "repos_url": "https://api.github.com/users/BrandonOdiwuor/repos",
        "events_url": "https://api.github.com/users/BrandonOdiwuor/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BrandonOdiwuor/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "fjahr:2024-03-dumptxoutset-height",
      "ref": "2024-03-dumptxoutset-height",
      "sha": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 196253948,
        "node_id": "MDEwOlJlcG9zaXRvcnkxOTYyNTM5NDg=",
        "name": "bitcoin",
        "full_name": "fjahr/bitcoin",
        "owner": {
          "login": "fjahr",
          "id": 1322187,
          "node_id": "MDQ6VXNlcjEzMjIxODc=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/fjahr",
          "html_url": "https://github.com/fjahr",
          "followers_url": "https://api.github.com/users/fjahr/followers",
          "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
          "organizations_url": "https://api.github.com/users/fjahr/orgs",
          "repos_url": "https://api.github.com/users/fjahr/repos",
          "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/fjahr/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/fjahr/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/fjahr/bitcoin",
        "archive_url": "https://api.github.com/repos/fjahr/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/fjahr/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/fjahr/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/fjahr/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/fjahr/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/fjahr/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/fjahr/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/fjahr/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/fjahr/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/fjahr/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/fjahr/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/fjahr/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/fjahr/bitcoin/events",
        "forks_url": "https://api.github.com/repos/fjahr/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/fjahr/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/fjahr/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/fjahr/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/fjahr/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/fjahr/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/fjahr/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/fjahr/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/fjahr/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/fjahr/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/fjahr/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/fjahr/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/fjahr/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/fjahr/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/fjahr/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/fjahr/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:fjahr/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/fjahr/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/fjahr/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/fjahr/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/fjahr/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/fjahr/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/fjahr/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/fjahr/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/fjahr/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/fjahr/bitcoin/hooks",
        "svn_url": "https://github.com/fjahr/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 247575,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-06T15:30:24Z",
        "created_at": "2019-07-10T18:11:06Z",
        "updated_at": "2024-04-27T19:57:43Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "1040a1fc807ed984020eeaa6e90b5bf070b61b05",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35475,
        "stargazers_count": 76744,
        "watchers_count": 76744,
        "size": 260208,
        "default_branch": "master",
        "open_issues_count": 682,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-06T15:52:42Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-06-06T15:25:15Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 171,
    "deletions": 379,
    "changed_files": 7,
    "commits": 7,
    "review_comments": 9,
    "comments": 9
  },
  "events": [
    {
      "event": "commented",
      "id": 1976911164,
      "node_id": "IC_kwDOABII58511UU8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1976911164",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-04T15:58:15Z",
      "updated_at": "2024-06-06T15:10:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29553).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1977099942), [Sjors](https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1978480989), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1980783607), [BrandonOdiwuor](https://github.com/bitcoin/bitcoin/pull/29553#pullrequestreview-1919888870) |\n| Stale ACK | [alfonsoromanz](https://github.com/bitcoin/bitcoin/pull/29553#pullrequestreview-2033825476) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29681](https://github.com/bitcoin/bitcoin/pull/29681) (test: loading assumeutxo snapshot start states by BrandonOdiwuor)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1976911164",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553"
    },
    {
      "event": "commented",
      "id": 1977099942,
      "node_id": "IC_kwDOABII58512Cam",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1977099942",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-04T17:25:27Z",
      "updated_at": "2024-03-04T17:25:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nNice idea. I think it makes sense to do the rollback (and roll forward after dump creation) directly in the RPC call, rather than relying on potentially fragile and poorly maintained shell scripts. One suggestion: on pruned nodes, the RPC should fail early if the block of the snapshot height is below the pruned block height, similar like what the script does:\r\nhttps://github.com/bitcoin/bitcoin/blob/98005b6a17907c4f7bdcf802ee96c274492f902a/contrib/devtools/utxo_snapshot.sh#L34-L37\r\n\r\nI'm neutral about removing `test_utxo_snapshots.sh`. This seems to be more meant like an interactive demo to get familiar with AssumeUTXO and as such could still make sense for some?",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1977099942",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553"
    },
    {
      "event": "reviewed",
      "id": 1914795143,
      "node_id": "PRR_kwDOABII585yIXSH",
      "url": null,
      "actor": null,
      "commit_id": "0325335ec019620ba388ec9cef7971b21746931f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#pullrequestreview-1914795143",
      "submitted_at": "2024-03-04T18:21:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
    },
    {
      "event": "commented",
      "id": 1977283372,
      "node_id": "IC_kwDOABII58512vMs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1977283372",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-04T19:14:21Z",
      "updated_at": "2024-03-04T19:14:21Z",
      "author_association": "MEMBER",
      "body": "Seems like this should freeze indexes, wallets, etc and hold a lock so nothing else happens during the process...?",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1977283372",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-05T04:29:02Z",
      "updated_at": "2024-03-05T04:29:02Z",
      "source": {
        "issue": {
          "id": 2152991981,
          "node_id": "PR_kwDOABII585n2i5-",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29478",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29478/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29478/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29478/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29478",
          "number": 29478,
          "state": "closed",
          "state_reason": null,
          "title": "test: Test new header sync behavior in loadtxoutset",
          "body": "It adds a test for the change to `loadtxoutset` made in #29345.  Before that change the test doesn't fail right away but times out after 10 minutes.\r\n\r\nAlso removes a `sync_blocks` call that didn't seem to do anything valuable.",
          "user": {
            "login": "fjahr",
            "id": 1322187,
            "node_id": "MDQ6VXNlcjEzMjIxODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjahr",
            "html_url": "https://github.com/fjahr",
            "followers_url": "https://api.github.com/users/fjahr/followers",
            "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
            "organizations_url": "https://api.github.com/users/fjahr/orgs",
            "repos_url": "https://api.github.com/users/fjahr/repos",
            "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fjahr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29478",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29478",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29478.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29478.patch"
          },
          "closed_at": "2024-03-13T16:04:05Z",
          "created_at": "2024-02-25T23:29:42Z",
          "updated_at": "2024-03-13T16:04:06Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-05T04:48:29Z",
      "updated_at": "2024-03-05T04:48:29Z",
      "source": {
        "issue": {
          "id": 2133039837,
          "node_id": "PR_kwDOABII585mylYC",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29428",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29428/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29428/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29428/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29428",
          "number": 29428,
          "state": "closed",
          "state_reason": null,
          "title": "test: Assumeutxo: snapshots with less work should not be loaded",
          "body": "This PR adds a test which checks that snapshots with less accumulated work than the node's active chain, should not be loaded and return with an error. Although in a different context of discussion the missing test was detect in a thread in https://github.com/bitcoin/bitcoin/pull/29394 (see https://github.com/bitcoin/bitcoin/pull/29394#discussion_r1484122214)\r\n",
          "user": {
            "login": "hernanmarino",
            "id": 87907936,
            "node_id": "MDQ6VXNlcjg3OTA3OTM2",
            "avatar_url": "https://avatars.githubusercontent.com/u/87907936?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hernanmarino",
            "html_url": "https://github.com/hernanmarino",
            "followers_url": "https://api.github.com/users/hernanmarino/followers",
            "following_url": "https://api.github.com/users/hernanmarino/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hernanmarino/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hernanmarino/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hernanmarino/subscriptions",
            "organizations_url": "https://api.github.com/users/hernanmarino/orgs",
            "repos_url": "https://api.github.com/users/hernanmarino/repos",
            "events_url": "https://api.github.com/users/hernanmarino/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hernanmarino/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29428",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29428",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29428.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29428.patch"
          },
          "closed_at": "2024-06-04T23:13:25Z",
          "created_at": "2024-02-13T20:01:01Z",
          "updated_at": "2024-06-04T23:13:25Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-05T05:13:15Z",
      "updated_at": "2024-03-05T05:13:15Z",
      "source": {
        "issue": {
          "id": 2115277897,
          "node_id": "PR_kwDOABII585l2bR0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29370",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29370/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29370/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29370/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29370",
          "number": 29370,
          "state": "closed",
          "state_reason": null,
          "title": "assumeutxo: Get rid of faked nTx and nChainTx values",
          "body": "The `PopulateAndValidateSnapshot` function introduced in f6e2da5fb7c6406c37612c838c998078ea8d2252 from #19806 has been setting fake `nTx` and `nChainTx` values that can show up in RPC results (https://github.com/bitcoin/bitcoin/issues/29328) and make `CBlockIndex` state hard to reason about, because it is difficult to know whether the values are real or fake.\r\n\r\nRevert to previous behavior of setting `nTx` and `nChainTx` to 0 when the values are unknown, instead of faking them. Also drop no-longer needed `BLOCK_ASSUMED_VALID` flag.\r\n\r\nDropping the faked values also fixes assert failures in the `CheckBlockIndex` `(pindex->nChainTx == pindex->nTx + prev_chain_tx)` check that could happen previously if forked or out-of-order blocks before the snapshot got submitted while the snapshot was being validated. The PR includes two commits adding tests for these failures and describing them in detail.\r\n\r\nCompatibility note: This change could cause new `-checkblockindex` failures if a snapshot was loaded by a previous version of Bitcoin Core and not fully validated, because fake `nTx` values will have been saved to the block index. It would be pretty easy to avoid these failures by adding some compatibility code to `LoadBlockIndex` and changing `nTx` values from 1 to 0 when they are fake (when `(pindex->nStatus & BLOCK_VALID_MASK) < BLOCK_VALID_TRANSACTIONS`), but a little simpler not to worry about being compatible in this case.",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignee": {
            "login": "achow101",
            "id": 3782274,
            "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/achow101",
            "html_url": "https://github.com/achow101",
            "followers_url": "https://api.github.com/users/achow101/followers",
            "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
            "organizations_url": "https://api.github.com/users/achow101/orgs",
            "repos_url": "https://api.github.com/users/achow101/repos",
            "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/achow101/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "achow101",
              "id": 3782274,
              "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
              "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/achow101",
              "html_url": "https://github.com/achow101",
              "followers_url": "https://api.github.com/users/achow101/followers",
              "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
              "organizations_url": "https://api.github.com/users/achow101/orgs",
              "repos_url": "https://api.github.com/users/achow101/repos",
              "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/achow101/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 27,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29370",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29370",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29370.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29370.patch"
          },
          "closed_at": "2024-03-20T16:56:58Z",
          "created_at": "2024-02-02T16:18:52Z",
          "updated_at": "2024-03-20T19:11:16Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-05T08:19:09Z",
      "updated_at": "2024-03-05T08:19:09Z",
      "source": {
        "issue": {
          "id": 1930981210,
          "node_id": "PR_kwDOABII585cJuea",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28608",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28608/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28608/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28608/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28608",
          "number": 28608,
          "state": "open",
          "state_reason": null,
          "title": "assumeutxo state and locking cleanup",
          "body": "**This is based on #29370.** The non-base commits are:\r\n\r\n- [`35d0519c4728` refactor: Replace ChainstateManager IBD and snapshot chainstates with flat list of chainstates](https://github.com/bitcoin/bitcoin/pull/28608/commits/35d0519c4728a43c0c4ac495692dc63be98543a2)\r\n- [`0bb0db780ff6` broken](https://github.com/bitcoin/bitcoin/pull/28608/commits/0bb0db780ff68241c25faf5ffc2cd29786685d0e)\r\n\r\n---\r\n\r\nThis is a draft PR to follow up on comments about simplifying assumetxo state representation https://github.com/bitcoin/bitcoin/pull/28562#discussion_r1344824078, https://github.com/bitcoin/bitcoin/pull/27746#discussion_r1321872262, https://github.com/bitcoin/bitcoin/pull/24232#discussion_r835355848 so validation code is less complicated, and each chainstate is handled independently without references to other assumeutxo chainstates everywhere.\r\n\r\nImplementation is not done, but the plan is also for this PR to make two functional improvements:\r\n\r\n1. Not locking cs_main while validating assumeutxo snapshots, so the node is responsive when the background chainstate download finishes.\r\n2. Deleting the background chainstate right away when it is no longer needed, instead of waiting until the next restart, which takes up extra disk space and slows down the next startup.",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28608",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28608",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28608.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28608.patch"
          },
          "created_at": "2023-10-06T22:01:03Z",
          "updated_at": "2024-06-06T03:18:46Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1978480989,
      "node_id": "IC_kwDOABII58517Tld",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1978480989",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-05T10:51:12Z",
      "updated_at": "2024-03-05T10:51:12Z",
      "author_association": "MEMBER",
      "body": "Concept ACK. But rather than relying on block invalidation, I would prefer to have a clean rollback. That would be useful as it's own RPC too: turn off network, call `rollback N/HASH`, turn on network and it will sync normally. See #29565.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1978480989",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553"
    },
    {
      "event": "commented",
      "id": 1980783607,
      "node_id": "IC_kwDOABII5852EFv3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1980783607",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-06T12:40:21Z",
      "updated_at": "2024-03-06T12:40:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-1980783607",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553"
    },
    {
      "event": "reviewed",
      "id": 1919888870,
      "node_id": "PRR_kwDOABII585yby3m",
      "url": null,
      "actor": null,
      "commit_id": "0325335ec019620ba388ec9cef7971b21746931f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\ngreat idea moving `InvalidateBlock` and `ReconsiderBlock` to the `dumputxoset` RPC instead of relying on shell scripts",
      "user": {
        "login": "BrandonOdiwuor",
        "id": 15610188,
        "node_id": "MDQ6VXNlcjE1NjEwMTg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/15610188?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BrandonOdiwuor",
        "html_url": "https://github.com/BrandonOdiwuor",
        "followers_url": "https://api.github.com/users/BrandonOdiwuor/followers",
        "following_url": "https://api.github.com/users/BrandonOdiwuor/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BrandonOdiwuor/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BrandonOdiwuor/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BrandonOdiwuor/subscriptions",
        "organizations_url": "https://api.github.com/users/BrandonOdiwuor/orgs",
        "repos_url": "https://api.github.com/users/BrandonOdiwuor/repos",
        "events_url": "https://api.github.com/users/BrandonOdiwuor/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BrandonOdiwuor/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#pullrequestreview-1919888870",
      "submitted_at": "2024-03-06T14:20:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-07T10:37:26Z",
      "updated_at": "2024-03-07T10:37:26Z",
      "source": {
        "issue": {
          "id": 1933041916,
          "node_id": "I_kwDOABII585zN-D8",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28619",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28619/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28619/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28619/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/28619",
          "number": 28619,
          "state": "closed",
          "state_reason": "completed",
          "title": "test: make test_utxo_snapshots.sh use signet",
          "body": "It currently requires recompiling, which doesn't seem necessary if we just use a lighter weight network like signet.\r\n\r\nWe could also drop this script entirely?",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 3,
          "closed_at": "2024-03-07T10:37:25Z",
          "created_at": "2023-10-09T13:13:27Z",
          "updated_at": "2024-03-07T10:37:26Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-10T19:57:47Z",
      "updated_at": "2024-03-10T19:57:47Z",
      "source": {
        "issue": {
          "id": 2177880415,
          "node_id": "I_kwDOABII586Bz9Ff",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29616",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29616/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29616/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29616/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/29616",
          "number": 29616,
          "state": "open",
          "state_reason": null,
          "title": "AssumeUTXO Mainnet Readiness Tracking",
          "body": "## Goals of this issue\r\n\r\n- Track all ongoing work on assumeutxo until mainnet params are included in a release\r\n- Categorize the work into critical/optional for mainnet readiness\r\n- Conceptual discussion on assumeutxo topics that may or may not be critical for mainnet readiness\r\n\r\nThe initial categorizations here are suggestions and changes should be discussed here in the issue. Obviously let me know if I missed anything.\r\n\r\n## Critical Issues/PRs\r\n\r\n- [x] #29612 (which fixes #25675) - Improves size of dump, critical because it is not backwards compatible\r\n- [ ] #29519 - Stop syncing non-snapshot chain from peers that are already connected\r\n- [x] #29726 - Fix -reindex behavior\r\n- [x] #29370 - Get rid of faked nTx and nChainTx values (closing issues discussed in #29261)\r\n- [ ] #29720 - RPC fixes for missing values, addressing #29328\r\n- [ ] #28553 - The mainnet params themselves\r\n\r\n## Optional Issues/PRs\r\n\r\n(Attempted a rough ordering by importance)\r\n\r\n- [ ] #28616 (which fixes #28598) - Show background chain funds as not fully confirmed in GUI\r\n- [ ] #29553 - `dumptxoutset` with height param\r\n- [x] (obsolete) #28670 - Improved error handling for `loadtxoutset`\r\n- [x] #29478 - Additional test coverage for `loadtxoutset`\r\n- [x] #29617 - Additional test coverage\r\n- [x] #29973 - Additional test coverage\r\n- [ ] #29428 - Additional test coverage\r\n- [ ]  #29996 - Additional test coverage\r\n- [ ] #29993 - Improve usability\r\n- [ ] #28608 (draft) - State and locking cleanup\r\n\r\n## Critical conceptual discussion\r\n\r\n- [ ] Agreement on a rule of thumb which height we choose once there is consensus for mainnet readiness, i.e. how to choose the height for #28553 once we are close to an upcoming release. I think the earlier we discuss this the better, so that this doesn't get in the way later.\r\n\r\n## Optional conceptual discussion\r\n\r\nThese were taken from #28553 and [the original assumeutxo PR](https://github.com/bitcoin/bitcoin/pull/27596#issuecomment-1727936044).\r\n\r\n- [ ] Distribution of snapshots - This recently came up [here](https://github.com/bitcoin/bitcoin/pull/29551#pullrequestreview-1917416713) and [here](https://bitcoin-irc.chaincode.com/bitcoin-core-dev/2024-03-07#1012635;). There are multiple levels to this topic but I believe that this is not critical either way. If it were critical then, at the most basic level, we would probably provide an \"official\" torrent/download link for the dump with the release. It would be great if one or more contributors could do that (@Sjors did this in #28516 for example) and are willing to maintain this for a reasonable amount of time but it is not critical IMO because anyone can use `dumptxoutset` to recreate the dump and then share it any way they like. So there is no need to provide this service from within the project. I think anyone who plans to distribute the dump to other users (think of downstream projects like BTCPayServer, Raspiblitz, Umbrel, Greenlight etc.) should validate the dump like this at least once anyway. And there may even be options for distribution possible for downstream projects that we can not even think of right now but if we don't make the feature available they can also not be explored.\r\n- [ ] Usage of MuHash #27669 - While it would be nice to have this I don't think it is blocking because this can still be introduced later without invalidating existing dumps.\r\n- [ ] Make params configurable/not hardcoded params - I think it would be good to stay on the safe side for now and make the feature available to the public as originally planned. If the feature sees wide adoption and requests for more flexibility come in that would be the right point to explore this further.\r\n- [ ] Should old hashes be removed from source code at some point? - Obviously not relevant for the first mainnet params\r\n- [ ] How frequently should we update testnet/signet params and is there any way to deal with the possibility that these chains [may get nuked at some point](https://x.com/kallewoof/status/1763222648367308958)?",
          "user": {
            "login": "fjahr",
            "id": 1322187,
            "node_id": "MDQ6VXNlcjEzMjIxODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjahr",
            "html_url": "https://github.com/fjahr",
            "followers_url": "https://api.github.com/users/fjahr/followers",
            "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
            "organizations_url": "https://api.github.com/users/fjahr/orgs",
            "repos_url": "https://api.github.com/users/fjahr/repos",
            "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fjahr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 15,
          "created_at": "2024-03-10T19:57:46Z",
          "updated_at": "2024-05-28T13:09:26Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-12T08:26:45Z",
      "updated_at": "2024-03-12T08:26:45Z",
      "source": {
        "issue": {
          "id": 2168888697,
          "node_id": "I_kwDOABII586BRp15",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29565",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29565/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29565/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29565/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/29565",
          "number": 29565,
          "state": "open",
          "state_reason": null,
          "title": "rpc: rollback",
          "body": "### Please describe the feature you'd like to see added.\r\n\r\n`bitcoin-cli rollback`\r\n\r\nArguments:\r\n\r\n1. height or hash\r\n2. delete blocks from storage\r\n3. delete headers\r\n\r\nThis should be used with networking turned off. As soon as you connect to a peer, it will sync back to the tip as normal.\r\n\r\nIt should rollback indexes too.\r\n\r\nIt should probably warn users if they have a wallet loaded, especially if the rollback is more than 10 (?) block; that's the point where the rollback process stops placing transactions back into the mempool.\r\n\r\n### Is your feature related to a problem, if so please describe it.\r\n\r\nWe currently rely on `invalidateblock` to roll back the chain to an arbitrary height. And then `reconsiderblock` to go back to the tip. Rolling back the chain is used when creating snapshots for assume utxo.\r\n\r\nThis works but the RPC methods are not designed for this. It has annoying side-effects like disconnecting peers because they have \"invalid\" blocks. If there are stale blocks near the height you want to roll back to, you have to make sure to invalidate those too. IIRC there's also no way to abort the process.\r\n\r\nFor functional tests it can be useful to forget a block and a header, e.g. to test behavior when a header is received multiple times from different peers, when receiving an unsolicited or mutated block. Currently such a test has to carefully sequence events, or use multiple unconnected nodes. This RPC would effectively add \"undo\" for such tests.\r\n\r\n### Describe the solution you'd like\r\n\r\nSee above\r\n\r\n### Describe any alternatives you've considered\r\n\r\nStatus quo.\r\n\r\n### Please leave any additional context\r\n\r\nI'm not advocating to drop `invalidateblock` entirely. For example it's still useful if you want to fully validate a stale block.",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 9,
          "created_at": "2024-03-05T10:50:48Z",
          "updated_at": "2024-03-18T12:29:26Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-13T07:50:03Z",
      "updated_at": "2024-03-13T07:50:03Z",
      "source": {
        "issue": {
          "id": 2182725746,
          "node_id": "PR_kwDOABII585pcBG3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29642",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29642/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29642/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29642/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29642",
          "number": 29642,
          "state": "open",
          "state_reason": null,
          "title": "kernel: Handle fatal errors through return values",
          "body": "Based on #25665.\r\n\r\nCurrently functions issuing fatal errors call the `fatalError` notification method to issue a shutdown procedure. This makes it hard for higher level functions to figure out if an error deeper in the call stack occurred. For users of the kernel it might also be difficult to assert which function call issued a fatal error if they are being run concurrently. If the kernel would eventually be used by external users, getting fatal error information through a callback instead of function return values would also be cumbersome and limiting. Unit, bench, and fuzz tests currently don't have a way to effectively test against fatal errors.\r\n\r\nThis patch set is an attempt to make fatal error handling in the kernel code more transparent. Fatal errors are now passed up the call stack through `util::Result<T, FatalError>` failure values. A previous attempt at this by theuni always immediately returned failure values if a function call returned a failure. However, this is not always desirable (see discussion [here](https://github.com/bitcoin/bitcoin/pull/27866#discussion_r1256378064)). Sometimes, further operations can still be completed even if a fatal error was issued. The solution to this is that these \"ignored\" errors are still moved through `util::Result`'s error string values with its `.MoveMessages` method, even while a failure value in the result is not present.\r\n\r\nNext to some smaller behavior changes, the most significant change is that the issuing of a shutdown procedure is delayed until a potential fatal error is handled as opposed to immediately when it is first encountered. Another effect is that potential fatal errors are now asserted in the bench, fuzz and unit tests. Some of the currently not immediately returned fatal errors need some further scrutiny. These are marked with a `TODO (fatal error)` comment and could be tackled in a later PR.\r\n\r\nTo validate this approach a new clang-tidy check is introduced. It implements the following checks:\r\n\r\n1. If a function calls another function with a `util::Result<T, FatalCondition>` return type, its return type has to be `util::Result<T, FatalCondition>` too, or it has to handle the value returned by the function with one of `CheckFatal`, `HandleFatalError`,\r\n`UnwrapFatalError`, or `CheckFatalFailure`.\r\n2. In functions returning a `util::Result<T, FatalCondition>` a call to a function returning a `util::Result<T, FatalCondition>` needs to propagate the value by either:\r\n   - Returning it immediately\r\n   - Assigning it immediately to an existing result with `.MoveMessages()` or `.Set()`\r\n   - Eventually passing it as an argument to a `.MoveMessages()`\r\n\r\n---\r\n\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587) and is a step towards stage 2, creating a more refined kernel API.",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29642",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29642",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29642.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29642.patch"
          },
          "created_at": "2024-03-12T21:34:45Z",
          "updated_at": "2024-03-28T11:56:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 12107196545,
      "node_id": "LE_lADOABII586BLJvCzwAAAALRpSiB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12107196545",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-13T17:50:50Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12140857324,
      "node_id": "HRFPE_lADOABII586BLJvCzwAAAALTpsfs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12140857324",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-16T20:37:24Z"
    },
    {
      "event": "unlabeled",
      "id": 12140874543,
      "node_id": "UNLE_lADOABII586BLJvCzwAAAALTpwsv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12140874543",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-16T20:47:07Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2002129556,
      "node_id": "IC_kwDOABII5853VhKU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2002129556",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-16T20:57:39Z",
      "updated_at": "2024-03-16T20:57:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for all the comments! Rebased and addressed feedback.\r\n\r\n> One suggestion: on pruned nodes, the RPC should fail early if the block of the snapshot height is below the pruned block height\r\n\r\nAdded, good idea!\r\n\r\n> I'm neutral about removing test_utxo_snapshots.sh. This seems to be more meant like an interactive demo to get familiar with AssumeUTXO and as such could still make sense for some?\r\n\r\nYeah, I was kind of aiming at that when I wrote \"TBD if we need additional documentation.\". Since your comment I have been thinking about it a bit more but because that script requires the person that runs it to change the code and recompile bitcoin core I think its audience was always just a tiny group, particularly I think it was useful for reviewers of the concept and code in the early days. Going forward it should be more valuable if we instead document the code properly to make it easy to grasp for contributors (the same goes for the functional tests where we essentially go through similar steps as the script) and for users we should provide easy documentation that explains the usage of the feature properly but doesn't require changing the code.\r\n\r\nI have added another commit where I am splitting off a part of the previous design doc into a separate, usage-focused doc. Let me know what you think and if you have ideas for making the usage doc more complete.\r\n\r\n> Seems like this should freeze indexes, wallets, etc, and hold a lock so nothing else happens during the process...?\r\n\r\n> But rather than relying on block invalidation, I would prefer to have a clean rollback.\r\n\r\nI think these requests are essentially the same, or at least the ideal solution to both of these will look similar.\r\n\r\nFor now, I have only added that I am setting the network to inactive and I will now work on a draft for the clean rollback. But I am still pushing this here now because I think this is already an improvement as-is and the clean rollback may be a bigger change that could also be done as a follow-up, so I don't think review needs to be blocked here. I will report back on the rollback progress here soon.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-2002129556",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-17T16:42:41Z",
      "updated_at": "2024-03-17T16:42:41Z",
      "source": {
        "issue": {
          "id": 2190757214,
          "node_id": "PR_kwDOABII585p3XOc",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29668",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29668/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29668/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29668/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29668",
          "number": 29668,
          "state": "open",
          "state_reason": null,
          "title": "prune, rpc: Check undo data when finding pruneheight",
          "body": "The function `GetFirstStoredBlock()` helps us find the first block for which we have data. So far this function only looked for a block with `BLOCK_HAVE_DATA`. However, this doesn't mean that we also have the undo data of that block, and undo data might be required for what a user would like to do with those blocks. One example of how this might happen is if some blocks were fetched using the `getblockfrompeer` RPC. Blocks fetched from a peer will have data but no undo data.\r\n\r\nThe first commit here allows `GetFirstStoredBlock()` to check for undo data as well by passing a parameter. This alone is useful for #29553 and I would use it there.\r\n\r\nIn the second commit I am applying the undo check to the RPCs that report `pruneheight` to the user. I find this much more intuitive because I think the user expects to be able to do all operations on blocks up until the `pruneheight` but that is not the case if undo data is missing. I personally ran into this once before and now again when testing for assumeutxo when I had used `getblockfrompeer`. The following commit adds test coverage for this change of behavior.\r\n\r\nThe last commit adds a note in the docs of `getblockfrompeer` that undo data will not be available.\r\n",
          "user": {
            "login": "fjahr",
            "id": 1322187,
            "node_id": "MDQ6VXNlcjEzMjIxODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjahr",
            "html_url": "https://github.com/fjahr",
            "followers_url": "https://api.github.com/users/fjahr/followers",
            "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
            "organizations_url": "https://api.github.com/users/fjahr/orgs",
            "repos_url": "https://api.github.com/users/fjahr/repos",
            "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fjahr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29668",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29668",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29668.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29668.patch"
          },
          "created_at": "2024-03-17T16:42:40Z",
          "updated_at": "2024-06-03T16:54:53Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1941530208,
      "node_id": "PRR_kwDOABII585zuWZg",
      "url": null,
      "actor": null,
      "commit_id": "5da057c5330a49122873b9d5f5a44aea9bff1a8d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#pullrequestreview-1941530208",
      "submitted_at": "2024-03-17T16:46:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
    },
    {
      "event": "commented",
      "id": 2003837404,
      "node_id": "IC_kwDOABII5853cCHc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2003837404",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T12:56:03Z",
      "updated_at": "2024-03-18T12:56:03Z",
      "author_association": "MEMBER",
      "body": "> > Seems like this should freeze indexes, wallets, etc, and hold a lock so nothing else happens during the process...?\r\n> \r\n> > But rather than relying on block invalidation, I would prefer to have a clean rollback.\r\n> \r\n> I think these requests are essentially the same, or at least the ideal solution to both of these will look similar.\r\n\r\nAnother approach, suggested by @maflcko in #29565 is to rewind the UTXO set inside of a cache. If that cache is kept isolated from the rest of the node, then indexes and wallets are not affected. It's also safe to abort the process, worst case just leaving a large temp file around.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-2003837404",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553"
    },
    {
      "event": "mentioned",
      "id": 12151643204,
      "node_id": "MEE_lADOABII586BLJvCzwAAAALUS1xE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12151643204",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T12:56:05Z"
    },
    {
      "event": "subscribed",
      "id": 12151643240,
      "node_id": "SE_lADOABII586BLJvCzwAAAALUS1xo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12151643240",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T12:56:05Z"
    },
    {
      "event": "commented",
      "id": 2003847400,
      "node_id": "IC_kwDOABII5853cEjo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2003847400",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T13:00:34Z",
      "updated_at": "2024-03-18T13:00:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Another approach, suggested by @maflcko in #29565 is to rewind the UTXO set inside of a cache. If that cache is kept isolated from the rest of the node, then indexes and wallets are not affected. It's also safe to abort the process, worst case just leaving a large temp file around.\r\n\r\nYes, I have a similar approach in mind. I think that is the cleanest solution if it's feasible in terms of complexity.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-2003847400",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553"
    },
    {
      "event": "mentioned",
      "id": 12151710479,
      "node_id": "MEE_lADOABII586BLJvCzwAAAALUTGMP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12151710479",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T13:00:36Z"
    },
    {
      "event": "subscribed",
      "id": 12151710503,
      "node_id": "SE_lADOABII586BLJvCzwAAAALUTGMn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12151710503",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T13:00:36Z"
    },
    {
      "event": "labeled",
      "id": 12188444317,
      "node_id": "LE_lADOABII586BLJvCzwAAAALWfOad",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12188444317",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T17:09:28Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12190707596,
      "node_id": "HRFPE_lADOABII586BLJvCzwAAAALWn2-M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12190707596",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T20:04:56Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12191580246,
      "node_id": "HRFPE_lADOABII586BLJvCzwAAAALWrMBW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12191580246",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T21:28:05Z"
    },
    {
      "event": "unlabeled",
      "id": 12191631393,
      "node_id": "UNLE_lADOABII586BLJvCzwAAAALWrYgh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12191631393",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T21:33:34Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-22T03:46:01Z",
      "updated_at": "2024-03-22T03:46:01Z",
      "source": {
        "issue": {
          "id": 2201362078,
          "node_id": "PR_kwDOABII585qbY-z",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29700",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29700/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29700/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29700/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29700",
          "number": 29700,
          "state": "open",
          "state_reason": null,
          "title": "kernel, refactor: return error status on all fatal errors",
          "body": "Return util::Result objects from all functions that can trigger fatal errors.\r\n\r\nThere are many validation functions that handle failures by calling `AbortNode` and triggering shutdowns, without returning error information to their callers. This makes error handling in libbitcoinkernel application code difficult, because the only way to handle these errors is to register for [notification callbacks](https://github.com/bitcoin/bitcoin/blob/master/src/kernel/notifications_interface.h). Improve this by making all functions that trigger fatal errors return util::Result objects with the error information.\r\n\r\nThis PR is a pure refactoring that returns extra result information from functions without changing their behavior. It's a possible alternative to and subset of #29642, which adds similar return information but also makes behavior changes and exposes a FatalError type.\r\n\r\n---\r\n\r\n**This is based on #25665.** The non-base commits are:\r\n\r\n- [`3ce52fc00a0d` refactor, kernel: Add FlushStatus / FlushResult types](https://github.com/bitcoin/bitcoin/pull/29700/commits/3ce52fc00a0d405f006f2e300298ac5e8691546a)\r\n- [`c6bdac1320a2` refactor: Add InfoType field to util::Result](https://github.com/bitcoin/bitcoin/pull/29700/commits/c6bdac1320a2de9cd6b4caaa12e5c08e7e7d6723)\r\n- [`e56a36cc7587` refactor, blockstorage: Return FlushResult from flush methods](https://github.com/bitcoin/bitcoin/pull/29700/commits/e56a36cc7587610e5dc4cd2a75951b8505c978be)\r\n- [`abd7d3622abc` refactor, blockstorage: Return fatal errors from block writes](https://github.com/bitcoin/bitcoin/pull/29700/commits/abd7d3622abc3471892549d44432b1a04f10653e)\r\n- [`2c2134443ccf` refactor, blockstorage: Return fatal error from LoadBlockIndex](https://github.com/bitcoin/bitcoin/pull/29700/commits/2c2134443ccf2d0b131ce93358c1cfc974f0bbd2)\r\n- [`dceb837707b1` refactor, validation: Return fatal errors from FlushStateToDisk](https://github.com/bitcoin/bitcoin/pull/29700/commits/dceb837707b1e3b5d6a1a9e8b03a6330b07a79df)\r\n- [`1acf496ebf82` refactor, validation: Return fatal errors from mempool accept functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/1acf496ebf821b75d22e1e2de8dd1e254902f8d1)\r\n- [`a39b2cdf4a80` refactor, validation: Return fatal errors from assumeutxo snapshot functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/a39b2cdf4a808672b5233f960e881479a0bfad65)\r\n- [`809970373cf5` refactor, validation: Return fatal errors from block connect functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/809970373cf53023e79607a9ce8154ce3ac8f330)\r\n- [`901ccdc42910` refactor, validation: Return fatal errors from activate best chain functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/901ccdc429105925ed861ab01524c15dce3a6d86)\r\n- [`bbb8fec91d37` refactor, validation: Return fatal errors from new block functions](https://github.com/bitcoin/bitcoin/pull/29700/commits/bbb8fec91d37e74bd875ac6c8399cb9c2bee2ea7)\r\n- [`1e29b2eaaff4` refactor, blockstorage: Return fatal error from ImportBlocks](https://github.com/bitcoin/bitcoin/pull/29700/commits/1e29b2eaaff4b09c0e7db2d5f6d1c4c2147440b6)\r\n- [`f65fa8c91130` refactor, validation: Return more errors from VerifyDB](https://github.com/bitcoin/bitcoin/pull/29700/commits/f65fa8c91130931713848a97606d5add0fc9b8c5)",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29700",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29700",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29700.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29700.patch"
          },
          "created_at": "2024-03-21T23:11:56Z",
          "updated_at": "2024-05-13T21:52:57Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-23T14:23:37Z",
      "updated_at": "2024-03-23T14:23:37Z",
      "source": {
        "issue": {
          "id": 2197548850,
          "node_id": "PR_kwDOABII585qOPnA",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29681",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29681/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29681/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29681/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29681",
          "number": 29681,
          "state": "open",
          "state_reason": null,
          "title": "test: loading assumeutxo snapshot start states",
          "body": "Fixes: https://github.com/bitcoin/bitcoin/issues/28648\r\n\r\nAdd assumeutxo test:\r\n\r\n- loading snapshot with current chain tip at snapshot_base_height\r\n- loading snapshot with current chain tip a descendant of snapshot block",
          "user": {
            "login": "BrandonOdiwuor",
            "id": 15610188,
            "node_id": "MDQ6VXNlcjE1NjEwMTg4",
            "avatar_url": "https://avatars.githubusercontent.com/u/15610188?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BrandonOdiwuor",
            "html_url": "https://github.com/BrandonOdiwuor",
            "followers_url": "https://api.github.com/users/BrandonOdiwuor/followers",
            "following_url": "https://api.github.com/users/BrandonOdiwuor/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/BrandonOdiwuor/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/BrandonOdiwuor/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/BrandonOdiwuor/subscriptions",
            "organizations_url": "https://api.github.com/users/BrandonOdiwuor/orgs",
            "repos_url": "https://api.github.com/users/BrandonOdiwuor/repos",
            "events_url": "https://api.github.com/users/BrandonOdiwuor/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/BrandonOdiwuor/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29681",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29681",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29681.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29681.patch"
          },
          "created_at": "2024-03-20T13:33:25Z",
          "updated_at": "2024-06-06T14:23:03Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-25T09:02:26Z",
      "updated_at": "2024-03-25T09:02:26Z",
      "source": {
        "issue": {
          "id": 2205018176,
          "node_id": "PR_kwDOABII585qnmDp",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29718",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29718/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29718/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29718/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29718",
          "number": 29718,
          "state": "closed",
          "state_reason": null,
          "title": "Correct '-dbcache' to '-prune'",
          "body": "This looks like a typo, '-prune' is doubled not the '-dbcache' by my understanding.",
          "user": {
            "login": "BenWestgate",
            "id": 73506583,
            "node_id": "MDQ6VXNlcjczNTA2NTgz",
            "avatar_url": "https://avatars.githubusercontent.com/u/73506583?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/BenWestgate",
            "html_url": "https://github.com/BenWestgate",
            "followers_url": "https://api.github.com/users/BenWestgate/followers",
            "following_url": "https://api.github.com/users/BenWestgate/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/BenWestgate/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/BenWestgate/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/BenWestgate/subscriptions",
            "organizations_url": "https://api.github.com/users/BenWestgate/orgs",
            "repos_url": "https://api.github.com/users/BenWestgate/repos",
            "events_url": "https://api.github.com/users/BenWestgate/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/BenWestgate/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29718",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29718",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29718.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29718.patch"
          },
          "closed_at": "2024-03-25T16:21:41Z",
          "created_at": "2024-03-25T06:42:10Z",
          "updated_at": "2024-03-25T17:35:25Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 12237338700,
      "node_id": "LE_lADOABII586BLJvCzwAAAALZZvhM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12237338700",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-25T16:27:54Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12240085579,
      "node_id": "HRFPE_lADOABII586BLJvCzwAAAALZkOJL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12240085579",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-25T20:01:33Z"
    },
    {
      "event": "unlabeled",
      "id": 12240635448,
      "node_id": "UNLE_lADOABII586BLJvCzwAAAALZmUY4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12240635448",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-25T20:52:36Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 12588000304,
      "node_id": "LE_lADOABII586BLJvCzwAAAALuTaQw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12588000304",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-24T08:30:21Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "reviewed",
      "id": 2033825476,
      "node_id": "PRR_kwDOABII5855ObbE",
      "url": null,
      "actor": null,
      "commit_id": "c83d7a5dec3595abe4cc6c8dcb29a016c6905a98",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code Review and Tested ACK c83d7a5dec3595abe4cc6c8dcb29a016c6905a98. My impression is that this PR is good enough as is, unless there is a specific issue with `invalidate`/`reconsider` block that I am not aware of. \r\n\r\nThis will not only prevent errors (by internalizing and testing code previously ran in scripts) but will also offer an easy way for users to create a snapshot from a specific height via RPC. If the rollback functionality gets implemented after this PR is merged, it seems straightforward to change this code to: (1) use the rollback instead of the `invalidateBlock`, and (2) remove the `ReconsiderBlock` call as the node will sync to the tip again. So I don't think the rollback feature should be a blocker for this PR.\r\n\r\nNote: for testing I ran `test/functional/feature_assumeutxo.py` to make sure the test passes, and also modified line 391 to load the snapshot created by this new test in node2, to make sure the snapshot is loaded successfully too. i.e (line 391)\r\n`loaded = n2.loadtxoutset(dump_output2['path'])`",
      "user": {
        "login": "alfonsoromanz",
        "id": 19962151,
        "node_id": "MDQ6VXNlcjE5OTYyMTUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/19962151?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alfonsoromanz",
        "html_url": "https://github.com/alfonsoromanz",
        "followers_url": "https://api.github.com/users/alfonsoromanz/followers",
        "following_url": "https://api.github.com/users/alfonsoromanz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/alfonsoromanz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/alfonsoromanz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/alfonsoromanz/subscriptions",
        "organizations_url": "https://api.github.com/users/alfonsoromanz/orgs",
        "repos_url": "https://api.github.com/users/alfonsoromanz/repos",
        "events_url": "https://api.github.com/users/alfonsoromanz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/alfonsoromanz/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#pullrequestreview-2033825476",
      "submitted_at": "2024-05-01T15:25:15Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
    },
    {
      "event": "review_requested",
      "id": 12671722607,
      "node_id": "RRE_lADOABII586BLJvCzwAAAALzSyRv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12671722607",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-01T15:25:19Z",
      "requested_reviewer": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 12671722726,
      "node_id": "RRE_lADOABII586BLJvCzwAAAALzSyTm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12671722726",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-01T15:25:19Z",
      "requested_reviewer": {
        "login": "BrandonOdiwuor",
        "id": 15610188,
        "node_id": "MDQ6VXNlcjE1NjEwMTg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/15610188?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BrandonOdiwuor",
        "html_url": "https://github.com/BrandonOdiwuor",
        "followers_url": "https://api.github.com/users/BrandonOdiwuor/followers",
        "following_url": "https://api.github.com/users/BrandonOdiwuor/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BrandonOdiwuor/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BrandonOdiwuor/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BrandonOdiwuor/subscriptions",
        "organizations_url": "https://api.github.com/users/BrandonOdiwuor/orgs",
        "repos_url": "https://api.github.com/users/BrandonOdiwuor/repos",
        "events_url": "https://api.github.com/users/BrandonOdiwuor/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BrandonOdiwuor/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 12671722831,
      "node_id": "RRE_lADOABII586BLJvCzwAAAALzSyVP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12671722831",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-01T15:25:20Z",
      "requested_reviewer": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 12671722935,
      "node_id": "RRE_lADOABII586BLJvCzwAAAALzSyW3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12671722935",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-01T15:25:21Z",
      "requested_reviewer": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "labeled",
      "id": 13043173081,
      "node_id": "LE_lADOABII586BLJvCzwAAAAMJbwbZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13043173081",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-05T00:10:43Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13063397291,
      "node_id": "HRFPE_lADOABII586BLJvCzwAAAAMKo5-r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13063397291",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-06T09:00:38Z"
    },
    {
      "event": "commented",
      "id": 2151786093,
      "node_id": "IC_kwDOABII586AQaZt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2151786093",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-06T09:07:50Z",
      "updated_at": "2024-06-06T09:07:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased\r\n\r\n> My impression is that this PR is good enough as is, unless there is a specific issue with invalidate/reconsider block that I am not aware of.\r\n\r\n> If the rollback functionality gets implemented after this PR is merged, it seems straightforward to change this code\r\n\r\nYes, either way, this PR should be an improvement. I am still planning to do the rollback in a cleaner way but if this PR is merged before that is ready, there should be no overhead resulting from that. It would become a refactoring follow-up that does not change the RPC interface again.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#issuecomment-2151786093",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29553"
    },
    {
      "event": "reviewed",
      "id": 2101363203,
      "node_id": "PRR_kwDOABII5859QEID",
      "url": null,
      "actor": null,
      "commit_id": "71b9fa96bfe1c936ecb10d3e5d1b95b7d24f9ea8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#pullrequestreview-2101363203",
      "submitted_at": "2024-06-06T09:15:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
    },
    {
      "event": "unlabeled",
      "id": 13063813765,
      "node_id": "UNLE_lADOABII586BLJvCzwAAAAMKqfqF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13063813765",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-06T09:33:14Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVhZGViYTM0YTNkZTc4YTEwNWU5OWRiZWE4ZDYwZDhlOTNhYmZiZDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eadeba34a3de78a105e99dbea8d60d8e93abfbd7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/eadeba34a3de78a105e99dbea8d60d8e93abfbd7",
      "tree": {
        "sha": "820cd579f70f1c9aa65a201fb249b0c436e5f8d1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/820cd579f70f1c9aa65a201fb249b0c436e5f8d1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 820cd579f70f1c9aa65a201fb249b0c436e5f8d1\nparent ff7d2054c4f1d7ff98078b9695e7c36e79a476c6\nauthor Fabian Jahr <fjahr@protonmail.com> 1709393820 +0100\ncommitter Fabian Jahr <fjahr@protonmail.com> 1717685909 +0200\n\nRPC: Extract InvalidateBlock helper\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmZhzpcVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNxfcP/RJ83MubPApAiOrNQn6mrPOFCP/t\nwoLDsc7y8Y8/ehU6m71OvrXLyVjluo4HKzAGVNSp4qjA8q/HvG+KLIHvAd8SnoaK\ns2ebtGFVBfAxIaU6ZGU5qa8GX6IJe5hYKZ1J5PTfNr/7mHz7EH1YEO8SYBjoiHeq\ns2HeUfjca06ysD3fM+oEubidacEhm/hjPvRz96kteylw5f0SO5IAkqrC9KNmvoN7\nwgll1Izpp4ebytnP9UJ5ggS+zYkLsgF22Yo1NMQA53rWuuiwHS7Isonz73YPKljT\nKKpakaIqY7ZsoTFMbPGGmkWl0iiSMJMLycgmkSZnputTjIELFcTpRViABa/ngerL\n0IrwTfhzBs0afMimMbcL+0ySrY+OomKS8OuTGn+iWB6AtS5ZH3FDE+OxxcjcoF3Y\n84rVoQ3qOdDWA7icvlOhmU7LqyjpbG8AlZm+5LtBYKyQJ8o32PcZlWtxNU5ILhp3\nx7dKZA8kP9wqW1hDk7le+f8TprA3EAWBCT+TSNmxG9NV379OrclZWR/K9kICAI2s\n7vXfaJeU7XJOvEtrTb8pI6d67WS3PWVLssIrWrBX2DaAXralNyPFxn7iaiBIza6S\n1c4XPclj3Ml6sJiSRiNgQhmpNx3CwHAlbKpWMreJ0xd4hFgc5D169zurZLa4Xa7y\nsoTqd9A0gdexPgrp\n=6Bhe\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ff7d2054c4f1d7ff98078b9695e7c36e79a476c6",
          "sha": "ff7d2054c4f1d7ff98078b9695e7c36e79a476c6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ff7d2054c4f1d7ff98078b9695e7c36e79a476c6"
        }
      ],
      "message": "RPC: Extract InvalidateBlock helper",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-06-06T14:58:29Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-03-02T15:37:00Z"
      },
      "sha": "eadeba34a3de78a105e99dbea8d60d8e93abfbd7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNhZmU5MDA3YjM2YTQ0YmU1NDRkNzZhNTZiMzFjZTQxYTkyNTUyZDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3afe9007b36a44be544d76a56b31ce41a92552d4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3afe9007b36a44be544d76a56b31ce41a92552d4",
      "tree": {
        "sha": "989f9bbfd80f9d0612559d4d5053c01260b83804",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/989f9bbfd80f9d0612559d4d5053c01260b83804"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 989f9bbfd80f9d0612559d4d5053c01260b83804\nparent eadeba34a3de78a105e99dbea8d60d8e93abfbd7\nauthor Fabian Jahr <fjahr@protonmail.com> 1709394147 +0100\ncommitter Fabian Jahr <fjahr@protonmail.com> 1717685955 +0200\n\nRPC: Extract ReconsiderBlock helper\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmZhzsQVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNHVYQAJJtfU8OORPzir033i8ihbsfUj5Y\nit3B7KYbsPH/cUeUdBxK5gLr7ZNxx1dEjA31ydiZetGrqvBiOAy3MuRdI3mdGtiV\nM+UHZJsPDbcDYPId/Wa9VxFZnUGZFryZPqlHIERZHrm5sLbpT3a/AWGiVDVFnHpU\n0doUxAWHeeF8nxQNS4IRR+IEd0b9hkxnEP9pib4aolx+kH8DMOF+NnGauNVefcEv\nkfDSerDVOVq1kG9AxBtTxN9RfWDmQF+EDam6h+WSDnta11xooKM2EGMcp8RHjuvx\nn63t+TcpThE/tRU2a8OWunnpMdknXfYIpDS4yAIzbef+kw3WEn76/GcJcQiCz1AS\n+ZiibSLbej2ealjdIvYGM6Vf82ethf2WxI3ibmzxEV6mVxhnBRUWKxya4wnhyY78\ndHe6lGg7d5JeAkQryxMbsfgh3uyhC2WLd94Vw+JR6nEeg9lhKZ3qr6J+ha5CBrCX\nQh3Q35PcT4yxl0Evn++77ZfR6I7c/vtxfP/0rSXMsLVUCHy4x/wAH5N8AbU0bGAs\nkR174zkbdRuzt44Rs+QkpCwWINHUdyj0FORlzRrw1mic3PlipBYn634mnffPILgc\noc8IY/+YxUaL5DFHCu+H1DmOiCuf16j5dhf1SgsOUv8a+oH8hVGIgANIVxhGAbUx\nbzG+1/CTCFLVgadt\n=Ce5h\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eadeba34a3de78a105e99dbea8d60d8e93abfbd7",
          "sha": "eadeba34a3de78a105e99dbea8d60d8e93abfbd7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/eadeba34a3de78a105e99dbea8d60d8e93abfbd7"
        }
      ],
      "message": "RPC: Extract ReconsiderBlock helper",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-06-06T14:59:15Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-03-02T15:42:27Z"
      },
      "sha": "3afe9007b36a44be544d76a56b31ce41a92552d4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJjZGNlOGZkOWM5MzA5OWRiN2U4NmZmMzNhMWRhOGZiZjBhYWYzNjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2cdce8fd9c93099db7e86ff33a1da8fbf0aaf364",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2cdce8fd9c93099db7e86ff33a1da8fbf0aaf364",
      "tree": {
        "sha": "8574396e919f2921d3db4d8459191ae1113546d6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8574396e919f2921d3db4d8459191ae1113546d6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 8574396e919f2921d3db4d8459191ae1113546d6\nparent 3afe9007b36a44be544d76a56b31ce41a92552d4\nauthor Fabian Jahr <fjahr@protonmail.com> 1709394238 +0100\ncommitter Fabian Jahr <fjahr@protonmail.com> 1717687775 +0200\n\nRPC: Add height parameter to dumptxoutset\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmZh1eAVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNn+sP/31eUKUndm6bH4jrtKMLqtK5Q9aA\n5602gYS7JxJ79Cb7VXUbK47C4EaUHwkGUEgTF9h19ulR2i0AF7/E+p6FIY2nlqFv\nmz4A1fZmEQx2e6WT9HTkTB4KZmUWQZ7yVFjQyOdUAk5CVNPTa+Bjw/Pb5Dsy5IFU\n79mIHhr2MGKcu3aoNTXdH5pbxMZvjkRo/VbhvjhAf6nSjDFuyruZG+XNyzoTqczL\n8rhoJG0yUCOaAcXNo8nmb3HFv/dXqoc30wn9QSsHX1zKqgIKIT7iP5St/Ts2Y8Mg\nXVD+1lYv8RLtphC4XFmqgpdFzEUueUpdg1k5uGo4XHRHtk5PZ75zAckEjY1FlkIM\nznEgM69OItpHRI4P4x5DVWbvbKEAuZ4rVjsTUr/OE1yz8gsW/VXRa4+fh7K5rTWt\np1mtKuDaIR0dVS0oSpH4wxLdJNW+D17nBUz4GynZU8UAbe8f+++vOL0ohS6pXzto\n7XZqsFti8/J8YQlJUc7nXTEE9g3fRwxm8yB8gofFgB9hv/DnkReqUgLCjkfRKT06\nbMVTYyvGmk92YA2rV8KW8FltqpAJ30CwpvMnBpeWyDc9ojtO9g/V9EgnWzB3qc3t\nI1+kqbupSyP1vfeqraweO9mf7aXHkiOxLgfKEuw01SXsTUhJtpVZrdZGYN9hJKl5\nSjyj6BeGQI/KU1gy\n=K9hn\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3afe9007b36a44be544d76a56b31ce41a92552d4",
          "sha": "3afe9007b36a44be544d76a56b31ce41a92552d4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3afe9007b36a44be544d76a56b31ce41a92552d4"
        }
      ],
      "message": "RPC: Add height parameter to dumptxoutset",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-06-06T15:29:35Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-03-02T15:43:58Z"
      },
      "sha": "2cdce8fd9c93099db7e86ff33a1da8fbf0aaf364"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDYyN2NlYjc4YTY2NjdjMmIxZDU2NThjNjA5YjQwYjM3YmNjNmQ3ODE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/627ceb78a6667c2b1d5658c609b40b37bcc6d781",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/627ceb78a6667c2b1d5658c609b40b37bcc6d781",
      "tree": {
        "sha": "60ac265a7228d8ad192be81fac9b74f41a6a37a8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/60ac265a7228d8ad192be81fac9b74f41a6a37a8"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 60ac265a7228d8ad192be81fac9b74f41a6a37a8\nparent 2cdce8fd9c93099db7e86ff33a1da8fbf0aaf364\nauthor Fabian Jahr <fjahr@protonmail.com> 1709400387 +0100\ncommitter Fabian Jahr <fjahr@protonmail.com> 1717687777 +0200\n\ntest: Test for dumptxoutset at specific height\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmZh1eEVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNUP4P/10Lkr9l1sWBFdbkC2JIIR50U9uK\ndBNSpmMKhL5Y1cXUtN6POoH5TkCxl0MAI6+mmBRYrlJK02MUZfIG3XV0H9mDYKEw\nghzRH2S51nBw7Ik3vQarUnswWtjyCARPkJberyRSdF45QNaWGY+swUdY1OM9oAWR\nWCSPAkmy6LX2RZgJd39yAKmsmdACDJQhqYfE8B9FK9zEyEvfc5lot4sVJIZ+7N3N\nuPmL3xdrZ+DZKR5YGrgSd6zAL2D71gnCZInuwuLoJEPRUofXgd8g1LaWFGPr6Ev9\nT2xYWwMGhvAEIad5tzyTRK72ksd2nC4hm9+n6dcQp+76R0jp5UmQYgnJhVNNEOUl\nr8fUmL/IDjMbd1GlUpnaAvvdxMTTTqpcvJM3JxaCC0d+ZR0TvITgiCzADS1xo+4B\nFFB2Ma0ecVTjaNGQUzLOECQ1k8LMUY8Zs4jni8ep58Omy6bAQB9GAlxR98P9F5B5\no/wHdtK6H/EGugFhb4w5zoPCkA1qaN4To3aSpowyHK5rKWr/C6e8nbYalRjRnpQS\nluQJwVWkWh3S3UpuO5a/yvdWf9vnTDOh8ksdTrEcM2NNtY2VPY2UwMi4NEO0kmrh\ntyu8yoKsVrpt4mVOsovhvPtp+aJzx2fhsJaCZr8WxpzE61ExSPdISsWkQ256KcxZ\n3zmtX+32AXWhBh3g\n=QhG7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2cdce8fd9c93099db7e86ff33a1da8fbf0aaf364",
          "sha": "2cdce8fd9c93099db7e86ff33a1da8fbf0aaf364",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2cdce8fd9c93099db7e86ff33a1da8fbf0aaf364"
        }
      ],
      "message": "test: Test for dumptxoutset at specific height",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-06-06T15:29:37Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-03-02T17:26:27Z"
      },
      "sha": "627ceb78a6667c2b1d5658c609b40b37bcc6d781"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU5NjlmZWY4MjJjNTk5NWY3Y2FhZTQxZjU4ZDczY2UyYWZlODI3MWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e969fef822c5995f7caae41f58d73ce2afe8271a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e969fef822c5995f7caae41f58d73ce2afe8271a",
      "tree": {
        "sha": "98a39e326332e4e4abfde1d3db4806400fbd436b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/98a39e326332e4e4abfde1d3db4806400fbd436b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 98a39e326332e4e4abfde1d3db4806400fbd436b\nparent 627ceb78a6667c2b1d5658c609b40b37bcc6d781\nauthor Fabian Jahr <fjahr@protonmail.com> 1709400487 +0100\ncommitter Fabian Jahr <fjahr@protonmail.com> 1717687777 +0200\n\ncontrib: Remove test_utxo_snapshots.sh\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmZh1eEVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNAW0P/AoLL6VkDsaRksnwAu4vMnG532rX\nDmHJrBUHzTdntYCH8ZpX401itr7wF/8MSFXIywebhfN7/mNQQKqPKS7ixF7JEDva\n5lUBTspG8OZYsfgI6jw/8OfJlKpWPy+1kiYLJcsahA8+bi+3+at4H05fq8wLSAGv\n3FwiXU0/E6Nm0cj5xq4x1WHPi3OhHjgB7L8y7vTn74Qn25g7fJu+1T/g6OWSmo5F\nwvnCKkIFvTaCMKRwKm13UpQg5eeQ4/4qlGmRvHJD8/63oWsPwbrIPsbwfWbSoImq\nnEv4RexMJkIu49LF58aa3aOsxbArd00vD17g9tcv2UloQPshC62j2s7CYUYGIJCC\nqRHUmHDZflCCsIehSvnczN6+HTbyQTXnwTXR3OjDq/rzUazE+ueu21lFaZNtwPQG\nNLxRc3y4agarmz+doT4HpkYzLyEY8q0U2XsnDx1gM5q6GnvAq0Jy/9o8v409D7mB\nGar548g1rlSfJ/2ujTA28rykfqeezgwDdMdY9Lpce5I+Jwec1L8wKBWRN8KySmpJ\nY2bYxCWE+1twb2KKcLejTg1GZWAy8e21P7/I/UrAHLCAFxaU6swvWaFr/a8J+95P\nZPIl6hZ8g4fbU3iiPcZMfGgDWZ/Xr96sST1yGjwVK8jU5f6eWd/Pic3oCZe+DBAZ\nGhs0WPgGXZ1rJk/2\n=nTHB\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/627ceb78a6667c2b1d5658c609b40b37bcc6d781",
          "sha": "627ceb78a6667c2b1d5658c609b40b37bcc6d781",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/627ceb78a6667c2b1d5658c609b40b37bcc6d781"
        }
      ],
      "message": "contrib: Remove test_utxo_snapshots.sh",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-06-06T15:29:37Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-03-02T17:28:07Z"
      },
      "sha": "e969fef822c5995f7caae41f58d73ce2afe8271a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA5MWRhYjlmMTFkYTIyZjBlYjY0YjM0YzY3NmZkODdlZmI3OTAxOTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/091dab9f11da22f0eb64b34c676fd87efb790192",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/091dab9f11da22f0eb64b34c676fd87efb790192",
      "tree": {
        "sha": "b75d317f4a35cef56706fa78a883cc0392cb38ce",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b75d317f4a35cef56706fa78a883cc0392cb38ce"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b75d317f4a35cef56706fa78a883cc0392cb38ce\nparent e969fef822c5995f7caae41f58d73ce2afe8271a\nauthor Fabian Jahr <fjahr@protonmail.com> 1709565269 +0100\ncommitter Fabian Jahr <fjahr@protonmail.com> 1717687777 +0200\n\nassumeutxo: Remove devtools/utxo_snapshot.sh\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmZh1eEVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNnLwP/jvY43tDCYk3NROcnSQlUIuqADu6\naZauW+4fnJT0ucuT9oyhoMODlGJhlR9NV6zsVPvYh5wZ5ds4zUi7jUnSyFcc9tJX\nWvdh7Cu8DhJRG/SOitps9izxhfbBcxDufbkOXfB8ZDFXpaWqIki8PDa1VxdPCo6g\njSfRS02Ksm/qIHrbcfW7WB6t9vO82HcUnelQ+8VfvPTuEE4O24Yk22BqtotyFsBz\nGdwvXdfquTZSL1ItW8E8v/v2tTDeA1turT0Gzkzh5KW2YchYXtYtxyFbKoAJ2of7\n1fcEE7p+NRHeEvBkz6PC3GgoRkKppzXpy1X3Ecnlj764Gd0rTP8KPiDO3bDh+M6z\nhbXt5JrpMlEr1xfnpeEkMEabDCnllbF3LkIuu3FGs4hpOFsAbDGUsWo9WdFyUI4k\nQmIlcg8LmBYmRLimnfFVXbOnxPrbAIrsz9Hl2cP838ISTVuiEw66etfBkt+hWjvN\nmkbJP2ocUTpG3NAt3ti0u1QHU5R6r6oW+NfsCUK/EJwOv83gOiOxXVFKyfrf7Qtt\nNZ9HGrHYMVcBas59tpNS5+zb8y2IvmM0aVbeeY6+jNxW95E+lSuw2ZM/p7RHnkxB\nLrEzBu9AzSJ4q8BhVmklZBVMY/F0j8gXGTF4GqnlnoFZ+hRu3RuQQ69W9PtcF5ZH\ngLjSNvN/jKFaVPM2\n=f1po\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e969fef822c5995f7caae41f58d73ce2afe8271a",
          "sha": "e969fef822c5995f7caae41f58d73ce2afe8271a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e969fef822c5995f7caae41f58d73ce2afe8271a"
        }
      ],
      "message": "assumeutxo: Remove devtools/utxo_snapshot.sh",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-06-06T15:29:37Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-03-04T15:14:29Z"
      },
      "sha": "091dab9f11da22f0eb64b34c676fd87efb790192"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZhNTQwOGRkN2RhNGMzMTI4M2NiNGY2MzJiM2E3YWE2OTJhNTNjYTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "tree": {
        "sha": "bfbc52f6f6850f29fab781b4909557bcbbf500e0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bfbc52f6f6850f29fab781b4909557bcbbf500e0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree bfbc52f6f6850f29fab781b4909557bcbbf500e0\nparent 091dab9f11da22f0eb64b34c676fd87efb790192\nauthor Fabian Jahr <fjahr@protonmail.com> 1710621388 +0100\ncommitter Fabian Jahr <fjahr@protonmail.com> 1717687777 +0200\n\ndoc: Improve guide for usage of assumeutxo\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\nComment: GPGTools - https://gpgtools.org\n\niQJJBAABCgAzFiEEtFq20ghhrCHSdrgm8T0enYkHmM0FAmZh1eEVHGZqYWhyQHBy\nb3Rvbm1haWwuY29tAAoJEPE9Hp2JB5jNy6UP/ivX5h5CFEgZIRoTc6QQZP7j+Zzf\noFYNflA8ITBd7PCTjf67OxgpiXJVDmB/1mIfESYJIuFkM1Gpr06d19VVUtGMkkd7\nOMQKAbB2gFvI5jKQA2BJyruF8d8+t0u22gePN6PpSLTxKEj0qNj2XVnoNaJB4YcS\n4Dc/B4k10WCXWUqsWELdjd5CPqVvomVcWYVBp0TSLS9nY80aKvo6+C/yEJIStOAE\nL6kEpy8I/hAiBkjAzDb301J3IpNtioSc2YS0fvJhaZbIPGl/MVmLh3ziHFt7GrwK\nffwI9b+Y7eXVfYHZ6R29Byr3sMxncTmK6hDnTW2QKjyGuI/ZvutQf/llzW2JVFE+\nvqWTa/F+rM1ojxinqZgiAo6UDqsQPzvc/XegAgTZXnUGo1wStcoxyHnGNHzuSC13\n+aygUBdwp0CVhWv/RkZOWduEzc3JDKzBXYMiira8IKn5vuvxjUJr39zaq0OyTfur\nr40Cj8AnS7JIbBeA9QkpKB3nyPqkTL6K30OCLt37Xj5myDjvrMRzO5uBwWGwKU5c\nRm0ODF9X/cKgGZ6lMhpDzqYFN2Gh79lK2C5NK9qEXIlgcLfhALuQ8gmtSiqY8/KL\n5LMNL8L5lRNtZkRSgOVf63fDnD2r1iVWdV0ru8ELsBQ5ICAxXFBPODx1lsj6rDcl\nNvMW0LJdvEGnZvgZ\n=Bp9p\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/091dab9f11da22f0eb64b34c676fd87efb790192",
          "sha": "091dab9f11da22f0eb64b34c676fd87efb790192",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/091dab9f11da22f0eb64b34c676fd87efb790192"
        }
      ],
      "message": "doc: Improve guide for usage of assumeutxo",
      "committer": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-06-06T15:29:37Z"
      },
      "author": {
        "name": "Fabian Jahr",
        "email": "fjahr@protonmail.com",
        "date": "2024-03-16T20:36:28Z"
      },
      "sha": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13068665225,
      "node_id": "HRFPE_lADOABII586BLJvCzwAAAAMK9AGJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13068665225",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-06T15:30:26Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511457747",
      "pull_request_review_id": 1914795143,
      "id": 1511457747,
      "node_id": "PRRC_kwDOABII585aFwPT",
      "diff_hunk": "@@ -2621,10 +2624,30 @@ static RPCHelpMan dumptxoutset()\n     }\n \n     NodeContext& node = EnsureAnyNodeContext(request.context);\n+\n+    const CBlockIndex* invalidate_index{nullptr};\n+    if (!request.params[1].isNull()) {\n+        const CBlockIndex* target_index = ParseHashOrHeight(request.params[1], *node.chainman);\n+        invalidate_index = WITH_LOCK(::cs_main, return node.chainman->ActiveChain().Next(target_index));\n+        InvalidateBlock(*node.chainman, invalidate_index->GetBlockHash());\n+        const CBlockIndex* new_tip_index{WITH_LOCK(::cs_main, return node.chainman->ActiveChain().Tip())};\n+        // In case there is any issue with a block being read from disc due to\n+        // pruning for example, we need to stop here, otherwise the dump would\n+        // still be greated for the wrong height.",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "original_commit_id": "c2f62ebc44767bbc6795cb3036d4d28b5f21ffe8",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        // still be created for the wrong height.\r\n```",
      "created_at": "2024-03-04T16:40:35Z",
      "updated_at": "2024-03-04T18:21:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#discussion_r1511457747",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511457747"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511469672",
      "pull_request_review_id": 1914795143,
      "id": 1511469672,
      "node_id": "PRRC_kwDOABII585aFzJo",
      "diff_hunk": "@@ -210,6 +213,13 @@ def run_test(self):\n \n         assert_equal(n0.getblockchaininfo()[\"blocks\"], FINAL_HEIGHT)\n \n+        self.log.info(f\"Check that dumptxoutsetinfo works for past block heights\")\n+        dump_output2 = n0.dumptxoutset('utxos2.dat', SNAPSHOT_BASE_HEIGHT)\n+        check_dump_output(dump_output2)",
      "path": "test/functional/feature_assumeutxo.py",
      "position": 35,
      "original_position": 25,
      "commit_id": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "original_commit_id": "a480d9748b29c5467c038b3f73c0845f7ee27f70",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: could additionally check that the two dump file contents are equal, e.g.\r\n```diff\r\ndiff --git a/test/functional/feature_assumeutxo.py b/test/functional/feature_assumeutxo.py\r\nindex 71c3c2c096..a9ba96ae25 100755\r\n--- a/test/functional/feature_assumeutxo.py\r\n+++ b/test/functional/feature_assumeutxo.py\r\n@@ -39,6 +39,7 @@ from test_framework.test_framework import BitcoinTestFramework\r\n from test_framework.util import (\r\n     assert_equal,\r\n     assert_raises_rpc_error,\r\n+    sha256sum_file,\r\n )\r\n from test_framework.wallet import (\r\n     getnewdestination,\r\n@@ -216,6 +217,7 @@ class AssumeutxoTest(BitcoinTestFramework):\r\n         self.log.info(f\"Check that dumptxoutsetinfo works for past block heights\")\r\n         dump_output2 = n0.dumptxoutset('utxos2.dat', SNAPSHOT_BASE_HEIGHT)\r\n         check_dump_output(dump_output2)\r\n+        assert_equal(sha256sum_file(dump_output['path']), sha256sum_file(dump_output2['path']))\r\n \r\n         # Ensure n0 is back at the tip\r\n         assert_equal(n0.getblockchaininfo()[\"blocks\"], FINAL_HEIGHT)\r\n``` ",
      "created_at": "2024-03-04T16:49:23Z",
      "updated_at": "2024-03-04T18:21:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#discussion_r1511469672",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1511469672"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
        }
      },
      "start_line": 293,
      "original_start_line": 216,
      "start_side": "RIGHT",
      "line": 295,
      "original_line": 295,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1527253589",
      "pull_request_review_id": 1941317857,
      "id": 1527253589,
      "node_id": "PRRC_kwDOABII585bCApV",
      "diff_hunk": "@@ -2621,10 +2624,30 @@ static RPCHelpMan dumptxoutset()\n     }\n \n     NodeContext& node = EnsureAnyNodeContext(request.context);\n+\n+    const CBlockIndex* invalidate_index{nullptr};\n+    if (!request.params[1].isNull()) {\n+        const CBlockIndex* target_index = ParseHashOrHeight(request.params[1], *node.chainman);\n+        invalidate_index = WITH_LOCK(::cs_main, return node.chainman->ActiveChain().Next(target_index));\n+        InvalidateBlock(*node.chainman, invalidate_index->GetBlockHash());\n+        const CBlockIndex* new_tip_index{WITH_LOCK(::cs_main, return node.chainman->ActiveChain().Tip())};\n+        // In case there is any issue with a block being read from disc due to\n+        // pruning for example, we need to stop here, otherwise the dump would\n+        // still be greated for the wrong height.",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "original_commit_id": "c2f62ebc44767bbc6795cb3036d4d28b5f21ffe8",
      "in_reply_to_id": 1511457747,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed",
      "created_at": "2024-03-16T20:37:56Z",
      "updated_at": "2024-03-16T20:37:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#discussion_r1527253589",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1527253589"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2636,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1527253605",
      "pull_request_review_id": 1941317864,
      "id": 1527253605,
      "node_id": "PRRC_kwDOABII585bCApl",
      "diff_hunk": "@@ -210,6 +213,13 @@ def run_test(self):\n \n         assert_equal(n0.getblockchaininfo()[\"blocks\"], FINAL_HEIGHT)\n \n+        self.log.info(f\"Check that dumptxoutsetinfo works for past block heights\")\n+        dump_output2 = n0.dumptxoutset('utxos2.dat', SNAPSHOT_BASE_HEIGHT)\n+        check_dump_output(dump_output2)",
      "path": "test/functional/feature_assumeutxo.py",
      "position": 35,
      "original_position": 25,
      "commit_id": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "original_commit_id": "a480d9748b29c5467c038b3f73c0845f7ee27f70",
      "in_reply_to_id": 1511469672,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "added",
      "created_at": "2024-03-16T20:38:01Z",
      "updated_at": "2024-03-16T20:38:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#discussion_r1527253605",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1527253605"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
        }
      },
      "start_line": 293,
      "original_start_line": 216,
      "start_side": "RIGHT",
      "line": 295,
      "original_line": 295,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1527560566",
      "pull_request_review_id": 1941530208,
      "id": 1527560566,
      "node_id": "PRRC_kwDOABII585bDLl2",
      "diff_hunk": "@@ -2646,10 +2649,53 @@ static RPCHelpMan dumptxoutset()\n     }\n \n     NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CConnman& connman = EnsureConnman(node);\n+\n+    const CBlockIndex* invalidate_index{nullptr};\n+    if (!request.params[1].isNull()) {\n+        const CBlockIndex* target_index = ParseHashOrHeight(request.params[1], *node.chainman);\n+\n+        // If the node is running in pruned mode we ensure all necessary block\n+        // data is available before starting to roll back.\n+        if (node.chainman->m_blockman.IsPruneMode()) {\n+            LOCK(::cs_main);\n+            const CBlockIndex* current_tip{node.chainman->ActiveChain().Tip()};\n+            const CBlockIndex* first_block{node.chainman->m_blockman.GetFirstStoredBlock(*current_tip)};",
      "path": "src/rpc/blockchain.cpp",
      "position": 124,
      "original_position": 25,
      "commit_id": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "original_commit_id": "5da057c5330a49122873b9d5f5a44aea9bff1a8d",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This actually isn't a fully sufficient check because we could be missing the undo data. I am addressing this here: #29668",
      "created_at": "2024-03-17T16:46:30Z",
      "updated_at": "2024-03-17T18:59:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#discussion_r1527560566",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1527560566"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2671,
      "original_line": 2671,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1629099295",
      "pull_request_review_id": 2101363203,
      "id": 1629099295,
      "node_id": "PRRC_kwDOABII585hGhUf",
      "diff_hunk": "@@ -2646,10 +2657,53 @@ static RPCHelpMan dumptxoutset()\n     }\n \n     NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CConnman& connman = EnsureConnman(node);\n+\n+    const CBlockIndex* invalidate_index{nullptr};\n+    if (!request.params[1].isNull()) {\n+        const CBlockIndex* target_index = ParseHashOrHeight(request.params[1], *node.chainman);\n+\n+        // If the node is running in pruned mode we ensure all necessary block\n+        // data is available before starting to roll back.\n+        if (node.chainman->m_blockman.IsPruneMode()) {\n+            LOCK(::cs_main);\n+            const CBlockIndex* current_tip{node.chainman->ActiveChain().Tip()};\n+            const CBlockIndex* first_block{node.chainman->m_blockman.GetFirstStoredBlock(*current_tip)};\n+            if (first_block->nHeight > target_index->nHeight) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Could not roll back to requested height since necessary block data is already pruned.\");\n+            }\n+        }\n+\n+        // Suspend network activity for the duration of the process when we are\n+        // rolling back the chain to get a utxo set from a past height.\n+        connman.SetNetworkActive(false);\n+        if (connman.GetNetworkActive()) {\n+            throw JSONRPCError(RPC_MISC_ERROR, \"Network activity could not be suspended.\");\n+        }\n+\n+        invalidate_index = WITH_LOCK(::cs_main, return node.chainman->ActiveChain().Next(target_index));\n+        InvalidateBlock(*node.chainman, invalidate_index->GetBlockHash());\n+        const CBlockIndex* new_tip_index{WITH_LOCK(::cs_main, return node.chainman->ActiveChain().Tip())};\n+\n+        // In case there is any issue with a block being read from disc we need",
      "path": "src/rpc/blockchain.cpp",
      "position": 141,
      "original_position": 140,
      "commit_id": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "original_commit_id": "71b9fa96bfe1c936ecb10d3e5d1b95b7d24f9ea8",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Another issue could be that a sister block of `invalidate_index` was activated instead, if one exists? If so, could make sense to mention that as well.",
      "created_at": "2024-06-06T09:13:55Z",
      "updated_at": "2024-06-06T09:15:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#discussion_r1629099295",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1629099295"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2688,
      "original_line": 2688,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1629101713",
      "pull_request_review_id": 2101363203,
      "id": 1629101713,
      "node_id": "PRRC_kwDOABII585hGh6R",
      "diff_hunk": "@@ -2646,10 +2657,53 @@ static RPCHelpMan dumptxoutset()\n     }\n \n     NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CConnman& connman = EnsureConnman(node);\n+\n+    const CBlockIndex* invalidate_index{nullptr};\n+    if (!request.params[1].isNull()) {\n+        const CBlockIndex* target_index = ParseHashOrHeight(request.params[1], *node.chainman);\n+\n+        // If the node is running in pruned mode we ensure all necessary block\n+        // data is available before starting to roll back.\n+        if (node.chainman->m_blockman.IsPruneMode()) {\n+            LOCK(::cs_main);",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 121,
      "commit_id": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "original_commit_id": "71b9fa96bfe1c936ecb10d3e5d1b95b7d24f9ea8",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "style nit for new code, here and elsewhere: Could make sense to use the chainman.GetMutex() alias for chainman locking, instead of the global cs_main?",
      "created_at": "2024-06-06T09:15:29Z",
      "updated_at": "2024-06-06T09:15:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#discussion_r1629101713",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1629101713"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2669,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1629758949",
      "pull_request_review_id": 2102318274,
      "id": 1629758949,
      "node_id": "PRRC_kwDOABII585hJCXl",
      "diff_hunk": "@@ -2646,10 +2657,53 @@ static RPCHelpMan dumptxoutset()\n     }\n \n     NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CConnman& connman = EnsureConnman(node);\n+\n+    const CBlockIndex* invalidate_index{nullptr};\n+    if (!request.params[1].isNull()) {\n+        const CBlockIndex* target_index = ParseHashOrHeight(request.params[1], *node.chainman);\n+\n+        // If the node is running in pruned mode we ensure all necessary block\n+        // data is available before starting to roll back.\n+        if (node.chainman->m_blockman.IsPruneMode()) {\n+            LOCK(::cs_main);\n+            const CBlockIndex* current_tip{node.chainman->ActiveChain().Tip()};\n+            const CBlockIndex* first_block{node.chainman->m_blockman.GetFirstStoredBlock(*current_tip)};\n+            if (first_block->nHeight > target_index->nHeight) {\n+                throw JSONRPCError(RPC_MISC_ERROR, \"Could not roll back to requested height since necessary block data is already pruned.\");\n+            }\n+        }\n+\n+        // Suspend network activity for the duration of the process when we are\n+        // rolling back the chain to get a utxo set from a past height.\n+        connman.SetNetworkActive(false);\n+        if (connman.GetNetworkActive()) {\n+            throw JSONRPCError(RPC_MISC_ERROR, \"Network activity could not be suspended.\");\n+        }\n+\n+        invalidate_index = WITH_LOCK(::cs_main, return node.chainman->ActiveChain().Next(target_index));\n+        InvalidateBlock(*node.chainman, invalidate_index->GetBlockHash());\n+        const CBlockIndex* new_tip_index{WITH_LOCK(::cs_main, return node.chainman->ActiveChain().Tip())};\n+\n+        // In case there is any issue with a block being read from disc we need",
      "path": "src/rpc/blockchain.cpp",
      "position": 141,
      "original_position": 140,
      "commit_id": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "original_commit_id": "71b9fa96bfe1c936ecb10d3e5d1b95b7d24f9ea8",
      "in_reply_to_id": 1629099295,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, interesting edge case! I extended the comment.",
      "created_at": "2024-06-06T15:30:34Z",
      "updated_at": "2024-06-06T15:30:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#discussion_r1629758949",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1629758949"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2688,
      "original_line": 2688,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1629759103",
      "pull_request_review_id": 2102318499,
      "id": 1629759103,
      "node_id": "PRRC_kwDOABII585hJCZ_",
      "diff_hunk": "@@ -2646,10 +2657,53 @@ static RPCHelpMan dumptxoutset()\n     }\n \n     NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CConnman& connman = EnsureConnman(node);\n+\n+    const CBlockIndex* invalidate_index{nullptr};\n+    if (!request.params[1].isNull()) {\n+        const CBlockIndex* target_index = ParseHashOrHeight(request.params[1], *node.chainman);\n+\n+        // If the node is running in pruned mode we ensure all necessary block\n+        // data is available before starting to roll back.\n+        if (node.chainman->m_blockman.IsPruneMode()) {\n+            LOCK(::cs_main);",
      "path": "src/rpc/blockchain.cpp",
      "position": null,
      "original_position": 121,
      "commit_id": "6a5408dd7da4c31283cb4f632b3a7aa692a53ca3",
      "original_commit_id": "71b9fa96bfe1c936ecb10d3e5d1b95b7d24f9ea8",
      "in_reply_to_id": 1629101713,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2024-06-06T15:30:40Z",
      "updated_at": "2024-06-06T15:30:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29553#discussion_r1629759103",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1629759103"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29553"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2669,
      "side": "RIGHT"
    }
  ]
}