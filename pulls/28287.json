{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287",
    "id": 1479501055,
    "node_id": "PR_kwDOABII585YL2T_",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28287",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28287.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28287.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
    "number": 28287,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "rpc, test: add `sendmsgtopeer` rpc and a test for net-level deadlock situation",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This adds a `sendmsgtopeer` rpc (for testing only) that allows a node to send a message (provided in hex) to a peer.\r\nWhile we would usually use a `p2p` object instead of a node for this in the test framework, that isn't possible in situations where this message needs to trigger an actual interaction of multiple nodes.\r\n\r\nUse this rpc to add test coverage for the bug fixed in #27981 (that just got merged):\r\nThe test lets two nodes (almost) simultaneously send a single large (4MB) p2p message to each other, which would have caused a deadlock previously (making this test fail), but succeeds now.\r\n\r\nAs can be seen from the discussion in #27981, it was not easy to reproduce this bug without `sendmsgtopeer`. I would imagine that `sendmsgtopeer` could also be helpful in various other test constellations.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      },
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "created_at": "2023-08-17T18:29:55Z",
    "updated_at": "2023-08-24T21:35:10Z",
    "closed_at": "2023-08-24T21:35:09Z",
    "mergeable_state": "unknown",
    "merged_at": "2023-08-24T21:35:09Z",
    "merge_commit_sha": "c9273f68f6a17b669890b0b2d38dbcc8b3c39d7b",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "mzumsande:202208_test_sendmsg",
      "ref": "202208_test_sendmsg",
      "sha": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 187673073,
        "node_id": "MDEwOlJlcG9zaXRvcnkxODc2NzMwNzM=",
        "name": "bitcoin",
        "full_name": "mzumsande/bitcoin",
        "owner": {
          "login": "mzumsande",
          "id": 48763452,
          "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
          "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/mzumsande",
          "html_url": "https://github.com/mzumsande",
          "followers_url": "https://api.github.com/users/mzumsande/followers",
          "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
          "organizations_url": "https://api.github.com/users/mzumsande/orgs",
          "repos_url": "https://api.github.com/users/mzumsande/repos",
          "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/mzumsande/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/mzumsande/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/mzumsande/bitcoin",
        "archive_url": "https://api.github.com/repos/mzumsande/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/mzumsande/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/mzumsande/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/mzumsande/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/mzumsande/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/mzumsande/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/mzumsande/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/mzumsande/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/mzumsande/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/mzumsande/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/mzumsande/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/mzumsande/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/mzumsande/bitcoin/events",
        "forks_url": "https://api.github.com/repos/mzumsande/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/mzumsande/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/mzumsande/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/mzumsande/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/mzumsande/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/mzumsande/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/mzumsande/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/mzumsande/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/mzumsande/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/mzumsande/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/mzumsande/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/mzumsande/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/mzumsande/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/mzumsande/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/mzumsande/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/mzumsande/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:mzumsande/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/mzumsande/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/mzumsande/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/mzumsande/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/mzumsande/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/mzumsande/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/mzumsande/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/mzumsande/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/mzumsande/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/mzumsande/bitcoin/hooks",
        "svn_url": "https://github.com/mzumsande/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 220560,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-24T18:14:34Z",
        "created_at": "2019-05-20T16:03:10Z",
        "updated_at": "2023-08-09T06:22:16Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "8372ab0ea3c88308aabef476e3b9d023ba3fd4b7",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35581,
        "stargazers_count": 71039,
        "watchers_count": 71039,
        "size": 238024,
        "default_branch": "master",
        "open_issues_count": 664,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-24T21:35:04Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-24T21:53:36Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 121,
    "deletions": 0,
    "changed_files": 6,
    "commits": 3,
    "review_comments": 15,
    "comments": 10
  },
  "events": [
    {
      "event": "commented",
      "id": 1682768737,
      "node_id": "IC_kwDOABII585kTQNh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1682768737",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-17T18:29:59Z",
      "updated_at": "2023-08-24T21:28:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1689858941), [sipa](https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1692157594), [achow101](https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1692436095) |\n| Concept ACK | [russeree](https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1685404222) |\n| Stale ACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/28287#pullrequestreview-1588072908) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#27511](https://github.com/bitcoin/bitcoin/pull/27511) (rpc: Add test-only RPC getaddrmaninfo for new/tried table address count by stratospher)\n* [#26988](https://github.com/bitcoin/bitcoin/pull/26988) (cli: rework -addrinfo cli to use addresses which aren’t filtered for quality/recency by stratospher)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1682768737",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10122791602,
      "node_id": "HRFPE_lADOABII585umMpxzwAAAAJbXYqy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10122791602",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-17T18:38:16Z"
    },
    {
      "event": "labeled",
      "id": 10122794579,
      "node_id": "LE_lADOABII585umMpxzwAAAAJbXZZT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10122794579",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-17T18:38:38Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10122930475,
      "node_id": "HRFPE_lADOABII585umMpxzwAAAAJbX6kr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10122930475",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-17T18:55:43Z"
    },
    {
      "event": "commented",
      "id": 1682814806,
      "node_id": "IC_kwDOABII585kTbdW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1682814806",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-17T19:05:43Z",
      "updated_at": "2023-08-17T19:05:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1682814806",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-18T04:34:05Z",
      "updated_at": "2023-08-18T04:34:05Z",
      "source": {
        "issue": {
          "id": 1678790809,
          "node_id": "PR_kwDOABII585O4GIc",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27511",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27511/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27511/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27511/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27511",
          "number": 27511,
          "state": "open",
          "state_reason": null,
          "title": "rpc: Add test-only RPC getaddrmaninfo for new/tried table address count",
          "body": "implements https://github.com/bitcoin/bitcoin/issues/26907. split off from #26988 to keep RPC, CLI discussions separate.\r\n\r\nThis PR introduces a new RPC `getaddrmaninfo`which returns the count of addresses in the new/tried table of a node's addrman broken down by network type. This would be useful for users who want to see the distribution of addresses from different networks across new/tried table in the addrman.\r\n\r\n```jsx\r\n$ getaddrmaninfo\r\n\r\nResult:\r\n{                   (json object) json object with network type as keys\r\n  \"network\" : {     (json object) The network (ipv4, ipv6, onion, i2p, cjdns)\r\n    \"new\" : n,      (numeric) number of addresses in new table\r\n    \"tried\" : n,    (numeric) number of addresses in tried table\r\n    \"total\" : n     (numeric) total number of addresses in both new/tried tables from a network\r\n  },\r\n  ...\r\n}\r\n```\r\n\r\n### additional context from [original PR](https://github.com/bitcoin/bitcoin/pull/26988)\r\n\r\n1. network coverage tests were skipped because there’s a small chance that addresses from different networks could hash to the same bucket and cause count of different network addresses in the tests to fail. see https://github.com/bitcoin/bitcoin/pull/26988#discussion_r1137596851.\r\n2. #26988 uses this RPC in -addrinfo CLI. Slight preference for keeping the RPC hidden since this info will mostly be useful to only super users. see https://github.com/bitcoin/bitcoin/pull/26988#discussion_r1173964808.",
          "user": {
            "login": "stratospher",
            "id": 44024636,
            "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
            "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stratospher",
            "html_url": "https://github.com/stratospher",
            "followers_url": "https://api.github.com/users/stratospher/followers",
            "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
            "organizations_url": "https://api.github.com/users/stratospher/orgs",
            "repos_url": "https://api.github.com/users/stratospher/repos",
            "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/stratospher/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 18,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27511",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27511",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27511.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27511.patch"
          },
          "created_at": "2023-04-21T16:28:48Z",
          "updated_at": "2023-08-22T14:30:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1683351664,
      "node_id": "IC_kwDOABII585kVehw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1683351664",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-18T04:54:00Z",
      "updated_at": "2023-08-18T04:54:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK. Probably should add some basic functional tests to rpc_net.py with a `P2PInterface` checking that it works -- what happens if `msg_type` is 0 bytes, 13 bytes (`> protocol.h:COMMAND_SIZE`); what if `msg` is empty or more than 4MB (`net.h:MAX_PROTOCOL_MESSAGE_LENGTH`) or 32MB (`serialize.h:MAX_SIZE`)?",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1683351664",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "reviewed",
      "id": 1583884554,
      "node_id": "PRR_kwDOABII585eaCkK",
      "url": null,
      "actor": null,
      "commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "lgtm. Feel free to ignore the nits.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#pullrequestreview-1583884554",
      "submitted_at": "2023-08-18T05:53:25Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
    },
    {
      "event": "commented",
      "id": 1683390638,
      "node_id": "IC_kwDOABII585kVoCu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1683390638",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-18T05:54:31Z",
      "updated_at": "2023-08-18T05:54:31Z",
      "author_association": "MEMBER",
      "body": "`Error: RPC command \"sendmsgtopeer\" not found in RPC_COMMANDS_SAFE_FOR_FUZZING or RPC_COMMANDS_NOT_SAFE_FOR_FUZZING. Please update test/fuzz/rpc.cpp.`",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1683390638",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-18T05:55:59Z",
      "updated_at": "2023-08-18T05:55:59Z",
      "source": {
        "issue": {
          "id": 1561462605,
          "node_id": "PR_kwDOABII585Iw37r",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26988",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26988/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26988/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26988/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26988",
          "number": 26988,
          "state": "open",
          "state_reason": null,
          "title": "cli: rework -addrinfo cli to use addresses which aren’t filtered for quality/recency",
          "body": "implements https://github.com/bitcoin/bitcoin/issues/26907.  built on top of https://github.com/bitcoin/bitcoin/pull/27511.\r\n\r\nRework of `-addrinfo` CLI is done using `getaddrmaninfo` RPC proposed in https://github.com/bitcoin/bitcoin/pull/27511. This would be useful for users who want to know the total number of addresses the node knows about and can make connections to. \r\n\r\nCurrently, `-addrinfo` returns total number of addresses the node knows about after filtering them for quality + recency using [`isTerrible`](https://github.com/bitcoin/bitcoin/blob/4b51290f719559b8506425177f7758abe66fe2c3/src/addrman.cpp#L808). However `isTerrible`addresses [don't matter](https://github.com/bitcoin/bitcoin/pull/26988#discussion_r1147725684) when selecting outbound peers to connect to. Total number of addresses the node knows about could be higher than what `-addrinfo` currently displays. See https://github.com/bitcoin/bitcoin/pull/24370.",
          "user": {
            "login": "stratospher",
            "id": 44024636,
            "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
            "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stratospher",
            "html_url": "https://github.com/stratospher",
            "followers_url": "https://api.github.com/users/stratospher/followers",
            "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
            "organizations_url": "https://api.github.com/users/stratospher/orgs",
            "repos_url": "https://api.github.com/users/stratospher/repos",
            "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/stratospher/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26988",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26988",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26988.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26988.patch"
          },
          "created_at": "2023-01-29T21:25:28Z",
          "updated_at": "2023-08-18T05:55:58Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1585070952,
      "node_id": "PRR_kwDOABII585eekNo",
      "url": null,
      "actor": null,
      "commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#pullrequestreview-1585070952",
      "submitted_at": "2023-08-18T18:56:37Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
    },
    {
      "event": "commented",
      "id": 1685404222,
      "node_id": "IC_kwDOABII585kdTo-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1685404222",
      "actor": {
        "login": "russeree",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/russeree",
        "html_url": "https://github.com/russeree",
        "followers_url": "https://api.github.com/users/russeree/followers",
        "following_url": "https://api.github.com/users/russeree/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/russeree/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/russeree/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/russeree/subscriptions",
        "organizations_url": "https://api.github.com/users/russeree/orgs",
        "repos_url": "https://api.github.com/users/russeree/repos",
        "events_url": "https://api.github.com/users/russeree/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/russeree/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-20T21:44:12Z",
      "updated_at": "2023-08-20T21:44:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK this would be useful.",
      "user": {
        "login": "russeree",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/russeree",
        "html_url": "https://github.com/russeree",
        "followers_url": "https://api.github.com/users/russeree/followers",
        "following_url": "https://api.github.com/users/russeree/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/russeree/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/russeree/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/russeree/subscriptions",
        "organizations_url": "https://api.github.com/users/russeree/orgs",
        "repos_url": "https://api.github.com/users/russeree/repos",
        "events_url": "https://api.github.com/users/russeree/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/russeree/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1685404222",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "reviewed",
      "id": 1586864603,
      "node_id": "PRR_kwDOABII585elaHb",
      "url": null,
      "actor": null,
      "commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#pullrequestreview-1586864603",
      "submitted_at": "2023-08-21T12:19:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10149959406,
      "node_id": "HRFPE_lADOABII585umMpxzwAAAAJc_Bbu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10149959406",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-21T19:57:34Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10150000058,
      "node_id": "HRFPE_lADOABII585umMpxzwAAAAJc_LW6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10150000058",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-21T20:02:17Z"
    },
    {
      "event": "commented",
      "id": 1686985818,
      "node_id": "IC_kwDOABII585kjVxa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1686985818",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-21T20:19:15Z",
      "updated_at": "2023-08-21T20:20:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the reviews! I pushed an update with changes due to feedback, haven't addressed @ajtowns suggestion yet:\r\n\r\n> Concept ACK. Probably should add some basic functional tests to rpc_net.py with a `P2PInterface` checking that it works -- what happens if `msg_type` is 0 bytes, 13 bytes (`> protocol.h:COMMAND_SIZE`); what if `msg` is empty or more than 4MB (`net.h:MAX_PROTOCOL_MESSAGE_LENGTH`) or 32MB (`serialize.h:MAX_SIZE`)?\r\n\r\nWill add this to `rpc_net.py` soon. I think the best approach might be to allow these kinds of things things (e.g. empty `msg_type`, message body > 4MB) even if they don't make much sense - as long as they can be dealt with locally and don't trigger any asserts, like the oversized `msg_type` does.\r\n\r\n> Error: RPC command \"sendmsgtopeer\" not found in RPC_COMMANDS_SAFE_FOR_FUZZING or RPC_COMMANDS_NOT_SAFE_FOR_FUZZING. Please update test/fuzz/rpc.cpp.\r\n\r\nupdated with the same comment `getblockfrompeer` has, indicating that no msg will be sent when there are no peers.\r\n",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1686985818",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "mentioned",
      "id": 10150154518,
      "node_id": "MEE_lADOABII585umMpxzwAAAAJc_xEW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10150154518",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-21T20:19:16Z"
    },
    {
      "event": "subscribed",
      "id": 10150154529,
      "node_id": "SE_lADOABII585umMpxzwAAAAJc_xEh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10150154529",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-21T20:19:16Z"
    },
    {
      "event": "unlabeled",
      "id": 10150681693,
      "node_id": "UNLE_lADOABII585umMpxzwAAAAJdBxxd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10150681693",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-21T21:18:34Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1588072908,
      "node_id": "PRR_kwDOABII585eqBHM",
      "url": null,
      "actor": null,
      "commit_id": "d1404b344d5907d159502a2cb05aa0ad557ebb8f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "utACK d1404b344d5907d159502a2cb05aa0ad557ebb8f",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#pullrequestreview-1588072908",
      "submitted_at": "2023-08-21T23:53:16Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE5YTFkNjkzOTE1OTZmNTc4NTFmNTQ1ZmFlMTJmODg1MTE0OWQyYzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a9a1d69391596f57851f545fae12f8851149d2c3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a9a1d69391596f57851f545fae12f8851149d2c3",
      "tree": {
        "sha": "0db551032f05a88bcd5d8969ca2f6d13895092b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0db551032f05a88bcd5d8969ca2f6d13895092b6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6ce5e8f4758e6fccf59b3980af417ec6c75e383e",
          "sha": "6ce5e8f4758e6fccf59b3980af417ec6c75e383e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6ce5e8f4758e6fccf59b3980af417ec6c75e383e"
        }
      ],
      "message": "rpc: add test-only sendmsgtopeer rpc\n\nThis rpc can be used when we want a node to send a message, but\ncannot use a python P2P object, for example for testing of low-level\nnet transport behavior.",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-08-22T17:28:15Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-08-15T16:02:14Z"
      },
      "sha": "a9a1d69391596f57851f545fae12f8851149d2c3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM1NTdhYTRkMGFiNTljMTg4MDc2NjFhNDkwNzBiMGU1Y2JmZWNkZTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3557aa4d0ab59c18807661a49070b0e5cbfecde3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3557aa4d0ab59c18807661a49070b0e5cbfecde3",
      "tree": {
        "sha": "50222699f5e881175a9cb26e84d505d83bb43e7b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/50222699f5e881175a9cb26e84d505d83bb43e7b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a9a1d69391596f57851f545fae12f8851149d2c3",
          "sha": "a9a1d69391596f57851f545fae12f8851149d2c3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a9a1d69391596f57851f545fae12f8851149d2c3"
        }
      ],
      "message": "test: add basic tests for sendmsgtopeer to rpc_net.py",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-08-22T17:28:15Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-08-22T17:15:14Z"
      },
      "sha": "3557aa4d0ab59c18807661a49070b0e5cbfecde3"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10161310169,
      "node_id": "HRFPE_lADOABII585umMpxzwAAAAJdqUnZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10161310169",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T17:30:55Z"
    },
    {
      "event": "commented",
      "id": 1688634638,
      "node_id": "IC_kwDOABII585kpoUO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688634638",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T17:36:40Z",
      "updated_at": "2023-08-22T17:36:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "I added a commit for basic coverage in `rpc_net.py` and made some other minor changes.\r\n\r\n> what if `msg` is empty or more than 4MB (`net.h:MAX_PROTOCOL_MESSAGE_LENGTH`) or 32MB (`serialize.h:MAX_SIZE`)?\r\n\r\nI added coverage for >4MB. I couldn't test the case >32MB, because already at ~16MB I get a failure passing a string that long via RPC (independent on the actual RPC, so this can't be handled within `sendmsgtopeer`).\r\n",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1688634638",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIzYTkzYjQwOWU3ZmIzM2FmNzdiZDM0YTI2OWEzZWFlNzFkM2JhODM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "tree": {
        "sha": "eb287da8358ebefa717303f97d1cc03ac63c7786",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/eb287da8358ebefa717303f97d1cc03ac63c7786"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3557aa4d0ab59c18807661a49070b0e5cbfecde3",
          "sha": "3557aa4d0ab59c18807661a49070b0e5cbfecde3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3557aa4d0ab59c18807661a49070b0e5cbfecde3"
        }
      ],
      "message": "test: add functional test for deadlock situation",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-08-22T17:45:26Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-07-20T22:24:29Z"
      },
      "sha": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10161442782,
      "node_id": "HRFPE_lADOABII585umMpxzwAAAAJdq0_e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10161442782",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T17:46:22Z"
    },
    {
      "event": "commented",
      "id": 1689858941,
      "node_id": "IC_kwDOABII585kuTN9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1689858941",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-23T12:17:30Z",
      "updated_at": "2023-08-23T12:17:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK b3a93b409e7fb33af77bd34a269a3eae71d3ba83\r\n\r\nLGTM. `bitcoin-cli sendmsgtopeer 0 mempool \"\"` to a peer that has you whitelisted works as a poor man's `importmempool` (#27460) which is neat. Confirm that `p2p_net_deadlock` test catches the bug if #27981 is reverted (and running `netstat -n` confirms the tcp buffers are just sitting there being ignored while the test case is running).",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1689858941",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "review_requested",
      "id": 10169439652,
      "node_id": "RRE_lADOABII585umMpxzwAAAAJeJVWk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10169439652",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-23T12:17:35Z",
      "requested_reviewer": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "labeled",
      "id": 10183223461,
      "node_id": "LE_lADOABII585umMpxzwAAAAJe96il",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10183223461",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-24T15:47:20Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "labeled",
      "id": 10183223481,
      "node_id": "LE_lADOABII585umMpxzwAAAAJe96i5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10183223481",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-24T15:47:20Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 1692157594,
      "node_id": "IC_kwDOABII585k3Eaa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692157594",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-24T17:47:11Z",
      "updated_at": "2023-08-24T17:47:11Z",
      "author_association": "MEMBER",
      "body": "ACK b3a93b409e7fb33af77bd34a269a3eae71d3ba83\r\n\r\nTwo non-blocking comments:\r\n* Maybe add a comment to the p2p_net_deadlock.py that explains what issue it is supposed to address (perhaps by linking to the PR that fixed it).\r\n* The RPC added does not check whether the msg_type consists of valid characters (see `CMessageHeader::IsCommandValid()`). Currently, such messages are ignored by the receiver. Does it make sense to add a check the RPC, or a test that sending such messages works?",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1692157594",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "commented",
      "id": 1692436095,
      "node_id": "IC_kwDOABII585k4IZ_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692436095",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-24T21:28:53Z",
      "updated_at": "2023-08-24T21:28:53Z",
      "author_association": "MEMBER",
      "body": "ACK b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#issuecomment-1692436095",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28287"
    },
    {
      "event": "merged",
      "id": 10186253389,
      "node_id": "ME_lADOABII585umMpxzwAAAAJfJeRN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10186253389",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "c9273f68f6a17b669890b0b2d38dbcc8b3c39d7b",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/c9273f68f6a17b669890b0b2d38dbcc8b3c39d7b",
      "created_at": "2023-08-24T21:35:09Z"
    },
    {
      "event": "closed",
      "id": 10186253423,
      "node_id": "CE_lADOABII585umMpxzwAAAAJfJeRv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10186253423",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-24T21:35:09Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298027612",
      "pull_request_review_id": 1583884554,
      "id": 1298027612,
      "node_id": "PRRC_kwDOABII585NXlRc",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2023-The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+import threading\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import random_bytes\n+\n+\n+def send_message(node, peer_id, msg_type, msg):\n+    node.sendmsgtopeer(peer_id, msg_type, msg)\n+\n+\n+class NetDeadlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        node0 = self.nodes[0]\n+        node1 = self.nodes[1]\n+        self.connect_nodes(0, 1)\n+        self.sync_all()\n+\n+        self.log.info(\"Simultaneously send a large message on both sides\")\n+        rand_msg = random_bytes(4000000).hex()\n+\n+        thread0 = threading.Thread(target=send_message, args=(node0, 0, \"unknown\", rand_msg))\n+        thread1 = threading.Thread(target=send_message, args=(node1, 0, \"unknown\", rand_msg))",
      "path": "test/functional/p2p_net_deadlock.py",
      "position": null,
      "original_position": 33,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        thread1 = threading.Thread(target=node1.send_message, args=(0, \"unknown\", rand_msg))\r\n```\r\n\r\nNot sure if it works, but maybe you can drop the wrapper function?",
      "created_at": "2023-08-18T05:43:42Z",
      "updated_at": "2023-08-18T05:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1298027612",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298027612"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298029632",
      "pull_request_review_id": 1583884554,
      "id": 1298029632,
      "node_id": "PRRC_kwDOABII585NXlxA",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2023-The Bitcoin Core developers",
      "path": "test/functional/p2p_net_deadlock.py",
      "position": null,
      "original_position": 2,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n# Copyright (c) 2023-present The Bitcoin Core developers\r\n```\r\n\r\nnit: Either remove the typo, or remove the year, or append `present` to avoid having to \"bump\" this newly added file ever again.",
      "created_at": "2023-08-18T05:47:18Z",
      "updated_at": "2023-08-18T05:53:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1298029632",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298029632"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298031624",
      "pull_request_review_id": 1583884554,
      "id": 1298031624,
      "node_id": "PRRC_kwDOABII585NXmQI",
      "diff_hunk": "@@ -968,6 +968,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan sendmsgtopeer()\n+{\n+    return RPCHelpMan{\"sendmsgtopeer\",\n+                \"\\nSend a p2p message to a peer specified by id.\\n\"\n+                \"The message type and body must be provided, the message header will be generated\"\n+                \"This RPC is for testing only\\n\",\n+                {\n+                    {\"peer_id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The peer to send the message to.\"},\n+                    {\"msg_type\", RPCArg::Type::STR, RPCArg::Optional::NO, strprintf(\"The message type (maximum length %i)\", CMessageHeader::COMMAND_SIZE)},\n+                    {\"msg\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The serialized message body to send, in hex, without a message header\"},\n+                },\n+                RPCResult{RPCResult::Type::OBJ, \"\", \"\", std::vector<RPCResult>{}},\n+                RPCExamples{\n+                    HelpExampleCli(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+            + HelpExampleRpc(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    const NodeId peer_id{request.params[0].getInt<int64_t>()};\n+    const std::string& msg_type{request.params[1].get_str()};\n+    if( msg_type.size() > CMessageHeader::COMMAND_SIZE) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Error: msg_type too long, max is (%i)\", CMessageHeader::COMMAND_SIZE));\n+    }\n+    const std::vector<unsigned char> msg{ParseHex(request.params[2].get_str())};",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Use `TryParseHex`?",
      "created_at": "2023-08-18T05:50:32Z",
      "updated_at": "2023-08-18T05:53:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1298031624",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298031624"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 994,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298032250",
      "pull_request_review_id": 1583884554,
      "id": 1298032250,
      "node_id": "PRRC_kwDOABII585NXmZ6",
      "diff_hunk": "@@ -968,6 +968,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan sendmsgtopeer()\n+{\n+    return RPCHelpMan{\"sendmsgtopeer\",\n+                \"\\nSend a p2p message to a peer specified by id.\\n\"\n+                \"The message type and body must be provided, the message header will be generated\"\n+                \"This RPC is for testing only\\n\",",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "\r\n```suggestion\r\n                \"Send a p2p message to a peer specified by id.\\n\"\r\n                \"The message type and body must be provided, the message header will be generated.\\n\"\r\n                \"This RPC is for testing only.\",\r\n```\r\n\r\nnit",
      "created_at": "2023-08-18T05:51:37Z",
      "updated_at": "2023-08-18T05:53:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1298032250",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298032250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": 974,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 976,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298033278",
      "pull_request_review_id": 1583884554,
      "id": 1298033278,
      "node_id": "PRRC_kwDOABII585NXmp-",
      "diff_hunk": "@@ -968,6 +968,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan sendmsgtopeer()\n+{\n+    return RPCHelpMan{\"sendmsgtopeer\",\n+                \"\\nSend a p2p message to a peer specified by id.\\n\"\n+                \"The message type and body must be provided, the message header will be generated\"\n+                \"This RPC is for testing only\\n\",\n+                {\n+                    {\"peer_id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The peer to send the message to.\"},\n+                    {\"msg_type\", RPCArg::Type::STR, RPCArg::Optional::NO, strprintf(\"The message type (maximum length %i)\", CMessageHeader::COMMAND_SIZE)},\n+                    {\"msg\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The serialized message body to send, in hex, without a message header\"},\n+                },\n+                RPCResult{RPCResult::Type::OBJ, \"\", \"\", std::vector<RPCResult>{}},\n+                RPCExamples{\n+                    HelpExampleCli(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+            + HelpExampleRpc(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    const NodeId peer_id{request.params[0].getInt<int64_t>()};\n+    const std::string& msg_type{request.params[1].get_str()};\n+    if( msg_type.size() > CMessageHeader::COMMAND_SIZE) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Error: msg_type too long, max is (%i)\", CMessageHeader::COMMAND_SIZE));\n+    }\n+    const std::vector<unsigned char> msg{ParseHex(request.params[2].get_str())};\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CConnman& connman = EnsureConnman(node);\n+\n+    CSerializedNetMsg msg_ser;\n+    msg_ser.data = msg;\n+    msg_ser.m_type = msg_type;\n+\n+    bool success = connman.ForNode(peer_id, [&](CNode* node) {\n+        connman.PushMessage(node, std::move(msg_ser));\n+        return true;\n+    });\n+\n+    if (!success) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Error: Could not send message to peer\");\n+    }\n+\n+    UniValue ret{UniValue::VOBJ};\n+    return ret;\n+},\n+    };\n+}",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Clang-format-diff new code?",
      "created_at": "2023-08-18T05:53:11Z",
      "updated_at": "2023-08-18T05:53:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1298033278",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298033278"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": 1014,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1017,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298424645",
      "pull_request_review_id": 1584528143,
      "id": 1298424645,
      "node_id": "PRRC_kwDOABII585NZGNF",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2023-The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+import threading\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import random_bytes\n+\n+\n+def send_message(node, peer_id, msg_type, msg):\n+    node.sendmsgtopeer(peer_id, msg_type, msg)\n+\n+\n+class NetDeadlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        node0 = self.nodes[0]\n+        node1 = self.nodes[1]\n+        self.connect_nodes(0, 1)\n+        self.sync_all()\n+\n+        self.log.info(\"Simultaneously send a large message on both sides\")\n+        rand_msg = random_bytes(4000000).hex()\n+\n+        thread0 = threading.Thread(target=send_message, args=(node0, 0, \"unknown\", rand_msg))\n+        thread1 = threading.Thread(target=send_message, args=(node1, 0, \"unknown\", rand_msg))",
      "path": "test/functional/p2p_net_deadlock.py",
      "position": null,
      "original_position": 33,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": 1298027612,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It works. But in the case it would be `target=node1.sendmsgtopeer` instead of `target=node1.send_message`.",
      "created_at": "2023-08-18T13:00:14Z",
      "updated_at": "2023-08-18T13:00:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1298424645",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298424645"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298767271",
      "pull_request_review_id": 1585070952,
      "id": 1298767271,
      "node_id": "PRRC_kwDOABII585NaZ2n",
      "diff_hunk": "@@ -968,6 +968,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan sendmsgtopeer()\n+{\n+    return RPCHelpMan{\"sendmsgtopeer\",\n+                \"\\nSend a p2p message to a peer specified by id.\\n\"\n+                \"The message type and body must be provided, the message header will be generated\"\n+                \"This RPC is for testing only\\n\",\n+                {\n+                    {\"peer_id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The peer to send the message to.\"},\n+                    {\"msg_type\", RPCArg::Type::STR, RPCArg::Optional::NO, strprintf(\"The message type (maximum length %i)\", CMessageHeader::COMMAND_SIZE)},\n+                    {\"msg\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The serialized message body to send, in hex, without a message header\"},\n+                },\n+                RPCResult{RPCResult::Type::OBJ, \"\", \"\", std::vector<RPCResult>{}},\n+                RPCExamples{\n+                    HelpExampleCli(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+            + HelpExampleRpc(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    const NodeId peer_id{request.params[0].getInt<int64_t>()};\n+    const std::string& msg_type{request.params[1].get_str()};\n+    if( msg_type.size() > CMessageHeader::COMMAND_SIZE) {",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit\r\n```suggestion\r\n    if (msg_type.size() > CMessageHeader::COMMAND_SIZE) {\r\n```",
      "created_at": "2023-08-18T18:56:37Z",
      "updated_at": "2023-08-18T18:56:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1298767271",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1298767271"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 991,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300034738",
      "pull_request_review_id": 1586864603,
      "id": 1300034738,
      "node_id": "PRRC_kwDOABII585NfPSy",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2023-The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+import threading\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import random_bytes\n+\n+\n+def send_message(node, peer_id, msg_type, msg):\n+    node.sendmsgtopeer(peer_id, msg_type, msg)\n+\n+\n+class NetDeadlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        node0 = self.nodes[0]\n+        node1 = self.nodes[1]\n+        self.connect_nodes(0, 1)",
      "path": "test/functional/p2p_net_deadlock.py",
      "position": null,
      "original_position": 26,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": null,
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think you don't need to override `setup_network`:\r\n```diff\r\ndiff --git a/test/functional/p2p_net_deadlock.py b/test/functional/p\r\n2p_net_deadlock.py\r\nindex 1b2139cc8..4ed9170e4 100755\r\n--- a/test/functional/p2p_net_deadlock.py\r\n+++ b/test/functional/p2p_net_deadlock.py\r\n@@ -17,14 +17,9 @@ class NetDeadlockTest(BitcoinTestFramework):\r\n         self.setup_clean_chain = True\r\n         self.num_nodes = 2\r\n \r\n-    def setup_network(self):\r\n-        self.setup_nodes()\r\n-\r\n     def run_test(self):\r\n         node0 = self.nodes[0]\r\n         node1 = self.nodes[1]\r\n-        self.connect_nodes(0, 1)\r\n-        self.sync_all()\r\n \r\n         self.log.info(\"Simultaneously send a large message on both sides\")\r\n         rand_msg = random_bytes(4000000).hex()\r\n```",
      "created_at": "2023-08-21T12:19:57Z",
      "updated_at": "2023-08-21T12:19:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1300034738",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300034738"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300585399",
      "pull_request_review_id": 1587772870,
      "id": 1300585399,
      "node_id": "PRRC_kwDOABII585NhVu3",
      "diff_hunk": "@@ -968,6 +968,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan sendmsgtopeer()\n+{\n+    return RPCHelpMan{\"sendmsgtopeer\",\n+                \"\\nSend a p2p message to a peer specified by id.\\n\"\n+                \"The message type and body must be provided, the message header will be generated\"\n+                \"This RPC is for testing only\\n\",\n+                {\n+                    {\"peer_id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The peer to send the message to.\"},\n+                    {\"msg_type\", RPCArg::Type::STR, RPCArg::Optional::NO, strprintf(\"The message type (maximum length %i)\", CMessageHeader::COMMAND_SIZE)},\n+                    {\"msg\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The serialized message body to send, in hex, without a message header\"},\n+                },\n+                RPCResult{RPCResult::Type::OBJ, \"\", \"\", std::vector<RPCResult>{}},\n+                RPCExamples{\n+                    HelpExampleCli(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+            + HelpExampleRpc(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    const NodeId peer_id{request.params[0].getInt<int64_t>()};\n+    const std::string& msg_type{request.params[1].get_str()};\n+    if( msg_type.size() > CMessageHeader::COMMAND_SIZE) {",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": 1298767271,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed",
      "created_at": "2023-08-21T19:58:02Z",
      "updated_at": "2023-08-21T19:58:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1300585399",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300585399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 991,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300585536",
      "pull_request_review_id": 1587773102,
      "id": 1300585536,
      "node_id": "PRRC_kwDOABII585NhVxA",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2023-The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+import threading\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import random_bytes\n+\n+\n+def send_message(node, peer_id, msg_type, msg):\n+    node.sendmsgtopeer(peer_id, msg_type, msg)\n+\n+\n+class NetDeadlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        node0 = self.nodes[0]\n+        node1 = self.nodes[1]\n+        self.connect_nodes(0, 1)",
      "path": "test/functional/p2p_net_deadlock.py",
      "position": null,
      "original_position": 26,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": 1300034738,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-08-21T19:58:12Z",
      "updated_at": "2023-08-21T19:58:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1300585536",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300585536"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300590440",
      "pull_request_review_id": 1587782829,
      "id": 1300590440,
      "node_id": "PRRC_kwDOABII585NhW9o",
      "diff_hunk": "@@ -968,6 +968,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan sendmsgtopeer()\n+{\n+    return RPCHelpMan{\"sendmsgtopeer\",\n+                \"\\nSend a p2p message to a peer specified by id.\\n\"\n+                \"The message type and body must be provided, the message header will be generated\"\n+                \"This RPC is for testing only\\n\",\n+                {\n+                    {\"peer_id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The peer to send the message to.\"},\n+                    {\"msg_type\", RPCArg::Type::STR, RPCArg::Optional::NO, strprintf(\"The message type (maximum length %i)\", CMessageHeader::COMMAND_SIZE)},\n+                    {\"msg\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The serialized message body to send, in hex, without a message header\"},\n+                },\n+                RPCResult{RPCResult::Type::OBJ, \"\", \"\", std::vector<RPCResult>{}},\n+                RPCExamples{\n+                    HelpExampleCli(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+            + HelpExampleRpc(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    const NodeId peer_id{request.params[0].getInt<int64_t>()};\n+    const std::string& msg_type{request.params[1].get_str()};\n+    if( msg_type.size() > CMessageHeader::COMMAND_SIZE) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Error: msg_type too long, max is (%i)\", CMessageHeader::COMMAND_SIZE));\n+    }\n+    const std::vector<unsigned char> msg{ParseHex(request.params[2].get_str())};\n+\n+    NodeContext& node = EnsureAnyNodeContext(request.context);\n+    CConnman& connman = EnsureConnman(node);\n+\n+    CSerializedNetMsg msg_ser;\n+    msg_ser.data = msg;\n+    msg_ser.m_type = msg_type;\n+\n+    bool success = connman.ForNode(peer_id, [&](CNode* node) {\n+        connman.PushMessage(node, std::move(msg_ser));\n+        return true;\n+    });\n+\n+    if (!success) {\n+        throw JSONRPCError(RPC_MISC_ERROR, \"Error: Could not send message to peer\");\n+    }\n+\n+    UniValue ret{UniValue::VOBJ};\n+    return ret;\n+},\n+    };\n+}",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": 1298033278,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "For some reason I always thought that clang-format doesn't apply to rpc indentation (because most of the existing ones don't comply with it), but that doesn't seem to be the case, so I've applied it.",
      "created_at": "2023-08-21T20:02:49Z",
      "updated_at": "2023-08-21T20:02:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1300590440",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300590440"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": 1014,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1017,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300590573",
      "pull_request_review_id": 1587783034,
      "id": 1300590573,
      "node_id": "PRRC_kwDOABII585NhW_t",
      "diff_hunk": "@@ -968,6 +968,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan sendmsgtopeer()\n+{\n+    return RPCHelpMan{\"sendmsgtopeer\",\n+                \"\\nSend a p2p message to a peer specified by id.\\n\"\n+                \"The message type and body must be provided, the message header will be generated\"\n+                \"This RPC is for testing only\\n\",",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": 1298032250,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done",
      "created_at": "2023-08-21T20:02:59Z",
      "updated_at": "2023-08-21T20:02:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1300590573",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300590573"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": 974,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 976,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300591088",
      "pull_request_review_id": 1587783781,
      "id": 1300591088,
      "node_id": "PRRC_kwDOABII585NhXHw",
      "diff_hunk": "@@ -968,6 +968,53 @@ static RPCHelpMan addpeeraddress()\n     };\n }\n \n+static RPCHelpMan sendmsgtopeer()\n+{\n+    return RPCHelpMan{\"sendmsgtopeer\",\n+                \"\\nSend a p2p message to a peer specified by id.\\n\"\n+                \"The message type and body must be provided, the message header will be generated\"\n+                \"This RPC is for testing only\\n\",\n+                {\n+                    {\"peer_id\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The peer to send the message to.\"},\n+                    {\"msg_type\", RPCArg::Type::STR, RPCArg::Optional::NO, strprintf(\"The message type (maximum length %i)\", CMessageHeader::COMMAND_SIZE)},\n+                    {\"msg\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The serialized message body to send, in hex, without a message header\"},\n+                },\n+                RPCResult{RPCResult::Type::OBJ, \"\", \"\", std::vector<RPCResult>{}},\n+                RPCExamples{\n+                    HelpExampleCli(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+            + HelpExampleRpc(\"sendmsgtopeer\", \"0 \\\"addr\\\" \\\"ffffff\\\"\")\n+                },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+{\n+    const NodeId peer_id{request.params[0].getInt<int64_t>()};\n+    const std::string& msg_type{request.params[1].get_str()};\n+    if( msg_type.size() > CMessageHeader::COMMAND_SIZE) {\n+        throw JSONRPCError(RPC_INVALID_PARAMETER, strprintf(\"Error: msg_type too long, max is (%i)\", CMessageHeader::COMMAND_SIZE));\n+    }\n+    const std::vector<unsigned char> msg{ParseHex(request.params[2].get_str())};",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": 1298031624,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done, and added a `JSONRPCError` if parsing fails.",
      "created_at": "2023-08-21T20:03:30Z",
      "updated_at": "2023-08-21T20:03:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1300591088",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300591088"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 994,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300591481",
      "pull_request_review_id": 1587784417,
      "id": 1300591481,
      "node_id": "PRRC_kwDOABII585NhXN5",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2023-The Bitcoin Core developers",
      "path": "test/functional/p2p_net_deadlock.py",
      "position": null,
      "original_position": 2,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": 1298029632,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "used `2023-present` as suggested",
      "created_at": "2023-08-21T20:03:59Z",
      "updated_at": "2023-08-21T20:03:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1300591481",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300591481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300591929",
      "pull_request_review_id": 1587785035,
      "id": 1300591929,
      "node_id": "PRRC_kwDOABII585NhXU5",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2023-The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+import threading\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import random_bytes\n+\n+\n+def send_message(node, peer_id, msg_type, msg):\n+    node.sendmsgtopeer(peer_id, msg_type, msg)\n+\n+\n+class NetDeadlockTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+\n+    def setup_network(self):\n+        self.setup_nodes()\n+\n+    def run_test(self):\n+        node0 = self.nodes[0]\n+        node1 = self.nodes[1]\n+        self.connect_nodes(0, 1)\n+        self.sync_all()\n+\n+        self.log.info(\"Simultaneously send a large message on both sides\")\n+        rand_msg = random_bytes(4000000).hex()\n+\n+        thread0 = threading.Thread(target=send_message, args=(node0, 0, \"unknown\", rand_msg))\n+        thread1 = threading.Thread(target=send_message, args=(node1, 0, \"unknown\", rand_msg))",
      "path": "test/functional/p2p_net_deadlock.py",
      "position": null,
      "original_position": 33,
      "commit_id": "b3a93b409e7fb33af77bd34a269a3eae71d3ba83",
      "original_commit_id": "7b76e09e14739e0adcbcf6a814cbccd19cf1a5d8",
      "in_reply_to_id": 1298027612,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "thanks, used `target=node1.sendmsgtopeer` and removed the wrapper",
      "created_at": "2023-08-21T20:04:29Z",
      "updated_at": "2023-08-21T20:04:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28287#discussion_r1300591929",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300591929"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28287"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    }
  ]
}