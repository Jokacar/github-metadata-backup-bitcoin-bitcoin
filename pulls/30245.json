{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30245",
    "id": 1909162960,
    "node_id": "PR_kwDOABII585xy4PQ",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30245",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30245.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30245.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30245",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30245/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30245/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30245/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/84e63f34af0396c2a79276be8996403768b65dee",
    "number": 30245,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "net: Allow -proxy=[::1] on nodes with IPV6 lo only",
    "user": {
      "login": "m3dwards",
      "id": 1204616,
      "node_id": "MDQ6VXNlcjEyMDQ2MTY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1204616?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/m3dwards",
      "html_url": "https://github.com/m3dwards",
      "followers_url": "https://api.github.com/users/m3dwards/followers",
      "following_url": "https://api.github.com/users/m3dwards/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/m3dwards/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/m3dwards/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/m3dwards/subscriptions",
      "organizations_url": "https://api.github.com/users/m3dwards/orgs",
      "repos_url": "https://api.github.com/users/m3dwards/repos",
      "events_url": "https://api.github.com/users/m3dwards/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/m3dwards/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is similar to (but does not fix) https://github.com/bitcoin/bitcoin/issues/13155 which I believe is the same issue but in libevent.\r\n\r\nThe issue is on a host that has IPV6 enabled but only a loopback IP address `-proxy=[::1]` will fail as `[::1]` is not considered valid by `getaddrinfo` with `AI_ADDRCONFIG` flag. I think the loopback interface should be considered valid and we have a functional test that will try to test this: `feature_proxy.py`.\r\n\r\nTo replicate the issue, run `feature_proxy.py` inside a docker container that has IPV6 loopback ::1 address without specifically giving that container an external IPV6 address. This should be the default with recent versions of docker. IPV6 on loopback interface was enabled in docker engine 26 and later ([https://docs.docker.com/engine/release-notes/26.0/#bug-fixes-and-enhancements-2](https://docs.docker.com/engine/release-notes/26.0/#bug-fixes-and-enhancements-2)).\r\n\r\n`AI_ADDRCONFIG` was introduced to prevent slow DNS lookups on systems that were IPV4 only. I think most systems will be dual stack now and I'm not sure this is really a concern for us but this is something to consider as a potential downside of this PR.\r\n\r\nReferences:\r\n\r\nMan section on AI_ADDRCONFIG:`\r\n\r\n```\r\nIf hints.ai_flags includes the AI_ADDRCONFIG flag, then IPv4 addresses are returned in the list pointed to by res only if the local system has at least one IPv4 address configured, and  IPv6  addresses\r\n       are  returned only if the local system has at least one IPv6 address configured.  The loopback address is not considered for this case as valid as a configured address.  This flag is useful on, for ex‚Äê\r\n       ample, IPv4-only systems, to ensure that getaddrinfo() does not return IPv6 socket addresses that would always fail in connect(2) or bind(2).\r\n```\r\n\r\n[AI_ADDRCONFIG considered harmful Wiki entry by Fedora](https://fedoraproject.org/wiki/QA/Networking/NameResolution/ADDRCONFIG)\r\n\r\n[Mozilla discussing slow DNS without AI_ADDRCONFIG and also localhost issues with it](https://bugzilla.mozilla.org/show_bug.cgi?id=467497)\r\n",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      }
    ],
    "created_at": "2024-06-07T12:53:49Z",
    "updated_at": "2024-06-14T11:35:35Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "b46003801690811c3aa3b979d2e78f9b51760dfc",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "m3dwards:allow-dns-ipv6-lo-only",
      "ref": "allow-dns-ipv6-lo-only",
      "sha": "84e63f34af0396c2a79276be8996403768b65dee",
      "user": {
        "login": "m3dwards",
        "id": 1204616,
        "node_id": "MDQ6VXNlcjEyMDQ2MTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1204616?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/m3dwards",
        "html_url": "https://github.com/m3dwards",
        "followers_url": "https://api.github.com/users/m3dwards/followers",
        "following_url": "https://api.github.com/users/m3dwards/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/m3dwards/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/m3dwards/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/m3dwards/subscriptions",
        "organizations_url": "https://api.github.com/users/m3dwards/orgs",
        "repos_url": "https://api.github.com/users/m3dwards/repos",
        "events_url": "https://api.github.com/users/m3dwards/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/m3dwards/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 727882334,
        "node_id": "R_kgDOK2KaXg",
        "name": "bitcoin",
        "full_name": "m3dwards/bitcoin",
        "owner": {
          "login": "m3dwards",
          "id": 1204616,
          "node_id": "MDQ6VXNlcjEyMDQ2MTY=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1204616?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/m3dwards",
          "html_url": "https://github.com/m3dwards",
          "followers_url": "https://api.github.com/users/m3dwards/followers",
          "following_url": "https://api.github.com/users/m3dwards/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/m3dwards/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/m3dwards/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/m3dwards/subscriptions",
          "organizations_url": "https://api.github.com/users/m3dwards/orgs",
          "repos_url": "https://api.github.com/users/m3dwards/repos",
          "events_url": "https://api.github.com/users/m3dwards/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/m3dwards/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/m3dwards/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/m3dwards/bitcoin",
        "archive_url": "https://api.github.com/repos/m3dwards/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/m3dwards/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/m3dwards/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/m3dwards/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/m3dwards/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/m3dwards/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/m3dwards/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/m3dwards/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/m3dwards/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/m3dwards/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/m3dwards/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/m3dwards/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/m3dwards/bitcoin/events",
        "forks_url": "https://api.github.com/repos/m3dwards/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/m3dwards/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/m3dwards/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/m3dwards/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/m3dwards/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/m3dwards/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/m3dwards/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/m3dwards/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/m3dwards/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/m3dwards/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/m3dwards/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/m3dwards/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/m3dwards/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/m3dwards/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/m3dwards/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/m3dwards/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:m3dwards/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/m3dwards/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/m3dwards/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/m3dwards/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/m3dwards/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/m3dwards/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/m3dwards/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/m3dwards/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/m3dwards/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/m3dwards/bitcoin/hooks",
        "svn_url": "https://github.com/m3dwards/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 220860,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-12T17:24:37Z",
        "created_at": "2023-12-05T19:14:11Z",
        "updated_at": "2024-06-12T13:49:24Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "4a020ca443ba370bf41583962d16aa8551876f53",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35514,
        "stargazers_count": 76911,
        "watchers_count": 76911,
        "size": 261640,
        "default_branch": "master",
        "open_issues_count": 686,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-14T11:09:14Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-06-14T10:48:08Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30245"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 1,
    "deletions": 1,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 1,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg0ZTYzZjM0YWYwMzk2YzJhNzkyNzZiZTg5OTY0MDM3NjhiNjVkZWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/84e63f34af0396c2a79276be8996403768b65dee",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/84e63f34af0396c2a79276be8996403768b65dee",
      "tree": {
        "sha": "12753b9df124a0bd045e23b2eedd9ec1ba91506c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/12753b9df124a0bd045e23b2eedd9ec1ba91506c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4a020ca443ba370bf41583962d16aa8551876f53",
          "sha": "4a020ca443ba370bf41583962d16aa8551876f53",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4a020ca443ba370bf41583962d16aa8551876f53"
        }
      ],
      "message": "net: Allow DNS lookups on nodes with IPV6 lo only\n\nAI_ADDRCONFIG prevents ::1 from being considered a valid address on hosts that have a IPV6 loopback IP address but no other IPV6 interfaces.",
      "committer": {
        "name": "Max Edwards",
        "email": "youwontforgetthis@gmail.com",
        "date": "2024-06-07T12:24:04Z"
      },
      "author": {
        "name": "Max Edwards",
        "email": "youwontforgetthis@gmail.com",
        "date": "2024-06-07T12:24:04Z"
      },
      "sha": "84e63f34af0396c2a79276be8996403768b65dee"
    },
    {
      "event": "commented",
      "id": 2154778040,
      "node_id": "IC_kwDOABII586Ab024",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2154778040",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T12:53:51Z",
      "updated_at": "2024-06-14T11:35:35Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30245).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/30245#pullrequestreview-2117955181) |\n\nIf your review is incorrectly listed, please react with üëé to this comment and the bot will ignore it on the next update.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30245#issuecomment-2154778040",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30245"
    },
    {
      "event": "labeled",
      "id": 13080409380,
      "node_id": "LE_lADOABII586Lf3k7zwAAAAMLpzUk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13080409380",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T12:53:53Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "m3dwards",
        "id": 1204616,
        "node_id": "MDQ6VXNlcjEyMDQ2MTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1204616?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/m3dwards",
        "html_url": "https://github.com/m3dwards",
        "followers_url": "https://api.github.com/users/m3dwards/followers",
        "following_url": "https://api.github.com/users/m3dwards/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/m3dwards/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/m3dwards/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/m3dwards/subscriptions",
        "organizations_url": "https://api.github.com/users/m3dwards/orgs",
        "repos_url": "https://api.github.com/users/m3dwards/repos",
        "events_url": "https://api.github.com/users/m3dwards/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/m3dwards/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T10:06:50Z",
      "updated_at": "2024-06-10T10:06:50Z",
      "source": {
        "issue": {
          "id": 2323537964,
          "node_id": "PR_kwDOABII585w5aoC",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30193",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30193/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30193/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30193/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/30193",
          "number": 30193,
          "state": "open",
          "state_reason": null,
          "title": "ci: move ASan job to GitHub Actions from Cirrus CI",
          "body": "PR for moving the ASAN + LSAN + USDT + friends job to github actions from Cirrus.\r\n\r\nThe motivation for this PR is that this task needs a full VM (or bare metal) to function, because of the tracepoints. It can not run in a container on an arbitrary Linux, because the outside machine must exactly match the specification of the distro used in the CI task config. This requires more maintenance for the persistent worker, and I think moving to GHA will reduce the maintenance burden, or at least make it possible for anyone to work on.\r\n\r\nAlso, it makes it easier to run the task on forks (bitcoin-inquisition, bitcoin-knots, devel forks, ...) without having to set-up a real machine.\r\n",
          "user": {
            "login": "m3dwards",
            "id": 1204616,
            "node_id": "MDQ6VXNlcjEyMDQ2MTY=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1204616?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/m3dwards",
            "html_url": "https://github.com/m3dwards",
            "followers_url": "https://api.github.com/users/m3dwards/followers",
            "following_url": "https://api.github.com/users/m3dwards/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/m3dwards/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/m3dwards/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/m3dwards/subscriptions",
            "organizations_url": "https://api.github.com/users/m3dwards/orgs",
            "repos_url": "https://api.github.com/users/m3dwards/repos",
            "events_url": "https://api.github.com/users/m3dwards/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/m3dwards/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 6861582155,
              "node_id": "LA_kwDOABII588AAAABmPtvSw",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20CMake%20port",
              "name": "Needs CMake port",
              "description": "",
              "color": "0e8a16",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 12,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30193",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/30193",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/30193.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/30193.patch"
          },
          "created_at": "2024-05-29T14:53:48Z",
          "updated_at": "2024-06-13T05:37:23Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "m3dwards",
        "id": 1204616,
        "node_id": "MDQ6VXNlcjEyMDQ2MTY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1204616?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/m3dwards",
        "html_url": "https://github.com/m3dwards",
        "followers_url": "https://api.github.com/users/m3dwards/followers",
        "following_url": "https://api.github.com/users/m3dwards/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/m3dwards/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/m3dwards/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/m3dwards/subscriptions",
        "organizations_url": "https://api.github.com/users/m3dwards/orgs",
        "repos_url": "https://api.github.com/users/m3dwards/repos",
        "events_url": "https://api.github.com/users/m3dwards/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/m3dwards/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-12T17:18:34Z",
      "updated_at": "2024-06-12T17:18:34Z",
      "source": {
        "issue": {
          "id": 319676961,
          "node_id": "MDU6SXNzdWUzMTk2NzY5NjE=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13155",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13155/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13155/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/13155/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/13155",
          "number": 13155,
          "state": "open",
          "state_reason": "reopened",
          "title": "RPC wont bind without an IP address on a non-localhost interface",
          "body": "If the only interface which has an IP address and is up is lo, one of the two default rpcbinds (:: and 0.0.0.0) will fail with \"libevent: getaddrinfo: address family for nodename not supported\".",
          "user": {
            "login": "TheBlueMatt",
            "id": 649246,
            "node_id": "MDQ6VXNlcjY0OTI0Ng==",
            "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheBlueMatt",
            "html_url": "https://github.com/TheBlueMatt",
            "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
            "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
            "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
            "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
            "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 4,
          "created_at": "2018-05-02T19:11:16Z",
          "updated_at": "2024-06-12T17:18:35Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 2117955181,
      "node_id": "PRR_kwDOABII585-PW5t",
      "url": null,
      "actor": null,
      "commit_id": "84e63f34af0396c2a79276be8996403768b65dee",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK on allowing usage of `[::1]` on nodes with IPv6 lo only.\r\n\r\nA workaround is to use `-dns` (which will avoid `AI_ADDRCONFIG` but will make it impossible to use hostnames).\r\n\r\nI can reproduce the problem on Linux. FreeBSD treats the loopback address as valid, so this problem is non-existent on FreeBSD.\r\n\r\nI think there is a merit in this for our use cases of `getaddrinfo()` / `Lookup*()`:\r\n\r\n> IPv4 addresses are returned in the list pointed  to  by res  only if the local system has at least one IPv4 address configured ... _(and same for IPv6)_\r\n\r\nBut not this:\r\n\r\n> The loopback address is  not  considered  for  this case  as valid as a configured address. This flag is useful on, for example, IPv4-only systems, to ensure that getaddrinfo() does not return IPv6 socket addresses that would always fail in connect(2) or bind(2).\r\n\r\nThis is even bogus to some extent - if the system has only `[::1]` configured and we want to `connect(2)` or `bind(2)` to `[::1]` that will work. So the \"always\" is too strong / untrue.\r\n\r\n---\r\n\r\nNow, can we have the `AI_ADDRCONFIG` behavior but get it to consider loopback addresses as valid? For example, after running `getaddrinfo()` with `AI_ADDRCONFIG` run it again without `AI_ADDRCONFIG` and append any loopback addresses from the second run to the results?",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30245#pullrequestreview-2117955181",
      "submitted_at": "2024-06-14T11:35:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30245"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1639560684",
      "pull_request_review_id": 2117955181,
      "id": 1639560684,
      "node_id": "PRRC_kwDOABII585hubXs",
      "diff_hunk": "@@ -54,7 +54,7 @@ std::vector<CNetAddr> WrappedGetAddrInfo(const std::string& name, bool allow_loo\n     // If we don't allow lookups, then use the AI_NUMERICHOST flag for\n     // getaddrinfo to only decode numerical network addresses and suppress\n     // hostname lookups.\n-    ai_hint.ai_flags = allow_lookup ? AI_ADDRCONFIG : AI_NUMERICHOST;",
      "path": "src/netbase.cpp",
      "position": 4,
      "original_position": 4,
      "commit_id": "84e63f34af0396c2a79276be8996403768b65dee",
      "original_commit_id": "84e63f34af0396c2a79276be8996403768b65dee",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There is a comment above which has to be removed if this patch makes it as it is:\r\n```\r\n// If we allow lookups of hostnames, use the AI_ADDRCONFIG flag to only\r\n// return addresses whose family we have an address configured for.\r\n```",
      "created_at": "2024-06-14T09:38:13Z",
      "updated_at": "2024-06-14T11:35:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30245#discussion_r1639560684",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1639560684"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30245"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 57,
      "original_line": 57,
      "side": "LEFT"
    }
  ]
}