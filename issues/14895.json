{
  "type": "issue",
  "issue": {
    "id": 388789817,
    "node_id": "MDU6SXNzdWUzODg3ODk4MTc=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/14895",
    "number": 14895,
    "state": "open",
    "state_reason": null,
    "title": "Package relay design questions",
    "body": "Hi,\r\n\r\nI've been thinking about some improvements to transaction relay and wanted some feedback about the design goals.\r\n\r\n# Motivation\r\n\r\nA transaction is only accepted to our mempool and then relayed to our peers if (a) our mempool already has all unconfirmed dependencies of the transaction, and (b) the transaction itself passes a bunch of policy checks (feerate, package size limits, etc).\r\n\r\nIt is possible for one transaction to fail our feerate policy check, but had it been bundled with another child transaction, that the transactions together should make it in to our mempool (eg because the child's feerate is sufficiently high).  Here are some scenarios where this can come up:\r\n\r\n * A node on the network has a smaller mempool than the default/typical setting.  Our default mempool size is 300MB (huge); it seems like it should be the case that someone running a node with, say, a 20MB mempool ought to have all the transactions that will be appearing in the next block.  However, nodes running with smaller mempools can have a higher effective minimum feerate required for transaction acceptance (this is a consequence of our mempool limiting/eviction policy), and so high feerate children of a low feerate parent -- which might appear in the next block -- may never make it in to the mempool of such a node.\r\n\r\n * Matt Corallo recently wrote about an example on the bitcoin-dev mailing list involving lightning transactions, where pre-signed transactions might be broadcast to the blockchain long after they were generated, and thus not have been created with a fee that is sufficient to be confirmed quickly (or even be accepted to node mempools).  In such situations, channel participants may need to use chained transactions (CPFP) in order to increase the confirmation speed of such transactions, and that implies we may need to introduce a mechanism for those parent transactions to be relayed along with their higher feerate children, even if the parent transaction would be rejected by itself.\r\n\r\n*Are there other scenarios that suffer without a package relay solution, which have unique design requirements?*\r\n\r\n# Design questions\r\n\r\n## Who is responsible for initiating package relay, sender or recipient?\r\n\r\nWhile the sender of a transaction that is chained off a low-fee parent is well-positioned to guess that a transaction might need package relay in order to propagate, expecting relayers to do the same seems onerous and potentially bandwidth wasteful.  For example, one way for a sender-initiated package relay system to work might be for a sender to announce via an INV (or similar) all ancestor txid's along with a child txid.  However, what would the protocol look like beyond that first hop -- would each node on the network initiate package relay with their peers as well?  It seems like this could be used in a way that would cause the same txid's to be announced repeatedly on the same links in the network, which seems wasteful.  Is there a sender-initiated strategy that works better than this naive idea that we should consider?\r\n\r\nOn the other hand, the recipient of a transaction can tell if a transaction's parents are missing and can therefore know to initiate package relay from the sending peer (which means that package relay would only occur on links that require it, eg to/from low-memory-mempool nodes).\r\n\r\n## Should we update the p2p protocol to accommodate package relay, or rely on existing functionality?\r\n\r\nIn theory, we may be able to shoehorn a recipient-initiated package relay scheme within the existing p2p protocol.  A recipient who needs the parents of a transaction could iteratively request them, and then topologically sort the result once all ancestors have arrived, and then proceed with validation.\r\n\r\nBut in practice, it seems like it might be much simpler to reason about the code and computational complexity if we add some kind of special p2p messages to assist in the process, so that rather than iteratively request parents (for example) we could just ask a peer for all unconfirmed ancestors of a transaction, perhaps even already sorted in topological order. It's also possible that it'd be helpful to add information or requirements around the package feerate of such packages.\r\n\r\nThe obvious benefit to not updating the p2p protocol is that we could implement package relay in a new release and the whole network would support providing packages to new software.  The downside is potential code complexity and possibly somewhat less efficient processing of transactions due to repeatedly having to check for missing ancestors and doing the topological sort (but perhaps those could be mitigated with the right implementation).\r\n\r\n## What Denial-of-Service concerns do we need to address?\r\n\r\nIn addition to the usual things we worry about (bandwidth attacks on the network, CPU or other resource exhaustion attacks), does package relay need to incorporate further anti-DoS measures to be useful?\r\n\r\nFor example, suppose there is some low feerate transaction A, and it has multiple children: B, C, D, E ...  One of our peers relays transaction B to us, so we ask for A, but decide that A+B is not good enough for our mempool.  How many times will we be willing to re-try A, if C, D, E, etc are also relayed to us?\r\n\r\nOne approach might be to only attempt the same transaction once over some time period (say by adding it to our reject filter, which gets cleared out every block), so that the same transaction cannot be repeatedly used to CPU-attack us; however, this would seem to conflict with the lightning use-case, where we would not want an adversary to be able to prevent relay of some parent transaction.  \r\n\r\nMoreover, any situation where we might test a transaction's signatures prior to a (package-) policy failure that prevents the transaction from being ultimately accepted to the mempool would open the door to CPU-exhaustion attacks.  This would imply a design for package processing and acceptance where policy checks on the whole package are performed before signature validation -- then, if a signature is found to be invalid, we could ban the peer.  Are there any other practical solutions for this?  If we take this approach, then it seems we could re-try A over and over with limited downside.\r\n\r\nIt's important to note the existing resource usage that transaction relay can already incur -- when we receive a new transaction, we generally have to retrieve the inputs from the utxo set, which typically means that an attacker can make us do disk reads costlessly. Given that this seems difficult to avoid, I don't think package relay needs to limit an attacker's ability to have us look up inputs.  I think this implies that in the previous example, being willing to retry A+C, A+D, etc and looking up A's inputs over and over shouldn't be considered an increase in attack surface.\r\n\r\n## Consistency requirements?\r\n\r\nAre there any additional consistency requirements we should (or must) impose on package relay?  Currently it is the case that\r\nthe order that transactions are received by a node does determine which transactions make it into the mempool (some examples that come to mind: transactions that are just at the mempool min fee rate; transactions that depend on common ancestors which are near the descendant chain limit; a transaction that would conflict with another vs descendants of that original transaction; I'm sure there are more examples).\r\n\r\nNaively, we might also expect it to be the case that depending on how a package is relayed, it might affect whether a child transaction is accepted.  For instance, if we have a parent transaction A, with two children B and C, then it's possible that B+A has a high enough feerate to be accepted via package relay, but C+A does not -- so relaying B first would get all 3 transactions in, while relaying C first would only get A and B in.\r\n\r\nThis effect could be magnified if there were (for example) anti-DoS rules that would prevent A from being attempted too many times.\r\n\r\nWould this kind of behavior significantly harm any use cases that we're trying to support?",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64584,
        "node_id": "MDU6TGFiZWw2NDU4NA==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
        "name": "Brainstorming",
        "color": "ebd775",
        "default": false
      },
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 1392286103,
        "node_id": "MDU6TGFiZWwxMzkyMjg2MTAz",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20Conceptual%20Review",
        "name": "Needs Conceptual Review",
        "description": "",
        "color": "fef2c0",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 21,
    "created_at": "2018-12-07T19:46:39Z",
    "updated_at": "2021-07-04T13:03:41Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 2013430091,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDIwMTM0MzAwOTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2013430091",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-07T21:13:14Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "labeled",
      "id": 2013430249,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDIwMTM0MzAyNDk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2013430249",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-07T21:13:19Z",
      "label": {
        "name": "Brainstorming",
        "color": "ebd775"
      }
    },
    {
      "event": "commented",
      "id": 481812073,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTgxMjA3Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/481812073",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-04-10T18:37:59Z",
      "updated_at": "2019-04-10T18:37:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "Making CPFP work better, and making small mempools work better while avoiding DoS risks and complications from updating the P2P protocol is an important thing to work on even if no one immediately benefits from changes right now.\r\n\r\nBut the design space is so huge that it would probably help to propose a concrete change or set of changes if you want feedback, so there is something to start thinking concretely about and respond to. Even very rough or strawman proposals could be good starting points.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-481812073",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "commented",
      "id": 481814139,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ4MTgxNDEzOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/481814139",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-04-10T18:43:36Z",
      "updated_at": "2019-04-10T18:43:36Z",
      "author_association": "MEMBER",
      "body": "The final goal seems far out to achieve and I believe suhas has started working on some intermediate milestones that would already come with advantages (such as getting rid of the shared mapRelay, IIRC).",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-481814139",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "commented",
      "id": 493229524,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ5MzIyOTUyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/493229524",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-05-16T20:57:56Z",
      "updated_at": "2019-06-07T11:07:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "Think receiver-initiator is probably better, but you could possibly do sender-initiated package relay by saying \"is this tx's feerate > parent's fee rate, and is parent's fee rate < peer's announced minfee cutoff\". Don't see how you could make sender-initiator work without p2p changes though.\r\n\r\nIt sounds like we could get the simplest case (one tx doing CPFP for one or more others, but no grandparents, and immediately getting them all into the top 2 or 3 MB of mempool) without p2p changes, just by noticing you don't have the parents, requesting them, and handling the new tx and any requested parents as a package. Might be a good phase 1.\r\n\r\n(EDIT: had written receiver-initiator where I meant sender-initiator)",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-493229524",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "added_to_project",
      "id": 2391093009,
      "node_id": "MDE5OkFkZGVkVG9Qcm9qZWN0RXZlbnQyMzkxMDkzMDA5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2391093009",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-05T12:43:16Z",
      "project_card": {
        "id": 22407880,
        "url": "https://api.github.com/projects/columns/cards/22407880",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Issues for discussion"
      }
    },
    {
      "event": "moved_columns_in_project",
      "id": 2391353306,
      "node_id": "MDI2Ok1vdmVkQ29sdW1uc0luUHJvamVjdEV2ZW50MjM5MTM1MzMwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2391353306",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-05T14:08:01Z",
      "project_card": {
        "id": 22407880,
        "url": "https://api.github.com/projects/columns/cards/22407880",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Chasing Concept ACK",
        "previous_column_name": "Issues for discussion"
      }
    },
    {
      "event": "commented",
      "id": 499482277,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTQ4MjI3Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/499482277",
      "actor": {
        "login": "moneyball",
        "id": 326147,
        "node_id": "MDQ6VXNlcjMyNjE0Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/326147?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/moneyball",
        "html_url": "https://github.com/moneyball",
        "followers_url": "https://api.github.com/users/moneyball/followers",
        "following_url": "https://api.github.com/users/moneyball/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/moneyball/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/moneyball/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/moneyball/subscriptions",
        "organizations_url": "https://api.github.com/users/moneyball/orgs",
        "repos_url": "https://api.github.com/users/moneyball/repos",
        "events_url": "https://api.github.com/users/moneyball/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/moneyball/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T12:57:44Z",
      "updated_at": "2019-06-06T20:25:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "For context, I am responding to this in the spirit of \"PR shepherd\" as discussed the previous day. Given this \"PR\" (Issue) is on the high priority list, I have prioritized taking a look.\r\n\r\nMy read of the status of this Issue is as follows:\r\n- the author has stated a motivation, a set of design questions, and a discussion of how to think about the design.\r\n- commenters have requested a specific design to review and (N)ACK\r\n- it has now been added to the high priority list chasing a Concept ACK\r\n\r\nIf we were to adopt the new language separating Concept ACK and Design ACK (#16149), then it seems this Issue is ready for Concept (N)ACKs, but not Design (N)ACKs. Given the current process which combines Concept and Design, then it seems like this Issue needs the author to propose a concrete design.\r\n\r\n@sdaftuar can you clarify whether you're seeking a Concept ACK in order to proceed to defining a specific design?\r\n\r\n@ryanofsky, @MarcoFalke, @ajtowns assuming we are just seeking Concept (not Design) ACK, do you have the information needed to weigh in?",
      "user": {
        "login": "moneyball",
        "id": 326147,
        "node_id": "MDQ6VXNlcjMyNjE0Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/326147?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/moneyball",
        "html_url": "https://github.com/moneyball",
        "followers_url": "https://api.github.com/users/moneyball/followers",
        "following_url": "https://api.github.com/users/moneyball/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/moneyball/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/moneyball/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/moneyball/subscriptions",
        "organizations_url": "https://api.github.com/users/moneyball/orgs",
        "repos_url": "https://api.github.com/users/moneyball/repos",
        "events_url": "https://api.github.com/users/moneyball/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/moneyball/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-499482277",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "mentioned",
      "id": 2394249138,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjM5NDI0OTEzOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394249138",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T12:57:44Z"
    },
    {
      "event": "subscribed",
      "id": 2394249140,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIzOTQyNDkxNDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394249140",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T12:57:44Z"
    },
    {
      "event": "mentioned",
      "id": 2394249144,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjM5NDI0OTE0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394249144",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T12:57:44Z"
    },
    {
      "event": "subscribed",
      "id": 2394249145,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIzOTQyNDkxNDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394249145",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T12:57:44Z"
    },
    {
      "event": "mentioned",
      "id": 2394249147,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjM5NDI0OTE0Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394249147",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T12:57:44Z"
    },
    {
      "event": "subscribed",
      "id": 2394249148,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIzOTQyNDkxNDg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394249148",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T12:57:44Z"
    },
    {
      "event": "mentioned",
      "id": 2394249150,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjM5NDI0OTE1MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394249150",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T12:57:44Z"
    },
    {
      "event": "subscribed",
      "id": 2394249156,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIzOTQyNDkxNTY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394249156",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T12:57:44Z"
    },
    {
      "event": "commented",
      "id": 499540137,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTU0MDEzNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/499540137",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T15:18:39Z",
      "updated_at": "2019-06-06T15:18:39Z",
      "author_association": "MEMBER",
      "body": "@moneyball Thanks for the nudge and taking a look here.\r\n\r\nI do have a strawman proposal for a p2p protocol change in support of package relay that I wrote up a while ago: https://gist.github.com/sdaftuar/8756699bfcad4d3806ba9f3396d4e66a\r\n\r\nMy intuition right now is that we can make package acceptance much easier to reason about if the recipient of an orphan transaction can ask a peer for the unconfirmed parents of a given transaction, which should be sent back in topological order.\r\n\r\nTo make progress on this project, I'm breaking up this work into several steps:\r\n\r\n1) Refactor the mempool acceptance logic to support a concept of \"package acceptance\", which would be motivated by better orphan handling (for instance, maybe we can take some simple case, like a transaction missing exactly 1 parent, and process the two transactions together as a package).  I expect that refactoring the mempool in this way to be major work and require careful review.\r\n\r\n2) Once that mempool refactor has been done, then I think we could propose a p2p protocol change (such as my above proposal, or some other more efficient or more clever proposal if anyone has a better idea).\r\n\r\nI'd love feedback on whether this path seems reasonable, or also if someone has a better idea of how to achieve the end result.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-499540137",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "mentioned",
      "id": 2394715497,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjM5NDcxNTQ5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394715497",
      "actor": {
        "login": "moneyball",
        "id": 326147,
        "node_id": "MDQ6VXNlcjMyNjE0Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/326147?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/moneyball",
        "html_url": "https://github.com/moneyball",
        "followers_url": "https://api.github.com/users/moneyball/followers",
        "following_url": "https://api.github.com/users/moneyball/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/moneyball/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/moneyball/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/moneyball/subscriptions",
        "organizations_url": "https://api.github.com/users/moneyball/orgs",
        "repos_url": "https://api.github.com/users/moneyball/repos",
        "events_url": "https://api.github.com/users/moneyball/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/moneyball/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T15:18:39Z"
    },
    {
      "event": "subscribed",
      "id": 2394715500,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIzOTQ3MTU1MDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2394715500",
      "actor": {
        "login": "moneyball",
        "id": 326147,
        "node_id": "MDQ6VXNlcjMyNjE0Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/326147?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/moneyball",
        "html_url": "https://github.com/moneyball",
        "followers_url": "https://api.github.com/users/moneyball/followers",
        "following_url": "https://api.github.com/users/moneyball/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/moneyball/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/moneyball/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/moneyball/subscriptions",
        "organizations_url": "https://api.github.com/users/moneyball/orgs",
        "repos_url": "https://api.github.com/users/moneyball/repos",
        "events_url": "https://api.github.com/users/moneyball/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/moneyball/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-06T15:18:39Z"
    },
    {
      "event": "commented",
      "id": 499846099,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ5OTg0NjA5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/499846099",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-07T11:08:28Z",
      "updated_at": "2019-06-07T11:08:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK I think -- splitting mempool acceptance and being able to submit a package as a single unit seems plausible; and doing that before p2p changes also seems plausible. I think we ought to be able to break out smaller useful pieces as we go along though.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-499846099",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "labeled",
      "id": 2416698745,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDI0MTY2OTg3NDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2416698745",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-17T07:40:59Z",
      "label": {
        "name": "Needs Conceptual Review",
        "color": "fef2c0"
      }
    },
    {
      "event": "commented",
      "id": 504106403,
      "node_id": "MDEyOklzc3VlQ29tbWVudDUwNDEwNjQwMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504106403",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-20T17:06:32Z",
      "updated_at": "2019-06-20T17:06:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "Looking forward to more progress on this one. I'm skeptical that the ATMP refactor is as bad as you think, but it does have cost in terms of additional complexity there. Definitely worth it, though, and I'd appreciate even a first step with only 1 parent as that would have real benefits for some users.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-504106403",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "commented",
      "id": 504166091,
      "node_id": "MDEyOklzc3VlQ29tbWVudDUwNDE2NjA5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/504166091",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-06-20T20:13:09Z",
      "updated_at": "2019-06-20T20:13:09Z",
      "author_association": "MEMBER",
      "body": "Concept ACK.\r\nI think this is a must-have feature in the p2p layer, and I have a feeling that code won't become much less intuitive.\r\n\r\nI think it's a good timing for introducing new p2p messages: the problem is not severe at the moment and it's not that bad if old nodes don't get the benefit. \r\nHowever, there might be an issue if we start to *rely* on this assumption real soon (e.g., imagine a lot of people start closing lightning channels with low fees). I don't know how to justify this part.\r\n\r\nBtw, I believe a scenario similar to what Matt send to the mailing list: multi-sig transactions or coinjoins which take a while to prepare. While collecting signatures, fee market might change a lot, and cpfp might happen quite often (if not overpaying a lot by default).",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-504166091",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-07-16T16:10:48Z",
      "updated_at": "2019-07-16T16:10:48Z",
      "source": {
        "issue": {
          "id": 468709408,
          "node_id": "MDExOlB1bGxSZXF1ZXN0Mjk4MDg2MTA0",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16398",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16398/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16398/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16398/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/16398",
          "number": 16398,
          "state": "closed",
          "state_reason": null,
          "title": "rpc: testmempoolaccept for list of transactions",
          "body": "This extends the testmempoolaccept rpc to run on a vector of transactions. The idea is to keep the current mempool immutable and only keep track of the differences to the underlying mempool.\r\n\r\nThis is based on the transaction pool layer idea from #13804. Comment from there:\r\n\r\nThis implements a layer around an immutable tx pool. The layer can be seen as a temporary throw-away shell that provides the same interface as `CTxMemPool`. Its primary purpose right now is to be passed into ATMP while testing acceptance of several (potentially depending) transaction and then to be discarded.\r\n\r\nOne use case could be to determine if smart contracts that are set up with multiple txs would be accepted by current consensus and policy rules.\r\n\r\nIn the future it could be extended to support recursive wrapping of layers or a way to commit changes that happened in the layer to the underlying pool or layer. Furthermore, it could be extended to be revivable after changes to the underlying layer happened. (As opposed to be single-use)",
          "user": {
            "login": "MarcoFalke",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MarcoFalke",
            "html_url": "https://github.com/MarcoFalke",
            "followers_url": "https://api.github.com/users/MarcoFalke/followers",
            "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
            "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
            "repos_url": "https://api.github.com/users/MarcoFalke/repos",
            "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16398",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/16398",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/16398.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/16398.patch"
          },
          "closed_at": "2021-01-03T18:52:33Z",
          "created_at": "2019-07-16T15:05:41Z",
          "updated_at": "2022-08-16T17:11:07Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-07-16T20:18:07Z",
      "updated_at": "2019-07-16T20:18:07Z",
      "source": {
        "issue": {
          "id": 468843355,
          "node_id": "MDExOlB1bGxSZXF1ZXN0Mjk4MTk0NTY4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16400",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16400/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16400/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16400/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/16400",
          "number": 16400,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Rewrite AcceptToMemoryPoolWorker() using smaller parts",
          "body": "This is in preparation for re-using these validation components for a new version of AcceptToMemoryPool() that can operate on multiple transactions (\"package relay\").",
          "user": {
            "login": "sdaftuar",
            "id": 7463573,
            "node_id": "MDQ6VXNlcjc0NjM1NzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sdaftuar",
            "html_url": "https://github.com/sdaftuar",
            "followers_url": "https://api.github.com/users/sdaftuar/followers",
            "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
            "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
            "repos_url": "https://api.github.com/users/sdaftuar/repos",
            "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 15,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16400",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/16400",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/16400.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/16400.patch"
          },
          "closed_at": "2019-09-18T14:16:30Z",
          "created_at": "2019-07-16T20:15:56Z",
          "updated_at": "2021-12-16T14:02:19Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "tynes",
        "id": 6626818,
        "node_id": "MDQ6VXNlcjY2MjY4MTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tynes",
        "html_url": "https://github.com/tynes",
        "followers_url": "https://api.github.com/users/tynes/followers",
        "following_url": "https://api.github.com/users/tynes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tynes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tynes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
        "organizations_url": "https://api.github.com/users/tynes/orgs",
        "repos_url": "https://api.github.com/users/tynes/repos",
        "events_url": "https://api.github.com/users/tynes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tynes/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-09-30T22:27:53Z",
      "updated_at": "2019-09-30T22:27:53Z",
      "source": {
        "issue": {
          "id": 500559024,
          "node_id": "MDU6SXNzdWU1MDA1NTkwMjQ=",
          "url": "https://api.github.com/repos/bcoin-org/bcoin/issues/865",
          "repository_url": "https://api.github.com/repos/bcoin-org/bcoin",
          "labels_url": "https://api.github.com/repos/bcoin-org/bcoin/issues/865/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bcoin-org/bcoin/issues/865/comments",
          "events_url": "https://api.github.com/repos/bcoin-org/bcoin/issues/865/events",
          "html_url": "https://github.com/bcoin-org/bcoin/issues/865",
          "number": 865,
          "state": "open",
          "state_reason": null,
          "title": "Mempool Package Relay",
          "body": "A notable change to the Bitcoin mempool is coming called \"Package Relay\".\r\n\r\nFrom [Bitcoin Optech #65](https://bitcoinops.org/en/newsletters/2019/09/25/)\r\n\r\n> Package relay could allow nodes to accept a transaction below the node’s minimum feerate if the transaction came bundled with a child transaction whose fee was high enough to pay the minimum feerate for both it and its parent. If widely deployed, package relay would allow users who create transactions a long time before broadcasting them (e.g. timelocked transactions or LN commitment transactions) to safely pay the minimum possible fee. When it came time to broadcast the transaction, they could use Child-Pays-For-Parent (CPFP) fee bumping to set an appropriate fee for the current network conditions.\r\n\r\nThis seems like a useful change to how the mempool works and `bcoin` should consider implementing these changes.\r\n\r\nSee https://github.com/bitcoin/bitcoin/issues/14895\r\n",
          "user": {
            "login": "tynes",
            "id": 6626818,
            "node_id": "MDQ6VXNlcjY2MjY4MTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6626818?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tynes",
            "html_url": "https://github.com/tynes",
            "followers_url": "https://api.github.com/users/tynes/followers",
            "following_url": "https://api.github.com/users/tynes/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/tynes/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/tynes/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/tynes/subscriptions",
            "organizations_url": "https://api.github.com/users/tynes/orgs",
            "repos_url": "https://api.github.com/users/tynes/repos",
            "events_url": "https://api.github.com/users/tynes/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/tynes/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 1285741808,
              "node_id": "MDU6TGFiZWwxMjg1NzQxODA4",
              "url": "https://api.github.com/repos/bcoin-org/bcoin/labels/feature",
              "name": "feature",
              "description": "Adding a new feature",
              "color": "FFA500",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 1,
          "created_at": "2019-09-30T22:27:53Z",
          "updated_at": "2019-11-18T21:35:21Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "halseth",
        "id": 3765732,
        "node_id": "MDQ6VXNlcjM3NjU3MzI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3765732?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/halseth",
        "html_url": "https://github.com/halseth",
        "followers_url": "https://api.github.com/users/halseth/followers",
        "following_url": "https://api.github.com/users/halseth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/halseth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/halseth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/halseth/subscriptions",
        "organizations_url": "https://api.github.com/users/halseth/orgs",
        "repos_url": "https://api.github.com/users/halseth/repos",
        "events_url": "https://api.github.com/users/halseth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/halseth/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-10-10T07:25:16Z",
      "updated_at": "2019-10-10T07:25:16Z",
      "source": {
        "issue": {
          "id": 504628634,
          "node_id": "MDU6SXNzdWU1MDQ2Mjg2MzQ=",
          "url": "https://api.github.com/repos/lightningnetwork/lnd/issues/3587",
          "repository_url": "https://api.github.com/repos/lightningnetwork/lnd",
          "labels_url": "https://api.github.com/repos/lightningnetwork/lnd/issues/3587/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/lightningnetwork/lnd/issues/3587/comments",
          "events_url": "https://api.github.com/repos/lightningnetwork/lnd/issues/3587/events",
          "html_url": "https://github.com/lightningnetwork/lnd/issues/3587",
          "number": 3587,
          "state": "closed",
          "state_reason": "completed",
          "title": "Add anchor output to the commitment transaction",
          "body": "In the current commitment format, the miner fee is negotiated through the `update_fee` message. This creates several complications:\r\n* It is currently not possible to reject a fee rate. The only option at that point is to force close the channel. Nodes may have different sources for fee estimation and may unintentionally disagree about the fee to use.\r\n* Even if a satisfactory fee has been negotiated, it may turn out not to be enough to get it confirmed when one of the parties actually goes to chain. The party that publishes the commitment tx has its `to_local` output timelocked and can't use that to cpfp the transaction.\r\n\r\nA possible solution (originally proposed by @halseth on the [lightning-dev mailing list](https://lists.linuxfoundation.org/pipermail/lightning-dev/2018-January/000943.html)) is to add a so called anchor output to the commitment transaction. This is a non-timelocked output that can be used to cpfp the transaction in order to get it confirmed. \r\n\r\nWith the anchor output present, the fee on the commitment transaction itself can be minimal as both parties have the opportunity to attach additional fees.",
          "user": {
            "login": "joostjager",
            "id": 4638168,
            "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/joostjager",
            "html_url": "https://github.com/joostjager",
            "followers_url": "https://api.github.com/users/joostjager/followers",
            "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
            "organizations_url": "https://api.github.com/users/joostjager/orgs",
            "repos_url": "https://api.github.com/users/joostjager/repos",
            "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/joostjager/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 431228604,
              "node_id": "MDU6TGFiZWw0MzEyMjg2MDQ=",
              "url": "https://api.github.com/repos/lightningnetwork/lnd/labels/advanced",
              "name": "advanced",
              "description": "Issues suitable for very experienced developers",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 465888460,
              "node_id": "MDU6TGFiZWw0NjU4ODg0NjA=",
              "url": "https://api.github.com/repos/lightningnetwork/lnd/labels/commitments",
              "name": "commitments",
              "description": "Commitment transactions containing the state of the channel",
              "color": "d93f0b",
              "default": false
            },
            {
              "id": 778122131,
              "node_id": "MDU6TGFiZWw3NzgxMjIxMzE=",
              "url": "https://api.github.com/repos/lightningnetwork/lnd/labels/channels",
              "name": "channels",
              "color": "4c42a5",
              "default": false
            },
            {
              "id": 804936168,
              "node_id": "MDU6TGFiZWw4MDQ5MzYxNjg=",
              "url": "https://api.github.com/repos/lightningnetwork/lnd/labels/fees",
              "name": "fees",
              "description": "Related to the fees paid for transactions (both LN and funding/commitment transactions)",
              "color": "62ff51",
              "default": false
            },
            {
              "id": 1327031733,
              "node_id": "MDU6TGFiZWwxMzI3MDMxNzMz",
              "url": "https://api.github.com/repos/lightningnetwork/lnd/labels/chain%20handling",
              "name": "chain handling",
              "description": "",
              "color": "56ff78",
              "default": false
            }
          ],
          "assignee": {
            "login": "halseth",
            "id": 3765732,
            "node_id": "MDQ6VXNlcjM3NjU3MzI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3765732?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/halseth",
            "html_url": "https://github.com/halseth",
            "followers_url": "https://api.github.com/users/halseth/followers",
            "following_url": "https://api.github.com/users/halseth/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/halseth/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/halseth/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/halseth/subscriptions",
            "organizations_url": "https://api.github.com/users/halseth/orgs",
            "repos_url": "https://api.github.com/users/halseth/repos",
            "events_url": "https://api.github.com/users/halseth/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/halseth/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "halseth",
              "id": 3765732,
              "node_id": "MDQ6VXNlcjM3NjU3MzI=",
              "avatar_url": "https://avatars.githubusercontent.com/u/3765732?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/halseth",
              "html_url": "https://github.com/halseth",
              "followers_url": "https://api.github.com/users/halseth/followers",
              "following_url": "https://api.github.com/users/halseth/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/halseth/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/halseth/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/halseth/subscriptions",
              "organizations_url": "https://api.github.com/users/halseth/orgs",
              "repos_url": "https://api.github.com/users/halseth/repos",
              "events_url": "https://api.github.com/users/halseth/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/halseth/received_events",
              "type": "User",
              "site_admin": false
            },
            {
              "login": "joostjager",
              "id": 4638168,
              "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
              "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/joostjager",
              "html_url": "https://github.com/joostjager",
              "followers_url": "https://api.github.com/users/joostjager/followers",
              "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
              "organizations_url": "https://api.github.com/users/joostjager/orgs",
              "repos_url": "https://api.github.com/users/joostjager/repos",
              "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/joostjager/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "COLLABORATOR",
          "milestone": {
            "url": "https://api.github.com/repos/lightningnetwork/lnd/milestones/18",
            "html_url": "https://github.com/lightningnetwork/lnd/milestone/18",
            "labels_url": "https://api.github.com/repos/lightningnetwork/lnd/milestones/18/labels",
            "id": 4980247,
            "node_id": "MDk6TWlsZXN0b25lNDk4MDI0Nw==",
            "number": 18,
            "state": "closed",
            "title": "0.10.0",
            "description": "",
            "creator": {
              "login": "Roasbeef",
              "id": 998190,
              "node_id": "MDQ6VXNlcjk5ODE5MA==",
              "avatar_url": "https://avatars.githubusercontent.com/u/998190?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/Roasbeef",
              "html_url": "https://github.com/Roasbeef",
              "followers_url": "https://api.github.com/users/Roasbeef/followers",
              "following_url": "https://api.github.com/users/Roasbeef/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/Roasbeef/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/Roasbeef/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/Roasbeef/subscriptions",
              "organizations_url": "https://api.github.com/users/Roasbeef/orgs",
              "repos_url": "https://api.github.com/users/Roasbeef/repos",
              "events_url": "https://api.github.com/users/Roasbeef/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/Roasbeef/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 108,
            "created_at": "2020-01-07T01:35:31Z",
            "updated_at": "2020-05-05T15:57:30Z",
            "closed_at": "2020-05-05T15:57:30Z",
            "due_on": "2020-03-23T07:00:00Z"
          },
          "locked": false,
          "comments": 2,
          "closed_at": "2020-03-10T02:51:18Z",
          "created_at": "2019-10-09T12:45:19Z",
          "updated_at": "2020-03-10T02:51:18Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-09T04:01:38Z",
      "updated_at": "2020-01-09T04:01:38Z",
      "source": {
        "issue": {
          "id": 468843481,
          "node_id": "MDExOlB1bGxSZXF1ZXN0Mjk4MTk0NjYy",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16401",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16401/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16401/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/16401/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/16401",
          "number": 16401,
          "state": "closed",
          "state_reason": null,
          "title": "Add package acceptance logic to mempool",
          "body": "Accepting a single transaction to the mempool only succeeds if (among other things) the feerate of the transaction is greater than both the min relay fee and the mempool min fee. Consequently, a transaction below the minimum fee may not be accepted to the mempool, even if we later learn of a transaction with a high fee that depends on it.\r\n\r\nThis PR adds code to validation that will accept a package of transactions to the mempool under the following conditions:\r\n\r\n- All package transactions must be direct parents of the final transaction.\r\n  This is a simple heuristic for ensuring that a candidate list of transactions\r\n  is in fact a package (we wouldn't want arbitrary transactions to be paying\r\n  for random low feerate transactions)\r\n\r\n- The feerate of the package, as a whole, exceeds the mempool min fee and the\r\n  min relay fee.\r\n\r\n- No transactions in the mempool conflict with any transactions in the package.\r\n  This is a simplification that makes the logic easier to write. Without this\r\n  requirement, we would need to do additional checks to ensure that no parent\r\n  transaction would evict a transaction from the mempool that some other child\r\n  depends on.\r\n\r\n- The ancestor/descendant size limits are calculated assuming that any mempool\r\n  ancestor of any candidate transaction is an ancestor of all the candidate\r\n  transactions.\r\n  This allows for doing simpler calculations to ensure that we're staying\r\n  within the mempool's package limits. If we eliminated this, we would need to\r\n  do much more careful package calculations for each candidate transaction and each\r\n  in-mempool ancestor.\r\n\r\nThis PR also adds code to net_processing that will attempt to process transaction packages in one narrow case: if a transaction fails to get into the mempool due to insufficient fee, but has an orphan in the orphan pool, then we will try to process the pair together to see if they can be accepted as a package.\r\n\r\nThis PR is definitely WIP, but I'm opening it as a proof-of-concept motivation for refactoring ATMP (#16400).",
          "user": {
            "login": "sdaftuar",
            "id": 7463573,
            "node_id": "MDQ6VXNlcjc0NjM1NzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sdaftuar",
            "html_url": "https://github.com/sdaftuar",
            "followers_url": "https://api.github.com/users/sdaftuar/followers",
            "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
            "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
            "repos_url": "https://api.github.com/users/sdaftuar/repos",
            "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/16401",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/16401",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/16401.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/16401.patch"
          },
          "closed_at": "2020-01-29T14:55:24Z",
          "created_at": "2019-07-16T20:16:12Z",
          "updated_at": "2022-02-15T10:26:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "added_to_project",
      "id": 2961052062,
      "node_id": "MDE5OkFkZGVkVG9Qcm9qZWN0RXZlbnQyOTYxMDUyMDYy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2961052062",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-19T18:09:33Z",
      "project_card": {
        "id": 31847350,
        "url": "https://api.github.com/projects/columns/cards/31847350",
        "project_id": 3826895,
        "project_url": "https://api.github.com/projects/3826895",
        "column_name": "Package Relay"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "oleganza",
        "id": 698,
        "node_id": "MDQ6VXNlcjY5OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oleganza",
        "html_url": "https://github.com/oleganza",
        "followers_url": "https://api.github.com/users/oleganza/followers",
        "following_url": "https://api.github.com/users/oleganza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oleganza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oleganza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oleganza/subscriptions",
        "organizations_url": "https://api.github.com/users/oleganza/orgs",
        "repos_url": "https://api.github.com/users/oleganza/repos",
        "events_url": "https://api.github.com/users/oleganza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oleganza/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-23T14:51:18Z",
      "updated_at": "2020-01-23T14:51:18Z",
      "source": {
        "issue": {
          "id": 553621139,
          "node_id": "MDU6SXNzdWU1NTM2MjExMzk=",
          "url": "https://api.github.com/repos/stellar/slingshot/issues/398",
          "repository_url": "https://api.github.com/repos/stellar/slingshot",
          "labels_url": "https://api.github.com/repos/stellar/slingshot/issues/398/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/stellar/slingshot/issues/398/comments",
          "events_url": "https://api.github.com/repos/stellar/slingshot/issues/398/events",
          "html_url": "https://github.com/stellar/slingshot/issues/398",
          "number": 398,
          "state": "open",
          "state_reason": null,
          "title": "zkvm: fees mechanism",
          "body": "## Goal\r\n\r\nDesign the fee mechanism for ZkVM transactions to prioritize txs for acceptance in the mempool.\r\n\r\n## Checklist\r\n\r\n- [x] feerate math #399\r\n- [x] `fee` instruction spec  #399\r\n- [x] `fee` instruction impl  #399\r\n- [x] calculate feerate from Tx/VerifiedTx  #399\r\n- [x] `cloak` with cleartext output w/o rangeproof (done by changing `fee`: #403)\r\n- [ ] fee API in `accounts` module\r\n- [ ] mempool datamodel for ordering txs by feerate\r\n- [ ] mempool: special treatment for \"our\" txs that are non-evictable\r\n- [ ] delayed low-fee parent buffer\r\n\r\n## Specification draft\r\n\r\n### Fees\r\n\r\nFees have a single **designated flavor ID** that makes them fungible across all transactions. We set the fee **flavor ID = 0** encoded as ristretto255 scalar.\r\n\r\nFee is paid using a `fee` instruction (`v q -- ø`) that takes a Value `v` and an integer `q`. The instruction verifies that the value is an unblinded commitment to flavor=0 and a given quantity, removes the value from the stack, and adds a `TxEntry::Fee(u64)` entry to the TxLog.\r\n\r\nWhere the fees go is outside of the scope of this spec. They can be destroyed or claimed by the block validators, or distributed in some interesting manner.\r\n\r\nWhen transaction is processed by the mempool, it computes its total **tx fee** by adding up all the Fee entries in the TxLog.\r\n\r\n### Fee rate\r\n\r\nFor each transaction, a **fee rate** is computed as **tx fee** divided by the size of the tx in bytes (`<Tx as Encodable>::encoded_length()`).\r\n\r\nFee rate is stored as a pair `fee,size` so that fee rates can be correctly **combined**: \r\n\r\n`Combine(fr1, fr2) = (fee1+fee2) / (size1+size2)`.\r\n\r\n### Effective fee rate\r\n\r\n**Effective fee rate** of a transaction is a maximum between its own **self feerate** and **total feerate**.\r\n\r\n**Total feerate** is a combination of **self feerate** and effective feerates of all children, each discounted by the number of _unconfirmed parents_.\r\n\r\nWhen calculating contribution of the child's effective feerate to its parent, it is divided by a number of unconfirmed parents, so that recursive calculation does not over-account for the descendants that have multiple paths to a given ancestor. This discount does not have any effect if the child has all the unconfirmed inputs pointing to the same parent (common case). In an uncommon case of multiple unconfirmed parents: either parent's self feerate is higher than the total, so there is no effect from the discount; or it is the child-pays-for-parent situation and the contribution of the child is evenly split between all unconfirmed parents. This is unfair in case CPFP applies to one parent, but is not needed for another, but can be seen as a price to pay for forcing the nodes sort out subgraphs with low-fee parents. The general philosophy is: the more burden one tries to put on the network, the higher they have to pay.\r\n\r\n### Mempool priority\r\n\r\nTransactions in mempool are ordered by their **effective feerate** (see above).\r\n\r\nIf the mempool is under its limit, transaction with any feerate is accepted.\r\n\r\nIf the mempool is at the limit, any new transaction must:\r\n\r\n1. Have the effective feerate ≥ the lowest feerate.\r\n2. Pay the absolute fee higher by the absolute effective fee of the to-be-evicted transaction.\r\n\r\nThe rule #2 is translated into having fee2 ≥ rate1 * (size1 + size2). In other words, the new transaction must pay the fee that would've gone unpaid by the evicted transaction.\r\n\r\n### Evicting subgraphs from mempool\r\n\r\nWhen a transaction is evicted, all its descendants must be recursively evicted too. As a consequence, all the surviving ancestors' effective fee rates must be recalculated.\r\n\r\nTBD: efficient traversal logic. Mark evicted nodes as to-be-evicted. Recalculate from the bottom-most children\r\n\r\n### Unconfirmed limit\r\n\r\nEach transaction has an \"unconfirmed depth\". Children of confirmed transactions have depth 0. Children with unconfirmed inputs have the maximum depth among the parents, plus one.\r\n\r\nMempool policy includes the limit on unconfirmed children to minimize eviction overhead. The deeper the unconfirmed chains are, the more fragile they are causing more work to clean them up.\r\n\r\n### Low-fee parents\r\n\r\nEach peer maintains a limited LRU buffer of low-fee transactions that are waiting for a higher-fee children. When a low-fee tx is received, it's validated against the mempool state, but not added to it. \r\n\r\nIf later a child arrives from the same peer that makes a sufficient effective feerate, then the subgraph is added to the mempool.\r\n\r\nIf a child also does not produce a sufficient effective feerate it's added to LRU buffer behind the parent (so the parent is not evicted before the child).\r\n\r\nTransactions in the low-fee buffer are reported only to the peer that delivered them as to avoid duplicate relay, but not shared with other peers to keep things simple. In the future we may use a more elaborate reference-counting with a global cache of received transactions.\r\n\r\n### Orphan transactions\r\n\r\nWe are deliberately do not introduce a notion of out-of-order \"orphan\" txs. That is, children w/o parents where parents are relayed at some time later. This invites building a feedback loop when orphan pool is used to estimate feerate in a more precise way.\r\n\r\nInstead, we abstract away out-of-order transmission as TCP packets do: we may have a buffer of out-of-order transactions somewhere, but only at a transport layer. At the node logic, all transactions are coming in proper order, so parents appear before children. This disallows ad-hoc shortcuts for handling CPFP, but forces the reasoning to be more straightforward.\r\n\r\n### Cloak with fee \r\n\r\nWe may extend the `cloak` gadget in the `spacesuit` library to accept cleartext qty and flavor for the fee output. This permits us to avoid wasting 64 bytes for encoding a pair of commitments for a fee when 8 bytes for u64 qty would suffice, eliminates one unnecessary rangeproof check (64 multipliers) and permits avoiding commitment check altogether inside the `fee` instruction.\r\n\r\n------\r\n\r\n## Background\r\n\r\nThe question of fees was ignored up until this point. In principle, nodes may adopt arbitrary policies and accept unblinded payments to addresses. However, a designed flavor ID for fees and a designated fee mechanism would allow us to robustly implement prioritization as motivated below.\r\n\r\n### Knapsack problem\r\n\r\nThe decentralized network inherently needs to maintain some limit on amount of resources required from the peers to validate the blockchain. This means, that as usage grows, validators would (other things considered equal) select transactions that yield maximum profit. This is known as a knapsack problem, which is NP-hard. Transactions also depend on each other, so that a high-fee transaction may depend on a low-fee ancestor. Transaction can also be replaced (in other words, double-spent) in order to pay a higher fee and gain a higher priority. When choosing between two conflicting transactions we are actually choosing between two conflicting subgraphs. This adds another dimension of complexity: maximum independent-set problem, which is also NP-hard. See [Joseph Bonneau's excellent article](https://freedom-to-tinker.com/2014/10/27/bitcoin-mining-is-np-hard/) on the subject.\r\n\r\nSince we cannot have an efficient perfect solution to the problem, we should choose a reasonable approximation that works well in common cases and has very low computation requirement.\r\n\r\n### Bumping priority\r\n\r\nSometimes **transactions get stuck**: the user agent (e.g. a wallet) makes a transaction that pays a lower fee than the majority of transactions, which makes transaction stay unusually longer in the mempool. In such case the transaction fee must be \"bumped\" in order to increase the priority of the transaction and get it finally published in a block.\r\n\r\nAnother situation is **chained transactions**. Suppose that a user agent has just one utxo, and so the two independent payments must be chained through the change output. In case the first transaction was of low-priority, while the second transaction is of high-priority, we need to make sure that the first one gets published as soon as we need the second one to.\r\n\r\nThere are two, not mutually exclusive, strategies to do so: Replace-by-Fee (RBF) and Child-Pays-For-Parent (CPFP).\r\n\r\nRBF replaces an existing unconfirmed transaction with a conflicting one that pays a higher fee. This requires the network to relay and re-validate another transaction. Only one of the two is actually going to pay the fee, while the other will be rejected. For that reason, RBF replacement tx shall pay not only its own relay fee, but also cover the relay fee of the replaced transaction. This is needed so the user bears the cost of relaying of both transactions. (See also [BIP125](https://github.com/bitcoin/bips/blob/master/bip-0125.mediawiki).)\r\n\r\nCPFP keeps already relayed transactions untouched, but allows a descendant transaction to \"cover up\" for its ancestor(s). Meaning, if both the parent and a child are included, the overall fee rate will be higher than for the parent alone.\r\n\r\nNote that both RBF and CPFP require virtually the same relay overhead, that mostly consists of re-done R1CS proof.\r\n\r\nHowever, CPFP requires both txs to go into the block, eating from its size limit, while RBF does not. This is not a matter of traffic overhead, as both txs are usually already relayed anyway before block is ready, so they are not relayed twice. But from the perspective of the block signers, that is impossible to know.\r\n\r\n### Sequential payments\r\n\r\nCPFP naturally enables to control priority when payments are chained (this is a common situation in Bitcoin and all account-based blockchains). Even if the parent was low-priority, if the child is high-priority, it can cover for the parent on the spot, w/o any extra overhead. The downside is that long chains/subgraphs of low-priority transactions with high-priority grand{^n}children make it harder to account for in mempool logic.\r\n\r\nOn the other hand, RBF permits compressing multiple payments in one tx: if another payment needs to be done, instead of chaining the transactions, user agent can replace the existing unconfirmed one, adding an additional output to it. This does not improve the relay traffic, but saves the block space: all payments that happen before the block is made effectively consume space for 1 payment. This seems like a win, but it is probably not: (1) the fees paid are not minimized as the final tx must pay the fees for all the previous ones, (2) for the final replacement to be successfully propagated, all prior versions would have to be widely propagated too (because you never know which one is the final one), which means the entire network would have to relay and validate all those transactions, regardless whether all of them or only one of them ends up in a block. Not using RBF and consuming the block space with all intermediate versions reflects the reality better.\r\n\r\nAnother downside of RBF: if the payment output is modified, the payment blinding factor must be re-communicated to the recipient (makes payment protocol more complicated); if the payment output is left alone, then the change output becomes clearly distinguishable (this is bad for privacy).\r\n\r\n### Zero-confirmation payments\r\n\r\nRecent Bitcoin usage shows that without ubiquitous and well-capitalized payment channels network (lightning, or \"layer two\"), but well connected blockchain network (\"base layer\"), businesses are fine accepting zero-confirmation payments from non-RBF transactions. This goes in line with the general philosophy of blockchain design: all transaction are irreversible. Designing wallets to account for not just cancellation of incoming 0-conf payments, but non-guaranteed ability to replace its own transactions complicates things very much.\r\n\r\nFor this reason we tentatively assume that RBF is not worth supporting at all in order to simplify the logic of the wallet and mempools. The only thing that wallets need to support is re-filtering the mempool when a new block comes it, in order to kick out duplicate or conflicting txs.\r\n\r\n### Relaying CPFP\r\n\r\nFor CPFP to work successfully, one needs to make sure the parent transaction is not rejected by a node before learning about children that cover the required fees.\r\n\r\nSee the [design discussion in Bitcoin on **package relay**](https://github.com/bitcoin/bitcoin/issues/14895) and the proposed [acceptance logic](https://github.com/bitcoin/bitcoin/pull/16401).\r\n\r\nNote that Bitcoin's approach intentionally does not attempt to support RBF within CPFP package relay logic. No tx in a package is allowed to conflict with any mempool tx.\r\n\r\nThe basic idea is: the node may relay a package of transactions, that is judged as a whole when calculating a feerate. This allows including lower-fee parents with higher-fee children.\r\n\r\nThe [PR 16401](https://github.com/bitcoin/bitcoin/pull/16401) works via relay of children as orphans first, and then when a parent is nearly rejected for low fee, it is checked if there are already known orphans that as-a-package make the parent worthy of inclusion. In order words, this does not employ any package-specific messages and assumes relaying of txs in random or at least high-feerate-first order (per my understanding).\r\n\r\n### Mempool eviction\r\n\r\nWhen the mempool is full, it's lowest-feerate tx is evicted leaving space for the higher-feerate tx. Note that in case of CPFP/PDC, we only track those children with sufficient feerate and not their ancestors that have too low feerate on their own. When such child is evicted, all its insufficiently priced ancestors are evicted too.\r\n\r\nThis raises several questions:\r\n\r\n1. What if the would-be-evicted set of transactions pays a higher absolute fee than the replacement?\r\n2. The would-be-evicted set of transactions may have high relay cost (due to size), and if evicted, the replacement must justify such eviction by paying for that relay cost. In other words, the minimum required fee must be increased by the minimum relay feerate multiplied by the size of all evicted transactions.\r\n3. What if some other transactions depend on some of the outputs that are evicted? This may lead to high-fee tx being evicted unless we do something smarter well before, when we group CPFP transactions.\r\n\r\n",
          "user": {
            "login": "oleganza",
            "id": 698,
            "node_id": "MDQ6VXNlcjY5OA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/698?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/oleganza",
            "html_url": "https://github.com/oleganza",
            "followers_url": "https://api.github.com/users/oleganza/followers",
            "following_url": "https://api.github.com/users/oleganza/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/oleganza/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/oleganza/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/oleganza/subscriptions",
            "organizations_url": "https://api.github.com/users/oleganza/orgs",
            "repos_url": "https://api.github.com/users/oleganza/repos",
            "events_url": "https://api.github.com/users/oleganza/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/oleganza/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 2061712419,
              "node_id": "MDU6TGFiZWwyMDYxNzEyNDE5",
              "url": "https://api.github.com/repos/stellar/slingshot/labels/consensus",
              "name": "consensus",
              "description": "Issues affecting consensus-level compatibility",
              "color": "ff6666",
              "default": false
            },
            {
              "id": 2061713367,
              "node_id": "MDU6TGFiZWwyMDYxNzEzMzY3",
              "url": "https://api.github.com/repos/stellar/slingshot/labels/relay",
              "name": "relay",
              "description": "Issues affecting relay protocol compatibility",
              "color": "bda8f7",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 1,
          "created_at": "2020-01-22T15:36:14Z",
          "updated_at": "2020-05-14T22:43:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 577781457,
      "node_id": "MDEyOklzc3VlQ29tbWVudDU3Nzc4MTQ1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/577781457",
      "actor": {
        "login": "oleganza",
        "id": 698,
        "node_id": "MDQ6VXNlcjY5OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oleganza",
        "html_url": "https://github.com/oleganza",
        "followers_url": "https://api.github.com/users/oleganza/followers",
        "following_url": "https://api.github.com/users/oleganza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oleganza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oleganza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oleganza/subscriptions",
        "organizations_url": "https://api.github.com/users/oleganza/orgs",
        "repos_url": "https://api.github.com/users/oleganza/repos",
        "events_url": "https://api.github.com/users/oleganza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oleganza/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-01-23T17:19:10Z",
      "updated_at": "2020-01-23T17:19:10Z",
      "author_association": "NONE",
      "body": "I had a thought about looking at the problem from a slightly different angle. What if instead of **Child Pays For Parent** we think of it as **Parent Discounts Child**? \r\n\r\nThen we can keep a limited set of non-relayable \"waiting-state\" parents and include their feerate (represented by a pair of `(fee, weight)`). Every time another candidate tx arrives, its effective fee rate is computed as ∑fee/∑weight over all its \"waiting-state\" ancestors. In other words, all ancestors discount the feerate of the new candidate. If such effective feerate is over the threshold, then such tx and all its waiting ancestors are marked as \"accepted\" and now can be relayed.\r\n\r\nIf there is an overlapping subgraph (because some waiting ancestor has 2+ outputs) and the common ancestor transitions from _waiting_ to _accepted_, we need to recursively follow the known descendants and re-calculate their feerates so they are not discounted anymore. Since some of them can become acceptable themselves, the process should probably consist of two phases: update the feerates downstream, then try to accept the updated waiting txs.\r\n\r\nDoes this make sense?\r\n\r\n",
      "user": {
        "login": "oleganza",
        "id": 698,
        "node_id": "MDQ6VXNlcjY5OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oleganza",
        "html_url": "https://github.com/oleganza",
        "followers_url": "https://api.github.com/users/oleganza/followers",
        "following_url": "https://api.github.com/users/oleganza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oleganza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oleganza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oleganza/subscriptions",
        "organizations_url": "https://api.github.com/users/oleganza/orgs",
        "repos_url": "https://api.github.com/users/oleganza/repos",
        "events_url": "https://api.github.com/users/oleganza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oleganza/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-577781457",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "commented",
      "id": 665874764,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTg3NDc2NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665874764",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:23Z",
      "updated_at": "2020-08-11T15:13:39Z",
      "author_association": "MEMBER",
      "body": "I would like to re-open the discussion relative to package relay design, especially in light of my learnings from the past few months of the LN security requirements. \r\n\r\nTo sum-up, we have an array of use-cases for which package relay would provide value. (ofc I’m looking at this issue with a strong LN bias and getting an LN-fix in the first version might be too much to ask.)\r\n\r\n###  Best-feerate discovery\r\nA node on the network may have a small mempool configuration, such that its minimum feerate required\r\nfor acceptance is far higher than the rest of the network. Receipt of a low-feerate transaction will be rejected even though a high-feerate child may be received just after. This scenario downgrades the feerate discovery of node’s with small mempools and limits their ability to accurately estimate fees.\r\n\r\n### Multi-party transactions\r\nA Coinjoin user among a set of participants may have a different liquidity preference than others\r\nand would like to unilaterally bump the feerate of the pending coinjoin to spend the funds sooner.\r\nRequiring interactivity breaks privacy assumptions by triggering another round of communications or violates spending policy by accessing the cold wallet.\r\n\r\n### Pre-signed delegated transactions\r\nA LN user may delegate enforcement of its channel to a watchtower, while only providing pre-signed\r\ntransactions to avoid fund hijacks by the distrusted watchtower. To do its job correctly, the delegated watchtower needs to bump the feerate of pre-signed transactions.\r\n\r\n### Bitcoin Contracts with Competing Interests\r\nContract applications (vaults or LN) rely on the timely confirmation of transactions for fund security. Assuming a pre-negotiated fees model, a counterparty has an interest in preventing the inclusion of a transaction to benefit from a timelock expiration. An honest party should be able to unilaterally bump feerates of its counter-signed transactions, without any assumed knowledge of network mempools. See https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002758.html\r\n\r\n### Security Requirements\r\nHere are a few attacks to consider when designing package-relay:\r\na) a counterparty shouldn't be able to block propagation of a higher-feerate chain of transactions\r\nby an earlier, lower-feerate broadcast competing for the same utxo\r\nb) a counterparty shouldn't be able to pin an invalid or low-feerate parent in reject filters to\r\nblock later acceptance of a higher-feerate child\r\nc) a counterparty shouldn't be able to flood the p2p network with cheap, invalid chains of\r\ntransactions or orphans to obstruct the propagation of higher-feerate packages.\r\nAttacks b) and c) are especially concerning from an LN perspective, as you can map a LN-node to its full-node. Assuming we can't mask tx-relay topology, an attacker can directly connect to victims’ peers to\r\ninterfere with propagation.\r\n\r\n### Approaches Trade-offs\r\nTalking with @sdaftuar on package relay design, he underscored the need for a uniform relay/mempool\r\npolicy across the deployed network to ensure package relay efficiency. Policy stability \r\nhas already been talked in other issues (e.g #13283 (comment))\r\nMy mailing list post covers this in more detail, but if we opt for a uniform policy\r\nit means our package design must be backward compatible to avoid breaking applications relying on\r\nprevious package versions.\r\n\r\nWe have a few choices to make on the initial design:\r\n* receiver-initiated: a) without p2p changes https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002758.html or b) with p2p extensions https://gist.github.com/sdaftuar/8756699bfcad4d3806ba9f3396d4e66a\r\n* relay-initiated: at inv/tx sending, the relay node ties a low-feerate parent to a high-feerate child based on its local mempool. You can leverage the feefilter as a trigger or an opt-in from parent\r\n* sender-initiated: original broadcast sender marks a chain of transactions as broadcastable and is evaluated as a whole, see #19621 (there are flavors in between, see Rusty's deferred broadcast ideas here : https://gist.github.com/sdaftuar/8756699bfcad4d3806ba9f3396d4e66a)\r\n\r\nI think it’s possible that any one of the following choices would guard against attacks by: \r\na) solving conflict replacement,\r\nwhich is a mempool mechanism\r\nb) introducing a package_id or evicting low-feerate parents from our rejection filters\r\nc) allocating per-peer resources, to avoid DoS due to new data structures/algorithms, as we’re already doing for INVs \r\n\r\nIMO, where the approaches diverge, is regarding the use of bandwidth. A receiver-initiated scheme would have the following round-trips:\r\n* INV announcement of parent and child\r\n* GETDATA replies of both parent and child\r\n* TX sending of both parent and child, if the parent is rejected, the child kept as an orphan\r\n* GETPACKAGE reply of child ancestors\r\n* PACKAGE sending of ancestors ids\r\n* GETDATA replies of ancestors\r\n* TX sending of ancestors\r\nParent announcement/sending would have to be duplicated.\r\n\r\nWhereas a sender/relay initiated, based on introducing a package_id (sha256 of all package elements) might look like the following:\r\n* INV announcement of package_id\r\n* GETDATA of package_id, if it's not already known\r\n* PACKAGE sending of all package members\r\n\r\nA sender/relay initiated scheme, due to already knowing the feerate dependency between transactions,\r\ncan only announce a common identifier for the whole. Of course, among package elements, a parent can\r\nalready be known by the receiver, but you should always allow a mempool retry as it's a \"different\"\r\nrelay.\r\n\r\nNow, is this worth the effort to optimize package-relay ? That's a question hard to answer without knowing\r\nits future usage. Dependent second-layers may use it more often based on their fee models requirements which may make up a significant share of the overall tx-relay bandwidth. Starting with a high-bandwidth scheme now\r\n(receiver-initiated) but needing to switch to a lower-bandwidth scheme (sender-initiated) if later needed, will be a break a backward-compatible uniform policy.\r\n\r\nBetween original-sender-initiated and relay-initiated schemes, I think we want to avoid encumbering\r\nevery relaying hop with recomputing packages when it can be done O(1) by the sender. This also helps\r\navoid doing work that your mempool has already done with regards to package limits.\r\n\r\nIt might even be worth exploring fancier p2p extensions, like new INVs where the utxo/feerate of either a transaction or a whole package could be sent or queried by peers.\r\n\r\n### Conclusion\r\nIMHO, going forward, \r\n* we should have a clear understanding of second-layer application requirements to evaluate proposals, including the edge cases of LN security issues\r\n* we should decide if it's worth leaving room for future bandwidth optimizations so that either sender or receiver can initiate with the caveat that fancier optimizations come with greater DoS vulnerabilities\r\n* we should deploy an backward-compatible package policy, namely only 2-tx package for now solving pinning (at least until mempool refactors are merged) to avoid package replacement DoS vectors package support should be built on top of overhaul transaction request to reduce DoS and transaction origin inference attack surfaces \r\n* we should decide on a consistency guarantee, the package API should be clear enough to avoid footgunish misuse by higher-level applications\r\n\r\nMaybe to start, we can work on an unoptimized, upgradeable LN-fixing package relay\r\nand defer the hard questions to later.\r\n\r\nThoughts ?\r\n\r\ncc @TheBlueMatt @t-bast @rustyrussell ",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-665874764",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "mentioned",
      "id": 3600601390,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMDYwMTM5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600601390",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:23Z"
    },
    {
      "event": "subscribed",
      "id": 3600601394,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDA2MDEzOTQ=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600601394",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:24Z"
    },
    {
      "event": "mentioned",
      "id": 3600601397,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMDYwMTM5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600601397",
      "actor": {
        "login": "rustyrussell",
        "id": 775844,
        "node_id": "MDQ6VXNlcjc3NTg0NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/775844?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustyrussell",
        "html_url": "https://github.com/rustyrussell",
        "followers_url": "https://api.github.com/users/rustyrussell/followers",
        "following_url": "https://api.github.com/users/rustyrussell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustyrussell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustyrussell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustyrussell/subscriptions",
        "organizations_url": "https://api.github.com/users/rustyrussell/orgs",
        "repos_url": "https://api.github.com/users/rustyrussell/repos",
        "events_url": "https://api.github.com/users/rustyrussell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustyrussell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:24Z"
    },
    {
      "event": "subscribed",
      "id": 3600601400,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDA2MDE0MDA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600601400",
      "actor": {
        "login": "rustyrussell",
        "id": 775844,
        "node_id": "MDQ6VXNlcjc3NTg0NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/775844?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustyrussell",
        "html_url": "https://github.com/rustyrussell",
        "followers_url": "https://api.github.com/users/rustyrussell/followers",
        "following_url": "https://api.github.com/users/rustyrussell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustyrussell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustyrussell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustyrussell/subscriptions",
        "organizations_url": "https://api.github.com/users/rustyrussell/orgs",
        "repos_url": "https://api.github.com/users/rustyrussell/repos",
        "events_url": "https://api.github.com/users/rustyrussell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustyrussell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:24Z"
    },
    {
      "event": "mentioned",
      "id": 3600601406,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMDYwMTQwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600601406",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:24Z"
    },
    {
      "event": "subscribed",
      "id": 3600601407,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDA2MDE0MDc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600601407",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:24Z"
    },
    {
      "event": "mentioned",
      "id": 3600601412,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMDYwMTQxMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600601412",
      "actor": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:24Z"
    },
    {
      "event": "subscribed",
      "id": 3600601415,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDA2MDE0MTU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600601415",
      "actor": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:24Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T19:55:34Z",
      "updated_at": "2020-07-29T19:55:34Z",
      "source": {
        "issue": {
          "id": 668110660,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDU4NjU5NDgy",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19621",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19621/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19621/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19621/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19621",
          "number": 19621,
          "state": "closed",
          "state_reason": null,
          "title": "[RFC] Package-relay:  sender-initiated",
          "body": "_This is demo code for a sender-initiated version of package-relay. This is not proposed for merging, only to illustrate package relay design with trade-offs compared to #16401. See my update on #14895 to advance discussions on package-relay._\r\n\r\nFew design choices of interest:\r\n* introduce new p2p messages, `sendpackages`, `MSG_PACKAGE`, `package` and new `package_id` identifier incorporated to the INV/GETDATA control logic : https://gist.github.com/ariard/10924249b3b7f6e239d80895372839b8\r\n* add a new `sendpackage` rpc to let a higher-application signals a chain of transactions and such start a propagation on the p2p network\r\n* integrate a `PackageCache` to internally cache the mapping package_id -> txids/wtxids, as they need to be persistent across a round-trip between upstream/downstream peers, it must be DoS resistant\r\n*  build on #16401 `AcceptMultipleTransactions` with a package policy restriction to 2-tx only, make it easier to reason on for replacement\r\n* allow for package replacement based on newer feerate higher that the union of feerate of all transactions conflicted, no dedup for now between conflicted set\r\n* don't redundantly send a transaction via INV(MSG_TX) if we know an associated package and peer signal package relay support\r\n* TODO: integrate package_id with overhaul transaction request/AlreadyHave to save further on bandwidth\r\n",
          "user": {
            "login": "ariard",
            "id": 23310655,
            "node_id": "MDQ6VXNlcjIzMzEwNjU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ariard",
            "html_url": "https://github.com/ariard",
            "followers_url": "https://api.github.com/users/ariard/followers",
            "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
            "organizations_url": "https://api.github.com/users/ariard/orgs",
            "repos_url": "https://api.github.com/users/ariard/repos",
            "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ariard/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19621",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19621",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19621.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19621.patch"
          },
          "closed_at": "2022-03-21T13:37:21Z",
          "created_at": "2020-07-29T19:55:34Z",
          "updated_at": "2023-04-03T14:41:30Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 665901650,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTkwMTY1MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665901650",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T20:12:30Z",
      "updated_at": "2020-07-29T20:12:30Z",
      "author_association": "MEMBER",
      "body": "I'm still digesting all this, but I wanted to respond to this very clearly:\r\n\r\n> Talking with @sdaftuar on package relay design, he underscored the need for an uniform relay/mempool\r\npolicy across the deployed network to ensure package relay efficiency. \r\n\r\nI think you misunderstand my points on this issue.  My view is exactly the opposite: philosophically, trying to enforce a uniform relay/mempool policy across the network in order to protect the security model of an application is something that I think is a mistake and a huge divergence from how we've approached relay policy and p2p design in the past.\r\n\r\nWhat I was also trying to say is that recent conversations around the insufficiency of our transaction relay system for lightning's security model make it sound like lightning needs a uniform relay policy -- which I think would be troubling if true.  So I think it's worth hashing out here exactly what the security requirements are in some more detail, and whether we can reasonably accommodate that at the base layer.  Perhaps the best way to do that is to throw up some proposals and discuss whether they are actually sufficient?",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-665901650",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "mentioned",
      "id": 3600667536,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMDY2NzUzNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600667536",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T20:12:30Z"
    },
    {
      "event": "subscribed",
      "id": 3600667539,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDA2Njc1Mzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3600667539",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T20:12:30Z"
    },
    {
      "event": "commented",
      "id": 665907792,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTkwNzc5Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665907792",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T20:25:41Z",
      "updated_at": "2020-07-29T20:25:41Z",
      "author_association": "MEMBER",
      "body": "> a) a counterparty shouldn't be able to block propagation of a higher-feerate chain of transactions\r\nby an earlier, lower-feerate broadcast competing for the same utxo\r\nb) a counterparty shouldn't be able to pin an invalid or low-feerate parent in reject filters to\r\nblock latter evaluation with a higher-feerate child\r\nc) a counterparty shouldn't be able to overflow the p2p network with cheap, invalid chains of\r\ntransactions or orphans to obstrucate propagation of higher-feerate packages\r\n\r\nThis is a helpful start.  Points a) and c) make me wonder what are the RBF requirements of lightning?  It sounds like we need to be able to do package-level-RBF in order to achieve some of these goals, possibly with new RBF semantics that might allow total mempool fee to drop.  Is that correct?  Also, does it need to apply even if not all directly conflicting transactions signal for opt-in, to prevent an attacker from creating a transaction that can't be package-RBF-evicted because it's not signaling?",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-665907792",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "commented",
      "id": 665969902,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTk2OTkwMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665969902",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T22:49:30Z",
      "updated_at": "2020-07-29T22:49:40Z",
      "author_association": "MEMBER",
      "body": "@thebluematt and I previously discussed some policy changes that might help here. I'm not sure I entirely understand all the issues but we had two ideas that I think may mitigate some of the transaction chain pinning concerns:\r\n\r\na) Transaction pinning.  To solve the problem of low-feerate transactions being stuck in the mempool interfering with protocols like lightning which just need resolution, we can borrow from suggestions to solve RBF-pinning.  I believe @gmaxwell once suggested that one way we could mitigate RBF-pinning issues would be by letting transaction creators add a flag (perhaps an unused bit in a sequence field or the like) that would indicate that nodes should not add children to the transaction, unless doing so would likely cause the transaction to be confirmed very soon.  The motivation is that the author of the transaction may seek to use RBF in the future to bump the feerate, so relay or mining nodes would be better off not accepting low-feerate children, which would interfere with that.  \r\n\r\nThis seems like it should be incentive-compatible in principle, although the details around determining exactly what is \"near confirmation\" could have implementation difficulties in practice, I dunno.  I don't really know how lightning works, but presumably if we had such a policy that was broadly in use, then applications like lightning could attach this flag to all pre-signed transactions that involve more than one-party?\r\n\r\nAlso, I guess we'd need to have this flag work at the package level (so that we only let a transaction in if the package it's part of has a high enough feerate to be mined soon).\r\n\r\nb) Package RBF.  I guess if some undesirable transaction does end up stuck in the mempool somehow, that you'd need package-level RBF in order to evict a package with another.  If we think our implementation of (a) is good enough, then I don't know how much we need to worry about this, but perhaps there are ways that (a) would be gamed which make package rbf of some sort important.  I think figuring out exactly what the semantics here would be will take some design effort.  This also reintroduces the RBF pinning problem but this time for packages rather than single transactions (ie what do you do when you want to evict a large package with a small one?).\r\n\r\nAre there any other tools we need at our disposal to achieve the security requirements listed?",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-665969902",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "mentioned",
      "id": 3601235221,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMTIzNTIyMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3601235221",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T22:49:30Z"
    },
    {
      "event": "subscribed",
      "id": 3601235222,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDEyMzUyMjI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3601235222",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T22:49:30Z"
    },
    {
      "event": "mentioned",
      "id": 3601235226,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMTIzNTIyNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3601235226",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T22:49:30Z"
    },
    {
      "event": "subscribed",
      "id": 3601235227,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDEyMzUyMjc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3601235227",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T22:49:30Z"
    },
    {
      "event": "commented",
      "id": 665975441,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NTk3NTQ0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/665975441",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T23:07:43Z",
      "updated_at": "2020-07-29T23:08:13Z",
      "author_association": "MEMBER",
      "body": "Just want to mention this here.\r\n\r\n@rustyrussell floated the idea once of having sort of a \"pre-mempool\", of transactions that are queued for inclusion into the mempool, but otherwise unvalidated. These transactions aren't relayed until they're actually accepted into the mempool (gated by it shrinking through its normal expiration/confirmation/conflict mechanism), so there are fewer concerns about creating a freely abusable network wide broadcast channel. In addition, these could be relayed along with the outputs they're spending (and identified using a hash that commits to these), so that the receiver can correctly reason about their feerate and whatever other policies they want to apply, without needing to care about orphaning or doing costly UTXO lookups and other full validation. This could reduce the actual mempool to a smaller area, of sufficient size to efficiently decide what goes into the next block, but and delay relay of what can't be confirmed soon.\r\n\r\nI haven't thought through the implications too much, but perhaps it is useful in this discussion.\r\n\r\n@rustyrussell let me know if I'm missing something or misrepresented anything.\r\n\r\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-665975441",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "mentioned",
      "id": 3601273389,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMTI3MzM4OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3601273389",
      "actor": {
        "login": "rustyrussell",
        "id": 775844,
        "node_id": "MDQ6VXNlcjc3NTg0NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/775844?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustyrussell",
        "html_url": "https://github.com/rustyrussell",
        "followers_url": "https://api.github.com/users/rustyrussell/followers",
        "following_url": "https://api.github.com/users/rustyrussell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustyrussell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustyrussell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustyrussell/subscriptions",
        "organizations_url": "https://api.github.com/users/rustyrussell/orgs",
        "repos_url": "https://api.github.com/users/rustyrussell/repos",
        "events_url": "https://api.github.com/users/rustyrussell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustyrussell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T23:07:43Z"
    },
    {
      "event": "subscribed",
      "id": 3601273390,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDEyNzMzOTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3601273390",
      "actor": {
        "login": "rustyrussell",
        "id": 775844,
        "node_id": "MDQ6VXNlcjc3NTg0NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/775844?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rustyrussell",
        "html_url": "https://github.com/rustyrussell",
        "followers_url": "https://api.github.com/users/rustyrussell/followers",
        "following_url": "https://api.github.com/users/rustyrussell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rustyrussell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rustyrussell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rustyrussell/subscriptions",
        "organizations_url": "https://api.github.com/users/rustyrussell/orgs",
        "repos_url": "https://api.github.com/users/rustyrussell/repos",
        "events_url": "https://api.github.com/users/rustyrussell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rustyrussell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-29T23:07:43Z"
    },
    {
      "event": "commented",
      "id": 666021701,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjAyMTcwMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/666021701",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-30T01:26:57Z",
      "updated_at": "2020-07-30T01:31:50Z",
      "author_association": "MEMBER",
      "body": "> I think you misunderstand my points on this issue. My view is exactly the opposite: philosophically, trying to enforce a uniform relay/mempool policy across the network in order to protect the security model of an application is something that I think is a mistake and a huge divergence from how we've approached relay policy and p2p design in the past.\r\n\r\n> What I was also trying to say is that recent conversations around the insufficiency of our transaction relay system for lightning's security model make it sound like lightning needs a uniform relay policy -- which I think would be troubling if true. \r\n\r\nI'm sorry for the misunderstanding there, but I think there is still a valuable discussion to have on some policy subset stability across versions, on which higher applications (not only LN) can confidently build their fee model and propagation model. And it could be a) base layer agreeing on the policy subset b) in consequence applications designing their fee model c) as a feedback, if there is use-cases demand, reasonably extending the subset. Actually that's not the order followed, because we have deployed protocols with funds at risk due to these issues not being understood enough (and I don't blame anyone each layer has a complexity of its own, and the interactivity of both is daunting).\r\n\r\nWhen I'm thinking about a uniform policy, here the class of  scenario I'm concerned about, we tight some rules in the future in release Y (like increasing minRelayTxFee), a higher application may have pre-signed parent transactions with hardcoded older minRelayTxFee and relying on a high-feerate children for timely confirmation of the whole (as you can't predict the future why bother with an inaccurate parent feerate ?). The application full-node is safe as long as you have a propagation path Y (the older release) to miner mempools. If your full-node is a private one and has only few tx-relay peers as soon as they're all X ones your application becomes insecure. Of course, it's unlikely we touch inconsiderately to an obvious rule like minRelayTxFee, but as the whole policy set is loosely documented and hard to test, it's hard to know on which higher-layer devs have made assumptions for the security of their software stack. \r\n\r\nNaturally a way to avoid that would be to give some ecosystem warning when we identify such upgrade risk and ensure there is sufficient time elapsed for higher-software to compel and re-deploy. And maybe that's the word \"uniformity\" where we hanging on, I think it's more backward-compatibility which is aimed ?\r\n\r\nIt's as much troubling to think the security of your LN node is function of the whom your linked full-node might be connected to. And this good-propagation of your time-sensitive transactions is really a fundamental assumption of all payment channels design, even before LN. Ecosystem-wise, it's quite concerning that this assumption is, in fact, laying on a false premise.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-666021701",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "commented",
      "id": 666043085,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjA0MzA4NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/666043085",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-30T02:20:15Z",
      "updated_at": "2020-07-30T02:37:09Z",
      "author_association": "MEMBER",
      "body": "> This is a helpful start. Points a) and c) make me wonder what are the RBF requirements of lightning? It sounds like we need to be able to do package-level-RBF in order to achieve some of these goals, possibly with new RBF semantics that might allow total mempool fee to drop. Is that correct? Also, does it need to apply even if not all directly conflicting transactions signal for opt-in, to prevent an attacker from creating a transaction that can't be package-RBF-evicted because it's not signaling?\r\n\r\nI think the total mempool fee needs to drop because otherwise a malicious counterparty can broadcast first a low-feerate, high-fee package for the utxo in competition, such preventing replacement by a honest party capping its fee-bump to the contested value. Honest bump must happen through CPFP as the honest parent is also pre-signed and won't replace the malicious pin on its own. As you might not learned pinned parent (and you may have a different one in each network mempool), you can't do blind-CPFP and must assume that your honest parent+high-feerate CPFP replace every malicious instance as a whole. For the second concern, that's something we can handle on our own, as transactions are pre-signed or spends must use a CSV you can force opt-in, even of malicious transactions.\r\n\r\nOverall, for Lightning security model with regards to known pinning attack scenarios I sum up them there : https://lists.linuxfoundation.org/pipermail/lightning-dev/2020-June/002758.html.  \r\n\r\n> I believe @gmaxwell once suggested that one way we could mitigate RBF-pinning issues would be by letting transaction creators add a flag (perhaps an unused bit in a sequence field or the like) that would indicate that nodes should not add children to the transaction, unless doing so would likely cause the transaction to be confirmed very soon. \r\n\r\nI guess there is the weakness of someone connecting to your node, the original sender, and freely inflating the feerate of your mempool to make you reject your own CPFP. An attacker can do this without effectively paying the price by partition-conflicting your mempool from the rest of the network. There is also an attacker anticipating mempool-congestion (like exchange payouts) and racing to make the low-feerate make it in the mempool before being obsolete but staying there. Also not broadcasting low-feerate children restrain the network to learn about them, they're valid blockspace demand at some price point and may express a honest user confirmation preference (now does low-feerate CPFP on RBFable transactions make sense ?)\r\n\r\nGenerally I'm skeptical turning mempools as fee-estimators (even if latter are built on top of former) and instead favor applications expressing their confirmation preferences, mempools just reflecting them (just policing out resources abuse). \"near confirmation\" sounds like a moving target due to block variance and mempool-congestion. That said it might be good enough, I need to think more on it.\r\n\r\n> This also reintroduces the RBF pinning problem but this time for packages rather than single transactions (ie what do you do when you want to evict a large package with a small one?).\r\n\r\nIs this an issue if smaller one has a better feerate than large package or you're thinking about ancestor/descendants limits here ?\r\n\r\n> Are there any other tools we need at our disposal to achieve the security requirements listed?\r\n\r\nIIRC we mentioned with Matt about fast rotation of some of your tx-relay peers to make topology less static and thus less prone to exploitation through conflicting mempools or interfering with propagation. But that was only for the more sophisticated scenarios (\"The Ugly\" in my June post), not the one I'm immediately concerned with.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-666043085",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "mentioned",
      "id": 3601671018,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMTY3MTAxOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3601671018",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-30T02:20:15Z"
    },
    {
      "event": "subscribed",
      "id": 3601671021,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDE2NzEwMjE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3601671021",
      "actor": {
        "login": "gmaxwell",
        "id": 858454,
        "node_id": "MDQ6VXNlcjg1ODQ1NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gmaxwell",
        "html_url": "https://github.com/gmaxwell",
        "followers_url": "https://api.github.com/users/gmaxwell/followers",
        "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
        "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
        "repos_url": "https://api.github.com/users/gmaxwell/repos",
        "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-30T02:20:15Z"
    },
    {
      "event": "commented",
      "id": 666215119,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjIxNTExOQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/666215119",
      "actor": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-30T08:13:26Z",
      "updated_at": "2020-07-30T08:13:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "If that helps, I tried summing up recent discussions around these issues and LN assumptions here:\r\n\r\n- https://github.com/t-bast/lightning-docs/blob/master/lightning-txs.md\r\n- https://github.com/t-bast/lightning-docs/blob/master/pinning-attacks.md\r\n\r\nThese documents may be incomplete, and there may be mistakes (my own!), but I think they can be a good starting point to understand where LN may be making wishful assumptions that can fall apart at tx-relay time (and the tx format constraints LN has).\r\n\r\n> What I was also trying to say is that recent conversations around the insufficiency of our transaction relay system for lightning's security model make it sound like lightning needs a uniform relay policy -- which I think would be troubling if true.\r\n\r\nI don't think LN requires a uniform p2p network (in the sense that all nodes apply the exact same relay policies and mempools always converge). And I agree that it would not be desirable; I think there's simply a misunderstanding on what \"uniform\" means here. IIUC @ariard means that higher layers need to be able to rely on a few core assumptions that need to remain \"loosely true\" for a big enough portion of the network (e.g. `minRelayTxFee` will not be raised arbitrarily).\r\n\r\nI think the core tx-relay assumption for LN is that there must be a (somewhat stable) mechanism to allow an honest node to bump the fees of a tx that has been signed in the past with a low feerate (and that can't be updated because it requires signatures from multiple participants, who may be malicious and won't cooperate). If we raise the fee to `X sats`, it's ok if some nodes relay it and others won't, as long as raising the fees even more can guarantee that most nodes will eventually relay it (once the fee has been raised enough).\r\n\r\nI don't have enough knowledge to suggest how this high-level goal should be met (even though sender-initiated package relay feels like a good starting design point), but I can share what I think is the root cause of the issue nowadays (my point of view may be biased and incomplete, please don't hesitate to hurt my feelings and tell me I'm completely wrong). IMHO BIP 125 rule 5 is the culprit because it introduces *irreplaceable packages*. Those packages are also quite costly for mempools (because walking the graph is costly). I don't understand why allowing such long chains of unconfirmed transactions in the mempool is useful. It feels to me that bitcoin should only allow much smaller unconfirmed packages (with a hard-coded, maybe configurable limit `N`), allow replacing those packages, and shift the complexity of managing long chains to clients; if someone wants to chain 100 txs, they should be buffering them and broadcasting them `N` by `N`, waiting for the previous batch to be confirmed before broadcasting more (i.e. they're the only ones bearing the complexity cost of their usecase, instead of putting the burden on the whole network).\r\n\r\nAgain, I want to emphasize that I may be completely wrong on this; it's very likely that I'm unaware of use-cases that require this feature.",
      "user": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-666215119",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "mentioned",
      "id": 3602614857,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MzYwMjYxNDg1Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3602614857",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-30T08:13:27Z"
    },
    {
      "event": "subscribed",
      "id": 3602614860,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MDI2MTQ4NjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3602614860",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-30T08:13:27Z"
    },
    {
      "event": "commented",
      "id": 666267749,
      "node_id": "MDEyOklzc3VlQ29tbWVudDY2NjI2Nzc0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/666267749",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-07-30T09:50:32Z",
      "updated_at": "2020-07-30T09:50:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "> \"pre-mempool\"\r\n\r\nI've had a similar thought, that I call the \"memswamp\" -- basically, keep an indexed collections of transactions but allow it to include conflicting transactions as well (could potentially include orphan or non-final transactions as well, suitably tagged). You filter out conflicting and low-fee txs from the memswamp to generate the mempool, which is what you use to build blocks.\r\n\r\nThe main idea being that if someone relays you a tx that you can successfully validate (you know its parents, its signatures are valid, and it complies with standardness rules), then if it doesn't pass RBF rules, you still keep it around, you just don't immediately forward it. Ideally, you maintain a \"minfeebump\" value that you use to ratelimit what tx's you forward, so if there's a lull in tx traffic, you'll forward even a tx that RBF's by a small amount, but if there's a lot it may rise above \"minfee\" even. Expire txs when they're low fee, have been replaced by a higher fee tx and you've relayed that tx, when they've been orphaned for too long, etc. I think that might be a good enough way of preventing tx spam on its own, so that you could drop the \"must pay a higher fee than the package it's replacing, not just a higher fee rate\" rule, which seems like the biggest road block in ensuring you can get your contract resolution committed on chain.\r\n\r\nI think the memswamp approach potentially has nicer properties for handling reorgs, since you can \"just\" free up space for the txs from the reorged blocks, and dump them directly into the mempool, without having to resolve conflicts. If it's a >100 block reorg you'd need to be careful about disappearing coinbases making some tx's orphans, and would have to take care of final txs becoming non-final as well.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-666267749",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-06T12:36:42Z",
      "updated_at": "2020-08-06T12:36:42Z",
      "source": {
        "issue": {
          "id": 671664437,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDYxODQxNTY4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19645",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19645/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19645/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19645/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19645",
          "number": 19645,
          "state": "closed",
          "state_reason": null,
          "title": "Allow updating mempool-txn with cheaper witnesses",
          "body": "Accepting a transaction to the mempool only succeeds if this transaction\r\nisn't already present. This check operating on txid, it prevents new\r\nsubmissions of the transaction with identical non-witness data but\r\nsmaller valid witnesses. Therefore, overall mempool feerate won't improve\r\neven if such higher-feerate mempool candidate is learnt through wtxid-relay.\r\n\r\nThis commit changes mempool and transaction broadcast already-present checks\r\nfrom transaction's txid to its wtxid.\r\n\r\nA new-wtxid submission may still fail due to replacement rules in\r\nfunction of local policy settings.\r\n\r\n\r\n@jnewbery RE: https://github.com/bitcoin/bitcoin/pull/18044#discussion_r460704950 I think we agree on the \"same txid, different txids\" nonsense, I didn't mean to track multiple witnesses for one txid rather to accept and rebroadcast \"the best mempool candidate known for a given txid\". A script may have alternatives solvable branches and witnesses to spend them might be different in weight thus creating wtxid with divergent feerates. A best known candidate with regards to a txid is defined as a higher-feerate witness (a smaller one) transaction than our current in mempool one, with identical non-witness data.\r\n\r\nYou might submit a txidA:wtxid1 to your local node, and schedule it for initial-broadcast reattempt. Few minutes, latter you announce to your node a higher-feerate txidA:wtxid2, which effectively replace wtxid1. At `ReattemptInitialBroadcast`, only wtxid2 will be rebroadcast if needed, as best known candidate for txidA. According to me, that's where unbroadcast semantic is unclear, to which wtxid the user should expect seeing \"broadcast-reattempt\" property guarantee ?\r\n\r\nGiven our current relay policy default, I concede this is rather a marginal case, beyond illustrating another limit of our mempool replacement rules. In the future, it's likely to worsen as taproot make it far easier to create witnesses with divergent feerates (e.g a 1-of-1 tapscript compared to a 15-of-15 one). In case of concurrent broadcast, the mempool won't necessary learn the best-feerate candidate. That said, IMO, it's worthy to fix because \"txn-already-in-mempool\" isn't accurate anymore in a wtxid-relay context.",
          "user": {
            "login": "ariard",
            "id": 23310655,
            "node_id": "MDQ6VXNlcjIzMzEwNjU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ariard",
            "html_url": "https://github.com/ariard",
            "followers_url": "https://api.github.com/users/ariard/followers",
            "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
            "organizations_url": "https://api.github.com/users/ariard/orgs",
            "repos_url": "https://api.github.com/users/ariard/repos",
            "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ariard/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 22,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19645",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19645",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19645.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19645.patch"
          },
          "closed_at": "2022-01-10T00:24:52Z",
          "created_at": "2020-08-02T18:18:06Z",
          "updated_at": "2023-01-10T10:07:14Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Christewart",
        "id": 3514957,
        "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Christewart",
        "html_url": "https://github.com/Christewart",
        "followers_url": "https://api.github.com/users/Christewart/followers",
        "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
        "organizations_url": "https://api.github.com/users/Christewart/orgs",
        "repos_url": "https://api.github.com/users/Christewart/repos",
        "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Christewart/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-08-16T21:11:29Z",
      "updated_at": "2020-08-16T21:11:29Z",
      "source": {
        "issue": {
          "id": 678677752,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDY3NTg1OTk4",
          "url": "https://api.github.com/repos/discreetlogcontracts/dlcspecs/issues/59",
          "repository_url": "https://api.github.com/repos/discreetlogcontracts/dlcspecs",
          "labels_url": "https://api.github.com/repos/discreetlogcontracts/dlcspecs/issues/59/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/discreetlogcontracts/dlcspecs/issues/59/comments",
          "events_url": "https://api.github.com/repos/discreetlogcontracts/dlcspecs/issues/59/events",
          "html_url": "https://github.com/discreetlogcontracts/dlcspecs/pull/59",
          "number": 59,
          "state": "closed",
          "state_reason": null,
          "title": "Peer Protocol for Contract Negotiation Specification",
          "body": "Re-wrote the Transactions specification to match the new adaptor signature based DLCs and to match the BOLT style.\r\n\r\nIt is not in its final state but it should be a good starting point to get merged in!\r\n\r\nRelated to #46\r\n\r\nTODO:\r\n\r\n- [ ] Test Vectors",
          "user": {
            "login": "nkohen",
            "id": 22485603,
            "node_id": "MDQ6VXNlcjIyNDg1NjAz",
            "avatar_url": "https://avatars.githubusercontent.com/u/22485603?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/nkohen",
            "html_url": "https://github.com/nkohen",
            "followers_url": "https://api.github.com/users/nkohen/followers",
            "following_url": "https://api.github.com/users/nkohen/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/nkohen/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/nkohen/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/nkohen/subscriptions",
            "organizations_url": "https://api.github.com/users/nkohen/orgs",
            "repos_url": "https://api.github.com/users/nkohen/repos",
            "events_url": "https://api.github.com/users/nkohen/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/nkohen/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 2257933471,
              "node_id": "MDU6TGFiZWwyMjU3OTMzNDcx",
              "url": "https://api.github.com/repos/discreetlogcontracts/dlcspecs/labels/contract-negotiation",
              "name": "contract-negotiation",
              "description": "",
              "color": "0097a5",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/discreetlogcontracts/dlcspecs/milestones/1",
            "html_url": "https://github.com/discreetlogcontracts/dlcspecs/milestone/1",
            "labels_url": "https://api.github.com/repos/discreetlogcontracts/dlcspecs/milestones/1/labels",
            "id": 5739800,
            "node_id": "MDk6TWlsZXN0b25lNTczOTgwMA==",
            "number": 1,
            "state": "open",
            "title": "v0.1",
            "description": "v0.1 for the DLC spec",
            "creator": {
              "login": "Christewart",
              "id": 3514957,
              "node_id": "MDQ6VXNlcjM1MTQ5NTc=",
              "avatar_url": "https://avatars.githubusercontent.com/u/3514957?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/Christewart",
              "html_url": "https://github.com/Christewart",
              "followers_url": "https://api.github.com/users/Christewart/followers",
              "following_url": "https://api.github.com/users/Christewart/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/Christewart/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/Christewart/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/Christewart/subscriptions",
              "organizations_url": "https://api.github.com/users/Christewart/orgs",
              "repos_url": "https://api.github.com/users/Christewart/repos",
              "events_url": "https://api.github.com/users/Christewart/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/Christewart/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 13,
            "closed_issues": 36,
            "created_at": "2020-08-06T11:37:09Z",
            "updated_at": "2021-06-09T19:48:28Z",
            "due_on": "2020-10-01T07:00:00Z"
          },
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/discreetlogcontracts/dlcspecs/pulls/59",
            "html_url": "https://github.com/discreetlogcontracts/dlcspecs/pull/59",
            "diff_url": "https://github.com/discreetlogcontracts/dlcspecs/pull/59.diff",
            "patch_url": "https://github.com/discreetlogcontracts/dlcspecs/pull/59.patch"
          },
          "closed_at": "2020-09-08T21:40:04Z",
          "created_at": "2020-08-13T19:18:33Z",
          "updated_at": "2020-09-08T21:40:04Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "removed_from_project",
      "id": 3726240293,
      "node_id": "MDIzOlJlbW92ZWRGcm9tUHJvamVjdEV2ZW50MzcyNjI0MDI5Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3726240293",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-09-03T19:13:46Z",
      "project_card": {
        "id": 22407880,
        "url": "https://api.github.com/projects/columns/cards/22407880",
        "project_id": 481835,
        "project_url": "https://api.github.com/projects/481835",
        "column_name": "Chasing Concept ACK"
      }
    },
    {
      "event": "referenced",
      "id": 3985146503,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM5ODUxNDY1MDM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3985146503",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "8b6f77f2a4bed03004bae331afe70969316aa4e0",
      "commit_url": "https://api.github.com/repos/revault/practical-revault/commits/8b6f77f2a4bed03004bae331afe70969316aa4e0",
      "created_at": "2020-11-11T18:36:00Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-11-11T18:36:33Z",
      "updated_at": "2020-11-11T18:36:33Z",
      "source": {
        "issue": {
          "id": 740983878,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTE5Mzc5ODMx",
          "url": "https://api.github.com/repos/revault/practical-revault/issues/45",
          "repository_url": "https://api.github.com/repos/revault/practical-revault",
          "labels_url": "https://api.github.com/repos/revault/practical-revault/issues/45/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/revault/practical-revault/issues/45/comments",
          "events_url": "https://api.github.com/repos/revault/practical-revault/issues/45/events",
          "html_url": "https://github.com/revault/practical-revault/pull/45",
          "number": 45,
          "state": "closed",
          "state_reason": null,
          "title": "messages: add the chosen fixed feerate to the unvault transaction",
          "body": "To sum up, we cannot broadcast the unvault if the majority of the network mempools\r\nminfee goes above 21sat/vbyte, but there is no fix apart from deploying\r\npackage relay on the Bitcoin network (https://github.com/bitcoin/bitcoin/issues/14895).\r\n\r\nThis is not security critical, but may become so as users may be trying\r\nany trick to bypass the blocking of operations.\r\n\r\nSigned-off-by: Antoine Poinsot <darosior@protonmail.com>\r\n\r\nFixes https://github.com/re-vault/practical-revault/issues/15",
          "user": {
            "login": "darosior",
            "id": 22457751,
            "node_id": "MDQ6VXNlcjIyNDU3NzUx",
            "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/darosior",
            "html_url": "https://github.com/darosior",
            "followers_url": "https://api.github.com/users/darosior/followers",
            "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
            "organizations_url": "https://api.github.com/users/darosior/orgs",
            "repos_url": "https://api.github.com/users/darosior/repos",
            "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/darosior/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 0,
          "pull_request": {
            "url": "https://api.github.com/repos/revault/practical-revault/pulls/45",
            "html_url": "https://github.com/revault/practical-revault/pull/45",
            "diff_url": "https://github.com/revault/practical-revault/pull/45.diff",
            "patch_url": "https://github.com/revault/practical-revault/pull/45.patch"
          },
          "closed_at": "2020-11-12T17:12:53Z",
          "created_at": "2020-11-11T18:36:33Z",
          "updated_at": "2020-11-12T17:12:54Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 3989763881,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM5ODk3NjM4ODE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3989763881",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "6067a8fdb7254e7b3247feeef11d4a3d108c452b",
      "commit_url": "https://api.github.com/repos/revault/practical-revault/commits/6067a8fdb7254e7b3247feeef11d4a3d108c452b",
      "created_at": "2020-11-12T17:12:53Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-01-22T13:56:15Z",
      "updated_at": "2021-01-22T13:56:15Z",
      "source": {
        "issue": {
          "id": 791470335,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTU5NTI0MzAz",
          "url": "https://api.github.com/repos/bitcoin-core-review-club/website/issues/300",
          "repository_url": "https://api.github.com/repos/bitcoin-core-review-club/website",
          "labels_url": "https://api.github.com/repos/bitcoin-core-review-club/website/issues/300/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core-review-club/website/issues/300/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core-review-club/website/issues/300/events",
          "html_url": "https://github.com/bitcoin-core-review-club/website/pull/300",
          "number": 300,
          "state": "closed",
          "state_reason": null,
          "title": "Add notes for #20833",
          "body": "lalala 📦 ",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core-review-club/website/pulls/300",
            "html_url": "https://github.com/bitcoin-core-review-club/website/pull/300",
            "diff_url": "https://github.com/bitcoin-core-review-club/website/pull/300.diff",
            "patch_url": "https://github.com/bitcoin-core-review-club/website/pull/300.patch"
          },
          "closed_at": "2021-01-22T21:43:57Z",
          "created_at": "2021-01-21T20:29:31Z",
          "updated_at": "2021-01-22T21:45:25Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-24T23:54:21Z",
      "updated_at": "2021-04-24T23:54:21Z",
      "source": {
        "issue": {
          "id": 777588162,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTQ3ODQyODI4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20833",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20833/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20833/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/20833/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/20833",
          "number": 20833,
          "state": "closed",
          "state_reason": null,
          "title": "rpc/validation: enable packages through testmempoolaccept",
          "body": "This PR enables validation dry-runs of packages through the `testmempoolaccept` RPC. The expectation is that the results returned from `testmempoolaccept` are what you'd get from test-then-submitting each transaction individually, in that order (this means the package is expected to be sorted in topological order, for now at least). The validation is also atomic: in the case of failure, it immediately halts and may return \"unfinished\" `MempoolAcceptResult`s for transactions that weren't fully validated. The API for 1 transaction stays the same.\r\n\r\n**Motivation:** \r\n- This allows you to test validity for transaction chains (e.g. with multiple spending paths and where you don't want to broadcast yet); closes #18480.\r\n- It's also a first step towards package validation in a minimally invasive way.\r\n- The RPC commit happens to close #21074 by clarifying the \"allowed\" key.\r\n\r\nThere are a few added restrictions on the packages, mostly to simplify the logic for areas that aren't critical to main package use cases:\r\n- No package can have conflicts, i.e. none of them can spend the same inputs, even if it would be a valid BIP125 replacement.\r\n- The package cannot conflict with the mempool, i.e. RBF is disabled.\r\n- The total count of the package cannot exceed 25 (the default descendant count limit), and total size cannot exceed 101KvB (the default descendant size limit).\r\n\r\nIf you're looking for review comments and github isn't loading them, I have a gist compiling some topics of discussion [here](https://gist.github.com/glozow/c3acaf161c95bba491fce31585b2aaf7)\r\n",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 35,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/20833",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/20833",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/20833.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/20833.patch"
          },
          "closed_at": "2021-05-27T20:41:05Z",
          "created_at": "2021-01-03T07:16:31Z",
          "updated_at": "2022-08-18T18:24:21Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 826168715,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgyNjE2ODcxNQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/826168715",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-24T23:55:41Z",
      "updated_at": "2021-04-24T23:55:41Z",
      "author_association": "MEMBER",
      "body": "Should package limits be expressed in weight units or virtual bytes ?\r\n\r\nSee discussion : https://github.com/bitcoin/bitcoin/pull/20833/#discussion_r618629408\r\n\r\ncc @glozow ",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-826168715",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "mentioned",
      "id": 4640479852,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50NDY0MDQ3OTg1Mg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4640479852",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-24T23:55:42Z"
    },
    {
      "event": "subscribed",
      "id": 4640479853,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDQ2NDA0Nzk4NTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4640479853",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-24T23:55:42Z"
    },
    {
      "event": "commented",
      "id": 826237280,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgyNjIzNzI4MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/826237280",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-25T03:16:17Z",
      "updated_at": "2021-04-26T23:15:47Z",
      "author_association": "MEMBER",
      "body": "> Should package limits be expressed in weight units or virtual bytes ?\r\n\r\nIsn't one a multiple of the other? I used vbytes in 20833 since that's what descendant limits are expressed in. I don't think I fully understand why there would be a significant difference in using one over the other. ",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-826237280",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "commented",
      "id": 850698441,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg1MDY5ODQ0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/850698441",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-05-28T22:07:50Z",
      "updated_at": "2021-05-28T22:08:02Z",
      "author_association": "MEMBER",
      "body": "> Isn't one a multiple of the other? I used vbytes in 20833 since that's what descendant limits are expressed in. I don't think I fully understand why there would be a significant difference in using one over the other.\r\n\r\nSee #22097 for rational and proposed changes.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14895#issuecomment-850698441",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14895"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-13T17:17:02Z",
      "updated_at": "2021-06-13T17:17:02Z",
      "source": {
        "issue": {
          "id": 906098291,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjU3MTMyNDg2",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22097/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22097",
          "number": 22097,
          "state": "closed",
          "state_reason": null,
          "title": "validation: Move package acceptance size limit from KvB to WU",
          "body": "Class of second-layers applications interested by the package acceptance API are mostly relying on trustless chain of transactions which are necessarily made of segwit input. As such, most of them are making their internal propagation sanity checks and feerate computations already in weight units (at least I can confirm for Lightning, it's mandatory in the spec to announce `feerate_per_kw` to your counterparty).\r\n\r\nTo reduce odds of bugs in second-layers implementations, such as the one mentioned in #13283, this PR changes the package acceptance size limit from kilo-bytes to weight units.\r\n\r\nE.g an internal Lightning onchain logic with an already-computed package weight of 404_002 (100_000 bytes of regular fields, 4002 bytes of witness fields), dividing by WITNESS_SCALE_FACTOR, obtaining 101_000 virtual bytes, checking against MAX_PACKAGE_SIZE and then wrongly evaluating the package as valid for mempool acceptance.\r\n\r\nIt also matches our max transaction size check already expressed in weight units (`MAX_STANDARD_TX_WEIGHT`).",
          "user": {
            "login": "ariard",
            "id": 23310655,
            "node_id": "MDQ6VXNlcjIzMzEwNjU1",
            "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ariard",
            "html_url": "https://github.com/ariard",
            "followers_url": "https://api.github.com/users/ariard/followers",
            "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
            "organizations_url": "https://api.github.com/users/ariard/orgs",
            "repos_url": "https://api.github.com/users/ariard/repos",
            "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ariard/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 18,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22097",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22097",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22097.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22097.patch"
          },
          "closed_at": "2022-07-09T00:00:02Z",
          "created_at": "2021-05-28T21:37:41Z",
          "updated_at": "2023-07-09T10:09:56Z"
        },
        "type": "issue"
      }
    }
  ]
}