{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29365",
    "id": 1706640974,
    "node_id": "PR_kwDOABII585luUZO",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/29365",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/29365.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/29365.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29365",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29365/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29365/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29365/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/c6f832f521ab39220448af44dfaf8dfbb0878ff0",
    "number": 29365,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Extend signetchallenge to set target block spacing",
    "user": {
      "login": "starius",
      "id": 920155,
      "node_id": "MDQ6VXNlcjkyMDE1NQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/920155?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/starius",
      "html_url": "https://github.com/starius",
      "followers_url": "https://api.github.com/users/starius/followers",
      "following_url": "https://api.github.com/users/starius/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/starius/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/starius/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/starius/subscriptions",
      "organizations_url": "https://api.github.com/users/starius/orgs",
      "repos_url": "https://api.github.com/users/starius/repos",
      "events_url": "https://api.github.com/users/starius/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/starius/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Inspired by https://github.com/bitcoin/bitcoin/pull/27446, this PR implements the proposal detailed in the comment https://github.com/bitcoin/bitcoin/pull/27446#issuecomment-1516600820.\r\n\r\n## Rationale\r\n\r\nIntroduce the ability to configure a custom target time between blocks in a custom Bitcoin signet network. This enhancement enables users to create a signet that is more conducive to testing. The change enhances the flexibility of signet, rendering it more versatile for various testing scenarios. For instance, I am currently working on setting up a signet with a 30-second block time. However, this caused numerous difficulty adjustments, resulting in an inconsistent network state. Regtest isn't a viable alternative for me in this context since we prefer defaults to utilize our custom signet when configured, without impeding local regtest development.\r\n\r\n## Implementation\r\n\r\nIf the challenge format is `OP_RETURN PUSHDATA<params> PUSHDATA<actual challenge>`, the actual challenge from the second data push is used as the signet challenge, and the parameters from the first push are used to configure the network. Otherwise the challenge is used as is.\r\n\r\nThis change is backward-compatible, as per the old rules, such a signet challenge would always evaluate to false, rendering it unused.\r\n\r\nThe only parameter currently available is \"target_spacing\" (default 600 seconds). To set it, place `0x01<target_spacing as uint64_t, little endian>` in the params. Empty params are also valid. If other network parameters are added in the future, they should use `0x02<option 2 value>`, `0x03<option 3 value>`, etc., following the protobuf style.\r\n\r\nTwo public functions were added to `chainparams.h`:\r\n  - `ParseWrappedSignetChallenge`: Extracts signet params and signet challenge from a wrapped signet challenge.\r\n  - `ParseSignetParams`: Parses `<params>` bytes of the first data push.\r\n\r\nFunction `ReadSigNetArgs` calls `ParseWrappedSignetChallenge` and `ParseSignetParams` to implement the new meaning of signetchallenge.\r\n\r\nThe description of the flag `-signetchallenge` was updated to reflect the changes.\r\n\r\nA new unit tests file, `chainparams_tests.cpp`, was added, containing tests for `ParseWrappedSignetChallenge` and `ParseSignetParams`.\r\n\r\nThe test `signet_parse_tests` from the file `validation_tests.cpp` was modified to ensure proper understanding of the new logic.\r\n\r\nIn the functional test `feature_signet.py`, the value of `-signetchallenge` was changed from `OP_TRUE` to the wrapped challenge, setting spacing to 30 seconds and having the same actual challenge `OP_TRUE`.\r\n\r\nThe Signet miner was updated, introducing a new option `--target-spacing` with a default of 600 seconds. It must be set to the value used by the network.\r\n\r\n## Example\r\n\r\nI tested this PR against [Mutinynet](https://blog.mutinywallet.com/mutinynet/), a signet running on a custom fork of Bitcoin Core, implementing 30s target spacing. I successfully synchronized the blockchain using the following config:\r\n\r\n```\r\nsignet=1\r\n[signet]\r\nsignetchallenge=6a4c09011e000000000000004c25512102f7561d208dd9ae99bf497273e16f389bdbd6c4742ddb8e6b216e64fa2928ad8f51ae\r\naddnode=45.79.52.207:38333\r\ndnsseed=0\r\n```\r\n\r\nThe content of this wrapped challenge:\r\n\r\n```\r\n6a OP_RETURN\r\n4c OP_PUSHDATA1\r\n09 (length of signet params = 9)\r\n011e00000000000000 (signet params: 0x01, pow_target_spacing=30)\r\n4c OP_PUSHDATA1\r\n25 (length of challenge = 37)\r\n512102f7561d208dd9ae99bf497273e16f389bdbd6c4742ddb8e6b216e64fa2928ad8f51ae\r\n(original Mutinynet challenge)\r\n```",
    "labels": [],
    "created_at": "2024-02-01T16:36:21Z",
    "updated_at": "2024-02-01T16:36:25Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "dd4bc825cfe8bbeaafebd9470dc784d6f71ad372",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "starius:signet-blockitme-in-challenge",
      "ref": "signet-blockitme-in-challenge",
      "sha": "c6f832f521ab39220448af44dfaf8dfbb0878ff0",
      "user": {
        "login": "starius",
        "id": 920155,
        "node_id": "MDQ6VXNlcjkyMDE1NQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/920155?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/starius",
        "html_url": "https://github.com/starius",
        "followers_url": "https://api.github.com/users/starius/followers",
        "following_url": "https://api.github.com/users/starius/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/starius/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/starius/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/starius/subscriptions",
        "organizations_url": "https://api.github.com/users/starius/orgs",
        "repos_url": "https://api.github.com/users/starius/repos",
        "events_url": "https://api.github.com/users/starius/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/starius/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 8373557,
        "node_id": "MDEwOlJlcG9zaXRvcnk4MzczNTU3",
        "name": "bitcoin",
        "full_name": "starius/bitcoin",
        "owner": {
          "login": "starius",
          "id": 920155,
          "node_id": "MDQ6VXNlcjkyMDE1NQ==",
          "avatar_url": "https://avatars.githubusercontent.com/u/920155?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/starius",
          "html_url": "https://github.com/starius",
          "followers_url": "https://api.github.com/users/starius/followers",
          "following_url": "https://api.github.com/users/starius/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/starius/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/starius/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/starius/subscriptions",
          "organizations_url": "https://api.github.com/users/starius/orgs",
          "repos_url": "https://api.github.com/users/starius/repos",
          "events_url": "https://api.github.com/users/starius/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/starius/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/starius/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/starius/bitcoin",
        "archive_url": "https://api.github.com/repos/starius/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/starius/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/starius/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/starius/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/starius/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/starius/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/starius/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/starius/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/starius/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/starius/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/starius/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/starius/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/starius/bitcoin/events",
        "forks_url": "https://api.github.com/repos/starius/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/starius/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/starius/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/starius/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/starius/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/starius/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/starius/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/starius/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/starius/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/starius/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/starius/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/starius/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/starius/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/starius/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/starius/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/starius/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:starius/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/starius/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/starius/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/starius/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/starius/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/starius/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/starius/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/starius/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/starius/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/starius/bitcoin/hooks",
        "svn_url": "https://github.com/starius/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 211498,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-02-01T16:36:12Z",
        "created_at": "2013-02-23T09:47:58Z",
        "updated_at": "2018-08-21T18:58:37Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "5b8c5970bdfc817cac9b59f699925c4426c59b61",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36658,
        "stargazers_count": 73654,
        "watchers_count": 73654,
        "size": 248114,
        "default_branch": "master",
        "open_issues_count": 686,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-02-01T16:36:22Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-02-01T16:17:37Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29365"
      }
    },
    "author_association": "NONE",
    "draft": false,
    "additions": 290,
    "deletions": 14,
    "changed_files": 12,
    "commits": 2,
    "review_comments": 0,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM2ODNhNzk5NmU3NjYzMmY1NzU3NDM4ZmUxZDlhZDBkMWQ5YWQxZTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3683a7996e76632f5757438fe1d9ad0d1d9ad1e4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3683a7996e76632f5757438fe1d9ad0d1d9ad1e4",
      "tree": {
        "sha": "c229794757b426aad365687ad89c041cc2568675",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c229794757b426aad365687ad89c041cc2568675"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5b8c5970bdfc817cac9b59f699925c4426c59b61",
          "sha": "5b8c5970bdfc817cac9b59f699925c4426c59b61",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5b8c5970bdfc817cac9b59f699925c4426c59b61"
        }
      ],
      "message": "Fix typos found by linter",
      "committer": {
        "name": "Boris Nagaev",
        "email": "bnagaev@gmail.com",
        "date": "2024-02-01T16:35:48Z"
      },
      "author": {
        "name": "Boris Nagaev",
        "email": "bnagaev@gmail.com",
        "date": "2024-01-31T20:24:05Z"
      },
      "sha": "3683a7996e76632f5757438fe1d9ad0d1d9ad1e4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM2ZjgzMmY1MjFhYjM5MjIwNDQ4YWY0NGRmYWY4ZGZiYjA4NzhmZjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c6f832f521ab39220448af44dfaf8dfbb0878ff0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c6f832f521ab39220448af44dfaf8dfbb0878ff0",
      "tree": {
        "sha": "03165e70f370faeead96cc058d4774310f8ffa36",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/03165e70f370faeead96cc058d4774310f8ffa36"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3683a7996e76632f5757438fe1d9ad0d1d9ad1e4",
          "sha": "3683a7996e76632f5757438fe1d9ad0d1d9ad1e4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3683a7996e76632f5757438fe1d9ad0d1d9ad1e4"
        }
      ],
      "message": "Extend signetchallenge to set target block spacing\n\nInspired by https://github.com/bitcoin/bitcoin/pull/27446, this commit\nimplements the proposal detailed in the comment\nhttps://github.com/bitcoin/bitcoin/pull/27446#issuecomment-1516600820.\n\nRationale.\n\nIntroduce the ability to configure a custom target time between blocks in a\ncustom Bitcoin signet network. This enhancement enables users to create a signet\nthat is more conducive to testing. The change enhances the flexibility of signet,\nrendering it more versatile for various testing scenarios. For instance, I am\ncurrently working on setting up a signet with a 30-second block time. However,\nthis caused numerous difficulty adjustments, resulting in an inconsistent\nnetwork state. Regtest isn't a viable alternative for me in this context since\nwe prefer defaults to utilize our custom signet when configured, without\nimpeding local regtest development.\n\nImplementation.\n\nIf the challenge format is \"OP_RETURN PUSHDATA<params> PUSHDATA<actual\nchallenge>\", the actual challenge from the second data push is used as the\nsignet challenge, and the parameters from the first push are used to configure\nthe network. Otherwise the challenge is used as is.\n\nThis change is backward-compatible, as per the old rules, such a signet\nchallenge would always evaluate to false, rendering it unused.\n\nThe only parameter currently available is \"target_spacing\" (default 600\nseconds). To set it, place \"0x01<target_spacing as uint64_t, little endian>\" in\nthe params. Empty params are also valid. If other network parameters are added\nin the future, they should use \"0x02<option 2 value>\", \"0x03<option 3 value>\",\netc., following the protobuf style.\n\nTwo public functions were added to chainparams.h:\n  - ParseWrappedSignetChallenge: Extracts signet params and signet challenge\n    from a wrapped signet challenge.\n  - ParseSignetParams: Parses <params> bytes of the first data push.\n\nFunction ReadSigNetArgs calls ParseWrappedSignetChallenge and ParseSignetParams\nto implement the new meaning of signetchallenge.\n\nThe description of the flag -signetchallenge was updated to reflect the changes.\n\nA new unit tests file, chainparams_tests.cpp, was added, containing tests for\nParseWrappedSignetChallenge and ParseSignetParams.\n\nThe test signet_parse_tests from the file validation_tests.cpp was modified to\nensure proper understanding of the new logic.\n\nIn the functional test feature_signet.py, the value of -signetchallenge was\nchanged from OP_TRUE to the wrapped challenge, setting spacing to 30 seconds and\nhaving the same actual challenge OP_TRUE.\n\nThe Signet miner was updated, introducing a new option --target-spacing with a\ndefault of 600 seconds. It must be set to the value used by the network.\n\nExample.\n\nI tested this commit against Mutinynet, a signet running on a custom fork of\nBitcoin Core, implementing 30s target spacing. I successfully synchronized the\nblockchain using the following config:\n\nsignet=1\n[signet]\nsignetchallenge=6a4c09011e000000000000004c25512102f7561d208dd9ae99bf497273e16f389bdbd6c4742ddb8e6b216e64fa2928ad8f51ae\naddnode=45.79.52.207:38333\ndnsseed=0\n\nThe content of this wrapped challenge:\n\n6a OP_RETURN\n4c OP_PUSHDATA1\n09 (length of signet params = 9)\n011e00000000000000 (signet params: 0x01, pow_target_spacing=30)\n4c OP_PUSHDATA1\n25 (length of challenge = 37)\n512102f7561d208dd9ae99bf497273e16f389bdbd6c4742ddb8e6b216e64fa2928ad8f51ae\n(original Mutinynet challenge, can be found here:\nhttps://blog.mutinywallet.com/mutinynet/ )",
      "committer": {
        "name": "Boris Nagaev",
        "email": "bnagaev@gmail.com",
        "date": "2024-02-01T16:36:02Z"
      },
      "author": {
        "name": "Boris Nagaev",
        "email": "bnagaev@gmail.com",
        "date": "2024-01-31T19:15:57Z"
      },
      "sha": "c6f832f521ab39220448af44dfaf8dfbb0878ff0"
    },
    {
      "event": "commented",
      "id": 1921735275,
      "node_id": "IC_kwDOABII585yi1pr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1921735275",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-01T16:36:24Z",
      "updated_at": "2024-02-01T16:36:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29365).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29365#issuecomment-1921735275",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29365"
    }
  ],
  "comments": []
}