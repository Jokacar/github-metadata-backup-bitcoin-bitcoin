{
  "type": "issue",
  "issue": {
    "id": 1977888344,
    "node_id": "I_kwDOABII58515C5Y",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28797",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28797/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28797/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28797/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28797",
    "number": 28797,
    "state": "open",
    "state_reason": null,
    "title": "Wallet Missing Balances/Unspent",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nWallet is missing the balance for txid d49589ccd8488c56fbf12aee2652f760e1e84e6da1edd3dcf98bf6d556151396. The output address (and input address) are mine:\r\n\r\n```\r\n getaddressinfo bc1qag6gtevhvuhafph4d73ajlj5vyhh7k4xff0p4f\r\n{\r\n  \"address\": \"bc1qag6gtevhvuhafph4d73ajlj5vyhh7k4xff0p4f\",\r\n  \"scriptPubKey\": \"0014ea3485e597672fd486f56fa3d97e54612f7f5aa6\",\r\n  \"ismine\": true,\r\n  \"solvable\": true,\r\n  \"desc\": \"wpkh([e330d50b/0'/0'/1882']02beedde844990949a471bef29330f6a777ccb88aaecaf3491d9119f9454ffbd1f)#5tasvy0h\",\r\n  \"iswatchonly\": false,\r\n  \"isscript\": false,\r\n  \"iswitness\": true,\r\n  \"witness_version\": 0,\r\n  \"witness_program\": \"ea3485e597672fd486f56fa3d97e54612f7f5aa6\",\r\n  \"pubkey\": \"02beedde844990949a471bef29330f6a777ccb88aaecaf3491d9119f9454ffbd1f\",\r\n  \"ischange\": false,\r\n  \"timestamp\": 1634944153,\r\n  \"hdkeypath\": \"m/0'/0'/1882'\",\r\n  \"hdseedid\": \"bf8e10d1998ca0f7a73b372d0ab4d9ddfa6aa4c6\",\r\n  \"hdmasterfingerprint\": \"e330d50b\",\r\n  \"labels\": [\r\n    \"LDK output address\"\r\n  ]\r\n}\r\ngetaddressinfo bc1qqdaevqjz84r0m8wxejugvcnjreuuu0xz0wwxym\r\n{\r\n  \"address\": \"bc1qqdaevqjz84r0m8wxejugvcnjreuuu0xz0wwxym\",\r\n  \"scriptPubKey\": \"0014037b9602423d46fd9dc6ccb88662721e79ce3cc2\",\r\n  \"ismine\": true,\r\n  \"solvable\": true,\r\n  \"desc\": \"wpkh([e330d50b/0'/0'/1822']03e243567081536017cb11508b7fb53ccdde657bcc5df10b9405f4cb9aa3fa6858)#48670jcm\",\r\n  \"iswatchonly\": false,\r\n  \"isscript\": false,\r\n  \"iswitness\": true,\r\n  \"witness_version\": 0,\r\n  \"witness_program\": \"037b9602423d46fd9dc6ccb88662721e79ce3cc2\",\r\n  \"pubkey\": \"03e243567081536017cb11508b7fb53ccdde657bcc5df10b9405f4cb9aa3fa6858\",\r\n  \"ischange\": false,\r\n  \"timestamp\": 1634856115,\r\n  \"hdkeypath\": \"m/0'/0'/1822'\",\r\n  \"hdseedid\": \"bf8e10d1998ca0f7a73b372d0ab4d9ddfa6aa4c6\",\r\n  \"hdmasterfingerprint\": \"e330d50b\",\r\n  \"labels\": [\r\n    \"LDK output address\"\r\n  ]\r\n}\r\n```\r\n\r\nlisttransactions lists it with 200+ confirmations\r\n```\r\n  {\r\n    \"address\": \"bc1qag6gtevhvuhafph4d73ajlj5vyhh7k4xff0p4f\",\r\n    \"parent_descs\": [\r\n    ],\r\n    \"category\": \"receive\",\r\n    \"amount\": 0.07856602,\r\n    \"label\": \"LDK output address\",\r\n    \"vout\": 0,\r\n    \"confirmations\": 257,\r\n    \"blockhash\": \"00000000000000000000a1c320c11959e670e2fb26ca0d5df64a2c453b4105d2\",\r\n    \"blockheight\": 815214,\r\n    \"blockindex\": 41,\r\n    \"blocktime\": 1699074707,\r\n    \"txid\": \"d49589ccd8488c56fbf12aee2652f760e1e84e6da1edd3dcf98bf6d556151396\",\r\n    \"wtxid\": \"137bf6d9142d8a3a5a554f86298c43b635c40d8e4486a0d92a320d03c7160708\",\r\n    \"walletconflicts\": [\r\n      \"1bd8d162be5a4b91c083866386a9e6ca0201f2c837241350855a61a7d4a9f78c\"\r\n    ],\r\n    \"time\": 1699074653,\r\n    \"timereceived\": 1699074653,\r\n    \"bip125-replaceable\": \"no\"\r\n  },\r\n  {\r\n    \"address\": \"bc1qag6gtevhvuhafph4d73ajlj5vyhh7k4xff0p4f\",\r\n    \"category\": \"send\",\r\n    \"amount\": -0.07856602,\r\n    \"label\": \"LDK output address\",\r\n    \"vout\": 0,\r\n    \"fee\": -0.00019383,\r\n    \"confirmations\": 257,\r\n    \"blockhash\": \"00000000000000000000a1c320c11959e670e2fb26ca0d5df64a2c453b4105d2\",\r\n    \"blockheight\": 815214,\r\n    \"blockindex\": 41,\r\n    \"blocktime\": 1699074707,\r\n    \"txid\": \"d49589ccd8488c56fbf12aee2652f760e1e84e6da1edd3dcf98bf6d556151396\",\r\n    \"wtxid\": \"137bf6d9142d8a3a5a554f86298c43b635c40d8e4486a0d92a320d03c7160708\",\r\n    \"walletconflicts\": [\r\n      \"1bd8d162be5a4b91c083866386a9e6ca0201f2c837241350855a61a7d4a9f78c\"\r\n    ],\r\n    \"time\": 1699074653,\r\n    \"timereceived\": 1699074653,\r\n    \"bip125-replaceable\": \"no\",\r\n    \"abandoned\": false\r\n  },\r\n```\r\n\r\nbut its not in listunspent and its missing from balances\r\n```\r\n$ listunspent 0 | grep d49589ccd8488c56fbf12aee2652f760e1e84e6da1edd3dcf98bf6d556151396\r\n$  getbalance \"*\" 0\r\n0.00000000\r\n```\n\n### Expected behaviour\n\nMy money is listed as spendable\n\n### Steps to reproduce\n\nProbably import those keys as watchonly and see what happens\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\n25.1, also happened on 23.0 which i was using until i upgraded to try to fix this\n\n### Operating system and version\n\nLinux\n\n### Machine specifications\n\n_No response_",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 3,
    "created_at": "2023-11-05T17:40:00Z",
    "updated_at": "2023-11-06T18:30:41Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 1795347642,
      "node_id": "IC_kwDOABII585rAtS6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1795347642",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T16:26:08Z",
      "updated_at": "2023-11-06T16:26:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "```\r\ngetwalletinfo\r\n{\r\n  \"walletname\": \"\",\r\n  \"walletversion\": 169900,\r\n  \"format\": \"bdb\",\r\n...\r\n  \"keypoolsize\": 1000,\r\n  \"keypoolsize_hd_internal\": 1000,\r\n  \"paytxfee\": 0.00000000,\r\n  \"private_keys_enabled\": true,\r\n  \"avoid_reuse\": false,\r\n  \"scanning\": false,\r\n  \"descriptors\": false,\r\n  \"external_signer\": false\r\n}\r\n```",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28797#issuecomment-1795347642",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28797"
    },
    {
      "event": "commented",
      "id": 1795362833,
      "node_id": "IC_kwDOABII585rAxAR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1795362833",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T16:31:55Z",
      "updated_at": "2023-11-06T16:31:55Z",
      "author_association": "NONE",
      "body": ">     \"walletconflicts\": [\r\n>      \"1bd8d162be5a4b91c083866386a9e6ca0201f2c837241350855a61a7d4a9f78c\"\r\n\r\nMaybe this is the reason for incorrect balance?\r\n    \r\n",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28797#issuecomment-1795362833",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28797"
    },
    {
      "event": "commented",
      "id": 1795856728,
      "node_id": "IC_kwDOABII585rCplY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1795856728",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T18:30:40Z",
      "updated_at": "2023-11-06T18:30:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "Probably, but just because a transaction was RBF-bumped there shouldn't be an incorrect balance/missing unspent entry :)",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28797#issuecomment-1795856728",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28797"
    }
  ]
}