{
  "type": "issue",
  "issue": {
    "id": 2313204824,
    "node_id": "I_kwDOABII586J4LRY",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/30159",
    "number": 30159,
    "state": "open",
    "state_reason": null,
    "title": "LevelDB read failure: Corruption: block checksum mismatch",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nWhen running in prune=550 mode, I consistently get the following error about once every 10 days per machine:\r\n\r\nLevelDB read failure: Corruption: block checksum mismatch\r\n\r\nThere is no recovery from this error (reindex doesn't work in prune mode), so the only solution is to nuke the datadir and do a full resync or restore the datadir from a backup.\r\n\r\nSearching the webs, the conventional wisdom is that this is caused by a hardware/disk problem. That is definitely not the case here, as I'll explain. I suspect a bug in the code is causing some thread to write to an incorrect memory location, possibly a memory use-after-free/reallocation/reorganization bug.\r\n\r\nDetails:\r\n\r\nI set up bitcoind in prune=550 mode to run on ten Amazon EC2 t4g.nano instances that each have 512mb ram and a 4 GB gpt3 (SSD) swap drive. The only job the machines have is to track the blockchain and provide RPC information on recent blocks and confirmed transactions. There is a lot of memory pressure and paging when a block comes in, but since speed is not an issue, that shouldn't be a problem.\r\n\r\nAbout once per day, bitcoind on one of the machines reports LevelDB read failure: Corruption: block checksum mismatch and stops working. The only fix is to delete and restore the bitcoin data directory, and then restart bitcoind to sync and catch back up.\r\n\r\nI am virtually certain this is a software bug in bitcoind because (a) Amazon EC2 has some of the most tested and reliable hardware in the world; (b) this problem had shown up on all ten Amazon EC2 instances all running in different EC2 availability zones; (c) Bitcoin Cash Node is also installed on all ten machines, and it has had zero problems. Bitcoin Cash Node forked from bitcoin core a while back and also uses LevelDB, among other commonalities.\r\n\r\nI tried this with the bitcoin binary distributions bitcoin-25.2-aarch64-linux-gnu.tar.gz and bitcoin-26.1-aarch64-linux-gnu.tar.gz, as well as well as bitcoin-25.2 compiled from source, and it made no difference.\r\n\r\nI collected some of the files that have the checksum mismatch and can provide them if someone wants to look for clues on which software component corrupted the data.\n\n### Expected behaviour\n\nI expect to never see a LevelDB data corruption failure.\n\n### Steps to reproduce\n\nbitcoind config file:\r\n\r\ndatadir=/bdata/bitcoin-data\r\n\r\ndiscover=0\r\nlisten=1\r\nmaxconnections=24\r\n\r\npar=1\r\n\r\nblocksonly=1\r\ndbcache=200\r\nmaxsigcachesize=4\r\nprune=550\r\n\r\nmaxmempool=5\r\nblockreconstructionextratxn=1\r\nmaxorphantx=1\r\nmempoolexpiry=1\r\npersistmempool=0\r\n\r\ndisablewallet=1\r\n\r\nserver=1\r\nrpcallowip=127.0.0.1\r\nrpcuser=btc\r\nrpcpassword=btc\r\nrpcworkqueue=40\r\nrpcthreads=1\r\n\r\nprinttoconsole=1\r\nnodebuglogfile=1\r\n\r\n[main]\r\nrpcport=8332\r\nrpcbind=127.0.0.1:8332\r\nbind=[::]:9333\r\nbind=127.0.0.1:8334=onion\n\n### Relevant log output\n\nThis is one example, I have more, they all look the same:\r\n\r\nStarted bitcoind.service.\r\n2024-05-22T17:53:08Z Bitcoin Core version v25.2.0 (release build)\r\n ...\r\n2024-05-22T19:05:51Z UpdateTip: new best=00000000000000000002c656268be2b9e044b5963af0507e16414552aa526d57 height=844603 version=0x237c6000 log2_work=94.939158 tx=1009037420 date='2024-05-22T14:46:04Z' progress=0.999943 cache=72.4MiB(515946txo)\r\n2024-05-22T19:05:57Z UpdateTip: new best=000000000000000000028401d5cd96ea647cc9adae836735615d7dbf64feed6f height=844604 version=0x2f50c000 log2_work=94.939172 tx=1009041112 date='2024-05-22T15:00:11Z' progress=0.999946 cache=73.9MiB(526621txo)\r\n2024-05-22T19:06:00Z Socks5() connect to 78.44.10.186:8333 failed: connection refused\r\n2024-05-22T19:06:03Z UpdateTip: new best=000000000000000000018332b3b2594e340a0dfd150cbc2a852930c0cddaa91b height=844605 version=0x20000000 log2_work=94.939185 tx=1009044861 date='2024-05-22T15:14:46Z' progress=0.999949 cache=75.4MiB(537704txo)\r\n2024-05-22T19:06:05Z Socks5() connect to 2601:283:5080:8540::55d6:8333 failed: general failure\r\n2024-05-22T19:06:12Z UpdateTip: new best=0000000000000000000163e90fef2b79654d0235d68a603f46ac5e41ce62d827 height=844606 version=0x2e000000 log2_work=94.939199 tx=1009048116 date='2024-05-22T15:31:30Z' progress=0.999953 cache=76.8MiB(548883txo)\r\n2024-05-22T19:06:20Z UpdateTip: new best=00000000000000000001a4ce0b96e5a761337a84974d27a694c7b8d2c74b8cf0 height=844607 version=0x27a94000 log2_work=94.939212 tx=1009050900 date='2024-05-22T15:43:50Z' progress=0.999956 cache=78.1MiB(558437txo)\r\n2024-05-22T19:06:26Z UpdateTip: new best=00000000000000000001d82049db35f2dfabccfba593ee3a433f0500c2734f4e height=844608 version=0x274a6000 log2_work=94.939226 tx=1009054026 date='2024-05-22T16:09:29Z' progress=0.999961 cache=79.5MiB(569127txo)\r\n2024-05-22T19:06:49Z Socks5() connect to 212.102.36.243:8333 failed: general failure\r\n2024-05-22T19:07:09Z UpdateTip: new best=00000000000000000003571b667acb77721004099827b38802f77500cd370d8b height=844609 version=0x20000000 log2_work=94.939240 tx=1009057717 date='2024-05-22T16:21:29Z' progress=0.999964 cache=5.4MiB(0txo)\r\n2024-05-22T19:07:17Z LevelDB read failure: Corruption: block checksum mismatch: /bdata/bitcoin-data/chainstate/5847811.ldb\r\n2024-05-22T19:07:17Z Fatal LevelDB error: Corruption: block checksum mismatch: /bdata/bitcoin-data/chainstate/5847811.ldb\r\n2024-05-22T19:07:17Z You can use -debug=leveldb to get more complete diagnostic messages\r\n2024-05-22T19:07:17Z Error: Error reading from database, shutting down.\r\nError: Error reading from database, shutting down.\r\n2024-05-22T19:07:17Z Error reading from database: Fatal LevelDB error: Corruption: block checksum mismatch: /bdata/bitcoin-data/chainstate/5847811.ldb\r\nbitcoind.service: Main process exited, code=dumped, status=6/ABRT\r\nbitcoind.service: Failed with result 'core-dump'.\r\nbitcoind.service: Consumed 16min 43.740s CPU time.\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nbitcoin-25.2-aarch64-linux-gnu.tar.gz and bitcoin-26.1-aarch64-linux-gnu.tar.gz\n\n### Operating system and version\n\nLinux 6.1.87-99.174.amzn2023.aarch64 #1 SMP\n\n### Machine specifications\n\nAmazon EC2 t4g.nano instance (512mb ram) with unlimited CPU\r\nzram driver disabled (sudo yum remove zram-generator, reboot)\r\n14 GB gp3 root drive\r\n4 GB gp3 swap drive\r\n40 GB gp3 data drive for bitcoin blockchain\r\n\r\nNAME          MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS\r\nnvme1n1       259:0    0  40G  0 disk /bdata\r\nnvme2n1       259:1    0   4G  0 disk [SWAP]\r\nnvme0n1       259:2    0  14G  0 disk\r\n├─nvme0n1p1   259:3    0  14G  0 part /\r\n└─nvme0n1p128 259:4    0  10M  0 part /boot/efi\r\n\r\nIPv4 enabled but not assigned an IP address\r\nIPv6 enabled, assigned an IP address, and routed to internet\r\n\r\nSome machines have Tor installed and enabled for testing (including the one for the log file attached above), but this made no difference in results.",
    "user": {
      "login": "apulsifer",
      "id": 7013474,
      "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apulsifer",
      "html_url": "https://github.com/apulsifer",
      "followers_url": "https://api.github.com/users/apulsifer/followers",
      "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
      "organizations_url": "https://api.github.com/users/apulsifer/orgs",
      "repos_url": "https://api.github.com/users/apulsifer/repos",
      "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/apulsifer/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      },
      {
        "id": 323697996,
        "node_id": "MDU6TGFiZWwzMjM2OTc5OTY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Data%20corruption",
        "name": "Data corruption",
        "color": "f7c6c7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 7,
    "created_at": "2024-05-23T15:22:09Z",
    "updated_at": "2024-05-23T18:32:14Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 12911310069,
      "node_id": "LE_lADOABII586J4LRYzwAAAAMBkvT1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12911310069",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:24:36Z",
      "label": {
        "name": "Data corruption",
        "color": "f7c6c7"
      }
    },
    {
      "event": "labeled",
      "id": 12911341894,
      "node_id": "LE_lADOABII586J4LRYzwAAAAMBk3FG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12911341894",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:26:57Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "commented",
      "id": 2127439462,
      "node_id": "IC_kwDOABII585-ziZm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127439462",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:35:05Z",
      "updated_at": "2024-05-23T15:35:05Z",
      "author_association": "MEMBER",
      "body": "> I suspect a bug in the code is causing some thread to write to an incorrect memory location, possibly a memory use-after-free/reallocation/reorganization bug.\r\n\r\nWould it be possible for you to compile and run with asan, or a similar sanitizer?\r\n\r\nAlso, what filesystem are you using on the drives? Something like `df --print-type --human-readable /bdata` should print it.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127439462",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127451533,
      "node_id": "IC_kwDOABII585-zlWN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127451533",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:40:50Z",
      "updated_at": "2024-05-23T15:40:50Z",
      "author_association": "NONE",
      "body": "xfs on the root and data drive\r\n\r\nsudo mkswap /dev/nvme[4 GB disk]\r\nsudo swapon /dev/nvme[4 GB disk]\r\n\r\nsudo mkdir /bdata\r\nsudo mkfs -t xfs /dev/nvme[40 GB disk]\r\nlsblk -o name,size,type,uuid\r\nsudo nano /etc/fstab\r\n\r\nadd to fstab:\r\nUUID=[4 GB disk uuid] swap swap defaults 0 0\r\nUUID=[40 GB disk uuid] /bdata xfs defaults,nofail 0 2\r\n\r\nsudo mount -a\r\n\r\nFilesystem       Type      Size  Used Avail Use% Mounted on\r\ndevtmpfs         devtmpfs  4.0M     0  4.0M   0% /dev\r\ntmpfs            tmpfs     210M     0  210M   0% /dev/shm\r\ntmpfs            tmpfs      84M  552K   84M   1% /run\r\n/dev/nvme0n1p1   xfs        14G  3.4G   11G  25% /\r\ntmpfs            tmpfs     210M     0  210M   0% /tmp\r\n/dev/nvme1n1     xfs        40G   19G   22G  46% /bdata\r\n/dev/nvme0n1p128 vfat       10M  1.4M  8.7M  14% /boot/efi\r\ntmpfs            tmpfs      42M     0   42M   0% /run/user/1000\r\n",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127451533",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127461229,
      "node_id": "IC_kwDOABII585-zntt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127461229",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:45:40Z",
      "updated_at": "2024-05-23T15:45:40Z",
      "author_association": "NONE",
      "body": "> Would it be possible for you to compile and run with asan, or a similar sanitizer?\r\n\r\nI don't see where I would get a chunk of time to do that right now.... But as I mentioned, I copied the corrupted files, and that might give some clues to someone familiar with their format (especially if the corruption is ascii in the middle of binary, or vice versa)",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127461229",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127569909,
      "node_id": "IC_kwDOABII585-0CP1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127569909",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T16:22:38Z",
      "updated_at": "2024-05-23T16:22:38Z",
      "author_association": "MEMBER",
      "body": "> I don't see where I would get a chunk of time to do that right now....\r\n\r\nSure, no rush. I'll probably take some time to pin this down. (I don't have an AWS account, so I can't test it, but maybe someone else has).\r\n\r\nSome other ideas to test in the meantime:\r\n\r\n* Try another filesystem instead of xfs\r\n* Try the master branch (not for production, just for testing whether the issue still happens there)\r\n\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127569909",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "labeled",
      "id": 12912262744,
      "node_id": "LE_lADOABII586J4LRYzwAAAAMBoX5Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12912262744",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T16:23:03Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "commented",
      "id": 2127734105,
      "node_id": "IC_kwDOABII585-0qVZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127734105",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T17:51:13Z",
      "updated_at": "2024-05-23T17:51:13Z",
      "author_association": "NONE",
      "body": "xfs is used on the root drive of every Amazon EC2 instance running Amazon Linux. If xfs on Amazon EC2 were the problem, a lot of of critical infrastructure would be failing right now. And as I mentioned, these machines are also running bitcoin cash in an almost an identical configuration (data file path and ports changed) and it has had zero problems. Since the data corruption only happens about once per week when running on mainnet, I think figuring this problem out will probably take a customized and instrumented version of bitcoind being feed blocks at high speed with random jitter and waits and synthetic memory pressure. This could probably be done on a virtual machine anywhere, like Xen, KVM, Virtual Box, etc.",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127734105",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127790284,
      "node_id": "IC_kwDOABII585-04DM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127790284",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T18:27:30Z",
      "updated_at": "2024-05-23T18:27:30Z",
      "author_association": "MEMBER",
      "body": "> Since the data corruption only happens about once per week\r\n\r\nOnce per week is a lot and if this was a broader problem, I'd assume that more people were complaining. Given that you can consistently reproduce on different machines, this seems like a real bug is somewhere. However, Bitcoin Core is running fine in a lot of other places, so there has to be some hardware or configuration setting (or combination thereof) that triggers this bug on your side. It would be good to know which one it is.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127790284",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127797705,
      "node_id": "IC_kwDOABII585-053J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127797705",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T18:32:13Z",
      "updated_at": "2024-05-23T18:32:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "> There is a lot of memory pressure and paging when a block comes in\r\n\r\nCould you explain the paging in a bit more detail? Is the node constantly being bombarded with lots of simultaneous RPC calls (which ones?) or is some other interface used?\r\n\r\nAlso, from your log it appears that this happened while the node was catching up with the tip (almost but not completely synced yet), receiving blocks quickly. Is that typical, or does it usually happen when the node is synced and receives blocks as they are mined?",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127797705",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    }
  ]
}