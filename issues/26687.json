{
  "type": "issue",
  "issue": {
    "id": 1492157029,
    "node_id": "I_kwDOABII585Y8IJl",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26687",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26687/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26687/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26687/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/26687",
    "number": 26687,
    "state": "closed",
    "state_reason": "completed",
    "title": "Unable to create PSBT for legacy watchonly wallets in the GUI",
    "body": "A user reported to me that they are unable to create a PSBT with a legacy watchonly wallet when they use the GUI. They get an error \"The amount exceeds your balance\".\r\n\r\nI think the issue is that the GUI will retrieve the wallet's balance via `AvailableCoins` before calling `CreateTransaction`. This call to `AvailableCoins` is resulting in fewer coins being returned with recent changes to how `AvailableCoins` works, particularly with additional filtering of spendable coins and preset coins.\r\n\r\n***\r\n\r\nNote that this does not effect descriptor wallets. A workaround for this issue is to switch to using descriptor wallets. An existing legacy wallet can be turned into a descriptor wallet using the `migratewallet` RPC. However many watchonly legacy wallets are likely the result of importing descriptors via `importmulti`. For such wallets, I recommend creating a new descriptor wallet and re-importing the descriptors.",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 3,
    "closed_at": "2023-04-11T18:34:01Z",
    "created_at": "2022-12-12T15:33:38Z",
    "updated_at": "2023-04-11T18:34:01Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 8015515505,
      "node_id": "LE_lADOABII585Y8IJlzwAAAAHdww9x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8015515505",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-12T15:33:38Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-14T17:45:25Z",
      "updated_at": "2022-12-14T17:45:25Z",
      "source": {
        "issue": {
          "id": 1496702678,
          "node_id": "PR_kwDOABII585FdB03",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26699/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26699/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26699/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26699",
          "number": 26699,
          "state": "closed",
          "state_reason": null,
          "title": "wallet, gui: bugfix, getAvailableBalance skips selected coins",
          "body": "Fixes https://github.com/bitcoin-core/gui/issues/688 and https://github.com/bitcoin/bitcoin/issues/26687.\r\n\r\nFirst Issue Description (https://github.com/bitcoin-core/gui/issues/688):\r\n\r\nThe previous behavior for `getAvailableBalance`, when the coin control had selected coins, was to return the sum of them. Instead, we are currently returning the wallet's available total balance minus the selected coins total amount.\r\n\r\nReason:\r\nMissed to update the `GetAvailableBalance` function to include the coin control selected coins on #25685.\r\n\r\nContext:\r\nSince #25685 we skip the selected coins inside `AvailableCoins`, the reason is that there is no need to waste resources walking through the entire wallet's txes map just to get coins that could have gotten by just doing a simple `mapWallet.find`).\r\n\r\nPlaces Where This Generates Issues (only when the user manually select coins via coin control):\r\n1) The GUI balance check prior the transaction creation process.\r\n2) The GUI \"useAvailableBalance\" functionality.\r\n\r\nNote 1:\r\nAs the GUI uses a balance cache since https://github.com/bitcoin-core/gui/pull/598, this issue does not affect the regular spending process. Only arises when the user manually select coins.\r\n\r\nNote 2:\r\nAdded test coverage for the `useAvailableBalance` functionality.\r\n\r\n----------------------------------\r\n\r\nSecond Issue Description (https://github.com/bitcoin/bitcoin/issues/26687):\r\n\r\nAs we are using a cached balance on `WalletModel::getAvailableBalance`,\r\nthe function needs to include the watch-only available balance for wallets\r\nwith private keys disabled.\r\n",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/56",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/56",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/56/labels",
            "id": 7733968,
            "node_id": "MI_kwDOABII584AdgLQ",
            "number": 56,
            "state": "closed",
            "title": "25.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 38,
            "created_at": "2022-03-03T18:51:29Z",
            "updated_at": "2023-05-25T13:24:42Z",
            "closed_at": "2023-05-25T13:24:42Z"
          },
          "locked": false,
          "comments": 13,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26699",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26699.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26699.patch"
          },
          "closed_at": "2023-04-11T18:06:25Z",
          "created_at": "2022-12-14T14:07:01Z",
          "updated_at": "2023-05-27T01:46:30Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1352975156,
      "node_id": "IC_kwDOABII585QpMM0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1352975156",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-15T12:14:39Z",
      "updated_at": "2022-12-15T12:14:39Z",
      "author_association": "MEMBER",
      "body": "Fixed inside #26699.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/26687#issuecomment-1352975156",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26687"
    },
    {
      "event": "referenced",
      "id": 8906632182,
      "node_id": "REFE_lADOABII585Y8IJlzwAAAAIS4Gv2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8906632182",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "60d601d551e8d61ae715f5c6037fcddea479ef14",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/60d601d551e8d61ae715f5c6037fcddea479ef14",
      "created_at": "2023-04-02T15:32:27Z"
    },
    {
      "event": "commented",
      "id": 1494205436,
      "node_id": "IC_kwDOABII585ZD8P8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1494205436",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T12:08:53Z",
      "updated_at": "2023-04-03T12:08:53Z",
      "author_association": "MEMBER",
      "body": "I was able to reproduce this issue and indeed #26699 fixes it.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/26687#issuecomment-1494205436",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26687"
    },
    {
      "event": "referenced",
      "id": 8917106370,
      "node_id": "REFE_lADOABII585Y8IJlzwAAAAITgD7C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8917106370",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "cd98b717398f7b13ace91ea9efac9ce1e60b4d62",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/cd98b717398f7b13ace91ea9efac9ce1e60b4d62",
      "created_at": "2023-04-03T20:24:55Z"
    },
    {
      "event": "referenced",
      "id": 8974925807,
      "node_id": "REFE_lADOABII585Y8IJlzwAAAAIW8n_v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8974925807",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "65e384eddf371b11b327facb0ecacdf04e41ba06",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/65e384eddf371b11b327facb0ecacdf04e41ba06",
      "created_at": "2023-04-11T14:52:01Z"
    },
    {
      "event": "referenced",
      "id": 8976832795,
      "node_id": "REFE_lADOABII585Y8IJlzwAAAAIXD5kb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8976832795",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "27dcc07c08a77eba53ccc91e5521ff674f1bd198",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/27dcc07c08a77eba53ccc91e5521ff674f1bd198",
      "created_at": "2023-04-11T18:06:19Z"
    },
    {
      "event": "commented",
      "id": 1503887860,
      "node_id": "IC_kwDOABII585Zo4H0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1503887860",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T18:29:18Z",
      "updated_at": "2023-04-11T18:29:18Z",
      "author_association": "MEMBER",
      "body": "https://github.com/bitcoin/bitcoin/pull/26699 merged, can be closed.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/26687#issuecomment-1503887860",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26687"
    },
    {
      "event": "closed",
      "id": 8977036415,
      "node_id": "CE_lADOABII585Y8IJlzwAAAAIXErR_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8977036415",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T18:34:01Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-15T13:47:29Z",
      "updated_at": "2023-05-15T13:47:29Z",
      "source": {
        "issue": {
          "id": 1709675796,
          "node_id": "I_kwDOABII585l55UU",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27659",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27659/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27659/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27659/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/27659",
          "number": 27659,
          "state": "closed",
          "state_reason": "completed",
          "title": "\"Create Unsigned\" should not show the message: \"The amount exceeds you balance\" without suggesting alternatives",
          "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\n\"The amount exceeds you balance.\" error message after clicking \"Create Unsigned\" button even though there are funds on an address.\r\n\r\n![screenshot](https://github.com/bitcoin/bitcoin/assets/111286121/60f8ab66-e44d-4c99-9cd4-4fdd05c72595)\r\n\r\n\r\n### Expected behaviour\r\n\r\nA message about steps to workaround or solve the issue, e.g. \"Balance must be above 0 in order to create PSBT. Do you want to start rescanning Bitcoin blockchain in order to update the balance?\" (if that's the true reason).\r\n\r\nAlternatively, start \"Create Unsigned\" normally and optionally defer amount input.\r\n\r\n### Steps to reproduce\r\n\r\nPreconditions:\r\n1) A watch-only wallet is active.\r\n\r\nSteps:\r\n1) Start bitcoin-qt\r\n2) Select Send tab\r\n3) Fill the pay-to and amount fields\r\n4) Click \"Create Unsigned\" button\r\n\r\n### Relevant log output\r\n\r\nConsole:\r\n\r\ngetwalletinfo\r\n{\r\n  \"walletname\": \"test-watch_only\",\r\n  \"walletversion\": 169900,\r\n  \"format\": \"sqlite\",\r\n  \"balance\": 0.00000000,\r\n  \"unconfirmed_balance\": 0.00000000,\r\n  \"immature_balance\": 0.00000000,\r\n  \"txcount\": 0,\r\n  \"keypoolsize\": 0,\r\n  \"keypoolsize_hd_internal\": 0,\r\n  \"paytxfee\": 0.00000000,\r\n  \"private_keys_enabled\": false,\r\n  \"avoid_reuse\": false,\r\n  \"scanning\": false,\r\n  \"descriptors\": true,\r\n  \"external_signer\": false\r\n}\r\n\r\nlistdescriptors\r\n{\r\n  \"wallet_name\": \"test-watch_only\",\r\n  \"descriptors\": [\r\n    {\r\n      \"desc\": \"addr(tb1qgaxtdmsh6s7l4fpzlheq5g75nyhee3mfltszqm9n0u2538k30u7q8sp9gu)#8hxudg36\",\r\n      \"timestamp\": 1684136837,\r\n      \"active\": false\r\n    },\r\n    {\r\n      \"desc\": \"addr(tb1que0qlgeudvu3m2nkxne74j4809d87enawssnz6)#rcm6u9x4\",\r\n      \"timestamp\": 1684136521,\r\n      \"active\": false\r\n    },\r\n    {\r\n      \"desc\": \"addr(tb1qw2ded86wvzkmmze2yp0fy84d635gfgkv3y3gva)#lxflvchu\",\r\n      \"timestamp\": 1684136521,\r\n      \"active\": false\r\n    }\r\n  ]\r\n}\r\n[20230515debug.txt](https://github.com/bitcoin/bitcoin/files/11476241/20230515debug.txt)\r\n\r\nThere might have been similar issue reported: https://github.com/bitcoin-core/gui/issues/83\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nPre-built binaries\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\n25.0 rc1\r\n\r\n### Operating system and version\r\n\r\nWindows 11\r\n\r\n### Machine specifications\r\n\r\n_No response_",
          "user": {
            "login": "GregTonoski",
            "id": 111286121,
            "node_id": "U_kgDOBqIXaQ",
            "avatar_url": "https://avatars.githubusercontent.com/u/111286121?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GregTonoski",
            "html_url": "https://github.com/GregTonoski",
            "followers_url": "https://api.github.com/users/GregTonoski/followers",
            "following_url": "https://api.github.com/users/GregTonoski/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/GregTonoski/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/GregTonoski/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/GregTonoski/subscriptions",
            "organizations_url": "https://api.github.com/users/GregTonoski/orgs",
            "repos_url": "https://api.github.com/users/GregTonoski/repos",
            "events_url": "https://api.github.com/users/GregTonoski/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/GregTonoski/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 8,
          "closed_at": "2023-05-16T12:12:03Z",
          "created_at": "2023-05-15T09:20:24Z",
          "updated_at": "2023-05-16T12:12:04Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-15T13:48:58Z",
      "updated_at": "2023-05-15T13:48:58Z",
      "source": {
        "issue": {
          "id": 694083675,
          "node_id": "MDU6SXNzdWU2OTQwODM2NzU=",
          "url": "https://api.github.com/repos/bitcoin-core/gui/issues/83",
          "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
          "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/83/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/83/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/83/events",
          "html_url": "https://github.com/bitcoin-core/gui/issues/83",
          "number": 83,
          "state": "closed",
          "state_reason": "completed",
          "title": "Watch-only, balance not \"available\" for psbt",
          "body": "<!-- This issue tracker is only for technical issues related to Bitcoin Core.\r\n\r\nGeneral bitcoin questions and/or support requests are best directed to the Bitcoin StackExchange at https://bitcoin.stackexchange.com.\r\n\r\nFor reporting security issues, please read instructions at https://bitcoincore.org/en/contact/.\r\n\r\nIf the node is \"stuck\" during sync or giving \"block checksum mismatch\" errors, please ensure your hardware is stable by running memtest and observe CPU temperature with a load-test tool such as linpack before creating an issue! -->\r\n\r\n<!-- Describe the issue -->\r\n\r\n**Expected behavior**\r\n\r\nBe able to create a psbt with a watch-only balance.\r\n\r\n<!--- What behavior did you expect? -->\r\n\r\n**Actual behavior**\r\n\r\nEntering any amount yields an error message : \"The amount exceeds your balance\". \r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\n\r\n**To reproduce**\r\n\r\n- Created a new watch-only wallet with bitcoin-qt (with \"disable private keys\")\r\n- Imported an address (segwit p2sh) in the console\r\n- Rescanned the blockchain (in the console)\r\n- Bitcoin-qt sees my \"balance\" in the \"overview\" screen and in the \"send\" screen (bottom-right corner of the send screen)\r\n- In the send screen : if I click \"Use available balance\", the amount stays at zero.\r\n- No coins shown in \"Inputs\" (coin control feature).\r\n- I tried to send an amount that's less than my balance (in the address being watched in watch-only mode) but I only get the error message \"The amount exceeds your balance\". For example, trying to send 2000 sats with a low transaction fee (of 2123 sat/kB) on a watch-only balance of more than 50 000 sats.\r\n- I do see the \"create unsigned\" button in the bottom-left corner.\r\n![amount-exceeds-your-balance](https://user-images.githubusercontent.com/66416066/92305697-86bdcb80-ef57-11ea-9442-308de88478f1.png)\r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n\r\n**System information**\r\n\r\nXubuntu 18.04.5\r\nBitcoin Core 0.20.1\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n\r\n<!-- GUI-related issue? What is your operating system and its version? If Linux, what is your desktop environment and graphical shell? -->\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n",
          "user": {
            "login": "SimpleAristocrats",
            "id": 66416066,
            "node_id": "MDQ6VXNlcjY2NDE2MDY2",
            "avatar_url": "https://avatars.githubusercontent.com/u/66416066?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/SimpleAristocrats",
            "html_url": "https://github.com/SimpleAristocrats",
            "followers_url": "https://api.github.com/users/SimpleAristocrats/followers",
            "following_url": "https://api.github.com/users/SimpleAristocrats/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/SimpleAristocrats/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/SimpleAristocrats/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/SimpleAristocrats/subscriptions",
            "organizations_url": "https://api.github.com/users/SimpleAristocrats/orgs",
            "repos_url": "https://api.github.com/users/SimpleAristocrats/repos",
            "events_url": "https://api.github.com/users/SimpleAristocrats/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/SimpleAristocrats/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 2140649117,
              "node_id": "MDU6TGFiZWwyMTQwNjQ5MTE3",
              "url": "https://api.github.com/repos/bitcoin-core/gui/labels/Bug",
              "name": "Bug",
              "description": "Something isn't working",
              "color": "d73a4a",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 4,
          "closed_at": "2023-05-18T18:52:54Z",
          "created_at": "2020-09-05T13:12:48Z",
          "updated_at": "2023-05-18T18:52:54Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 9356917942,
      "node_id": "REFE_lADOABII585Y8IJlzwAAAAIttzy2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9356917942",
      "actor": {
        "login": "RandyMcMillan",
        "id": 152159,
        "node_id": "MDQ6VXNlcjE1MjE1OQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/152159?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RandyMcMillan",
        "html_url": "https://github.com/RandyMcMillan",
        "followers_url": "https://api.github.com/users/RandyMcMillan/followers",
        "following_url": "https://api.github.com/users/RandyMcMillan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/RandyMcMillan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/RandyMcMillan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/RandyMcMillan/subscriptions",
        "organizations_url": "https://api.github.com/users/RandyMcMillan/orgs",
        "repos_url": "https://api.github.com/users/RandyMcMillan/repos",
        "events_url": "https://api.github.com/users/RandyMcMillan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/RandyMcMillan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "7a3610f8ad420756081cbb98d60a58881ab0a034",
      "commit_url": "https://api.github.com/repos/RandyMcMillan/bitcoin/commits/7a3610f8ad420756081cbb98d60a58881ab0a034",
      "created_at": "2023-05-27T11:21:59Z"
    }
  ]
}