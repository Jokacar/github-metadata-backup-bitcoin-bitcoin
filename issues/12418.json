{
  "type": "issue",
  "issue": {
    "id": 296561083,
    "node_id": "MDU6SXNzdWUyOTY1NjEwODM=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/12418",
    "number": 12418,
    "state": "closed",
    "state_reason": "completed",
    "title": "signrawtransaction unable to sign p2sh-segwit multisig transaction",
    "body": "I'm working on a [paper multisig system](https://glacierprotocol.org), improving it to use p2sh-segwit instead of legacy p2sh. I'm using my own Linux build of Bitcoin Core tag v0.16.0rc3 and using bitcoin-cli to build transactions.\r\n\r\nI used `addmultisigaddress` to create a 2-of-4 p2sh-segwit address and funded it on testnet. I created a transaction to spend those coins using `createrawtransaction` and I'm attempting to sign it.\r\n\r\n# Actual behavior\r\nIf I provide no keys to `signrawtransaction` and let it use the wallet keys, everything works. But if I provide the keys explicitly, I get the error: \"Unable to sign input, invalid stack size (possibly missing key)\".\r\n\r\n# Expected behavior\r\nI expect `signrawtransaction` to be able to sign the transaction using the explicltly-provided keys. (For a paper wallet, the bitcoind wallet will not know the keys or the multisig address.)\r\n\r\nThis flow works as expected when I use type 'legacy' for the `addmultisigaddress`. It fails when I use type 'p2sh-segwit'.\r\n\r\nMy guess is that it assumes it's legacy p2sh and therefore the signature fails. Shouldn't bitcoind be able to figure out (based on the scriptPubKey and the redeemScript) that this is p2sh-segwit, and construct the appropriate signatures? Or is there a different/better way to use the CLI to accomplish this?\r\n\r\n# To recreate\r\n[This script](https://pastebin.com/2KLHkV9Y) shows the problem. The final `signrawtransaction` step should succeed. [[output]](https://pastebin.com/k5wwERLG)\r\n\r\n# Ugly workaround\r\nI could use `addmultisigaddress` to teach the wallet about the p2sh-segwit address, and `importprivkey` to teach it 2-of-4 keys, then use `signrawtransaction` without providing any keys. [This](https://pastebin.com/MMJhWCfP) seems to work [[output]](https://pastebin.com/M5gw7FkG) but is very ugly because at the time of signing, I only have 2 of 4 keys, so in order to run `addmultisigaddress` I have to decode the redeemScript and parse its \"asm\" field to find the 4 pubkeys.\r\n\r\n# Related\r\nSomewhat related issue, never merged: issue #11693 and its associated PR #11708\r\n",
    "user": {
      "login": "bitcoinhodler",
      "id": 31543633,
      "node_id": "MDQ6VXNlcjMxNTQzNjMz",
      "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/bitcoinhodler",
      "html_url": "https://github.com/bitcoinhodler",
      "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
      "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
      "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
      "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
      "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 10,
    "closed_at": "2018-02-28T18:36:26Z",
    "created_at": "2018-02-12T23:25:28Z",
    "updated_at": "2021-09-08T12:40:38Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 365101240,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTEwMTI0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365101240",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-12T23:40:32Z",
      "updated_at": "2018-02-12T23:40:32Z",
      "author_association": "MEMBER",
      "body": "I believe this issue is identical to #11708. In order for signrawtransaction to sign a P2SH-P2WSH-multisig output, it needs to know both the P2WSH script and the P2SH script.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-365101240",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "commented",
      "id": 365103690,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTEwMzY5MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365103690",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-12T23:53:33Z",
      "updated_at": "2018-02-12T23:53:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "But it should be able to figure out the P2SH script, as explained by @NicolasDorier on Nov 20, 2017 (I can't figure out how to make a link to his specific comment).\r\n\r\nThe current fix for #11708 would require that I provide an additional script to `signrawtransaction`, but where do I get that script? It's not provided to me by `addmultisigaddress`. If I'm going to need it to sign transactions, then it should be. But I shouldn't need it.\r\n\r\nThere are only two possibilities: either it is legacy, or it is p2sh-segwit. Looking at the redeemScript and the scriptPubKey, it can figure out which one it is without being told.\r\n\r\nI still think my approach should work. I should not have to provide both scripts. I think I understand why it doesn't work today, but that is a bug, not a feature.",
      "user": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-365103690",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "mentioned",
      "id": 1470626843,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQ3MDYyNjg0Mw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1470626843",
      "actor": {
        "login": "NicolasDorier",
        "id": 3020646,
        "node_id": "MDQ6VXNlcjMwMjA2NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NicolasDorier",
        "html_url": "https://github.com/NicolasDorier",
        "followers_url": "https://api.github.com/users/NicolasDorier/followers",
        "following_url": "https://api.github.com/users/NicolasDorier/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NicolasDorier/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NicolasDorier/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
        "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
        "repos_url": "https://api.github.com/users/NicolasDorier/repos",
        "events_url": "https://api.github.com/users/NicolasDorier/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-12T23:53:33Z"
    },
    {
      "event": "subscribed",
      "id": 1470626845,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0NzA2MjY4NDU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1470626845",
      "actor": {
        "login": "NicolasDorier",
        "id": 3020646,
        "node_id": "MDQ6VXNlcjMwMjA2NDY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3020646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/NicolasDorier",
        "html_url": "https://github.com/NicolasDorier",
        "followers_url": "https://api.github.com/users/NicolasDorier/followers",
        "following_url": "https://api.github.com/users/NicolasDorier/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/NicolasDorier/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/NicolasDorier/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/NicolasDorier/subscriptions",
        "organizations_url": "https://api.github.com/users/NicolasDorier/orgs",
        "repos_url": "https://api.github.com/users/NicolasDorier/repos",
        "events_url": "https://api.github.com/users/NicolasDorier/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/NicolasDorier/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-12T23:53:33Z"
    },
    {
      "event": "commented",
      "id": 365104740,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTEwNDc0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365104740",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-12T23:59:15Z",
      "updated_at": "2018-02-12T23:59:15Z",
      "author_association": "MEMBER",
      "body": "@bitcoinhodler In theory, yes, but that's not how the signing logic works at all. It sees a P2SH script, tries to find which redeemscript that hash corresponds to. If it finds that, it'll see a P2WSH program, and try to find which witness script the 256-bit hash corresponds to. If it finds that, it'll try to sign with it.\r\n\r\nYou're certainly right that right now the number of possible combinations is low, and it could just try all of them. I'm not convinced (either way) that this is the right approach though. It may become more complicated when more witness versions exist.\r\n\r\nIn any case, there's a clear shortcoming here and we should address it. `addmultisigaddress` should probbably return all redeemscripts involved, as just `listunspent` is not usable in your case (nor should it be needed).",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-365104740",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "mentioned",
      "id": 1470634249,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MTQ3MDYzNDI0OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1470634249",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-12T23:59:15Z"
    },
    {
      "event": "subscribed",
      "id": 1470634250,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDE0NzA2MzQyNTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1470634250",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-12T23:59:15Z"
    },
    {
      "event": "commented",
      "id": 365106898,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTEwNjg5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365106898",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-13T00:10:27Z",
      "updated_at": "2018-02-13T00:10:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "What if there were a way to tell `signrawtransaction` that this redeemScript I'm providing is a p2sh-segwit type?\r\n\r\nAnother potential change that would make my ugly workaround less ugly: provide a JSON list of pubkeys from `decodescript`, in addition to the addresses provided today. Then I wouldn't have to parse the asm field to recreate the multisig address in the wallet.\r\n\r\nAnd another potential change that would help me: have `decodescript` show the p2sh-segwit address associated with the decoded script, in addition to today's p2sh address. That way I could figure out for myself (since I know the address) which of the two types it is.",
      "user": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-365106898",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-13T00:18:17Z",
      "updated_at": "2018-02-13T00:18:17Z",
      "source": {
        "issue": {
          "id": 286593252,
          "node_id": "MDU6SXNzdWUyODY1OTMyNTI=",
          "url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol/issues/11",
          "repository_url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol",
          "labels_url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol/issues/11/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol/issues/11/comments",
          "events_url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol/issues/11/events",
          "html_url": "https://github.com/GlacierProtocol/GlacierProtocol/issues/11",
          "number": 11,
          "state": "closed",
          "state_reason": "completed",
          "title": "Create segwit transactions",
          "body": "Beyond using compressed keys (issue #1), further transaction cost reductions are possible using SegWit.\r\n\r\nI investigated this but found some issues. Bitcoin Core (as of 0.15.1) uses 'addwitnessaddress' to create a SegWit-compatible address, but this RPC command does not work on an offline node:\r\n\r\n    error code: -4\r\n    error message:\r\n    Segregated witness not enabled on network\r\n\r\nWhich isn't true, but since it doesn't have a network connection, it doesn't realize that.\r\n\r\nIt also seems that the API is in flux and [will be changing](https://bitcoin.stackexchange.com/questions/57832/how-to-generate-segwit-address#comment75083_57836) in a near-future release of Bitcoin Core.\r\n\r\nSo this issue is a placeholder for future work. When the Bitcoin Core API stabilizes and is usable offline, let's add SegWit support to Glacier to reduce the transaction costs.\r\n\r\nWe will want to make sure that the future SegWit-enabled Glacier can still withdraw bitcoins from addresses created using older Glacier versions without any additional hassle. Ideally the user will not have to know or care whether a given address is SegWit or not, except that transaction costs will be lower.",
          "user": {
            "login": "bitcoinhodler",
            "id": 31543633,
            "node_id": "MDQ6VXNlcjMxNTQzNjMz",
            "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bitcoinhodler",
            "html_url": "https://github.com/bitcoinhodler",
            "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
            "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
            "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
            "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
            "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "COLLABORATOR",
          "locked": false,
          "comments": 3,
          "closed_at": "2018-11-26T00:01:45Z",
          "created_at": "2018-01-07T19:39:36Z",
          "updated_at": "2018-11-26T00:01:45Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 365110188,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTExMDE4OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365110188",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-13T00:29:09Z",
      "updated_at": "2018-02-13T00:29:09Z",
      "author_association": "MEMBER",
      "body": "> What if there were a way to tell signrawtransaction that this redeemScript I'm providing is a p2sh-segwit type?\r\n\r\nThat sounds like a complexity the user shouldn't need to deal with. There should be a way to encapsulate all the information needed to sign (apart from the private key) out of addmultisigaddress and co, and pass it as a black box to signrawtransaction.\r\n\r\nI think either signrawtransaction should just infer it, or it comes in the form of a few more data fields to pass along.\r\n\r\n> Another potential change that would make my ugly workaround less ugly: provide a JSON list of pubkeys from decodescript, in addition to the addresses provided today. Then I wouldn't have to parse the asm field to recreate the multisig address in the wallet.\r\n\r\nI don't think decodescript is the best place for this. Giving information about arbitrary scripts will likely become increasingly difficult as more private scripting techniques appear. The right place to analyse a particular script is by the person who created it. It can either come as a side effect out of `addmultisigaddress`. In 0.16, `validateaddress` on any address you created yourself will also include a full analysis, including redeemscripts and public keys used.\r\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-365110188",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "commented",
      "id": 365113558,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTExMzU1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365113558",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-13T00:47:47Z",
      "updated_at": "2018-02-13T00:48:47Z",
      "author_association": "MEMBER",
      "body": "Could you try if this fixes things for you? It should make `signrawtransaction` deal with multisig script where only the inner redeemscript is passed (untested).\r\n\r\n```diff\r\n--- a/src/rpc/rawtransaction.cpp\r\n+++ b/src/rpc/rawtransaction.cpp\r\n@@ -848,6 +848,8 @@ UniValue signrawtransaction(const JSONRPCRequest& request)\r\n                     std::vector<unsigned char> rsData(ParseHexV(v, \"redeemScript\"));\r\n                     CScript redeemScript(rsData.begin(), rsData.end());\r\n                     tempKeystore.AddCScript(redeemScript);\r\n+                    // Automatically also add the P2WSH wrapped version of the script (to deal with P2SH-P2WSH).\r\n+                    tempKeystore.AddCScript(GetScriptForWitness(redeemScript));\r\n                 }\r\n             }\r\n         }\r\n```\r\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-365113558",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "labeled",
      "id": 1470710886,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE0NzA3MTA4ODY=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1470710886",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-13T01:10:18Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "referenced",
      "id": 1470805291,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzA4MDUyOTE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1470805291",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5c3d4a8f7e80656e445f550bce20975f69cf0b3f",
      "commit_url": "https://api.github.com/repos/bitcoinhodler/GlacierProtocol/commits/5c3d4a8f7e80656e445f550bce20975f69cf0b3f",
      "created_at": "2018-02-13T02:46:28Z"
    },
    {
      "event": "referenced",
      "id": 1470873001,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzA4NzMwMDE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1470873001",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "624d7eaf1932bc7c3d668008db593257dac3135b",
      "commit_url": "https://api.github.com/repos/bitcoinhodler/GlacierProtocol/commits/624d7eaf1932bc7c3d668008db593257dac3135b",
      "created_at": "2018-02-13T04:07:49Z"
    },
    {
      "event": "commented",
      "id": 365181106,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTE4MTEwNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365181106",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-13T08:06:32Z",
      "updated_at": "2018-02-13T08:06:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "I went ahead and implemented the \"ugly\" workaround I originally suggested, and it's not as ugly as I feared. I do have to parse the asm field of the decoded script, and then I run `addmultisigaddress` twice: once with type 'legacy' and once with 'p2sh-segwit' (since I don't know which type the user has provided me). After that, assuming I've used `importprivkey` with enough keys, `signrawtransaction` works without complaint for both types of scripts.\r\n\r\nMy immediate problem is solved, but it seems there's a usability or documentation issue here, at the very least.",
      "user": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-365181106",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "commented",
      "id": 365182279,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2NTE4MjI3OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/365182279",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-13T08:12:21Z",
      "updated_at": "2018-02-13T08:12:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "Just saw your suggested patch; I tried it and it does indeed solve my original issue.",
      "user": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-365182279",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-13T21:28:57Z",
      "updated_at": "2018-02-13T21:28:57Z",
      "source": {
        "issue": {
          "id": 296891602,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTY4OTYwNzcx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12427",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12427/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12427/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12427/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/12427",
          "number": 12427,
          "state": "closed",
          "state_reason": null,
          "title": "Make signrawtransaction accept P2SH-P2WSH redeemscripts",
          "body": "This is a quick fix for #12418, which is a regression in 0.16.\r\n\r\nIt permits specifying just the inner redeemscript to let `signrawtransaction` succeed. This inner redeemscript is already reported by `addmultisigaddress` & co.\r\n\r\n#11708 uses a different approach, where `listunspent` reports both inner & outer redeemscript, but requires both to be provided to `signrawtransaction`. Part of #11708 is still needed even in combination with this PR however, as currently the inner redeemscript isn't reported by `listunspent`.",
          "user": {
            "login": "sipa",
            "id": 548488,
            "node_id": "MDQ6VXNlcjU0ODQ4OA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sipa",
            "html_url": "https://github.com/sipa",
            "followers_url": "https://api.github.com/users/sipa/followers",
            "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
            "organizations_url": "https://api.github.com/users/sipa/orgs",
            "repos_url": "https://api.github.com/users/sipa/repos",
            "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sipa/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/30",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/30",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/30/labels",
            "id": 2626187,
            "node_id": "MDk6TWlsZXN0b25lMjYyNjE4Nw==",
            "number": 30,
            "state": "closed",
            "title": "0.16.0",
            "description": "This will be the release of segwit wallet. 🎉 ",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 70,
            "created_at": "2017-07-06T19:58:41Z",
            "updated_at": "2018-03-07T16:28:13Z",
            "closed_at": "2018-03-07T16:28:13Z"
          },
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/12427",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/12427",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/12427.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/12427.patch"
          },
          "closed_at": "2018-02-15T21:34:34Z",
          "created_at": "2018-02-13T21:28:57Z",
          "updated_at": "2021-09-08T11:51:32Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 1475019982,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzUwMTk5ODI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1475019982",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b8c236a5ad234e8f3e835be9838ae3ba64c8c930",
      "commit_url": "https://api.github.com/repos/bitcoinhodler/GlacierProtocol/commits/b8c236a5ad234e8f3e835be9838ae3ba64c8c930",
      "created_at": "2018-02-15T01:13:06Z"
    },
    {
      "event": "referenced",
      "id": 1475122969,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzUxMjI5Njk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1475122969",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "1e0e927ff6c53e891083e3f7a319a796a4d848da",
      "commit_url": "https://api.github.com/repos/bitcoinhodler/GlacierProtocol/commits/1e0e927ff6c53e891083e3f7a319a796a4d848da",
      "created_at": "2018-02-15T03:29:47Z"
    },
    {
      "event": "referenced",
      "id": 1475130439,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzUxMzA0Mzk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1475130439",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2263262e6522fab1a63419a953a5b3698b38be47",
      "commit_url": "https://api.github.com/repos/bitcoinhodler/GlacierProtocol/commits/2263262e6522fab1a63419a953a5b3698b38be47",
      "created_at": "2018-02-15T03:42:35Z"
    },
    {
      "event": "referenced",
      "id": 1476822620,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzY4MjI2MjA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1476822620",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3fa556aee2030e3b7e7609d9b11b4d6e5ff3ec2c",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3fa556aee2030e3b7e7609d9b11b4d6e5ff3ec2c",
      "created_at": "2018-02-15T21:34:36Z"
    },
    {
      "event": "referenced",
      "id": 1476973210,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0NzY5NzMyMTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1476973210",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "12c709a5d21fea9314fc7eb85fbfc614ebd57036",
      "commit_url": "https://api.github.com/repos/bitcoinhodler/GlacierProtocol/commits/12c709a5d21fea9314fc7eb85fbfc614ebd57036",
      "created_at": "2018-02-15T23:07:31Z"
    },
    {
      "event": "commented",
      "id": 369338010,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM2OTMzODAxMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/369338010",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-28T18:36:26Z",
      "updated_at": "2018-02-28T18:36:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "I confirm this is now fixed in v0.16.0.",
      "user": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-369338010",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "closed",
      "id": 1497387724,
      "node_id": "MDExOkNsb3NlZEV2ZW50MTQ5NzM4NzcyNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1497387724",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-02-28T18:36:26Z"
    },
    {
      "event": "referenced",
      "id": 1561782182,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE1NjE3ODIxODI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1561782182",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "1d2951faf194bfe3ae1f077a824aae0599904939",
      "commit_url": "https://api.github.com/repos/bitcoinhodler/GlacierProtocol/commits/1d2951faf194bfe3ae1f077a824aae0599904939",
      "created_at": "2018-04-06T21:22:58Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-11T17:33:34Z",
      "updated_at": "2018-04-11T17:33:34Z",
      "source": {
        "issue": {
          "id": 312147518,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTgwMDc0MzY4",
          "url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol/issues/28",
          "repository_url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol",
          "labels_url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol/issues/28/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol/issues/28/comments",
          "events_url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol/issues/28/events",
          "html_url": "https://github.com/GlacierProtocol/GlacierProtocol/pull/28",
          "number": 28,
          "state": "closed",
          "state_reason": null,
          "title": "Create segwit transactions",
          "body": "As discussed in #11, this PR changes GlacierScript to use SegWit for its cold-storage addresses. The benefit is lower-cost withdrawal transactions.\r\n# Motivation\r\nTransaction fees on the Bitcoin blockchain were sky-high a few months ago. A withdrawal from a single Glacier UTXO on January 7, 2018 (510 sat/B, $16585/BTC) would cost you $45 in fees. With this change (plus #10) that would have been about $19 instead.\r\n\r\nTransaction fees have dropped to negligible levels today, but who knows what they will be when the user withdraws from cold storage? Segwit must be enabled at deposit time, but the benefits come at withdrawal time.\r\n\r\n# Implementation\r\nNow that Bitcoin Core v0.16 has made Segwit easy, we can take advantage of that in GlacierScript to construct Segwit addresses by default. Except for lower-cost withdrawals, the end user will not see any difference. Therefore, no changes to the protocol documentation are required.\r\n\r\nIt's possible to construct a bech32 (native segwit p2wsh) cold-storage address instead of (or in addition to) the p2wsh-in-p2sh address like this does. I decided not to because not a lot of wallets can send to a bech32 address yet. That means we would need to also construct a backward-compatible p2wsh-in-p2sh address for compatibility. That gets messy to explain to the end user, and since the transaction size difference is minimal, I decided that was not worth the extra complications.\r\n\r\nPerhaps in the distant future when bech32 is universal, we can revisit this.\r\n\r\n# Upgrade guidance\r\nWhen this is released into an upcoming Glacier release, the release notes should explain that in order to take advantage of the cost savings, the user needs to (1) purchase two new USB keys of two different brands; (2) construct new APP USB keys with the new GlacierScript and Bitcoin Core; (3) execute the Deposit Protocol to create a new cold storage address; then (4) execute the Withdrawal Protocol on their previous cold-storage address to transfer their bitcoins to the new Segwit address. With transaction fees so low right now, this would be a great opportunity to move to Segwit so that you are better prepared for higher fees in the future.\r\n\r\n# Notes for reviewers\r\nThis is a big change, and I would recommend reviewing commit-by-commit. I've implemented this using principles of refactoring: if the feature you want to add cannot easily be made in the current code, first, refactor the code to make it easy to add the feature; then, add the feature.\r\n\r\nThe tests from #24 tell the story. I expect all tests to pass at every commit point. This makes it easy to distinguish refactorings from functional changes: did the tests change? If not, no change in functionality was intended or expected.\r\n\r\nThe two most important commits are therefore 93b3ed3 (switch to segwit) and 37e33d7 (correct fee calculation).\r\n\r\nYou can see that all the old withdrawal tests are still passing without changes, which demonstrates that this change is backward-compatible: the new GlacierScript can still withdraw from old versions of Glacier without any issues. The user doesn't have to know or care whether the inputs are segwit or not.",
          "user": {
            "login": "bitcoinhodler",
            "id": 31543633,
            "node_id": "MDQ6VXNlcjMxNTQzNjMz",
            "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bitcoinhodler",
            "html_url": "https://github.com/bitcoinhodler",
            "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
            "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
            "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
            "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
            "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "COLLABORATOR",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/GlacierProtocol/GlacierProtocol/pulls/28",
            "html_url": "https://github.com/GlacierProtocol/GlacierProtocol/pull/28",
            "diff_url": "https://github.com/GlacierProtocol/GlacierProtocol/pull/28.diff",
            "patch_url": "https://github.com/GlacierProtocol/GlacierProtocol/pull/28.patch"
          },
          "closed_at": "2018-07-03T21:43:05Z",
          "created_at": "2018-04-06T23:24:57Z",
          "updated_at": "2018-12-04T21:50:15Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 2025642010,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIwMjU2NDIwMTA=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2025642010",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "ac9708b1386e1e6c49ea15af657f3c2143dd604f",
      "commit_url": "https://api.github.com/repos/bitcoinhodler/GlacierProtocol/commits/ac9708b1386e1e6c49ea15af657f3c2143dd604f",
      "created_at": "2018-12-13T23:50:54Z"
    },
    {
      "event": "commented",
      "id": 449585997,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0OTU4NTk5Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/449585997",
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-22T17:29:15Z",
      "updated_at": "2018-12-22T17:29:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "@sipa do you think this same fix should be applied to `importmulti`? See my [question on Stack Exchange](https://bitcoin.stackexchange.com/questions/83102/how-to-import-p2wsh-in-p2sh-multisig-as-watch-only) which looks like a very similar problem. I can create a new issue if so.",
      "user": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/12418#issuecomment-449585997",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/12418"
    },
    {
      "event": "mentioned",
      "id": 2042180577,
      "node_id": "MDE0Ok1lbnRpb25lZEV2ZW50MjA0MjE4MDU3Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2042180577",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-22T17:29:16Z"
    },
    {
      "event": "subscribed",
      "id": 2042180578,
      "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDIwNDIxODA1Nzg=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2042180578",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-12-22T17:29:16Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "bitcoinhodler",
        "id": 31543633,
        "node_id": "MDQ6VXNlcjMxNTQzNjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoinhodler",
        "html_url": "https://github.com/bitcoinhodler",
        "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
        "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
        "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
        "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-12T20:26:33Z",
      "updated_at": "2019-02-12T20:26:33Z",
      "source": {
        "issue": {
          "id": 409444918,
          "node_id": "MDU6SXNzdWU0MDk0NDQ5MTg=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15392",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15392/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15392/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15392/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/15392",
          "number": 15392,
          "state": "closed",
          "state_reason": "completed",
          "title": "importmulti changes not backward compatible",
          "body": "In v0.17.1, importing a p2wsh-in-p2sh multisig address as watchonly+solvable requires importing it as two separate addresses, once with each of the two scripts. See my [question on StackExchange](https://bitcoin.stackexchange.com/q/83102).\r\n\r\nIn the current bitcoin master (d8794a78a887a920276c7124f1c46d69592c6c4e), this breaks, I suspect due to #14454. While that PR is a nice improvement, isn't it bad to break backward compatibility?\r\n\r\n# Problem\r\n\r\nI want to import a p2wsh-in-p2sh multisig address as watchonly+solvable. I run:\r\n\r\n```\r\nbitcoin-cli -testnet importmulti '[{\"redeemscript\": \"5221035a0cf2b8ad46945154d80b339f730ac0cdbc39a95550a95821adf6df6e6e3c9421038f339e9149fda8496360d689b5d6b4d66f8e64e28b1c89846efd0831512eab882103442945263f31819baf5799dc9595eba49b8f6674dadf21189f717abd630ab15053ae\", \"scriptPubKey\": {\"address\": \"2MvQKEWTdtH7uM5C72quuMukWNFkFYjm34N\"}, \"timestamp\": \"now\"}, {\"redeemscript\": \"0020d017965b0cae52a8b6f6e43b00118be27dae84b825959dcb77ca6b5310e53ea3\", \"scriptPubKey\": {\"address\": \"2MvQKEWTdtH7uM5C72quuMukWNFkFYjm34N\"}, \"timestamp\": \"now\"}]'\r\n```\r\n\r\nThe result comes back as:\r\n```\r\n[\r\n  {\r\n    \"success\": true,\r\n    \"warnings\": [\r\n      \"Importing as non-solvable: redeemScript does not match the scriptPubKey. If this is intentional, don't provide any keys, pubkeys, witnessscript, or redeemscript.\"\r\n    ]\r\n  },\r\n  {\r\n    \"success\": true,\r\n    \"warnings\": [\r\n      \"Importing as non-solvable: missing witnessscript. If this is intentional, don't provide any keys, pubkeys, witnessscript, or redeemscript.\"\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nAnd then `getaddressinfo` shows that it is not solvable:\r\n```\r\n{\r\n  \"address\": \"2MvQKEWTdtH7uM5C72quuMukWNFkFYjm34N\",\r\n  \"scriptPubKey\": \"a91422a07fe0ea8b8293eb336b9423f7e3958917924387\",\r\n  \"ismine\": false,\r\n  \"solvable\": false,\r\n  \"iswatchonly\": true,\r\n  \"isscript\": true,\r\n  \"iswitness\": false,\r\n  \"label\": \"\",\r\n  \"ischange\": false,\r\n  \"timestamp\": 1296688602,\r\n  \"labels\": [\r\n    {\r\n      \"name\": \"\",\r\n      \"purpose\": \"receive\"\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nFirstly, is it okay for the `importmulti` to report `success:true` when some of the provided information was ignored? That seems...not good.\r\n\r\nSecondly, how can I import this address in a way that will work on both v0.17.1 and (future) v0.18?\r\n\r\n# v0.17.1 behavior\r\n\r\nAddress is imported successfully:\r\n```\r\n[\r\n  {\r\n    \"success\": true\r\n  },\r\n  {\r\n    \"success\": true\r\n  }\r\n]\r\n```\r\n\r\nAnd the `getaddressinfo` shows everything I expect:\r\n```\r\n{\r\n  \"address\": \"2MvQKEWTdtH7uM5C72quuMukWNFkFYjm34N\",\r\n  \"scriptPubKey\": \"a91422a07fe0ea8b8293eb336b9423f7e3958917924387\",\r\n  \"ismine\": false,\r\n  \"iswatchonly\": true,\r\n  \"isscript\": true,\r\n  \"iswitness\": false,\r\n  \"script\": \"witness_v0_scripthash\",\r\n  \"hex\": \"0020d017965b0cae52a8b6f6e43b00118be27dae84b825959dcb77ca6b5310e53ea3\",\r\n  \"embedded\": {\r\n    \"isscript\": true,\r\n    \"iswitness\": true,\r\n    \"witness_version\": 0,\r\n    \"witness_program\": \"d017965b0cae52a8b6f6e43b00118be27dae84b825959dcb77ca6b5310e53ea3\",\r\n    \"script\": \"multisig\",\r\n    \"hex\": \"5221035a0cf2b8ad46945154d80b339f730ac0cdbc39a95550a95821adf6df6e6e3c9421038f339e9149fda8496360d689b5d6b4d66f8e64e28b1c89846efd0831512eab882103442945263f31819baf5799dc9595eba49b8f6674dadf21189f717abd630ab15053ae\",\r\n    \"sigsrequired\": 2,\r\n    \"pubkeys\": [\r\n      \"035a0cf2b8ad46945154d80b339f730ac0cdbc39a95550a95821adf6df6e6e3c94\",\r\n      \"038f339e9149fda8496360d689b5d6b4d66f8e64e28b1c89846efd0831512eab88\",\r\n      \"03442945263f31819baf5799dc9595eba49b8f6674dadf21189f717abd630ab150\"\r\n    ],\r\n    \"address\": \"tb1q6qtevkcv4ef23dhkusasqyvtuf76ap9cyk2emjmhef44xy89863s6yyfks\",\r\n    \"scriptPubKey\": \"0020d017965b0cae52a8b6f6e43b00118be27dae84b825959dcb77ca6b5310e53ea3\"\r\n  },\r\n  \"label\": \"\",\r\n  \"timestamp\": 1296688602,\r\n  \"labels\": [\r\n    {\r\n      \"name\": \"\",\r\n      \"purpose\": \"receive\"\r\n    }\r\n  ]\r\n}\r\n\r\n```\r\n",
          "user": {
            "login": "bitcoinhodler",
            "id": 31543633,
            "node_id": "MDQ6VXNlcjMxNTQzNjMz",
            "avatar_url": "https://avatars.githubusercontent.com/u/31543633?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/bitcoinhodler",
            "html_url": "https://github.com/bitcoinhodler",
            "followers_url": "https://api.github.com/users/bitcoinhodler/followers",
            "following_url": "https://api.github.com/users/bitcoinhodler/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/bitcoinhodler/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/bitcoinhodler/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/bitcoinhodler/subscriptions",
            "organizations_url": "https://api.github.com/users/bitcoinhodler/orgs",
            "repos_url": "https://api.github.com/users/bitcoinhodler/repos",
            "events_url": "https://api.github.com/users/bitcoinhodler/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/bitcoinhodler/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 12,
          "closed_at": "2019-02-16T22:44:25Z",
          "created_at": "2019-02-12T18:42:47Z",
          "updated_at": "2021-12-16T14:51:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "locked",
      "id": 5272046579,
      "node_id": "LOE_lADOABII584RrSm7zwAAAAE6PQvz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5272046579",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:40:38Z",
      "lock_reason": "resolved"
    }
  ]
}