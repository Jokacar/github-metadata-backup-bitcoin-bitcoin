{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758",
    "id": 1580526550,
    "node_id": "PR_kwDOABII585eNOvW",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28758",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28758.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28758.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28758",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28758/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/b5a60abe8783852f5b31bc1e63b5836530410e65",
    "number": 28758,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactors for subpackage evaluation",
    "user": {
      "login": "glozow",
      "id": 25183001,
      "node_id": "MDQ6VXNlcjI1MTgzMDAx",
      "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/glozow",
      "html_url": "https://github.com/glozow",
      "followers_url": "https://api.github.com/users/glozow/followers",
      "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
      "organizations_url": "https://api.github.com/users/glozow/orgs",
      "repos_url": "https://api.github.com/users/glozow/repos",
      "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/glozow/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is part of #27463. It splits off the more trivial changes from #26711 for ease of review, as requested in https://github.com/bitcoin/bitcoin/pull/26711#issuecomment-1786392253.\r\n\r\n- Split package sanitization in policy/packages.h into helper functions\r\n  - Add some tests for its quirks (https://github.com/bitcoin/bitcoin/pull/26711#discussion_r1340521597)\r\n- Rename `CheckPackage` to `IsPackageWellFormed`\r\n- Improve the `CreateValidTransaction` unit test utility to:\r\n  - Configure the target feerate and return the fee paid\r\n  - Signal BIP125 on transactions to enable RBF tests\r\n  - Allow the specification of multiple inputs and outputs\r\n- Move `CleanupTemporaryCoins` into its own function to be reused later without duplication",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      },
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      }
    ],
    "created_at": "2023-10-31T09:14:23Z",
    "updated_at": "2023-11-03T13:52:48Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "c21082b23f9ce75069bb3535297dfe3b55037f25",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "glozow:2023-10-26711-refactors",
      "ref": "2023-10-26711-refactors",
      "sha": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 244262754,
        "node_id": "MDEwOlJlcG9zaXRvcnkyNDQyNjI3NTQ=",
        "name": "bitcoin",
        "full_name": "glozow/bitcoin",
        "owner": {
          "login": "glozow",
          "id": 25183001,
          "node_id": "MDQ6VXNlcjI1MTgzMDAx",
          "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/glozow",
          "html_url": "https://github.com/glozow",
          "followers_url": "https://api.github.com/users/glozow/followers",
          "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
          "organizations_url": "https://api.github.com/users/glozow/orgs",
          "repos_url": "https://api.github.com/users/glozow/repos",
          "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/glozow/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/glozow/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/glozow/bitcoin",
        "archive_url": "https://api.github.com/repos/glozow/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/glozow/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/glozow/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/glozow/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/glozow/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/glozow/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/glozow/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/glozow/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/glozow/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/glozow/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/glozow/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/glozow/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/glozow/bitcoin/events",
        "forks_url": "https://api.github.com/repos/glozow/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/glozow/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/glozow/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/glozow/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/glozow/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/glozow/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/glozow/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/glozow/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/glozow/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/glozow/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/glozow/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/glozow/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/glozow/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/glozow/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/glozow/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/glozow/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:glozow/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/glozow/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/glozow/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/glozow/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/glozow/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/glozow/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/glozow/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/glozow/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/glozow/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/glozow/bitcoin/hooks",
        "svn_url": "https://github.com/glozow/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 10,
        "watchers_count": 10,
        "size": 233969,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-11-03T10:39:52Z",
        "created_at": "2020-03-02T02:31:56Z",
        "updated_at": "2023-08-30T16:39:28Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "eca2e430acf50f11da2220f56d13e20073a57c9b",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35918,
        "stargazers_count": 72018,
        "watchers_count": 72018,
        "size": 244239,
        "default_branch": "master",
        "open_issues_count": 627,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-11-03T13:52:05Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-11-03T10:52:24Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 281,
    "deletions": 86,
    "changed_files": 6,
    "commits": 4,
    "review_comments": 14,
    "comments": 1
  },
  "events": [
    {
      "event": "commented",
      "id": 1786805691,
      "node_id": "IC_kwDOABII585qgH27",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1786805691",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-31T09:14:26Z",
      "updated_at": "2023-11-03T13:52:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28758).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [dergoegge](https://github.com/bitcoin/bitcoin/pull/28758#pullrequestreview-1712337150), [instagibbs](https://github.com/bitcoin/bitcoin/pull/28758#pullrequestreview-1712736256) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26711](https://github.com/bitcoin/bitcoin/pull/26711) (validate package transactions with their in-package ancestor sets by glozow)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#issuecomment-1786805691",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28758"
    },
    {
      "event": "review_requested",
      "id": 10817876590,
      "node_id": "RRE_lADOABII5851a44uzwAAAAKEy7Ju",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10817876590",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-31T09:22:42Z",
      "requested_reviewer": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1705880534,
      "node_id": "PRR_kwDOABII585lravW",
      "url": null,
      "actor": null,
      "commit_id": "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#pullrequestreview-1705880534",
      "submitted_at": "2023-10-31T09:54:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10819960594,
      "node_id": "HRFPE_lADOABII5851a44uzwAAAAKE638S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10819960594",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-31T12:13:57Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-31T13:08:30Z",
      "updated_at": "2023-10-31T13:08:30Z",
      "source": {
        "issue": {
          "id": 1500046485,
          "node_id": "PR_kwDOABII585FocrT",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26711/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26711",
          "number": 26711,
          "state": "open",
          "state_reason": null,
          "title": "validate package transactions with their in-package ancestor sets",
          "body": "This contains everything to make mempool/validation logic ready for package relay (see #27463).\r\n\r\nDesign goals:\r\n- Be able to gracefully deal with any arbitrary list of transactions (these come from p2p)\r\n- Validate any ancestor package so that the incentive-compatible transactions end up in our mempool.\r\n  - If the transactions would be accepted individually, they should also be accepted through `AcceptPackage`. We don't want to accidentally reject things just because we happened to download them as a package.\r\n  - Bug prior to these changes: we required `IsChildWithParents` but if there were dependencies between the parents, we could end up (1) accepting a low-feerate child or (2) rejecting a high-feerate parent CPFPing another parent. See the \"interdependent parents\" test case for a specific example.\r\n- Be DoS-resistant.\r\n   - Avoid quadratic validation costs.\r\n   - Avoid loading a lot of stuff from disk, or loading repeatedly.\r\n\r\nA description of the package validation logic (originally https://github.com/bitcoin/bitcoin/pull/26711#issuecomment-1647523520):\r\n\r\n- Basic sanitization. Quit if it's too big, inconsistent, etc.\r\n- Linearize (Topological sort only)\r\n- **PreChecks loop** For each tx, grab UTXOs to calculate fees and filter out anything we should skip:\r\n    - If already in mempool (or same txid in mempool), mark as skip\r\n    - If missing inputs or conflict, record this failure and mark this and all descendants as skip.\r\n    - If no failures or TX_SINGLE_FAILURE, continue\r\n    - For some failures that we expect due to differing chainstates, skip these transactions and their descendants, but continue.\r\n    - Otherwise, record this failure and mark that we will `quit_early` (i.e. not do the Subpackage validation loop).\r\n- Refine our linearization using the fee information.\r\n- **Subpackage validation loop** For each transaction in the new linearized order:\r\n    - Get the transaction's ancestor subpackage.\r\n    - If the feerate of this transaction is insufficient, continue;\r\n    - If the feerate of this subpackage is insufficient, continue;\r\n    - Otherwise, try to submit the subpackage, using `AcceptSingleTransaction()` if it's just 1 tx\r\n    - if at any point we get a non-fee-related error, abort all.\r\n- Call `LimitMempoolSize`\r\n- Backfill results:\r\n    - If the transaction was in mempool, check to see if it's still there in case it was trimmed in `LimitMempoolSize`.\r\n    - Try to use results from the subpackage validation loop.\r\n    - If that doesn't exist (i.e. we quit early), use results from prechecks loop.\r\n    - If that doesn't exist (i.e. we quit early and we hadn't found a failure with it yet), fill with `TX_UNKNOWN`.\r\n\r\nThis means we will call `PreChecks` for each transaction 2 times (fewer if we quit early), and run all other validation checks at most 1 time. A transaction shouldn't be validated in the subpackage validation loop more than once.",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 34,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26711",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26711",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26711.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26711.patch"
          },
          "created_at": "2022-12-16T11:27:00Z",
          "updated_at": "2023-11-02T13:24:51Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 10820839273,
      "node_id": "LE_lADOABII5851a44uzwAAAAKE-Odp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10820839273",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-31T13:23:18Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "labeled",
      "id": 10821420110,
      "node_id": "LE_lADOABII5851a44uzwAAAAKFAcRO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10821420110",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-31T14:07:26Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10821514242,
      "node_id": "HRFPE_lADOABII5851a44uzwAAAAKFAzQC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10821514242",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-31T14:14:11Z"
    },
    {
      "event": "reviewed",
      "id": 1707949712,
      "node_id": "PRR_kwDOABII585lzT6Q",
      "url": null,
      "actor": null,
      "commit_id": "80cd897945193e03a4b0776537de219d12203373",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#pullrequestreview-1707949712",
      "submitted_at": "2023-11-01T10:50:15Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRhOWFjZWJhMjE3YmJkZWQ2OTA5ZjA2MTQ0ZWFhMWUxYTRlYmNiNjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/da9aceba217bbded6909f06144eaa1e1a4ebcb69",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/da9aceba217bbded6909f06144eaa1e1a4ebcb69",
      "tree": {
        "sha": "c3675b4dbe0177e43618688adf1d2e3e5501cc91",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c3675b4dbe0177e43618688adf1d2e3e5501cc91"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d51fb9caa622add96c6b594e162da5584eb927fc",
          "sha": "d51fb9caa622add96c6b594e162da5584eb927fc",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d51fb9caa622add96c6b594e162da5584eb927fc"
        }
      ],
      "message": "[refactor] move package checks into helper functions\n\nThis allows IsSorted() and IsConsistent() to be used by themselves.\nIsSorted() with a precomputed set is used so that we don't create this\nset multiple times.",
      "committer": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2023-11-01T17:21:54Z"
      },
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2022-09-16T15:49:24Z"
      },
      "sha": "da9aceba217bbded6909f06144eaa1e1a4ebcb69"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZmZjY0N2E3ZTBkODUwNDBhNjAzMzA0N2M1Y2Y4NGY4ZjIyYjFjNjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6ff647a7e0d85040a6033047c5cf84f8f22b1c65",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6ff647a7e0d85040a6033047c5cf84f8f22b1c65",
      "tree": {
        "sha": "9e82fe0ece6d7425e4124bd72830e0a74e590286",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9e82fe0ece6d7425e4124bd72830e0a74e590286"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/da9aceba217bbded6909f06144eaa1e1a4ebcb69",
          "sha": "da9aceba217bbded6909f06144eaa1e1a4ebcb69",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/da9aceba217bbded6909f06144eaa1e1a4ebcb69"
        }
      ],
      "message": "scripted-diff: rename CheckPackage to IsWellFormedPackage\n\n-BEGIN VERIFY SCRIPT-\nsed -i 's/CheckPackage(/IsWellFormedPackage(/g' $(git grep -l CheckPackage)\n-END VERIFY SCRIPT-",
      "committer": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2023-11-01T17:21:54Z"
      },
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2023-01-19T17:31:58Z"
      },
      "sha": "6ff647a7e0d85040a6033047c5cf84f8f22b1c65"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDEwYzBhODY3OGNkMjhlN2YwNzE1ZTZjZmEzZTY1MTkwM2U0YWQ0YWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/10c0a8678cd28e7f0715e6cfa3e651903e4ad4aa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/10c0a8678cd28e7f0715e6cfa3e651903e4ad4aa",
      "tree": {
        "sha": "fd0147f83c24eebc8a05edda7d5fec559dc3e449",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fd0147f83c24eebc8a05edda7d5fec559dc3e449"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6ff647a7e0d85040a6033047c5cf84f8f22b1c65",
          "sha": "6ff647a7e0d85040a6033047c5cf84f8f22b1c65",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6ff647a7e0d85040a6033047c5cf84f8f22b1c65"
        }
      ],
      "message": "[test util] CreateValidTransaction multi-in/out, configurable feerate, signal BIP125\n\nSupport the creation of a transaction with multiple specified inputs or\noutputs. Also accept a target feerate and return the fee paid.\n\nAlso, signal BIP125 by default - a subsequent commit needs to RBF\nsomething.\n\nCo-authored-by: Andrew Chow <achow101@gmail.com>",
      "committer": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2023-11-01T17:21:54Z"
      },
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2022-10-03T09:56:00Z"
      },
      "sha": "10c0a8678cd28e7f0715e6cfa3e651903e4ad4aa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI1YTYwYWJlODc4Mzg1MmY1YjMxYmMxZTYzYjU4MzY1MzA0MTBlNjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b5a60abe8783852f5b31bc1e63b5836530410e65",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b5a60abe8783852f5b31bc1e63b5836530410e65",
      "tree": {
        "sha": "1ff89a2125ceeba8ef4f64f7fa3cdb656690b665",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1ff89a2125ceeba8ef4f64f7fa3cdb656690b665"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/10c0a8678cd28e7f0715e6cfa3e651903e4ad4aa",
          "sha": "10c0a8678cd28e7f0715e6cfa3e651903e4ad4aa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/10c0a8678cd28e7f0715e6cfa3e651903e4ad4aa"
        }
      ],
      "message": "MOVEONLY: CleanupTemporaryCoins into its own function\n\nAvoid duplicate code. This will be used at the end of every\nAcceptSubPackage and after PreChecks loop in AcceptPackage.",
      "committer": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2023-11-01T17:21:54Z"
      },
      "author": {
        "name": "glozow",
        "email": "gloriajzhao@gmail.com",
        "date": "2023-10-04T07:42:28Z"
      },
      "sha": "b5a60abe8783852f5b31bc1e63b5836530410e65"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10835023277,
      "node_id": "HRFPE_lADOABII5851a44uzwAAAAKF0VWt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10835023277",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-01T17:26:58Z"
    },
    {
      "event": "reviewed",
      "id": 1708690726,
      "node_id": "PRR_kwDOABII585l2I0m",
      "url": null,
      "actor": null,
      "commit_id": "80cd897945193e03a4b0776537de219d12203373",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "I started going down the path of making Package a class and these member functions, but it touched hundreds of loc and made it really awkward to try to use it within AncestorPackage when we're checking if subsets are sorted",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#pullrequestreview-1708690726",
      "submitted_at": "2023-11-01T17:26:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-02T11:25:29Z",
      "updated_at": "2023-11-02T11:25:29Z",
      "source": {
        "issue": {
          "id": 1668056618,
          "node_id": "I_kwDOABII585jbIYq",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27463/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/27463",
          "number": 27463,
          "state": "open",
          "state_reason": null,
          "title": "Package Relay Project Tracking",
          "body": "This issue will be edited frequently to reflect the current status of the project.\r\n\r\n**What should I review now?**\r\n:point_down: :point_down: :point_down: :point_down: :point_down: :point_down: :point_down:\r\n#28758 #28762 #28764\r\n:point_up: :point_up: :point_up: :point_up: :point_up: :point_up: :point_up:\r\n\r\n**Mempool, Policy, Validation**\r\n- [x] Enable validation of multiple transactions in MemPoolAccept\r\n  - [x] Dependency: #21062\r\n  - [x] Dependency: #23381\r\n  - [x] Main feature 1/2: #20833\r\n  - [x] Main feature 2/2: #21800\r\n  - [x] Followup: #22084\r\n- [x] Enable package CPFP\r\n  - [x] Main feature 1/2: #22674\r\n  - [x] Followup: #24310\r\n  - [x] Followup: #23804\r\n  - [x] Main feature 2/2: #24152\r\n- [x] RPC access\r\n  - [x] #24836\r\n  - [x] #26646\r\n  - [x] #27609\r\n- [x] Bug fix: avoid the risk of below-minrelaytxfee transactions hanging around forever in the mempool (currently only possible through reorgs and replacements after package CPFP).\r\n   - [x] Don't ever allow v1 and v2 txs below minrelaytxfee (#26933)\r\n   - Alternative: #27018\r\n   - Alternative: (long-term) #27677.\r\n- [x] Bug fix: #28251\r\n- [x] Bug fix: #28471\r\n- [x] Bug fix: #28472\r\n- [ ] Fuzzzzzz\r\n  - [x] #28450\r\n  - [ ] #28764\r\n- [ ] Validate all ancestor packages (including unsorted). Enables us to safely handle anything we get from peers. \r\n  - [ ] Refactoring: #28758\r\n  - [ ] Dependency: #28762\r\n  - [ ] Main feature: #26711\r\n\r\n**P2P, Net Processing**\r\nFull implementation: #27742\r\n- [ ] BIP 331 (bitcoin/bips/pull/1382)\r\n- [ ] Milestone 1/3: Modularize transaction downloads. Make orphan handling more robust.\r\n  - [x] Dependency: #28199\r\n  - [x] Dependency: #28364\r\n  - [ ] Dependency: #28481\r\n  - [ ] Main feature 1/2: TxDownloadManager + testing\r\n  - [ ] Main feature 2/2: Retry orphan resolution with all announcers. #28031\r\n- [ ] Milestone 2/3: Ancestor package information\r\n  - Main feature: Negotiate package relay support with peers, gated by config flag (`sendpackages`). Request ancestor package information for orphans (`MSG_ANCPKGINFO`, `ancpkginfo`).\r\n  - WIP, see #27742\r\n- [ ] Milestone 3/3: Full package relay, enables CPFP'd transactions below mempool minimum feerates to propagate.\r\n  - Main feature 1/2: Introduce a mechanism for protecting orphan transactions from eviction.\r\n  - Main feature 2/2: Using package info, request (`getpkgtxns`), download (`pkgtxns`), and submit packages together.\r\n  - WIP, see #27742\r\n- [ ] Default `-packagerelay` config flag to true.\r\n\r\n**Additional Policy**\r\n- [ ] Add v3 rules that make transactions/packages easier to work with\r\n  - [ ] Main feature: #25038\r\n- [ ] Introduce a Miner Incentive Compatibility Score rule to RBF\r\n  - v3-only: #25038\r\n  - all transactions: #27677\r\n- [ ] Enable Package RBF. Enables things like LN to sign things 0-fee, add fees at broadcast, and avoid pinning attacks (assuming package relay is available)\r\n   - [x] Dependency: #22796 \r\n   - [x] Dependency: #22675 \r\n   - [x] Dependency: #22855\r\n   - [ ] Main feature (v3 only): #25038\r\n- [ ] Add Ephemeral Anchors rules for v3 transactions. Enables things like LN symmetry and 0-value anchors.\r\n  - [ ] Main feature: #26403\r\n\r\n\r\n<details><summary>Older stuff:</summary>\r\n\r\n\r\n- #16400 \r\n- #16401 \r\n- #14895 \r\n- #19621 \r\n- https://gist.github.com/sdaftuar/8756699bfcad4d3806ba9f3396d4e66a\r\n</details>",
          "user": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            },
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 12,
          "created_at": "2023-04-14T11:14:50Z",
          "updated_at": "2023-11-02T13:24:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1711387126,
      "node_id": "PRR_kwDOABII585mAbH2",
      "url": null,
      "actor": null,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#pullrequestreview-1711387126",
      "submitted_at": "2023-11-02T23:12:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
    },
    {
      "event": "reviewed",
      "id": 1712337150,
      "node_id": "PRR_kwDOABII585mEDD-",
      "url": null,
      "actor": null,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK b5a60abe8783852f5b31bc1e63b5836530410e65\r\n\r\nnit: the commit message in da9aceba217bbded6909f06144eaa1e1a4ebcb69 still has the old names",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#pullrequestreview-1712337150",
      "submitted_at": "2023-11-03T10:45:59Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
    },
    {
      "event": "reviewed",
      "id": 1712736256,
      "node_id": "PRR_kwDOABII585mFkgA",
      "url": null,
      "actor": null,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK b5a60abe8783852f5b31bc1e63b5836530410e65",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#pullrequestreview-1712736256",
      "submitted_at": "2023-11-03T13:52:45Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377326791",
      "pull_request_review_id": 1705880534,
      "id": 1377326791,
      "node_id": "PRRC_kwDOABII585SGFbH",
      "diff_hunk": "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 21,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "in_reply_to_id": null,
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: `IsSorted` does not convey what is being checked for sortedness.\r\n\r\n```suggestion\r\nbool IsPackageSorted(const Package& txns);\r\n```",
      "created_at": "2023-10-31T09:54:21Z",
      "updated_at": "2023-10-31T09:54:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377326791",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377326791"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377493306",
      "pull_request_review_id": 1706151209,
      "id": 1377493306,
      "node_id": "PRRC_kwDOABII585SGuE6",
      "diff_hunk": "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 21,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "in_reply_to_id": 1377326791,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok, renamed this to `IsTopoSortedPackage`, i.e. \"is a topologically sorted package\" to be more descriptive.",
      "created_at": "2023-10-31T12:14:07Z",
      "updated_at": "2023-10-31T12:14:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377493306",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377493306"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377497946",
      "pull_request_review_id": 1706159997,
      "id": 1377497946,
      "node_id": "PRRC_kwDOABII585SGvNa",
      "diff_hunk": "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 21,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "in_reply_to_id": 1377326791,
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "can you do the same for `IsConsistent`? e.g. `IsPackageConsistent`",
      "created_at": "2023-10-31T12:18:23Z",
      "updated_at": "2023-10-31T12:18:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377497946",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377497946"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377697411",
      "pull_request_review_id": 1706483972,
      "id": 1377697411,
      "node_id": "PRRC_kwDOABII585SHf6D",
      "diff_hunk": "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 21,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "in_reply_to_id": 1377326791,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Renamed to `IsConsistentPackage`",
      "created_at": "2023-10-31T14:38:19Z",
      "updated_at": "2023-10-31T14:38:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1377697411",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1377697411"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378307864",
      "pull_request_review_id": 1707452030,
      "id": 1378307864,
      "node_id": "PRRC_kwDOABII585SJ08Y",
      "diff_hunk": "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsSorted(const Package& txns);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 21,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "f60560bf39c031e0ba4b6e04baf3b6deb6cdc07f",
      "in_reply_to_id": 1377326791,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could alternatively make these member functions of `Package` ?",
      "created_at": "2023-11-01T01:29:56Z",
      "updated_at": "2023-11-01T01:29:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1378307864",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378307864"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378634066",
      "pull_request_review_id": 1707949712,
      "id": 1378634066,
      "node_id": "PRRC_kwDOABII585SLElS",
      "diff_hunk": "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsTopoSortedPackage(const Package& txns);\n+\n+/** IsTopoSortedPackage where a set of txids has been pre-populated. The set is assumed to be correct and\n+ * is mutated within this function (even if return value is false). */\n+bool IsTopoSortedPackage(const Package& txns, std::unordered_set<uint256, SaltedTxidHasher>& all_txids);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 25,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "80cd897945193e03a4b0776537de219d12203373",
      "in_reply_to_id": null,
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This can be dropped from the header, nothing is using it externally.",
      "created_at": "2023-11-01T10:35:28Z",
      "updated_at": "2023-11-01T10:50:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1378634066",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378634066"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378636413",
      "pull_request_review_id": 1707949712,
      "id": 1378636413,
      "node_id": "PRRC_kwDOABII585SLFJ9",
      "diff_hunk": "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsTopoSortedPackage(const Package& txns);\n+\n+/** IsTopoSortedPackage where a set of txids has been pre-populated. The set is assumed to be correct and\n+ * is mutated within this function (even if return value is false). */\n+bool IsTopoSortedPackage(const Package& txns, std::unordered_set<uint256, SaltedTxidHasher>& all_txids);\n+\n+/** Checks that these transactions don't conflict, i.e., spend the same prevout. This includes\n+ * checking that there are no duplicate transactions. Since these checks require looking at the inputs\n+ * of a transaction, returns false immediately if any transactions have empty vin.\n+ *\n+ * Does not check consistency of a transaction with oneself; does not check if a transaction spends\n+ * the same prevout multiple times (see bad-txns-inputs-duplicate in CheckTransaction()).\n+ *\n+ * @returns true if there are no conflicts. False if any two transactions spend the same prevout.\n+ * */\n+bool IsConsistentPackage(const Package& txns);\n+\n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n  * 2. The total weight cannot exceed MAX_PACKAGE_WEIGHT.\n  * 3. If any dependencies exist between transactions, parents must appear before children.\n  * 4. Transactions cannot conflict, i.e., spend the same inputs.\n  */\n-bool CheckPackage(const Package& txns, PackageValidationState& state);\n+bool IsPackageWellFormed(const Package& txns, PackageValidationState& state);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 45,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "80cd897945193e03a4b0776537de219d12203373",
      "in_reply_to_id": null,
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: the naming is slightly inconsistent now, it would be nicer if all the functions are either `IsPackage*` or `Is*Package` instead of a mix. Would also not be opposed to turning `Package` into a class and have these be member functions.",
      "created_at": "2023-11-01T10:38:07Z",
      "updated_at": "2023-11-01T14:07:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1378636413",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378636413"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378645903",
      "pull_request_review_id": 1707949712,
      "id": 1378645903,
      "node_id": "PRRC_kwDOABII585SLHeP",
      "diff_hunk": "@@ -73,9 +74,38 @@ BOOST_FIXTURE_TEST_CASE(package_sanitization_tests, TestChain100Setup)\n         package_duplicate_txids_empty.emplace_back(MakeTransactionRef(empty_tx));\n     }\n     PackageValidationState state_duplicates;\n-    BOOST_CHECK(!CheckPackage(package_duplicate_txids_empty, state_duplicates));\n+    BOOST_CHECK(!IsPackageWellFormed(package_duplicate_txids_empty, state_duplicates));\n     BOOST_CHECK_EQUAL(state_duplicates.GetResult(), PackageValidationResult::PCKG_POLICY);\n     BOOST_CHECK_EQUAL(state_duplicates.GetRejectReason(), \"package-contains-duplicates\");\n+    BOOST_CHECK(!IsConsistentPackage(package_duplicate_txids_empty));\n+\n+    // Packages can't have transactions spending the same prevout\n+    CMutableTransaction tx_zero_1;\n+    CMutableTransaction tx_zero_2;\n+    COutPoint same_prevout{InsecureRand256(), 0};\n+    tx_zero_1.vin.emplace_back(same_prevout);\n+    tx_zero_2.vin.emplace_back(same_prevout);\n+    // Different vouts (not the same tx)\n+    tx_zero_1.vout.emplace_back(CENT, P2WSH_OP_TRUE);\n+    tx_zero_2.vout.emplace_back(2 * CENT, P2WSH_OP_TRUE);\n+    Package package_conflicts{MakeTransactionRef(tx_zero_1), MakeTransactionRef(tx_zero_2)};\n+    BOOST_CHECK(!IsConsistentPackage(package_conflicts));\n+    // Transactions are considered sorted when they have no dependencies.\n+    BOOST_CHECK(IsTopoSortedPackage(package_conflicts));\n+    PackageValidationState state_conflicts;\n+    BOOST_CHECK(!IsPackageWellFormed(package_conflicts, state_conflicts));\n+    BOOST_CHECK_EQUAL(state_conflicts.GetResult(), PackageValidationResult::PCKG_POLICY);\n+    BOOST_CHECK_EQUAL(state_conflicts.GetRejectReason(), \"conflict-in-package\");\n+\n+    // IsConsistentPackage only cares about conflicts between transactions, not about a transaction\n+    // conflicting with itself (i.e. duplicate prevouts in vin).\n+    CMutableTransaction dup_tx;\n+    dup_tx.vin.emplace_back(InsecureRand256(), 0);\n+    dup_tx.vin.emplace_back(InsecureRand256(), 0);\n+    Package package_with_dup_tx;\n+    BOOST_CHECK(IsConsistentPackage(package_with_dup_tx));\n+    package_with_dup_tx.emplace_back(create_placeholder_tx(1, 1));\n+    BOOST_CHECK(IsConsistentPackage(package_with_dup_tx));",
      "path": "src/test/txpackage_tests.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "80cd897945193e03a4b0776537de219d12203373",
      "in_reply_to_id": null,
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n    CMutableTransaction dup_tx;\r\n    dup_tx.vin.emplace_back(uint256{}, 0);\r\n    dup_tx.vin.emplace_back(uint256{}, 0);\r\n    Package package_with_dup_tx{MakeTransactionRef(dup_tx)};\r\n    BOOST_CHECK(IsConsistentPackage(package_with_dup_tx));\r\n    package_with_dup_tx.emplace_back(create_placeholder_tx(1, 1));\r\n    BOOST_CHECK(IsConsistentPackage(package_with_dup_tx));\r\n```\r\n\r\n`dup_tx` is otherwise unused and does not conflict with itself.",
      "created_at": "2023-11-01T10:49:17Z",
      "updated_at": "2023-11-01T10:50:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1378645903",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1378645903"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": 102,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1379095337",
      "pull_request_review_id": 1708690726,
      "id": 1379095337,
      "node_id": "PRRC_kwDOABII585SM1Mp",
      "diff_hunk": "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsTopoSortedPackage(const Package& txns);\n+\n+/** IsTopoSortedPackage where a set of txids has been pre-populated. The set is assumed to be correct and\n+ * is mutated within this function (even if return value is false). */\n+bool IsTopoSortedPackage(const Package& txns, std::unordered_set<uint256, SaltedTxidHasher>& all_txids);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 25,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "80cd897945193e03a4b0776537de219d12203373",
      "in_reply_to_id": 1378634066,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "ok",
      "created_at": "2023-11-01T17:23:05Z",
      "updated_at": "2023-11-01T17:26:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1379095337",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1379095337"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1379095561",
      "pull_request_review_id": 1708690726,
      "id": 1379095561,
      "node_id": "PRRC_kwDOABII585SM1QJ",
      "diff_hunk": "@@ -49,13 +51,36 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsTopoSortedPackage(const Package& txns);\n+\n+/** IsTopoSortedPackage where a set of txids has been pre-populated. The set is assumed to be correct and\n+ * is mutated within this function (even if return value is false). */\n+bool IsTopoSortedPackage(const Package& txns, std::unordered_set<uint256, SaltedTxidHasher>& all_txids);\n+\n+/** Checks that these transactions don't conflict, i.e., spend the same prevout. This includes\n+ * checking that there are no duplicate transactions. Since these checks require looking at the inputs\n+ * of a transaction, returns false immediately if any transactions have empty vin.\n+ *\n+ * Does not check consistency of a transaction with oneself; does not check if a transaction spends\n+ * the same prevout multiple times (see bad-txns-inputs-duplicate in CheckTransaction()).\n+ *\n+ * @returns true if there are no conflicts. False if any two transactions spend the same prevout.\n+ * */\n+bool IsConsistentPackage(const Package& txns);\n+\n /** Context-free package policy checks:\n  * 1. The number of transactions cannot exceed MAX_PACKAGE_COUNT.\n  * 2. The total weight cannot exceed MAX_PACKAGE_WEIGHT.\n  * 3. If any dependencies exist between transactions, parents must appear before children.\n  * 4. Transactions cannot conflict, i.e., spend the same inputs.\n  */\n-bool CheckPackage(const Package& txns, PackageValidationState& state);\n+bool IsPackageWellFormed(const Package& txns, PackageValidationState& state);",
      "path": "src/policy/packages.h",
      "position": null,
      "original_position": 45,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "80cd897945193e03a4b0776537de219d12203373",
      "in_reply_to_id": 1378636413,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I made it iswellformedpackage",
      "created_at": "2023-11-01T17:23:14Z",
      "updated_at": "2023-11-01T17:26:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1379095561",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1379095561"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1379095637",
      "pull_request_review_id": 1708690726,
      "id": 1379095637,
      "node_id": "PRRC_kwDOABII585SM1RV",
      "diff_hunk": "@@ -73,9 +74,38 @@ BOOST_FIXTURE_TEST_CASE(package_sanitization_tests, TestChain100Setup)\n         package_duplicate_txids_empty.emplace_back(MakeTransactionRef(empty_tx));\n     }\n     PackageValidationState state_duplicates;\n-    BOOST_CHECK(!CheckPackage(package_duplicate_txids_empty, state_duplicates));\n+    BOOST_CHECK(!IsPackageWellFormed(package_duplicate_txids_empty, state_duplicates));\n     BOOST_CHECK_EQUAL(state_duplicates.GetResult(), PackageValidationResult::PCKG_POLICY);\n     BOOST_CHECK_EQUAL(state_duplicates.GetRejectReason(), \"package-contains-duplicates\");\n+    BOOST_CHECK(!IsConsistentPackage(package_duplicate_txids_empty));\n+\n+    // Packages can't have transactions spending the same prevout\n+    CMutableTransaction tx_zero_1;\n+    CMutableTransaction tx_zero_2;\n+    COutPoint same_prevout{InsecureRand256(), 0};\n+    tx_zero_1.vin.emplace_back(same_prevout);\n+    tx_zero_2.vin.emplace_back(same_prevout);\n+    // Different vouts (not the same tx)\n+    tx_zero_1.vout.emplace_back(CENT, P2WSH_OP_TRUE);\n+    tx_zero_2.vout.emplace_back(2 * CENT, P2WSH_OP_TRUE);\n+    Package package_conflicts{MakeTransactionRef(tx_zero_1), MakeTransactionRef(tx_zero_2)};\n+    BOOST_CHECK(!IsConsistentPackage(package_conflicts));\n+    // Transactions are considered sorted when they have no dependencies.\n+    BOOST_CHECK(IsTopoSortedPackage(package_conflicts));\n+    PackageValidationState state_conflicts;\n+    BOOST_CHECK(!IsPackageWellFormed(package_conflicts, state_conflicts));\n+    BOOST_CHECK_EQUAL(state_conflicts.GetResult(), PackageValidationResult::PCKG_POLICY);\n+    BOOST_CHECK_EQUAL(state_conflicts.GetRejectReason(), \"conflict-in-package\");\n+\n+    // IsConsistentPackage only cares about conflicts between transactions, not about a transaction\n+    // conflicting with itself (i.e. duplicate prevouts in vin).\n+    CMutableTransaction dup_tx;\n+    dup_tx.vin.emplace_back(InsecureRand256(), 0);\n+    dup_tx.vin.emplace_back(InsecureRand256(), 0);\n+    Package package_with_dup_tx;\n+    BOOST_CHECK(IsConsistentPackage(package_with_dup_tx));\n+    package_with_dup_tx.emplace_back(create_placeholder_tx(1, 1));\n+    BOOST_CHECK(IsConsistentPackage(package_with_dup_tx));",
      "path": "src/test/txpackage_tests.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "80cd897945193e03a4b0776537de219d12203373",
      "in_reply_to_id": 1378645903,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed",
      "created_at": "2023-11-01T17:23:19Z",
      "updated_at": "2023-11-01T17:26:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1379095637",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1379095637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": 102,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 109,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1380874443",
      "pull_request_review_id": 1711387126,
      "id": 1380874443,
      "node_id": "PRRC_kwDOABII585STnjL",
      "diff_hunk": "@@ -6,16 +6,77 @@\n #include <policy/policy.h>\n #include <primitives/transaction.h>\n #include <uint256.h>\n-#include <util/hasher.h>\n+#include <util/check.h>\n \n #include <algorithm>\n #include <cassert>\n #include <iterator>\n #include <memory>\n #include <numeric>\n-#include <unordered_set>\n \n-bool CheckPackage(const Package& txns, PackageValidationState& state)\n+/** IsTopoSortedPackage where a set of txids has been pre-populated. The set is assumed to be correct and\n+ * is mutated within this function (even if return value is false). */\n+bool IsTopoSortedPackage(const Package& txns, std::unordered_set<uint256, SaltedTxidHasher>& later_txids)\n+{\n+    // Avoid misusing this function: later_txids should contain the txids of txns.\n+    Assume(txns.size() == later_txids.size());\n+\n+    // later_txids always contains the txids of this transaction and the ones that come later in\n+    // txns. If any transaction's input spends a tx in that set, we've found a parent placed later\n+    // than its child.\n+    for (const auto& tx : txns) {\n+        for (const auto& input : tx->vin) {\n+            if (later_txids.find(input.prevout.hash) != later_txids.end()) {\n+                // The parent is a subsequent transaction in the package.\n+                return false;\n+            }\n+        }\n+        // Avoid misusing this function: later_txids must contain every tx.\n+        Assume(later_txids.erase(tx->GetHash()) == 1);\n+    }\n+\n+    // Avoid misusing this function: later_txids should have contained the txids of txns.\n+    Assume(later_txids.empty());\n+    return true;\n+}\n+\n+bool IsTopoSortedPackage(const Package& txns)\n+{\n+    std::unordered_set<uint256, SaltedTxidHasher> later_txids;\n+    std::transform(txns.cbegin(), txns.cend(), std::inserter(later_txids, later_txids.end()),\n+                   [](const auto& tx) { return tx->GetHash(); });\n+\n+    return IsTopoSortedPackage(txns, later_txids);\n+}\n+\n+bool IsConsistentPackage(const Package& txns)\n+{\n+    // Don't allow any conflicting transactions, i.e. spending the same inputs, in a package.\n+    std::unordered_set<COutPoint, SaltedOutpointHasher> inputs_seen;\n+    for (const auto& tx : txns) {\n+        if (tx->vin.empty()) {\n+            // This function checks consistency based on inputs, and we can't do that if there are\n+            // no inputs. Duplicate empty transactions are also not consistent with one another.\n+            // This doesn't create false negatives, as unconfirmed transactions are not allowed to\n+            // have no inputs.",
      "path": "src/policy/packages.cpp",
      "position": 59,
      "original_position": 59,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "da9aceba217bbded6909f06144eaa1e1a4ebcb69",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "“as unconfirmed transactions are not allowed to have no inputs at consensus validation (see CheckTransaction)\"",
      "created_at": "2023-11-02T23:09:35Z",
      "updated_at": "2023-11-02T23:12:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1380874443",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1380874443"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 61,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1380876016",
      "pull_request_review_id": 1711387126,
      "id": 1380876016,
      "node_id": "PRRC_kwDOABII585STn7w",
      "diff_hunk": "@@ -49,13 +51,32 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsTopoSortedPackage(const Package& txns);\n+\n+/** Checks that these transactions don't conflict, i.e., spend the same prevout. This includes\n+ * checking that there are no duplicate transactions. Since these checks require looking at the inputs\n+ * of a transaction, returns false immediately if any transactions have empty vin.\n+ *\n+ * Does not check consistency of a transaction with oneself; does not check if a transaction spends",
      "path": "src/policy/packages.h",
      "position": 27,
      "original_position": 27,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "da9aceba217bbded6909f06144eaa1e1a4ebcb69",
      "in_reply_to_id": null,
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don’t know what is mean by consistency of a transaction with oneself (e.g if txouts are under 0 or over `MAX_MONEY`) or you’re only implying “does not spend same prevout multiple times”. ",
      "created_at": "2023-11-02T23:12:05Z",
      "updated_at": "2023-11-02T23:12:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1380876016",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1380876016"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1381323292",
      "pull_request_review_id": 1712089855,
      "id": 1381323292,
      "node_id": "PRRC_kwDOABII585SVVIc",
      "diff_hunk": "@@ -49,13 +51,32 @@ using Package = std::vector<CTransactionRef>;\n \n class PackageValidationState : public ValidationState<PackageValidationResult> {};\n \n+/** If any direct dependencies exist between transactions (i.e. a child spending the output of a\n+ * parent), checks that all parents appear somewhere in the list before their respective children.\n+ * No other ordering is enforced. This function cannot detect indirect dependencies (e.g. a\n+ * transaction's grandparent if its parent is not present).\n+ * @returns true if sorted. False if any tx spends the output of a tx that appears later in txns.\n+ */\n+bool IsTopoSortedPackage(const Package& txns);\n+\n+/** Checks that these transactions don't conflict, i.e., spend the same prevout. This includes\n+ * checking that there are no duplicate transactions. Since these checks require looking at the inputs\n+ * of a transaction, returns false immediately if any transactions have empty vin.\n+ *\n+ * Does not check consistency of a transaction with oneself; does not check if a transaction spends",
      "path": "src/policy/packages.h",
      "position": 27,
      "original_position": 27,
      "commit_id": "b5a60abe8783852f5b31bc1e63b5836530410e65",
      "original_commit_id": "da9aceba217bbded6909f06144eaa1e1a4ebcb69",
      "in_reply_to_id": 1380876016,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't think it's that helpful to list more things this function *doesn't* check.",
      "created_at": "2023-11-03T08:59:55Z",
      "updated_at": "2023-11-03T08:59:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28758#discussion_r1381323292",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1381323292"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28758"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    }
  ]
}