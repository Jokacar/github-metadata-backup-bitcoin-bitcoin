{
  "type": "issue",
  "issue": {
    "id": 1496689556,
    "node_id": "I_kwDOABII585ZNauU",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26698",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26698/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26698/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26698/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/26698",
    "number": 26698,
    "state": "open",
    "state_reason": null,
    "title": "Unnecessary symbols being exported in `libbitcoinconsensus.so`",
    "body": "Initially it was reported in https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1142151675.\r\n\r\n```\r\n$ objdump -T ./bitcoin-24.0.1/lib/libbitcoinconsensus.so | grep bitcoinconsensus_\r\n000000000002b1f0 g    DF .text\t0000000000000037  Base        bitcoinconsensus_version\r\n000000000002cc30 g    DF .text\t000000000000006d  Base        bitcoinconsensus_verify_script\r\n000000000002cbe0 g    DF .text\t0000000000000049  Base        bitcoinconsensus_verify_script_with_amount\r\n```\r\n```\r\n$ objdump -T ./bitcoin-24.0.1/lib/libbitcoinconsensus.so | grep -v UND\r\n\r\n./bitcoin-24.0.1/lib/libbitcoinconsensus.so:     file format elf64-x86-64\r\n\r\nDYNAMIC SYMBOL TABLE:\r\n000000000002cd20  w   DF .text\t00000000000000ce  Base        _ZStplIcSt11char_traitsIcESaIcEENSt7__cxx1112basic_stringIT_T0_T1_EEOS8_PKS5_\r\n000000000003a000  w   DF .text\t00000000000001e5  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE17_M_realloc_insertIJS1_EEEvN9__gnu_cxx17__normal_iteratorIPS1_S3_EEDpOT_\r\n0000000000038590  w   DF .text\t0000000000000054  Base        _ZNSt19bad_optional_accessD0Ev\r\n0000000000022050  w   DF .text\t0000000000000034  Base        _ZNKSt5ctypeIcE8do_widenEc\r\n00000000001739a8  w   DO .data.rel.ro\t0000000000000018  Base        _ZTISt19bad_optional_access\r\n0000000000038540  w   DF .text\t0000000000000042  Base        _ZNSt19bad_optional_accessD2Ev\r\n00000000000285e0  w   DF .text\t0000000000000373  Base        _ZNSt20__uninitialized_copyILb0EE13__uninit_copyIN9__gnu_cxx17__normal_iteratorIPK5CTxInSt6vectorIS4_SaIS4_EEEEPS4_EET0_T_SD_SC_\r\n000000000002b1f0 g    DF .text\t0000000000000037  Base        bitcoinconsensus_version\r\n000000000000596f  w   DF .text\t0000000000000048  Base        _ZSt27__throw_bad_optional_accessv\r\n000000000002cc30 g    DF .text\t000000000000006d  Base        bitcoinconsensus_verify_script\r\n00000000000393c0  w   DF .text\t000000000000009e  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EED1Ev\r\n0000000000044890  w   DF .text\t00000000000000d4  Base        _ZNSt8__detail18__from_chars_digitIjEEbRPKcS2_RT_i\r\n00000000000397f0  w   DF .text\t0000000000000120  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE9push_backERKS1_\r\n0000000000039910  w   DF .text\t000000000000012d  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE8_M_eraseEN9__gnu_cxx17__normal_iteratorIPS1_S3_EES7_\r\n00000000001739f0  w   DO .data.rel.ro\t0000000000000028  Base        _ZTVSt19bad_optional_access\r\n000000000002cbe0 g    DF .text\t0000000000000049  Base        bitcoinconsensus_verify_script_with_amount\r\n0000000000038050  w   DF .text\t0000000000000039  Base        _ZNKSt19bad_optional_access4whatEv\r\n0000000000039460  w   DF .text\t00000000000000b6  Base        _ZNSt6vectorIhSaIhEEC2ERKS1_\r\n0000000000027ef0  w   DF .text\t0000000000000062  Base        _ZNSt12_Vector_baseIhSaIhEED2Ev\r\n0000000000023020  w   DF .text\t0000000000000073  Base        _ZNSt7__cxx1115basic_stringbufIcSt11char_traitsIcESaIcEED1Ev\r\n0000000000039460  w   DF .text\t00000000000000b6  Base        _ZNSt6vectorIhSaIhEEC1ERKS1_\r\n0000000000039520  w   DF .text\t00000000000002cd  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE17_M_realloc_insertIJRKS1_EEEvN9__gnu_cxx17__normal_iteratorIPS1_S3_EEDpOT_\r\n0000000000038690  w   DF .text\t0000000000000062  Base        _ZNSt6vectorIhSaIhEED1Ev\r\n0000000000056f10  w   DO .rodata\t0000000000000018  Base        _ZTSSt19bad_optional_access\r\n00000000000221e0  w   DF .text\t00000000000000d3  Base        _ZNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEC1IS3_EEPKcRKS3_\r\n0000000000044360  w   DF .text\t00000000000000dc  Base        _ZNSt8__detail18__from_chars_digitImEEbRPKcS2_RT_i\r\n00000000000444e0  w   DF .text\t0000000000000178  Base        _ZNSt6vectorISt4byteSaIS0_EE17_M_realloc_insertIJS0_EEEvN9__gnu_cxx17__normal_iteratorIPS0_S2_EEDpOT_\r\n00000000000440f0  w   DF .text\t00000000000000e2  Base        _ZNSt6vectorIhSaIhEE7reserveEm\r\n0000000000038540  w   DF .text\t0000000000000042  Base        _ZNSt19bad_optional_accessD1Ev\r\n0000000000039e80  w   DF .text\t0000000000000178  Base        _ZNSt6vectorIhSaIhEE17_M_realloc_insertIJhEEEvN9__gnu_cxx17__normal_iteratorIPhS1_EEDpOT_\r\n00000000000221e0  w   DF .text\t00000000000000d3  Base        _ZNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEC2IS3_EEPKcRKS3_\r\n000000000002d670  w   DF .text\t0000000000000373  Base        _ZNSt20__uninitialized_copyILb0EE13__uninit_copyIPK5CTxInPS2_EET0_T_S7_S6_\r\n000000000002d4a0  w   DF .text\t00000000000001cd  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE17_M_realloc_insertIJEEEvN9__gnu_cxx17__normal_iteratorIPS1_S3_EEDpOT_\r\n0000000000053964 g    DF .fini\t0000000000000000  Base        _fini\r\n0000000000004000 g    DF .init\t0000000000000000  Base        _init\r\n00000000000393c0  w   DF .text\t000000000000009e  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EED2Ev\r\n0000000000039b30  w   DF .text\t0000000000000160  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE13_M_insert_auxIS1_EEvN9__gnu_cxx17__normal_iteratorIPS1_S3_EEOT_\r\n0000000000039a40  w   DF .text\t00000000000000e3  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE8_M_eraseEN9__gnu_cxx17__normal_iteratorIPS1_S3_EE\r\n0000000000039c90  w   DF .text\t00000000000001e5  Base        _ZNSt6vectorIS_IhSaIhEESaIS1_EE17_M_default_appendEm\r\n00000000000230a0  w   DF .text\t0000000000000081  Base        _ZNSt7__cxx1115basic_stringbufIcSt11char_traitsIcESaIcEED0Ev\r\n0000000000027ef0  w   DF .text\t0000000000000062  Base        _ZNSt12_Vector_baseIhSaIhEED1Ev\r\n0000000000023020  w   DF .text\t0000000000000073  Base        _ZNSt7__cxx1115basic_stringbufIcSt11char_traitsIcESaIcEED2Ev\r\n0000000000038690  w   DF .text\t0000000000000062  Base        _ZNSt6vectorIhSaIhEED2Ev\r\n00000000000441e0  w   DF .text\t0000000000000178  Base        _ZNSt6vectorIhSaIhEE17_M_realloc_insertIJRKhEEEvN9__gnu_cxx17__normal_iteratorIPhS1_EEDpOT_\r\n0000000000043fc0  w   DF .text\t0000000000000129  Base        _ZStplIcSt11char_traitsIcESaIcEENSt7__cxx1112basic_stringIT_T0_T1_EERKS8_PKS5_\r\n\r\n\r\n```",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 1,
    "created_at": "2022-12-14T14:00:24Z",
    "updated_at": "2023-12-19T14:52:45Z"
  },
  "events": [
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-14T14:01:05Z",
      "updated_at": "2022-12-14T14:01:05Z",
      "source": {
        "issue": {
          "id": 1216293178,
          "node_id": "PR_kwDOABII58420cG9",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24994",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24994/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24994/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24994/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24994",
          "number": 24994,
          "state": "closed",
          "state_reason": null,
          "title": "build: Build `libbitcoinconsensus` from its own convenience library",
          "body": "This PR has the following 4 benefits:\r\n\r\n## First benefit\r\n\r\nThis PR prunes all of [unnecessary](https://github.com/bitcoin/bitcoin/pull/25020#issuecomment-1142151675) symbols being exported from `libbitcoinconsensus.so`:\r\n```\r\n$ objdump -T bitcoin-c28bb15a117e-x86_64-linux-gnu/bitcoin-c28bb15a117e/lib/libbitcoinconsensus.so.0 | grep -v UND\r\n\r\nbitcoin-c28bb15a117e-x86_64-linux-gnu/bitcoin-c28bb15a117e/lib/libbitcoinconsensus.so.0:     file format elf64-x86-64\r\n\r\nDYNAMIC SYMBOL TABLE:\r\n0000000000003000 g    DF .init\t0000000000000000  Base        _init\r\n0000000000045494 g    DF .fini\t0000000000000000  Base        _fini\r\n0000000000004de0 g    DF .text\t0000000000000037  Base        bitcoinconsensus_version\r\n0000000000005230 g    DF .text\t0000000000000049  Base        bitcoinconsensus_verify_script_with_amount\r\n0000000000005280 g    DF .text\t000000000000006d  Base        bitcoinconsensus_verify_script\r\n\r\n\r\n```\r\n\r\n## Second benefit\r\n\r\nIt fixes `libbitcoinconsensus` Windows builds with `DEBUG=1`.\r\n\r\nOn master (833add0f48b0fad84d7b8cf9373a349e7aef20b4):\r\n```\r\n$ ./autogen.sh\r\n$ ./configure --host=x86_64-w64-mingw32 CPPFLAGS='-D_GLIBCXX_DEBUG' --disable-bench --disable-fuzz-binary --disable-tests --disable-wallet --without-daemon --without-gui --without-utils\r\n$ make clean\r\n$ make\r\n...\r\n  CXXLD    libbitcoinconsensus.la\r\n/usr/bin/x86_64-w64-mingw32-ld: consensus/.libs/libbitcoinconsensus_la-merkle.o:/usr/lib/gcc/x86_64-w64-mingw32/10-posix/include/c++/x86_64-w64-mingw32/bits/gthr-default.h:749: undefined reference to `__imp_pthread_mutex_lock'\r\n/usr/bin/x86_64-w64-mingw32-ld: consensus/.libs/libbitcoinconsensus_la-merkle.o:/usr/lib/gcc/x86_64-w64-mingw32/10-posix/include/c++/x86_64-w64-mingw32/bits/gthr-default.h:779: undefined reference to `__imp_pthread_mutex_unlock'\r\n...\r\n```\r\n\r\nWith this PR:\r\n```\r\n$ ./autogen.sh\r\n$ ./configure --host=x86_64-w64-mingw32 CPPFLAGS='-D_GLIBCXX_DEBUG' --disable-bench --disable-fuzz-binary --disable-tests --disable-wallet --without-daemon --without-gui --without-utils\r\n$ make clean\r\n$ make\r\n# no errors\r\n```\r\n\r\nFrom `libstdc++` [docs](https://gcc.gnu.org/onlinedocs/libstdc++/manual/debug_mode_using.html):\r\n> Note that this flag [`-D_GLIBCXX_DEBUG`] changes the sizes and behavior of standard class templates such as `std::vector`, and therefore you can only link code compiled with debug mode and code compiled without debug mode if no instantiation of a container is passed between the two translation units.\r\n\r\nOn the master branch, a linker adds to binaries every specified object file. And it fails, for example, for https://github.com/bitcoin/bitcoin/blob/f58c1f1a446716a245ca204e2ac1a219455f1340/src/util/strencodings.h#L58-L59\r\nwhen building `libbitcoinconsensus-0.dll` which [in turn](https://www.sourceware.org/autobook/autobook/autobook_137.html)\r\n> effectively consists of two parts; the DLL itself which contains the shared object code, and an import library which consists of the stub functions which are actually linked into the executable, at a rate of one stub per entry point.\r\n\r\n## Third benefit\r\n\r\nThe resulted binaries got smaller because a linker only extracts from a convenience library those object files that are _actually_ referenced in the code being linked (that could be easy to verify by comparing `nm` outputs):\r\n\r\n- master (695ca641a4e3ae065121815a968c769198aa73de)\r\n```\r\n$ ls -l bitcoin-695ca641a4e3-x86_64-linux-gnu/bitcoin-695ca641a4e3/lib/libbitcoinconsensus.so.0.0.0 \r\n-rwxr-xr-x 1 hebasto hebasto 1517816 Jun  4 21:52 bitcoin-695ca641a4e3-x86_64-linux-gnu/bitcoin-695ca641a4e3/lib/libbitcoinconsensus.so.0.0.0\r\n```\r\n- this PR (4.3% smaller)\r\n```\r\n$ ls -l bitcoin-c28bb15a117e-x86_64-linux-gnu/bitcoin-c28bb15a117e/lib/libbitcoinconsensus.so.0.0.0 \r\n-rwxr-xr-x 1 hebasto hebasto 1452280 Apr 27 12:59 bitcoin-c28bb15a117e-x86_64-linux-gnu/bitcoin-c28bb15a117e/lib/libbitcoinconsensus.so.0.0.0\r\n```\r\n\r\n## Fourth benefit\r\n\r\nThis solution does not introduce another Libtool hack as a competitive one [does](https://github.com/bitcoin/bitcoin/issues/25008#issuecomment-1113964111).\r\n\r\n---\r\n\r\n#### Guix builds on `x86_64`:\r\n```\r\n$ find guix-build-$(git rev-parse --short=12 HEAD)/output/ -type f -print0 | env LC_ALL=C sort -z | xargs -r0 sha256sum\r\n6dbc71f90085bb785b88d6e0fabdfb49e4df01dddc7adcf36847eab1c39323c2  guix-build-c28bb15a117e/output/aarch64-linux-gnu/SHA256SUMS.part\r\n7892c618ad9d29f999528451dc894fd8b9647479bd38b7308d7ad4d687734a6b  guix-build-c28bb15a117e/output/aarch64-linux-gnu/bitcoin-c28bb15a117e-aarch64-linux-gnu-debug.tar.gz\r\nf161c35d495c33a558a049899ad3d782bfeb6ff33f2e5d0346b624339c7ed4d5  guix-build-c28bb15a117e/output/aarch64-linux-gnu/bitcoin-c28bb15a117e-aarch64-linux-gnu.tar.gz\r\n5898572c86b5b20e71e007e3b3759883e567df34200775aa7e8baf4787330b14  guix-build-c28bb15a117e/output/arm-linux-gnueabihf/SHA256SUMS.part\r\n94386f5febb0aa9e77e4bdd079cb550cda39c21d27deae64591bfbb3aa879d3d  guix-build-c28bb15a117e/output/arm-linux-gnueabihf/bitcoin-c28bb15a117e-arm-linux-gnueabihf-debug.tar.gz\r\n8cca048298f11ec932e07c7b5e239a0274b8345f5e048c03d22da2de73f2d2ca  guix-build-c28bb15a117e/output/arm-linux-gnueabihf/bitcoin-c28bb15a117e-arm-linux-gnueabihf.tar.gz\r\n9a11382e702e0f0635e17659664c11139015cbac9731c19a522bf893051e5ad9  guix-build-c28bb15a117e/output/arm64-apple-darwin/SHA256SUMS.part\r\n4e7eaa152d8671c40e661f62cee95a2dc4b03102faadf68e4996d4079673e1ae  guix-build-c28bb15a117e/output/arm64-apple-darwin/bitcoin-c28bb15a117e-arm64-apple-darwin-unsigned.dmg\r\n5fa820623ce24c5f866e4a7a585019a32e09aeede58457521d615f719b6c9ac9  guix-build-c28bb15a117e/output/arm64-apple-darwin/bitcoin-c28bb15a117e-arm64-apple-darwin-unsigned.tar.gz\r\n4b1d616e7a100fb225b8fd283ceb6045806ab108783fffcb7a761ccb101f7a7c  guix-build-c28bb15a117e/output/arm64-apple-darwin/bitcoin-c28bb15a117e-arm64-apple-darwin.tar.gz\r\n45eab8b3a4932163c0d3a27b5d1dbf06c3ddbc025409ce12674faddba974bbf0  guix-build-c28bb15a117e/output/dist-archive/bitcoin-c28bb15a117e.tar.gz\r\n87618c7fe2b3c34866bdb32b52486e4a76b960bf3dd8ba4febeb9477ea7e3a55  guix-build-c28bb15a117e/output/powerpc64-linux-gnu/SHA256SUMS.part\r\n60bbc756a733cd8f902652a2201a422236411ef23996972b7d407eb1a4768f2e  guix-build-c28bb15a117e/output/powerpc64-linux-gnu/bitcoin-c28bb15a117e-powerpc64-linux-gnu-debug.tar.gz\r\n643b3d279eb3bc021f1cb4d461ead0a4abb6c366101c0fc41a99b7da6ea21ca1  guix-build-c28bb15a117e/output/powerpc64-linux-gnu/bitcoin-c28bb15a117e-powerpc64-linux-gnu.tar.gz\r\n0a715a8e37a749a627a09f022aad4e1b5bd8c925d24ac714c7c68223b5a1afb4  guix-build-c28bb15a117e/output/powerpc64le-linux-gnu/SHA256SUMS.part\r\n598eedd190b26a32ebe836eb6cb5ebd7b040d5fe9b0d514d62e6397f8ac32973  guix-build-c28bb15a117e/output/powerpc64le-linux-gnu/bitcoin-c28bb15a117e-powerpc64le-linux-gnu-debug.tar.gz\r\n5ca09731ecb34a37166cbaefbcd956eb1eba32255e7113309c720c4fe6afe8c4  guix-build-c28bb15a117e/output/powerpc64le-linux-gnu/bitcoin-c28bb15a117e-powerpc64le-linux-gnu.tar.gz\r\n0b30ecdc2a34605c7f5ca320e02d4acc13cc0a79fb6bf16795550950c45d4205  guix-build-c28bb15a117e/output/riscv64-linux-gnu/SHA256SUMS.part\r\n9a4ef88387e75f8024630f600789b905bb5e0ebca695cf52dd8e43d382eba08c  guix-build-c28bb15a117e/output/riscv64-linux-gnu/bitcoin-c28bb15a117e-riscv64-linux-gnu-debug.tar.gz\r\nd6efeea1aab7ec4d5cf44e2687ba998c3be950d802b8932f807c30c223a8ef06  guix-build-c28bb15a117e/output/riscv64-linux-gnu/bitcoin-c28bb15a117e-riscv64-linux-gnu.tar.gz\r\n30fc887a3507ea8762021b567b4ef4b88a8a247c3cbb5612ee440aee3ecd7806  guix-build-c28bb15a117e/output/x86_64-apple-darwin/SHA256SUMS.part\r\nce5b00636bbc350c03bdb768bb644bc2acc4443e5b5e21d5ec8382129043e06b  guix-build-c28bb15a117e/output/x86_64-apple-darwin/bitcoin-c28bb15a117e-x86_64-apple-darwin-unsigned.dmg\r\n8d604959ee976ae6c792a8df19fd481f798bfb2290d2bb9b4fd2c383e1980339  guix-build-c28bb15a117e/output/x86_64-apple-darwin/bitcoin-c28bb15a117e-x86_64-apple-darwin-unsigned.tar.gz\r\n029985c80ec64e156612b61b89c8499ecd3f5f81a38660b7636094772a361f2a  guix-build-c28bb15a117e/output/x86_64-apple-darwin/bitcoin-c28bb15a117e-x86_64-apple-darwin.tar.gz\r\nebf0c0a4de026fffc85bdc203adcddf7dddb3b7e290e49db458e3f5e7100d52f  guix-build-c28bb15a117e/output/x86_64-linux-gnu/SHA256SUMS.part\r\ndec8a0fb339a40b7e3fe05fc95b0c0de368b37f5ee53d76ac3631af7ac386ad4  guix-build-c28bb15a117e/output/x86_64-linux-gnu/bitcoin-c28bb15a117e-x86_64-linux-gnu-debug.tar.gz\r\n77472639784a37b22a97da3893e9288b009770250f2ae773880c8406b9f02464  guix-build-c28bb15a117e/output/x86_64-linux-gnu/bitcoin-c28bb15a117e-x86_64-linux-gnu.tar.gz\r\n37c60fce475b0b788e859926fe51151519feeab0dd16b83361c967c4a229e687  guix-build-c28bb15a117e/output/x86_64-w64-mingw32/SHA256SUMS.part\r\n321051dbdd456ead04a295bcc1545d91ec30a70dbc5b2655dde0c64babfa454b  guix-build-c28bb15a117e/output/x86_64-w64-mingw32/bitcoin-c28bb15a117e-win64-debug.zip\r\n84acb869ce0ce2f53564b617464e9cb5086761c137115d5eb6e8b3e94ce5b808  guix-build-c28bb15a117e/output/x86_64-w64-mingw32/bitcoin-c28bb15a117e-win64-setup-unsigned.exe\r\n86fbf61f2a208510b3fdda92bb0c0d6489605d6ac54e676cd85e8f06f4f90d5a  guix-build-c28bb15a117e/output/x86_64-w64-mingw32/bitcoin-c28bb15a117e-win64-unsigned.tar.gz\r\n4d6f4e9d3ba152033b484e6c0037047264c9d3dacf9a6c874f597c2b94aba8ec  guix-build-c28bb15a117e/output/x86_64-w64-mingw32/bitcoin-c28bb15a117e-win64.zip\r\n```\r\n\r\n---\r\n\r\nFixes bitcoin/bitcoin#19772.\r\nFixes bitcoin/bitcoin#26698.",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 192202000,
              "node_id": "MDU6TGFiZWwxOTIyMDIwMDA=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Consensus",
              "name": "Consensus",
              "color": "009800",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24994",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24994",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24994.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24994.patch"
          },
          "closed_at": "2023-02-23T10:49:54Z",
          "created_at": "2022-04-26T17:54:34Z",
          "updated_at": "2023-12-19T14:59:50Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-23T14:34:01Z",
      "updated_at": "2023-02-23T14:34:01Z",
      "source": {
        "issue": {
          "id": 1595856511,
          "node_id": "PR_kwDOABII585KjbMa",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27146",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27146/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27146/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27146/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27146",
          "number": 27146,
          "state": "closed",
          "state_reason": null,
          "title": "Fix various libbitcoinkernel DLL build problems",
          "body": "Fixes #25008. \r\nFixes #19772.\r\n\r\n1. Fixup the build defines so that exports are clean.\r\n2. Work around a libtool issue wrt dependency calculation\r\n3. Simplify everything by only ever building in-tree bitcoin-chainstate against a static libbitcoinkernel\r\n4. Remove Windows-only hack that disabled dll creation",
          "user": {
            "login": "theuni",
            "id": 417043,
            "node_id": "MDQ6VXNlcjQxNzA0Mw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/theuni",
            "html_url": "https://github.com/theuni",
            "followers_url": "https://api.github.com/users/theuni/followers",
            "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
            "organizations_url": "https://api.github.com/users/theuni/orgs",
            "repos_url": "https://api.github.com/users/theuni/repos",
            "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/theuni/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/56",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/56",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/56/labels",
            "id": 7733968,
            "node_id": "MI_kwDOABII584AdgLQ",
            "number": 56,
            "state": "closed",
            "title": "25.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 38,
            "created_at": "2022-03-03T18:51:29Z",
            "updated_at": "2023-05-25T13:24:42Z",
            "closed_at": "2023-05-25T13:24:42Z"
          },
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27146",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27146",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27146.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27146.patch"
          },
          "closed_at": "2023-02-27T14:42:00Z",
          "created_at": "2023-02-22T21:26:10Z",
          "updated_at": "2023-09-20T04:21:01Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-16T21:05:26Z",
      "updated_at": "2023-12-16T21:05:26Z",
      "source": {
        "issue": {
          "id": 1967082359,
          "node_id": "PR_kwDOCIlA6s5eDWXF",
          "url": "https://api.github.com/repos/hebasto/bitcoin/issues/41",
          "repository_url": "https://api.github.com/repos/hebasto/bitcoin",
          "labels_url": "https://api.github.com/repos/hebasto/bitcoin/issues/41/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/hebasto/bitcoin/issues/41/comments",
          "events_url": "https://api.github.com/repos/hebasto/bitcoin/issues/41/events",
          "html_url": "https://github.com/hebasto/bitcoin/pull/41",
          "number": 41,
          "state": "open",
          "state_reason": null,
          "title": "cmake: Build `libbitcoinconsensus` library",
          "body": "New CMake variables that affect the build system configuration:\r\n- `BUILD_BITCOINCONSENSUS_LIB` (Bitcoin Core specific)\r\n- `BUILD_SHARED_LIBS` (see CMake [docs](https://cmake.org/cmake/help/latest/variable/BUILD_SHARED_LIBS.html))\r\n\r\nThis PR uses the same approach as the secp256k1 repo [does](https://github.com/bitcoin-core/secp256k1/pull/1230), which differs from the current one in the master branch.\r\n\r\nAlso see:\r\n- https://github.com/hebasto/bitcoin/pull/32#discussion_r1366094140\r\n- https://github.com/bitcoin-core/secp256k1/pull/1113#discussion_r1128702492",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "OWNER",
          "locked": false,
          "comments": 48,
          "pull_request": {
            "url": "https://api.github.com/repos/hebasto/bitcoin/pulls/41",
            "html_url": "https://github.com/hebasto/bitcoin/pull/41",
            "diff_url": "https://github.com/hebasto/bitcoin/pull/41.diff",
            "patch_url": "https://github.com/hebasto/bitcoin/pull/41.patch"
          },
          "created_at": "2023-10-29T17:28:00Z",
          "updated_at": "2023-12-18T20:16:11Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1862877305,
      "node_id": "IC_kwDOABII585vCUB5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1862877305",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-19T14:37:06Z",
      "updated_at": "2023-12-19T14:52:45Z",
      "author_association": "MEMBER",
      "body": "The underlying problem is described in https://gcc.gnu.org/bugzilla/show_bug.cgi?id=36022, and it was not considered as a bug.\r\n\r\nI think that moving code that uses C++ template functions/classes out from the `bitcoinconsensus.{h,cpp}` compilation unit, which were suggested in #24994, is a step in the right direction.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/26698#issuecomment-1862877305",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26698"
    }
  ]
}