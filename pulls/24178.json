{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178",
    "id": 833442695,
    "node_id": "PR_kwDOABII584xrVOH",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/24178",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/24178.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/24178.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/a35f963edf1a14ee572abea106fb0147575e4694",
    "number": 24178,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "p2p: Respond to getheaders if we have sufficient chainwork",
    "user": {
      "login": "sdaftuar",
      "id": 7463573,
      "node_id": "MDQ6VXNlcjc0NjM1NzM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sdaftuar",
      "html_url": "https://github.com/sdaftuar",
      "followers_url": "https://api.github.com/users/sdaftuar/followers",
      "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
      "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
      "repos_url": "https://api.github.com/users/sdaftuar/repos",
      "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Previously, we would check to see if we were in IBD and ignore getheaders requests accordingly. However, the IBD criteria -- an optimization mostly targeted at behavior when we have peers serving us many blocks we need to download -- is difficult to reason about in edge-case scenarios, such as if the network were to go a long time without any blocks found and nodes are getting restarted during that time.\r\n\r\nTo make things simpler to reason about, just use `nMinimumChainWork` as our anti-DoS threshold for responding to a getheaders request; as long as our chain has that much work, it should be fine to respond to a peer asking for our headers (and this should allow such a peer to request blocks from us if needed).",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      }
    ],
    "created_at": "2022-01-27T13:50:49Z",
    "updated_at": "2023-05-31T10:04:22Z",
    "closed_at": "2022-05-31T10:08:07Z",
    "mergeable_state": "unknown",
    "merged_at": "2022-05-31T10:08:07Z",
    "merge_commit_sha": "5f65afff9c4c735d607a69fc3d18b4ecadbf3ba9",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "sdaftuar:2022-01-headers-response-requires-minchainwork",
      "ref": "2022-01-headers-response-requires-minchainwork",
      "sha": "a35f963edf1a14ee572abea106fb0147575e4694",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 28761781,
        "node_id": "MDEwOlJlcG9zaXRvcnkyODc2MTc4MQ==",
        "name": "bitcoin",
        "full_name": "sdaftuar/bitcoin",
        "owner": {
          "login": "sdaftuar",
          "id": 7463573,
          "node_id": "MDQ6VXNlcjc0NjM1NzM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sdaftuar",
          "html_url": "https://github.com/sdaftuar",
          "followers_url": "https://api.github.com/users/sdaftuar/followers",
          "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
          "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
          "repos_url": "https://api.github.com/users/sdaftuar/repos",
          "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/sdaftuar/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sdaftuar/bitcoin",
        "archive_url": "https://api.github.com/repos/sdaftuar/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sdaftuar/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sdaftuar/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sdaftuar/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sdaftuar/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sdaftuar/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sdaftuar/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sdaftuar/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sdaftuar/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sdaftuar/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sdaftuar/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sdaftuar/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sdaftuar/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sdaftuar/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sdaftuar/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sdaftuar/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sdaftuar/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sdaftuar/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sdaftuar/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sdaftuar/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sdaftuar/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sdaftuar/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sdaftuar/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sdaftuar/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sdaftuar/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sdaftuar/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sdaftuar/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sdaftuar/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sdaftuar/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sdaftuar/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sdaftuar/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sdaftuar/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sdaftuar/bitcoin/hooks",
        "svn_url": "https://github.com/sdaftuar/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 247679,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-07-24T20:27:09Z",
        "created_at": "2015-01-04T02:52:13Z",
        "updated_at": "2023-08-01T03:17:33Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "c44e734dca64a15fae92255a5d848c04adaad2fa",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 672,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T23:07:27Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 37,
    "deletions": 2,
    "changed_files": 2,
    "commits": 2,
    "review_comments": 2,
    "comments": 9
  },
  "events": [
    {
      "event": "labeled",
      "id": 5963897836,
      "node_id": "LE_lADOABII585CiHSPzwAAAAFjedvs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5963897836",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T13:53:15Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "commented",
      "id": 1023233262,
      "node_id": "IC_kwDOABII5848_Uzu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023233262",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T13:53:28Z",
      "updated_at": "2022-01-27T13:53:28Z",
      "author_association": "MEMBER",
      "body": "For additional background on where this logic came from originally, please see: https://github.com/bitcoin/bitcoin/pull/5927#issuecomment-104665085, https://github.com/bitcoin/bitcoin/pull/6172, https://github.com/bitcoin/bitcoin/pull/21106#issuecomment-790802591 (as well as additional discussion in #21106 generally)",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#issuecomment-1023233262",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T14:32:07Z",
      "updated_at": "2022-01-27T14:32:07Z",
      "source": {
        "issue": {
          "id": 1115503700,
          "node_id": "PR_kwDOABII584xo7uV",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24171",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24171/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24171/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24171/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24171",
          "number": 24171,
          "state": "closed",
          "state_reason": null,
          "title": "p2p: Sync chain more readily from inbound peers during IBD",
          "body": "When in IBD, if the honest chain is only known by inbound peers, then we must\r\neventually sync from them in order to learn it. This change allows us to\r\nperform initial headers sync and fetch blocks from inbound peers, if we have no\r\nblocks in flight.\r\n\r\nThe restriction on having no blocks in flight means that we will naturally\r\nthrottle our block downloads to any such inbound peers that we may be\r\ndownloading from, until we leave IBD. This is a tradeoff between preferring\r\noutbound peers for most of our block download, versus making sure we always\r\neventually will get blocks we need that are only known by inbound peers even\r\nduring IBD, as otherwise we may be stuck in IBD indefinitely (which could have\r\ncascading failure on the network, if a large fraction of the network managed to\r\nget stuck in IBD).\r\n\r\nNote that the test in the second commit fails on master, without the first commit.\r\n",
          "user": {
            "login": "sdaftuar",
            "id": 7463573,
            "node_id": "MDQ6VXNlcjc0NjM1NzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sdaftuar",
            "html_url": "https://github.com/sdaftuar",
            "followers_url": "https://api.github.com/users/sdaftuar/followers",
            "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
            "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
            "repos_url": "https://api.github.com/users/sdaftuar/repos",
            "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24171",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24171",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24171.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24171.patch"
          },
          "closed_at": "2022-06-02T20:35:30Z",
          "created_at": "2022-01-26T21:09:21Z",
          "updated_at": "2023-06-21T10:07:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 865005254,
      "node_id": "PRR_kwDOABII584zju7G",
      "url": null,
      "actor": null,
      "commit_id": "ea335c1ee32b01b89cbe67fb1573eba9bf85a4c7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept/Approach ACK\r\n\r\n<details><summary>A few suggestions for the test, feel free to pick/choose</summary><p>\r\n\r\n```diff\r\ndiff --git a/test/functional/feature_minchainwork.py b/test/functional/feature_minchainwork.py\r\nindex d596464b27..637623706a 100755\r\n--- a/test/functional/feature_minchainwork.py\r\n+++ b/test/functional/feature_minchainwork.py\r\n@@ -17,9 +17,9 @@ only succeeds past a given node once its nMinimumChainWork has been exceeded.\r\n \r\n import time\r\n \r\n+from test_framework.p2p import P2PInterface, msg_getheaders\r\n from test_framework.test_framework import BitcoinTestFramework\r\n from test_framework.util import assert_equal\r\n-from test_framework.p2p import P2PInterface, msg_getheaders\r\n \r\n # 2 hashes required per regtest block (with no difficulty adjustment)\r\n REGTEST_WORK_PER_BLOCK = 2\r\n@@ -43,7 +43,7 @@ class MinimumChainWorkTest(BitcoinTestFramework):\r\n             self.connect_nodes(i+1, i)\r\n \r\n         # Set clock of node2 2 days ahead, to keep it in IBD during this test.\r\n-        self.nodes[2].setmocktime(int(time.time())+48*60*60)\r\n+        self.nodes[2].setmocktime(int(time.time()) + 48 * 60 * 60)\r\n \r\n     def run_test(self):\r\n         # Start building a chain on node0.  node2 shouldn't be able to sync until node1's\r\n@@ -75,13 +75,12 @@ class MinimumChainWorkTest(BitcoinTestFramework):\r\n         assert self.nodes[1].getbestblockhash() != self.nodes[0].getbestblockhash()\r\n         assert_equal(self.nodes[2].getblockcount(), starting_blockcount)\r\n \r\n-        # Check that getheaders requests to node2 are ignored.\r\n+        self.log.info(\"Test that getheaders requests to node2 are ignored\")\r\n         peer = self.nodes[2].add_p2p_connection(P2PInterface())\r\n         msg = msg_getheaders()\r\n         msg.locator.vHave = [int(self.nodes[2].getbestblockhash(), 16)]\r\n         msg.hashstop = 0\r\n-        peer.send_message(msg)\r\n-        peer.sync_with_ping()\r\n+        peer.send_and_ping(msg)\r\n         time.sleep(5)\r\n         assert \"headers\" not in peer.last_message\r\n \r\n@@ -100,13 +99,13 @@ class MinimumChainWorkTest(BitcoinTestFramework):\r\n         self.log.info(f\"Blockcounts: {[n.getblockcount() for n in self.nodes]}\")\r\n \r\n-        # Now getheaders requests should not be ignored\r\n-        peer.send_message(msg)\r\n-        peer.sync_with_ping()\r\n+        self.log.info(\"Test that getheaders requests are not ignored\")\r\n+        peer.send_and_ping(msg)\r\n         assert \"headers\" in peer.last_message\r\n \r\n         # Verify that node2 is in fact still in IBD (otherwise this test may\r\n         # not be exercising the logic we want!)\r\n-        assert self.nodes[2].getblockchaininfo()['initialblockdownload']\r\n+        assert_equal(self.nodes[2].getblockchaininfo()['initialblockdownload'], True)\r\n+\r\n \r\n if __name__ == '__main__':\r\n     MinimumChainWorkTest().main()\r\n```\r\n</p></details>\r\n",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#pullrequestreview-865005254",
      "submitted_at": "2022-01-27T15:07:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 5965176060,
      "node_id": "HRFPE_lADOABII585CiHSPzwAAAAFjjVz8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5965176060",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T16:30:12Z"
    },
    {
      "event": "commented",
      "id": 1023418755,
      "node_id": "IC_kwDOABII5849ACGD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023418755",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T16:37:11Z",
      "updated_at": "2022-01-27T16:37:11Z",
      "author_association": "MEMBER",
      "body": "Thanks @jonatack -- I've made the test cleanups you suggested.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#issuecomment-1023418755",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178"
    },
    {
      "event": "mentioned",
      "id": 5965224471,
      "node_id": "MEE_lADOABII585CiHSPzwAAAAFjjhoX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5965224471",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T16:37:11Z"
    },
    {
      "event": "subscribed",
      "id": 5965224485,
      "node_id": "SE_lADOABII585CiHSPzwAAAAFjjhol",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5965224485",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T16:37:11Z"
    },
    {
      "event": "commented",
      "id": 1023677360,
      "node_id": "IC_kwDOABII5849BBOw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023677360",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T22:01:38Z",
      "updated_at": "2022-05-31T16:00:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25253](https://github.com/bitcoin/bitcoin/pull/25253) (test: add coverage for non-hex value to -minimumchainwork by brunoerg)\n* [#24008](https://github.com/bitcoin/bitcoin/pull/24008) (assumeutxo: net_processing changes by jamesob)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#issuecomment-1023677360",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178"
    },
    {
      "event": "commented",
      "id": 1023745278,
      "node_id": "IC_kwDOABII5849BRz-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1023745278",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T23:47:15Z",
      "updated_at": "2022-01-27T23:47:15Z",
      "author_association": "MEMBER",
      "body": "@sdaftuar So when two nodes differ in their checkpoint value, the attack could in theory still apply (being fed a bogus chain during IBD, which would then cause you to be banned by other nodes), but that's just too expensive if it requires the attacker to either branch off long before the current nMinimumChainWork value (effectively requiring the attacker to rewrite history), or shortly before the current nMinimumChainWork (but require recent-ish difficulty blocks on top)?",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#issuecomment-1023745278",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178"
    },
    {
      "event": "mentioned",
      "id": 5967421616,
      "node_id": "MEE_lADOABII585CiHSPzwAAAAFjr6Cw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5967421616",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T23:47:15Z"
    },
    {
      "event": "subscribed",
      "id": 5967421624,
      "node_id": "SE_lADOABII585CiHSPzwAAAAFjr6C4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5967421624",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-27T23:47:15Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-28T02:48:48Z",
      "updated_at": "2022-01-28T02:48:48Z",
      "source": {
        "issue": {
          "id": 1096591544,
          "node_id": "PR_kwDOABII584wrFC4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24008",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24008/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24008/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24008/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24008",
          "number": 24008,
          "state": "closed",
          "state_reason": null,
          "title": "assumeutxo: net_processing changes",
          "body": "This is part of the [assumeutxo project](https://github.com/bitcoin/bitcoin/projects/11) (parent PR: #27596) \r\n\r\n---\r\n\r\nThis PR includes the changes necessary to perform network functionality with multiple chainstates in use. Various pieces of net_processing logic have to be modified in order to support block download that is simultaneous across numerous chainstates.\r\n\r\nChanges include\r\n\r\n- Modify FindNextBlocksToDownload() to parameterize the chainstate\r\n  being worked on.\r\n\r\n- Change GetNodeStateStats to take the max nCommonHeight per peer across\r\n  all chainstates.\r\n\r\n- Add CNodeState::chainstate_to_last_common_block\r\n  * we need this to allow handling for a single peer to distinguish\r\n    between separate chainstates we're simultaneously downloading blocks for\r\n\r\n- Share `requests_available` across chainstates when finding the next blocks\r\n  to download (during calls to FindNextBlocksToDownload()).\r\n\r\n---\r\n\r\nThis PR shares commit https://github.com/jamesob/bitcoin/commit/17906dd52543fb75d2c45de884799b35ec5721f4 with #24006, and is included here so that the two changes can be reviewed in parallel.\r\n\r\nThis PR excludes a small net_processing commit, https://github.com/jamesob/bitcoin/commit/3e6164d96f9a42ecbf34359f6fd1af5413346933, which will be proposed for merge after #24006 since it relies on the introduction of the `BackgroundBlockConnected()` validationinterface event that the indexing changes introduce.\r\n\r\n---\r\n\r\nSome commits here are best reviewed with `--ignore-space-change`.\r\n\r\nUnit-testing net_processing is notoriously difficult and with that in mind I haven't included any unittests here, but in parallel with review of these changes I will attempt to write some tests. Note that this behavior is covered in the functional tests included in the parent PR: https://github.com/jamesob/bitcoin/commit/c4949f2daf05289e76123b3c705277bf735a79d6",
          "user": {
            "login": "jamesob",
            "id": 73197,
            "node_id": "MDQ6VXNlcjczMTk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jamesob",
            "html_url": "https://github.com/jamesob",
            "followers_url": "https://api.github.com/users/jamesob/followers",
            "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
            "organizations_url": "https://api.github.com/users/jamesob/orgs",
            "repos_url": "https://api.github.com/users/jamesob/repos",
            "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jamesob/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24008",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24008",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24008.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24008.patch"
          },
          "closed_at": "2023-05-26T21:26:05Z",
          "created_at": "2022-01-07T19:08:10Z",
          "updated_at": "2023-06-25T04:22:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1024244611,
      "node_id": "IC_kwDOABII5849DLuD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1024244611",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-28T13:52:22Z",
      "updated_at": "2022-01-28T13:52:22Z",
      "author_association": "MEMBER",
      "body": "> @sdaftuar So when two nodes differ in their checkpoint value, the attack could in theory still apply (being fed a bogus chain during IBD, which would then cause you to be banned by other nodes), but that's just too expensive if it requires the attacker to either branch off long before the current nMinimumChainWork value (effectively requiring the attacker to rewrite history), or shortly before the current nMinimumChainWork (but require recent-ish difficulty blocks on top)?\r\n\r\nI'm interpreting \"differ in their checkpoint value\" as meaning \"have chains that disagree about blocks before the checkpoint value\", instead of \"have software that disagrees about which blockhashes are checkpointed\", because in that latter case I think it should be clear that all bets are off for such peers remaining in consensus with each other.\r\n\r\nIn the former case, which is what this logic is trying to protect against, then yes the point of the `nMinimumChainWork` check is that it is too expensive to rewrite history that forks off before the last checkpoint which has as much work as our `nMinimumChainWork` setting.  I don't believe there's any meaningful DoS risk to us from an attacker branching the chain shortly before the current nMinimumChainWork, because even if we're fed a less work chain that forks from some recent-ish point, that won't cause us to be partitioned off the network (our peers will just think we're on some less-work but not consensus-invalid branch).\r\n\r\nMaybe I should have reframed what this PR does a bit when I opened it.  Right now, one of the criteria to leave IBD (so that `IsIBD()` returns false, and so that we would respond to getheaders requests) is having a chain with more work than `nMinimumChainWork`, so what this PR changes is that the other `IsIBD()` requirements no longer need to be met in order to start responding to getheaders requests.  The other checks done in `IsIBD()` are:\r\n\r\n```    \r\n    if (m_cached_finished_ibd.load(std::memory_order_relaxed))\r\n        return false;\r\n    if (fImporting || fReindex)\r\n        return true;\r\n    if (m_chain.Tip() == nullptr)\r\n        return true;\r\n    if (m_chain.Tip()->nChainWork < nMinimumChainWork)\r\n        return true;\r\n    if (m_chain.Tip()->GetBlockTime() < (GetTime() - nMaxTipAge))\r\n        return true;\r\n```\r\nSo what this PR is doing is not requiring the tip-age check to pass, and it's also not requiring that we're done reindexing or importing blocks from disk.  Relaxing the tip-age check is intentional and I think a better behavior in the event that block creation stalled on the network for some reason.  Now that I think about it, maybe I should re-add the guard about `fImporting || fReindex` so that we don't have peers asking to download blocks from us while we're still busy processing what we have on disk, but not sure how important that is.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#issuecomment-1024244611",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178"
    },
    {
      "event": "mentioned",
      "id": 5970864055,
      "node_id": "MEE_lADOABII585CiHSPzwAAAAFj5Ce3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5970864055",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-28T13:52:22Z"
    },
    {
      "event": "subscribed",
      "id": 5970864060,
      "node_id": "SE_lADOABII585CiHSPzwAAAAFj5Ce8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5970864060",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-28T13:52:22Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-01-31T18:03:28Z",
      "updated_at": "2022-01-31T18:03:28Z",
      "source": {
        "issue": {
          "id": 1119754665,
          "node_id": "PR_kwDOABII584x2sTs",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24220",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24220/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24220/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24220/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24220",
          "number": 24220,
          "state": "closed",
          "state_reason": null,
          "title": "validation: don't re-acquire cs_main during IBD in CChainState::IsInitialBlockDownload()",
          "body": "No longer re-acquire lock `cs_main` during IBD in `CChainState::IsInitialBlockDownload()`, as most of its callers already hold the lock. Have these callers invoke non-locking function `CChainState::IsIBD()` instead.  Apply thread safety analysis to the IBD functions. Retains the post-IBD optimization latch for the callers that do not hold the lock. Makes explicit which callers hold `cs_main`, and which do not.\r\n",
          "user": {
            "login": "jonatack",
            "id": 2415484,
            "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonatack",
            "html_url": "https://github.com/jonatack",
            "followers_url": "https://api.github.com/users/jonatack/followers",
            "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
            "organizations_url": "https://api.github.com/users/jonatack/orgs",
            "repos_url": "https://api.github.com/users/jonatack/repos",
            "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonatack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 16,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24220",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24220",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24220.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24220.patch"
          },
          "closed_at": "2022-07-25T07:07:37Z",
          "created_at": "2022-01-31T17:59:51Z",
          "updated_at": "2023-07-25T10:16:38Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 869045755,
      "node_id": "PRR_kwDOABII584zzJX7",
      "url": null,
      "actor": null,
      "commit_id": "7ee8f577deaa0f5f66ac1ce31b3b12c44ea996a9",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\n> Now that I think about it, maybe I should re-add the guard about `fImporting || fReindex` so that we don't have peers asking to download blocks from us while we're still busy processing what we have on disk, but not sure how important that is.\r\n\r\nWhen either of those is `true`, `Tip()` is always going to be at or behind what we've already imported / reindexed. So the `nMinimumChainWork` check should be enough. There are two ways we decide with what headers to respond:\r\n1.  If `locator` is null, look up the `hashStop` block. That won't make it through `BlockRequestAllowed` if the block is outside the main chain an we haven't revalidated it (which we wouldn't with a reindex).\r\n2. If `locator` is present, and has something in the main chain (`FindForkInGlobalIndex`); already covered by the `nMinimumChainWork ` check\r\n\r\nThat said, it doesn't hurt to just guard that condition.\r\n\r\nP.S. we should probably document the p2p messages in the source code so I don't have to google them, but here's a nice overview of how `getheaders` is normally used: https://developer.bitcoin.org/devguide/p2p_network.html?highlight=getheaders#headers-first",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#pullrequestreview-869045755",
      "submitted_at": "2022-02-01T12:18:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-01T13:48:40Z",
      "updated_at": "2022-02-01T13:48:40Z",
      "source": {
        "issue": {
          "id": 1120697309,
          "node_id": "PR_kwDOABII584x50K4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24226",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24226/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24226/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24226/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24226",
          "number": 24226,
          "state": "closed",
          "state_reason": null,
          "title": "rpc: warn that nodes ignore requests for old stale blocks",
          "body": "Adds warning to RPC help that `getblockfrompeer` is of little use for stale blocks that are more than a month old.\r\n\r\nThis is an anti-fingerprinting measure. See `BlockRequestAllowed` in `net_processing`.\r\n\r\nIt's been in Bitcoin Core since 2014, introduced in #2910 and later improved to not rely on checkpoints.\r\nOlder and alternative clients might still serve these blocks, so not throwing an error.\r\n\r\nAllowing whitelisted nodes to fetch these blocks anyway might be nice.",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 148216,
              "node_id": "MDU6TGFiZWwxNDgyMTY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Docs",
              "name": "Docs",
              "color": "02d7e1",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24226",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24226",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24226.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24226.patch"
          },
          "closed_at": "2022-12-05T13:03:32Z",
          "created_at": "2022-02-01T13:47:18Z",
          "updated_at": "2022-12-05T15:23:46Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 869817045,
      "node_id": "PRR_kwDOABII584z2FrV",
      "url": null,
      "actor": null,
      "commit_id": "7ee8f577deaa0f5f66ac1ce31b3b12c44ea996a9",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nIf I understand this correctly, this means that also under normal circumstances, if we are in IBD (and beyond the point of `nMinimumChainWork`), we could get inbound connections from peers that are also in IBD, and we would serve them headers and blocks, which would take away some bandwidth and could slow down our own IBD progress.\r\n\r\nThis doesn't seem like a probable scenario for new nodes that don't self-advertise their address until out of IBD, but a node that is well-known to the network and needs to do IBD again for some reason might want to disable incoming connections, especially on an older bitcoin core version with lots of blocks between `nMinimumChainWork` and the current network's height.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#pullrequestreview-869817045",
      "submitted_at": "2022-02-01T20:54:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-02T23:54:23Z",
      "updated_at": "2022-02-02T23:54:23Z",
      "source": {
        "issue": {
          "id": 421531882,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MjYxNTYxNTQ3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15606",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15606/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15606/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/15606/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/15606",
          "number": 15606,
          "state": "closed",
          "state_reason": null,
          "title": "assumeutxo",
          "body": "**See the proposal for assumeutxo [here](https://github.com/jamesob/assumeutxo-docs/tree/2019-04-proposal/proposal).**\r\n\r\nTesting instructions can be found below the \"Progress\" section.\r\n\r\n---\r\n\r\n### Progress\r\n\r\nAll items here have corresponding commits here, but are unchecked if they haven't been merged yet.\r\n\r\n- [x] **Chainstate interface**\r\n  - https://github.com/bitcoin/bitcoin/pull/15976\r\n- [x] **Localize chainstate data**\r\n  - https://github.com/bitcoin/bitcoin/pull/16443\r\n- [x] **Share block data**\r\n  - https://github.com/bitcoin/bitcoin/pull/16194\r\n- [x] **Deglobalize chainstate**\r\n  - https://github.com/bitcoin/bitcoin/pull/15948\r\n- [x] **UpdateTip/CheckBlockIndex** modifications\r\n  - https://github.com/bitcoin/bitcoin/pull/21526\r\n- [x] **ChainstateManager**\r\n  - https://github.com/bitcoin/bitcoin/pull/17737\r\n- [x] **Mempool**\r\n  - https://github.com/bitcoin/bitcoin/pull/22415\r\n- [x] **LoadBlockIndex**\r\n  - https://github.com/bitcoin/bitcoin/pull/23174\r\n- [x] **Init/teardown**\r\n  - https://github.com/bitcoin/bitcoin/pull/24232\r\n  - https://github.com/bitcoin/bitcoin/pull/25667\r\n  - https://github.com/bitcoin/bitcoin/pull/25740\r\n- [x] **Wallet**: includes avoiding rescans when assumed-valid block data is in use\r\n  - https://github.com/bitcoin/bitcoin/pull/23997\r\n  - https://github.com/bitcoin/bitcoin/pull/26282\r\n- [ ] **P2P**: minor changes are made to `init.cpp` and `net_processing.cpp` to make simultaneous IBD across multiple chainstates work.\r\n  - #24008 \r\n- [ ] **Pruning**: implement correct pruning behavior when using a background chainstate\r\n- [ ] **Blockfile separation**: to prevent \"fragmentation\" in blockfile storage, have background chainstates use separate blockfiles from active snapshot chainstates to avoid interleaving heights and impairing pruning.\r\n- [ ] **Indexing**: all existing `CValidationInterface` events are given with an additional parameter, ChainstateRole, and all indexers ignore events from ChainstateRole::ASSUMEDVALID so that indexation only happens sequentially.\r\n- [ ] Raise error when both `-reindex` and assumeutxo are in use.\r\n- [ ] **RPC**: introduce RPC commands `dumptxoutset`, `loadtxoutset`, and (the probably temporary) `monitorsnapshot`.\r\n  - https://github.com/bitcoin/bitcoin/pull/16899\r\n- [ ] **Release docs & first assumeutxo commitment**: add notes and a particular assumeutxo hash value for first AU-enabled release.\r\n  - This will complete the project and allow use of UTXO snapshots for faster node bootstrap.\r\n- [ ] *(optional)* **Coinscache optimization**: allow flushing chainstate data without emptying the coins cache; results in better performance after UTXO snapshot load.\r\n  - https://github.com/bitcoin/bitcoin/pull/17487\r\n  - https://github.com/bitcoin/bitcoin/pull/27008\r\n\r\n---\r\n\r\n### Testing\r\n\r\n#### For fun (~5min)\r\n\r\nIf you want to do a quick test, you can run `./contrib/devtools/test_utxo_snapshots.sh` and follow the instructions. This is mostly obviated by the functional tests, though.\r\n\r\n#### For real (longer)\r\n\r\nIf you'd like to experience a real usage of assumeutxo, you can do that too.\r\nI've cut a new snapshot at height 788'000 (http://img.jameso.be/utxo-788000.dat - but you can do it yourself with `./contrib/devtools/utxo_snapshot.sh` if you want). Download that, and then create a datadir for testing:\r\n```sh\r\n$ cd ~/src/bitcoin  # or whatever\r\n\r\n# get the snapshot\r\n$ curl http://img.jameso.be/utxo-788000.dat > utxo-788000.dat\r\n\r\n# you'll want to do this if you like copy/pasting \r\n$ export AU_DATADIR=/home/${USER}/au-test # or wherever\r\n\r\n$ mkdir ${AU_DATADIR}\r\n$ vim ${AU_DATADIR}/bitcoin.conf\r\n\r\ndbcache=8000  # or, you know, something high\r\nblockfilterindex=1\r\ncoinstatsindex=1\r\nprune=3000\r\nlogthreadnames=1\r\n```\r\nObtain this branch, build it, and then start bitcoind:\r\n```sh\r\n$ git remote add jamesob https://github.com/jamesob/bitcoin\r\n$ git fetch jamesob utxo-dumpload-compressed\r\n$ git checkout jamesob/utxo-dumpload-compressed\r\n\r\n$ ./configure $conf_args && make  # (whatever you like to do here)\r\n\r\n# start 'er up and watch the logs\r\n$ ./src/bitcoind -datadir=${AU_DATADIR}\r\n```\r\nThen, in some other window, load the snapshot\r\n```sh\r\n$ ./src/bitcoin-cli -datadir=${AU_DATADIR} loadtxoutset $(pwd)/utxo-788000.dat\r\n```\r\n\r\nYou'll see some log messages about headers retrieval and waiting to see the snapshot in the headers chain. Once you get the full headers chain, you'll spend a decent amount of time (~10min) loading the snapshot, checking it, and flushing it to disk. After all that happens, you should be syncing to tip in pretty short order, and you'll see the occasional `[background validation]` log message go by.\r\n\r\nIn yet another window, you can check out chainstate status with\r\n```sh\r\n$ ./src/bitcoin-cli -datadir=${AU_DATADIR} getchainstates\r\n```\r\nas well as usual favorites like `getblockchaininfo`.\r\n\r\n---\r\n\r\n### Original change description\r\n\r\nFor those unfamiliar with assumeutxo, here's a brief summary from [the issue](https://github.com/bitcoin/bitcoin/issues/15605) (where any conceptual discussion not specific to this implementation should happen):\r\n\r\n> assumeutxo would be a way to initialize a node using a headers chain and a serialized version of the UTXO state which was generated from another node at some block height. A client making use of this UTXO \"snapshot\" would specify a hash and expect the content of the resulting UTXO set to yield this hash after deserialization. \r\n> \r\n> This would allow users to bootstrap a usable pruned node & wallet far more quickly (and with less disk usage) than waiting for a full initial block download to complete, since we only have to sync blocks between the base of the snapshot and the current network tip. Needless to say this is at expense of accepting a different trust model, though how different this really ends up being from `assumevalid` in effect is worth debate.\r\n\r\nIn short, this is an interesting change because it would allow nodes to get up and running within minutes given a ~3GB file (at time of writing) under an almost identical trust model to assumevalid.\r\n\r\nIn this implementation, I add a few RPC commands: `dumptxoutset` creates a UTXO snapshot and writes it to disk, and `loadtxoutset` intakes a snapshot from disk, constructs and activates chainstate based on it, and continues a from-scratch initial block download in the background for the sole purpose of validating the snapshot. Once the snapshot is validated, we throw away the chainstate used for background validation.\r\n\r\nThe assumeutxo procedure as implemented is as follows:\r\n\r\n1. A UTXO snapshot is loaded with the `loadtxoutset <path>` RPC command.\r\n1. A new chainstate (`CChainState`) is initialized using `ChainstateManager::ActivateSnapshot()`:\r\n   1. The serialized UTXO data is read in and various sanity checks are performed, e.g. compare expected coin count, recompute the hash and compare it with assumeutxo hash in source code.\r\n   1. We \"fast forward\" `new_chainstate->m_chain` to have a tip at the base of the snapshot (with or without block data). Lacking block data, we fake the `nTx` counts of the constituent `CBlockIndex` entries.\r\n   1. `LoadChainTip()` is called on the new snapshot and it is installed as our active chainstate.\r\n1. The new assumed-valid chainstate is now our active, and so that enters IBD until it is synced to the network's tip. Presumably the snapshot would be taken relatively close to the current tip but far enough away to avoid meaningful reorgs, say 10,000 blocks deep.\r\n1. Once the active chainstate is out of IBD, our old validation chain continues IBD \"in the background\" while the active chainstate services requests from most of the system.\r\n1. Once the background validation chainstate reaches a height equal the base of the snapshot, we take the hash of its UTXO set and ensure it equals the expected hash based on the snapshot. If the hashes are equivalent, we delete the validation chainstate and move on without event; if they aren't, we log loudly and fall back to the validation chainstate (we should probably just shut down).\r\n\r\nThe implicit assumption is that the background validation chain will always be a subset of the assumed-valid snapshot chain while the latter is active. We don't properly handle reorgs that go deeper than the base of the snapshot.\r\n\r\n### Changes (already merged/outdated)\r\n\r\n![chainstate-beforeafter (1)](https://user-images.githubusercontent.com/73197/54435797-a16b0780-4707-11e9-89c3-c90b5686804d.png)\r\n \r\nThe crux of this change is in removing any assumptions in the codebase that there is a single chainstate, i.e. any references to global variables `chainActive`, `pcoinsTip`, et al. need to be replaced with functions that return the relevant chainstate data at that moment in time. This change also takes `CChainState` to its logical conclusion by making it more self-contained - any references to globals like `chainActive` are removed with class-local references (`m_chain`).\r\n\r\nA few minor notes on the implementation:\r\n\r\n- When we attempt to load a wallet with a BestBlock locator lower than the base of a snapshot and the snapshot has not yet been validated, we refuse to load the wallet.\r\n\r\n- For additional notes, see [the new assumeutxo docs](https://github.com/jamesob/bitcoin/blob/utxo-dumpload-compressed/doc/assumeutxo.md).",
          "user": {
            "login": "jamesob",
            "id": 73197,
            "node_id": "MDQ6VXNlcjczMTk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/73197?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jamesob",
            "html_url": "https://github.com/jamesob",
            "followers_url": "https://api.github.com/users/jamesob/followers",
            "following_url": "https://api.github.com/users/jamesob/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jamesob/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jamesob/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jamesob/subscriptions",
            "organizations_url": "https://api.github.com/users/jamesob/orgs",
            "repos_url": "https://api.github.com/users/jamesob/repos",
            "events_url": "https://api.github.com/users/jamesob/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jamesob/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            },
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 66,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/15606",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/15606",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/15606.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/15606.patch"
          },
          "closed_at": "2023-05-08T15:09:24Z",
          "created_at": "2019-03-15T13:58:22Z",
          "updated_at": "2023-05-08T15:09:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-04T03:55:42Z",
      "updated_at": "2022-02-04T03:55:42Z",
      "source": {
        "issue": {
          "id": 1122906469,
          "node_id": "PR_kwDOABII584yBEua",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24247",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24247/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24247/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24247/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24247",
          "number": 24247,
          "state": "closed",
          "state_reason": null,
          "title": "p2p: Split network logging into two categories",
          "body": "\r\nThis PR is to resolve issue 20576. It focuses on introducing different levels of net logging. As a starting point, as mentioned in the issue https://github.com/bitcoin/bitcoin/issues/20576 , it creates separate lower-frequency, important peer-level events (netpeers) from very high-frequency message-level passing (netmessages).",
          "user": {
            "login": "anshu-khare-design",
            "id": 58921119,
            "node_id": "MDQ6VXNlcjU4OTIxMTE5",
            "avatar_url": "https://avatars.githubusercontent.com/u/58921119?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/anshu-khare-design",
            "html_url": "https://github.com/anshu-khare-design",
            "followers_url": "https://api.github.com/users/anshu-khare-design/followers",
            "following_url": "https://api.github.com/users/anshu-khare-design/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/anshu-khare-design/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/anshu-khare-design/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/anshu-khare-design/subscriptions",
            "organizations_url": "https://api.github.com/users/anshu-khare-design/orgs",
            "repos_url": "https://api.github.com/users/anshu-khare-design/repos",
            "events_url": "https://api.github.com/users/anshu-khare-design/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/anshu-khare-design/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24247",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24247",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24247.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24247.patch"
          },
          "closed_at": "2022-02-05T16:18:54Z",
          "created_at": "2022-02-03T10:26:37Z",
          "updated_at": "2023-02-06T10:11:25Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-05T21:28:18Z",
      "updated_at": "2022-02-05T21:28:18Z",
      "source": {
        "issue": {
          "id": 1124984013,
          "node_id": "PR_kwDOABII584yHy_v",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24273",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24273/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24273/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24273/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24273",
          "number": 24273,
          "state": "closed",
          "state_reason": null,
          "title": "p2p: Split network logging into two categories #24247",
          "body": "This PR is to resolve issue 20576. It focuses on introducing different levels of net logging. As a starting point, as mentioned in the issue https://github.com/bitcoin/bitcoin/issues/20576 , it creates separate lower-frequency, important peer-level events (netpeers) from very high-frequency message-level passing (netmessages).",
          "user": {
            "login": "anshu-khare-design",
            "id": 58921119,
            "node_id": "MDQ6VXNlcjU4OTIxMTE5",
            "avatar_url": "https://avatars.githubusercontent.com/u/58921119?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/anshu-khare-design",
            "html_url": "https://github.com/anshu-khare-design",
            "followers_url": "https://api.github.com/users/anshu-khare-design/followers",
            "following_url": "https://api.github.com/users/anshu-khare-design/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/anshu-khare-design/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/anshu-khare-design/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/anshu-khare-design/subscriptions",
            "organizations_url": "https://api.github.com/users/anshu-khare-design/orgs",
            "repos_url": "https://api.github.com/users/anshu-khare-design/repos",
            "events_url": "https://api.github.com/users/anshu-khare-design/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/anshu-khare-design/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24273",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24273",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24273.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24273.patch"
          },
          "closed_at": "2022-04-14T06:59:02Z",
          "created_at": "2022-02-05T17:17:36Z",
          "updated_at": "2023-04-14T14:43:34Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVmNmRiZTY4NjNkOTI3MTBmZDJkYTc3ODFlNWIyYWFjODc1Nzg3NTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ef6dbe6863d92710fd2da7781e5b2aac87578751",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ef6dbe6863d92710fd2da7781e5b2aac87578751",
      "tree": {
        "sha": "c3e631f9c8a81987feba60d2f68394c6c0c2b672",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c3e631f9c8a81987feba60d2f68394c6c0c2b672"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0bf9bb6a539f151ec92725d20a2b6c22cb095a5",
          "sha": "d0bf9bb6a539f151ec92725d20a2b6c22cb095a5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d0bf9bb6a539f151ec92725d20a2b6c22cb095a5"
        }
      ],
      "message": "Respond to getheaders if we have sufficient chainwork\n\nPreviously, we would check to see if we were in IBD and ignore getheaders\nrequests accordingly. However, the IBD criteria -- an optimization mostly\ntargeted at behavior when we have peers serving us many blocks we need to\ndownload -- is difficult to reason about in edge-case scenarios, such as if the\nnetwork were to go a long time without any blocks found and nodes getting\nrestarted during that time.\n\nTo make things simpler to reason about, just use nMinimumChainWork as our\nanti-DoS threshold; as long as our chain has that much work, it should be fine\nto respond to a peer asking for our headers (and this should allow such a peer\nto request blocks from us if needed).",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2022-02-22T16:34:05Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2022-01-26T23:29:56Z"
      },
      "sha": "ef6dbe6863d92710fd2da7781e5b2aac87578751"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGEzNWY5NjNlZGYxYTE0ZWU1NzJhYmVhMTA2ZmIwMTQ3NTc1ZTQ2OTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a35f963edf1a14ee572abea106fb0147575e4694",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a35f963edf1a14ee572abea106fb0147575e4694",
      "tree": {
        "sha": "4a0037170d2288d5203cd74ca547036df2c92e27",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4a0037170d2288d5203cd74ca547036df2c92e27"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ef6dbe6863d92710fd2da7781e5b2aac87578751",
          "sha": "ef6dbe6863d92710fd2da7781e5b2aac87578751",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ef6dbe6863d92710fd2da7781e5b2aac87578751"
        }
      ],
      "message": "Add test for getheaders behavior\n\nExpect responses to a getheaders iff the node has a chain with more than nMinimumChainWork",
      "committer": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2022-02-22T16:34:05Z"
      },
      "author": {
        "name": "Suhas Daftuar",
        "email": "sdaftuar@gmail.com",
        "date": "2022-01-27T00:18:27Z"
      },
      "sha": "a35f963edf1a14ee572abea106fb0147575e4694"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6119414219,
      "node_id": "HRFPE_lADOABII585CiHSPzwAAAAFsvtnL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6119414219",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-22T16:35:01Z"
    },
    {
      "event": "commented",
      "id": 1047996029,
      "node_id": "IC_kwDOABII584-dyZ9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1047996029",
      "actor": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-22T16:45:02Z",
      "updated_at": "2022-02-22T16:45:02Z",
      "author_association": "MEMBER",
      "body": "> If I understand this correctly, this means that also under normal circumstances, if we are in IBD (and beyond the point of nMinimumChainWork), we could get inbound connections from peers that are also in IBD, and we would serve them headers and blocks, which would take away some bandwidth and could slow down our own IBD progress.\r\n\r\nAgreed.  I think this is not such a big concern, as other peers would only be downloading from us if they also were new nodes, and the likelihood of a new node coming online, learning our address from someone else and then doing IBD from us in the minutes/hours(?) that we may be finishing our IBD seems small. I imagine it's more likely the inbounds we get in that window are other nodes that have been online already anyway, and won't be completing IBD from us (but instead relaying us transactions).\r\n\r\nI updated this PR so that we won't respond to the getheaders if we're importing or reindexing, and I addressed @sjors's comment about checking for nullptr as well.",
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#issuecomment-1047996029",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178"
    },
    {
      "event": "mentioned",
      "id": 6119483878,
      "node_id": "MEE_lADOABII585CiHSPzwAAAAFsv-nm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6119483878",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-22T16:45:02Z"
    },
    {
      "event": "subscribed",
      "id": 6119483886,
      "node_id": "SE_lADOABII585CiHSPzwAAAAFsv-nu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6119483886",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-22T16:45:02Z"
    },
    {
      "event": "commented",
      "id": 1058209298,
      "node_id": "IC_kwDOABII584_Ev4S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1058209298",
      "actor": {
        "login": "klementtan",
        "id": 49265907,
        "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
        "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/klementtan",
        "html_url": "https://github.com/klementtan",
        "followers_url": "https://api.github.com/users/klementtan/followers",
        "following_url": "https://api.github.com/users/klementtan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/klementtan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/klementtan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
        "organizations_url": "https://api.github.com/users/klementtan/orgs",
        "repos_url": "https://api.github.com/users/klementtan/repos",
        "events_url": "https://api.github.com/users/klementtan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/klementtan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-03T16:10:08Z",
      "updated_at": "2022-03-03T16:10:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "crACK a35f963edf1a14ee572abea106fb0147575e4694\r\n\r\nVerified that:\r\n1. `gethearders` will be ignored when `(fImporting || fReindex)` or `(nChainWork < nMinimumChainWork)`\r\n2. Functional tests are comprehensive. Covers:\r\n    * When `(nChainWork < nMinimumChainWork)`, `gethearders` will be ignored\r\n    * When `(nChainWork >= nMinimumChainWork), `gethearders` will not be ignored but the node is still in IBD",
      "user": {
        "login": "klementtan",
        "id": 49265907,
        "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
        "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/klementtan",
        "html_url": "https://github.com/klementtan",
        "followers_url": "https://api.github.com/users/klementtan/followers",
        "following_url": "https://api.github.com/users/klementtan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/klementtan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/klementtan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
        "organizations_url": "https://api.github.com/users/klementtan/orgs",
        "repos_url": "https://api.github.com/users/klementtan/repos",
        "events_url": "https://api.github.com/users/klementtan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/klementtan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#issuecomment-1058209298",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178"
    },
    {
      "event": "reviewed",
      "id": 899178889,
      "node_id": "PRR_kwDOABII5841mGGJ",
      "url": null,
      "actor": null,
      "commit_id": "a35f963edf1a14ee572abea106fb0147575e4694",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "klementtan",
        "id": 49265907,
        "node_id": "MDQ6VXNlcjQ5MjY1OTA3",
        "avatar_url": "https://avatars.githubusercontent.com/u/49265907?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/klementtan",
        "html_url": "https://github.com/klementtan",
        "followers_url": "https://api.github.com/users/klementtan/followers",
        "following_url": "https://api.github.com/users/klementtan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/klementtan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/klementtan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/klementtan/subscriptions",
        "organizations_url": "https://api.github.com/users/klementtan/orgs",
        "repos_url": "https://api.github.com/users/klementtan/repos",
        "events_url": "https://api.github.com/users/klementtan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/klementtan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#pullrequestreview-899178889",
      "submitted_at": "2022-03-03T16:30:44Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178"
    },
    {
      "event": "commented",
      "id": 1065069978,
      "node_id": "IC_kwDOABII584_e62a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065069978",
      "actor": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T12:28:42Z",
      "updated_at": "2022-03-11T12:28:42Z",
      "author_association": "MEMBER",
      "body": "ACK a35f963edf1a14ee572abea106fb0147575e4694\r\n\r\nIt is indeed easier to reason about IBD edge cases if we drop tip-age check (and also it just works better without the check).",
      "user": {
        "login": "naumenkogs",
        "id": 7975071,
        "node_id": "MDQ6VXNlcjc5NzUwNzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7975071?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/naumenkogs",
        "html_url": "https://github.com/naumenkogs",
        "followers_url": "https://api.github.com/users/naumenkogs/followers",
        "following_url": "https://api.github.com/users/naumenkogs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/naumenkogs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/naumenkogs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/naumenkogs/subscriptions",
        "organizations_url": "https://api.github.com/users/naumenkogs/orgs",
        "repos_url": "https://api.github.com/users/naumenkogs/repos",
        "events_url": "https://api.github.com/users/naumenkogs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/naumenkogs/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#issuecomment-1065069978",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-31T04:09:14Z",
      "updated_at": "2022-05-31T04:09:14Z",
      "source": {
        "issue": {
          "id": 1253112625,
          "node_id": "PR_kwDOABII5844s_JE",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25253",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25253/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25253/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25253/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25253",
          "number": 25253,
          "state": "closed",
          "state_reason": null,
          "title": "test: add coverage for non-hex value to -minimumchainwork",
          "body": "This PR adds test coverage for the following init error:\r\nhttps://github.com/bitcoin/bitcoin/blob/b9ef5a10e2fa4609d048db57b99463305455ebe4/src/init.cpp#L917-L919\r\n\r\nPassing a non-hex value to -minimumchainwork should throw an initial error.",
          "user": {
            "login": "brunoerg",
            "id": 19480819,
            "node_id": "MDQ6VXNlcjE5NDgwODE5",
            "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brunoerg",
            "html_url": "https://github.com/brunoerg",
            "followers_url": "https://api.github.com/users/brunoerg/followers",
            "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
            "organizations_url": "https://api.github.com/users/brunoerg/orgs",
            "repos_url": "https://api.github.com/users/brunoerg/repos",
            "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/brunoerg/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25253",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25253",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25253.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25253.patch"
          },
          "closed_at": "2022-05-31T13:12:50Z",
          "created_at": "2022-05-30T20:55:15Z",
          "updated_at": "2023-05-31T10:04:18Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-31T08:42:06Z",
      "updated_at": "2022-05-31T08:42:06Z",
      "source": {
        "issue": {
          "id": 1222158587,
          "node_id": "I_kwDOABII585I2Kj7",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25048",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25048/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25048/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25048/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/25048",
          "number": 25048,
          "state": "closed",
          "state_reason": "completed",
          "title": "Node won't serve blocks when connect=0, listen=1 set due to IBD logic",
          "body": "I have a 2 machine setup on my local network that I use for testing and I've performed dozens of syncs without any issues until recently.\r\n\r\nI have a node on a laptop that is configured not to make any outbound connections via connect=0 but does listen for connections via listen=1. This node, as a result, never downloads new blocks.\r\n\r\nI then run a node on a desktop that it set to ONLY connect to the laptop node via connect=<local network IP> \r\n\r\n**Expected behavior**\r\n\r\nThis node then downloads all of the blocks it can from the laptop node and then stops. This has been the case for many months of testing I've performed.\r\n\r\n**Actual behavior**\r\n\r\nHowever, when trying to run a test recently, the desktop node wasn't syncing. After enabling net debugging I see that the laptop node is deciding not to serve any blocks because it considers itself to be in IBD. This is odd because it's unclear WHY it would know that there are more blocks available out on the network when it is explicitly told not to connect to any peers.\r\n\r\n**To reproduce**\r\n\r\nHard to reproduce this far. Easy to fix by having the main node connect to other peers and sync to chain tip.\r\n\r\n**System information**\r\n\r\nBitcoin Core 23.0 on Debian, official build\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\nExample startup log from previous testing runs that went as expected. I find it interesting that it says \"progress=0.999996\"\r\n\r\n<pre>\r\n2022-02-12T17:35:39Z Bitcoin Core version v22.0.0 (release build)\r\n2022-02-12T17:35:39Z Assuming ancestors of block 00000000000000000008a89e854d57e5667df88f1cdef6fde2fbca1de5b639ad have valid signatures.\r\n2022-02-12T17:35:39Z Setting nMinimumChainWork=00000000000000000000000000000000000000001fa4663bbbe19f82de910280\r\n2022-02-12T17:35:39Z Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\r\n2022-02-12T17:35:39Z Using RdSeed as additional entropy source\r\n2022-02-12T17:35:39Z Using RdRand as an additional entropy source\r\n2022-02-12T17:35:39Z Default data directory /home/jameson/.bitcoin\r\n2022-02-12T17:35:39Z Using data directory /media/jameson/Blockchain/bitcoin\r\n2022-02-12T17:35:39Z Config file: /media/jameson/Blockchain/bitcoin/bitcoin.conf (not found, skipping)\r\n2022-02-12T17:35:39Z Config file arg: blockfilterindex=\"1\"\r\n2022-02-12T17:35:39Z Config file arg: connect=\"0\"\r\n2022-02-12T17:35:39Z Config file arg: datadir=\"/media/jameson/Blockchain/bitcoin\"\r\n2022-02-12T17:35:39Z Config file arg: dns=\"0\"\r\n2022-02-12T17:35:39Z Config file arg: dnsseed=\"0\"\r\n2022-02-12T17:35:39Z Config file arg: listen=\"1\"\r\n2022-02-12T17:35:39Z Config file arg: rpcauth=****\r\n2022-02-12T17:35:39Z Config file arg: rpcthreads=\"12\"\r\n2022-02-12T17:35:39Z Config file arg: rpcworkqueue=\"48\"\r\n2022-02-12T17:35:39Z Config file arg: server=\"1\"\r\n2022-02-12T17:35:39Z Config file arg: txindex=\"1\"\r\n2022-02-12T17:35:39Z Config file arg: wallet=\"0\"\r\n2022-02-12T17:35:39Z Config file arg: zmqpubrawblock=\"tcp://127.0.0.1:28332\"\r\n2022-02-12T17:35:39Z Config file arg: zmqpubrawtx=\"tcp://127.0.0.1:28333\"\r\n2022-02-12T17:35:39Z Command-line arg: daemon=\"\"\r\n2022-02-12T17:35:39Z Using at most 125 automatic connections (1024 file descriptors available)\r\n2022-02-12T17:35:39Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements\r\n2022-02-12T17:35:39Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements\r\n2022-02-12T17:35:39Z Script verification uses 11 additional threads\r\n2022-02-12T17:35:39Z scheduler thread start\r\n2022-02-12T17:35:39Z HTTP: creating work queue of depth 48\r\n2022-02-12T17:35:39Z Using random cookie authentication.\r\n2022-02-12T17:35:39Z Generated RPC authentication cookie /media/jameson/Blockchain/bitcoin/.cookie\r\n2022-02-12T17:35:39Z Using rpcauth authentication.\r\n2022-02-12T17:35:39Z HTTP: starting 12 worker threads\r\n2022-02-12T17:35:39Z Using wallet directory /media/jameson/Blockchain/bitcoin\r\n2022-02-12T17:35:39Z init message: Verifying wallet(s)…\r\n2022-02-12T17:35:39Z Warning: Skipping -wallet path that doesn't exist. Failed to load database path '/media/jameson/Blockchain/bitcoin/0'. Path does not exist.\r\n2022-02-12T17:35:39Z init message: Loading banlist…\r\n2022-02-12T17:35:39Z SetNetworkActive: true\r\n2022-02-12T17:35:39Z Using /16 prefix for IP bucketing\r\n2022-02-12T17:35:39Z Cache configuration:\r\n2022-02-12T17:35:39Z * Using 2.0 MiB for block index database\r\n2022-02-12T17:35:39Z * Using 56.0 MiB for transaction index database\r\n2022-02-12T17:35:39Z * Using 49.0 MiB for basic block filter index database\r\n2022-02-12T17:35:39Z * Using 8.0 MiB for chain state database\r\n2022-02-12T17:35:39Z * Using 335.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n2022-02-12T17:35:39Z init message: Loading block index…\r\n2022-02-12T17:35:39Z Switching active chainstate to Chainstate [ibd] @ height -1 (null)\r\n2022-02-12T17:35:39Z Opening LevelDB in /media/jameson/Blockchain/bitcoin/blocks/index\r\n2022-02-12T17:35:39Z Opened LevelDB successfully\r\n2022-02-12T17:35:39Z Using obfuscation key for /media/jameson/Blockchain/bitcoin/blocks/index: 0000000000000000\r\n2022-02-12T17:35:42Z LoadBlockIndexDB: last block file = 2921\r\n2022-02-12T17:35:42Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=32, size=50279941, heights=722928...722965, time=2022-02-12...2022-02-12)\r\n2022-02-12T17:35:42Z Checking all blk files are present...\r\n2022-02-12T17:35:42Z Opening LevelDB in /media/jameson/Blockchain/bitcoin/chainstate\r\n2022-02-12T17:35:42Z Opened LevelDB successfully\r\n2022-02-12T17:35:42Z Using obfuscation key for /media/jameson/Blockchain/bitcoin/chainstate: 05e83c6994e2e4d1\r\n2022-02-12T17:35:42Z Loaded best chain: hashBestChain=00000000000000000008c2190b3b7f475db5a19123e8e19da20af0629e3aeaa1 height=722965 date=2022-02-12T17:14:26Z progress=0.999996\r\n2022-02-12T17:35:42Z init message: Verifying blocks…\r\n2022-02-12T17:35:42Z Verifying last 6 blocks at level 3\r\n2022-02-12T17:35:42Z [0%]...[16%]...[33%]...[50%]...[66%]...[83%]...[99%]...[DONE].\r\n2022-02-12T17:35:42Z No coin database inconsistencies in last 6 blocks (9180 transactions)\r\n2022-02-12T17:35:42Z  block index            3455ms\r\n2022-02-12T17:35:42Z Opening LevelDB in /media/jameson/Blockchain/bitcoin/indexes/txindex\r\n2022-02-12T17:35:42Z Opened LevelDB successfully\r\n2022-02-12T17:35:42Z Using obfuscation key for /media/jameson/Blockchain/bitcoin/indexes/txindex: 0000000000000000\r\n2022-02-12T17:35:42Z txindex thread start\r\n2022-02-12T17:35:42Z txindex is enabled at height 722965\r\n2022-02-12T17:35:42Z txindex thread exit\r\n2022-02-12T17:35:42Z Opening LevelDB in /media/jameson/Blockchain/bitcoin/indexes/blockfilter/basic/db\r\n2022-02-12T17:35:42Z Opened LevelDB successfully\r\n2022-02-12T17:35:42Z Using obfuscation key for /media/jameson/Blockchain/bitcoin/indexes/blockfilter/basic/db: 0000000000000000\r\n2022-02-12T17:35:42Z basic block filter index thread start\r\n2022-02-12T17:35:42Z basic block filter index is enabled at height 722965\r\n2022-02-12T17:35:42Z basic block filter index thread exit\r\n2022-02-12T17:35:42Z block tree size = 722968\r\n2022-02-12T17:35:42Z nBestHeight = 722965\r\n2022-02-12T17:35:42Z loadblk thread start\r\n2022-02-12T17:35:42Z Bound to 127.0.0.1:8334\r\n2022-02-12T17:35:42Z Bound to [::]:8333\r\n2022-02-12T17:35:42Z Bound to 0.0.0.0:8333\r\n2022-02-12T17:35:42Z torcontrol thread start\r\n2022-02-12T17:35:42Z init message: Loading P2P addresses…\r\n2022-02-12T17:35:42Z Leaving InitialBlockDownload (latching to false)\r\n2022-02-12T17:35:42Z Loaded 62684 addresses from peers.dat  122ms\r\n2022-02-12T17:35:42Z init message: Starting network threads…\r\n2022-02-12T17:35:42Z DNS seeding disabled\r\n2022-02-12T17:35:42Z init message: Done loading\r\n2022-02-12T17:35:42Z addcon thread start\r\n2022-02-12T17:35:42Z net thread start\r\n2022-02-12T17:35:42Z msghand thread start\r\n2022-02-12T17:35:44Z Imported mempool transactions from disk: 781 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\r\n2022-02-12T17:35:44Z loadblk thread exit\r\n</pre>\r\n\r\nHere's the network debug log; note it says \"progress=0.982959\"\r\nWhy did this change if the node was instructed to never connect to any other nodes outside of my LAN?\r\n<pre>\r\n2022-04-29T14:11:22Z Bitcoin Core version v23.0.0 (release build)\r\n2022-04-29T14:11:22Z Assuming ancestors of block 000000000000000000052d314a259755ca65944e68df6b12a067ea8f1f5a7091 have valid signatures.\r\n2022-04-29T14:11:22Z Setting nMinimumChainWork=00000000000000000000000000000000000000002927cdceccbd5209e81e80db\r\n2022-04-29T14:11:22Z Using the 'sse4(1way),sse41(4way),avx2(8way)' SHA256 implementation\r\n2022-04-29T14:11:22Z Using RdSeed as additional entropy source\r\n2022-04-29T14:11:22Z Using RdRand as an additional entropy source\r\n2022-04-29T14:11:22Z Default data directory /home/jameson/.bitcoin\r\n2022-04-29T14:11:22Z Using data directory /media/jameson/Blockchain/bitcoin\r\n2022-04-29T14:11:22Z Config file: /media/jameson/Blockchain/bitcoin/bitcoin.conf (not found, skipping)\r\n2022-04-29T14:11:22Z Config file arg: blockfilterindex=\"1\"\r\n2022-04-29T14:11:22Z Config file arg: connect=\"0\"\r\n2022-04-29T14:11:22Z Config file arg: datadir=\"/media/jameson/Blockchain/bitcoin\"\r\n2022-04-29T14:11:22Z Config file arg: debug=\"net\"\r\n2022-04-29T14:11:22Z Config file arg: dns=\"0\"\r\n2022-04-29T14:11:22Z Config file arg: dnsseed=\"0\"\r\n2022-04-29T14:11:22Z Config file arg: listen=\"1\"\r\n2022-04-29T14:11:22Z Config file arg: rpcauth=****\r\n2022-04-29T14:11:22Z Config file arg: rpcthreads=\"12\"\r\n2022-04-29T14:11:22Z Config file arg: rpcworkqueue=\"48\"\r\n2022-04-29T14:11:22Z Config file arg: server=\"1\"\r\n2022-04-29T14:11:22Z Config file arg: txindex=\"1\"\r\n2022-04-29T14:11:22Z Config file arg: wallet=\"0\"\r\n2022-04-29T14:11:22Z Config file arg: zmqpubrawblock=\"tcp://127.0.0.1:28332\"\r\n2022-04-29T14:11:22Z Config file arg: zmqpubrawtx=\"tcp://127.0.0.1:28333\"\r\n2022-04-29T14:11:22Z Command-line arg: daemon=\"\"\r\n2022-04-29T14:11:22Z Using at most 125 automatic connections (1024 file descriptors available)\r\n2022-04-29T14:11:22Z Using 16 MiB out of 32/2 requested for signature cache, able to store 524288 elements\r\n2022-04-29T14:11:22Z Using 16 MiB out of 32/2 requested for script execution cache, able to store 524288 elements\r\n2022-04-29T14:11:22Z Script verification uses 11 additional threads\r\n2022-04-29T14:11:22Z scheduler thread start\r\n2022-04-29T14:11:22Z HTTP: creating work queue of depth 48\r\n2022-04-29T14:11:22Z Using random cookie authentication.\r\n2022-04-29T14:11:22Z Generated RPC authentication cookie /media/jameson/Blockchain/bitcoin/.cookie\r\n2022-04-29T14:11:22Z Using rpcauth authentication.\r\n2022-04-29T14:11:22Z HTTP: starting 12 worker threads\r\n2022-04-29T14:11:22Z Using wallet directory /media/jameson/Blockchain/bitcoin\r\n2022-04-29T14:11:22Z init message: Verifying wallet(s)…\r\n2022-04-29T14:11:22Z Warning: Skipping -wallet path that doesn't exist. Failed to load database path '/media/jameson/Blockchain/bitcoin/0'. Path does not exist.\r\n2022-04-29T14:11:22Z Using /16 prefix for IP bucketing\r\n2022-04-29T14:11:22Z init message: Loading P2P addresses…\r\n2022-04-29T14:11:22Z Loaded 0 addresses from peers.dat  0ms\r\n2022-04-29T14:11:22Z init message: Loading banlist…\r\n2022-04-29T14:11:22Z banlist.dat ignored because it can only be read by Bitcoin Core version 22.x. Remove \"/media/jameson/Blockchain/bitcoin/banlist.dat\" to silence this warning.\r\n2022-04-29T14:11:22Z Loaded 0 banned node addresses/subnets  0ms\r\n2022-04-29T14:11:22Z net: setting try another outbound peer=false\r\n2022-04-29T14:11:22Z SetNetworkActive: true\r\n2022-04-29T14:11:22Z Cache configuration:\r\n2022-04-29T14:11:22Z * Using 2.0 MiB for block index database\r\n2022-04-29T14:11:22Z * Using 56.0 MiB for transaction index database\r\n2022-04-29T14:11:22Z * Using 49.0 MiB for basic block filter index database\r\n2022-04-29T14:11:22Z * Using 8.0 MiB for chain state database\r\n2022-04-29T14:11:22Z * Using 335.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n2022-04-29T14:11:22Z init message: Loading block index…\r\n2022-04-29T14:11:22Z Switching active chainstate to Chainstate [ibd] @ height -1 (null)\r\n2022-04-29T14:11:22Z Opening LevelDB in /media/jameson/Blockchain/bitcoin/blocks/index\r\n2022-04-29T14:11:22Z Opened LevelDB successfully\r\n2022-04-29T14:11:22Z Using obfuscation key for /media/jameson/Blockchain/bitcoin/blocks/index: 0000000000000000\r\n2022-04-29T14:11:25Z LoadBlockIndexDB: last block file = 2954\r\n2022-04-29T14:11:25Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=50, size=67330220, heights=726115...726749, time=2022-03-06...2022-03-10)\r\n2022-04-29T14:11:25Z Checking all blk files are present...\r\n2022-04-29T14:11:25Z Opening LevelDB in /media/jameson/Blockchain/bitcoin/chainstate\r\n2022-04-29T14:11:25Z Opened LevelDB successfully\r\n2022-04-29T14:11:25Z Using obfuscation key for /media/jameson/Blockchain/bitcoin/chainstate: 05e83c6994e2e4d1\r\n2022-04-29T14:11:25Z Loaded best chain: hashBestChain=000000000000000000014ccfdf28b7b062aec08384456eba68e2070fc61ec811 height=726750 date=2022-03-10T20:26:32Z progress=0.982959\r\n2022-04-29T14:11:25Z init message: Verifying blocks…\r\n2022-04-29T14:11:25Z Verifying last 6 blocks at level 3\r\n2022-04-29T14:11:25Z [0%]...[16%]...[33%]...[50%]...[66%]...[83%]...[99%]...[DONE].\r\n2022-04-29T14:11:26Z No coin database inconsistencies in last 6 blocks (9585 transactions)\r\n2022-04-29T14:11:26Z  block index            3744ms\r\n2022-04-29T14:11:26Z Opening LevelDB in /media/jameson/Blockchain/bitcoin/indexes/txindex\r\n2022-04-29T14:11:26Z Opened LevelDB successfully\r\n2022-04-29T14:11:26Z Using obfuscation key for /media/jameson/Blockchain/bitcoin/indexes/txindex: 0000000000000000\r\n2022-04-29T14:11:26Z txindex thread start\r\n2022-04-29T14:11:26Z txindex is enabled at height 726750\r\n2022-04-29T14:11:26Z txindex thread exit\r\n2022-04-29T14:11:26Z Opening LevelDB in /media/jameson/Blockchain/bitcoin/indexes/blockfilter/basic/db\r\n2022-04-29T14:11:26Z Opened LevelDB successfully\r\n2022-04-29T14:11:26Z Using obfuscation key for /media/jameson/Blockchain/bitcoin/indexes/blockfilter/basic/db: 0000000000000000\r\n2022-04-29T14:11:26Z block tree size = 726753\r\n2022-04-29T14:11:26Z nBestHeight = 726750\r\n2022-04-29T14:11:26Z basic block filter index thread start\r\n2022-04-29T14:11:26Z basic block filter index is enabled at height 726750\r\n2022-04-29T14:11:26Z basic block filter index thread exit\r\n2022-04-29T14:11:26Z loadblk thread start\r\n2022-04-29T14:11:26Z torcontrol thread start\r\n2022-04-29T14:11:26Z Imported mempool transactions from disk: 0 succeeded, 0 failed, 0 expired, 0 already there, 0 waiting for initial broadcast\r\n2022-04-29T14:11:26Z loadblk thread exit\r\n2022-04-29T14:11:26Z Bound to 127.0.0.1:8334\r\n2022-04-29T14:11:26Z Bound to [::]:8333\r\n2022-04-29T14:11:26Z Bound to 0.0.0.0:8333\r\n2022-04-29T14:11:26Z init message: Starting network threads…\r\n2022-04-29T14:11:26Z DNS seeding disabled\r\n2022-04-29T14:11:26Z init message: Done loading\r\n2022-04-29T14:11:26Z net thread start\r\n2022-04-29T14:11:26Z addcon thread start\r\n2022-04-29T14:11:26Z msghand thread start\r\n2022-04-29T14:11:52Z Added connection peer=0\r\n2022-04-29T14:11:52Z connection from 192.168.2.42:53516 accepted\r\n2022-04-29T14:11:52Z received: version (102 bytes) peer=0\r\n2022-04-29T14:11:52Z sending version (102 bytes) peer=0\r\n2022-04-29T14:11:52Z send version message: version 70016, blocks=726750, txrelay=1, peer=0\r\n2022-04-29T14:11:52Z sending wtxidrelay (0 bytes) peer=0\r\n2022-04-29T14:11:52Z sending sendaddrv2 (0 bytes) peer=0\r\n2022-04-29T14:11:52Z sending verack (0 bytes) peer=0\r\n2022-04-29T14:11:52Z receive version message: /Satoshi:0.21.2/: version 70016, blocks=0, us=[::]:0, txrelay=1, peer=0\r\n2022-04-29T14:11:52Z received: wtxidrelay (0 bytes) peer=0\r\n2022-04-29T14:11:52Z received: sendaddrv2 (0 bytes) peer=0\r\n2022-04-29T14:11:52Z received: verack (0 bytes) peer=0\r\n2022-04-29T14:11:52Z sending sendheaders (0 bytes) peer=0\r\n2022-04-29T14:11:52Z sending sendcmpct (9 bytes) peer=0\r\n2022-04-29T14:11:52Z sending sendcmpct (9 bytes) peer=0\r\n2022-04-29T14:11:52Z sending ping (8 bytes) peer=0\r\n2022-04-29T14:11:52Z initial getheaders (726749) to peer=0 (startheight:0)\r\n2022-04-29T14:11:52Z sending getheaders (1029 bytes) peer=0\r\n2022-04-29T14:11:52Z sending feefilter (8 bytes) peer=0\r\n2022-04-29T14:11:52Z received: getaddr (0 bytes) peer=0\r\n2022-04-29T14:11:52Z received: sendheaders (0 bytes) peer=0\r\n2022-04-29T14:11:52Z received: sendcmpct (9 bytes) peer=0\r\n2022-04-29T14:11:52Z received: sendcmpct (9 bytes) peer=0\r\n2022-04-29T14:11:52Z received: ping (8 bytes) peer=0\r\n2022-04-29T14:11:52Z sending pong (8 bytes) peer=0\r\n2022-04-29T14:11:52Z received: getheaders (69 bytes) peer=0\r\n2022-04-29T14:11:52Z Ignoring getheaders from peer=0 because node is in initial block download\r\n2022-04-29T14:11:52Z received: feefilter (8 bytes) peer=0\r\n2022-04-29T14:11:52Z received: feefilter of 0.09170997 BTC/kvB from peer=0\r\n2022-04-29T14:11:52Z received: pong (8 bytes) peer=0\r\n2022-04-29T14:12:48Z socket closed for peer=0\r\n2022-04-29T14:12:48Z disconnecting peer=0\r\n2022-04-29T14:12:48Z Cleared nodestate for peer=0\r\n</pre>",
          "user": {
            "login": "jlopp",
            "id": 288011,
            "node_id": "MDQ6VXNlcjI4ODAxMQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/288011?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jlopp",
            "html_url": "https://github.com/jlopp",
            "followers_url": "https://api.github.com/users/jlopp/followers",
            "following_url": "https://api.github.com/users/jlopp/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jlopp/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jlopp/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jlopp/subscriptions",
            "organizations_url": "https://api.github.com/users/jlopp/orgs",
            "repos_url": "https://api.github.com/users/jlopp/repos",
            "events_url": "https://api.github.com/users/jlopp/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jlopp/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64585,
              "node_id": "MDU6TGFiZWw2NDU4NQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
              "name": "Bug",
              "color": "FBBAAB",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 9,
          "closed_at": "2022-06-02T09:44:06Z",
          "created_at": "2022-05-01T13:30:27Z",
          "updated_at": "2023-06-02T10:04:42Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1141934430,
      "node_id": "IC_kwDOABII585EEIle",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1141934430",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-31T10:05:23Z",
      "updated_at": "2022-05-31T10:05:23Z",
      "author_association": "MEMBER",
      "body": "review ACK a35f963edf1a14ee572abea106fb0147575e4694 🗯\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA512\r\n\r\nreview ACK a35f963edf1a14ee572abea106fb0147575e4694 🗯\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQGzBAEBCgAdFiEE+rVPoUahrI9sLGYTzit1aX5ppUgFAlwqrYAACgkQzit1aX5p\r\npUidVQwAq04QTdny/dXKC/IXLM4WtJLPJyOzOZ66IPwE3YH6ZjXj8AVsykPH2Jrg\r\nxLZT5Mosb5B9NqvxrYAiouFyIAANwN64cyvPADYLPwE0rbkuoribQ9EDaqYQ5voe\r\nP1TTfcMFcCSvjcZLICfvNDhioL6r07kyx7f4UEJv0jOuYe8DtVBzYsN9VBtCFTio\r\n5h0l5NOuz1BgaSANU8maoheias8ACmQCIb+UeMsBg8r90MmKfQfEyZkwhwQrpEHY\r\nKwM/JcHd2Ez6NhzXAT2hOknrle+38ePPet9+RxLzeeQGWsartoUFtQUhqBkZGCsU\r\nzZNl8lEMQsFuqXdWmAMFDcPY6hn3+lA69VO+bUQhSxvnIOxK11v83RSBgNzLDEeI\r\n4kuUDpP/PHpOmlvBxKjyVy1p2W4GloJUgmHZV9QRcLXPOX65WdMyKIeknko7y4fe\r\ntxoDAy7bg701l+B0f4DsNy0kYLfirFWhoo3ZbKpZgkx/cBbaXnWHzwJH03DLuXWQ\r\nH8tISUSz\r\n=A+Bc\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\n\r\n</details>\r\n",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#issuecomment-1141934430",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24178"
    },
    {
      "event": "merged",
      "id": 6708235816,
      "node_id": "ME_lADOABII585CiHSPzwAAAAGP144o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6708235816",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5f65afff9c4c735d607a69fc3d18b4ecadbf3ba9",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5f65afff9c4c735d607a69fc3d18b4ecadbf3ba9",
      "created_at": "2022-05-31T10:08:07Z"
    },
    {
      "event": "closed",
      "id": 6708235845,
      "node_id": "CE_lADOABII585CiHSPzwAAAAGP145F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6708235845",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-31T10:08:08Z"
    },
    {
      "event": "referenced",
      "id": 6710468800,
      "node_id": "REFE_lADOABII585CiHSPzwAAAAGP-aDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6710468800",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "de11b6795720fdb9c51779dc3ad5e95d6edbdd0c",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/de11b6795720fdb9c51779dc3ad5e95d6edbdd0c",
      "created_at": "2022-05-31T15:03:43Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-01T10:36:28Z",
      "updated_at": "2022-09-01T10:36:28Z",
      "source": {
        "issue": {
          "id": 1344091938,
          "node_id": "PR_kwDOABII5849camF",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25871",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25871/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25871/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25871/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25871",
          "number": 25871,
          "state": "closed",
          "state_reason": null,
          "title": "contrib: add vasild to trusted keys",
          "body": "_(this is a followup from yesterday's [IRC discussion](https://www.erisian.com.au/bitcoin-core-dev/log-2022-08-18.html#l-299))_\r\n\r\nFor Networking scope maintenance.\r\n\r\nI have been signing commits with that key and it is available at `keys.openpgp.org`.",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 231994551,
              "node_id": "MDU6TGFiZWwyMzE5OTQ1NTE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Scripts%20and%20tools",
              "name": "Scripts and tools",
              "color": "ffffee",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 65,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25871",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25871",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25871.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25871.patch"
          },
          "closed_at": "2023-01-14T08:29:04Z",
          "created_at": "2022-08-19T08:02:03Z",
          "updated_at": "2023-01-14T08:29:05Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "locked",
      "id": 9388087161,
      "node_id": "LOE_lADOABII585CiHSPzwAAAAIvktd5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9388087161",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T10:04:22Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/796537419",
      "pull_request_review_id": 869045755,
      "id": 796537419,
      "node_id": "PRRC_kwDOABII584vejJL",
      "diff_hunk": "@@ -3190,8 +3190,16 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         }\n \n         LOCK(cs_main);\n-        if (m_chainman.ActiveChainstate().IsInitialBlockDownload() && !pfrom.HasPermission(NetPermissionFlags::Download)) {\n-            LogPrint(BCLog::NET, \"Ignoring getheaders from peer=%d because node is in initial block download\\n\", pfrom.GetId());\n+\n+        // Note that if we were to be on a chain that forks from the checkpointed\n+        // chain, then serving those headers to a peer that has seen the\n+        // checkpointed chain would cause that peer to disconnect us. Requiring\n+        // that our chainwork exceed nMinimumChainWork is a protection against\n+        // being fed a bogus chain when we started up for the first time and\n+        // getting partitioned off the honest network for serving that chain to\n+        // others.\n+        if (m_chainman.ActiveTip()->nChainWork < nMinimumChainWork && !pfrom.HasPermission(NetPermissionFlags::Download)) {",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "a35f963edf1a14ee572abea106fb0147575e4694",
      "original_commit_id": "0b015e4740ce2742981c4a07709ce738f57200f3",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Check `ActiveTip()->` isn't null?",
      "created_at": "2022-02-01T12:17:15Z",
      "updated_at": "2022-02-01T12:18:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#discussion_r796537419",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/796537419"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3201,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/812139471",
      "pull_request_review_id": 890062234,
      "id": 812139471,
      "node_id": "PRRC_kwDOABII584waEPP",
      "diff_hunk": "@@ -3190,8 +3190,16 @@ void PeerManagerImpl::ProcessMessage(CNode& pfrom, const std::string& msg_type,\n         }\n \n         LOCK(cs_main);\n-        if (m_chainman.ActiveChainstate().IsInitialBlockDownload() && !pfrom.HasPermission(NetPermissionFlags::Download)) {\n-            LogPrint(BCLog::NET, \"Ignoring getheaders from peer=%d because node is in initial block download\\n\", pfrom.GetId());\n+\n+        // Note that if we were to be on a chain that forks from the checkpointed\n+        // chain, then serving those headers to a peer that has seen the\n+        // checkpointed chain would cause that peer to disconnect us. Requiring\n+        // that our chainwork exceed nMinimumChainWork is a protection against\n+        // being fed a bogus chain when we started up for the first time and\n+        // getting partitioned off the honest network for serving that chain to\n+        // others.\n+        if (m_chainman.ActiveTip()->nChainWork < nMinimumChainWork && !pfrom.HasPermission(NetPermissionFlags::Download)) {",
      "path": "src/net_processing.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "a35f963edf1a14ee572abea106fb0147575e4694",
      "original_commit_id": "0b015e4740ce2742981c4a07709ce738f57200f3",
      "in_reply_to_id": 796537419,
      "user": {
        "login": "sdaftuar",
        "id": 7463573,
        "node_id": "MDQ6VXNlcjc0NjM1NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sdaftuar",
        "html_url": "https://github.com/sdaftuar",
        "followers_url": "https://api.github.com/users/sdaftuar/followers",
        "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
        "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
        "repos_url": "https://api.github.com/users/sdaftuar/repos",
        "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2022-02-22T16:36:55Z",
      "updated_at": "2022-02-22T16:36:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24178#discussion_r812139471",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/812139471"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24178"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 3201,
      "side": "RIGHT"
    }
  ]
}