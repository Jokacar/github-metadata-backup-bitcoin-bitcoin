{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078",
    "id": 1435099975,
    "node_id": "PR_kwDOABII585VieNH",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28078",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28078.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28078.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/4ecfd3eaf434d868455466e001adae4b68515ab8",
    "number": 28078,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "net, refactor: remove unneeded exports, use helpers over low-level code, use optional",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "and other improvements noticed while reviewing #27411.\r\n\r\nAddresses https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1263969104 and https://github.com/bitcoin/bitcoin/pull/27411#discussion_r1263967598.\r\n\r\nSee commit messages for details.",
    "labels": [],
    "created_at": "2023-07-14T17:27:45Z",
    "updated_at": "2023-09-20T17:52:30Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "fe4c0059113e6afb8396dc915f598999dfa50896",
    "assignee": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "jonatack:2023-07-net-netaddr-refactoring",
      "ref": "2023-07-net-netaddr-refactoring",
      "sha": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 173103842,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNzMxMDM4NDI=",
        "name": "bitcoin",
        "full_name": "jonatack/bitcoin",
        "owner": {
          "login": "jonatack",
          "id": 2415484,
          "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jonatack",
          "html_url": "https://github.com/jonatack",
          "followers_url": "https://api.github.com/users/jonatack/followers",
          "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
          "organizations_url": "https://api.github.com/users/jonatack/orgs",
          "repos_url": "https://api.github.com/users/jonatack/repos",
          "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/jonatack/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/jonatack/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/jonatack/bitcoin",
        "archive_url": "https://api.github.com/repos/jonatack/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/jonatack/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/jonatack/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/jonatack/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/jonatack/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/jonatack/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/jonatack/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/jonatack/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/jonatack/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/jonatack/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/jonatack/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/jonatack/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/jonatack/bitcoin/events",
        "forks_url": "https://api.github.com/repos/jonatack/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/jonatack/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/jonatack/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/jonatack/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/jonatack/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/jonatack/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/jonatack/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/jonatack/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/jonatack/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/jonatack/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/jonatack/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/jonatack/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/jonatack/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/jonatack/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/jonatack/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/jonatack/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:jonatack/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/jonatack/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/jonatack/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/jonatack/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/jonatack/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/jonatack/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/jonatack/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/jonatack/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/jonatack/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/jonatack/bitcoin/hooks",
        "svn_url": "https://github.com/jonatack/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 224336,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-19T21:55:07Z",
        "created_at": "2019-02-28T11:57:18Z",
        "updated_at": "2023-01-03T22:00:49Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "78a983f597af224e017f522443112cec81422fe6",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35714,
        "stargazers_count": 71424,
        "watchers_count": 71424,
        "size": 240044,
        "default_branch": "master",
        "open_issues_count": 667,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-09-20T17:50:54Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-09-20T17:33:14Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 45,
    "deletions": 66,
    "changed_files": 4,
    "commits": 9,
    "review_comments": 30,
    "comments": 9
  },
  "events": [
    {
      "event": "commented",
      "id": 1636164999,
      "node_id": "IC_kwDOABII585hheWH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1636164999",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-14T17:27:47Z",
      "updated_at": "2023-09-18T22:22:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/28078#pullrequestreview-1556652326), [stickies-v](https://github.com/bitcoin/bitcoin/pull/28078#pullrequestreview-1560767388) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28331](https://github.com/bitcoin/bitcoin/pull/28331) (BIP324 integration by sipa)\n* [#27581](https://github.com/bitcoin/bitcoin/pull/27581) (net: Continuous ASMap health check by fjahr)\n* [#27071](https://github.com/bitcoin/bitcoin/pull/27071) (Handle CJDNS from LookupSubNet() by vasild)\n* [#25390](https://github.com/bitcoin/bitcoin/pull/25390) (sync: introduce a thread-safe generic container and use it to remove a bunch of \"GlobalMutex\"es by vasild)\n* [#24748](https://github.com/bitcoin/bitcoin/pull/24748) (test/BIP324: functional tests for v2 P2P encryption by stratospher)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1636164999",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078"
    },
    {
      "event": "renamed",
      "id": 9824036053,
      "node_id": "RTE_lADOABII585rmZjfzwAAAAJJjuTV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9824036053",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-14T17:29:08Z",
      "rename": {
        "from": "net, refactor: remove unneeded exports, improve separation, use std::optional",
        "to": "net, refactor: remove unneeded exports, use helpers over low-level code, use optional"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-14T17:33:50Z",
      "updated_at": "2023-07-14T17:33:50Z",
      "source": {
        "issue": {
          "id": 1652681372,
          "node_id": "PR_kwDOABII585NhcBe",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27411",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27411/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27411/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27411/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27411",
          "number": 27411,
          "state": "closed",
          "state_reason": null,
          "title": "p2p: Restrict self-advertisements with privacy networks to avoid fingerprinting",
          "body": "The current logic for self-advertisements works such that we detect as many local addresses as we can, and then, using the scoring matrix from `CNetAddr::GetReachabilityFrom()`, self-advertise with the address that fits best to our peer.\r\nIt is in general not hard for our peers to distinguish our self-advertisements from other addrs we send them, because we self-advertise every ~24h and because the first addr we send over a connection is likely our self-advertisement. \r\n\r\n`GetReachabilityFrom()` currently only takes into account actual reachability, but not whether we'd _want_ to announce our identity for one network to peers from other networks, which is not straightforward in connection with privacy networks. \r\n\r\nWhile the general approach is to prefer self-advertising with the address for the network our peer is on, there are several special situations in which we don't have one, and as a result could allow self-advertise other local addresses, for example:\r\n\r\nA) We run i2p and clearnet, use `-i2pacceptincoming=0` (so we have no local i2p address), and we have a local ipv4 address. In this case, we'd advertise the ipv4 address to our outbound i2p peers.\r\n\r\nB) Our `-discover` logic cannot detect any local clearnet addresses in our network environment, but we are actually reachable over clearnet. If we ran bitcoind clearnet-only, we'd always advertise the address our peer sees us with instead, and could get inbound peers this way. Now, if we also have an onion service running (but aren't using tor as a proxy for clearnet connections), we could advertise our onion address to clearnet peers, so that they would be able to connect our clearnet and onion identities. \r\n\r\nThis PR tries to avoid these situations by \r\n1.) never advertising our local Tor or I2P address to peers from other networks.\r\n2.) never advertising local addresses from non-anonymity networks to peers from Tor or I2P\r\n\r\nNote that this affects only our own self-advertisements, the rules to forward other people's addrs are not changed.\r\n\r\n[Edit] after Initial [discussion](https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1497176155): CJDNS is not being treated like Tor and I2P at least for now, because it has different privacy properties and for the practical reason that it has still very few bitcoin nodes.\r\n",
          "user": {
            "login": "mzumsande",
            "id": 48763452,
            "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mzumsande",
            "html_url": "https://github.com/mzumsande",
            "followers_url": "https://api.github.com/users/mzumsande/followers",
            "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
            "organizations_url": "https://api.github.com/users/mzumsande/orgs",
            "repos_url": "https://api.github.com/users/mzumsande/repos",
            "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/mzumsande/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27411",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27411",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27411.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27411.patch"
          },
          "closed_at": "2023-07-13T17:51:24Z",
          "created_at": "2023-04-03T19:56:42Z",
          "updated_at": "2023-08-17T13:31:05Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "ready_for_review",
      "id": 9825062244,
      "node_id": "RFRE_lADOABII585rmZjfzwAAAAJJno1k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9825062244",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-14T19:24:22Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-15T05:52:59Z",
      "updated_at": "2023-07-15T05:52:59Z",
      "source": {
        "issue": {
          "id": 1697522226,
          "node_id": "PR_kwDOABII585P27uk",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27581",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27581/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27581/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27581/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27581",
          "number": 27581,
          "state": "open",
          "state_reason": null,
          "title": "net: Continuous ASMap health check",
          "body": "There are certain statistics we can collect by running all our known clearnet addresses against the ASMap file. This could show issues with a maliciously manipulated file or with an old file that has decayed with time.\r\n\r\nThis is just a proof of concept for now. My idea currently is to run the analysis once per day and print the results to logs if an ASMap file is used.",
          "user": {
            "login": "fjahr",
            "id": 1322187,
            "node_id": "MDQ6VXNlcjEzMjIxODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjahr",
            "html_url": "https://github.com/fjahr",
            "followers_url": "https://api.github.com/users/fjahr/followers",
            "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
            "organizations_url": "https://api.github.com/users/fjahr/orgs",
            "repos_url": "https://api.github.com/users/fjahr/repos",
            "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fjahr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27581",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27581",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27581.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27581.patch"
          },
          "created_at": "2023-05-05T12:16:53Z",
          "updated_at": "2023-09-19T08:57:44Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-15T06:12:27Z",
      "updated_at": "2023-07-15T06:12:27Z",
      "source": {
        "issue": {
          "id": 1678541218,
          "node_id": "PR_kwDOABII585O3QRm",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27509",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27509/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27509/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27509/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27509",
          "number": 27509,
          "state": "open",
          "state_reason": null,
          "title": "Relay own transactions only via short-lived Tor or I2P connections",
          "body": "To improve privacy, relay locally submitted transactions (from the wallet or via RPC) to the P2P network only via Tor or I2P short-lived connections.\r\n\r\n* Introduce a new connection type for relaying sensitive data (our own transactions) with the following properties:\r\n  * started whenever there are local unbroadcast transactions to be sent\r\n  * only opened to Tor or I2P peers\r\n  * opened regardless of max connections limits\r\n  * after handshake is completed one local transaction is pushed to the peer and the connection is closed\r\n  * ignore all incoming messages after handshake is completed\r\n\r\n* Relay locally submitted transactions (from the wallet or via RPC) using this new mechanism, to a few Tor or I2P peers.\r\n\r\n* Hide those transactions from `GETDATA` and `MEMPOOL` requests, as if we don't have them.\r\n\r\n* Once we get an `INV` from somebody, request the transaction with `GETDATA`, as if we didn't have it before.\r\n\r\n* After we receive the full transaction as a `TX` message, in reply to our `GETDATA` request, only then consider the transaction has propagated through the network and remove it from the unbroadcast list.\r\n\r\n* `INV` it to others as a result of the `TX` message we get, like what we do with transactions that are not ours.\r\n\r\nThe messages exchange should look like this:\r\n\r\n```\r\ntx-sender >--- connect -------> tx-recipient\r\ntx-sender >--- VERSION -------> tx-recipient\r\ntx-sender <--- VERSION -------< tx-recipient\r\ntx-sender <--- WTXIDRELAY ----< tx-recipient (maybe) \r\ntx-sender <--- SENDADDRV2 ----< tx-recipient (maybe) \r\ntx-sender <--- SENDTXRCNCL ---< tx-recipient (maybe) \r\ntx-sender <--- VERACK --------< tx-recipient\r\ntx-sender >--- VERACK --------> tx-recipient\r\ntx-sender >--- TX ------------> tx-recipient\r\ntx-sender >--- PING ----------> tx-recipient\r\ntx-sender <--- PONG ----------< tx-recipient\r\ntx-sender disconnects\r\n```\r\n\r\nWhenever a new local transaction is received (from the wallet or RPC), the node will send it to 5 (`SENSITIVE_RELAY_NUM_BROADCAST_PER_TX`) recipients right away. If after 10-15 mins we still have not heard anything about the transaction from the network, then it will be sent to 5 more peers (see `PeerManagerImpl::ReattemptInitialBroadcast()`).\r\n\r\nA few considerations:\r\n* The short-lived sensitive relay connections are very cheap and fast wrt network traffic. It is expected that some of those peers will blackhole the transaction. Just one honest/proper peer is enough for successful propagation.\r\n* The peers that receive the transaction could deduce that this is initial transaction broadcast from the transaction originator. This is ok, they can't identify the sender.\r\n\r\nTODO:\r\n* [x] Disable if `-connect` is used or Tor and I2P are not reachable.\r\n* [x] Use I2P transient connections even if listening on I2P.\r\n* [x] Do something with the user-agent string (could reveal identity if it has been personalized) and make sure no identifying information in the `VERSION` message. Done: took the [suggestion below](https://github.com/bitcoin/bitcoin/pull/27509#issuecomment-1517896418).\r\n* [x] Improve the condition when we consider the transaction seen by the network: right now a single INV from somebody suffices (this is still an improvement over `master` which is ok right after pushing the tx to a peer). We could wait for more than one INV, from peers that we have selected (outbound) and that are specifically not the ones we broadcasted to (via short-lived connection). Edit: One `INV` should be enough because after that we broadcast the transaction to everybody we are connected to (like if it is not ours).\r\n* [ ] Idea: start with one connection per transaction (not 5 as it is now), optimistically assuming it will be sufficient. (numbers are examples) After 1 minute, if still not received from the network, try 2 connections, after a few minutes try more. If still unsuccessful after 10 minutes, then fall back to the old mechanism.\r\n\r\nThis is supposed to address:\r\nhttps://github.com/bitcoin/bitcoin/issues/3828\r\nhttps://github.com/bitcoin/bitcoin/issues/14692\r\nhttps://github.com/bitcoin/bitcoin/issues/19042\r\nhttps://github.com/bitcoin/bitcoin/issues/24557\r\nhttps://github.com/bitcoin/bitcoin/issues/25450\r\n",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 57,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27509",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27509",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27509.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27509.patch"
          },
          "created_at": "2023-04-21T13:39:19Z",
          "updated_at": "2023-09-16T07:39:16Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "comment_deleted",
      "id": 9827803487,
      "node_id": "CDE_lADOABII585rmZjfzwAAAAJJyGFf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9827803487",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-15T06:48:27Z"
    },
    {
      "event": "reviewed",
      "id": 1533381378,
      "node_id": "PRR_kwDOABII585bZYsC",
      "url": null,
      "actor": null,
      "commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK but I think some changes are unnecessary churn",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#pullrequestreview-1533381378",
      "submitted_at": "2023-07-17T18:23:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9842338324,
      "node_id": "HRFPE_lADOABII585rmZjfzwAAAAJKpioU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9842338324",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-17T20:19:30Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9842504366,
      "node_id": "HRFPE_lADOABII585rmZjfzwAAAAJKqLKu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9842504366",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-17T20:35:00Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9842597897,
      "node_id": "HRFPE_lADOABII585rmZjfzwAAAAJKqiAJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9842597897",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-17T20:44:16Z"
    },
    {
      "event": "commented",
      "id": 1638982355,
      "node_id": "IC_kwDOABII585hsOLT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1638982355",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-17T22:37:23Z",
      "updated_at": "2023-07-17T22:37:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you for the excellent review @stickies-v -- updated to take your feedback.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1638982355",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078"
    },
    {
      "event": "mentioned",
      "id": 9843459486,
      "node_id": "MEE_lADOABII585rmZjfzwAAAAJKt0We",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9843459486",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-17T22:37:23Z"
    },
    {
      "event": "subscribed",
      "id": 9843459502,
      "node_id": "SE_lADOABII585rmZjfzwAAAAJKt0Wu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9843459502",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-17T22:37:24Z"
    },
    {
      "event": "reviewed",
      "id": 1534736352,
      "node_id": "PRR_kwDOABII585bejfg",
      "url": null,
      "actor": null,
      "commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK 5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#pullrequestreview-1534736352",
      "submitted_at": "2023-07-18T11:05:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
    },
    {
      "event": "reviewed",
      "id": 1534800401,
      "node_id": "PRR_kwDOABII585bezIR",
      "url": null,
      "actor": null,
      "commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#pullrequestreview-1534800401",
      "submitted_at": "2023-07-18T11:14:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9853354029,
      "node_id": "HRFPE_lADOABII585rmZjfzwAAAAJLTkAt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9853354029",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-18T17:09:26Z"
    },
    {
      "event": "reviewed",
      "id": 1535860538,
      "node_id": "PRR_kwDOABII585bi186",
      "url": null,
      "actor": null,
      "commit_id": "c69a74229da514228d3388e9652d2ea2e89224d7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#pullrequestreview-1535860538",
      "submitted_at": "2023-07-18T20:37:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
    },
    {
      "event": "commented",
      "id": 1640997776,
      "node_id": "IC_kwDOABII585hz6OQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1640997776",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-18T21:11:26Z",
      "updated_at": "2023-07-18T21:11:26Z",
      "author_association": "MEMBER",
      "body": "I thought we were going to avoid unproductive refactors?",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1640997776",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078"
    },
    {
      "event": "commented",
      "id": 1641078447,
      "node_id": "IC_kwDOABII585h0N6v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1641078447",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-18T22:36:24Z",
      "updated_at": "2023-07-18T22:36:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I thought we were going to avoid unproductive refactors?\r\n\r\nI'm unaware of the context behind that comment but see similar refactoring in many pull requests and, in general, there are good reasons for them; in this case, removing unneeded exports and simplifying and removing code.  (If you'd like to review a pull that fixes something, may I re-review beg for https://github.com/bitcoin/bitcoin/pull/27231 that was updated to take your feedback? Thanks!)",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1641078447",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078"
    },
    {
      "event": "reviewed",
      "id": 1536990151,
      "node_id": "PRR_kwDOABII585bnJvH",
      "url": null,
      "actor": null,
      "commit_id": "c69a74229da514228d3388e9652d2ea2e89224d7",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK c69a74229da514228d3388e9652d2ea2e89224d7\r\n\r\nGood changes, easy to review. Thanks!\r\n\r\nAbout the commit messages:\r\n`Move IsPeerAddrLocalGood() from header to implementation`\r\nit was in the `.cpp` file before (it was not in the header file). Better: `make IsPeerAddrLocalGood() private in net.cpp since it is not used outside of that file`. Same for\r\n`Move CaptureMessageToFile() from header to implementation` and\r\n`Move GetLocal() from header to implementation`.\r\n",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#pullrequestreview-1536990151",
      "submitted_at": "2023-07-19T12:55:10Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRlY2NmMWM0ODQ4NjIwY2ZmZjJhOTY0MmM1YTZiNWFjZGZiYzMzYmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/deccf1c4848620cfff2a9642c5a6b5acdfbc33bd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/deccf1c4848620cfff2a9642c5a6b5acdfbc33bd",
      "tree": {
        "sha": "add5e83ef692b343ee41c521eccd6460e28a7f8a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/add5e83ef692b343ee41c521eccd6460e28a7f8a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4a1aae67498ff8e9aa7ce97fef70b973c604f892",
          "sha": "4a1aae67498ff8e9aa7ce97fef70b973c604f892",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4a1aae67498ff8e9aa7ce97fef70b973c604f892"
        }
      ],
      "message": "Move IsPeerAddrLocalGood() declaration from header to implementation",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T17:48:49Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-13T19:01:54Z"
      },
      "sha": "deccf1c4848620cfff2a9642c5a6b5acdfbc33bd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDExNDI2ZjY1NTdhYzA5NDg5ZDVlMTNiZjNiOWQ5NGZiZDUwNzNjOGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/11426f6557ac09489d5e13bf3b9d94fbd5073c8e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/11426f6557ac09489d5e13bf3b9d94fbd5073c8e",
      "tree": {
        "sha": "b452a9cae186defa0ecae471c872ebf07b08b723",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b452a9cae186defa0ecae471c872ebf07b08b723"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/deccf1c4848620cfff2a9642c5a6b5acdfbc33bd",
          "sha": "deccf1c4848620cfff2a9642c5a6b5acdfbc33bd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/deccf1c4848620cfff2a9642c5a6b5acdfbc33bd"
        }
      ],
      "message": "Move CaptureMessageToFile() declaration from header to implementation",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T17:49:16Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-13T20:30:30Z"
      },
      "sha": "11426f6557ac09489d5e13bf3b9d94fbd5073c8e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDViYTczY2QwZWUxZTY2MWVjNGQwNDFhYzhhZTdhNjBjZmQzMWYwYzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ba73cd0ee1e661ec4d041ac8ae7a60cfd31f0c0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5ba73cd0ee1e661ec4d041ac8ae7a60cfd31f0c0",
      "tree": {
        "sha": "dceb64794c13576e60969d86280ef4bb835a0436",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dceb64794c13576e60969d86280ef4bb835a0436"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/11426f6557ac09489d5e13bf3b9d94fbd5073c8e",
          "sha": "11426f6557ac09489d5e13bf3b9d94fbd5073c8e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/11426f6557ac09489d5e13bf3b9d94fbd5073c8e"
        }
      ],
      "message": "Move GetLocal() declaration from header to implementation",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T17:49:21Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-13T18:14:16Z"
      },
      "sha": "5ba73cd0ee1e661ec4d041ac8ae7a60cfd31f0c0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZiNDI2NTc0N2M5ZWIwMjJkODBjNmYyOTg4ZTU3NGM2ODkxMzAzNDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fb4265747c9eb022d80c6f2988e574c689130348",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fb4265747c9eb022d80c6f2988e574c689130348",
      "tree": {
        "sha": "dcf2a0c2b5cdd90fcc4df668d380454223c5daa8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dcf2a0c2b5cdd90fcc4df668d380454223c5daa8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ba73cd0ee1e661ec4d041ac8ae7a60cfd31f0c0",
          "sha": "5ba73cd0ee1e661ec4d041ac8ae7a60cfd31f0c0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5ba73cd0ee1e661ec4d041ac8ae7a60cfd31f0c0"
        }
      ],
      "message": "Add and use CNetAddr::HasCJDNSPrefix() helper",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T17:49:27Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-14T16:48:30Z"
      },
      "sha": "fb4265747c9eb022d80c6f2988e574c689130348"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRmNDg4NTYzYjI4MGM2M2Y1ZDc0ZDVhYzBmY2IxYTJjYWQ0ODlkNTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/df488563b280c63f5d74d5ac0fcb1a2cad489d55",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/df488563b280c63f5d74d5ac0fcb1a2cad489d55",
      "tree": {
        "sha": "d76b92efaf2fb8cd3fe2571b4f5fa77f7702c42e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d76b92efaf2fb8cd3fe2571b4f5fa77f7702c42e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fb4265747c9eb022d80c6f2988e574c689130348",
          "sha": "fb4265747c9eb022d80c6f2988e574c689130348",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fb4265747c9eb022d80c6f2988e574c689130348"
        }
      ],
      "message": "GetLocal() type-safety, naming, const, and formatting cleanups\n\nCo-authored-by: Jon Atack <jon@atack.com>",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T17:49:27Z"
      },
      "author": {
        "name": "stickies-v",
        "email": "stickies-v@protonmail.com",
        "date": "2023-07-18T16:07:41Z"
      },
      "sha": "df488563b280c63f5d74d5ac0fcb1a2cad489d55"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9865576246,
      "node_id": "HRFPE_lADOABII585rmZjfzwAAAAJMCL82",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9865576246",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T17:58:22Z"
    },
    {
      "event": "commented",
      "id": 1642518571,
      "node_id": "IC_kwDOABII585h5tgr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1642518571",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T18:00:14Z",
      "updated_at": "2023-07-21T13:10:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated to take all feedback by @stickies-v and @vasild -- thank you!",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1642518571",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078"
    },
    {
      "event": "mentioned",
      "id": 9865592033,
      "node_id": "MEE_lADOABII585rmZjfzwAAAAJMCPzh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9865592033",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T18:00:15Z"
    },
    {
      "event": "subscribed",
      "id": 9865592041,
      "node_id": "SE_lADOABII585rmZjfzwAAAAJMCPzp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9865592041",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T18:00:15Z"
    },
    {
      "event": "mentioned",
      "id": 9865592055,
      "node_id": "MEE_lADOABII585rmZjfzwAAAAJMCPz3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9865592055",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T18:00:15Z"
    },
    {
      "event": "subscribed",
      "id": 9865592065,
      "node_id": "SE_lADOABII585rmZjfzwAAAAJMCP0B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9865592065",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T18:00:15Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9865814116,
      "node_id": "HRFPE_lADOABII585rmZjfzwAAAAJMDGBk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9865814116",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T18:16:09Z"
    },
    {
      "event": "labeled",
      "id": 9865815616,
      "node_id": "LE_lADOABII585rmZjfzwAAAAJMDGZA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9865815616",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T18:16:15Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA3ZjU4OTE1ODgzNTE1MWE3NjEzZTRiMmE1MDhjMGRkNjFhMThmZDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/07f589158835151a7613e4b2a508c0dd61a18fd7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/07f589158835151a7613e4b2a508c0dd61a18fd7",
      "tree": {
        "sha": "3944a71beca6c9c80ee906617cdaede296c3ae65",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3944a71beca6c9c80ee906617cdaede296c3ae65"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/df488563b280c63f5d74d5ac0fcb1a2cad489d55",
          "sha": "df488563b280c63f5d74d5ac0fcb1a2cad489d55",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/df488563b280c63f5d74d5ac0fcb1a2cad489d55"
        }
      ],
      "message": "Add CNetAddr::IsPrivacyNet() and CNode::IsConnectedThroughPrivacyNet()\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T18:40:45Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T17:11:06Z"
      },
      "sha": "07f589158835151a7613e4b2a508c0dd61a18fd7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYxMzA0ZGIxMzZiYmVhYzcwYjUyNTIyYjVhNDUyMjE2NWJmYjNmYzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f1304db136bbeac70b52522b5a4522165bfb3fc0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f1304db136bbeac70b52522b5a4522165bfb3fc0",
      "tree": {
        "sha": "acf280aa799ff57012d9b30e9ba56f411d2bb47b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/acf280aa799ff57012d9b30e9ba56f411d2bb47b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/07f589158835151a7613e4b2a508c0dd61a18fd7",
          "sha": "07f589158835151a7613e4b2a508c0dd61a18fd7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/07f589158835151a7613e4b2a508c0dd61a18fd7"
        }
      ],
      "message": "Use higher-level CNetAddr and CNode helpers in net.cpp\n\nrather than low-level comparisons with Network enum values.",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T18:42:48Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-14T12:51:21Z"
      },
      "sha": "f1304db136bbeac70b52522b5a4522165bfb3fc0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUzMTZhZTVkZDhkOTA2MjNmOWJiODgzYmIyNTNmYTY0NjNlZTRkMzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5316ae5dd8d90623f9bb883bb253fa6463ee4d34",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5316ae5dd8d90623f9bb883bb253fa6463ee4d34",
      "tree": {
        "sha": "b37bfd5ab666a55ec59b527f7c1f3c1bddbaf7c0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b37bfd5ab666a55ec59b527f7c1f3c1bddbaf7c0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f1304db136bbeac70b52522b5a4522165bfb3fc0",
          "sha": "f1304db136bbeac70b52522b5a4522165bfb3fc0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f1304db136bbeac70b52522b5a4522165bfb3fc0"
        }
      ],
      "message": "Convert GetLocal() to std::optional and remove out-param\n\nCo-authored-by: stickies-v <stickies-v@protonmail.com>",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T18:43:05Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-13T18:38:06Z"
      },
      "sha": "5316ae5dd8d90623f9bb883bb253fa6463ee4d34"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRlY2ZkM2VhZjQzNGQ4Njg0NTU0NjZlMDAxYWRhZTRiNjg1MTVhYjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4ecfd3eaf434d868455466e001adae4b68515ab8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4ecfd3eaf434d868455466e001adae4b68515ab8",
      "tree": {
        "sha": "c05fac4c09927974d85b1a37e8422efcb2c5bb8b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c05fac4c09927974d85b1a37e8422efcb2c5bb8b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5316ae5dd8d90623f9bb883bb253fa6463ee4d34",
          "sha": "5316ae5dd8d90623f9bb883bb253fa6463ee4d34",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5316ae5dd8d90623f9bb883bb253fa6463ee4d34"
        }
      ],
      "message": "Inline short, often-called, rarely-changed basic CNetAddr getters\n\nand make them nodiscard.\n\nMember functions containing a few lines of code are usually inlined, either\nimplicitly by defining them in the declaration as done here, or declared inline.\n\nReferences\nhttps://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Rf-inline\nhttps://google.github.io/styleguide/cppguide#Inline_Functions\nhttps://www.ibm.com/docs/en/i/7.1?topic=only-inline-member-functions-c",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-19T18:43:05Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-07-14T13:08:23Z"
      },
      "sha": "4ecfd3eaf434d868455466e001adae4b68515ab8"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9866143539,
      "node_id": "HRFPE_lADOABII585rmZjfzwAAAAJMEWcz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9866143539",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T18:45:38Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-20T07:16:55Z",
      "updated_at": "2023-07-20T07:16:55Z",
      "source": {
        "issue": {
          "id": 1471685707,
          "node_id": "PR_kwDOABII585EFGFt",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26621",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26621/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26621/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26621/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26621",
          "number": 26621,
          "state": "open",
          "state_reason": null,
          "title": "refactor: Continue moving application data from CNode to Peer",
          "body": "This PR picks up a subset of changes from #24970 and additionally moves `m_bip152_highbandwith{to,from}`, `nTimeOffset`, `nVersion`, `m_greates_common_version`.",
          "user": {
            "login": "dergoegge",
            "id": 8077169,
            "node_id": "MDQ6VXNlcjgwNzcxNjk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dergoegge",
            "html_url": "https://github.com/dergoegge",
            "followers_url": "https://api.github.com/users/dergoegge/followers",
            "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
            "organizations_url": "https://api.github.com/users/dergoegge/orgs",
            "repos_url": "https://api.github.com/users/dergoegge/repos",
            "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/dergoegge/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26621",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26621",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26621.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26621.patch"
          },
          "created_at": "2022-12-01T17:26:32Z",
          "updated_at": "2023-09-20T16:24:56Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-20T09:11:06Z",
      "updated_at": "2023-07-20T09:11:06Z",
      "source": {
        "issue": {
          "id": 1273517561,
          "node_id": "PR_kwDOABII5845xiLt",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25390",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25390/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25390/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25390/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25390",
          "number": 25390,
          "state": "open",
          "state_reason": null,
          "title": "sync: introduce a thread-safe generic container and use it to remove a bunch of \"GlobalMutex\"es",
          "body": "Introduce a generic container that provides a thread-safe access to any object by using a mutex which is acquired every time the object accessed.\r\n\r\nFor example:\r\n\r\n```cpp\r\nSynced<std::unordered_map<int, int>> m{{3, 9}, {4, 16}};\r\n\r\n{\r\n    SYNCED_LOCK(m, m_locked);\r\n\r\n    // m_locked represents the internal object, i.e. std::unordered_map,\r\n    // while m_locked is in scope the internal mutex is locked.\r\n\r\n    auto it = m_locked->find(3);\r\n    if (it != m_locked->end()) {\r\n        std::cout << it->second << std::endl;\r\n    }\r\n\r\n    for (auto& [k, v] : *m_locked) {\r\n        std::cout << k << \", \" << v << std::endl;\r\n    }\r\n}\r\n\r\nWITH_SYNCED_LOCK(m, p, p->emplace(5, 25));\r\n```\r\n\r\nRemove the global mutexes `g_maplocalhost_mutex`, `g_deadline_timers_mutex`, `cs_dir_locks`, `g_loading_wallet_mutex`, `g_wallet_release_mutex` and use `Synced<T>` instead.\r\n\r\n## Benefits\r\n\r\n_copied from a [comment below](https://github.com/bitcoin/bitcoin/pull/25390#issuecomment-1169788319):_\r\n\r\nThe `Synced<T>` abstraction is similar to what is suggested in [this comment](https://github.com/bitcoin/bitcoin/pull/24931#discussion_r890636987) but it does so in a generic way to avoid code repetition. Its benefit is:\r\n\r\n1. It avoids code repetition at the implementation sites. See [PR#26151](https://github.com/bitcoin/bitcoin/pull/26151) for a live example. Namely this:\r\n\r\n<details>\r\n<summary>Lots of repetitions (92 lines)</summary>\r\n\r\n```cpp\r\nclass Foo\r\n{\r\npublic:\r\n    void PushBack(x)\r\n    {\r\n        LOCK(m_mutex);\r\n        m_data.push_back(x);\r\n    }\r\n\r\n    size_t Size()\r\n    {\r\n        LOCK(m_mutex);\r\n        return m_data.size();\r\n    }\r\n\r\n    // maybe also other methods if needed...\r\n\r\n    auto Lock()\r\n    {\r\n        return DebugLock<Mutex>{m_mutex, \"Foo::m_mutex\", __FILE__, __LINE__};\r\n    }\r\n\r\nprivate:\r\n    Mutex m_mutex;\r\n    std::vector<int> m_data;\r\n};\r\n\r\nclass Bar\r\n{\r\npublic:\r\n    void PushBack(x)\r\n    {\r\n        LOCK(m_mutex);\r\n        m_data.push_back(x);\r\n    }\r\n\r\n    size_t Size()\r\n    {\r\n        LOCK(m_mutex);\r\n        return m_data.size();\r\n    }\r\n\r\n    // maybe also other methods if needed...\r\n\r\n    auto Lock()\r\n    {\r\n        return DebugLock<Mutex>{m_mutex, \"Bar::m_mutex\", __FILE__, __LINE__};\r\n    }\r\n\r\nprivate:\r\n    Mutex m_mutex;\r\n    std::vector<std::string> m_data;\r\n};\r\n\r\nclass Baz\r\n{\r\npublic:\r\n    void Insert(x)\r\n    {\r\n        LOCK(m_mutex);\r\n        m_data.insert(x);\r\n    }\r\n\r\n    size_t Size()\r\n    {\r\n        LOCK(m_mutex);\r\n        return m_data.size();\r\n    }\r\n\r\n    // maybe also other methods if needed...\r\n\r\n    auto Lock()\r\n    {\r\n        return DebugLock<Mutex>{m_mutex, \"Baz::m_mutex\", __FILE__, __LINE__};\r\n    }\r\n\r\nprivate:\r\n    Mutex m_mutex;\r\n    std::set<std::string> m_data;\r\n};\r\n```\r\n</details>\r\n\r\nbecomes this:\r\n\r\n<details>\r\n<summary>Short (3 lines)</summary>\r\n\r\n```cpp\r\nSynced<std::vector<int>> Foo;\r\nSynced<std::vector<std::string>> Bar;\r\nSynced<std::set<std::string>> Baz;\r\n```\r\n</details>\r\n\r\n2. The mutex is properly encapsulated. With a global mutex and a global variable annotated with `GUARDED_BY()` it is indeed not possible to add new code that accesses the variable without protection (if using Clang and `-Wthread-safety-analysis` and `-Werror`), but it is possible to abuse the mutex and start using it to protect some more, possibly unrelated stuff (we already have this in the current code).\r\n",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 1392286103,
              "node_id": "MDU6TGFiZWwxMzkyMjg2MTAz",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20Conceptual%20Review",
              "name": "Needs Conceptual Review",
              "description": "",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 25,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25390",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25390",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25390.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25390.patch"
          },
          "created_at": "2022-06-16T12:46:53Z",
          "updated_at": "2023-09-20T17:08:55Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "unlabeled",
      "id": 9875500621,
      "node_id": "UNLE_lADOABII585rmZjfzwAAAAJMoC5N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9875500621",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-20T14:41:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 9917263008,
      "node_id": "LE_lADOABII585rmZjfzwAAAAJPHWyg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9917263008",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-25T22:46:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9930855155,
      "node_id": "UNLE_lADOABII585rmZjfzwAAAAJP7NLz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9930855155",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-27T03:19:26Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1659899169,
      "node_id": "IC_kwDOABII585i8A0h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1659899169",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-01T09:09:23Z",
      "updated_at": "2023-08-01T09:09:23Z",
      "author_association": "MEMBER",
      "body": "I think some of the changes here are fine, but seem to be done somewhat verbosely.\r\n\r\nThere are 3 commits (5ba73cd0ee1e661ec4d041ac8ae7a60cfd31f0c0, df488563b280c63f5d74d5ac0fcb1a2cad489d55, 5316ae5dd8d90623f9bb883bb253fa6463ee4d34) that independently change/refactor `GetLocal()`. Any reason they can't be combined, and avoid touching the same line of code 3 times?\r\n\r\nSpeaking generally, not sure about the addition of `[nodiscard]`. It's not clear that is something that other project contributors agree with, i.e: discussion in this thread: https://github.com/bitcoin/bitcoin/pull/27675#discussion_r1254980474.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1659899169",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078"
    },
    {
      "event": "commented",
      "id": 1659940762,
      "node_id": "IC_kwDOABII585i8K-a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1659940762",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-01T09:34:23Z",
      "updated_at": "2023-08-01T09:34:23Z",
      "author_association": "MEMBER",
      "body": "> It's not clear that is something that other project contributors agree with, i.e: discussion in this thread: https://github.com/bitcoin/bitcoin/pull/27675#discussion_r1254980474.\r\n\r\nI can see the desire to enforce it everywhere, but then it should be done via clang-tidy or a clang-tidy plugin. Ideally without modifying the source code at all.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1659940762",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078"
    },
    {
      "event": "reviewed",
      "id": 1556652326,
      "node_id": "PRR_kwDOABII585cyKEm",
      "url": null,
      "actor": null,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 4ecfd3eaf434d868455466e001adae4b68515ab8\r\n\r\nI am also ok to add new functions in the same commit in which they are going to be used.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#pullrequestreview-1556652326",
      "submitted_at": "2023-08-01T10:16:15Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
    },
    {
      "event": "commented",
      "id": 1660036151,
      "node_id": "IC_kwDOABII585i8iQ3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1660036151",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-01T10:31:34Z",
      "updated_at": "2023-08-01T10:31:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "_offtopic `[[nodiscard]]`_\r\n\r\nThere are 3 classes of functions wrt `[[nodiscard]]`:\r\n\r\n1. where ignoring the result is harmful, it probably means a bug in the program, for example [write(2)](https://man7.org/linux/man-pages/man2/write.2.html)\r\n2. where ignoring the result is ok and the code is equivalent without the call, aka it does not make sense to call the function, its call should be removed because it clutters the source code and makes the program slower, for example [strlen(3)](https://man7.org/linux/man-pages/man3/strlen.3.html)\r\n3. where ignoring the result is ok and the function has side effects which are desirable at the call site, for example [snprintf(3)](https://man7.org/linux/man-pages/man3/snprintf.3p.html)\r\n\r\nI guess `[[nodiscard]]` is desirable for 1. and 2. but not for 3.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1660036151",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078"
    },
    {
      "event": "commented",
      "id": 1662864782,
      "node_id": "IC_kwDOABII585jHU2O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1662864782",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-02T19:35:37Z",
      "updated_at": "2023-08-02T20:01:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re `offtopic [[nodiscard]]` yes, and some contributors have been using it consistently in cases 1 and 2. I think it's fine for an author not to take a review suggestion to use it, or for the two cases mentioned, to use it in code they write or touch. A bit like the usage of `const`, perhaps. It's a handy addition to C++. If I have it wrong in a place, happy to update.\r\n\r\n> There are 3 commits ([5ba73cd](https://github.com/bitcoin/bitcoin/commit/5ba73cd0ee1e661ec4d041ac8ae7a60cfd31f0c0), [df48856](https://github.com/bitcoin/bitcoin/commit/df488563b280c63f5d74d5ac0fcb1a2cad489d55), [5316ae5](https://github.com/bitcoin/bitcoin/commit/5316ae5dd8d90623f9bb883bb253fa6463ee4d34)) that independently change/refactor `GetLocal()`.\r\n\r\nIn this case, the changes have only two lines of diff in common out of a few dozen, so there's little redundancy. They are different kinds of changes that make more sense separately and are easier to review that way -- which I strive for, like the comment above: *\"Good changes, easy to review. Thanks!\"* (Thanks!)\r\n",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#issuecomment-1662864782",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28078"
    },
    {
      "event": "review_requested",
      "id": 9994706759,
      "node_id": "RRE_lADOABII585rmZjfzwAAAAJTux9H",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9994706759",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-03T05:49:31Z",
      "requested_reviewer": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1560767388,
      "node_id": "PRR_kwDOABII585dB2uc",
      "url": null,
      "actor": null,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 4ecfd3eaf434d868455466e001adae4b68515ab8\r\n\r\nThat said:\r\n1. I was ~0 on the `[[nodiscard]]` changes before, but am now in favour of removing all the ones in this PR. The only place where it made sense, imo, was in 5ba73cd0ee1e661ec4d041ac8ae7a60cfd31f0c0 for `[[nodiscard]] static bool GetLocal(CService& addr, const CNode& peer)` where it's dangerous to use the out-parameter without checking the return value. Now, in all cases, the functions are entirely self explanatory and I don't really see any footguns. Keeping `[[nodiscard]]` for (potentially) dangerous places and catching inefficiences with clang-tidy e.a. seems like a much more productive way over filling up the codebase with `[[nodiscard]]` statements that mostly just make it less legible.\r\n2. I'd prefer dropping the last commit 4ecfd3eaf434d868455466e001adae4b68515ab8, it doesn't really add anything and could be considered arbitrary (for new code I'd slightly prefer inlining it as done in this PR, but I can see other people preferring the current, and then it's not worth the churn imo)",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#pullrequestreview-1560767388",
      "submitted_at": "2023-08-03T10:20:03Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-16T02:50:31Z",
      "updated_at": "2023-08-16T02:50:31Z",
      "source": {
        "issue": {
          "id": 1579504924,
          "node_id": "PR_kwDOABII585Js_-Z",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27071",
          "number": 27071,
          "state": "open",
          "state_reason": null,
          "title": "Handle CJDNS from LookupSubNet()",
          "body": "`LookupSubNet()` would treat addresses that start with `fc` as IPv6 even if `-cjdnsreachable` is set. This creates the following problems where it is called:\r\n\r\n* `NetWhitelistPermissions::TryParse()`: otherwise `-whitelist=` fails to white list CJDNS addresses: when a CJDNS peer connects to us, it will be matched against IPv6 `fc...` subnet and the match will never succeed.\r\n\r\n* `BanMapFromJson()`: CJDNS bans are stored as just IPv6 addresses in `banlist.json`. Upon reading from disk they have to be converted back to CJDNS, otherwise, after restart, a ban entry like (`fc00::1`, IPv6) would not match a peer (`fc00::1`, CJDNS).\r\n    \r\n* `RPCConsole::unbanSelectedNode()`: in the GUI the ban entries go through `CSubNet::ToString()` and back via `LookupSubNet()`. Then it must match whatever is stored in `BanMan`, otherwise it is impossible to unban via the GUI.\r\n\r\nThese were uncovered by https://github.com/bitcoin/bitcoin/pull/26859.\r\n\r\nThus, flip the result of `LookupSubNet()` to CJDNS if the network base address starts with `fc` and `-cjdnsreachable` is set. Since subnetting/masking does not make sense for CJDNS (the address is \"random\" bytes, like Tor and I2P, there is no hierarchy) treat `fc.../mask` as an invalid `CSubNet`.\r\n\r\nTo achieve that, `MaybeFlipIPv6toCJDNS()` has to be moved from `net` to `netbase` and thus also `IsReachable()`. In the process of moving `IsReachable()`, `SetReachable()` and `vfLimited[]` encapsulate those in a class.",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27071",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27071",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27071.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27071.patch"
          },
          "created_at": "2023-02-10T11:20:45Z",
          "updated_at": "2023-09-15T17:54:48Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "assigned",
      "id": 10426213571,
      "node_id": "AE_lADOABII585rmZjfzwAAAAJtc2TD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10426213571",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-20T17:52:30Z",
      "assignee": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265725273",
      "pull_request_review_id": 1533381378,
      "id": 1265725273,
      "node_id": "PRRC_kwDOABII585LcW9Z",
      "diff_hunk": "@@ -2915,10 +2911,8 @@ uint64_t CConnman::CalculateKeyedNetGroup(const CAddress& address) const\n     return GetDeterministicRandomizer(RANDOMIZER_ID_NETGROUP).Write(vchNetGroup.data(), vchNetGroup.size()).Finalize();\n }\n \n-void CaptureMessageToFile(const CAddress& addr,\n-                          const std::string& msg_type,\n-                          Span<const unsigned char> data,\n-                          bool is_incoming)\n+// Dump binary message to file, with timestamp.\n+static void CaptureMessageToFile(const CAddress& addr, const std::string& msg_type, Span<const unsigned char> data, bool is_incoming)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 96,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: not sure this is an improvement? I find the existing format easier to read, with less LoC change.",
      "created_at": "2023-07-17T18:01:59Z",
      "updated_at": "2023-07-17T18:23:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265725273",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265725273"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 2914,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2915,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265733802",
      "pull_request_review_id": 1533381378,
      "id": 1265733802,
      "node_id": "PRRC_kwDOABII585LcZCq",
      "diff_hunk": "@@ -177,7 +173,8 @@ bool GetLocal(CService& addr, const CNode& peer)\n             }\n         }\n     }\n-    return nBestScore >= 0;\n+    if (nBestScore == -1) return std::nullopt;\n+    return addr;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think this can be simplified further?\r\n```diff\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex 0d6b4f04a..c6c4c9a3e 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -149,7 +149,7 @@ uint16_t GetListenPort()\r\n [[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\r\n {\r\n     if (!fListen) return std::nullopt;\r\n-    CService addr;\r\n+    std::optional<CService> addr;\r\n     int nBestScore = -1;\r\n     int nBestReachability = -1;\r\n     {\r\n@@ -167,13 +167,12 @@ uint16_t GetListenPort()\r\n             int nReachability = entry.first.GetReachabilityFrom(peer.addr);\r\n             if (nReachability > nBestReachability || (nReachability == nBestReachability && nScore > nBestScore))\r\n             {\r\n-                addr = CService(entry.first, entry.second.nPort);\r\n+                addr.emplace(CService(entry.first, entry.second.nPort));\r\n                 nBestReachability = nReachability;\r\n                 nBestScore = nScore;\r\n             }\r\n         }\r\n     }\r\n-    if (nBestScore == -1) return std::nullopt;\r\n     return addr;\r\n }\r\n \r\n```",
      "created_at": "2023-07-17T18:09:43Z",
      "updated_at": "2023-07-17T18:23:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265733802",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265733802"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 180,
      "start_side": "LEFT",
      "line": null,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265737690",
      "pull_request_review_id": 1533381378,
      "id": 1265737690,
      "node_id": "PRRC_kwDOABII585LcZ_a",
      "diff_hunk": "@@ -208,9 +205,8 @@ static std::vector<CAddress> ConvertSeeds(const std::vector<uint8_t> &vSeedsIn)\n // one by discovery.\n CService GetLocalAddress(const CNode& peer)\n {\n-    CService addr;\n-    if (GetLocal(addr, peer)) {\n-        return addr;\n+    if (std::optional<CService> addr = GetLocal(peer)) {\n+        return addr.value();",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 47,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Entire function can be simplified to just:\r\n\r\n```cpp\r\n    return GetLocal(peer).value_or(CService{CNetAddr(), GetListenPort()});\r\n```",
      "created_at": "2023-07-17T18:13:48Z",
      "updated_at": "2023-07-17T18:23:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265737690",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265737690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 208,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265746027",
      "pull_request_review_id": 1533381378,
      "id": 1265746027,
      "node_id": "PRRC_kwDOABII585LccBr",
      "diff_hunk": "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsTorOrI2P() const { return IsTor() || IsI2P(); }",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 9,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I don't see the benefit of this helper function. It doesn't really make things more readable imo (the underlying calls are short and clear enough for me). It also feels quite arbitrary: what about `IsTorOrCJDNS()`, `IsI2POrCJDNS()`, ...? ",
      "created_at": "2023-07-17T18:21:48Z",
      "updated_at": "2023-07-17T18:23:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265746027",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265746027"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 169,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859575",
      "pull_request_review_id": 1533614518,
      "id": 1265859575,
      "node_id": "PRRC_kwDOABII585Lc3v3",
      "diff_hunk": "@@ -177,7 +173,8 @@ bool GetLocal(CService& addr, const CNode& peer)\n             }\n         }\n     }\n-    return nBestScore >= 0;\n+    if (nBestScore == -1) return std::nullopt;\n+    return addr;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "in_reply_to_id": 1265733802,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Very nice, done.",
      "created_at": "2023-07-17T20:22:36Z",
      "updated_at": "2023-07-17T20:22:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265859575",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859575"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 180,
      "start_side": "LEFT",
      "line": null,
      "original_line": 175,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859783",
      "pull_request_review_id": 1533615028,
      "id": 1265859783,
      "node_id": "PRRC_kwDOABII585Lc3zH",
      "diff_hunk": "@@ -208,9 +205,8 @@ static std::vector<CAddress> ConvertSeeds(const std::vector<uint8_t> &vSeedsIn)\n // one by discovery.\n CService GetLocalAddress(const CNode& peer)\n {\n-    CService addr;\n-    if (GetLocal(addr, peer)) {\n-        return addr;\n+    if (std::optional<CService> addr = GetLocal(peer)) {\n+        return addr.value();",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 47,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "in_reply_to_id": 1265737690,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Much better, thank you!",
      "created_at": "2023-07-17T20:22:50Z",
      "updated_at": "2023-07-17T20:22:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265859783",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265859783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 208,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265860411",
      "pull_request_review_id": 1533616698,
      "id": 1265860411,
      "node_id": "PRRC_kwDOABII585Lc387",
      "diff_hunk": "@@ -2915,10 +2911,8 @@ uint64_t CConnman::CalculateKeyedNetGroup(const CAddress& address) const\n     return GetDeterministicRandomizer(RANDOMIZER_ID_NETGROUP).Write(vchNetGroup.data(), vchNetGroup.size()).Finalize();\n }\n \n-void CaptureMessageToFile(const CAddress& addr,\n-                          const std::string& msg_type,\n-                          Span<const unsigned char> data,\n-                          bool is_incoming)\n+// Dump binary message to file, with timestamp.\n+static void CaptureMessageToFile(const CAddress& addr, const std::string& msg_type, Span<const unsigned char> data, bool is_incoming)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 96,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "in_reply_to_id": 1265725273,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I made the declaration on one line for the smaller diff, and I don't mind reading the parameter list left-to-right. But sure, kept it multi-line.",
      "created_at": "2023-07-17T20:23:38Z",
      "updated_at": "2023-07-17T20:23:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265860411",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265860411"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 2914,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2915,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265869787",
      "pull_request_review_id": 1533640753,
      "id": 1265869787,
      "node_id": "PRRC_kwDOABII585Lc6Pb",
      "diff_hunk": "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsTorOrI2P() const { return IsTor() || IsI2P(); }",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 9,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "in_reply_to_id": 1265746027,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Dropped the commit and instead added an `IsPrivacyNet()` helper for `GetLocal()` only, where it cleans things up. When we'll likely need to add `IsCJDNS()` to it later on (when there are more nodes running it), it will be simple to do and will keep `GetLocal()` easy to read.",
      "created_at": "2023-07-17T20:31:56Z",
      "updated_at": "2023-07-17T20:32:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1265869787",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1265869787"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 169,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266580999",
      "pull_request_review_id": 1534736352,
      "id": 1266580999,
      "node_id": "PRRC_kwDOABII585Lfn4H",
      "diff_hunk": "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsPrivacyNet() const { return IsTor() || IsI2P(); }\n+    [[nodiscard]] bool AddrHasCJDNSPrefix() const { return m_addr[0] == 0xfc; }",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 10,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: would not include the ~classname in method name\r\n\r\n```suggestion\r\n    [[nodiscard]] bool HasCJDNSPrefix() const { return m_addr[0] == 0xfc; }\r\n```",
      "created_at": "2023-07-18T10:32:44Z",
      "updated_at": "2023-07-18T11:05:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266580999",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266580999"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266584113",
      "pull_request_review_id": 1534736352,
      "id": 1266584113,
      "node_id": "PRRC_kwDOABII585Lfoox",
      "diff_hunk": "@@ -146,38 +146,35 @@ uint16_t GetListenPort()\n }\n \n // find 'best' local address for a particular peer\n-bool GetLocal(CService& addr, const CNode& peer)\n+[[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n-\n+    if (!fListen) return std::nullopt;\n+    std::optional<CService> addr;\n     int nBestScore = -1;\n     int nBestReachability = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n         for (const auto& entry : mapLocalHost)\n         {\n-            // For privacy reasons, don't advertise our privacy-network address\n-            // to other networks and don't advertise our other-network address\n-            // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n-            const Network peers_net{peer.ConnectedThroughNetwork()};\n-            if (our_net != peers_net &&\n-                (our_net == NET_ONION || our_net == NET_I2P ||\n-                 peers_net == NET_ONION || peers_net == NET_I2P)) {\n+            // For privacy reasons, don't advertise our privacy-network address to other\n+            // networks, and don't advertise our other-network address to privacy networks.\n+            // Note: consider adding IsCJDNS() to IsPrivacyNet() when there are more CJDNS peers;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: is \"TODO\" easier (i.e. more likely someone does it) to grep than \"Note:\"? Also, I think these last 2 lines are better placed near the definition of `IsPrivacyNet()`.",
      "created_at": "2023-07-18T10:35:47Z",
      "updated_at": "2023-07-18T11:05:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266584113",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266584113"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266591147",
      "pull_request_review_id": 1534736352,
      "id": 1266591147,
      "node_id": "PRRC_kwDOABII585LfqWr",
      "diff_hunk": "@@ -146,38 +146,35 @@ uint16_t GetListenPort()\n }\n \n // find 'best' local address for a particular peer\n-bool GetLocal(CService& addr, const CNode& peer)\n+[[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n-\n+    if (!fListen) return std::nullopt;\n+    std::optional<CService> addr;\n     int nBestScore = -1;\n     int nBestReachability = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n         for (const auto& entry : mapLocalHost)\n         {\n-            // For privacy reasons, don't advertise our privacy-network address\n-            // to other networks and don't advertise our other-network address\n-            // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n-            const Network peers_net{peer.ConnectedThroughNetwork()};\n-            if (our_net != peers_net &&\n-                (our_net == NET_ONION || our_net == NET_I2P ||\n-                 peers_net == NET_ONION || peers_net == NET_I2P)) {\n+            // For privacy reasons, don't advertise our privacy-network address to other\n+            // networks, and don't advertise our other-network address to privacy networks.\n+            // Note: consider adding IsCJDNS() to IsPrivacyNet() when there are more CJDNS peers;\n+            // see https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1497176155\n+            if (entry.first.GetNetwork() != peer.ConnectedThroughNetwork()",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "As we're now touching all these LoC, would suggest to clean up even further. Slightly increases the diff but worth it for readability imo.\r\n\r\n<details>\r\n<summary>git diff on 5d7188ed92908237ce51bbe6ed0a97472825c6b8</summary>\r\n\r\n```diff\r\ndiff --git a/src/net.cpp b/src/net.cpp\r\nindex eee179c8a..b35725ea2 100644\r\n--- a/src/net.cpp\r\n+++ b/src/net.cpp\r\n@@ -154,21 +154,21 @@ uint16_t GetListenPort()\r\n     int nBestReachability = -1;\r\n     {\r\n         LOCK(g_maplocalhost_mutex);\r\n-        for (const auto& entry : mapLocalHost)\r\n+        for (const auto& [local_addr, service_info] : mapLocalHost)\r\n         {\r\n             // For privacy reasons, don't advertise our privacy-network address to other\r\n             // networks, and don't advertise our other-network address to privacy networks.\r\n             // Note: consider adding IsCJDNS() to IsPrivacyNet() when there are more CJDNS peers;\r\n             // see https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1497176155\r\n-            if (entry.first.GetNetwork() != peer.ConnectedThroughNetwork()\r\n-                && (entry.first.IsPrivacyNet() || peer.addr.IsPrivacyNet() || peer.m_inbound_onion)) {\r\n+            if (local_addr.GetNetwork() != peer.ConnectedThroughNetwork()\r\n+                && (local_addr.IsPrivacyNet() || peer.addr.IsPrivacyNet() || peer.m_inbound_onion)) {\r\n                 continue;\r\n             }\r\n-            int nScore = entry.second.nScore;\r\n-            int nReachability = entry.first.GetReachabilityFrom(peer.addr);\r\n+            int nScore{service_info.nScore};\r\n+            int nReachability{local_addr.GetReachabilityFrom(peer.addr)};\r\n             if (nReachability > nBestReachability || (nReachability == nBestReachability && nScore > nBestScore))\r\n             {\r\n-                addr.emplace(CService{entry.first, entry.second.nPort});\r\n+                addr.emplace(CService{local_addr, service_info.nPort});\r\n                 nBestReachability = nReachability;\r\n                 nBestScore = nScore;\r\n             }\r\n\r\n```\r\n</details>\r\n\r\n",
      "created_at": "2023-07-18T10:42:56Z",
      "updated_at": "2023-07-18T11:05:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266591147",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266591147"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266596572",
      "pull_request_review_id": 1534736352,
      "id": 1266596572,
      "node_id": "PRRC_kwDOABII585Lfrrc",
      "diff_hunk": "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsTorOrI2P() const { return IsTor() || IsI2P(); }",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 9,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "b252918caa4475528225477026ac95c6edf817c2",
      "in_reply_to_id": 1265746027,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yeah I think that's a good approach.",
      "created_at": "2023-07-18T10:48:44Z",
      "updated_at": "2023-07-18T11:05:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266596572",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266596572"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 169,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266621620",
      "pull_request_review_id": 1534800401,
      "id": 1266621620,
      "node_id": "PRRC_kwDOABII585Lfxy0",
      "diff_hunk": "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsPrivacyNet() const { return IsTor() || IsI2P(); }\n+    [[nodiscard]] bool AddrHasCJDNSPrefix() const { return m_addr[0] == 0xfc; }",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 10,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe let's not move all these lines? A bit unnecessary churn, is fine as is imo.",
      "created_at": "2023-07-18T11:14:06Z",
      "updated_at": "2023-07-18T11:14:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1266621620",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1266621620"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 164,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267078962",
      "pull_request_review_id": 1535544825,
      "id": 1267078962,
      "node_id": "PRRC_kwDOABII585Lhhcy",
      "diff_hunk": "@@ -146,38 +146,35 @@ uint16_t GetListenPort()\n }\n \n // find 'best' local address for a particular peer\n-bool GetLocal(CService& addr, const CNode& peer)\n+[[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n-\n+    if (!fListen) return std::nullopt;\n+    std::optional<CService> addr;\n     int nBestScore = -1;\n     int nBestReachability = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n         for (const auto& entry : mapLocalHost)\n         {\n-            // For privacy reasons, don't advertise our privacy-network address\n-            // to other networks and don't advertise our other-network address\n-            // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n-            const Network peers_net{peer.ConnectedThroughNetwork()};\n-            if (our_net != peers_net &&\n-                (our_net == NET_ONION || our_net == NET_I2P ||\n-                 peers_net == NET_ONION || peers_net == NET_I2P)) {\n+            // For privacy reasons, don't advertise our privacy-network address to other\n+            // networks, and don't advertise our other-network address to privacy networks.\n+            // Note: consider adding IsCJDNS() to IsPrivacyNet() when there are more CJDNS peers;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "in_reply_to_id": 1266584113,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-07-18T17:07:04Z",
      "updated_at": "2023-07-18T17:07:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1267078962",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267078962"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267079059",
      "pull_request_review_id": 1535545030,
      "id": 1267079059,
      "node_id": "PRRC_kwDOABII585LhheT",
      "diff_hunk": "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsPrivacyNet() const { return IsTor() || IsI2P(); }\n+    [[nodiscard]] bool AddrHasCJDNSPrefix() const { return m_addr[0] == 0xfc; }",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 10,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "in_reply_to_id": 1266580999,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-07-18T17:07:10Z",
      "updated_at": "2023-07-18T17:07:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1267079059",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267079059"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267080536",
      "pull_request_review_id": 1535548214,
      "id": 1267080536,
      "node_id": "PRRC_kwDOABII585Lhh1Y",
      "diff_hunk": "@@ -146,38 +146,35 @@ uint16_t GetListenPort()\n }\n \n // find 'best' local address for a particular peer\n-bool GetLocal(CService& addr, const CNode& peer)\n+[[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n-\n+    if (!fListen) return std::nullopt;\n+    std::optional<CService> addr;\n     int nBestScore = -1;\n     int nBestReachability = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n         for (const auto& entry : mapLocalHost)\n         {\n-            // For privacy reasons, don't advertise our privacy-network address\n-            // to other networks and don't advertise our other-network address\n-            // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n-            const Network peers_net{peer.ConnectedThroughNetwork()};\n-            if (our_net != peers_net &&\n-                (our_net == NET_ONION || our_net == NET_I2P ||\n-                 peers_net == NET_ONION || peers_net == NET_I2P)) {\n+            // For privacy reasons, don't advertise our privacy-network address to other\n+            // networks, and don't advertise our other-network address to privacy networks.\n+            // Note: consider adding IsCJDNS() to IsPrivacyNet() when there are more CJDNS peers;\n+            // see https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1497176155\n+            if (entry.first.GetNetwork() != peer.ConnectedThroughNetwork()",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "in_reply_to_id": 1266591147,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nice! Took the liberty of adding a commit credited to you. LMK if that's ok and if you'd like any changes.",
      "created_at": "2023-07-18T17:08:39Z",
      "updated_at": "2023-07-18T17:08:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1267080536",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267080536"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267080665",
      "pull_request_review_id": 1535548521,
      "id": 1267080665,
      "node_id": "PRRC_kwDOABII585Lhh3Z",
      "diff_hunk": "@@ -161,9 +161,15 @@ class CNetAddr\n      */\n     bool SetSpecial(const std::string& addr);\n \n+    [[nodiscard]] bool IsIPv4() const { return m_net == NET_IPV4; } // IPv4 mapped address (::FFFF:0:0/96, 0.0.0.0/0)\n+    [[nodiscard]] bool IsIPv6() const { return m_net == NET_IPV6; } // IPv6 address (not mapped IPv4, not Tor)\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool IsPrivacyNet() const { return IsTor() || IsI2P(); }\n+    [[nodiscard]] bool AddrHasCJDNSPrefix() const { return m_addr[0] == 0xfc; }",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 10,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "in_reply_to_id": 1266621620,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-07-18T17:08:48Z",
      "updated_at": "2023-07-18T17:08:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1267080665",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267080665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 164,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267277566",
      "pull_request_review_id": 1535860538,
      "id": 1267277566,
      "node_id": "PRRC_kwDOABII585LiR7-",
      "diff_hunk": "@@ -179,14 +179,22 @@ class CNetAddr\n     bool IsRFC6052() const; // IPv6 well-known prefix for IPv4-embedded address (64:FF9B::/96)\n     bool IsRFC6145() const; // IPv6 IPv4-translated address (::FFFF:0:0:0/96) (actually defined in RFC2765)\n     bool IsHeNet() const;   // IPv6 Hurricane Electric - https://he.net (2001:0470::/36)\n-    bool IsTor() const;\n-    bool IsI2P() const;\n-    bool IsCJDNS() const;\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool HasCJDNSPrefix() const { return m_addr[0] == 0xfc; }\n     bool IsLocal() const;\n     bool IsRoutable() const;\n     bool IsInternal() const;\n     bool IsValid() const;\n \n+    /**\n+     * Whether this object is a privacy network for self-advertisement purposes in `GetLocal()`.",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 28,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "c69a74229da514228d3388e9652d2ea2e89224d7",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: no need to specify where it's used for a public method imo\r\n```suggestion\r\n     * Whether this object is a privacy network.\r\n```",
      "created_at": "2023-07-18T20:31:00Z",
      "updated_at": "2023-07-18T20:37:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1267277566",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267277566"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 192,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267279181",
      "pull_request_review_id": 1535860538,
      "id": 1267279181,
      "node_id": "PRRC_kwDOABII585LiSVN",
      "diff_hunk": "@@ -146,38 +146,35 @@ uint16_t GetListenPort()\n }\n \n // find 'best' local address for a particular peer\n-bool GetLocal(CService& addr, const CNode& peer)\n+[[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n-\n+    if (!fListen) return std::nullopt;\n+    std::optional<CService> addr;\n     int nBestScore = -1;\n     int nBestReachability = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n         for (const auto& entry : mapLocalHost)\n         {\n-            // For privacy reasons, don't advertise our privacy-network address\n-            // to other networks and don't advertise our other-network address\n-            // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n-            const Network peers_net{peer.ConnectedThroughNetwork()};\n-            if (our_net != peers_net &&\n-                (our_net == NET_ONION || our_net == NET_I2P ||\n-                 peers_net == NET_ONION || peers_net == NET_I2P)) {\n+            // For privacy reasons, don't advertise our privacy-network address to other\n+            // networks, and don't advertise our other-network address to privacy networks.\n+            // Note: consider adding IsCJDNS() to IsPrivacyNet() when there are more CJDNS peers;\n+            // see https://github.com/bitcoin/bitcoin/pull/27411#issuecomment-1497176155\n+            if (entry.first.GetNetwork() != peer.ConnectedThroughNetwork()",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "5d7188ed92908237ce51bbe6ed0a97472825c6b8",
      "in_reply_to_id": 1266591147,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Absolutely, thanks. Just left some small comments.",
      "created_at": "2023-07-18T20:32:54Z",
      "updated_at": "2023-07-18T20:37:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1267279181",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267279181"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267281474",
      "pull_request_review_id": 1535860538,
      "id": 1267281474,
      "node_id": "PRRC_kwDOABII585LiS5C",
      "diff_hunk": "@@ -148,36 +148,33 @@ uint16_t GetListenPort()\n // find 'best' local address for a particular peer\n [[nodiscard]] static bool GetLocal(CService& addr, const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n+    if (!fListen) return false;\n \n-    int nBestScore = -1;\n-    int nBestReachability = -1;\n+    int best_reachability = -1;\n+    int best_score = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n-        for (const auto& entry : mapLocalHost)\n-        {\n+        for (const auto& [local_addr, local_service_info] : mapLocalHost) {\n             // For privacy reasons, don't advertise our privacy-network address\n             // to other networks and don't advertise our other-network address\n             // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n+            const Network our_net{local_addr.GetNetwork()};\n             const Network peers_net{peer.ConnectedThroughNetwork()};\n             if (our_net != peers_net &&\n                 (our_net == NET_ONION || our_net == NET_I2P ||\n                  peers_net == NET_ONION || peers_net == NET_I2P)) {\n                 continue;\n             }\n-            int nScore = entry.second.nScore;\n-            int nReachability = entry.first.GetReachabilityFrom(peer.addr);\n-            if (nReachability > nBestReachability || (nReachability == nBestReachability && nScore > nBestScore))\n-            {\n-                addr = CService(entry.first, entry.second.nPort);\n-                nBestReachability = nReachability;\n-                nBestScore = nScore;\n+            const int reachability{local_addr.GetReachabilityFrom(peer.addr)};\n+            const int score{local_service_info.nScore};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "2d2575b92da65c8f852a538ec74717effcd3d603",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: any reason the order of these lines got switched? if not necessary, wouldn't do that",
      "created_at": "2023-07-18T20:35:26Z",
      "updated_at": "2023-07-18T20:37:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1267281474",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267281474"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 168,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 169,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267282655",
      "pull_request_review_id": 1535860538,
      "id": 1267282655,
      "node_id": "PRRC_kwDOABII585LiTLf",
      "diff_hunk": "@@ -148,36 +148,33 @@ uint16_t GetListenPort()\n // find 'best' local address for a particular peer\n [[nodiscard]] static bool GetLocal(CService& addr, const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n+    if (!fListen) return false;\n \n-    int nBestScore = -1;\n-    int nBestReachability = -1;\n+    int best_reachability = -1;\n+    int best_score = -1;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "2d2575b92da65c8f852a538ec74717effcd3d603",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: not sure the snake case is worth the added LoC (+further down). Would prefer to keep as is.",
      "created_at": "2023-07-18T20:36:53Z",
      "updated_at": "2023-07-18T20:37:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1267282655",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267282655"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 154,
      "start_side": "LEFT",
      "line": null,
      "original_line": 154,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267289243",
      "pull_request_review_id": 1535879214,
      "id": 1267289243,
      "node_id": "PRRC_kwDOABII585LiUyb",
      "diff_hunk": "@@ -148,36 +148,33 @@ uint16_t GetListenPort()\n // find 'best' local address for a particular peer\n [[nodiscard]] static bool GetLocal(CService& addr, const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n+    if (!fListen) return false;\n \n-    int nBestScore = -1;\n-    int nBestReachability = -1;\n+    int best_reachability = -1;\n+    int best_score = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n-        for (const auto& entry : mapLocalHost)\n-        {\n+        for (const auto& [local_addr, local_service_info] : mapLocalHost) {\n             // For privacy reasons, don't advertise our privacy-network address\n             // to other networks and don't advertise our other-network address\n             // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n+            const Network our_net{local_addr.GetNetwork()};\n             const Network peers_net{peer.ConnectedThroughNetwork()};\n             if (our_net != peers_net &&\n                 (our_net == NET_ONION || our_net == NET_I2P ||\n                  peers_net == NET_ONION || peers_net == NET_I2P)) {\n                 continue;\n             }\n-            int nScore = entry.second.nScore;\n-            int nReachability = entry.first.GetReachabilityFrom(peer.addr);\n-            if (nReachability > nBestReachability || (nReachability == nBestReachability && nScore > nBestScore))\n-            {\n-                addr = CService(entry.first, entry.second.nPort);\n-                nBestReachability = nReachability;\n-                nBestScore = nScore;\n+            const int reachability{local_addr.GetReachabilityFrom(peer.addr)};\n+            const int score{local_service_info.nScore};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "2d2575b92da65c8f852a538ec74717effcd3d603",
      "in_reply_to_id": 1267281474,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Alphabetical order, first use order, and consistency (see the last use).",
      "created_at": "2023-07-18T20:44:59Z",
      "updated_at": "2023-07-18T20:44:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1267289243",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1267289243"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 168,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 169,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268010664",
      "pull_request_review_id": 1536990151,
      "id": 1268010664,
      "node_id": "PRRC_kwDOABII585LlE6o",
      "diff_hunk": "@@ -145,39 +145,34 @@ uint16_t GetListenPort()\n     return static_cast<uint16_t>(gArgs.GetIntArg(\"-port\", Params().GetDefaultPort()));\n }\n \n-// find 'best' local address for a particular peer\n-bool GetLocal(CService& addr, const CNode& peer)\n+// Determine the \"best\" local address for a particular peer.\n+[[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n+    if (!fListen) return std::nullopt;\n \n-    int nBestScore = -1;\n-    int nBestReachability = -1;\n+    std::optional<CService> addr;\n+    int best_reachability = -1;\n+    int best_score = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n-        for (const auto& entry : mapLocalHost)\n-        {\n+        for (const auto& [local_addr, local_service_info] : mapLocalHost) {\n             // For privacy reasons, don't advertise our privacy-network address\n             // to other networks and don't advertise our other-network address\n             // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n-            const Network peers_net{peer.ConnectedThroughNetwork()};\n-            if (our_net != peers_net &&\n-                (our_net == NET_ONION || our_net == NET_I2P ||\n-                 peers_net == NET_ONION || peers_net == NET_I2P)) {\n+            if (local_addr.GetNetwork() != peer.ConnectedThroughNetwork()\n+                && (local_addr.IsPrivacyNet() || peer.addr.IsPrivacyNet() || peer.m_inbound_onion)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "c69a74229da514228d3388e9652d2ea2e89224d7",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "For remote peers we really need to combine the `IsPrivacyNet()` call with `|| peer.m_inbound_onion` which looks easy to miss in the future, what about introducing also `CNode::IsPrivacyNet()` which does `return addr.IsPrivacyNet() || m_inbound_onion;`? Or at least a mention in the `CNetAddr::IsPrivacyNet()` doc/comment.",
      "created_at": "2023-07-19T12:34:17Z",
      "updated_at": "2023-07-19T12:55:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1268010664",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268010664"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268034069",
      "pull_request_review_id": 1536990151,
      "id": 1268034069,
      "node_id": "PRRC_kwDOABII585LlKoV",
      "diff_hunk": "@@ -179,14 +179,22 @@ class CNetAddr\n     bool IsRFC6052() const; // IPv6 well-known prefix for IPv4-embedded address (64:FF9B::/96)\n     bool IsRFC6145() const; // IPv6 IPv4-translated address (::FFFF:0:0:0/96) (actually defined in RFC2765)\n     bool IsHeNet() const;   // IPv6 Hurricane Electric - https://he.net (2001:0470::/36)\n-    bool IsTor() const;\n-    bool IsI2P() const;\n-    bool IsCJDNS() const;\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }",
      "path": "src/netaddress.h",
      "position": 18,
      "original_position": 18,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "c69a74229da514228d3388e9652d2ea2e89224d7",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is ok as it is and I do not insist to change it. My personal preference, feel free to ignore it, is to separate declaration (interface) from definition (implementation). This makes the former easier to read by an user who only needs to call the interface without being bothered with implementation details.\r\n\r\nInlining is desirable for performance purposes, does this change have any impact on the performance?\r\n\r\nBoth out-of-line definition and inlining are achievable:\r\n\r\n```cpp\r\nclass CNetAddr\r\n{\r\n    ...\r\n    [[nodiscard]] bool IsTor() const;\r\n    ...\r\n}\r\n\r\n...\r\n\r\ninline bool CNetAddr::IsTor() const\r\n{\r\n    return m_net == NET_ONION;\r\n}\r\n```",
      "created_at": "2023-07-19T12:54:41Z",
      "updated_at": "2023-07-19T12:55:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1268034069",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268034069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 182,
      "original_line": 182,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268442591",
      "pull_request_review_id": 1537671168,
      "id": 1268442591,
      "node_id": "PRRC_kwDOABII585LmuXf",
      "diff_hunk": "@@ -145,39 +145,34 @@ uint16_t GetListenPort()\n     return static_cast<uint16_t>(gArgs.GetIntArg(\"-port\", Params().GetDefaultPort()));\n }\n \n-// find 'best' local address for a particular peer\n-bool GetLocal(CService& addr, const CNode& peer)\n+// Determine the \"best\" local address for a particular peer.\n+[[nodiscard]] static std::optional<CService> GetLocal(const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n+    if (!fListen) return std::nullopt;\n \n-    int nBestScore = -1;\n-    int nBestReachability = -1;\n+    std::optional<CService> addr;\n+    int best_reachability = -1;\n+    int best_score = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n-        for (const auto& entry : mapLocalHost)\n-        {\n+        for (const auto& [local_addr, local_service_info] : mapLocalHost) {\n             // For privacy reasons, don't advertise our privacy-network address\n             // to other networks and don't advertise our other-network address\n             // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n-            const Network peers_net{peer.ConnectedThroughNetwork()};\n-            if (our_net != peers_net &&\n-                (our_net == NET_ONION || our_net == NET_I2P ||\n-                 peers_net == NET_ONION || peers_net == NET_I2P)) {\n+            if (local_addr.GetNetwork() != peer.ConnectedThroughNetwork()\n+                && (local_addr.IsPrivacyNet() || peer.addr.IsPrivacyNet() || peer.m_inbound_onion)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "c69a74229da514228d3388e9652d2ea2e89224d7",
      "in_reply_to_id": 1268010664,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good idea! Done.",
      "created_at": "2023-07-19T17:51:00Z",
      "updated_at": "2023-07-19T17:51:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1268442591",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268442591"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 163,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268442671",
      "pull_request_review_id": 1537671301,
      "id": 1268442671,
      "node_id": "PRRC_kwDOABII585LmuYv",
      "diff_hunk": "@@ -179,14 +179,22 @@ class CNetAddr\n     bool IsRFC6052() const; // IPv6 well-known prefix for IPv4-embedded address (64:FF9B::/96)\n     bool IsRFC6145() const; // IPv6 IPv4-translated address (::FFFF:0:0:0/96) (actually defined in RFC2765)\n     bool IsHeNet() const;   // IPv6 Hurricane Electric - https://he.net (2001:0470::/36)\n-    bool IsTor() const;\n-    bool IsI2P() const;\n-    bool IsCJDNS() const;\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }",
      "path": "src/netaddress.h",
      "position": 18,
      "original_position": 18,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "c69a74229da514228d3388e9652d2ea2e89224d7",
      "in_reply_to_id": 1268034069,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done, changed from implicit in the declarations to explicit in the definitions.",
      "created_at": "2023-07-19T17:51:05Z",
      "updated_at": "2023-07-19T17:51:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1268442671",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268442671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 182,
      "original_line": 182,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268446564",
      "pull_request_review_id": 1537677177,
      "id": 1268446564,
      "node_id": "PRRC_kwDOABII585LmvVk",
      "diff_hunk": "@@ -179,14 +179,22 @@ class CNetAddr\n     bool IsRFC6052() const; // IPv6 well-known prefix for IPv4-embedded address (64:FF9B::/96)\n     bool IsRFC6145() const; // IPv6 IPv4-translated address (::FFFF:0:0:0/96) (actually defined in RFC2765)\n     bool IsHeNet() const;   // IPv6 Hurricane Electric - https://he.net (2001:0470::/36)\n-    bool IsTor() const;\n-    bool IsI2P() const;\n-    bool IsCJDNS() const;\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }\n+    [[nodiscard]] bool IsI2P() const { return m_net == NET_I2P; }\n+    [[nodiscard]] bool IsCJDNS() const { return m_net == NET_CJDNS; }\n+    [[nodiscard]] bool HasCJDNSPrefix() const { return m_addr[0] == 0xfc; }\n     bool IsLocal() const;\n     bool IsRoutable() const;\n     bool IsInternal() const;\n     bool IsValid() const;\n \n+    /**\n+     * Whether this object is a privacy network for self-advertisement purposes in `GetLocal()`.",
      "path": "src/netaddress.h",
      "position": null,
      "original_position": 28,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "c69a74229da514228d3388e9652d2ea2e89224d7",
      "in_reply_to_id": 1267277566,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> nit: no need to specify where it's used for a public method imo\r\n\r\nDone.",
      "created_at": "2023-07-19T17:54:41Z",
      "updated_at": "2023-07-19T17:54:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1268446564",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268446564"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 192,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268446978",
      "pull_request_review_id": 1537677810,
      "id": 1268446978,
      "node_id": "PRRC_kwDOABII585LmvcC",
      "diff_hunk": "@@ -148,36 +148,33 @@ uint16_t GetListenPort()\n // find 'best' local address for a particular peer\n [[nodiscard]] static bool GetLocal(CService& addr, const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n+    if (!fListen) return false;\n \n-    int nBestScore = -1;\n-    int nBestReachability = -1;\n+    int best_reachability = -1;\n+    int best_score = -1;\n     {\n         LOCK(g_maplocalhost_mutex);\n-        for (const auto& entry : mapLocalHost)\n-        {\n+        for (const auto& [local_addr, local_service_info] : mapLocalHost) {\n             // For privacy reasons, don't advertise our privacy-network address\n             // to other networks and don't advertise our other-network address\n             // to privacy networks.\n-            const Network our_net{entry.first.GetNetwork()};\n+            const Network our_net{local_addr.GetNetwork()};\n             const Network peers_net{peer.ConnectedThroughNetwork()};\n             if (our_net != peers_net &&\n                 (our_net == NET_ONION || our_net == NET_I2P ||\n                  peers_net == NET_ONION || peers_net == NET_I2P)) {\n                 continue;\n             }\n-            int nScore = entry.second.nScore;\n-            int nReachability = entry.first.GetReachabilityFrom(peer.addr);\n-            if (nReachability > nBestReachability || (nReachability == nBestReachability && nScore > nBestScore))\n-            {\n-                addr = CService(entry.first, entry.second.nPort);\n-                nBestReachability = nReachability;\n-                nBestScore = nScore;\n+            const int reachability{local_addr.GetReachabilityFrom(peer.addr)};\n+            const int score{local_service_info.nScore};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "2d2575b92da65c8f852a538ec74717effcd3d603",
      "in_reply_to_id": 1267281474,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Dropped these changes.",
      "created_at": "2023-07-19T17:55:05Z",
      "updated_at": "2023-07-19T17:55:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1268446978",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268446978"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 168,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 169,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268447455",
      "pull_request_review_id": 1537678590,
      "id": 1268447455,
      "node_id": "PRRC_kwDOABII585Lmvjf",
      "diff_hunk": "@@ -148,36 +148,33 @@ uint16_t GetListenPort()\n // find 'best' local address for a particular peer\n [[nodiscard]] static bool GetLocal(CService& addr, const CNode& peer)\n {\n-    if (!fListen)\n-        return false;\n+    if (!fListen) return false;\n \n-    int nBestScore = -1;\n-    int nBestReachability = -1;\n+    int best_reachability = -1;\n+    int best_score = -1;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "2d2575b92da65c8f852a538ec74717effcd3d603",
      "in_reply_to_id": 1267282655,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Dropped the snakecase updates.\r\n\r\n",
      "created_at": "2023-07-19T17:55:38Z",
      "updated_at": "2023-07-19T17:55:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1268447455",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268447455"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": 154,
      "start_side": "LEFT",
      "line": null,
      "original_line": 154,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268486082",
      "pull_request_review_id": 1537738920,
      "id": 1268486082,
      "node_id": "PRRC_kwDOABII585Lm4_C",
      "diff_hunk": "@@ -179,14 +179,22 @@ class CNetAddr\n     bool IsRFC6052() const; // IPv6 well-known prefix for IPv4-embedded address (64:FF9B::/96)\n     bool IsRFC6145() const; // IPv6 IPv4-translated address (::FFFF:0:0:0/96) (actually defined in RFC2765)\n     bool IsHeNet() const;   // IPv6 Hurricane Electric - https://he.net (2001:0470::/36)\n-    bool IsTor() const;\n-    bool IsI2P() const;\n-    bool IsCJDNS() const;\n+    [[nodiscard]] bool IsTor() const { return m_net == NET_ONION; }",
      "path": "src/netaddress.h",
      "position": 18,
      "original_position": 18,
      "commit_id": "4ecfd3eaf434d868455466e001adae4b68515ab8",
      "original_commit_id": "c69a74229da514228d3388e9652d2ea2e89224d7",
      "in_reply_to_id": 1268034069,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Done, changed from implicit in the declarations to explicit in the definitions.\r\n\r\nThe CI is unhappy with that, so reverting the last commit to c69a74229da514228d3388e9652d2ea2e89224d7.",
      "created_at": "2023-07-19T18:15:32Z",
      "updated_at": "2023-07-19T18:15:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28078#discussion_r1268486082",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1268486082"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28078"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 182,
      "original_line": 182,
      "side": "RIGHT"
    }
  ]
}