{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498",
    "id": 100741525,
    "node_id": "MDExOlB1bGxSZXF1ZXN0MTAwNzQxNTI1",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/9498",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/9498.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/9498.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9498",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9498/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/aad4cb50599b15d6fc439e465a616635e96466d1",
    "number": 9498,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Basic CCheckQueue Benchmarks",
    "user": {
      "login": "JeremyRubin",
      "id": 886523,
      "node_id": "MDQ6VXNlcjg4NjUyMw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/JeremyRubin",
      "html_url": "https://github.com/JeremyRubin",
      "followers_url": "https://api.github.com/users/JeremyRubin/followers",
      "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
      "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
      "repos_url": "https://api.github.com/users/JeremyRubin/repos",
      "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Some basic benchmarks for the CCheckQueue, for future work to compare to.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "active_lock_reason": "resolved",
    "created_at": "2017-01-09T19:06:28Z",
    "updated_at": "2021-09-08T11:08:14Z",
    "closed_at": "2017-01-19T14:29:30Z",
    "mergeable_state": "unknown",
    "merged_at": "2017-01-19T14:29:30Z",
    "merge_commit_sha": "aad4cb50599b15d6fc439e465a616635e96466d1",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "JeremyRubin:checkqueue_bench",
      "ref": "checkqueue_bench",
      "sha": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 53111803,
        "node_id": "MDEwOlJlcG9zaXRvcnk1MzExMTgwMw==",
        "name": "bitcoin",
        "full_name": "JeremyRubin/bitcoin",
        "owner": {
          "login": "JeremyRubin",
          "id": 886523,
          "node_id": "MDQ6VXNlcjg4NjUyMw==",
          "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/JeremyRubin",
          "html_url": "https://github.com/JeremyRubin",
          "followers_url": "https://api.github.com/users/JeremyRubin/followers",
          "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
          "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
          "repos_url": "https://api.github.com/users/JeremyRubin/repos",
          "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/JeremyRubin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/JeremyRubin/bitcoin",
        "archive_url": "https://api.github.com/repos/JeremyRubin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/JeremyRubin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/JeremyRubin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/JeremyRubin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/JeremyRubin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/JeremyRubin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/JeremyRubin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/JeremyRubin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/JeremyRubin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/JeremyRubin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/JeremyRubin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/JeremyRubin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/JeremyRubin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/JeremyRubin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/JeremyRubin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/JeremyRubin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/JeremyRubin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/JeremyRubin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/JeremyRubin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/JeremyRubin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/JeremyRubin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/JeremyRubin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/JeremyRubin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/JeremyRubin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/JeremyRubin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:JeremyRubin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/JeremyRubin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/JeremyRubin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/JeremyRubin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/JeremyRubin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/JeremyRubin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/JeremyRubin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/JeremyRubin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/JeremyRubin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/JeremyRubin/bitcoin/hooks",
        "svn_url": "https://github.com/JeremyRubin/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 7,
        "stargazers_count": 10,
        "watchers_count": 10,
        "size": 203232,
        "default_branch": "master",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-01-04T19:39:36Z",
        "created_at": "2016-03-04T06:06:13Z",
        "updated_at": "2023-01-05T18:14:42Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "07fd147b9f12e9205afd66a624edce357977d615",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35475,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 668,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-02T15:32:04Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T16:01:10Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 104,
    "deletions": 0,
    "changed_files": 2,
    "commits": 2,
    "review_comments": 9,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzo5ZjAzMTEwZjMyNTZlODExNzNjNjVjMmVkMTgxMGVmYWE3NGZiYzVi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "tree": {
        "sha": "2eedd7865b3aa5e76741372a1ec25fbddb180040",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2eedd7865b3aa5e76741372a1ec25fbddb180040"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ce43630d1e97368f454ad6a7b65a24263ab5be71",
          "sha": "ce43630d1e97368f454ad6a7b65a24263ab5be71",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ce43630d1e97368f454ad6a7b65a24263ab5be71"
        }
      ],
      "message": "Add Basic CheckQueue Benchmark",
      "committer": {
        "name": "Jeremy Rubin",
        "email": "jeremy.l.rubin@gmail.com",
        "date": "2017-01-09T19:07:02Z"
      },
      "author": {
        "name": "Jeremy Rubin",
        "email": "jeremy.l.rubin@gmail.com",
        "date": "2017-01-07T21:34:50Z"
      },
      "sha": "9f03110f3256e81173c65c2ed1810efaa74fbc5b"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 916413152,
      "node_id": "MDIzOkhlYWRSZWZGb3JjZVB1c2hlZEV2ZW50OTE2NDEzMTUy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/916413152",
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-09T19:07:22Z"
    },
    {
      "event": "labeled",
      "id": 916674740,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDkxNjY3NDc0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/916674740",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-09T22:21:02Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "reviewed",
      "id": 16234341,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTYyMzQzNDE=",
      "url": null,
      "actor": null,
      "commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "utACK 9f03110f3256e81173c65c2ed1810efaa74fbc5b. Looks fine, just minor comments. ",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#pullrequestreview-16234341",
      "submitted_at": "2017-01-11T21:35:00Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "MDY6Q29tbWl0MTE4MTkyNzphYWQ0Y2I1MDU5OWIxNWQ2ZmM0MzllNDY1YTYxNjYzNWU5NjQ2NmQx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aad4cb50599b15d6fc439e465a616635e96466d1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/aad4cb50599b15d6fc439e465a616635e96466d1",
      "tree": {
        "sha": "c923676a56269c318a895db70f75093ac8859ead",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c923676a56269c318a895db70f75093ac8859ead"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9f03110f3256e81173c65c2ed1810efaa74fbc5b",
          "sha": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9f03110f3256e81173c65c2ed1810efaa74fbc5b"
        }
      ],
      "message": "Address ryanofsky feedback on CCheckQueue benchmarks. Eliminated magic numbers, fixed scoping of vectors (and memory movement component of benchmark).",
      "committer": {
        "name": "Jeremy Rubin",
        "email": "jeremy.l.rubin@gmail.com",
        "date": "2017-01-11T22:05:06Z"
      },
      "author": {
        "name": "Jeremy Rubin",
        "email": "jeremy.l.rubin@gmail.com",
        "date": "2017-01-11T22:04:59Z"
      },
      "sha": "aad4cb50599b15d6fc439e465a616635e96466d1"
    },
    {
      "event": "reviewed",
      "id": 16259891,
      "node_id": "MDE3OlB1bGxSZXF1ZXN0UmV2aWV3MTYyNTk4OTE=",
      "url": null,
      "actor": null,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "utACK aad4cb50599b15d6fc439e465a616635e96466d1",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#pullrequestreview-16259891",
      "submitted_at": "2017-01-11T23:20:26Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
    },
    {
      "event": "commented",
      "id": 272054484,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI3MjA1NDQ4NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/272054484",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-12T01:59:39Z",
      "updated_at": "2017-01-12T01:59:39Z",
      "author_association": "MEMBER",
      "body": "```\r\nCCheckQueueSpeed,576,0.001812756061554,0.001984249800444,0.001944298545520,6149498,6731089,6595898\r\nCCheckQueueSpeed,576,0.001704573631287,0.001963026821613,0.001897984494766,5782270,6659114,6438475\r\nCCheckQueueSpeed,576,0.001838877797127,0.001967173069715,0.001926153070397,6237919,6675994,6534347\r\nCCheckQueueSpeed,576,0.001697123050690,0.001930065453053,0.001841966890626,5757193,6547343,6248762\r\nCCheckQueueSpeed,576,0.001837179064751,0.001974612474442,0.001906548523241,6232267,6698444,6467841\r\n```\r\n```\r\nCCheckQueueSpeedPrevectorJob,448,0.002283558249474,0.002333313226700,0.002298991062811,7746465,7915155,7799211\r\nCCheckQueueSpeedPrevectorJob,448,0.002310715615749,0.002362936735153,0.002330580460174,7838558,8015741,7906361\r\nCCheckQueueSpeedPrevectorJob,448,0.002285875380039,0.002489343285561,0.002338334918022,7754281,8444561,7932261\r\nCCheckQueueSpeedPrevectorJob,448,0.002281628549099,0.002457186579704,0.002311725169420,7739965,8335454,7842407\r\nCCheckQueueSpeedPrevectorJob,448,0.002286218106747,0.002332687377930,0.002305187284946,7755492,7913158,7820222\r\n```",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#issuecomment-272054484",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9498"
    },
    {
      "event": "commented",
      "id": 273790061,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI3Mzc5MDA2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/273790061",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-19T14:29:07Z",
      "updated_at": "2017-01-19T14:29:07Z",
      "author_association": "MEMBER",
      "body": "utack aad4cb5",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#issuecomment-273790061",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9498"
    },
    {
      "event": "merged",
      "id": 929180831,
      "node_id": "MDExOk1lcmdlZEV2ZW50OTI5MTgwODMx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/929180831",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/aad4cb50599b15d6fc439e465a616635e96466d1",
      "created_at": "2017-01-19T14:29:30Z"
    },
    {
      "event": "closed",
      "id": 929180833,
      "node_id": "MDExOkNsb3NlZEV2ZW50OTI5MTgwODMz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/929180833",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-19T14:29:30Z"
    },
    {
      "event": "referenced",
      "id": 929180968,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDkyOTE4MDk2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/929180968",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "054d664215ca8d5f17d8aadbfc5b78a8dcd5115c",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/054d664215ca8d5f17d8aadbfc5b78a8dcd5115c",
      "created_at": "2017-01-19T14:29:34Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-03-07T12:20:29Z",
      "updated_at": "2017-03-07T12:20:29Z",
      "source": {
        "issue": {
          "id": 212416500,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTA5NDY3NTU1",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9938",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9938/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9938/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9938/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/9938",
          "number": 9938,
          "state": "closed",
          "state_reason": null,
          "title": "Lock-Free CheckQueue",
          "body": "TL;DR: This PR introduces a new hopefully easy-to-review Lock-Free CheckQueue algorithm. It's really fast!\r\n\r\n## Summary & Problem Statement\r\n\r\nIn Bitcoin-Qt 0.8, parallel script validation was introduced to improve the speed at which a block could be validated. The basic way in which this worked is that the master thread creates a task for every script of each input in a transaction being checked, and enqueues it to a work queue. After adding all tasks, the master also becomes a worker. Each worker thread claims a number of tasks from the queue (based on how many tasks are available and how many workers are available) and then runs each task, reporting if any errors were encountered. The core approach has not changed significantly since 0.8. The current approach is deficient for four main reasons which these changes address over 2 major commits (and 1 minor one introducing API change only, and 2 others covered in previous PRs).\r\n\r\n## Deficiencies in Current CheckQueue & Solutions\r\n\r\n### 1. Memory Instability: \r\nEach task must be moved to three different memory locations during its lifetime:\r\n1) the place where the master creates the task.\r\n2) the shared work queue.\r\n3) the worker-local work queue.\r\nThis also makes it difficult to write multithreaded code, because memory is modified more than once during validation.\r\n#### Solution:\r\nThe new algorithm uses stable memory: during block validation, enough memory for the worst case number of checks is allocated, and then tasks are directly placed and read out of that memory. Instead, each worker thread claims a pointer to the task. See 89a1f93\r\n### 2. Lock-Heavy algorithm: \r\nIn the original algorithm, each worker thread and the master contend for a single lock for enqueuing and dequeuing tasks. This is highly inefficient, each worker spends significant amount of time acquiring the lock to be able to dequeue a task, and the master spends time waiting to enqueue tasks. \r\n#### Solution:\r\nThe new algorithm is Lock-Free; during block validation no locks are taken for enqueuing or dequeuing tasks, only atomic memory is read or written. The use of a different piece of atomic memory for enqueuing and most dequeuing operations means that the master and worker threads infrequently interact during validation, meaning low contention. See 6e24aa8\r\n### 3. Sleeping during validation:\r\nIn the original algorithm, while waiting for a task to be enqueued by the master, each thread sleeps. This means that the OS’s scheduler might choose to pre-empt the thread, thrashing it’s cache with another process’s memory. Furthermore, the latency for a wake up operation is high, as it requires the operating system to awaken a thread.\r\n#### Solution:\r\nthe new algorithm only sleeps before and after block validation, and busy-spins waiting for tasks until the master joins and there are no more tasks available (then sleeps). See 6e24aa8\r\n### 4. Arbitrary batch size selection: \r\nThe original batch size algorithm was selected as an experimental tuning for reasonable performance. If the batch size is too small, workers spend too much time getting a new task and not enough time running the tasks. The problem with any form of batching is that you may run into an imbalanced case where one worker has a batch (say of size five) and another worker has no tasks. In order to improve that, a batch size of one is optimal.\r\n#### Solution:\r\nThe new algorithm uses a batch size of one, so that all threads finish their work at as close to the same time as possible. See 6e24aa8.\r\n\r\n## Reviewing this PR\r\n\r\n### Code Organization\r\nIn writing this PR, I used many small-step iterations to get to the final design. While I am fairly confident that the commits in this PR should be easily reviewable, I have left the unsquashed version available here for anyone to reference\r\nhttps://github.com/JeremyRubin/bitcoin/tree/PR-lockfree-checkqueue-unsquashed\r\n\r\n### Testing\r\n\r\n#9497 introduces a fairly comprehensive set of tests, which these changes pass, as well as the earlier CheckQueue. See #9497 for details on the conditions tested.\r\n\r\n### Performance\r\n Test results are from a 2011 MacBook Pro 13\", 2.7 GHz Intel Core i7, 8 GB 1333 MHz DDR3.\r\n#### MicroBenchmark Performance (2.9 to 5.7X faster)\r\n#9498 introduced two new microbenchmarks for the CheckQueue. One which tests tasks which are empty, and another which tests tasks that do a little bit of work. These are microbenchmarks, so they need to be taken with a grain of salt.\r\n\r\n```\r\n#Before (7ff4a538a8682cdf02a4bcd6f15499c841001b73)\r\n#Benchmark,count,min,max,average,min_cycles,max_cycles,average_cycles\r\nCCheckQueueSpeed,896,0.001128047704697,0.001315370202065,0.001167648338846,3038807,3543440,3145483\r\nCCheckQueueSpeedPrevectorJob,320,0.002763845026493,0.003494121134281,0.003255434334278,7445473,9415834,8770003\r\n\r\n#After (6e24aa818be4b494fc1809a7ca3ee568e253deb6)\r\n#Benchmark,count,min,max,average,min_cycles,max_cycles,average_cycles\r\nCCheckQueueSpeed,5120,0.000198634807020,0.000226773321629,0.000202708039433,535092,610897,546067\r\nCCheckQueueSpeedPrevectorJob,896,0.000990316271782,0.001982234418392,0.001142452071820,2667680,5339862,3077721\r\n```\r\n\r\nSo we see for trivial jobs, it's about 5.7X faster, and for more involved jobs, about 2.9X faster. \r\n\r\n#### Test Performance (10X faster)\r\nI have observed very nice performance improvements when it comes to how long it takes to run the checkqueue_tests.\r\n\r\n```\r\n#before (08e4e1ea89427a2594415d0b37011692a5109c39)\r\n$ time ./test_bitcoin -t checkqueue_tests\r\n./test/test_bitcoin -t checkqueue_tests  12.39s user 58.12s system 116% cpu 1:00.31 total\r\n#after (6e24aa818be4b494fc1809a7ca3ee568e253deb6)\r\n$ time ./test_bitcoin -t checkqueue_tests\r\n./test/test_bitcoin -t checkqueue_tests  3.43s user 1.40s system 78% cpu 6.180 total\r\n```\r\nSo we see about a 10x performance improvement here.\r\n\r\n#### Cross Platform\r\nIt would be good to have reviewers comment with cross platform performance testing, as some of the lock free instructions may be slower on some platforms than others, and I don't have access to a large enough swath of machines. If you're reviewing performance, you may find the benchdiff.py tool I wrote useful https://github.com/JeremyRubin/bitcoin/commit/14aa19a35cbf0cff742f36a2c9ca00af162918ee.\r\n\r\n#### Real World/Simulated Numbers\r\n\r\nI don't have great real-world-node numbers yet for these changes, but I'll wait for others (e.g., @morcos) to report back on those.\r\n\r\n_edit: I have run a simulation on a month of block validation on a 4-core machine and seen no difference in aggregate performance. I'll poke around to see if the design can be tweaked a little bit for some advantage with fewer cores, but the more important simulations are for machines with >7 cores or multiple cpus, where the contention relieved by this PR becomes more significant._\r\n\r\n### Notes\r\n\r\nThis builds on #9497 (and #9495). There were a couple minor nits on those PR's outstanding, but I figure they can be addressed here later with a squashme (rather than having to squash those, get them re-reviewed, and then issue this PR). An earlier (and worse) attempt at a similar design can be seen here for comparison https://github.com/bitcoin/bitcoin/pull/8464.\r\n\r\n\r\n## Acknowledgements\r\n\r\nThanks to @morcos and @sdaftuar for supporting and helping in the development of this work, and to various others (@TheBlueMatt, @theuni, and others) for review in feedback at various stages of this project.",
          "user": {
            "login": "JeremyRubin",
            "id": 886523,
            "node_id": "MDQ6VXNlcjg4NjUyMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/JeremyRubin",
            "html_url": "https://github.com/JeremyRubin",
            "followers_url": "https://api.github.com/users/JeremyRubin/followers",
            "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
            "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
            "repos_url": "https://api.github.com/users/JeremyRubin/repos",
            "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9938",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/9938",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/9938.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/9938.patch"
          },
          "closed_at": "2018-03-06T18:07:17Z",
          "created_at": "2017-03-07T12:20:29Z",
          "updated_at": "2022-08-18T18:19:47Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 1432423499,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0MzI0MjM0OTk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1432423499",
      "actor": {
        "login": "codablock",
        "id": 1884269,
        "node_id": "MDQ6VXNlcjE4ODQyNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1884269?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/codablock",
        "html_url": "https://github.com/codablock",
        "followers_url": "https://api.github.com/users/codablock/followers",
        "following_url": "https://api.github.com/users/codablock/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/codablock/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/codablock/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/codablock/subscriptions",
        "organizations_url": "https://api.github.com/users/codablock/orgs",
        "repos_url": "https://api.github.com/users/codablock/repos",
        "events_url": "https://api.github.com/users/codablock/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/codablock/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9e17b0dfc1eb8401c3922d64d82b8db104191549",
      "commit_url": "https://api.github.com/repos/codablock/dash/commits/9e17b0dfc1eb8401c3922d64d82b8db104191549",
      "created_at": "2018-01-19T13:15:03Z"
    },
    {
      "event": "referenced",
      "id": 1433634465,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0MzM2MzQ0NjU=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1433634465",
      "actor": {
        "login": "codablock",
        "id": 1884269,
        "node_id": "MDQ6VXNlcjE4ODQyNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1884269?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/codablock",
        "html_url": "https://github.com/codablock",
        "followers_url": "https://api.github.com/users/codablock/followers",
        "following_url": "https://api.github.com/users/codablock/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/codablock/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/codablock/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/codablock/subscriptions",
        "organizations_url": "https://api.github.com/users/codablock/orgs",
        "repos_url": "https://api.github.com/users/codablock/repos",
        "events_url": "https://api.github.com/users/codablock/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/codablock/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "2ef2986b8c21a328c704e6d503694c1a1bb553e7",
      "commit_url": "https://api.github.com/repos/codablock/dash/commits/2ef2986b8c21a328c704e6d503694c1a1bb553e7",
      "created_at": "2018-01-20T09:18:42Z"
    },
    {
      "event": "referenced",
      "id": 1434055849,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDE0MzQwNTU4NDk=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1434055849",
      "actor": {
        "login": "codablock",
        "id": 1884269,
        "node_id": "MDQ6VXNlcjE4ODQyNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1884269?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/codablock",
        "html_url": "https://github.com/codablock",
        "followers_url": "https://api.github.com/users/codablock/followers",
        "following_url": "https://api.github.com/users/codablock/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/codablock/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/codablock/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/codablock/subscriptions",
        "organizations_url": "https://api.github.com/users/codablock/orgs",
        "repos_url": "https://api.github.com/users/codablock/repos",
        "events_url": "https://api.github.com/users/codablock/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/codablock/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "a84f8da136a4f2f4c4a08bc4c25237f2f3b7b141",
      "commit_url": "https://api.github.com/repos/codablock/dash/commits/a84f8da136a4f2f4c4a08bc4c25237f2f3b7b141",
      "created_at": "2018-01-21T13:31:22Z"
    },
    {
      "event": "referenced",
      "id": 2056235413,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIwNTYyMzU0MTM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2056235413",
      "actor": {
        "login": "andvgal",
        "id": 6080632,
        "node_id": "MDQ6VXNlcjYwODA2MzI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6080632?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andvgal",
        "html_url": "https://github.com/andvgal",
        "followers_url": "https://api.github.com/users/andvgal/followers",
        "following_url": "https://api.github.com/users/andvgal/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andvgal/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andvgal/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andvgal/subscriptions",
        "organizations_url": "https://api.github.com/users/andvgal/orgs",
        "repos_url": "https://api.github.com/users/andvgal/repos",
        "events_url": "https://api.github.com/users/andvgal/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andvgal/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "cd5359b88392c25e926a6180b271fe11f6573b59",
      "commit_url": "https://api.github.com/repos/energicryptocurrency/gen2-energi/commits/cd5359b88392c25e926a6180b271fe11f6573b59",
      "created_at": "2019-01-06T10:40:18Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "str4d",
        "id": 4993799,
        "node_id": "MDQ6VXNlcjQ5OTM3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4993799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/str4d",
        "html_url": "https://github.com/str4d",
        "followers_url": "https://api.github.com/users/str4d/followers",
        "following_url": "https://api.github.com/users/str4d/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/str4d/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/str4d/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/str4d/subscriptions",
        "organizations_url": "https://api.github.com/users/str4d/orgs",
        "repos_url": "https://api.github.com/users/str4d/repos",
        "events_url": "https://api.github.com/users/str4d/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/str4d/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-22T11:42:35Z",
      "updated_at": "2019-02-22T11:42:35Z",
      "source": {
        "issue": {
          "id": 413367455,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MjU1MzY2NTMx",
          "url": "https://api.github.com/repos/zcash/zcash/issues/3858",
          "repository_url": "https://api.github.com/repos/zcash/zcash",
          "labels_url": "https://api.github.com/repos/zcash/zcash/issues/3858/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/zcash/zcash/issues/3858/comments",
          "events_url": "https://api.github.com/repos/zcash/zcash/issues/3858/events",
          "html_url": "https://github.com/zcash/zcash/pull/3858",
          "number": 3858,
          "state": "closed",
          "state_reason": null,
          "title": "Micro-benchmarking framework part 1",
          "body": "Cherry-picked from the following upstream PRs:\r\n\r\n- bitcoin/bitcoin#6733\r\n- bitcoin/bitcoin#6770\r\n- bitcoin/bitcoin#6892\r\n  - Excluding changes to `src/policy/policy.h` which we don't have yet.\r\n- bitcoin/bitcoin#7934\r\n  - Just the benchmark, not the performance improvements.\r\n- bitcoin/bitcoin#8039\r\n- bitcoin/bitcoin#8107\r\n- bitcoin/bitcoin#8115\r\n- bitcoin/bitcoin#8914\r\n  - Required resolving several merge conflicts in code that had been refactored upstream. The changes were simple enough that I decided it was okay to impose merge conflicts on pulling in those refactors later.\r\n- bitcoin/bitcoin#9200\r\n- bitcoin/bitcoin#9202\r\n  - Adds support for measuring CPU cycles, which is later removed in an upstream PR after the refactor. I am including it to reduce future merge conflicts.\r\n- bitcoin/bitcoin#9281\r\n  - Only changes to `src/bench/bench.cpp`\r\n- bitcoin/bitcoin#9498\r\n- bitcoin/bitcoin#9712\r\n- bitcoin/bitcoin#9547\r\n- bitcoin/bitcoin#9505\r\n  - Just the benchmark, not the performance improvements.\r\n- bitcoin/bitcoin#9792\r\n  - Just the benchmark, not the performance improvements.\r\n- bitcoin/bitcoin#10272\r\n- bitcoin/bitcoin#10395\r\n  - Only changes to `src/bench/`\r\n- bitcoin/bitcoin#10735\r\n  - Only changes to `src/bench/base58.cpp`\r\n- bitcoin/bitcoin#10963\r\n- bitcoin/bitcoin#11303\r\n  - Only the benchmark backend change.\r\n- bitcoin/bitcoin#11562\r\n- bitcoin/bitcoin#11646\r\n- bitcoin/bitcoin#11654\r\n\r\nThis pulls in all changes to the micro-benchmark framework prior to December 2017, when it was rewritten. The rewrite depends on other upstream PRs we have not pulled in yet.\r\n\r\nThis does not pull in all benchmarks prior to December 2017. It leaves out benchmarks that either test code we do not have yet (except for the `FastRandomContext` refactor, which I decided to pull in), or would require rewrites to work with our changes to the codebase.",
          "user": {
            "login": "str4d",
            "id": 4993799,
            "node_id": "MDQ6VXNlcjQ5OTM3OTk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/4993799?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/str4d",
            "html_url": "https://github.com/str4d",
            "followers_url": "https://api.github.com/users/str4d/followers",
            "following_url": "https://api.github.com/users/str4d/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/str4d/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/str4d/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/str4d/subscriptions",
            "organizations_url": "https://api.github.com/users/str4d/orgs",
            "repos_url": "https://api.github.com/users/str4d/repos",
            "events_url": "https://api.github.com/users/str4d/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/str4d/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 166754268,
              "node_id": "MDU6TGFiZWwxNjY3NTQyNjg=",
              "url": "https://api.github.com/repos/zcash/zcash/labels/C-upstream-port",
              "name": "C-upstream-port",
              "description": "Category: Changes that are ported from the Bitcoin Core codebase.",
              "color": "f5f1fd",
              "default": false
            },
            {
              "id": 644101308,
              "node_id": "MDU6TGFiZWw2NDQxMDEzMDg=",
              "url": "https://api.github.com/repos/zcash/zcash/labels/A-benchmarks",
              "name": "A-benchmarks",
              "description": "Area: Benchmarks",
              "color": "f7e101",
              "default": false
            },
            {
              "id": 1726161743,
              "node_id": "MDU6TGFiZWwxNzI2MTYxNzQz",
              "url": "https://api.github.com/repos/zcash/zcash/labels/S-scratching-an-itch",
              "name": "S-scratching-an-itch",
              "description": "Status: Something we haven't planned for a sprint but are doing anyway",
              "color": "1d76db",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/zcash/zcash/milestones/102",
            "html_url": "https://github.com/zcash/zcash/milestone/102",
            "labels_url": "https://api.github.com/repos/zcash/zcash/milestones/102/labels",
            "id": 4998076,
            "node_id": "MDk6TWlsZXN0b25lNDk5ODA3Ng==",
            "number": 102,
            "state": "closed",
            "title": "Core Sprint 2020-03",
            "description": "",
            "creator": {
              "login": "r3ld3v",
              "id": 57410303,
              "node_id": "MDQ6VXNlcjU3NDEwMzAz",
              "avatar_url": "https://avatars.githubusercontent.com/u/57410303?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/r3ld3v",
              "html_url": "https://github.com/r3ld3v",
              "followers_url": "https://api.github.com/users/r3ld3v/followers",
              "following_url": "https://api.github.com/users/r3ld3v/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/r3ld3v/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/r3ld3v/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/r3ld3v/subscriptions",
              "organizations_url": "https://api.github.com/users/r3ld3v/orgs",
              "repos_url": "https://api.github.com/users/r3ld3v/repos",
              "events_url": "https://api.github.com/users/r3ld3v/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/r3ld3v/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 9,
            "created_at": "2020-01-13T05:17:45Z",
            "updated_at": "2020-02-28T04:26:57Z",
            "closed_at": "2020-02-28T04:26:57Z",
            "due_on": "2020-01-29T08:00:00Z"
          },
          "locked": false,
          "comments": 12,
          "pull_request": {
            "url": "https://api.github.com/repos/zcash/zcash/pulls/3858",
            "html_url": "https://github.com/zcash/zcash/pull/3858",
            "diff_url": "https://github.com/zcash/zcash/pull/3858.diff",
            "patch_url": "https://github.com/zcash/zcash/pull/3858.patch"
          },
          "closed_at": "2020-01-25T00:45:08Z",
          "created_at": "2019-02-22T11:42:34Z",
          "updated_at": "2020-01-27T16:10:22Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 2167383331,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDIxNjczODMzMzE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2167383331",
      "actor": {
        "login": "CryptoCentric",
        "id": 38781794,
        "node_id": "MDQ6VXNlcjM4NzgxNzk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/38781794?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CryptoCentric",
        "html_url": "https://github.com/CryptoCentric",
        "followers_url": "https://api.github.com/users/CryptoCentric/followers",
        "following_url": "https://api.github.com/users/CryptoCentric/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/CryptoCentric/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/CryptoCentric/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/CryptoCentric/subscriptions",
        "organizations_url": "https://api.github.com/users/CryptoCentric/orgs",
        "repos_url": "https://api.github.com/users/CryptoCentric/repos",
        "events_url": "https://api.github.com/users/CryptoCentric/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/CryptoCentric/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "14864c57f34abc6575e9b2001269ac780015869a",
      "commit_url": "https://api.github.com/repos/absolute-community/absolute/commits/14864c57f34abc6575e9b2001269ac780015869a",
      "created_at": "2019-02-27T09:29:26Z"
    },
    {
      "event": "referenced",
      "id": 2978115433,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5NzgxMTU0MzM=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2978115433",
      "actor": {
        "login": "zkbot",
        "id": 17032253,
        "node_id": "MDQ6VXNlcjE3MDMyMjUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/17032253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zkbot",
        "html_url": "https://github.com/zkbot",
        "followers_url": "https://api.github.com/users/zkbot/followers",
        "following_url": "https://api.github.com/users/zkbot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/zkbot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/zkbot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/zkbot/subscriptions",
        "organizations_url": "https://api.github.com/users/zkbot/orgs",
        "repos_url": "https://api.github.com/users/zkbot/repos",
        "events_url": "https://api.github.com/users/zkbot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/zkbot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "aa225ebb0b7232706681cde62c0bd8c56fd11969",
      "commit_url": "https://api.github.com/repos/zcash/zcash/commits/aa225ebb0b7232706681cde62c0bd8c56fd11969",
      "created_at": "2020-01-24T18:04:11Z"
    },
    {
      "event": "referenced",
      "id": 2978909337,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDI5Nzg5MDkzMzc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2978909337",
      "actor": {
        "login": "zkbot",
        "id": 17032253,
        "node_id": "MDQ6VXNlcjE3MDMyMjUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/17032253?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/zkbot",
        "html_url": "https://github.com/zkbot",
        "followers_url": "https://api.github.com/users/zkbot/followers",
        "following_url": "https://api.github.com/users/zkbot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/zkbot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/zkbot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/zkbot/subscriptions",
        "organizations_url": "https://api.github.com/users/zkbot/orgs",
        "repos_url": "https://api.github.com/users/zkbot/repos",
        "events_url": "https://api.github.com/users/zkbot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/zkbot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "74ff73ababe38864b5104d2c15c91947875c77fc",
      "commit_url": "https://api.github.com/repos/zcash/zcash/commits/74ff73ababe38864b5104d2c15c91947875c77fc",
      "created_at": "2020-01-24T23:39:55Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sickpig",
        "id": 1469203,
        "node_id": "MDQ6VXNlcjE0NjkyMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1469203?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sickpig",
        "html_url": "https://github.com/sickpig",
        "followers_url": "https://api.github.com/users/sickpig/followers",
        "following_url": "https://api.github.com/users/sickpig/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sickpig/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sickpig/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sickpig/subscriptions",
        "organizations_url": "https://api.github.com/users/sickpig/orgs",
        "repos_url": "https://api.github.com/users/sickpig/repos",
        "events_url": "https://api.github.com/users/sickpig/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sickpig/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-28T19:03:25Z",
      "updated_at": "2020-04-28T19:03:25Z",
      "source": {
        "issue": {
          "id": 608544502,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDEwMzAyNjE0",
          "url": "https://api.github.com/repos/BitcoinUnlimited/BitcoinUnlimited/issues/2191",
          "repository_url": "https://api.github.com/repos/BitcoinUnlimited/BitcoinUnlimited",
          "labels_url": "https://api.github.com/repos/BitcoinUnlimited/BitcoinUnlimited/issues/2191/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/BitcoinUnlimited/BitcoinUnlimited/issues/2191/comments",
          "events_url": "https://api.github.com/repos/BitcoinUnlimited/BitcoinUnlimited/issues/2191/events",
          "html_url": "https://github.com/BitcoinUnlimited/BitcoinUnlimited/pull/2191",
          "number": 2191,
          "state": "closed",
          "state_reason": null,
          "title": "Update benchmark suite ",
          "body": "Updating the bench suite with a bunch of goodies, among them linux perf profiling. This will be needed to evaluate more efficiently an upcoming port from BCHN that will probably improve the performance of the RPC interface.   \r\n\r\nThis PR contains a series of port from Core: \r\n\r\nbitcoin/bitcoin#11517\r\nbitcoin/bitcoin#12757\r\nbitcoin/bitcoin#12197\r\nbitcoin/bitcoin#13025\r\nbitcoin/bitcoin#13219\r\nbitcoin/bitcoin#11646\r\nbitcoin/bitcoin#11562\r\nbitcoin/bitcoin#10735\r\nbitcoin/bitcoin#9949\r\nbitcoin/bitcoin#9712\r\nbitcoin/bitcoin#9547\r\nbitcoin/bitcoin#9498\r\nbitcoin/bitcoin#11435\r\nbitcoin/bitcoin#9140\r\nbitcoin/bitcoin#8873\r\nbitcoin/bitcoin#8107\r\nbitcoin/bitcoin#9200\r\nbitcoin/bitcoin#8115\r\n\r\n",
          "user": {
            "login": "sickpig",
            "id": 1469203,
            "node_id": "MDQ6VXNlcjE0NjkyMDM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1469203?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sickpig",
            "html_url": "https://github.com/sickpig",
            "followers_url": "https://api.github.com/users/sickpig/followers",
            "following_url": "https://api.github.com/users/sickpig/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sickpig/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sickpig/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sickpig/subscriptions",
            "organizations_url": "https://api.github.com/users/sickpig/orgs",
            "repos_url": "https://api.github.com/users/sickpig/repos",
            "events_url": "https://api.github.com/users/sickpig/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sickpig/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "COLLABORATOR",
          "locked": false,
          "comments": 1,
          "pull_request": {
            "url": "https://api.github.com/repos/BitcoinUnlimited/BitcoinUnlimited/pulls/2191",
            "html_url": "https://github.com/BitcoinUnlimited/BitcoinUnlimited/pull/2191",
            "diff_url": "https://github.com/BitcoinUnlimited/BitcoinUnlimited/pull/2191.diff",
            "patch_url": "https://github.com/BitcoinUnlimited/BitcoinUnlimited/pull/2191.patch"
          },
          "closed_at": "2020-05-13T17:55:59Z",
          "created_at": "2020-04-28T19:03:24Z",
          "updated_at": "2020-05-13T17:55:59Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "random-zebra",
        "id": 18186894,
        "node_id": "MDQ6VXNlcjE4MTg2ODk0",
        "avatar_url": "https://avatars.githubusercontent.com/u/18186894?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/random-zebra",
        "html_url": "https://github.com/random-zebra",
        "followers_url": "https://api.github.com/users/random-zebra/followers",
        "following_url": "https://api.github.com/users/random-zebra/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/random-zebra/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/random-zebra/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/random-zebra/subscriptions",
        "organizations_url": "https://api.github.com/users/random-zebra/orgs",
        "repos_url": "https://api.github.com/users/random-zebra/repos",
        "events_url": "https://api.github.com/users/random-zebra/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/random-zebra/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-05-27T20:39:32Z",
      "updated_at": "2020-05-27T20:39:32Z",
      "source": {
        "issue": {
          "id": 626014443,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDI0MTAyMDEy",
          "url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/1650",
          "repository_url": "https://api.github.com/repos/PIVX-Project/PIVX",
          "labels_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/1650/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/1650/comments",
          "events_url": "https://api.github.com/repos/PIVX-Project/PIVX/issues/1650/events",
          "html_url": "https://github.com/PIVX-Project/PIVX/pull/1650",
          "number": 1650,
          "state": "closed",
          "state_reason": null,
          "title": "[Tests] Benchmarking Framework",
          "body": "Introduces the benchmarking framework, loosely based on google's micro-benchmarking library (https://github.com/google/benchmark), ported from Bitcoin, up to 0.16.\r\nThe benchmark framework is hard-coded to run each benchmark for one wall-clock second,\r\nand then spits out .csv-format timing information to stdout.\r\n\r\nBackported PR:\r\n- bitcoin/bitcoin#6733\r\n- bitcoin/bitcoin#6770\r\n- bitcoin/bitcoin#6892\r\n- bitcoin/bitcoin#8039\r\n- bitcoin/bitcoin#8107\r\n- bitcoin/bitcoin#8115\r\n- bitcoin/bitcoin#9200\r\n- bitcoin/bitcoin#9202\r\n- bitcoin/bitcoin#9281\r\n- bitcoin/bitcoin#6361\r\n- bitcoin/bitcoin#10271\r\n- bitcoin/bitcoin#9498\r\n- bitcoin/bitcoin#9712\r\n- bitcoin/bitcoin#9547\r\n- bitcoin/bitcoin#9505 (benchmark only. Rest was in #1557)\r\n- bitcoin/bitcoin#9792 (benchmark only. Rest was in #643)\r\n- bitcoin/bitcoin#10272\r\n- bitcoin/bitcoin#10395 (base58 only)\r\n- bitcoin/bitcoin#10963\r\n- bitcoin/bitcoin#11303 (first commit)\r\n- bitcoin/bitcoin#11562\r\n- bitcoin/bitcoin#11646\r\n- bitcoin/bitcoin#11654\r\n\r\nCurrent output of `src/bench/bench_pivx`:\r\n```\r\n#Benchmark,count,min(ns),max(ns),average(ns),min_cycles,max_cycles,average_cycles\r\nBase58CheckEncode,131072,7697,8065,7785,20015,20971,20242\r\nBase58Decode,294912,3305,3537,3454,8595,9198,8981\r\nBase58Encode,180224,5498,6020,5767,14297,15652,14994\r\nCCheckQueueSpeed,320,3159960,3535173,3352787,8216030,9191602,8717388\r\nCCheckQueueSpeedPrevectorJob,96,9184484,11410840,10823070,23880046,29668680,28140445\r\nFastRandom_1bit,320,3143690,4838162,3199156,8173726,12579373,8317941\r\nFastRandom_32bit,60,17097612,17923669,17367440,44454504,46602306,45156079\r\nPrevectorClear,3072,334741,366618,346731,870340,953224,901516\r\nPrevectorDestructor,2816,344233,368912,357281,895022,959187,928948\r\nRIPEMD160,288,3404503,3693917,3577774,8851850,9604334,9302363\r\nSHA1,384,2718128,2891558,2802513,7067238,7518184,7286652\r\nSHA256,176,6133760,6580005,6239866,15948035,17108376,16223916\r\nSHA512,240,4251468,4358706,4313463,11054006,11332826,11215186\r\nSleep100ms,10,100221470,100302411,100239073,260580075,260790726,260625870\r\n```\r\n\r\nNOTE: Not all the tests have been pulled yet (as we might not have the code being tested, or it  would require rewrites to work with our different code base), but the framework is updated to December 2017.\r\n\r\n",
          "user": {
            "login": "random-zebra",
            "id": 18186894,
            "node_id": "MDQ6VXNlcjE4MTg2ODk0",
            "avatar_url": "https://avatars.githubusercontent.com/u/18186894?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/random-zebra",
            "html_url": "https://github.com/random-zebra",
            "followers_url": "https://api.github.com/users/random-zebra/followers",
            "following_url": "https://api.github.com/users/random-zebra/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/random-zebra/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/random-zebra/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/random-zebra/subscriptions",
            "organizations_url": "https://api.github.com/users/random-zebra/orgs",
            "repos_url": "https://api.github.com/users/random-zebra/repos",
            "events_url": "https://api.github.com/users/random-zebra/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/random-zebra/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 566257187,
              "node_id": "MDU6TGFiZWw1NjYyNTcxODc=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Upstream",
              "name": "Upstream",
              "color": "bfd4f2",
              "default": false
            },
            {
              "id": 608273048,
              "node_id": "MDU6TGFiZWw2MDgyNzMwNDg=",
              "url": "https://api.github.com/repos/PIVX-Project/PIVX/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignee": {
            "login": "random-zebra",
            "id": 18186894,
            "node_id": "MDQ6VXNlcjE4MTg2ODk0",
            "avatar_url": "https://avatars.githubusercontent.com/u/18186894?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/random-zebra",
            "html_url": "https://github.com/random-zebra",
            "followers_url": "https://api.github.com/users/random-zebra/followers",
            "following_url": "https://api.github.com/users/random-zebra/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/random-zebra/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/random-zebra/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/random-zebra/subscriptions",
            "organizations_url": "https://api.github.com/users/random-zebra/orgs",
            "repos_url": "https://api.github.com/users/random-zebra/repos",
            "events_url": "https://api.github.com/users/random-zebra/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/random-zebra/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "random-zebra",
              "id": 18186894,
              "node_id": "MDQ6VXNlcjE4MTg2ODk0",
              "avatar_url": "https://avatars.githubusercontent.com/u/18186894?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/random-zebra",
              "html_url": "https://github.com/random-zebra",
              "followers_url": "https://api.github.com/users/random-zebra/followers",
              "following_url": "https://api.github.com/users/random-zebra/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/random-zebra/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/random-zebra/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/random-zebra/subscriptions",
              "organizations_url": "https://api.github.com/users/random-zebra/orgs",
              "repos_url": "https://api.github.com/users/random-zebra/repos",
              "events_url": "https://api.github.com/users/random-zebra/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/random-zebra/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "NONE",
          "milestone": {
            "url": "https://api.github.com/repos/PIVX-Project/PIVX/milestones/27",
            "html_url": "https://github.com/PIVX-Project/PIVX/milestone/27",
            "labels_url": "https://api.github.com/repos/PIVX-Project/PIVX/milestones/27/labels",
            "id": 5342884,
            "node_id": "MDk6TWlsZXN0b25lNTM0Mjg4NA==",
            "number": 27,
            "state": "closed",
            "title": "4.2.0",
            "description": "",
            "creator": {
              "login": "furszy",
              "id": 5377650,
              "node_id": "MDQ6VXNlcjUzNzc2NTA=",
              "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/furszy",
              "html_url": "https://github.com/furszy",
              "followers_url": "https://api.github.com/users/furszy/followers",
              "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
              "organizations_url": "https://api.github.com/users/furszy/orgs",
              "repos_url": "https://api.github.com/users/furszy/repos",
              "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/furszy/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 127,
            "created_at": "2020-04-23T22:04:56Z",
            "updated_at": "2020-09-29T01:21:34Z",
            "closed_at": "2020-09-29T01:21:34Z"
          },
          "locked": false,
          "comments": 0,
          "pull_request": {
            "url": "https://api.github.com/repos/PIVX-Project/PIVX/pulls/1650",
            "html_url": "https://github.com/PIVX-Project/PIVX/pull/1650",
            "diff_url": "https://github.com/PIVX-Project/PIVX/pull/1650.diff",
            "patch_url": "https://github.com/PIVX-Project/PIVX/pull/1650.patch"
          },
          "closed_at": "2020-06-08T17:54:27Z",
          "created_at": "2020-05-27T20:39:31Z",
          "updated_at": "2020-06-29T22:44:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 3421323012,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDM0MjEzMjMwMTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3421323012",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "4ed15cc69d0cf5364b4e740157fdefb6b7759408",
      "commit_url": "https://api.github.com/repos/PIVX-Project/PIVX/commits/4ed15cc69d0cf5364b4e740157fdefb6b7759408",
      "created_at": "2020-06-08T17:54:26Z"
    },
    {
      "event": "locked",
      "id": 5271577782,
      "node_id": "LOE_lADOABII584L5jFazwAAAAE6NeS2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271577782",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T11:08:14Z",
      "lock_reason": "resolved"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95670750",
      "pull_request_review_id": 16234341,
      "id": 95670750,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1NjcwNzUw",
      "diff_hunk": "@@ -0,0 +1,94 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bench.h\"\n+#include \"util.h\"\n+#include \"validation.h\"\n+#include \"checkqueue.h\"\n+#include \"prevector.h\"\n+#include <vector>\n+#include <boost/thread/thread.hpp>\n+#include \"random.h\"\n+\n+\n+// This Benchmark tests the CheckQueue with the lightest\n+// weight Checks, so it should make any lock contention\n+// particularly visible\n+static void CCheckQueueSpeed(benchmark::State& state)\n+{",
      "path": "src/bench/checkqueue.cpp",
      "position": null,
      "original_position": 19,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "original_commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe declare some constants here with the various magic numbers & things that could be tuned in the benchmark, like size of the queue, number of threads, number of jobs to add, number of times to call add, etc.",
      "created_at": "2017-01-11T21:00:19Z",
      "updated_at": "2017-01-11T22:06:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#discussion_r95670750",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95670750"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 24,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95671671",
      "pull_request_review_id": 16234341,
      "id": 95671671,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1NjcxNjcx",
      "diff_hunk": "@@ -0,0 +1,94 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bench.h\"\n+#include \"util.h\"\n+#include \"validation.h\"\n+#include \"checkqueue.h\"\n+#include \"prevector.h\"\n+#include <vector>\n+#include <boost/thread/thread.hpp>\n+#include \"random.h\"\n+\n+\n+// This Benchmark tests the CheckQueue with the lightest\n+// weight Checks, so it should make any lock contention\n+// particularly visible\n+static void CCheckQueueSpeed(benchmark::State& state)\n+{\n+    struct FakeJobNoWork {\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(FakeJobNoWork& x){};\n+    };\n+    CCheckQueue<FakeJobNoWork> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        CCheckQueueControl<FakeJobNoWork> control(&queue);\n+        // We can make vChecks out of the loop because calling Add doesn't\n+        // change the size of the vector.",
      "path": "src/bench/checkqueue.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "original_commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe add an assert to the end of the benchmark to check this? It's be easy to imagine the vector being moved from in the future, which would invalidate the benchmark.",
      "created_at": "2017-01-11T21:05:21Z",
      "updated_at": "2017-01-11T22:06:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#discussion_r95671671",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95671671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95672621",
      "pull_request_review_id": 16234341,
      "id": 95672621,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1NjcyNjIx",
      "diff_hunk": "@@ -0,0 +1,94 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bench.h\"\n+#include \"util.h\"\n+#include \"validation.h\"\n+#include \"checkqueue.h\"\n+#include \"prevector.h\"\n+#include <vector>\n+#include <boost/thread/thread.hpp>\n+#include \"random.h\"\n+\n+\n+// This Benchmark tests the CheckQueue with the lightest\n+// weight Checks, so it should make any lock contention\n+// particularly visible\n+static void CCheckQueueSpeed(benchmark::State& state)\n+{\n+    struct FakeJobNoWork {\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(FakeJobNoWork& x){};\n+    };\n+    CCheckQueue<FakeJobNoWork> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        CCheckQueueControl<FakeJobNoWork> control(&queue);\n+        // We can make vChecks out of the loop because calling Add doesn't\n+        // change the size of the vector.",
      "path": "src/bench/checkqueue.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "original_commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Also, if this is true, any reason not to move vChecks declaration out of the while loop too? ",
      "created_at": "2017-01-11T21:11:11Z",
      "updated_at": "2017-01-11T22:06:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#discussion_r95672621",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95672621"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95673006",
      "pull_request_review_id": 16234341,
      "id": 95673006,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1NjczMDA2",
      "diff_hunk": "@@ -0,0 +1,94 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bench.h\"\n+#include \"util.h\"\n+#include \"validation.h\"\n+#include \"checkqueue.h\"\n+#include \"prevector.h\"\n+#include <vector>\n+#include <boost/thread/thread.hpp>\n+#include \"random.h\"\n+\n+\n+// This Benchmark tests the CheckQueue with the lightest\n+// weight Checks, so it should make any lock contention\n+// particularly visible\n+static void CCheckQueueSpeed(benchmark::State& state)\n+{\n+    struct FakeJobNoWork {\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(FakeJobNoWork& x){};\n+    };\n+    CCheckQueue<FakeJobNoWork> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        CCheckQueueControl<FakeJobNoWork> control(&queue);\n+        // We can make vChecks out of the loop because calling Add doesn't\n+        // change the size of the vector.\n+        std::vector<FakeJobNoWork> vChecks;\n+        vChecks.resize(30);",
      "path": "src/bench/checkqueue.cpp",
      "position": null,
      "original_position": 37,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "original_commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could call the vector constructor taking a size to eliminate the resize line.",
      "created_at": "2017-01-11T21:13:12Z",
      "updated_at": "2017-01-11T22:06:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#discussion_r95673006",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95673006"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95673985",
      "pull_request_review_id": 16234341,
      "id": 95673985,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1NjczOTg1",
      "diff_hunk": "@@ -0,0 +1,94 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bench.h\"\n+#include \"util.h\"\n+#include \"validation.h\"\n+#include \"checkqueue.h\"\n+#include \"prevector.h\"\n+#include <vector>\n+#include <boost/thread/thread.hpp>\n+#include \"random.h\"\n+\n+\n+// This Benchmark tests the CheckQueue with the lightest\n+// weight Checks, so it should make any lock contention\n+// particularly visible\n+static void CCheckQueueSpeed(benchmark::State& state)\n+{\n+    struct FakeJobNoWork {\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(FakeJobNoWork& x){};\n+    };\n+    CCheckQueue<FakeJobNoWork> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        CCheckQueueControl<FakeJobNoWork> control(&queue);\n+        // We can make vChecks out of the loop because calling Add doesn't\n+        // change the size of the vector.\n+        std::vector<FakeJobNoWork> vChecks;\n+        vChecks.resize(30);\n+\n+        // We call Add a number of times to simulate the behavior of adding\n+        // a block of transactions at once.\n+        for (size_t j = 0; j < 101; ++j) {\n+            control.Add(vChecks);\n+        }\n+        // control waits for completion by RAII, but\n+        // it is done explicitly here for clarity\n+        control.Wait();\n+    }\n+    tg.interrupt_all();\n+    tg.join_all();\n+}\n+\n+// This Benchmark tests the CheckQueue with a slightly realistic workload,\n+// where checks all contain a prevector that is indirect 50% of the time\n+// and there is a little bit of work done between calls to Add.\n+static void CCheckQueueSpeedPrevectorJob(benchmark::State& state)\n+{\n+    struct PrevectorJob {\n+        prevector<28, uint8_t> p;\n+        PrevectorJob(){\n+        }\n+        PrevectorJob(FastRandomContext& insecure_rand){\n+            p.resize(insecure_rand.rand32() % 56);\n+        }\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(PrevectorJob& x){p.swap(x.p);};\n+    };\n+    CCheckQueue<PrevectorJob> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        // Make insecure_rand here so that each iteration is identical.\n+        FastRandomContext insecure_rand(true);",
      "path": "src/bench/checkqueue.cpp",
      "position": 86,
      "original_position": 77,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "original_commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe move this outside while loop, if whatever time this takes isn't meaningful to the benchmark.",
      "created_at": "2017-01-11T21:18:15Z",
      "updated_at": "2017-01-11T22:06:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#discussion_r95673985",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95673985"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 86,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95675187",
      "pull_request_review_id": 16234341,
      "id": 95675187,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1Njc1MTg3",
      "diff_hunk": "@@ -0,0 +1,94 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bench.h\"\n+#include \"util.h\"\n+#include \"validation.h\"\n+#include \"checkqueue.h\"\n+#include \"prevector.h\"\n+#include <vector>\n+#include <boost/thread/thread.hpp>\n+#include \"random.h\"\n+\n+\n+// This Benchmark tests the CheckQueue with the lightest\n+// weight Checks, so it should make any lock contention\n+// particularly visible\n+static void CCheckQueueSpeed(benchmark::State& state)\n+{\n+    struct FakeJobNoWork {\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(FakeJobNoWork& x){};\n+    };\n+    CCheckQueue<FakeJobNoWork> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        CCheckQueueControl<FakeJobNoWork> control(&queue);\n+        // We can make vChecks out of the loop because calling Add doesn't\n+        // change the size of the vector.\n+        std::vector<FakeJobNoWork> vChecks;\n+        vChecks.resize(30);\n+\n+        // We call Add a number of times to simulate the behavior of adding\n+        // a block of transactions at once.\n+        for (size_t j = 0; j < 101; ++j) {\n+            control.Add(vChecks);\n+        }\n+        // control waits for completion by RAII, but\n+        // it is done explicitly here for clarity\n+        control.Wait();\n+    }\n+    tg.interrupt_all();\n+    tg.join_all();\n+}\n+\n+// This Benchmark tests the CheckQueue with a slightly realistic workload,\n+// where checks all contain a prevector that is indirect 50% of the time\n+// and there is a little bit of work done between calls to Add.\n+static void CCheckQueueSpeedPrevectorJob(benchmark::State& state)\n+{\n+    struct PrevectorJob {\n+        prevector<28, uint8_t> p;\n+        PrevectorJob(){\n+        }\n+        PrevectorJob(FastRandomContext& insecure_rand){\n+            p.resize(insecure_rand.rand32() % 56);",
      "path": "src/bench/checkqueue.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "original_commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why do this in the constructor instead of the call operator? Wouldn't it be more realistic to have the work done in the worker threads instead of the control thread? Maybe add a comment if this is the intended behavior.",
      "created_at": "2017-01-11T21:24:12Z",
      "updated_at": "2017-01-11T22:06:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#discussion_r95675187",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95675187"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95677971",
      "pull_request_review_id": 16242012,
      "id": 95677971,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1Njc3OTcx",
      "diff_hunk": "@@ -0,0 +1,94 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bench.h\"\n+#include \"util.h\"\n+#include \"validation.h\"\n+#include \"checkqueue.h\"\n+#include \"prevector.h\"\n+#include <vector>\n+#include <boost/thread/thread.hpp>\n+#include \"random.h\"\n+\n+\n+// This Benchmark tests the CheckQueue with the lightest\n+// weight Checks, so it should make any lock contention\n+// particularly visible\n+static void CCheckQueueSpeed(benchmark::State& state)\n+{\n+    struct FakeJobNoWork {\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(FakeJobNoWork& x){};\n+    };\n+    CCheckQueue<FakeJobNoWork> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        CCheckQueueControl<FakeJobNoWork> control(&queue);\n+        // We can make vChecks out of the loop because calling Add doesn't\n+        // change the size of the vector.\n+        std::vector<FakeJobNoWork> vChecks;\n+        vChecks.resize(30);\n+\n+        // We call Add a number of times to simulate the behavior of adding\n+        // a block of transactions at once.\n+        for (size_t j = 0; j < 101; ++j) {\n+            control.Add(vChecks);\n+        }\n+        // control waits for completion by RAII, but\n+        // it is done explicitly here for clarity\n+        control.Wait();\n+    }\n+    tg.interrupt_all();\n+    tg.join_all();\n+}\n+\n+// This Benchmark tests the CheckQueue with a slightly realistic workload,\n+// where checks all contain a prevector that is indirect 50% of the time\n+// and there is a little bit of work done between calls to Add.\n+static void CCheckQueueSpeedPrevectorJob(benchmark::State& state)\n+{\n+    struct PrevectorJob {\n+        prevector<28, uint8_t> p;\n+        PrevectorJob(){\n+        }\n+        PrevectorJob(FastRandomContext& insecure_rand){\n+            p.resize(insecure_rand.rand32() % 56);\n+        }\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(PrevectorJob& x){p.swap(x.p);};\n+    };\n+    CCheckQueue<PrevectorJob> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        // Make insecure_rand here so that each iteration is identical.\n+        FastRandomContext insecure_rand(true);",
      "path": "src/bench/checkqueue.cpp",
      "position": 86,
      "original_position": 77,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "original_commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "in_reply_to_id": 95673985,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It is meaningful for each iteration to be identical.",
      "created_at": "2017-01-11T21:38:51Z",
      "updated_at": "2017-01-11T22:06:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#discussion_r95677971",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95677971"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 86,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95678397",
      "pull_request_review_id": 16242447,
      "id": 95678397,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1Njc4Mzk3",
      "diff_hunk": "@@ -0,0 +1,94 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bench.h\"\n+#include \"util.h\"\n+#include \"validation.h\"\n+#include \"checkqueue.h\"\n+#include \"prevector.h\"\n+#include <vector>\n+#include <boost/thread/thread.hpp>\n+#include \"random.h\"\n+\n+\n+// This Benchmark tests the CheckQueue with the lightest\n+// weight Checks, so it should make any lock contention\n+// particularly visible\n+static void CCheckQueueSpeed(benchmark::State& state)\n+{\n+    struct FakeJobNoWork {\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(FakeJobNoWork& x){};\n+    };\n+    CCheckQueue<FakeJobNoWork> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        CCheckQueueControl<FakeJobNoWork> control(&queue);\n+        // We can make vChecks out of the loop because calling Add doesn't\n+        // change the size of the vector.\n+        std::vector<FakeJobNoWork> vChecks;\n+        vChecks.resize(30);\n+\n+        // We call Add a number of times to simulate the behavior of adding\n+        // a block of transactions at once.\n+        for (size_t j = 0; j < 101; ++j) {\n+            control.Add(vChecks);\n+        }\n+        // control waits for completion by RAII, but\n+        // it is done explicitly here for clarity\n+        control.Wait();\n+    }\n+    tg.interrupt_all();\n+    tg.join_all();\n+}\n+\n+// This Benchmark tests the CheckQueue with a slightly realistic workload,\n+// where checks all contain a prevector that is indirect 50% of the time\n+// and there is a little bit of work done between calls to Add.\n+static void CCheckQueueSpeedPrevectorJob(benchmark::State& state)\n+{\n+    struct PrevectorJob {\n+        prevector<28, uint8_t> p;\n+        PrevectorJob(){\n+        }\n+        PrevectorJob(FastRandomContext& insecure_rand){\n+            p.resize(insecure_rand.rand32() % 56);",
      "path": "src/bench/checkqueue.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "original_commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "in_reply_to_id": 95675187,
      "user": {
        "login": "JeremyRubin",
        "id": 886523,
        "node_id": "MDQ6VXNlcjg4NjUyMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/886523?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JeremyRubin",
        "html_url": "https://github.com/JeremyRubin",
        "followers_url": "https://api.github.com/users/JeremyRubin/followers",
        "following_url": "https://api.github.com/users/JeremyRubin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JeremyRubin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JeremyRubin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JeremyRubin/subscriptions",
        "organizations_url": "https://api.github.com/users/JeremyRubin/orgs",
        "repos_url": "https://api.github.com/users/JeremyRubin/repos",
        "events_url": "https://api.github.com/users/JeremyRubin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JeremyRubin/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "FastRandomContext is not thread safe.\r\n\r\nAlso we do want the main thread to be doing some work while the worker threads process.",
      "created_at": "2017-01-11T21:40:56Z",
      "updated_at": "2017-01-11T22:06:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#discussion_r95678397",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95678397"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": null,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95695236",
      "pull_request_review_id": 16259710,
      "id": 95695236,
      "node_id": "MDI0OlB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudDk1Njk1MjM2",
      "diff_hunk": "@@ -0,0 +1,94 @@\n+// Copyright (c) 2015 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include \"bench.h\"\n+#include \"util.h\"\n+#include \"validation.h\"\n+#include \"checkqueue.h\"\n+#include \"prevector.h\"\n+#include <vector>\n+#include <boost/thread/thread.hpp>\n+#include \"random.h\"\n+\n+\n+// This Benchmark tests the CheckQueue with the lightest\n+// weight Checks, so it should make any lock contention\n+// particularly visible\n+static void CCheckQueueSpeed(benchmark::State& state)\n+{\n+    struct FakeJobNoWork {\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(FakeJobNoWork& x){};\n+    };\n+    CCheckQueue<FakeJobNoWork> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        CCheckQueueControl<FakeJobNoWork> control(&queue);\n+        // We can make vChecks out of the loop because calling Add doesn't\n+        // change the size of the vector.\n+        std::vector<FakeJobNoWork> vChecks;\n+        vChecks.resize(30);\n+\n+        // We call Add a number of times to simulate the behavior of adding\n+        // a block of transactions at once.\n+        for (size_t j = 0; j < 101; ++j) {\n+            control.Add(vChecks);\n+        }\n+        // control waits for completion by RAII, but\n+        // it is done explicitly here for clarity\n+        control.Wait();\n+    }\n+    tg.interrupt_all();\n+    tg.join_all();\n+}\n+\n+// This Benchmark tests the CheckQueue with a slightly realistic workload,\n+// where checks all contain a prevector that is indirect 50% of the time\n+// and there is a little bit of work done between calls to Add.\n+static void CCheckQueueSpeedPrevectorJob(benchmark::State& state)\n+{\n+    struct PrevectorJob {\n+        prevector<28, uint8_t> p;\n+        PrevectorJob(){\n+        }\n+        PrevectorJob(FastRandomContext& insecure_rand){\n+            p.resize(insecure_rand.rand32() % 56);\n+        }\n+        bool operator()()\n+        {\n+            return true;\n+        }\n+        void swap(PrevectorJob& x){p.swap(x.p);};\n+    };\n+    CCheckQueue<PrevectorJob> queue {128};\n+    boost::thread_group tg;\n+    for (auto x = 0; x < std::max(2, GetNumCores()); ++x) {\n+       tg.create_thread([&]{queue.Thread();});\n+    }\n+    while (state.KeepRunning()) {\n+        // Make insecure_rand here so that each iteration is identical.\n+        FastRandomContext insecure_rand(true);",
      "path": "src/bench/checkqueue.cpp",
      "position": 86,
      "original_position": 77,
      "commit_id": "aad4cb50599b15d6fc439e465a616635e96466d1",
      "original_commit_id": "9f03110f3256e81173c65c2ed1810efaa74fbc5b",
      "in_reply_to_id": 95673985,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Oops, should have read the comment above. Though maybe I would reword it to something like \"Start with a fresh insecure_rand here\" rather than \"Make insecure_rand here.\"",
      "created_at": "2017-01-11T23:19:16Z",
      "updated_at": "2017-01-11T23:19:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/9498#discussion_r95695236",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/95695236"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9498"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 86,
      "original_line": null,
      "side": "RIGHT"
    }
  ]
}