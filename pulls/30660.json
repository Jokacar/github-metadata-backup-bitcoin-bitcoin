{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660",
    "id": 2020979175,
    "node_id": "PR_kwDOABII5854dbHn",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30660",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30660.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30660.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/042cee7073b338d79b5176d4157cf08bbd079b9f",
    "number": 30660,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "test: Shut down framework cleanly on RPC connection failure",
    "user": {
      "login": "hodlinator",
      "id": 172445034,
      "node_id": "U_kgDOCkdNag",
      "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hodlinator",
      "html_url": "https://github.com/hodlinator",
      "followers_url": "https://api.github.com/users/hodlinator/followers",
      "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
      "organizations_url": "https://api.github.com/users/hodlinator/orgs",
      "repos_url": "https://api.github.com/users/hodlinator/repos",
      "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hodlinator/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Without this PR, `BitcoinTestFramework.start_nodes()`, upon failing to establish RPC connections and calling `stop_nodes()`, would end up attempting to call the `stop()`-RPC, raising additional exceptions which made the shutdown less clean.\r\n\r\nSince we now avoiding the additional exceptions which in some cases provided useful clues, we instead capture information about the original exceptions being triggered and ignored within `TestNode.wait_for_rpc_connection()`. This means we now have the more informative:\r\n`AssertionError: [node 0] Unable to connect to bitcoind after 60s (ignored errors: {'missing_credentials': 1, 'OSError.ECONNREFUSED': 239}, latest error: ConnectionRefusedError(111, 'Connection refused'))`\r\n\r\nAs long as the increased complexity and maintenance burden is low, exposing previously silenced exceptions in combination with having a cleaner shutdown clears the muddy waters for devs trying to figure out root causes.\r\n\r\nRelated: #30390",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2024-08-15T11:53:45Z",
    "updated_at": "2024-11-06T18:18:22Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "0310ff898e757a54edba281d987c51fd6a21a1bb",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "hodlinator:2024-08/test_node_rpc_connection_failure",
      "ref": "2024-08/test_node_rpc_connection_failure",
      "sha": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 813856282,
        "node_id": "R_kgDOMIJ2Gg",
        "name": "bitcoin",
        "full_name": "hodlinator/bitcoin",
        "owner": {
          "login": "hodlinator",
          "id": 172445034,
          "node_id": "U_kgDOCkdNag",
          "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/hodlinator",
          "html_url": "https://github.com/hodlinator",
          "followers_url": "https://api.github.com/users/hodlinator/followers",
          "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
          "organizations_url": "https://api.github.com/users/hodlinator/orgs",
          "repos_url": "https://api.github.com/users/hodlinator/repos",
          "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/hodlinator/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/hodlinator/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/hodlinator/bitcoin",
        "archive_url": "https://api.github.com/repos/hodlinator/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/hodlinator/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/hodlinator/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/hodlinator/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/hodlinator/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/hodlinator/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/hodlinator/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/hodlinator/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/hodlinator/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/hodlinator/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/hodlinator/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/hodlinator/bitcoin/events",
        "forks_url": "https://api.github.com/repos/hodlinator/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/hodlinator/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/hodlinator/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/hodlinator/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/hodlinator/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/hodlinator/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/hodlinator/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/hodlinator/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/hodlinator/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/hodlinator/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/hodlinator/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/hodlinator/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/hodlinator/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:hodlinator/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/hodlinator/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/hodlinator/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/hodlinator/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/hodlinator/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/hodlinator/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/hodlinator/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/hodlinator/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/hodlinator/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/hodlinator/bitcoin/hooks",
        "svn_url": "https://github.com/hodlinator/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 229421,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-11-04T14:04:20Z",
        "created_at": "2024-06-11T22:00:51Z",
        "updated_at": "2024-10-29T09:33:08Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "f1bcf3edc5027b501616670db33d8be1f2cb5a11",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36311,
        "stargazers_count": 79219,
        "watchers_count": 79219,
        "size": 270720,
        "default_branch": "master",
        "open_issues_count": 638,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-11-06T15:04:09Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-11-06T18:40:17Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 80,
    "deletions": 28,
    "changed_files": 4,
    "commits": 6,
    "review_comments": 13,
    "comments": 10
  },
  "events": [
    {
      "event": "commented",
      "id": 2291135616,
      "node_id": "IC_kwDOABII586Ij_SA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2291135616",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T11:53:48Z",
      "updated_at": "2024-11-02T23:15:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/30660.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [tdb3](https://github.com/bitcoin/bitcoin/pull/30660#pullrequestreview-2411752016) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2291135616",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "labeled",
      "id": 13894930195,
      "node_id": "LE_lADOABII586TGVLXzwAAAAM8M88T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13894930195",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T11:53:50Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 2291136157,
      "node_id": "IC_kwDOABII586Ij_ad",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2291136157",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T11:54:15Z",
      "updated_at": "2024-08-15T11:54:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Encountered a case of #30390 here:\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/10380115902/job/28739417666?pr=30377\r\n\r\nOutput with only the test (no fix commit):\r\n```\r\n$ test/functional/feature_framework_rpc_failure.py\r\n2024-08-15T07:30:20.427000Z TestFramework (INFO): PRNG seed is: 635212259632049987\r\n2024-08-15T07:30:20.427000Z TestFramework (INFO): Initializing test directory /run/user/1001/bitcoin_func_test_ujsvbdnm\r\n2024-08-15T07:30:20.428000Z TestFramework (INFO): Forcing us to timeout instantly to simulate an unresponsive bitcoind\r\n2024-08-15T07:30:20.429000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 569, in start_nodes\r\n    node.wait_for_rpc_connection()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 329, in wait_for_rpc_connection\r\n    self._raise_assertion_error(\"Unable to connect to bitcoind after {}s\".format(self.rpc_timeout))\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 192, in _raise_assertion_error\r\n    raise AssertionError(self._node_msg(msg))\r\nAssertionError: [node 0] Unable to connect to bitcoind after 0s\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/feature_framework_rpc_failure.py\", line 21, in setup_network\r\n    BitcoinTestFramework.setup_network(self)\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 396, in setup_network\r\n    self.setup_nodes()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 418, in setup_nodes\r\n    self.start_nodes()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 572, in start_nodes\r\n    self.stop_nodes()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 587, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 390, in stop_node\r\n    self.stop(wait=wait)\r\n    ^^^^^^^^^\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 209, in __getattr__\r\n    assert self.rpc_connected and self.rpc is not None, self._node_msg(\"Error: no RPC connection\")\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAssertionError: [node 0] Error: no RPC connection\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 131, in main\r\n    self.setup()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 302, in setup\r\n    self.setup_network()\r\n  File \"/home/hodlinator/bitcoin/test/functional/feature_framework_rpc_failure.py\", line 23, in setup_network\r\n    assert_equal(str(e), \"[node 0] Unable to connect to bitcoind after 0s\")\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/util.py\", line 75, in assert_equal\r\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\r\nAssertionError: not([node 0] Error: no RPC connection == [node 0] Unable to connect to bitcoind after 0s)\r\n2024-08-15T07:30:20.480000Z TestFramework (INFO): Stopping nodes\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/feature_framework_rpc_failure.py\", line 32, in <module>\r\n    FeatureFrameworkRPCFailure(__file__).main()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 155, in main\r\n    exit_code = self.shutdown()\r\n                ^^^^^^^^^^^^^^^\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 318, in shutdown\r\n    self.stop_nodes()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 587, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 390, in stop_node\r\n    self.stop(wait=wait)\r\n    ^^^^^^^^^\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 209, in __getattr__\r\n    assert self.rpc_connected and self.rpc is not None, self._node_msg(\"Error: no RPC connection\")\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAssertionError: [node 0] Error: no RPC connection\r\n[node 0] Cleaning up leftover process\r\n```\r\n\r\nWith fix:\r\n```\r\n$ test/functional/feature_framework_rpc_failure.py\r\n2024-08-15T07:30:05.092000Z TestFramework (INFO): PRNG seed is: 1672695534155872365\r\n2024-08-15T07:30:05.092000Z TestFramework (INFO): Initializing test directory /run/user/1001/bitcoin_func_test_cow4vrf7\r\n2024-08-15T07:30:05.093000Z TestFramework (INFO): Forcing us to timeout instantly to simulate an unresponsive bitcoind\r\n2024-08-15T07:30:05.094000Z TestFramework.node0 (WARNING): Cannot call stop-RPC as we are not connected. Killing process 326500.\r\n2024-08-15T07:30:05.144000Z TestFramework (INFO): Caught AssertionError with expected message\r\n2024-08-15T07:30:05.194000Z TestFramework (INFO): Stopping nodes\r\n2024-08-15T07:30:05.194000Z TestFramework (INFO): Cleaning up /run/user/1001/bitcoin_func_test_cow4vrf7 on exit\r\n2024-08-15T07:30:05.194000Z TestFramework (INFO): Tests successful\r\n```",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2291136157",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "commented",
      "id": 2291183910,
      "node_id": "IC_kwDOABII586IkLEm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2291183910",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T12:32:10Z",
      "updated_at": "2024-08-15T12:32:10Z",
      "author_association": "MEMBER",
      "body": "Can you explain this a bit more? I think optimizing the test framework to cleanly shut down on a failure is a bit premature, and may not be needed. However, if a failing test may leave behind a dangling bitcoind process, this seems like something to fix, because it will otherwise lead to test warnings and failures down the road.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2291183910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13922841561,
      "node_id": "HRFPE_lADOABII586TGVLXzwAAAAM93bPZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13922841561",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-18T20:10:11Z"
    },
    {
      "event": "commented",
      "id": 2295379703,
      "node_id": "IC_kwDOABII586I0Lb3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2295379703",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-18T20:23:33Z",
      "updated_at": "2024-08-18T20:31:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Can you explain this a bit more? I think optimizing the test framework to cleanly shut down on a failure is a bit premature, and may not be needed.\r\n\r\nAs long as the additional complexity and maintenance burden is low, I think it is worth having a cleaner shutdown to avoid muddying the waters for people trying to figure out root causes.\r\n\r\n> However, if a failing test may leave behind a dangling bitcoind process, this seems like something to fix, because it will otherwise lead to test warnings and failures down the road.\r\n\r\nIt does clean up dangling bitcoind processes without the fix, as can be seen in the log:\r\n```\r\n[node 0] Cleaning up leftover process\r\n```\r\nThe latest push (~bcc87514e780cd35d1f71d5c4c4069a8fac95324~ 0ea00cddc3d4a3f92c6bfae13a8b844e97ebc8c3) now explains in the log message that it is terminating the process to avoid `wait_until_stopped` timing out (which raises an additional exception).\r\n\r\n\\+ Broke out a commit adding the `self.expected_ret_code` functionality, so that the fix commit in the middle is clearer.\r\n\\+ Attempted to make the comment at the top of the test file more explanatory.\r\n\\+ ~Switched from `process.kill()` to the somewhat less aggressive `process.terminate()` (although on second thoughts, if the RPC interface is not responding in a real-world situation outside of the added test, maybe `.kill()` is closer to what we want).~",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2295379703",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13922875317,
      "node_id": "HRFPE_lADOABII586TGVLXzwAAAAM93je1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13922875317",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-18T20:29:55Z"
    },
    {
      "event": "commented",
      "id": 2311026632,
      "node_id": "IC_kwDOABII586Jv3fI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2311026632",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T20:27:30Z",
      "updated_at": "2024-08-26T20:50:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "Last week I was [hit by this again](https://github.com/hodlinator/bitcoin/actions/runs/10491632082/job/29061229925#step:27:98). Probably line ending differences on Windows makes any additional Python exception reporting extra annoying to read due to every second line being blank (separate issue, but slightly improved by this PR producing less output).\r\n\r\n### Git-sleuthing to help motivate this PR\r\n#### Was this ever working?\r\nUnfortunately for my case, it seems the answer is no:\r\n7897338918dac072e788b8ab2919d4559f311bef (Aug, 2017) broke out **test_node.py** from **test_framework.py** added the `self.rpc_connected` flag. Would have been nice if it had protected use of the `stop()` RPC using this new flag (like in this PR) but unfortunately it did not.\r\n\r\n#### Fixes in the same area\r\n\r\nfafb33cdefd2d8ce065263978075d26a1672b630 (May, 2016) MarcoFalke wrapped `stop()` attempts in `try`/`except` so at least *other nodes* would have a chance of [shutting down properly](https://github.com/bitcoin/bitcoin/pull/7971#issuecomment-215962540). (6 days later in fab5233fe6c99d446a2cebc48cf479c3f026c2cc a timeout for waiting on the process to shutdown was added too, probably so the tests wouldn't hang waiting for a non-crashed `bitcoind` that we failed to send `stop()` to).\r\n\r\n#14670 (Dec, 2018) is tangential and adds **test/functional/feature_shutdown.py** in 28479f926f21f2a91bec5a06671c60e5b0c55532, to ensure that HTTP responses for `stop()` make it all the way back to the client if I'm understanding it correctly. It fixes #11777 (Nov, 2017) which is arguably about shutdowns not being clean enough (sometimes showing additional errors depending on timing). The current PR is certainly more nit-level, but still continuing in the same general direction.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2311026632",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "commented",
      "id": 2311186892,
      "node_id": "IC_kwDOABII586JwenM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2311186892",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T22:07:37Z",
      "updated_at": "2024-08-26T22:07:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "Another argument for this PR is that even the current title of #30390 is \"ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\". This in itself when looking at logs like https://github.com/bitcoin/bitcoin/actions/runs/9677128783/job/26698120754#step:27:225 is actually just a knock-on exception happening after the RPC connection attempt times out and `stop()`-RPC is called in vain:\r\n<details>\r\n<summary>Copied log excerpt</summary>\r\n\r\n```\r\n313/313 - wallet_listsinceblock.py --legacy-wallet failed, Duration: 2415 s\r\nstdout:\r\n2024-06-26T09:53:17.196000Z TestFramework (INFO): PRNG seed is: 3062882430636553844\r\n2024-06-26T09:53:17.227000Z TestFramework (INFO): Initializing test directory D:\\a\\_temp\\test_runner_₿_🏃_20240626_093314\\wallet_listsinceblock_88\r\n2024-06-26T10:33:29.783000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 569, in start_nodes\r\n    node.wait_for_rpc_connection()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 314, in wait_for_rpc_connection\r\n    self._raise_assertion_error(\"Unable to connect to bitcoind after {}s\".format(self.rpc_timeout))\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 188, in _raise_assertion_error\r\n    raise AssertionError(self._node_msg(msg))\r\nAssertionError: [node 3] Unable to connect to bitcoind after 2400s\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 131, in main\r\n    self.setup()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 302, in setup\r\n    self.setup_network()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 396, in setup_network\r\n    self.setup_nodes()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 418, in setup_nodes\r\n    self.start_nodes()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 572, in start_nodes\r\n    self.stop_nodes()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 587, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 375, in stop_node\r\n    self.stop(wait=wait)\r\n    ^^^^^^^^^\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 205, in __getattr__\r\n    assert self.rpc_connected and self.rpc is not None, self._node_msg(\"Error: no RPC connection\")\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAssertionError: [node 3] Error: no RPC connection\r\n2024-06-26T10:33:29.842000Z TestFramework (INFO): Stopping nodes\r\n[node 3] Cleaning up leftover process\r\n[node 2] Cleaning up leftover process\r\n[node 1] Cleaning up leftover process\r\n[node 0] Cleaning up leftover process\r\n\r\nstderr:\r\nTraceback (most recent call last):\r\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_listsinceblock.py\", line 508, in <module>\r\n    ListSinceBlockTest().main()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 155, in main\r\n    exit_code = self.shutdown()\r\n                ^^^^^^^^^^^^^^^\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 318, in shutdown\r\n    self.stop_nodes()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 587, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 375, in stop_node\r\n    self.stop(wait=wait)\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\authproxy.py\", line 127, in __call__\r\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\authproxy.py\", line 105, in _request\r\n    self.__conn.request(method, path, postdata, headers)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1336, in request\r\n    self._send_request(method, url, body, headers, encode_chunked)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1382, in _send_request\r\n    self.endheaders(body, encode_chunked=encode_chunked)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1331, in endheaders\r\n    self._send_output(message_body, encode_chunked=encode_chunked)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1091, in _send_output\r\n    self.send(msg)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1035, in send\r\n    self.connect()\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1001, in connect\r\n    self.sock = self._create_connection(\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\socket.py\", line 853, in create_connection\r\n    raise exceptions[0]\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\socket.py\", line 838, in create_connection\r\n    sock.connect(sa)\r\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\r\n```\r\n\r\n</details>\r\n\r\nA better title might have been \"Unable to connect to bitcoind after 2400s errors on Windows\", which this PR would have made it more likely to be in the first place (had it predated the issue).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2311186892",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14035813832,
      "node_id": "HRFPE_lADOABII586TGVLXzwAAAANEmYXI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14035813832",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-27T21:53:56Z"
    },
    {
      "event": "commented",
      "id": 2313645385,
      "node_id": "IC_kwDOABII586J521J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2313645385",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-27T21:54:40Z",
      "updated_at": "2024-08-27T21:54:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "After more investigation into #30390, my impression is that since `TestNode.wait_for_rpc_connection()` ignores a bunch of exceptions, the knock-on exceptions when calling `stop()` and failing prior to this PR actually may sometimes provide a clue for why the RPC connection wasn't established in the first place.\r\n\r\nThat realization made me add 2 more commits here, which provide more information on the original exceptions being triggered and ignored inside `wait_for_rpc_connection`. Only fair since we are avoiding the triggering of knock-on exceptions later.\r\n\r\nThe timeout exception's message thereby now includes counters of encountered (and ignored) exceptions + latest exception type & message:\r\n`Unable to connect to bitcoind after 60s (ignored errors: {'missing_credentials': 5}, latest error: ValueError('No RPC credentials'))`",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2313645385",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "labeled",
      "id": 14036556028,
      "node_id": "LE_lADOABII586TGVLXzwAAAANEpNj8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14036556028",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-27T23:54:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "subscribed",
      "id": 14041105342,
      "node_id": "SE_lADOABII586TGVLXzwAAAANE6kO-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14041105342",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-28T06:40:00Z"
    },
    {
      "event": "unlabeled",
      "id": 14445101903,
      "node_id": "UNLE_lADOABII586TGVLXzwAAAANc_sNP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14445101903",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-29T11:58:25Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 14619266491,
      "node_id": "LE_lADOABII586TGVLXzwAAAANnYE27",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14619266491",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-13T10:25:50Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "review_requested",
      "id": 14659939105,
      "node_id": "RRE_lADOABII586TGVLXzwAAAANpzOsh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14659939105",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-15T15:30:23Z",
      "requested_reviewer": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 14659942643,
      "node_id": "RRE_lADOABII586TGVLXzwAAAANpzPjz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14659942643",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-15T15:30:36Z",
      "requested_reviewer": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 2414327186,
      "node_id": "IC_kwDOABII586P57WS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2414327186",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-15T15:30:43Z",
      "updated_at": "2024-10-15T15:30:43Z",
      "author_association": "MEMBER",
      "body": "cc @tdb3 ",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2414327186",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "mentioned",
      "id": 14659948324,
      "node_id": "MEE_lADOABII586TGVLXzwAAAANpzQ8k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14659948324",
      "actor": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-15T15:30:46Z"
    },
    {
      "event": "subscribed",
      "id": 14659948347,
      "node_id": "SE_lADOABII586TGVLXzwAAAANpzQ87",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14659948347",
      "actor": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-15T15:30:46Z"
    },
    {
      "event": "commented",
      "id": 2417221839,
      "node_id": "IC_kwDOABII586QE-DP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2417221839",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-16T15:44:29Z",
      "updated_at": "2024-10-16T15:44:29Z",
      "author_association": "MEMBER",
      "body": "Could rebase for fresh CI?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2417221839",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "unlabeled",
      "id": 14727847056,
      "node_id": "UNLE_lADOABII586TGVLXzwAAAANt2RyQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14727847056",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-18T21:52:54Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14772018129,
      "node_id": "HRFPE_lADOABII586TGVLXzwAAAANwexvR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14772018129",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-21T22:11:10Z"
    },
    {
      "event": "commented",
      "id": 2427838505,
      "node_id": "IC_kwDOABII586QteAp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2427838505",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-21T22:14:16Z",
      "updated_at": "2024-10-21T22:14:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "(Rebased onto latest master).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2427838505",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "reviewed",
      "id": 2408783550,
      "node_id": "PRR_kwDOABII586Pkx6-",
      "url": null,
      "actor": null,
      "commit_id": "9173b056006fd3940675108aa3fe0d0d855af768",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 9173b056006fd3940675108aa3fe0d0d855af768\r\n\r\nThis seems quite useful when troubleshooting errors. Left a few nits, but nothing I feel very strongly about.",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#pullrequestreview-2408783550",
      "submitted_at": "2024-10-31T18:49:37Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVjYTkyYjE3YzVkMmQ1ZWZhN2IyMjQ2ZGExOTA1YmI4ZmQxODYyMzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ca92b17c5d2d5efa7b2246da1905bb8fd186230",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5ca92b17c5d2d5efa7b2246da1905bb8fd186230",
      "tree": {
        "sha": "01fa0221f43da0f33b4852d630853c9f0db72beb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/01fa0221f43da0f33b4852d630853c9f0db72beb"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 01fa0221f43da0f33b4852d630853c9f0db72beb\nparent 684873931b399af5bf34638141487923459d2713\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1730577289 +0100\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1730578033 +0100\n\ntest refactor: wait_for_rpc_connection - Treat OSErrors the same\n\nConnectionResetError is an OSError as well (ECONNRESET), no reason to have a separate except-block for it.\n\nAlso improves comments for other exceptions and make condition above more Pythonic.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQNUTtt+56Bd0ZfZT7s/j6KTe+29jdWvVpQ8SWmVTh8/l2B4FkbPxy0ioPtaUFqTPZH\nhUhGJI6PAt9ZXy/mPrRAI=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/684873931b399af5bf34638141487923459d2713",
          "sha": "684873931b399af5bf34638141487923459d2713",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/684873931b399af5bf34638141487923459d2713"
        }
      ],
      "message": "test refactor: wait_for_rpc_connection - Treat OSErrors the same\n\nConnectionResetError is an OSError as well (ECONNRESET), no reason to have a separate except-block for it.\n\nAlso improves comments for other exceptions and make condition above more Pythonic.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-11-02T20:07:13Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-11-02T19:54:49Z"
      },
      "sha": "5ca92b17c5d2d5efa7b2246da1905bb8fd186230"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15083990718,
      "node_id": "HRFPE_lADOABII586TGVLXzwAAAAODE26-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15083990718",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-02T20:15:14Z"
    },
    {
      "event": "reviewed",
      "id": 2411714494,
      "node_id": "PRR_kwDOABII586Pv9e-",
      "url": null,
      "actor": null,
      "commit_id": "1148c4a53295e7635a813aadfde53ba5d973395c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the review @tdb3!\r\n\r\nImplemented feedback from that review, made the code a bit more Pythonic and improved comments slightly.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#pullrequestreview-2411714494",
      "submitted_at": "2024-11-02T20:26:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
    },
    {
      "event": "reviewed",
      "id": 2411750030,
      "node_id": "PRR_kwDOABII586PwGKO",
      "url": null,
      "actor": null,
      "commit_id": "1148c4a53295e7635a813aadfde53ba5d973395c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code Review re ACK 1148c4a53295e7635a813aadfde53ba5d973395c\r\n\r\nNice work cleaning up the existing code around the core changes. Increases readability.",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#pullrequestreview-2411750030",
      "submitted_at": "2024-11-02T22:59:44Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI1NGIzNmQyNTY1YTEyNGNlZTRjZTdmNWMwZjJkNjM1YmMwOTY2N2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b54b36d2565a124cee4ce7f5c0f2d635bc09667b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b54b36d2565a124cee4ce7f5c0f2d635bc09667b",
      "tree": {
        "sha": "114a41462e5a1a6020c948a40b062d134f1ee775",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/114a41462e5a1a6020c948a40b062d134f1ee775"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 114a41462e5a1a6020c948a40b062d134f1ee775\nparent 5ca92b17c5d2d5efa7b2246da1905bb8fd186230\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1730588809 +0100\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1730588809 +0100\n\ntest: Include ignored errors in RPC connection timeout\n\nWhen an RPC connection attempt with bitcoind times out, include which ignored errors occurred in the exception message.\n\nMay provide clues of what has gone wrong.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQPNGfnnlXCngR34oIzxm1qj/SmXe/v9iQVO3Av0QwS9hplu9K6vDMIOB7F2JWqxHJP\ncSMFMWGPf1YNuDDBHT2wA=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5ca92b17c5d2d5efa7b2246da1905bb8fd186230",
          "sha": "5ca92b17c5d2d5efa7b2246da1905bb8fd186230",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5ca92b17c5d2d5efa7b2246da1905bb8fd186230"
        }
      ],
      "message": "test: Include ignored errors in RPC connection timeout\n\nWhen an RPC connection attempt with bitcoind times out, include which ignored errors occurred in the exception message.\n\nMay provide clues of what has gone wrong.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-11-02T23:06:49Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-11-02T23:06:49Z"
      },
      "sha": "b54b36d2565a124cee4ce7f5c0f2d635bc09667b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBiMDJiMGRhNDk4Y2MxNDUwMWQ2ZDE0ZWVkYmRiYTA3ODZjZDkwZWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b02b0da498cc14501d6d14eedbdba0786cd90ed",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0b02b0da498cc14501d6d14eedbdba0786cd90ed",
      "tree": {
        "sha": "3924ef1476499b8095dd5e4eae5ac637a3887fdb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3924ef1476499b8095dd5e4eae5ac637a3887fdb"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3924ef1476499b8095dd5e4eae5ac637a3887fdb\nparent b54b36d2565a124cee4ce7f5c0f2d635bc09667b\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724011491 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1730588810 +0100\n\ntest: Allow changing expected internal return code\n\nTo be used in next commit.\n\nAlso adds process IDs in relevant log messages.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQC4qSp9CxR+g/NUX5/a42CVHu8tbtKt/mJITQHeiaFjnFiJS2b8awNkbE3Y1cBkVaI\ndF3EHRhRioQRFE4MFy2AI=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b54b36d2565a124cee4ce7f5c0f2d635bc09667b",
          "sha": "b54b36d2565a124cee4ce7f5c0f2d635bc09667b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b54b36d2565a124cee4ce7f5c0f2d635bc09667b"
        }
      ],
      "message": "test: Allow changing expected internal return code\n\nTo be used in next commit.\n\nAlso adds process IDs in relevant log messages.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-11-02T23:06:50Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-18T20:04:51Z"
      },
      "sha": "0b02b0da498cc14501d6d14eedbdba0786cd90ed"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVlNjc2ZTEyNDhhMTUzOWY3YzM0NGYwY2IxZjU0YzMzYTgwNjUzYTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5e676e1248a1539f7c344f0cb1f54c33a80653a2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5e676e1248a1539f7c344f0cb1f54c33a80653a2",
      "tree": {
        "sha": "aab5840486bad14f00245ef553ad1a80d37790aa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/aab5840486bad14f00245ef553ad1a80d37790aa"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree aab5840486bad14f00245ef553ad1a80d37790aa\nparent 0b02b0da498cc14501d6d14eedbdba0786cd90ed\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724012970 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1730588810 +0100\n\ntest: kill process if stop-RPC is not available\n\n`BitcoinTestFramework.start_nodes()`, upon failing to establish RPC connections, calls `stop_nodes()` which would raise an exception immediately through attempting to use the non-existent RPC interface, preventing a clean shutdown.\n\nWe now avoid calling the RPC interface and instead kill the bitcoind process, so that subsequent wait_until_stopped() calls will succeed instantly instead of waiting for the full timeout only to raise another exception.\n\nSince explicit killing means the bitcoind process will not exit with return code 0, we adjust the expected value.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQIWg03eV84Hew3nV/MAQWfq+h7LfETjBeIttG9Ud9cdYAfnmsm8Xe8a4qY/RAnQiFQ\nXEpCN5HyhFHp3Bz6T0IwQ=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b02b0da498cc14501d6d14eedbdba0786cd90ed",
          "sha": "0b02b0da498cc14501d6d14eedbdba0786cd90ed",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0b02b0da498cc14501d6d14eedbdba0786cd90ed"
        }
      ],
      "message": "test: kill process if stop-RPC is not available\n\n`BitcoinTestFramework.start_nodes()`, upon failing to establish RPC connections, calls `stop_nodes()` which would raise an exception immediately through attempting to use the non-existent RPC interface, preventing a clean shutdown.\n\nWe now avoid calling the RPC interface and instead kill the bitcoind process, so that subsequent wait_until_stopped() calls will succeed instantly instead of waiting for the full timeout only to raise another exception.\n\nSince explicit killing means the bitcoind process will not exit with return code 0, we adjust the expected value.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-11-02T23:06:50Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-18T20:29:30Z"
      },
      "sha": "5e676e1248a1539f7c344f0cb1f54c33a80653a2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU1YTEwY2ZhZjZlNDMyYjNkZGEwZDNkZmFmMjQyZTE3ZTFjMDQ3MDY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e5a10cfaf6e432b3dda0d3dfaf242e17e1c04706",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e5a10cfaf6e432b3dda0d3dfaf242e17e1c04706",
      "tree": {
        "sha": "e19e64f91adb381f999b5edaf84c8138b4149d02",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e19e64f91adb381f999b5edaf84c8138b4149d02"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e19e64f91adb381f999b5edaf84c8138b4149d02\nparent 5e676e1248a1539f7c344f0cb1f54c33a80653a2\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1730561003 +0100\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1730588810 +0100\n\ntest: assert_raises_message - don't require JSONRPCException type layout\n\nNot all exceptions have an .error dict containing a 'message' key. (A leftover from before the separate assert_raises_rpc_error was introduced).\n\nThe function is not actually called as of this commit, but will start getting used again in the next commit.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQD+8AHi5pkmMTCtQ4Xha+g8nqB28asZ6TLGmtjSr36G9i9nc3d557LYaxXpyyKYRHc\nYSyzzHz6y3H6R+xWGOvAg=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5e676e1248a1539f7c344f0cb1f54c33a80653a2",
          "sha": "5e676e1248a1539f7c344f0cb1f54c33a80653a2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5e676e1248a1539f7c344f0cb1f54c33a80653a2"
        }
      ],
      "message": "test: assert_raises_message - don't require JSONRPCException type layout\n\nNot all exceptions have an .error dict containing a 'message' key. (A leftover from before the separate assert_raises_rpc_error was introduced).\n\nThe function is not actually called as of this commit, but will start getting used again in the next commit.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-11-02T23:06:50Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-11-02T15:23:23Z"
      },
      "sha": "e5a10cfaf6e432b3dda0d3dfaf242e17e1c04706"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA0MmNlZTcwNzNiMzM4ZDc5YjUxNzZkNDE1N2NmMDhiYmQwNzliOWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/042cee7073b338d79b5176d4157cf08bbd079b9f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/042cee7073b338d79b5176d4157cf08bbd079b9f",
      "tree": {
        "sha": "6409954fdbc5d9ccdb41e87e3c4f75db5845b525",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6409954fdbc5d9ccdb41e87e3c4f75db5845b525"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 6409954fdbc5d9ccdb41e87e3c4f75db5845b525\nparent e5a10cfaf6e432b3dda0d3dfaf242e17e1c04706\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724767729 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1730588810 +0100\n\ntest: Add feature_framework_rpc_failure.py\n\nVerifies correct behavior when failing to connect to bitcoind RPC interface during setup. Parent commit fixes issues where a raised exception raised additional knock-on exceptions.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQIkBeU09sNuzjI/4YWen8pL9F/isfV04vDQ1Xcys20IRdsSzWssnTm6bK/m4Eg3EjH\ngRj18lNQeEg8bKPep1JQc=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e5a10cfaf6e432b3dda0d3dfaf242e17e1c04706",
          "sha": "e5a10cfaf6e432b3dda0d3dfaf242e17e1c04706",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e5a10cfaf6e432b3dda0d3dfaf242e17e1c04706"
        }
      ],
      "message": "test: Add feature_framework_rpc_failure.py\n\nVerifies correct behavior when failing to connect to bitcoind RPC interface during setup. Parent commit fixes issues where a raised exception raised additional knock-on exceptions.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-11-02T23:06:50Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-27T14:08:49Z"
      },
      "sha": "042cee7073b338d79b5176d4157cf08bbd079b9f"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15087180052,
      "node_id": "HRFPE_lADOABII586TGVLXzwAAAAODRBkU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15087180052",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-02T23:10:24Z"
    },
    {
      "event": "reviewed",
      "id": 2411752016,
      "node_id": "PRR_kwDOABII586PwGpQ",
      "url": null,
      "actor": null,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re ACK 042cee7073b338d79b5176d4157cf08bbd079b9f",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#pullrequestreview-2411752016",
      "submitted_at": "2024-11-02T23:15:46Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
    },
    {
      "event": "reviewed",
      "id": 2412663196,
      "node_id": "PRR_kwDOABII586PzlGc",
      "url": null,
      "actor": null,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "left some nits on the first commit. Will take a look at the others later.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#pullrequestreview-2412663196",
      "submitted_at": "2024-11-06T18:18:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1824983303",
      "pull_request_review_id": 2408783550,
      "id": 1824983303,
      "node_id": "PRRC_kwDOABII585sxwkH",
      "diff_hunk": "@@ -313,25 +316,35 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 return\n             except JSONRPCException as e:  # Initialization phase\n                 # -28 RPC in warmup\n+                if e.error['code'] == -28:\n+                    ignored_errors[\"JSONRPCException -28\"] += 1\n                 # -342 Service unavailable, RPC server started but is shutting down due to error\n-                if e.error['code'] != -28 and e.error['code'] != -342:\n+                # - Ignore the exception to properly raise the FailedToStartError.\n+                elif e.error['code'] == -342:\n+                    ignored_errors[\"JSONRPCException -342\"] += 1",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 27,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "5c95843281bea483544e3f8348d40badda233aa1",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "non-blocking nit: might be a bit more Pythonic to use Counter.update() rather than `+= 1`.\r\nFor example:\r\n```python\r\nignored_errors.update([f\"JSONRPCException {e.error['code']}\"])\r\n```",
      "created_at": "2024-10-31T18:19:07Z",
      "updated_at": "2024-10-31T18:49:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1824983303",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1824983303"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": 319,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 324,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1824996905",
      "pull_request_review_id": 2408783550,
      "id": 1824996905,
      "node_id": "PRRC_kwDOABII585sxz4p",
      "diff_hunk": "@@ -313,25 +316,35 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 return\n             except JSONRPCException as e:  # Initialization phase\n                 # -28 RPC in warmup\n+                if e.error['code'] == -28:\n+                    ignored_errors[\"JSONRPCException -28\"] += 1\n                 # -342 Service unavailable, RPC server started but is shutting down due to error\n-                if e.error['code'] != -28 and e.error['code'] != -342:\n+                # - Ignore the exception to properly raise the FailedToStartError.\n+                elif e.error['code'] == -342:\n+                    ignored_errors[\"JSONRPCException -342\"] += 1\n+                else:\n                     raise  # unknown JSON RPC exception\n+                latest_error = repr(e)\n             except OSError as e:\n                 if e.errno == errno.ECONNRESET:\n                     # This might happen when the RPC server is in warmup, but shut down before the call to getblockcount\n                     # succeeds. Try again to properly raise the FailedToStartError\n-                    pass\n+                    ignored_errors[\"OSError.ECONNRESET\"] += 1\n                 elif e.errno == errno.ETIMEDOUT:\n-                    pass # Treat identical to ECONNRESET\n+                    ignored_errors[\"OSError.ETIMEDOUT\"] += 1 # Treat identical to ECONNRESET\n                 elif e.errno == errno.ECONNREFUSED:\n-                    pass  # Port not yet open?\n+                    ignored_errors[\"OSError.ECONNREFUSED\"] += 1 # Port not yet open?",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 42,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "5c95843281bea483544e3f8348d40badda233aa1",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "non-blocking nit: same with these.\r\ne.g.\r\n```python\r\nignored_errors.update([errno.errorcode[e.errno]])\r\n```",
      "created_at": "2024-10-31T18:27:21Z",
      "updated_at": "2024-10-31T18:49:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1824996905",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1824996905"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": 332,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 336,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1825023128",
      "pull_request_review_id": 2408783550,
      "id": 1825023128,
      "node_id": "PRRC_kwDOABII585sx6SY",
      "diff_hunk": "@@ -0,0 +1,41 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2024 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Verify failure to connect to bitcoind's RPC interface only raises one exception.\n+\n+Multiple exceptions being raised muddies the waters of what actually went wrong.\n+We should maintain this bar of only raising one exception as long as additional\n+maintenance and complexity is low.\n+\"\"\"\n+\n+from pathlib import Path\n+\n+from test_framework.util import (\n+    assert_equal,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class FeatureFrameworkRPCFailure(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        test_name = Path(__file__).name\n+        self.log.info(f\"{test_name}: Setting RPC timeout to 0 to simulate an unresponsive bitcoind\")\n+        self.rpc_timeout = 0\n+\n+        try:\n+            BitcoinTestFramework.setup_network(self)\n+        except AssertionError as e:\n+            assert_equal(str(e)[:47], \"[node 0] Unable to connect to bitcoind after 0s\")\n+            self.log.info(f\"{test_name}: Caught AssertionError with expected RPC connection failure message\")\n+        else:\n+            raise AssertionError(\"Didn't raise expected error\")",
      "path": "test/functional/feature_framework_rpc_failure.py",
      "position": null,
      "original_position": 35,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "9173b056006fd3940675108aa3fe0d0d855af768",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Maybe we can use `util.assert_raises()` or `util.assert_raises_message()` here to keep things more concise?",
      "created_at": "2024-10-31T18:47:30Z",
      "updated_at": "2024-10-31T18:49:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1825023128",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1825023128"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": 29,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826772195",
      "pull_request_review_id": 2411714494,
      "id": 1826772195,
      "node_id": "PRRC_kwDOABII585s4lTj",
      "diff_hunk": "@@ -313,25 +316,35 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 return\n             except JSONRPCException as e:  # Initialization phase\n                 # -28 RPC in warmup\n+                if e.error['code'] == -28:\n+                    ignored_errors[\"JSONRPCException -28\"] += 1\n                 # -342 Service unavailable, RPC server started but is shutting down due to error\n-                if e.error['code'] != -28 and e.error['code'] != -342:\n+                # - Ignore the exception to properly raise the FailedToStartError.\n+                elif e.error['code'] == -342:\n+                    ignored_errors[\"JSONRPCException -342\"] += 1\n+                else:\n                     raise  # unknown JSON RPC exception\n+                latest_error = repr(e)\n             except OSError as e:\n                 if e.errno == errno.ECONNRESET:\n                     # This might happen when the RPC server is in warmup, but shut down before the call to getblockcount\n                     # succeeds. Try again to properly raise the FailedToStartError\n-                    pass\n+                    ignored_errors[\"OSError.ECONNRESET\"] += 1\n                 elif e.errno == errno.ETIMEDOUT:\n-                    pass # Treat identical to ECONNRESET\n+                    ignored_errors[\"OSError.ETIMEDOUT\"] += 1 # Treat identical to ECONNRESET\n                 elif e.errno == errno.ECONNREFUSED:\n-                    pass  # Port not yet open?\n+                    ignored_errors[\"OSError.ECONNREFUSED\"] += 1 # Port not yet open?",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 42,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "5c95843281bea483544e3f8348d40badda233aa1",
      "in_reply_to_id": 1824996905,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "(Same issue with `update()`, see https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1826774806).",
      "created_at": "2024-11-02T20:21:00Z",
      "updated_at": "2024-11-02T20:28:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1826772195",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826772195"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": 332,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 336,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826774077",
      "pull_request_review_id": 2411714494,
      "id": 1826774077,
      "node_id": "PRRC_kwDOABII585s4lw9",
      "diff_hunk": "@@ -0,0 +1,41 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2024 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Verify failure to connect to bitcoind's RPC interface only raises one exception.\n+\n+Multiple exceptions being raised muddies the waters of what actually went wrong.\n+We should maintain this bar of only raising one exception as long as additional\n+maintenance and complexity is low.\n+\"\"\"\n+\n+from pathlib import Path\n+\n+from test_framework.util import (\n+    assert_equal,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class FeatureFrameworkRPCFailure(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        test_name = Path(__file__).name\n+        self.log.info(f\"{test_name}: Setting RPC timeout to 0 to simulate an unresponsive bitcoind\")\n+        self.rpc_timeout = 0\n+\n+        try:\n+            BitcoinTestFramework.setup_network(self)\n+        except AssertionError as e:\n+            assert_equal(str(e)[:47], \"[node 0] Unable to connect to bitcoind after 0s\")\n+            self.log.info(f\"{test_name}: Caught AssertionError with expected RPC connection failure message\")\n+        else:\n+            raise AssertionError(\"Didn't raise expected error\")",
      "path": "test/functional/feature_framework_rpc_failure.py",
      "position": null,
      "original_position": 35,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "9173b056006fd3940675108aa3fe0d0d855af768",
      "in_reply_to_id": 1825023128,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Had to add a commit (2a0c0e410e9f32dbf7af7229457889b09553c438) that refurbishes `assert_raises_message()`, but test is much cleaner now!",
      "created_at": "2024-11-02T20:22:41Z",
      "updated_at": "2024-11-02T20:26:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1826774077",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826774077"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": 29,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826774806",
      "pull_request_review_id": 2411714494,
      "id": 1826774806,
      "node_id": "PRRC_kwDOABII585s4l8W",
      "diff_hunk": "@@ -313,25 +316,35 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 return\n             except JSONRPCException as e:  # Initialization phase\n                 # -28 RPC in warmup\n+                if e.error['code'] == -28:\n+                    ignored_errors[\"JSONRPCException -28\"] += 1\n                 # -342 Service unavailable, RPC server started but is shutting down due to error\n-                if e.error['code'] != -28 and e.error['code'] != -342:\n+                # - Ignore the exception to properly raise the FailedToStartError.\n+                elif e.error['code'] == -342:\n+                    ignored_errors[\"JSONRPCException -342\"] += 1",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 27,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "5c95843281bea483544e3f8348d40badda233aa1",
      "in_reply_to_id": 1824983303,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Tried using `update()`, but it resulted in things like:\r\n```\r\nAssertionError: [node 0] Unable to connect to bitcoind after 10s (ignored errors: {'m': 40, 'i': 120, 's': 120, 'n': 80, 'g': 40, '_': 40, 'c': 40, 'r': 40, 'e': 80, 'd': 40, 't': 40, 'a': 40, 'l': 40}, latest error: ValueError('No RPC credentials'))\r\n```\r\ni.e. it was iterating over the string and incrementing an entry for each unique character, which seems to match the [docs](https://docs.python.org/3/library/collections.html#collections.Counter.update) even though not super clear.~\r\n\r\n---\r\n\r\nEdit: @tdb3 pointed out out of band than I'd probably missed out the `[]`-brackets around the strings to make `update()` iterate through whole strings instead of chars.\r\n```python\r\nignored_errors.update([f\"JSONRPCException {e.error['code']}\"])\r\n````\r\nfeels slightly more contrived and verbose to me than\r\n```python\r\nignored_errors[f\"JSONRPCException {e.error['code']}\"] += 1\r\n```\r\nbut neither is too elegant.\r\n\r\nMight switch away from `Counter` if something more appropriate is found.",
      "created_at": "2024-11-02T20:23:20Z",
      "updated_at": "2024-11-02T21:37:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1826774806",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826774806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": 319,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 324,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826867112",
      "pull_request_review_id": 2411750030,
      "id": 1826867112,
      "node_id": "PRRC_kwDOABII585s48eo",
      "diff_hunk": "@@ -317,19 +320,25 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 # -342 Service unavailable, RPC server started but is shutting down due to error\n                 if e.error['code'] not in [-28, -342]:\n                     raise  # unknown JSON RPC exception\n+                ignored_errors[f\"JSONRPCException {e.error['code']}\"] += 1\n+                latest_error = repr(e)\n             except OSError as e:\n                 # ECONNRESET   - This might happen when the RPC server is in warmup, but shut down before the call to\n                 #                getblockcount succeeds. Try again to properly raise the FailedToStartError\n                 # ETIMEDOUT    - Treat identical to ECONNRESET\n                 # ECONNREFUSED - Port not yet open?\n                 if e.errno not in [errno.ECONNRESET, errno.ETIMEDOUT, errno.ECONNREFUSED]:\n                     raise  # unknown OS error\n+                ignored_errors[f\"OSError {errno.errorcode[e.errno]}\"] += 1\n+                latest_error = repr(e)\n             except ValueError as e:\n                 # If cookie file is missing and no rpcuser or rpcpassword; bitcoind is still starting, otherwise raise\n                 if \"No RPC credentials\" not in str(e):\n                     raise\n+                ignored_errors[\"missing_credentials\"] += 1\n+                latest_error = repr(e)\n             time.sleep(1.0 / poll_per_s)\n-        self._raise_assertion_error(\"Unable to connect to bitcoind after {}s\".format(self.rpc_timeout))\n+        self._raise_assertion_error(\"Unable to connect to bitcoind after {}s (ignored errors: {}, latest error: {})\".format(self.rpc_timeout, str(dict(ignored_errors)), latest_error))",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 40,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "b6b30c2d9c24fde23a613ee9b3681d66ec7abff1",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "non-blocking pico-nit:\r\nIf this file gets touched again, could use `f` string instead of `format`.\r\nhttps://github.com/bitcoin/bitcoin/blob/master/test/functional/README.md#style-guidelines",
      "created_at": "2024-11-02T22:50:33Z",
      "updated_at": "2024-11-02T22:59:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1826867112",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826867112"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 341,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826869399",
      "pull_request_review_id": 2411751751,
      "id": 1826869399,
      "node_id": "PRRC_kwDOABII585s49CX",
      "diff_hunk": "@@ -317,19 +320,25 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 # -342 Service unavailable, RPC server started but is shutting down due to error\n                 if e.error['code'] not in [-28, -342]:\n                     raise  # unknown JSON RPC exception\n+                ignored_errors[f\"JSONRPCException {e.error['code']}\"] += 1\n+                latest_error = repr(e)\n             except OSError as e:\n                 # ECONNRESET   - This might happen when the RPC server is in warmup, but shut down before the call to\n                 #                getblockcount succeeds. Try again to properly raise the FailedToStartError\n                 # ETIMEDOUT    - Treat identical to ECONNRESET\n                 # ECONNREFUSED - Port not yet open?\n                 if e.errno not in [errno.ECONNRESET, errno.ETIMEDOUT, errno.ECONNREFUSED]:\n                     raise  # unknown OS error\n+                ignored_errors[f\"OSError {errno.errorcode[e.errno]}\"] += 1\n+                latest_error = repr(e)\n             except ValueError as e:\n                 # If cookie file is missing and no rpcuser or rpcpassword; bitcoind is still starting, otherwise raise\n                 if \"No RPC credentials\" not in str(e):\n                     raise\n+                ignored_errors[\"missing_credentials\"] += 1\n+                latest_error = repr(e)\n             time.sleep(1.0 / poll_per_s)\n-        self._raise_assertion_error(\"Unable to connect to bitcoind after {}s\".format(self.rpc_timeout))\n+        self._raise_assertion_error(\"Unable to connect to bitcoind after {}s (ignored errors: {}, latest error: {})\".format(self.rpc_timeout, str(dict(ignored_errors)), latest_error))",
      "path": "test/functional/test_framework/test_node.py",
      "position": null,
      "original_position": 40,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "b6b30c2d9c24fde23a613ee9b3681d66ec7abff1",
      "in_reply_to_id": 1826867112,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good point! Resolved in latest push.",
      "created_at": "2024-11-02T23:11:35Z",
      "updated_at": "2024-11-02T23:11:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1826869399",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1826869399"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 341,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827490394",
      "pull_request_review_id": 2412663196,
      "id": 1827490394,
      "node_id": "PRRC_kwDOABII585s7Upa",
      "diff_hunk": "@@ -0,0 +1,35 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2024 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"\n+Verify failure to connect to bitcoind's RPC interface only raises one exception.\n+\n+Multiple exceptions being raised muddies the waters of what actually went wrong.\n+We should maintain this bar of only raising one exception as long as additional\n+maintenance and complexity is low.\n+\"\"\"\n+\n+from pathlib import Path\n+\n+from test_framework.util import (\n+    assert_raises_message,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+\n+class FeatureFrameworkRPCFailure(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def setup_network(self):\n+        test_name = Path(__file__).name\n+        self.log.info(f\"{test_name}: Setting RPC timeout to 0 to simulate an unresponsive bitcoind\")",
      "path": "test/functional/feature_framework_rpc_failure.py",
      "position": 26,
      "original_position": 26,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Any reason to log the file name here? The containing folder of the log should already have the name of the test/file. If not, the user should know which test they called to know it.\r\n\r\nIf not, and this was helpful, it would be better to log it for all tests, instead of just for this one test specifically.",
      "created_at": "2024-11-04T10:15:01Z",
      "updated_at": "2024-11-06T18:18:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1827490394",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827490394"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 26,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827578786",
      "pull_request_review_id": 2412663196,
      "id": 1827578786,
      "node_id": "PRRC_kwDOABII585s7qOi",
      "diff_hunk": "@@ -311,23 +311,21 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 self.rpc_connected = True\n                 self.url = self.rpc.rpc_url\n                 return\n-            except JSONRPCException as e:  # Initialization phase\n+            except JSONRPCException as e:\n+                # Avoid raising these, to possibly raise the FailedToStartError on next iteration.",
      "path": "test/functional/test_framework/test_node.py",
      "position": 57,
      "original_position": 6,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "5ca92b17c5d2d5efa7b2246da1905bb8fd186230",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit in 5ca92b17c5d2d5efa7b2246da1905bb8fd186230: It is obvious, but could mention the success case as well?\r\n\r\n`Retry after these, until a permanent success or failure state (such as FailedToStartError, or timeout) is reached.`?",
      "created_at": "2024-11-04T11:24:08Z",
      "updated_at": "2024-11-06T18:18:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1827578786",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827578786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 320,
      "original_line": 315,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827592298",
      "pull_request_review_id": 2412663196,
      "id": 1827592298,
      "node_id": "PRRC_kwDOABII585s7thq",
      "diff_hunk": "@@ -311,23 +311,21 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 self.rpc_connected = True\n                 self.url = self.rpc.rpc_url\n                 return\n-            except JSONRPCException as e:  # Initialization phase\n+            except JSONRPCException as e:\n+                # Avoid raising these, to possibly raise the FailedToStartError on next iteration.\n                 # -28 RPC in warmup\n                 # -342 Service unavailable, RPC server started but is shutting down due to error",
      "path": "test/functional/test_framework/test_node.py",
      "position": 59,
      "original_position": 8,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "5ca92b17c5d2d5efa7b2246da1905bb8fd186230",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't think this is true, it is just one example. I think 342 can be raised by authproxy.py for various reasons.",
      "created_at": "2024-11-04T11:36:02Z",
      "updated_at": "2024-11-06T18:18:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1827592298",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827592298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 322,
      "original_line": 317,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827600606",
      "pull_request_review_id": 2412663196,
      "id": 1827600606,
      "node_id": "PRRC_kwDOABII585s7vje",
      "diff_hunk": "@@ -311,23 +311,21 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 self.rpc_connected = True\n                 self.url = self.rpc.rpc_url\n                 return\n-            except JSONRPCException as e:  # Initialization phase\n+            except JSONRPCException as e:\n+                # Avoid raising these, to possibly raise the FailedToStartError on next iteration.\n                 # -28 RPC in warmup\n                 # -342 Service unavailable, RPC server started but is shutting down due to error\n-                if e.error['code'] != -28 and e.error['code'] != -342:\n+                if e.error['code'] not in [-28, -342]:\n                     raise  # unknown JSON RPC exception\n-            except ConnectionResetError:\n-                # This might happen when the RPC server is in warmup, but shut down before the call to getblockcount\n-                # succeeds. Try again to properly raise the FailedToStartError\n-                pass\n             except OSError as e:\n-                if e.errno == errno.ETIMEDOUT:\n-                    pass  # Treat identical to ConnectionResetError\n-                elif e.errno == errno.ECONNREFUSED:\n-                    pass  # Port not yet open?\n-                else:\n+                # ECONNRESET   - This might happen when the RPC server is in warmup, but shut down before the call to\n+                #                getblockcount succeeds. Try again to properly raise the FailedToStartError\n+                # ETIMEDOUT    - Treat identical to ECONNRESET\n+                # ECONNREFUSED - Port not yet open?",
      "path": "test/functional/test_framework/test_node.py",
      "position": 78,
      "original_position": 25,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "5ca92b17c5d2d5efa7b2246da1905bb8fd186230",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: Could just mention that the three are treated equal to \"-342 Service unavailable\", which is already explained above?",
      "created_at": "2024-11-04T11:42:48Z",
      "updated_at": "2024-11-06T18:18:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1827600606",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827600606"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 331,
      "original_line": 324,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827605564",
      "pull_request_review_id": 2412663196,
      "id": 1827605564,
      "node_id": "PRRC_kwDOABII585s7ww8",
      "diff_hunk": "@@ -311,23 +311,21 @@ def wait_for_rpc_connection(self, *, wait_for_import=True):\n                 self.rpc_connected = True\n                 self.url = self.rpc.rpc_url\n                 return\n-            except JSONRPCException as e:  # Initialization phase\n+            except JSONRPCException as e:\n+                # Avoid raising these, to possibly raise the FailedToStartError on next iteration.\n                 # -28 RPC in warmup\n                 # -342 Service unavailable, RPC server started but is shutting down due to error\n-                if e.error['code'] != -28 and e.error['code'] != -342:\n+                if e.error['code'] not in [-28, -342]:\n                     raise  # unknown JSON RPC exception\n-            except ConnectionResetError:\n-                # This might happen when the RPC server is in warmup, but shut down before the call to getblockcount\n-                # succeeds. Try again to properly raise the FailedToStartError\n-                pass\n             except OSError as e:\n-                if e.errno == errno.ETIMEDOUT:\n-                    pass  # Treat identical to ConnectionResetError\n-                elif e.errno == errno.ECONNREFUSED:\n-                    pass  # Port not yet open?\n-                else:\n+                # ECONNRESET   - This might happen when the RPC server is in warmup, but shut down before the call to\n+                #                getblockcount succeeds. Try again to properly raise the FailedToStartError\n+                # ETIMEDOUT    - Treat identical to ECONNRESET\n+                # ECONNREFUSED - Port not yet open?\n+                if e.errno not in [errno.ECONNRESET, errno.ETIMEDOUT, errno.ECONNREFUSED]:\n                     raise  # unknown OS error\n-            except ValueError as e:  # cookie file not found and no rpcuser or rpcpassword; bitcoind is still starting\n+            except ValueError as e:\n+                # If cookie file is missing and no rpcuser or rpcpassword; bitcoind is still starting, otherwise raise",
      "path": "test/functional/test_framework/test_node.py",
      "position": 85,
      "original_position": 30,
      "commit_id": "042cee7073b338d79b5176d4157cf08bbd079b9f",
      "original_commit_id": "5ca92b17c5d2d5efa7b2246da1905bb8fd186230",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: I don't think \"bitcoind is still starting\" is true either. It is just one example. Another example would be that the cookie file is (accidentally) disabled in the config.\r\n\r\nWhat about just `Retry if cookie file is not created and no rpcuser or rpcpassword.\"?",
      "created_at": "2024-11-04T11:47:12Z",
      "updated_at": "2024-11-06T18:18:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#discussion_r1827605564",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1827605564"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 337,
      "original_line": 328,
      "side": "RIGHT"
    }
  ]
}