{
  "type": "issue",
  "issue": {
    "id": 378920700,
    "node_id": "MDU6SXNzdWUzNzg5MjA3MDA=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/14692",
    "number": 14692,
    "state": "open",
    "state_reason": null,
    "title": "Can't configure bitocoind to only send tx via Tor but receive clearnet transactions",
    "body": "<!-- Describe the issue -->\r\nThere does not seen to be a way to enable onlynet=onion for sending only and regular clearnet for receiving only.\r\n\r\n<!--- What behavior did you expect? -->\r\nI expected that onlynet=onion would mean outbound connections from only onion nodes. This sort of works but I need to manually add nodes and then if a node is not open also to the outside I am in an isolate Bitcoin network. I also do not seem to be getting any inbound connections with onlynet=onion is this because my IP is always different under Tor and I need to post my .onion domain somewhere for people to find?\r\n\r\n<!--- What was the actual behavior (provide screenshots if the issue is GUI-related)? -->\r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n0.17\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\nUbuntu 18.04\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\n",
    "user": {
      "login": "ultimatevert",
      "id": 39247961,
      "node_id": "MDQ6VXNlcjM5MjQ3OTYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/39247961?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ultimatevert",
      "html_url": "https://github.com/ultimatevert",
      "followers_url": "https://api.github.com/users/ultimatevert/followers",
      "following_url": "https://api.github.com/users/ultimatevert/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ultimatevert/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ultimatevert/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ultimatevert/subscriptions",
      "organizations_url": "https://api.github.com/users/ultimatevert/orgs",
      "repos_url": "https://api.github.com/users/ultimatevert/repos",
      "events_url": "https://api.github.com/users/ultimatevert/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ultimatevert/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      },
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 6,
    "created_at": "2018-11-08T21:17:55Z",
    "updated_at": "2021-07-04T13:04:48Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 1956215182,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE5NTYyMTUxODI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1956215182",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-11-09T07:44:17Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "labeled",
      "id": 1960303681,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE5NjAzMDM2ODE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1960303681",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-11-12T13:38:29Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "commented",
      "id": 437883640,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzg4MzY0MA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437883640",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-11-12T13:39:46Z",
      "updated_at": "2018-11-12T13:39:46Z",
      "author_association": "MEMBER",
      "body": "This is indeed currently not possible.\r\n\r\nMind that transactions are broadcasted over both incoming and outgoing connections.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14692#issuecomment-437883640",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692"
    },
    {
      "event": "commented",
      "id": 437887487,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQzNzg4NzQ4Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/437887487",
      "actor": {
        "login": "kristapsk",
        "id": 4500994,
        "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kristapsk",
        "html_url": "https://github.com/kristapsk",
        "followers_url": "https://api.github.com/users/kristapsk/followers",
        "following_url": "https://api.github.com/users/kristapsk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kristapsk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kristapsk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
        "organizations_url": "https://api.github.com/users/kristapsk/orgs",
        "repos_url": "https://api.github.com/users/kristapsk/repos",
        "events_url": "https://api.github.com/users/kristapsk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kristapsk/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-11-12T13:50:23Z",
      "updated_at": "2018-11-12T13:50:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "This seems like a good idea to me. New configuration option would be needed, for example, \"onlybroadcastnet=onion\" or something like that.",
      "user": {
        "login": "kristapsk",
        "id": 4500994,
        "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kristapsk",
        "html_url": "https://github.com/kristapsk",
        "followers_url": "https://api.github.com/users/kristapsk/followers",
        "following_url": "https://api.github.com/users/kristapsk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kristapsk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kristapsk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
        "organizations_url": "https://api.github.com/users/kristapsk/orgs",
        "repos_url": "https://api.github.com/users/kristapsk/repos",
        "events_url": "https://api.github.com/users/kristapsk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kristapsk/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14692#issuecomment-437887487",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692"
    },
    {
      "event": "commented",
      "id": 438479577,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQzODQ3OTU3Nw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/438479577",
      "actor": {
        "login": "kristapsk",
        "id": 4500994,
        "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kristapsk",
        "html_url": "https://github.com/kristapsk",
        "followers_url": "https://api.github.com/users/kristapsk/followers",
        "following_url": "https://api.github.com/users/kristapsk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kristapsk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kristapsk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
        "organizations_url": "https://api.github.com/users/kristapsk/orgs",
        "repos_url": "https://api.github.com/users/kristapsk/repos",
        "events_url": "https://api.github.com/users/kristapsk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kristapsk/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-11-13T23:34:52Z",
      "updated_at": "2018-11-13T23:34:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "Looked at the code, at the first sight this does not seem too hard to implement. So, if there aren't any strong NACK's against the concept, I could work on this.\r\n\r\nIt seems to me such configuration, where node receives transactions and blocks from both clearnet and Tor, but only broadcasts transtactions via Tor, helps against some of the issues mentioned in [this paper](https://ieeexplore.ieee.org/document/7163022).",
      "user": {
        "login": "kristapsk",
        "id": 4500994,
        "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kristapsk",
        "html_url": "https://github.com/kristapsk",
        "followers_url": "https://api.github.com/users/kristapsk/followers",
        "following_url": "https://api.github.com/users/kristapsk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kristapsk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kristapsk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
        "organizations_url": "https://api.github.com/users/kristapsk/orgs",
        "repos_url": "https://api.github.com/users/kristapsk/repos",
        "events_url": "https://api.github.com/users/kristapsk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kristapsk/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14692#issuecomment-438479577",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692"
    },
    {
      "event": "commented",
      "id": 441337691,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ0MTMzNzY5MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/441337691",
      "actor": {
        "login": "ultimatevert",
        "id": 39247961,
        "node_id": "MDQ6VXNlcjM5MjQ3OTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/39247961?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ultimatevert",
        "html_url": "https://github.com/ultimatevert",
        "followers_url": "https://api.github.com/users/ultimatevert/followers",
        "following_url": "https://api.github.com/users/ultimatevert/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ultimatevert/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ultimatevert/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ultimatevert/subscriptions",
        "organizations_url": "https://api.github.com/users/ultimatevert/orgs",
        "repos_url": "https://api.github.com/users/ultimatevert/repos",
        "events_url": "https://api.github.com/users/ultimatevert/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ultimatevert/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-11-24T02:15:00Z",
      "updated_at": "2018-11-24T02:15:00Z",
      "author_association": "NONE",
      "body": "I agree with what you say and think it would be cool to have this as an extra option. \r\n\r\nI am also think having the option onlybroadcastnet=onion AND onlybroadcastnet=tor would be useful. The tor option would use tor to connect to normal nodes through tor, that won't solve the issue the paper presents but it could help with anonymity for people that use their full node as a wallet.",
      "user": {
        "login": "ultimatevert",
        "id": 39247961,
        "node_id": "MDQ6VXNlcjM5MjQ3OTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/39247961?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ultimatevert",
        "html_url": "https://github.com/ultimatevert",
        "followers_url": "https://api.github.com/users/ultimatevert/followers",
        "following_url": "https://api.github.com/users/ultimatevert/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ultimatevert/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ultimatevert/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ultimatevert/subscriptions",
        "organizations_url": "https://api.github.com/users/ultimatevert/orgs",
        "repos_url": "https://api.github.com/users/ultimatevert/repos",
        "events_url": "https://api.github.com/users/ultimatevert/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ultimatevert/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14692#issuecomment-441337691",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692"
    },
    {
      "event": "commented",
      "id": 453866446,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ1Mzg2NjQ0Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/453866446",
      "actor": {
        "login": "rytido",
        "id": 7735281,
        "node_id": "MDQ6VXNlcjc3MzUyODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7735281?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rytido",
        "html_url": "https://github.com/rytido",
        "followers_url": "https://api.github.com/users/rytido/followers",
        "following_url": "https://api.github.com/users/rytido/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rytido/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rytido/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rytido/subscriptions",
        "organizations_url": "https://api.github.com/users/rytido/orgs",
        "repos_url": "https://api.github.com/users/rytido/repos",
        "events_url": "https://api.github.com/users/rytido/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rytido/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-01-13T21:18:35Z",
      "updated_at": "2019-01-13T21:18:35Z",
      "author_association": "NONE",
      "body": "I believe this functionality is possible currently if you just keep your port closed, right? I have the standard 8 outbound connections, but also allow inbound via Tor this way.",
      "user": {
        "login": "rytido",
        "id": 7735281,
        "node_id": "MDQ6VXNlcjc3MzUyODE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7735281?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rytido",
        "html_url": "https://github.com/rytido",
        "followers_url": "https://api.github.com/users/rytido/followers",
        "following_url": "https://api.github.com/users/rytido/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rytido/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rytido/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rytido/subscriptions",
        "organizations_url": "https://api.github.com/users/rytido/orgs",
        "repos_url": "https://api.github.com/users/rytido/repos",
        "events_url": "https://api.github.com/users/rytido/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rytido/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14692#issuecomment-453866446",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692"
    },
    {
      "event": "commented",
      "id": 462914858,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ2MjkxNDg1OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/462914858",
      "actor": {
        "login": "ultimatevert",
        "id": 39247961,
        "node_id": "MDQ6VXNlcjM5MjQ3OTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/39247961?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ultimatevert",
        "html_url": "https://github.com/ultimatevert",
        "followers_url": "https://api.github.com/users/ultimatevert/followers",
        "following_url": "https://api.github.com/users/ultimatevert/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ultimatevert/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ultimatevert/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ultimatevert/subscriptions",
        "organizations_url": "https://api.github.com/users/ultimatevert/orgs",
        "repos_url": "https://api.github.com/users/ultimatevert/repos",
        "events_url": "https://api.github.com/users/ultimatevert/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ultimatevert/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-02-12T20:09:24Z",
      "updated_at": "2019-02-12T20:10:19Z",
      "author_association": "NONE",
      "body": "Although you have  8 standard connections (outgoing) and tor connections (inbound), when your node broadcasts a transaction you will broadcast to all outgoing and inbound (hence broadcast). I desire a set up where I can configure if my node sends its transaction ONLY to outgoing connections OR inbound connections. I don't think the software can make that distinction though so it is probably easier to have an option that only broadcasts via onion, as someone else mentioned.\r\n\r\nOne setup is to configure Tor support to the node, the public key will get created, bhasdhsa.onion, as an example and I can give that to other people and I will have inbount connections via that onion service. The problem still exists where I will still broadcast to both onion and non onion.\r\n\r\nAnother setup is to have onlynet=onion so that my outgoing connections are only to onion services, previous nodes that added me would still be able to connect as my clearnet port is still open/working. Now the final kicker would be a setting such as 'onlybroadcast=onion' which will make my node only broadcast via .onion service outgoing connections but still receive transactions from clearnet via inbound connections. This should also help solve the \"Why bitcoin over Tor isn't a good idea\" scenario, because your node is still opened to the clearnet.",
      "user": {
        "login": "ultimatevert",
        "id": 39247961,
        "node_id": "MDQ6VXNlcjM5MjQ3OTYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/39247961?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ultimatevert",
        "html_url": "https://github.com/ultimatevert",
        "followers_url": "https://api.github.com/users/ultimatevert/followers",
        "following_url": "https://api.github.com/users/ultimatevert/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ultimatevert/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ultimatevert/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ultimatevert/subscriptions",
        "organizations_url": "https://api.github.com/users/ultimatevert/orgs",
        "repos_url": "https://api.github.com/users/ultimatevert/repos",
        "events_url": "https://api.github.com/users/ultimatevert/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ultimatevert/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/14692#issuecomment-462914858",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/14692"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "kristapsk",
        "id": 4500994,
        "node_id": "MDQ6VXNlcjQ1MDA5OTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4500994?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/kristapsk",
        "html_url": "https://github.com/kristapsk",
        "followers_url": "https://api.github.com/users/kristapsk/followers",
        "following_url": "https://api.github.com/users/kristapsk/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/kristapsk/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/kristapsk/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/kristapsk/subscriptions",
        "organizations_url": "https://api.github.com/users/kristapsk/orgs",
        "repos_url": "https://api.github.com/users/kristapsk/repos",
        "events_url": "https://api.github.com/users/kristapsk/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/kristapsk/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-11T12:11:23Z",
      "updated_at": "2022-02-11T12:11:23Z",
      "source": {
        "issue": {
          "id": 622632548,
          "node_id": "MDU6SXNzdWU2MjI2MzI1NDg=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19042",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19042/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19042/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19042/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/19042",
          "number": 19042,
          "state": "open",
          "state_reason": null,
          "title": "Tor-only transaction broadcast onlynet=onion alternative",
          "body": "It would be nice if there was a way to tell core to only broadcast transactions over Tor, but use clearnet for everything else.\r\n\r\nAs far as I can tell the only way to guarantee transaction broadcast over Tor is to use onlynet=onion, which means that all network traffic goes over Tor. The problem is that this introduces latency for blocks/confirmations and transactions. Some users might only want to use Tor to try to protect \"first broadcast\" transaction origin analysis which can be a problem with sybil attacking clearnet nodes. This can still be a problem on Tor as well, but can be more difficult to pull off.\r\n\r\nSome bitcoin software such as wasabi and joinmarket already implement this by establishing a new Tor circuit, broadcasting the transaction, and then disconnecting. Perhaps bitcoin could do this as well?\r\n\r\nSome things that were brought up when I mentioned this on IRC by @naumenkogs, @luke-jr  and others:\r\n\r\nFor the resistance to first-broadcast analysis to be effective, the node should treat the transaction as if it wasn't theirs to begin with. I'm not familiar with the network code, so I'm not sure if anything would have to change relay policy-wise.\r\n\r\nWould be happy to hear other thoughts on what would be required to implement this, or if there's something I'm missing, as it's something I would be interested in implementing if there are enough concept acks.\r\n\r\n\r\nTL;DR rationale:\r\n\r\n- A nodes wants to recieve blocks/confirmations/transactions as soon as possible with the lowest latency\r\n\r\n- A node wants increased broadcast privacy without paying the full cost of onlynet=tor latency\r\n",
          "user": {
            "login": "jb55",
            "id": 45598,
            "node_id": "MDQ6VXNlcjQ1NTk4",
            "avatar_url": "https://avatars.githubusercontent.com/u/45598?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jb55",
            "html_url": "https://github.com/jb55",
            "followers_url": "https://api.github.com/users/jb55/followers",
            "following_url": "https://api.github.com/users/jb55/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jb55/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jb55/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jb55/subscriptions",
            "organizations_url": "https://api.github.com/users/jb55/orgs",
            "repos_url": "https://api.github.com/users/jb55/repos",
            "events_url": "https://api.github.com/users/jb55/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jb55/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 10,
          "created_at": "2020-05-21T16:42:35Z",
          "updated_at": "2022-02-12T17:41:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-14T11:20:50Z",
      "updated_at": "2022-03-14T11:20:50Z",
      "source": {
        "issue": {
          "id": 1168209833,
          "node_id": "I_kwDOABII585FoXep",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24557",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24557/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24557/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24557/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/24557",
          "number": 24557,
          "state": "closed",
          "state_reason": "completed",
          "title": "Option for receive events with all networks, but send transactions and/or blocks only with anonymous network[s]?",
          "body": "Hi everyone :-)\r\nWhich startup option is for receive events with all networks (IP, Tor, I2P), but send transactions and/or blocks only with anonymous network[s]?\r\nIf there is no such option, can we have one? :-)",
          "user": {
            "login": "Farxial",
            "id": 19311376,
            "node_id": "MDQ6VXNlcjE5MzExMzc2",
            "avatar_url": "https://avatars.githubusercontent.com/u/19311376?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Farxial",
            "html_url": "https://github.com/Farxial",
            "followers_url": "https://api.github.com/users/Farxial/followers",
            "following_url": "https://api.github.com/users/Farxial/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Farxial/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Farxial/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Farxial/subscriptions",
            "organizations_url": "https://api.github.com/users/Farxial/orgs",
            "repos_url": "https://api.github.com/users/Farxial/repos",
            "events_url": "https://api.github.com/users/Farxial/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Farxial/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "comments": 1,
          "closed_at": "2022-03-17T07:33:31Z",
          "created_at": "2022-03-14T11:00:01Z",
          "updated_at": "2023-07-11T10:10:06Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-08-11T15:24:23Z",
      "updated_at": "2022-08-11T15:24:23Z",
      "source": {
        "issue": {
          "id": 879140859,
          "node_id": "MDU6SXNzdWU4NzkxNDA4NTk=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21876",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21876/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21876/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21876/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/21876",
          "number": 21876,
          "state": "closed",
          "state_reason": "completed",
          "title": "Broadcast a transaction to specific nodes",
          "body": "**Is your feature request related to a problem? Please describe.**\r\nThere is no argument in [`sendrawtransaction`](https://bitcoincore.org/en/doc/0.21.0/rpc/rawtransactions/sendrawtransaction/) to mention the peers \r\n\r\n**Describe the solution you'd like**\r\nAdd an argument in `sendrawtransaction` that accepts one or more addresses for nodes.\r\n\r\n**Describe alternatives you've considered**\r\n\r\nhttps://github.com/libbtc/libbtc#send-a-raw-transaction-to-specific-peers-on-mainnet-and-show-debug-infos-use-a-timeout-of-5s\r\n\r\n**Additional context**\r\n\r\n> Note that the transaction will be sent unconditionally to **all peers**, so using this\r\nfor manual rebroadcast may degrade **privacy** by leaking the transaction's origin, as\r\nnodes will normally not rebroadcast non-wallet transactions already in their mempool.\r\n\r\n<sup>https://bitcoincore.org/en/doc/0.21.0/rpc/rawtransactions/sendrawtransaction/</sup>\r\n\r\nRebroadcast thing mentioned above will be fixed in https://github.com/bitcoin/bitcoin/pull/21061 however this option will still be useful.",
          "user": {
            "login": "ghost",
            "id": 10137,
            "node_id": "MDQ6VXNlcjEwMTM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ghost",
            "html_url": "https://github.com/ghost",
            "followers_url": "https://api.github.com/users/ghost/followers",
            "following_url": "https://api.github.com/users/ghost/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ghost/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ghost/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
            "organizations_url": "https://api.github.com/users/ghost/orgs",
            "repos_url": "https://api.github.com/users/ghost/repos",
            "events_url": "https://api.github.com/users/ghost/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ghost/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64583,
              "node_id": "MDU6TGFiZWw2NDU4Mw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
              "name": "Feature",
              "color": "7cf575",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 13,
          "closed_at": "2022-08-11T15:24:23Z",
          "created_at": "2021-05-07T14:47:30Z",
          "updated_at": "2023-03-23T07:28:02Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-22T10:02:13Z",
      "updated_at": "2023-02-22T10:02:13Z",
      "source": {
        "issue": {
          "id": 1115473885,
          "node_id": "PR_kwDOABII584xo1eC",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24170",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24170/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24170/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24170/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24170",
          "number": 24170,
          "state": "closed",
          "state_reason": null,
          "title": "p2p, rpc: Manual block-relay-only connections with addnode",
          "body": "This implements the suggestion from #23763 to introduce an option to establish block-relay-connections manually with the `-addnode` RPC.\r\nAdding these can make sense for a node operator that wants to be connected to a anonymity networks like Tor or I2P, but also wants to have additional protection against eclipse attacks: Following the best chain can be more of an issue on anonymity networks because these are smaller and it can be easier to create a lot of sybil nodes there.\r\n\r\nIn that situation, manual block-relay-only connections to peers on clearnet networks can help us staying connected to the best chain, but in contrast to normal manual connections, transactions and addresses aren't transmitted on these links - in particular not our own address or transaction from our wallet. This increases privacy and will also make it harder to perform fingerprinting attacks (connecting our identities over different networks).\r\n\r\nManual Block-Relay connections:\r\n- can be specified with `-addnode` RPC, both with the `add` and `onetry` command\r\n- can be specified with the `-addnode` bitcoind arg (or in bitcoin.conf) with `<IP>=manual-block-relay`\r\n- don't participate in transaction and address relay\r\n- don't get discouraged / punished for misbehavior (but will still get disconnected for sending TX/tx-INV as automatic block-relay-only peers do)\r\n- are not subject to outbound eviction logic (unlike automatic block-relay-only-peers)\r\n",
          "user": {
            "login": "mzumsande",
            "id": 48763452,
            "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mzumsande",
            "html_url": "https://github.com/mzumsande",
            "followers_url": "https://api.github.com/users/mzumsande/followers",
            "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
            "organizations_url": "https://api.github.com/users/mzumsande/orgs",
            "repos_url": "https://api.github.com/users/mzumsande/repos",
            "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/mzumsande/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 42,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24170",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24170",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24170.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24170.patch"
          },
          "closed_at": "2023-06-04T19:11:17Z",
          "created_at": "2022-01-26T20:32:07Z",
          "updated_at": "2023-06-04T19:11:18Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-21T13:39:19Z",
      "updated_at": "2023-04-21T13:39:19Z",
      "source": {
        "issue": {
          "id": 1678541218,
          "node_id": "PR_kwDOABII585O3QRm",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27509",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27509/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27509/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27509/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27509",
          "number": 27509,
          "state": "open",
          "state_reason": null,
          "title": "Relay own transactions only via short-lived Tor or I2P connections",
          "body": "To improve privacy, relay locally submitted transactions (from the wallet or via RPC) to the P2P network only via Tor or I2P short-lived connections.\r\n\r\n* Introduce a new connection type for relaying sensitive data (our own transactions) with the following properties:\r\n  * started whenever there are local unbroadcast transactions to be sent\r\n  * only opened to Tor or I2P peers\r\n  * opened regardless of max connections limits\r\n  * after handshake is completed one local transaction is pushed to the peer and the connection is closed\r\n  * ignore all incoming messages after handshake is completed\r\n\r\n* Relay locally submitted transactions (from the wallet or via RPC) using this new mechanism, to a few Tor or I2P peers.\r\n\r\n* Hide those transactions from `GETDATA` and `MEMPOOL` requests, as if we don't have them.\r\n\r\n* Once we get an `INV` from somebody, request the transaction with `GETDATA`, as if we didn't have it before.\r\n\r\n* After we receive the full transaction as a `TX` message, in reply to our `GETDATA` request, only then consider the transaction has propagated through the network and remove it from the unbroadcast list.\r\n\r\n* `INV` it to others as a result of the `TX` message we get, like what we do with transactions that are not ours.\r\n\r\nThe messages exchange should look like this:\r\n\r\n```\r\ntx-sender >--- connect -------> tx-recipient\r\ntx-sender >--- VERSION -------> tx-recipient\r\ntx-sender <--- VERSION -------< tx-recipient\r\ntx-sender <--- WTXIDRELAY ----< tx-recipient (maybe) \r\ntx-sender <--- SENDADDRV2 ----< tx-recipient (maybe) \r\ntx-sender <--- SENDTXRCNCL ---< tx-recipient (maybe) \r\ntx-sender <--- VERACK --------< tx-recipient\r\ntx-sender >--- VERACK --------> tx-recipient\r\ntx-sender >--- TX ------------> tx-recipient\r\ntx-sender >--- PING ----------> tx-recipient\r\ntx-sender <--- PONG ----------< tx-recipient\r\ntx-sender disconnects\r\n```\r\n\r\nWhenever a new local transaction is received (from the wallet or RPC), the node will send it to 5 (`SENSITIVE_RELAY_NUM_BROADCAST_PER_TX`) recipients right away. If after 10-15 mins we still have not heard anything about the transaction from the network, then it will be sent to 5 more peers (see `PeerManagerImpl::ReattemptInitialBroadcast()`).\r\n\r\nA few considerations:\r\n* The short-lived sensitive relay connections are very cheap and fast wrt network traffic. It is expected that some of those peers will blackhole the transaction. Just one honest/proper peer is enough for successful propagation.\r\n* The peers that receive the transaction could deduce that this is initial transaction broadcast from the transaction originator. This is ok, they can't identify the sender.\r\n\r\nTODO:\r\n* [x] Disable if `-connect` is used or Tor and I2P are not reachable.\r\n* [x] Use I2P transient connections even if listening on I2P.\r\n* [x] Do something with the user-agent string (could reveal identity if it has been personalized) and make sure no identifying information in the `VERSION` message. Done: took the [suggestion below](https://github.com/bitcoin/bitcoin/pull/27509#issuecomment-1517896418).\r\n* [x] Improve the condition when we consider the transaction seen by the network: right now a single INV from somebody suffices (this is still an improvement over `master` which is ok right after pushing the tx to a peer). We could wait for more than one INV, from peers that we have selected (outbound) and that are specifically not the ones we broadcasted to (via short-lived connection). Edit: One `INV` should be enough because after that we broadcast the transaction to everybody we are connected to (like if it is not ours).\r\n* [ ] Idea: start with one connection per transaction (not 5 as it is now), optimistically assuming it will be sufficient. (numbers are examples) After 1 minute, if still not received from the network, try 2 connections, after a few minutes try more. If still unsuccessful after 10 minutes, then fall back to the old mechanism.\r\n\r\nThis is supposed to address:\r\nhttps://github.com/bitcoin/bitcoin/issues/3828\r\nhttps://github.com/bitcoin/bitcoin/issues/14692\r\nhttps://github.com/bitcoin/bitcoin/issues/19042\r\nhttps://github.com/bitcoin/bitcoin/issues/24557\r\nhttps://github.com/bitcoin/bitcoin/issues/25450\r\n",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 52,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27509",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27509",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27509.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27509.patch"
          },
          "created_at": "2023-04-21T13:39:19Z",
          "updated_at": "2023-08-02T13:00:06Z"
        },
        "type": "issue"
      }
    }
  ]
}