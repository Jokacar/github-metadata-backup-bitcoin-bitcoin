{
  "type": "issue",
  "issue": {
    "id": 1919828606,
    "node_id": "I_kwDOABII585ybkJ-",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28552",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28552/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28552/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28552/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28552",
    "number": 28552,
    "state": "open",
    "state_reason": null,
    "title": "Crashes constantly on Mac OS Sonoma",
    "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nBoth `bitcoind` and `Bitcoin Core` crash in various way, sometimes it's a corrupted block, other times there are issues with the indexes or the chain state. Tried reindexing without success.\r\n\r\nTried on different computers one on 14.0 and the other on 14.1.\r\n\r\nIt seem to only crash when using external storage, I didn't run it for very long since I don't have the space for but it worked without issue when leaving the default `datadir`.\r\n\r\nTried with Bitcoin Core 24.1, 25.0, and bitcoind 25.0 and built from source\r\n\r\n**It worked perfectly on both machines with Mac OS Ventura (13.X) and Bitcoin Core 24.1 with the same external SSD**\r\n\r\n### Expected behaviour\r\n\r\nI expect the software to run without crashing\r\n\r\n### Steps to reproduce\r\n\r\nUpdate a Mac to Sonoma (14.X)\r\n\r\nSelect an external SSD as storage for `datadir`\r\n\r\nRun `bitcoind` until it crashes\r\n\r\n### Relevant log output\r\n\r\nHere's the most common type of errors\r\n\r\n```\r\ndate='2012-06-05T09:58:55Z' progress=0.004282 cache=229.8MiB(1876048txo)\r\n2023-09-29T19:49:36Z UpdateTip: new best=00000000000007656ea41bf3b7157b4852d548dad3353aed95803230c4c371fd height=183104 version=0x00000001 log2_work=68.224759 tx=3756934 date='2012-06-05T10:22:50Z' progress=0.004283 cache=229.8MiB(1876231txo)\r\n2023-09-29T19:49:36Z UpdateTip: new best=00000000000007f347d5d728664c21f549494207e4b94a0b6a89c2be6e327255 height=183105 version=0x00000001 log2_work=68.224787 tx=3757624 date='2012-06-05T10:30:01Z' progress=0.004283 cache=229.8MiB(1876500txo)\r\n2023-09-29T19:49:36Z ERROR: ReadBlockFromDisk: Errors in block header at FlatFilePos(nFile=12, nPos=948913)\r\n2023-09-29T19:49:36Z *** Failed to read block\r\n2023-09-29T19:49:36Z Error: A fatal internal error occurred, see debug.log for details\r\nError: A fatal internal error occurred, see debug.log for details\r\n2023-09-29T19:49:36Z ERROR: ProcessNewBlock: ActivateBestChain failed (Failed to read block)\r\n2023-09-29T19:49:36Z tor: Thread interrupt\r\n2023-09-29T19:49:36Z Shutdown: In progress...\r\n2023-09-29T19:49:36Z msghand thread exit\r\n2023-09-29T19:49:36Z addcon thread exit\r\n2023-09-29T19:49:36Z torcontrol thread exit\r\n2023-09-29T19:49:36Z net thread exit\r\n2023-09-29T19:49:37Z opencon thread exit\r\n2023-09-29T19:49:38Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2023-09-29T19:49:38Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.01s)\r\n2023-09-29T19:49:38Z scheduler thread exit\r\n2023-09-29T19:49:38Z Writing 0 unbroadcast transactions to disk.\r\n2023-09-29T19:49:38Z Dumped mempool: 0.00129013s to copy, 0.00299875s to dump\r\n2023-09-29T19:49:41Z Shutdown: done\r\n```\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\n25.0\r\n\r\n### Operating system and version\r\n\r\nMacOS Sonoma 14.1\r\n\r\n### Machine specifications\r\n\r\nMac mini / MBP\r\nMac OS 14.X\r\nM1\r\nExternal SSD (Samsung T7 Shield)",
    "user": {
      "login": "gawlk",
      "id": 32246972,
      "node_id": "MDQ6VXNlcjMyMjQ2OTcy",
      "avatar_url": "https://avatars.githubusercontent.com/u/32246972?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gawlk",
      "html_url": "https://github.com/gawlk",
      "followers_url": "https://api.github.com/users/gawlk/followers",
      "following_url": "https://api.github.com/users/gawlk/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/gawlk/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/gawlk/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/gawlk/subscriptions",
      "organizations_url": "https://api.github.com/users/gawlk/orgs",
      "repos_url": "https://api.github.com/users/gawlk/repos",
      "events_url": "https://api.github.com/users/gawlk/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/gawlk/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 0,
    "created_at": "2023-09-29T19:54:49Z",
    "updated_at": "2023-09-29T19:57:22Z"
  },
  "events": []
}