{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272",
    "id": 1684342678,
    "node_id": "PR_kwDOABII585kZQeW",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/29272",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/29272.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/29272.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29272",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29272/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/350606d6093563e93b8faa059af92e19f9d439e5",
    "number": 29272,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "wallet: fix coin selection tracing to return -1 when no change pos",
    "user": {
      "login": "remyers",
      "id": 8568892,
      "node_id": "MDQ6VXNlcjg1Njg4OTI=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remyers",
      "html_url": "https://github.com/remyers",
      "followers_url": "https://api.github.com/users/remyers/followers",
      "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
      "organizations_url": "https://api.github.com/users/remyers/orgs",
      "repos_url": "https://api.github.com/users/remyers/repos",
      "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/remyers/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This is a bugfix for from when [optional was introduced](https://github.com/bitcoin/bitcoin/pull/25273/commits/758501b71391136c33b525b1a0109b990d4f463e)  for `change_pos` in the wallet. When optional `change_pos` is unset, we should return -1 and not 0.\r\n\r\nI added two new checks to the `test/functional/interface_usdt_coinselection.py` which adds coverage for the situations when `normal_create_tx_internal` and `aps_create_tx_internal` events occur with no change.  \r\n\r\nYou can reproduce this bug using the coin-selection-simulation scripts as described in [issue #16](https://github.com/achow101/coin-selection-simulation/issues/16). You can also run the `interface_usdt_coinselection.py` test  without the changes to `wallet/spend.cpp`.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "created_at": "2024-01-18T07:56:37Z",
    "updated_at": "2024-01-20T13:50:55Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "7d15bfebb9bc9abb6bd53318545c023724c6340c",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "remyers:cs-usdt-fixup",
      "ref": "cs-usdt-fixup",
      "sha": "350606d6093563e93b8faa059af92e19f9d439e5",
      "user": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 221530299,
        "node_id": "MDEwOlJlcG9zaXRvcnkyMjE1MzAyOTk=",
        "name": "bitcoin",
        "full_name": "remyers/bitcoin",
        "owner": {
          "login": "remyers",
          "id": 8568892,
          "node_id": "MDQ6VXNlcjg1Njg4OTI=",
          "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/remyers",
          "html_url": "https://github.com/remyers",
          "followers_url": "https://api.github.com/users/remyers/followers",
          "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
          "organizations_url": "https://api.github.com/users/remyers/orgs",
          "repos_url": "https://api.github.com/users/remyers/repos",
          "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/remyers/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/remyers/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/remyers/bitcoin",
        "archive_url": "https://api.github.com/repos/remyers/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/remyers/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/remyers/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/remyers/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/remyers/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/remyers/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/remyers/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/remyers/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/remyers/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/remyers/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/remyers/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/remyers/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/remyers/bitcoin/events",
        "forks_url": "https://api.github.com/repos/remyers/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/remyers/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/remyers/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/remyers/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/remyers/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/remyers/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/remyers/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/remyers/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/remyers/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/remyers/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/remyers/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/remyers/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/remyers/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/remyers/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/remyers/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/remyers/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:remyers/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/remyers/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/remyers/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/remyers/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/remyers/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/remyers/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/remyers/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/remyers/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/remyers/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/remyers/bitcoin/hooks",
        "svn_url": "https://github.com/remyers/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 210943,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": true,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-01-20T11:46:45Z",
        "created_at": "2019-11-13T18:56:20Z",
        "updated_at": "2021-10-12T01:52:43Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "03752444cd54df05a731557968d5a9f33a55c55c",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36544,
        "stargazers_count": 73443,
        "watchers_count": 73443,
        "size": 247659,
        "default_branch": "master",
        "open_issues_count": 695,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-01-20T13:04:42Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-01-20T13:42:29Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
      }
    },
    "author_association": "NONE",
    "draft": false,
    "additions": 40,
    "deletions": 5,
    "changed_files": 2,
    "commits": 4,
    "review_comments": 9,
    "comments": 6
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNjMWJkOGZjZmYxZjgyMDMxZmY4ODliOWQxNjlmZWIyYWVjYmI3YTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "tree": {
        "sha": "1cdc4debba0388143d12c83acd3eedd26789a425",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1cdc4debba0388143d12c83acd3eedd26789a425"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1cdc4debba0388143d12c83acd3eedd26789a425\nparent 8106b268cde8e97a7c330afdda39b6bb55e5574a\nauthor Richard Myers <remyers@yakshaver.org> 1705503422 +0100\ncommitter Richard Myers <remyers@yakshaver.org> 1705564180 +0100\n\nwallet: fix coin selection tracing to return -1 when no change pos\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJKBAABCgA0FiEEf/pts4wRKAyFfYbezLEmUJDpO2IFAmWo2CcWHHJlbXllcnNA\neWFrc2hhdmVyLm9yZwAKCRDMsSZQkOk7Yv+3D/9pWyIrNYBFrur3QKs+A7mnd3Dl\nP6S7q7bTx3JZf6rB8/95J29s5BPtQ5GtJb14i5scDkcF4dG5H/jL2Fq5JQY/vTMl\nZx2H156DniIgkAN4cXdVPBO5201l9s07PycWGaEow+COwiPPTbvEuOKibezUchnr\n4MDiHXwCC4HOvtBhGu5NxryNF+/u3aoGuaQUYPhwxihbWrRWd2Y5ZDIeflhPnkAm\nN5s3Ddrt0IWo0Aoym5RnEfW35Sp3B2XdRtxAfugBOjAd5/hCmtNXRTz2W4IIFLCC\nG8ktyuA2Oyicl8+pbPyj0stGewvQ4XefmjsNGc5CH6HJqYcFlf88DV87JPXX6Ao9\nVDgRHMWaLRSaj/EK/dYwWINykkGqyZmKii1u2c/PV5RgAUMeZTVOLKVEmt5s21Re\nXAJ14sGapijs+i747THYh8kJEAwzA3hhR/ZFFRKPcPC2QIuIYUMifIAZDLPvxQv5\n/9XTmOzFpjy4AddW/7Za4J2P4BMDoM5glNFIptzerTs7JBeSJIl2ju8WjoxseNG+\nJGbTUzyEIHCPC0Wzsx/DY/8zDzoyitHMAhjS1s1hd7wNQvzYP5EtDLiKDXyUB93V\nhGiqP2S5SK/8JzbP5IYL5y5bxo3Wu8278udwDx7qkHd2mhVFbUrg9LIUXunwMKIu\nA6L5hCNSA+tpUxn7hg==\n=2LI7\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8106b268cde8e97a7c330afdda39b6bb55e5574a",
          "sha": "8106b268cde8e97a7c330afdda39b6bb55e5574a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8106b268cde8e97a7c330afdda39b6bb55e5574a"
        }
      ],
      "message": "wallet: fix coin selection tracing to return -1 when no change pos",
      "committer": {
        "name": "Richard Myers",
        "email": "remyers@yakshaver.org",
        "date": "2024-01-18T07:49:40Z"
      },
      "author": {
        "name": "Richard Myers",
        "email": "remyers@yakshaver.org",
        "date": "2024-01-17T14:57:02Z"
      },
      "sha": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3"
    },
    {
      "event": "commented",
      "id": 1897972545,
      "node_id": "IC_kwDOABII585xIMNB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1897972545",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T07:56:40Z",
      "updated_at": "2024-01-20T13:50:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29272).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [murchandamus](https://github.com/bitcoin/bitcoin/pull/29272#pullrequestreview-1834678471) |\n| Stale ACK | [achow101](https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1899294026) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#26593](https://github.com/bitcoin/bitcoin/pull/26593) (tracing: Only prepare tracepoint arguments when actually tracing by 0xB10C)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1897972545",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29272"
    },
    {
      "event": "labeled",
      "id": 11521688085,
      "node_id": "LE_lADOABII5858cBmuzwAAAAKuvwIV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11521688085",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T07:56:42Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 1897978185,
      "node_id": "IC_kwDOABII585xINlJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1897978185",
      "actor": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T07:59:43Z",
      "updated_at": "2024-01-18T07:59:43Z",
      "author_association": "NONE",
      "body": "You might want to take a look at this @murchandamus. I discovered the problem while trying to repo your coingrinder results with the coin-selection-simulation scripts.",
      "user": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1897978185",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29272"
    },
    {
      "event": "mentioned",
      "id": 11521717326,
      "node_id": "MEE_lADOABII5858cBmuzwAAAAKuv3RO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11521717326",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T07:59:43Z"
    },
    {
      "event": "subscribed",
      "id": 11521717346,
      "node_id": "SE_lADOABII5858cBmuzwAAAAKuv3Ri",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11521717346",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T07:59:44Z"
    },
    {
      "event": "reviewed",
      "id": 1829131949,
      "node_id": "PRR_kwDOABII585tBlat",
      "url": null,
      "actor": null,
      "commit_id": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#pullrequestreview-1829131949",
      "submitted_at": "2024-01-18T08:39:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
    },
    {
      "event": "labeled",
      "id": 11522131744,
      "node_id": "LE_lADOABII5858cBmuzwAAAAKuxccg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11522131744",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T08:42:45Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1898033547,
      "node_id": "IC_kwDOABII585xIbGL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1898033547",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T08:42:46Z",
      "updated_at": "2024-01-18T08:42:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20605138868</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1898033547",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29272"
    },
    {
      "event": "reviewed",
      "id": 1829152382,
      "node_id": "PRR_kwDOABII585tBqZ-",
      "url": null,
      "actor": null,
      "commit_id": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#pullrequestreview-1829152382",
      "submitted_at": "2024-01-18T08:48:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T20:16:14Z",
      "updated_at": "2024-01-18T20:16:14Z",
      "source": {
        "issue": {
          "id": 1467073842,
          "node_id": "PR_kwDOABII585D1g33",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26593",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26593/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26593/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26593/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26593",
          "number": 26593,
          "state": "open",
          "state_reason": null,
          "title": "tracing: Only prepare tracepoint arguments when actually tracing",
          "body": "Currently, if the tracepoints are compiled (e.g. in depends and release builds), we always prepare the tracepoint arguments regardless of the tracepoints being used or not. We made sure that the argument preparation is as cheap as possible, but we can almost completely eliminate any overhead for users not interested in the tracepoints (the vast majority), by gating the tracepoint argument preparation with an `if(something is attached to this tracepoint)`. To achieve this, we use the optional semaphore feature provided by SystemTap.\r\n\r\nThe first commit simplifies and deduplicates our tracepoint macros from 13 TRACEx macros to a single TRACEPOINT macro. This makes them easier to use and also avoids more duplicate macro definitions in the second commit.\r\n\r\nThe Linux tracing tools I'm aware of (bcc, bpftrace, libbpf, and systemtap) all support the semaphore gating feature. Thus, all existing tracepoints and their argument preparation is gated in the second commit. For details, please refer to the commit messages and the updated documentation in `doc/tracing.md`.\r\n\r\nAlso adding unit tests that include all tracepoint macros to make sure there are no compiler problems with them (e.g. some varadiac extension not supported). \r\n\r\nReviewers might want to check:\r\n- Do the tracepoints still work for you? Do the examples in `contrib/tracing/` run on your system (as bpftrace frequently breaks on every new version, please test master too if it should't work for you)? Do the CI interface tests still pass?\r\n- Is the new documentation clear? \r\n- The `TRACEPOINT_SEMAPHORE(event, context)` macros places global variables in our global namespace. Is this something we strictly want to avoid or maybe move to all `TRACEPOINT_SEMAPHORE`s to a separate .cpp file or even namespace? I like having the `TRACEPOINT_SEMAPHORE()` in same file as the `TRACEPOINT()`, but open for suggestion on alternative approaches. \r\n- Are newly added tracepoints in the unit tests visible when using `readelf -n /src/test/test_bitcoin`? You can run the new unit tests with `./src/test/test_bitcoin --run_test=util_trace_tests* --log_level=all`.\r\n<details><summary>Two of the added unit tests demonstrate that we are only processing the tracepoint arguments when attached by having a test-failure condition in the tracepoint argument preparation. The following bpftrace script can be used to demonstrate that the tests do indeed fail when attached to the tracepoints.</summary>\r\n\r\n`fail_tests.bt`:\r\n\r\n```c\r\n#!/usr/bin/env bpftrace\r\n\r\nusdt:./src/test/test_bitcoin:test:check_if_attached {\r\n  printf(\"the 'check_if_attached' test should have failed\\n\");\r\n}\r\n\r\nusdt:./src/test/test_bitcoin:test:expensive_section {\r\n  printf(\"the 'expensive_section' test should have failed\\n\");\r\n}\r\n```\r\n\r\nRun the unit tests with `./src/test/test_bitcoin` and start `bpftrace fail_tests.bt -p $(pidof test_bitcoin)` in a separate terminal. The unit tests should fail with:\r\n\r\n```\r\nRunning 594 test cases...\r\ntest/util_trace_tests.cpp(31): error: in \"util_trace_tests/test_tracepoint_check_if_attached\": check false has failed\r\ntest/util_trace_tests.cpp(51): error: in \"util_trace_tests/test_tracepoint_manual_tracepoint_active_check\": check false has failed\r\n\r\n*** 2 failures are detected in the test module \"Bitcoin Core Test Suite\"\r\n```\r\n\r\n</details>\r\n\r\nThese links might provide more contextual information for reviewers:\r\n- [How SystemTap Userspace Probes Work by eklitzke](https://eklitzke.org/how-sytemtap-userspace-probes-work) (actually an example on Bitcoin Core; mentions that with semaphores \"the overhead for an untraced process is effectively zero.\")\r\n- [libbpf comment on USDT semaphore handling](https://github.com/libbpf/libbpf/blob/1596a09b5de2a50ab8d44218fc29b6d42f886305/src/usdt.c#L83-L92) (can recommend the whole comment for background on how the tracepoints and tracing tools work together)\r\n- https://sourceware.org/systemtap/wiki/UserSpaceProbeImplementation#Semaphore_Handling",
          "user": {
            "login": "0xB10C",
            "id": 19157360,
            "node_id": "MDQ6VXNlcjE5MTU3MzYw",
            "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/0xB10C",
            "html_url": "https://github.com/0xB10C",
            "followers_url": "https://api.github.com/users/0xB10C/followers",
            "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
            "organizations_url": "https://api.github.com/users/0xB10C/orgs",
            "repos_url": "https://api.github.com/users/0xB10C/repos",
            "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/0xB10C/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26593",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26593",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26593.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26593.patch"
          },
          "created_at": "2022-11-28T20:50:26Z",
          "updated_at": "2024-01-18T20:16:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1899270783,
      "node_id": "IC_kwDOABII585xNJJ_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1899270783",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T21:51:51Z",
      "updated_at": "2024-01-18T21:51:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "Returning `-1` if there is no change seems reasonable to me, but it looks like it’s cast to an unsigned int somewhere else in the stack. I’m not familiar with the tracing framework interna, so it’s not obvious to me how to fix this.",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1899270783",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29272"
    },
    {
      "event": "commented",
      "id": 1899294026,
      "node_id": "IC_kwDOABII585xNO1K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1899294026",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T22:03:30Z",
      "updated_at": "2024-01-18T22:03:30Z",
      "author_association": "MEMBER",
      "body": "ACK 8c6d266aa61ffc409b50ece4e649f7a74ec7acb7",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1899294026",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29272"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU3MDE5ODJjNzQxZWRkMjE4MjY5MGRkZjQ2MjhlNGMwNzlhNTE4NWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e701982c741edd2182690ddf4628e4c079a5185e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e701982c741edd2182690ddf4628e4c079a5185e",
      "tree": {
        "sha": "c13446ef70cf5604ddc40ab2ff65c4f076f97029",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c13446ef70cf5604ddc40ab2ff65c4f076f97029"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c13446ef70cf5604ddc40ab2ff65c4f076f97029\nparent cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3\nauthor Richard Myers <remyers@yakshaver.org> 1705584849 +0100\ncommitter Richard Myers <remyers@yakshaver.org> 1705617239 +0100\n\ncast change_pos as int32\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJKBAABCgA0FiEEf/pts4wRKAyFfYbezLEmUJDpO2IFAmWpp2UWHHJlbXllcnNA\neWFrc2hhdmVyLm9yZwAKCRDMsSZQkOk7YgdvD/wKbV5DQH3E8XiPUUjVSPjXoSrR\ngcZgABlSNU2vW5mfXfhwgFzyE421pZpWngjadhEG8mPYOj2QegB7YPvqAv5Vca6f\nmI0VQgdqcFrs6VVAr316a9EXJYNXjCsW60yNw19nE3XQ87CH30+FHMWwK0IS/WCG\nhcik4hEzXh7otO5YSChJwxlQMxjD0W9sdsiRxW7BS0E3eUjyUMgTMQlc3y+BQoqg\nCMZMRz+amG7iGRvIMp51fM+O4RKYDSxT7M8bzeBEusZfnlKo3yd3PREf7bq8IA7I\n6ctRG/51SMzrFD3Hhk4rXflc1ntEL8WSZpK5OFRzcNLATTiYYbc2Jd7uyXPXt7Yy\nQrCVAdEEDpYjCReDsP+eBnv/t9b10m5Q1YQwcuMSWlezEB4cpklKsG2rVkw4Ncyx\nqGlmKzPxazrk/Sk9CXsGmwlv1162bjlCl2LMVmu8kj91PJBgeeNfNLJE/j167ZKE\n6vER04m4YMo+ty/Aos4B8TQ4bFKKioWzreQ/jt1IHLmA1eVZ/pjlVs+6hqXa6+rv\nww86ezyPnsJ8+kxzoKaSTzns8H3L8GH1W9gRdJ3lBB2cORSrwwgIO6jL6leaVQIp\nFkyshKQAHRj+o5HVVYWXQKoPhn8H2M7fdFJ5agZV9of/EIWizVqm3f3nE00y1h9T\nwhTCIq3GtlGg5nRFdQ==\n=OiMj\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
          "sha": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3"
        }
      ],
      "message": "cast change_pos as int32",
      "committer": {
        "name": "Richard Myers",
        "email": "remyers@yakshaver.org",
        "date": "2024-01-18T22:33:59Z"
      },
      "author": {
        "name": "Richard Myers",
        "email": "remyers@yakshaver.org",
        "date": "2024-01-18T13:34:09Z"
      },
      "sha": "e701982c741edd2182690ddf4628e4c079a5185e"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11530761325,
      "node_id": "HRFPE_lADOABII5858cBmuzwAAAAKvSXRt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11530761325",
      "actor": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T22:34:34Z"
    },
    {
      "event": "unlabeled",
      "id": 11531139867,
      "node_id": "UNLE_lADOABII5858cBmuzwAAAAKvTzsb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11531139867",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T23:35:25Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1833088422,
      "node_id": "PRR_kwDOABII585tQrWm",
      "url": null,
      "actor": null,
      "commit_id": "e701982c741edd2182690ddf4628e4c079a5185e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "tACK with nit: e701982c741edd2182690ddf4628e4c079a5185e",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#pullrequestreview-1833088422",
      "submitted_at": "2024-01-19T16:04:49Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
    },
    {
      "event": "review_requested",
      "id": 11539371506,
      "node_id": "RRE_lADOABII5858cBmuzwAAAAKvzNXy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11539371506",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-19T16:04:52Z",
      "requested_reviewer": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM5ZDg2MjFiMGYzZTliMjA4OTgyNzhiZTM1OTIyZGRhYjA5NjgzYTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/39d8621b0f3e9b20898278be35922ddab09683a3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/39d8621b0f3e9b20898278be35922ddab09683a3",
      "tree": {
        "sha": "65504074892710f9f31d1d4fe557b7389801b885",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/65504074892710f9f31d1d4fe557b7389801b885"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 65504074892710f9f31d1d4fe557b7389801b885\nparent e701982c741edd2182690ddf4628e4c079a5185e\nauthor Richard Myers <remyers@yakshaver.org> 1705748359 +0100\ncommitter Richard Myers <remyers@yakshaver.org> 1705748359 +0100\n\nClarify APS test by spending full balance\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJKBAABCgA0FiEEf/pts4wRKAyFfYbezLEmUJDpO2IFAmWrp4cWHHJlbXllcnNA\neWFrc2hhdmVyLm9yZwAKCRDMsSZQkOk7YnFKEACF9hDhZzkHvQ8Ts3By4gX2SkgU\nQ+FFTBxLBpw125mxSZ1S4y7gAyICmSXItK2K2ujS5NhfTJ9+5enC19FaDG4KtWkr\nupjHNYRs8FyQJDXRYak/zu/1RZQ2jvhcZjrBslZhey9ogh7ikyOD7NIMHReSOR/r\n2hC9cGR20aBVDx/ybfJW5SuB6TQfkSE2BfgUGpPedlOAuuXjYFsqVrFIHi+n374R\ncPp5/dn+1Z20yYcMbq9qH6JBxOWzNIMRa9uJzRKHIEEZs0BT6M4tDlEdBp+0IyND\nz5ZBtevNm8+4F9ETboFYTW0Wb1G+VKd32k5mAxa4ry6EKsMOF5GifYi7MyTxItlT\nxg5opCTU1B+gbJEKu40c8CUADsZbig5Dj23yTLl/WQbAyZBvWZjDz7JdsBHqR9zs\nbONGlUhXzs39WmSKZCUtBG1d4kHo9cLTqjG7gHIOhmgiD4XGG1xlTnPbwleJb8RS\n++mNJDcpz2PtfqUGQXPp4Igo/W5NmAdJumq5OeK5UdzJuHkJiy/hAAdkL9R0zM/E\nSUjyCpMNfWizw5pkIFubf1mT6rMvCWzXyCCrbmY7CXxtmhkgMkFI2qJE8zYj+NCy\nE3DrbLcvwoRAAwJjLQi+VV1OJqWyCfQIGJqZ5IYJHUI6EZnVa2prw52cAOghjNN8\nWxTjdmLH+ygdl+WgHQ==\n=DUrf\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e701982c741edd2182690ddf4628e4c079a5185e",
          "sha": "e701982c741edd2182690ddf4628e4c079a5185e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e701982c741edd2182690ddf4628e4c079a5185e"
        }
      ],
      "message": "Clarify APS test by spending full balance",
      "committer": {
        "name": "Richard Myers",
        "email": "remyers@yakshaver.org",
        "date": "2024-01-20T10:59:19Z"
      },
      "author": {
        "name": "Richard Myers",
        "email": "remyers@yakshaver.org",
        "date": "2024-01-20T10:59:19Z"
      },
      "sha": "39d8621b0f3e9b20898278be35922ddab09683a3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM1MDYwNmQ2MDkzNTYzZTkzYjhmYWEwNTlhZjkyZTE5ZjlkNDM5ZTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/350606d6093563e93b8faa059af92e19f9d439e5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/350606d6093563e93b8faa059af92e19f9d439e5",
      "tree": {
        "sha": "071f9048cbad5795936825a3c7778f1fc5dea2f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/071f9048cbad5795936825a3c7778f1fc5dea2f2"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 071f9048cbad5795936825a3c7778f1fc5dea2f2\nparent 39d8621b0f3e9b20898278be35922ddab09683a3\nauthor Richard Myers <remyers@yakshaver.org> 1705749903 +0100\ncommitter Richard Myers <remyers@yakshaver.org> 1705751101 +0100\n\nMove TRACEx parameters to seperate lines\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQJKBAABCgA0FiEEf/pts4wRKAyFfYbezLEmUJDpO2IFAmWrskEWHHJlbXllcnNA\neWFrc2hhdmVyLm9yZwAKCRDMsSZQkOk7Yl3OEACCab0g9vJlHST9lo+408AMKJ0O\n1l5fWAYzp20yelUmL9iQveBfY6T2Yh5s11tNVFwoHx/HRge2q9tn56iNqDMubTe8\nimhjqk060MTyuJxb/Mgn5zCQLPRnhDJy9854kaTIb8f3ccfHeZa4huAPU12XEgAu\nNpIg9UbAnUXZ+7KclkidbdBw8FVgq69GbyWaGWY17s9+zN+hvVqqTRMIq7ftMha5\nZXw1BBgWeS4ZSFfoGntq4htdGm8QO2Iz2vA2avV9XoFTi4u3GhfhpqVztWZeNFfh\ncIhQ64QWiiTcMBud8gnRHEW7AHuD0AD39Bc7O9Zi7cXiT0Bqru8UZlQEwwpuocF1\ndHykGP/HNromDZ+D6V4m71fgV/crqDshCWO7MFL4tzSxdhDHXuJ+BCoQiWwpCwgA\nIwl90OcRq4UokIkyX8YO3MSAzCfa80x8ROD+P6FeMwHReC8+VCBtmAryEO3+gIFI\nEtm9wLGocT7FQRP+StUxEQXJgSZrcpJ95iMrXBERKEaLmrsFFzEup6b6CQUDiqGE\nqM77joufEzYJk3O5dtfdBiRz5gidcdyC7nX11OUA2TeQEt4CpdVdm0wpxmYV1rtQ\nvcOANSfaAaHfiGusqbiD3427qjEzt4xOHybjowGQe6PiCeNjgE0bxIBdHjdk+Iys\nYHJ4NhwShn55WH4mXw==\n=O3Ve\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/39d8621b0f3e9b20898278be35922ddab09683a3",
          "sha": "39d8621b0f3e9b20898278be35922ddab09683a3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/39d8621b0f3e9b20898278be35922ddab09683a3"
        }
      ],
      "message": "Move TRACEx parameters to seperate lines",
      "committer": {
        "name": "Richard Myers",
        "email": "remyers@yakshaver.org",
        "date": "2024-01-20T11:45:01Z"
      },
      "author": {
        "name": "Richard Myers",
        "email": "remyers@yakshaver.org",
        "date": "2024-01-20T11:25:03Z"
      },
      "sha": "350606d6093563e93b8faa059af92e19f9d439e5"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11545730384,
      "node_id": "HRFPE_lADOABII5858cBmuzwAAAAKwLd1Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11545730384",
      "actor": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-20T11:46:47Z"
    },
    {
      "event": "labeled",
      "id": 11545730574,
      "node_id": "LE_lADOABII5858cBmuzwAAAAKwLd4O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11545730574",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-20T11:46:51Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1902074033,
      "node_id": "IC_kwDOABII585xX1ix",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1902074033",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-20T11:46:52Z",
      "updated_at": "2024-01-20T11:46:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20685191675</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#issuecomment-1902074033",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29272"
    },
    {
      "event": "unlabeled",
      "id": 11545869854,
      "node_id": "UNLE_lADOABII5858cBmuzwAAAAKwL_4e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11545869854",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-20T12:40:32Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1834678471,
      "node_id": "PRR_kwDOABII585tWvjH",
      "url": null,
      "actor": null,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK, 350606d6093563e93b8faa059af92e19f9d439e5. The final code LGTM.\r\n\r\nNit: It seems to me that the first three commits are iterating on the same conceptual change. I would prefer if those three commits were squashed into one so we immediately arrive at the final version. The refactor of the trace output should stay a separate commit, though.",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#pullrequestreview-1834678471",
      "submitted_at": "2024-01-20T13:50:52Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457097947",
      "pull_request_review_id": 1829131949,
      "id": 1457097947,
      "node_id": "PRRC_kwDOABII585W2Yzb",
      "diff_hunk": "@@ -1355,7 +1355,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n         // if fee of this alternative one is within the range of the max fee, we use this one\n         const bool use_aps{txr_grouped.has_value() ? (txr_grouped->fee <= txr_ungrouped.fee + wallet.m_max_aps_fee) : false};\n         TRACE5(coin_selection, aps_create_tx_internal, wallet.GetName().c_str(), use_aps, txr_grouped.has_value(),\n-               txr_grouped.has_value() ? txr_grouped->fee : 0, txr_grouped.has_value() && txr_grouped->change_pos.has_value() ? *txr_grouped->change_pos : 0);\n+               txr_grouped.has_value() ? txr_grouped->fee : 0, txr_grouped.has_value() && txr_grouped->change_pos.has_value() ? *txr_grouped->change_pos : -1);",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "original_commit_id": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: I think this tracepoint would be easier to reason about if it was one line per argument. Not sure if this PR is the right place to reformat it.",
      "created_at": "2024-01-18T08:37:27Z",
      "updated_at": "2024-01-18T08:39:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457097947",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457097947"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1358,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457111240",
      "pull_request_review_id": 1829152382,
      "id": 1457111240,
      "node_id": "PRRC_kwDOABII585W2cDI",
      "diff_hunk": "@@ -1337,7 +1337,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n \n     auto res = CreateTransactionInternal(wallet, vecSend, change_pos, coin_control, sign);\n     TRACE4(coin_selection, normal_create_tx_internal, wallet.GetName().c_str(), bool(res),\n-           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : 0);\n+           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : -1);",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "original_commit_id": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "in_reply_to_id": null,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "CI is unhappy here:\r\n```\r\n(mocktwallet/spend.cpp:1339:5: runtime error: implicit conversion from type 'int' of value -1 (32-bit, signed) to type 'unsigned int' changed the value to 4294967295 (32-bit, unsigned)\r\n    #0 0x5589c92846e6 in wallet::CreateTransaction(wallet::CWallet&, std::vector<wallet::CRecipient, std::allocator<wallet::CRecipient>> const&, std::optional<unsigned int>, wallet::CCoinControl const&, bool) src/wallet/spend.cpp:1339:5\r\n    #1 0x5589c8d8617d in wallet::spend_tests::wallet_duplicated_preset_inputs_test::test_method() src/wallet/test/spend_tests.cpp:100:53\r\n   ...\r\n\r\nSUMMARY: UndefinedBehaviorSanitizer: implicit-integer-sign-change wallet/spend.cpp:1339:5 in \r\n```",
      "created_at": "2024-01-18T08:48:41Z",
      "updated_at": "2024-01-18T08:49:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457111240",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457111240"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
        }
      },
      "start_line": null,
      "original_start_line": 1339,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1340,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457258511",
      "pull_request_review_id": 1829385774,
      "id": 1457258511,
      "node_id": "PRRC_kwDOABII585W3AAP",
      "diff_hunk": "@@ -1337,7 +1337,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n \n     auto res = CreateTransactionInternal(wallet, vecSend, change_pos, coin_control, sign);\n     TRACE4(coin_selection, normal_create_tx_internal, wallet.GetName().c_str(), bool(res),\n-           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : 0);\n+           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : -1);",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "original_commit_id": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "in_reply_to_id": 1457111240,
      "user": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think wrapping the trace parameter in `static_cast<int32_t>()` is the correct way to resolve this because `change_pos` is otherwise a `std::optional<unsigned int>`.  In tracing.md `change_pos` is defined as int32 so it should always be returned as a signed 32-bit int.",
      "created_at": "2024-01-18T10:43:29Z",
      "updated_at": "2024-01-18T10:43:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457258511",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457258511"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
        }
      },
      "start_line": null,
      "original_start_line": 1339,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1340,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457305630",
      "pull_request_review_id": 1829460253,
      "id": 1457305630,
      "node_id": "PRRC_kwDOABII585W3Lge",
      "diff_hunk": "@@ -1337,7 +1337,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n \n     auto res = CreateTransactionInternal(wallet, vecSend, change_pos, coin_control, sign);\n     TRACE4(coin_selection, normal_create_tx_internal, wallet.GetName().c_str(), bool(res),\n-           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : 0);\n+           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : -1);",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "original_commit_id": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "in_reply_to_id": 1457111240,
      "user": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": ".. or maybe `static_cast` is overkill, a cast with `int32_t()` seems to be what's recommended in developer-notes.md .",
      "created_at": "2024-01-18T11:24:27Z",
      "updated_at": "2024-01-18T13:37:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1457305630",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457305630"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
        }
      },
      "start_line": null,
      "original_start_line": 1339,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1340,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1458048472",
      "pull_request_review_id": 1830668094,
      "id": 1458048472,
      "node_id": "PRRC_kwDOABII585W6A3Y",
      "diff_hunk": "@@ -1337,7 +1337,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n \n     auto res = CreateTransactionInternal(wallet, vecSend, change_pos, coin_control, sign);\n     TRACE4(coin_selection, normal_create_tx_internal, wallet.GetName().c_str(), bool(res),\n-           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : 0);\n+           res ? res->fee : 0, res && res->change_pos.has_value() ? *res->change_pos : -1);",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "original_commit_id": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "in_reply_to_id": 1457111240,
      "user": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I had my casting on the wrong value - we need to cast the unsigned optional value. Fixed in [e701982](https://github.com/bitcoin/bitcoin/pull/29272/commits/e701982c741edd2182690ddf4628e4c079a5185e).",
      "created_at": "2024-01-18T22:37:09Z",
      "updated_at": "2024-01-18T22:37:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1458048472",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1458048472"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
        }
      },
      "start_line": null,
      "original_start_line": 1339,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1340,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459228682",
      "pull_request_review_id": 1833088422,
      "id": 1459228682,
      "node_id": "PRRC_kwDOABII585W-hAK",
      "diff_hunk": "@@ -204,6 +204,30 @@ def run_test(self):\n         assert_equal(success, True)\n         assert_equal(use_aps, None)\n \n+        self.log.info(\"Change position is -1 if no change is created with APS and APS was explicitly disabled\")\n+        # We should have 2 tracepoints in the order:\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        # 3. attempting_aps_create_tx (type 3)\n+        # 4. selected_coins (type 1)\n+        # 5. aps_create_tx_internal (type 4)\n+        wallet.sendtoaddress(address=wallet.getnewaddress(), amount=10, subtractfeefromamount=True, avoid_reuse=False)\n+        events = self.get_tracepoints([1, 2, 3, 1, 4])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_equal(change_pos, -1)",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 15,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "original_commit_id": "e701982c741edd2182690ddf4628e4c079a5185e",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "There were a couple transactions before, each sending 10 BTC to the wallet itself. So the wallet should still have a balance of 50 – fees BTC, and presumably 3 UTXOs of 10 BTC, 10 BTC, and 30 - fees BTC. I‘m not sure why APS (avoid partial spend) would make a difference here. APS just means that we’ll force use of all coins associated with the same scriptpubkey at once rather than a single UTXO if there is address reuse, but it seems to me that funds are always sent to new addresses here. \r\n\r\nIt seems to me that this test works because BnB is disabled due  `subtractfeefromamount` being active, Knapsack finding the single input solution and Knapsack being run before SRD and therefore Knapsack’s result being preferred, but it’s not obvious why this transaction would generally end up not having any change if e.g. we change how we pick the input set from the various coin selection algorithm results. It might be more future proof to get the current balance, and then send the entire balance while setting `subtractfeefromamount`.\r\n\r\nUsually I would tend to suggest `sendall` to make a changeless transaction, but `sendall` doesn’t use coinselection which is what we are actually trying to test here.\r\n\r\nSo maybe, these two test-cases could just be folded into one and the distinction for APS could be dropped, or the first should perhaps also spend the entire balance.",
      "created_at": "2024-01-19T15:45:15Z",
      "updated_at": "2024-01-19T16:10:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1459228682",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459228682"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
        }
      },
      "start_line": null,
      "original_start_line": 207,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 218,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459266681",
      "pull_request_review_id": 1833166454,
      "id": 1459266681,
      "node_id": "PRRC_kwDOABII585W-qR5",
      "diff_hunk": "@@ -204,6 +204,30 @@ def run_test(self):\n         assert_equal(success, True)\n         assert_equal(use_aps, None)\n \n+        self.log.info(\"Change position is -1 if no change is created with APS and APS was explicitly disabled\")\n+        # We should have 2 tracepoints in the order:\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        # 3. attempting_aps_create_tx (type 3)\n+        # 4. selected_coins (type 1)\n+        # 5. aps_create_tx_internal (type 4)\n+        wallet.sendtoaddress(address=wallet.getnewaddress(), amount=10, subtractfeefromamount=True, avoid_reuse=False)\n+        events = self.get_tracepoints([1, 2, 3, 1, 4])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_equal(change_pos, -1)",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 15,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "original_commit_id": "e701982c741edd2182690ddf4628e4c079a5185e",
      "in_reply_to_id": 1459228682,
      "user": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks for the explanation; although the next test after this one does what you suggest, it doesn't trigger the fall-through APS path. I'll see if I can rework this test to better match a real APS situation.",
      "created_at": "2024-01-19T16:10:48Z",
      "updated_at": "2024-01-19T16:10:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1459266681",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459266681"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
        }
      },
      "start_line": null,
      "original_start_line": 207,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 218,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1460372757",
      "pull_request_review_id": 1834660508,
      "id": 1460372757,
      "node_id": "PRRC_kwDOABII585XC4UV",
      "diff_hunk": "@@ -204,6 +204,30 @@ def run_test(self):\n         assert_equal(success, True)\n         assert_equal(use_aps, None)\n \n+        self.log.info(\"Change position is -1 if no change is created with APS and APS was explicitly disabled\")\n+        # We should have 2 tracepoints in the order:\n+        # 1. selected_coins (type 1)\n+        # 2. normal_create_tx_internal (type 2)\n+        # 3. attempting_aps_create_tx (type 3)\n+        # 4. selected_coins (type 1)\n+        # 5. aps_create_tx_internal (type 4)\n+        wallet.sendtoaddress(address=wallet.getnewaddress(), amount=10, subtractfeefromamount=True, avoid_reuse=False)\n+        events = self.get_tracepoints([1, 2, 3, 1, 4])\n+        success, use_aps, algo, waste, change_pos = self.determine_selection_from_usdt(events)\n+        assert_equal(success, True)\n+        assert_equal(change_pos, -1)",
      "path": "test/functional/interface_usdt_coinselection.py",
      "position": null,
      "original_position": 15,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "original_commit_id": "e701982c741edd2182690ddf4628e4c079a5185e",
      "in_reply_to_id": 1459228682,
      "user": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed in [39d8621](https://github.com/bitcoin/bitcoin/pull/29272/commits/39d8621b0f3e9b20898278be35922ddab09683a3). I also updated the description to make it clearer that the APS path is tested due to APS being initially disabled.",
      "created_at": "2024-01-20T11:01:54Z",
      "updated_at": "2024-01-20T11:01:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1460372757",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1460372757"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
        }
      },
      "start_line": null,
      "original_start_line": 207,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 218,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1460385240",
      "pull_request_review_id": 1834663296,
      "id": 1460385240,
      "node_id": "PRRC_kwDOABII585XC7XY",
      "diff_hunk": "@@ -1355,7 +1355,7 @@ util::Result<CreatedTransactionResult> CreateTransaction(\n         // if fee of this alternative one is within the range of the max fee, we use this one\n         const bool use_aps{txr_grouped.has_value() ? (txr_grouped->fee <= txr_ungrouped.fee + wallet.m_max_aps_fee) : false};\n         TRACE5(coin_selection, aps_create_tx_internal, wallet.GetName().c_str(), use_aps, txr_grouped.has_value(),\n-               txr_grouped.has_value() ? txr_grouped->fee : 0, txr_grouped.has_value() && txr_grouped->change_pos.has_value() ? *txr_grouped->change_pos : 0);\n+               txr_grouped.has_value() ? txr_grouped->fee : 0, txr_grouped.has_value() && txr_grouped->change_pos.has_value() ? *txr_grouped->change_pos : -1);",
      "path": "src/wallet/spend.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "350606d6093563e93b8faa059af92e19f9d439e5",
      "original_commit_id": "cc1bd8fcff1f82031ff889b9d169feb2aecbb7a3",
      "in_reply_to_id": 1457097947,
      "user": {
        "login": "remyers",
        "id": 8568892,
        "node_id": "MDQ6VXNlcjg1Njg4OTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8568892?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/remyers",
        "html_url": "https://github.com/remyers",
        "followers_url": "https://api.github.com/users/remyers/followers",
        "following_url": "https://api.github.com/users/remyers/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/remyers/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/remyers/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/remyers/subscriptions",
        "organizations_url": "https://api.github.com/users/remyers/orgs",
        "repos_url": "https://api.github.com/users/remyers/repos",
        "events_url": "https://api.github.com/users/remyers/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/remyers/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This seems like a good practice and is consistent with other TRACEx uses in the code where x > 1. This would also makes it easier to check the correct number of parameters is used if PR #26593 is adopted. Fixed in [350606d](https://github.com/bitcoin/bitcoin/pull/29272/commits/350606d6093563e93b8faa059af92e19f9d439e5).",
      "created_at": "2024-01-20T11:27:10Z",
      "updated_at": "2024-01-20T11:48:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29272#discussion_r1460385240",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1460385240"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29272"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1358,
      "side": "RIGHT"
    }
  ]
}