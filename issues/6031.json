{
  "type": "issue",
  "issue": {
    "id": 69501708,
    "node_id": "MDU6SXNzdWU2OTUwMTcwOA==",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6031",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6031/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6031/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6031/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/6031",
    "number": 6031,
    "state": "closed",
    "state_reason": "completed",
    "title": "Notification commands:  Max outstanding throttling and ignore during reindex/rescan.",
    "body": "During a reindex bitcoind launched hundreds of shells, crippling the server and getting the hosting company involved.  Please implement throttling and add a filter to prevent calls when working with historical data.\n",
    "user": {
      "login": "cheako",
      "id": 1366303,
      "node_id": "MDQ6VXNlcjEzNjYzMDM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1366303?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/cheako",
      "html_url": "https://github.com/cheako",
      "followers_url": "https://api.github.com/users/cheako/followers",
      "following_url": "https://api.github.com/users/cheako/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/cheako/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/cheako/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/cheako/subscriptions",
      "organizations_url": "https://api.github.com/users/cheako/orgs",
      "repos_url": "https://api.github.com/users/cheako/repos",
      "events_url": "https://api.github.com/users/cheako/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/cheako/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 2,
    "closed_at": "2015-05-18T08:03:14Z",
    "created_at": "2015-04-20T04:04:59Z",
    "updated_at": "2021-09-08T12:42:40Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 94649650,
      "node_id": "MDEyOklzc3VlQ29tbWVudDk0NjQ5NjUw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/94649650",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-04-21T06:03:16Z",
      "updated_at": "2015-04-21T06:03:16Z",
      "author_association": "MEMBER",
      "body": "... and that's one of the reasons why notification through running a shell command is a bad idea. If we'd use a socket based approach, this would be much less problematic.\n\nWhich kind of notification is the problem here? It's already tried to mitigate this, by only calling the block notifications when not `IsInitialBlockDownload`. This isn't the case for wallet notifications I think.\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/6031#issuecomment-94649650",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6031"
    },
    {
      "event": "commented",
      "id": 94700933,
      "node_id": "MDEyOklzc3VlQ29tbWVudDk0NzAwOTMz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/94700933",
      "actor": {
        "login": "cheako",
        "id": 1366303,
        "node_id": "MDQ6VXNlcjEzNjYzMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1366303?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cheako",
        "html_url": "https://github.com/cheako",
        "followers_url": "https://api.github.com/users/cheako/followers",
        "following_url": "https://api.github.com/users/cheako/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/cheako/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/cheako/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/cheako/subscriptions",
        "organizations_url": "https://api.github.com/users/cheako/orgs",
        "repos_url": "https://api.github.com/users/cheako/repos",
        "events_url": "https://api.github.com/users/cheako/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/cheako/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-04-21T08:27:51Z",
      "updated_at": "2015-04-21T08:33:44Z",
      "author_association": "NONE",
      "body": "There is at least one reason anything is a bad idea, just because you've found it doesn't make you a super hero or anything, and that goes for whatever your suggestion is as well.  This is why I'm attempting to do whatever it is I asked about doing and am blowing your thoughtless idea off with this canned response.\n\nThere is a socket RPC already and if you'd use the P2P socket you could get exactly what you're asking for.  Though it'd take a moment to add an option to send notifications to a fifo.\n\nI've both wallet and block running the same script, run-parts.\n",
      "user": {
        "login": "cheako",
        "id": 1366303,
        "node_id": "MDQ6VXNlcjEzNjYzMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1366303?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cheako",
        "html_url": "https://github.com/cheako",
        "followers_url": "https://api.github.com/users/cheako/followers",
        "following_url": "https://api.github.com/users/cheako/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/cheako/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/cheako/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/cheako/subscriptions",
        "organizations_url": "https://api.github.com/users/cheako/orgs",
        "repos_url": "https://api.github.com/users/cheako/repos",
        "events_url": "https://api.github.com/users/cheako/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/cheako/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/6031#issuecomment-94700933",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6031"
    },
    {
      "event": "closed",
      "id": 307119412,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzA3MTE5NDEy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/307119412",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-05-18T08:03:14Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "cheako",
        "id": 1366303,
        "node_id": "MDQ6VXNlcjEzNjYzMDM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1366303?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/cheako",
        "html_url": "https://github.com/cheako",
        "followers_url": "https://api.github.com/users/cheako/followers",
        "following_url": "https://api.github.com/users/cheako/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/cheako/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/cheako/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/cheako/subscriptions",
        "organizations_url": "https://api.github.com/users/cheako/orgs",
        "repos_url": "https://api.github.com/users/cheako/repos",
        "events_url": "https://api.github.com/users/cheako/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/cheako/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-05-18T08:19:19Z",
      "updated_at": "2015-05-18T08:19:19Z",
      "source": {
        "issue": {
          "id": 71897505,
          "node_id": "MDU6SXNzdWU3MTg5NzUwNQ==",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6084",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6084/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6084/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6084/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/6084",
          "number": 6084,
          "state": "closed",
          "state_reason": "completed",
          "title": "importprivkey fails when walletnotify is set",
          "body": "If I have walletnotify set in my conf and try to import a private key, it always fails with:\n\n```\n$ bitcoin-cli importprivkey $key\nerror: {\"code\":-1,\"message\":\"boost::thread_resource_error: Resource temporarily unavailable\"}\n```\n\nI was watching the debug log when this happens, and see the rescan is calling AddToWallet for ALL past transactions, not just for the new imported private key. And it's trying to run the walletnotify program for every transaction.\n\nThe only way I can get this to work is to first stop bitcoin, disable walletnotify, then restart bitcoin to perform the importprivkey, then stop and re-enable walletnotify and restart.\n",
          "user": {
            "login": "y",
            "id": 172322,
            "node_id": "MDQ6VXNlcjE3MjMyMg==",
            "avatar_url": "https://avatars.githubusercontent.com/u/172322?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/y",
            "html_url": "https://github.com/y",
            "followers_url": "https://api.github.com/users/y/followers",
            "following_url": "https://api.github.com/users/y/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/y/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/y/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/y/subscriptions",
            "organizations_url": "https://api.github.com/users/y/orgs",
            "repos_url": "https://api.github.com/users/y/repos",
            "events_url": "https://api.github.com/users/y/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/y/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64585,
              "node_id": "MDU6TGFiZWw2NDU4NQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
              "name": "Bug",
              "color": "FBBAAB",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 6,
          "closed_at": "2018-03-08T03:46:36Z",
          "created_at": "2015-04-29T14:54:31Z",
          "updated_at": "2021-09-08T12:44:10Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "locked",
      "id": 5272057525,
      "node_id": "LOE_lADOABII584EJIMMzwAAAAE6PTa1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5272057525",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:42:40Z",
      "lock_reason": "resolved"
    }
  ]
}