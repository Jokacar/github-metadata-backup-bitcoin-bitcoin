{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28170",
    "id": 1452224012,
    "node_id": "PR_kwDOABII585Wjy4M",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28170",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28170.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28170.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28170",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28170/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28170/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28170/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/2325ff03f42606793d3c8f2a97fc73015b9c48dd",
    "number": 28170,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "p2p: adaptive connections services flags",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Derived from #28120 discussion.\r\n\r\nBy relocating the peer desirable services flags into the peer manager, we\r\nallow the connections acceptance process to handle post-IBD potential\r\nstalling scenarios.\r\n\r\nThe peer manager will be able to dynamically adjust the services flags\r\nbased on the node's proximity to the tip (back and forth). Allowing the node\r\nto recover from the following post-IBD scenario:\r\nSuppose the node has successfully synced the chain, but later experienced\r\ndropped connections and remained inactive for a duration longer than the limited\r\npeers threshold (the timeframe within which limited peers can provide blocks). In\r\nsuch cases, upon reconnecting to the network, the node might only establish\r\nconnections with limited peers, filling up all available outbound slots. Resulting\r\nin an inability to synchronize the chain (because limited peers will not provide\r\nblocks older than the `NODE_NETWORK_LIMITED_MIN_BLOCKS` threshold).\r\n\r\nAlso, with this update, the node will avoid initiating extra block-relay-only\r\nconnections during such stalling scenarios. Prioritizing syncing to latest tip.",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      }
    ],
    "created_at": "2023-07-27T15:34:45Z",
    "updated_at": "2023-07-27T15:43:49Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "abd2192369d09187d3b005b58316105960481998",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2023_net_adaptable_desirable_flags",
      "ref": "2023_net_adaptable_desirable_flags",
      "sha": "2325ff03f42606793d3c8f2a97fc73015b9c48dd",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 381313,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-07-27T15:10:05Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2023-02-27T18:01:49Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "272c4f3f10410fcd70d4ac0ad68b6e01d1ea341b",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35446,
        "stargazers_count": 70546,
        "watchers_count": 70546,
        "size": 235937,
        "default_branch": "master",
        "open_issues_count": 669,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-07-27T15:48:44Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-07-27T15:09:16Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28170"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 84,
    "deletions": 61,
    "changed_files": 8,
    "commits": 3,
    "review_comments": 0,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFkYmM2Y2M2YjE3NzQ5N2MxODY2NGJjYzA4ZjRkNTVkYTIxOTQxYTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1dbc6cc6b177497c18664bcc08f4d55da21941a6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1dbc6cc6b177497c18664bcc08f4d55da21941a6",
      "tree": {
        "sha": "7c3de37cb71e6fd49c3c860302d707ba84597c1c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7c3de37cb71e6fd49c3c860302d707ba84597c1c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7c3de37cb71e6fd49c3c860302d707ba84597c1c\nparent d23fda05842ba4539b225bbab01b94df0060f697\nauthor furszy <matiasfurszyfer@protonmail.com> 1690392081 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1690470146 -0300\n\nnet: decouple state independent service flags from desirable ones\n\nThis former one will be moved to the peer manager class in the\nfollowing-up commit.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmTChwIACgkQXdI8zGhq\npiMtUhAAtnfuCvbiPNLn/FHCZ5ML9/6L1szoQcP/e2xQ2R0LkphyiQoNmam/P/Pk\n0RwB4CDJ5kTuXv+J3Ud02t9MribtPrk5VrDdlxk+ky6hbVK0dHK+ho6oZDT+It5V\ngVQeZEaV9Tp21mNrQTJKYzWNtY1R0qu5WitI0IkDr7c+deDHYU2YkBqlxUAoT4wT\nl3yDZ9Kbkky+bDoqmo2Z5/wbgFW9tpuLwRJOM0NR8c00mxoNarw6maN6cVPNlpH/\n5In1vTL7CDAyXF0QWr4AC8peCzbIAOe7R3A+rgMHfKX7HQSdUOfK0CUu/bohLCpg\nqL/JuWhE5CZyR4ulPvl22FkSqYJZwNr7NuHlV5ew55OcgI0KF96SDuDl6gL7Fv/E\nwmBn8oW8jNT52Tt7KcGVJ/duj0SG6zsjaliHqWVPX3RIwN9ViTvZKWubQWnGEbCr\noIGadb7+SyJIi8OhzjPYgkCiqV41haGpzD4hdQwyPdfrna9/TiI53NSnoNYlfNMX\nUZxedzEBOzIlKx0RQedALZEoAEhpDkPh99vznQtq3RvxyWIVAolfQvmNivbIBwt0\nRsMIW68DCKPzwppXt77H74LhJJuG95f16FOcGHagdcpPFdh3X+Kbu/6l1jyUUhm+\nGcVuGh5bqqQoNrPnYqoGJ2DpMEYBNaTt7WaMxlXQnLp6ndYzi2w=\n=Fxm0\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d23fda05842ba4539b225bbab01b94df0060f697",
          "sha": "d23fda05842ba4539b225bbab01b94df0060f697",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d23fda05842ba4539b225bbab01b94df0060f697"
        }
      ],
      "message": "net: decouple state independent service flags from desirable ones\n\nThis former one will be moved to the peer manager class in the\nfollowing-up commit.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-07-27T15:02:26Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-07-26T17:21:21Z"
      },
      "sha": "1dbc6cc6b177497c18664bcc08f4d55da21941a6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE0MjhiN2Y0ZThjNjQ4ZmRjNjhiYTU3NDRkNjQwZDEyMGQ1ZDc4ZWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1428b7f4e8c648fdc68ba5744d640d120d5d78eb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1428b7f4e8c648fdc68ba5744d640d120d5d78eb",
      "tree": {
        "sha": "5189025545132b3e44b8714f0a46be46bc3040bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5189025545132b3e44b8714f0a46be46bc3040bd"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5189025545132b3e44b8714f0a46be46bc3040bd\nparent 1dbc6cc6b177497c18664bcc08f4d55da21941a6\nauthor furszy <matiasfurszyfer@protonmail.com> 1690397359 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1690470599 -0300\n\nnet: move state dependent peer services flags\n\nBy relocating the peer desirable services flags into the peer\nmanager, we allow the connections acceptance process to handle\npost-IBD potential stalling scenarios.\n\nThis change reduces the window during which the node initiates\nconnections to limited peers. Instead of relying on the chainstate\nvalidation IBD flag, which is based on the max tip age parameter,\nwe now utilize the PeerManager ‘initial_sync_finished’ flag, which\nis determined by `CanDirectFetch()`.\n\nIn the following-up commit, the desirable service flags will be\ndynamically adjusted to detect node getting synced, staying inactive\nfor +48hs and backing online only with limited peers connections who\ncannot provide the historical blocks.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmTCiMgACgkQXdI8zGhq\npiNzQxAAsDj00Z1d5yT21wY/1HP1oOS007XsrsG4U1FqL4eWTvpRFRmBVnrZIWFO\n55brNV7uKup/oKlbe5Jf0ThUbXCbUQYjVS1t9jAJRpKPEC8tdhxgolmDGKdyaYgi\nK86tXeLieZS0JIsTbjnHqIkNKJi+vBni74HAVnREPzC4amy32/pUM5dMXz7RzHNW\n/vCjJSWAf6DpniGcrwCV88CEGFzn15ilOh8CHF63rgCZQ4AKgD8SVpwTlmXYUqpE\n4Fxa5zBJX1fG1IiO3N7oDEOlXa4VsgKYJ1HZpiQnu1I/Xk0wK83RfcZNFf+AGhJW\n8TlFnRgXhA9WbwNoBMkMWxrmwLaB/y8/jqoHKXRKTEwYOVz+fvgpqzSZF4vxF0iG\nCFDfiSzp7L6jVLTV7z4izFiv/oytig8ln3oBy4Y9XGcL6NjpEVQCf0PuC2QqJBax\nyn1iD330BZDaVqQyWbqluf9cqwwb9JlGA/eHnvEJiXz1xU3DTlsr6y/LfvySxO2n\nEgRqNxC/ENJtG0t0KTXdEugChwxa/u42IltO3u2zuYZiqLjQOOg7rU+8JEI0GznC\nUkGzF2XexGn1vBi7tV7WGHbSr9txBkiTwmrP0wWOqPNDOzdXVDpThciLm7iLYxC5\nGJ1a9xIjWe77Yeabk9DMJXkET3hzjo6DmDG4Uk6BmYVd9peFwM4=\n=aLc3\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1dbc6cc6b177497c18664bcc08f4d55da21941a6",
          "sha": "1dbc6cc6b177497c18664bcc08f4d55da21941a6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1dbc6cc6b177497c18664bcc08f4d55da21941a6"
        }
      ],
      "message": "net: move state dependent peer services flags\n\nBy relocating the peer desirable services flags into the peer\nmanager, we allow the connections acceptance process to handle\npost-IBD potential stalling scenarios.\n\nThis change reduces the window during which the node initiates\nconnections to limited peers. Instead of relying on the chainstate\nvalidation IBD flag, which is based on the max tip age parameter,\nwe now utilize the PeerManager ‘initial_sync_finished’ flag, which\nis determined by `CanDirectFetch()`.\n\nIn the following-up commit, the desirable service flags will be\ndynamically adjusted to detect node getting synced, staying inactive\nfor +48hs and backing online only with limited peers connections who\ncannot provide the historical blocks.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-07-27T15:09:59Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-07-26T18:49:19Z"
      },
      "sha": "1428b7f4e8c648fdc68ba5744d640d120d5d78eb"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIzMjVmZjAzZjQyNjA2NzkzZDNjOGYyYTk3ZmM3MzAxNWI5YzQ4ZGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2325ff03f42606793d3c8f2a97fc73015b9c48dd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2325ff03f42606793d3c8f2a97fc73015b9c48dd",
      "tree": {
        "sha": "33f2aaa6073d68da8ebb3e9c98d2b5770af13ce5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/33f2aaa6073d68da8ebb3e9c98d2b5770af13ce5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 33f2aaa6073d68da8ebb3e9c98d2b5770af13ce5\nparent 1428b7f4e8c648fdc68ba5744d640d120d5d78eb\nauthor furszy <matiasfurszyfer@protonmail.com> 1690404027 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1690470600 -0300\n\nnet: peer manager, dynamically adjust 'initial sync finished' flag\n\nBy dynamically adjusting the flag based on the node's proximity to\nthe tip, we ensure that the new connections desirable services flags\nand the extra block relay connections stay relevant throughout the\nsoftware's lifecycle.\nUnlike the previous approach, where once the validation IBD flag was\nset, it remained constant forever.\n\nThis will let us recover from stalling scenarios where the node had\nsuccessfully synced, but subsequently dropped connections and remained\ninactive for a duration longer than the limited peers threshold (the\ntimeframe within which limited peers can provide blocks). Then, upon\nreconnection to the network, the node may end up only establishing\nconnections with limited peers, leading to an inability to synchronize\nthe chain.\n\nAdditionally, this change prevents the node from initiating extra block\nrelay connections during this type of stalling situations.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmTCiMgACgkQXdI8zGhq\npiO/uA//ZhudN7PDINcjmD0/zk4GDh5sVscK2Ujt9c2/5/pKK0cHJApazP4+pzZS\nWyUZjCVqL3nW5vAIuDcKA1ncr6cFl4jslv8xbykEGGE6q3lbymOHUIpEI8rdv1TN\n4p0QDm+JuRCN/50L55E3otwYOKHwSopAon0bD2S98j/5Uzibwk28w6zkmBrGkrgf\nC5UuRsbANHWhYgxKxZczKJAtkkxfHLGv0mR2HcFFrk+qS+RmskRuudvb4YVzzEcm\nt8QLKUF+ETabXd6+AJAigF4VHL1r7vNJ8N4Z5+8pBOvQ84oxXe9lk8m3Jc6Ud/IW\nTHUWArF2J5b/YzKizFPjKe+VhakdEU8PjhgWHv6W4HdbYbuqXiPJPOOjgU6VRbJx\nmaHFE9g0hw+/mA9vAKoeoNGqk/UX4p6r/TnVPN/q6+4ArBYTCN8QYICYxqZ4bBDZ\nBJxz3wHf6DdXpQGfioKGQo+5itQKkbo28AY9I4d24ab78ujboe7LmMgu90BNnIh2\nYbyhZWXsf4ZW1cDIbx2A/gfj4Lebta5vAqHbg0Zx34TfrZGOq8yOoCs9xtFvqRkj\nBi1MPc0wzDa5KY+kFSmWqRFXdRTUHgz8/GI3+3FZce6S2kw2nYIxgj9QcwCUbDPb\nrZXPY0ve5BqYPdLye1qmZE0dil2s7mWhDPJPNPjJIHN9lBdW5KI=\n=H/EB\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1428b7f4e8c648fdc68ba5744d640d120d5d78eb",
          "sha": "1428b7f4e8c648fdc68ba5744d640d120d5d78eb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1428b7f4e8c648fdc68ba5744d640d120d5d78eb"
        }
      ],
      "message": "net: peer manager, dynamically adjust 'initial sync finished' flag\n\nBy dynamically adjusting the flag based on the node's proximity to\nthe tip, we ensure that the new connections desirable services flags\nand the extra block relay connections stay relevant throughout the\nsoftware's lifecycle.\nUnlike the previous approach, where once the validation IBD flag was\nset, it remained constant forever.\n\nThis will let us recover from stalling scenarios where the node had\nsuccessfully synced, but subsequently dropped connections and remained\ninactive for a duration longer than the limited peers threshold (the\ntimeframe within which limited peers can provide blocks). Then, upon\nreconnection to the network, the node may end up only establishing\nconnections with limited peers, leading to an inability to synchronize\nthe chain.\n\nAdditionally, this change prevents the node from initiating extra block\nrelay connections during this type of stalling situations.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-07-27T15:10:00Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-07-26T20:40:27Z"
      },
      "sha": "2325ff03f42606793d3c8f2a97fc73015b9c48dd"
    },
    {
      "event": "commented",
      "id": 1653862929,
      "node_id": "IC_kwDOABII585ik_IR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1653862929",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-27T15:34:48Z",
      "updated_at": "2023-07-27T15:34:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28170#issuecomment-1653862929",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28170"
    },
    {
      "event": "labeled",
      "id": 9937419983,
      "node_id": "LE_lADOABII585swZjNzwAAAAJQUP7P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9937419983",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-27T15:34:49Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "renamed",
      "id": 9937469277,
      "node_id": "RTE_lADOABII585swZjNzwAAAAJQUb9d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9937469277",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-27T15:39:29Z",
      "rename": {
        "from": "net: adaptive connections services flags",
        "to": "p2p: adaptive connections services flags"
      }
    }
  ],
  "comments": []
}