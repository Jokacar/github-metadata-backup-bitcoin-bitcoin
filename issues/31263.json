{
  "type": "issue",
  "issue": {
    "id": 2645993038,
    "node_id": "I_kwDOABII586dtqZO",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31263",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31263/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31263/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31263/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/31263",
    "number": 31263,
    "state": "open",
    "state_reason": null,
    "title": "importdescriptors always rescans",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nRunning `importdescriptors` with `timestamp: now` rescans the last 2 hours worth of blocks.\r\n\r\nThe docs say that '\"now\" can be specified to bypass scanning' but that doesn't appear to be true:\r\n\r\n```\r\n\"timestamp\": timestamp | \"now\",    (integer / string, required) Time from which to start rescanning the blockchain for this descriptor, in UNIX epoch time\r\n                                   Use the string \"now\" to substitute the current synced blockchain time.\r\n                                   \"now\" can be specified to bypass scanning, for outputs which are known to never have been used, and\r\n                                   0 can be specified to scan the entire blockchain. Blocks up to 2 hours before the earliest timestamp\r\n                                   of all descriptors being imported will be scanned as well as the mempool.\r\n```\r\n\r\nI also tried using timestamps several days into the future, but still see about 2 hours worth of blocks being rescanned. I want to be able to import a description without triggering any block rescan.\n\n### Expected behaviour\n\nI expect the behavior to match the docs.\n\n### Steps to reproduce\n\n1. Run importdescriptors with the timestamp set to \"now\"\r\n2. See in the log that the wallet rescanned some blocks\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv28.0\n\n### Operating system and version\n\nSome kind of Debian\n\n### Machine specifications\n\n_No response_",
    "user": {
      "login": "gmart7t2",
      "id": 49558347,
      "node_id": "MDQ6VXNlcjQ5NTU4MzQ3",
      "avatar_url": "https://avatars.githubusercontent.com/u/49558347?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmart7t2",
      "html_url": "https://github.com/gmart7t2",
      "followers_url": "https://api.github.com/users/gmart7t2/followers",
      "following_url": "https://api.github.com/users/gmart7t2/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/gmart7t2/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/gmart7t2/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/gmart7t2/subscriptions",
      "organizations_url": "https://api.github.com/users/gmart7t2/orgs",
      "repos_url": "https://api.github.com/users/gmart7t2/repos",
      "events_url": "https://api.github.com/users/gmart7t2/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/gmart7t2/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      },
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 1,
    "created_at": "2024-11-09T12:33:58Z",
    "updated_at": "2024-11-09T16:41:00Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 15238076734,
      "node_id": "LE_lADOABII586dtqZOzwAAAAOMQpk-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15238076734",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-09T12:41:19Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "labeled",
      "id": 15238076736,
      "node_id": "LE_lADOABII586dtqZOzwAAAAOMQplA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15238076736",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-09T12:41:19Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "labeled",
      "id": 15238076737,
      "node_id": "LE_lADOABII586dtqZOzwAAAAOMQplB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15238076737",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-09T12:41:19Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 2466279297,
      "node_id": "IC_kwDOABII586TAG-B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2466279297",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-09T16:40:59Z",
      "updated_at": "2024-11-09T16:40:59Z",
      "author_association": "MEMBER",
      "body": "> The docs say that '\"now\" can be specified to bypass scanning' but that doesn't appear to be true\r\n\r\nThe message also specify that \"Blocks up to 2 hours before the earliest timestamp of all descriptors being imported will be scanned as well as the mempool\".\r\nThis occurs regardless of the provided timestamp. It serves as a grace period to account for possible variations in block times.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31263#issuecomment-2466279297",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31263"
    }
  ]
}