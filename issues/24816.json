{
  "type": "issue",
  "issue": {
    "id": 1198793397,
    "node_id": "I_kwDOABII585HdCK1",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24816",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24816/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24816/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24816/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/24816",
    "number": 24816,
    "state": "closed",
    "state_reason": "completed",
    "title": "Unresponsive CLI",
    "body": "Issue report #24810 reminds me that I've been seeing a similar issue since several months on master built with --enable-debug in my development environment, where the CLI becomes unresponsive and eventually returns:\r\n\r\n```\r\nerror: timeout on transient error: Could not connect to the server 127.0.0.1:8332 (error code 0 - \"timeout reached\")\r\n\r\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\n```\r\n\r\nOnce the CLI becomes unresponsive, it seems to happen with any CLI command.  This didn't occur for me with v21 and I'm not sure about v22, as IIRC it began sometime last Fall (2021) for me.  Until now I've been discounting it as something related to my local environment and working around it by restarting, since I restart very often for review and testing.\r\n\r\nDebian testing, currently Debian 5.16.18-1 (2022-03-29) x86_64 GNU/Linux.\r\n\r\nI'm going to try to narrow down the issue more.\r\n\r\nIs anyone else running into this?\r\n",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "comments": 2,
    "closed_at": "2022-04-12T08:28:40Z",
    "created_at": "2022-04-09T22:41:23Z",
    "updated_at": "2024-01-25T12:26:30Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 6402550321,
      "node_id": "LE_lADOABII585HdCK1zwAAAAF9nyox",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6402550321",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-09T22:41:23Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-09T22:42:10Z",
      "updated_at": "2022-04-09T22:42:10Z",
      "source": {
        "issue": {
          "id": 1197668829,
          "node_id": "I_kwDOABII585HYvnd",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24810",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24810/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24810/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24810/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/24810",
          "number": 24810,
          "state": "closed",
          "state_reason": "not_planned",
          "title": "Crash when creating wallet via bitcoin-cli",
          "body": "**Description**\r\nI expect to be able to create and load a wallet with Bitcoin CLI using the command \"bitcoin-cli createwallet mywallet.dat\" but it fails and Bitcoin Core crashes. The wallet appears to be partially created and the folder does exist.\r\n\r\nI also have that wallet listed as one to load via the config. The crash then causes bitcoin to restart via the systemd service and when it restarts it exits with an error indicating the wallet cannot be read.\r\n\r\n**Expected Behavior**\r\nI expected the wallet to be created. This works fine on Bitcoin Core 21.2, but fails on 22.0.\r\n\r\n**Actual Behavior**\r\nBitcoin crashes and a corrupt wallet is made. This causes Bitcoin to reboot, attempt to read the new wallet, and exit again leading to a cyclic restart.\r\n\r\n**Reliability**\r\nI can reliably re-create it, but only on one device. On another very similar device, the issue is not present.\r\n\r\n**Version**\r\nv22.0 from the website.\r\n\r\n**Device Info**\r\nDebian, amd64.\r\n\r\nLinux mynode 4.19.0-20-amd64 #1 SMP Debian 4.19.235-1 (2022-03-17) x86_64 GNU/Linux\r\n\r\n**GUI**\r\nNot GUI related.\r\n\r\n**CLI output when creating wallet**\r\n```\r\nadmin@mynode:~$ bitcoin-cli createwallet break2\r\nerror: timeout on transient error: Could not connect to the server 127.0.0.1:8332 (error code 1 - \"EOF reached\")\r\n\r\nMake sure the bitcoind server is running and that you are connecting to the correct RPC port.\r\nadmin@mynode:~$ \r\n```\r\n\r\n**Log when creating wallet** (read bottom to top)\r\n```\r\n...\r\n2022-04-08T18:28:12Z Bitcoin Core version v22.0.0 (release build)\r\n\r\n<crash>\r\n\r\n2022-04-08T18:27:41Z BerkeleyEnvironment::Open: LogDir=/home/bitcoin/.bitcoin/break2/database ErrorFile=/home/bitcoin/.bitcoin/break2/db.log\r\n2022-04-08T18:27:41Z Using wallet /home/bitcoin/.bitcoin/break2/wallet.dat\r\n2022-04-08T18:27:41Z Using BerkeleyDB version Berkeley DB 4.8.30: (April  9, 2010)\r\n2022-04-08T18:27:41Z UpdateTip: new best=00000000000000000011ce88f1e73e85f7463f002b093b635e6fbdfb937937c5 height=552252 version=0x20000000 log2_work=90.084721 tx=361369223 date='2018-12-02T09:47:52Z' progress=0.507781 cache=622.6MiB(4620436txo)\r\n2022-04-08T18:27:41Z UpdateTip: new best=00000000000000000026cd6e6d1ffad655908877051cc7b7b778d7236ae64e14 height=552251 version=0x20c00000 log2_work=90.084690 tx=361366404 date='2018-12-02T09:25:26Z' progress=0.507777 cache=622.4MiB(4618903txo)\r\n```\r\n\r\n",
          "user": {
            "login": "tehelsper",
            "id": 5722611,
            "node_id": "MDQ6VXNlcjU3MjI2MTE=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5722611?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/tehelsper",
            "html_url": "https://github.com/tehelsper",
            "followers_url": "https://api.github.com/users/tehelsper/followers",
            "following_url": "https://api.github.com/users/tehelsper/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/tehelsper/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/tehelsper/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/tehelsper/subscriptions",
            "organizations_url": "https://api.github.com/users/tehelsper/orgs",
            "repos_url": "https://api.github.com/users/tehelsper/repos",
            "events_url": "https://api.github.com/users/tehelsper/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/tehelsper/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64585,
              "node_id": "MDU6TGFiZWw2NDU4NQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
              "name": "Bug",
              "color": "FBBAAB",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "comments": 8,
          "closed_at": "2022-10-26T23:08:28Z",
          "created_at": "2022-04-08T18:34:41Z",
          "updated_at": "2023-10-26T12:15:57Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1096351091,
      "node_id": "IC_kwDOABII585BWP1z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1096351091",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-12T08:28:40Z",
      "updated_at": "2022-04-12T08:28:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "Closing for now. Since reporting it I'm no longer seeing this issue.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/24816#issuecomment-1096351091",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24816"
    },
    {
      "event": "closed",
      "id": 6416634412,
      "node_id": "CE_lADOABII585HdCK1zwAAAAF-dhIs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6416634412",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-12T08:28:40Z"
    },
    {
      "event": "commented",
      "id": 1403623297,
      "node_id": "IC_kwDOABII585TqZeB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1403623297",
      "actor": {
        "login": "evd0kim",
        "id": 15425710,
        "node_id": "MDQ6VXNlcjE1NDI1NzEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15425710?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/evd0kim",
        "html_url": "https://github.com/evd0kim",
        "followers_url": "https://api.github.com/users/evd0kim/followers",
        "following_url": "https://api.github.com/users/evd0kim/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/evd0kim/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/evd0kim/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/evd0kim/subscriptions",
        "organizations_url": "https://api.github.com/users/evd0kim/orgs",
        "repos_url": "https://api.github.com/users/evd0kim/repos",
        "events_url": "https://api.github.com/users/evd0kim/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/evd0kim/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-25T13:33:25Z",
      "updated_at": "2023-01-25T13:33:25Z",
      "author_association": "NONE",
      "body": "I've seen this in Core Lightning on regtest node running from Rust test environment. ",
      "user": {
        "login": "evd0kim",
        "id": 15425710,
        "node_id": "MDQ6VXNlcjE1NDI1NzEw",
        "avatar_url": "https://avatars.githubusercontent.com/u/15425710?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/evd0kim",
        "html_url": "https://github.com/evd0kim",
        "followers_url": "https://api.github.com/users/evd0kim/followers",
        "following_url": "https://api.github.com/users/evd0kim/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/evd0kim/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/evd0kim/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/evd0kim/subscriptions",
        "organizations_url": "https://api.github.com/users/evd0kim/orgs",
        "repos_url": "https://api.github.com/users/evd0kim/repos",
        "events_url": "https://api.github.com/users/evd0kim/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/evd0kim/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/24816#issuecomment-1403623297",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24816"
    },
    {
      "event": "locked",
      "id": 11596631735,
      "node_id": "LOE_lADOABII585HdCK1zwAAAAKzNo63",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11596631735",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-25T12:26:30Z"
    }
  ]
}