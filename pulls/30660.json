{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660",
    "id": 2020979175,
    "node_id": "PR_kwDOABII5854dbHn",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30660",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30660.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30660.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/3d97816fffab3c715b6ec1183c349d66c784f530",
    "number": 30660,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "test: Shut down framework cleanly on RPC connection failure",
    "user": {
      "login": "hodlinator",
      "id": 172445034,
      "node_id": "U_kgDOCkdNag",
      "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hodlinator",
      "html_url": "https://github.com/hodlinator",
      "followers_url": "https://api.github.com/users/hodlinator/followers",
      "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
      "organizations_url": "https://api.github.com/users/hodlinator/orgs",
      "repos_url": "https://api.github.com/users/hodlinator/repos",
      "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hodlinator/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Without this PR, `BitcoinTestFramework.start_nodes()`, upon failing to establish RPC connections and calling `stop_nodes()`, would end up attempting to call the `stop()`-RPC, raising additional exceptions which made the shutdown less clean.\r\n\r\nSince we now avoiding the additional exceptions which in some cases provided useful clues, we instead capture additional information about the original exceptions being triggered and ignored within `TestNode.wait_for_rpc_connection()`. This means we now have the more informative:\r\n`AssertionError: [node 0] Unable to connect to bitcoind after 60s (ignored errors: {'missing_credentials': 1, 'OSError.ECONNREFUSED': 239}, latest error: ConnectionRefusedError(111, 'Connection refused'))`\r\n\r\nAs long as the additional complexity and maintenance burden is low, exposing previously silenced exceptions in combination with having a cleaner shutdown clears the muddy waters for devs trying to figure out root causes.\r\n\r\nRelated: #30390",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2024-08-15T11:53:45Z",
    "updated_at": "2024-08-27T23:54:46Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "398f061f3249e3155b77faa257e3ee0ee040df46",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "hodlinator:2024-08/test_node_rpc_connection_failure",
      "ref": "2024-08/test_node_rpc_connection_failure",
      "sha": "3d97816fffab3c715b6ec1183c349d66c784f530",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 813856282,
        "node_id": "R_kgDOMIJ2Gg",
        "name": "bitcoin",
        "full_name": "hodlinator/bitcoin",
        "owner": {
          "login": "hodlinator",
          "id": 172445034,
          "node_id": "U_kgDOCkdNag",
          "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/hodlinator",
          "html_url": "https://github.com/hodlinator",
          "followers_url": "https://api.github.com/users/hodlinator/followers",
          "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
          "organizations_url": "https://api.github.com/users/hodlinator/orgs",
          "repos_url": "https://api.github.com/users/hodlinator/repos",
          "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/hodlinator/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/hodlinator/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/hodlinator/bitcoin",
        "archive_url": "https://api.github.com/repos/hodlinator/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/hodlinator/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/hodlinator/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/hodlinator/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/hodlinator/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/hodlinator/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/hodlinator/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/hodlinator/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/hodlinator/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/hodlinator/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/hodlinator/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/hodlinator/bitcoin/events",
        "forks_url": "https://api.github.com/repos/hodlinator/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/hodlinator/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/hodlinator/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/hodlinator/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/hodlinator/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/hodlinator/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/hodlinator/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/hodlinator/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/hodlinator/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/hodlinator/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/hodlinator/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/hodlinator/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/hodlinator/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:hodlinator/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/hodlinator/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/hodlinator/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/hodlinator/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/hodlinator/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/hodlinator/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/hodlinator/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/hodlinator/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/hodlinator/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/hodlinator/bitcoin/hooks",
        "svn_url": "https://github.com/hodlinator/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 225597,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-08-27T21:53:55Z",
        "created_at": "2024-06-11T22:00:51Z",
        "updated_at": "2024-08-14T02:59:01Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2c7a4231db35060fa1ab66d29e8139f04edc85a4",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35809,
        "stargazers_count": 77735,
        "watchers_count": 77735,
        "size": 266532,
        "default_branch": "master",
        "open_issues_count": 666,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-08-27T20:48:00Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-08-27T23:45:12Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30660"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 87,
    "deletions": 22,
    "changed_files": 3,
    "commits": 5,
    "review_comments": 0,
    "comments": 7
  },
  "events": [
    {
      "event": "commented",
      "id": 2291135616,
      "node_id": "IC_kwDOABII586Ij_SA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2291135616",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T11:53:48Z",
      "updated_at": "2024-08-15T11:53:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30660).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2291135616",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "labeled",
      "id": 13894930195,
      "node_id": "LE_lADOABII586TGVLXzwAAAAM8M88T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13894930195",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T11:53:50Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 2291136157,
      "node_id": "IC_kwDOABII586Ij_ad",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2291136157",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T11:54:15Z",
      "updated_at": "2024-08-15T11:54:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Encountered a case of #30390 here:\r\nhttps://github.com/bitcoin/bitcoin/actions/runs/10380115902/job/28739417666?pr=30377\r\n\r\nOutput with only the test (no fix commit):\r\n```\r\n$ test/functional/feature_framework_rpc_failure.py\r\n2024-08-15T07:30:20.427000Z TestFramework (INFO): PRNG seed is: 635212259632049987\r\n2024-08-15T07:30:20.427000Z TestFramework (INFO): Initializing test directory /run/user/1001/bitcoin_func_test_ujsvbdnm\r\n2024-08-15T07:30:20.428000Z TestFramework (INFO): Forcing us to timeout instantly to simulate an unresponsive bitcoind\r\n2024-08-15T07:30:20.429000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 569, in start_nodes\r\n    node.wait_for_rpc_connection()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 329, in wait_for_rpc_connection\r\n    self._raise_assertion_error(\"Unable to connect to bitcoind after {}s\".format(self.rpc_timeout))\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 192, in _raise_assertion_error\r\n    raise AssertionError(self._node_msg(msg))\r\nAssertionError: [node 0] Unable to connect to bitcoind after 0s\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/feature_framework_rpc_failure.py\", line 21, in setup_network\r\n    BitcoinTestFramework.setup_network(self)\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 396, in setup_network\r\n    self.setup_nodes()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 418, in setup_nodes\r\n    self.start_nodes()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 572, in start_nodes\r\n    self.stop_nodes()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 587, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 390, in stop_node\r\n    self.stop(wait=wait)\r\n    ^^^^^^^^^\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 209, in __getattr__\r\n    assert self.rpc_connected and self.rpc is not None, self._node_msg(\"Error: no RPC connection\")\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAssertionError: [node 0] Error: no RPC connection\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 131, in main\r\n    self.setup()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 302, in setup\r\n    self.setup_network()\r\n  File \"/home/hodlinator/bitcoin/test/functional/feature_framework_rpc_failure.py\", line 23, in setup_network\r\n    assert_equal(str(e), \"[node 0] Unable to connect to bitcoind after 0s\")\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/util.py\", line 75, in assert_equal\r\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\r\nAssertionError: not([node 0] Error: no RPC connection == [node 0] Unable to connect to bitcoind after 0s)\r\n2024-08-15T07:30:20.480000Z TestFramework (INFO): Stopping nodes\r\nTraceback (most recent call last):\r\n  File \"/home/hodlinator/bitcoin/test/functional/feature_framework_rpc_failure.py\", line 32, in <module>\r\n    FeatureFrameworkRPCFailure(__file__).main()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 155, in main\r\n    exit_code = self.shutdown()\r\n                ^^^^^^^^^^^^^^^\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 318, in shutdown\r\n    self.stop_nodes()\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_framework.py\", line 587, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 390, in stop_node\r\n    self.stop(wait=wait)\r\n    ^^^^^^^^^\r\n  File \"/home/hodlinator/bitcoin/test/functional/test_framework/test_node.py\", line 209, in __getattr__\r\n    assert self.rpc_connected and self.rpc is not None, self._node_msg(\"Error: no RPC connection\")\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAssertionError: [node 0] Error: no RPC connection\r\n[node 0] Cleaning up leftover process\r\n```\r\n\r\nWith fix:\r\n```\r\n$ test/functional/feature_framework_rpc_failure.py\r\n2024-08-15T07:30:05.092000Z TestFramework (INFO): PRNG seed is: 1672695534155872365\r\n2024-08-15T07:30:05.092000Z TestFramework (INFO): Initializing test directory /run/user/1001/bitcoin_func_test_cow4vrf7\r\n2024-08-15T07:30:05.093000Z TestFramework (INFO): Forcing us to timeout instantly to simulate an unresponsive bitcoind\r\n2024-08-15T07:30:05.094000Z TestFramework.node0 (WARNING): Cannot call stop-RPC as we are not connected. Killing process 326500.\r\n2024-08-15T07:30:05.144000Z TestFramework (INFO): Caught AssertionError with expected message\r\n2024-08-15T07:30:05.194000Z TestFramework (INFO): Stopping nodes\r\n2024-08-15T07:30:05.194000Z TestFramework (INFO): Cleaning up /run/user/1001/bitcoin_func_test_cow4vrf7 on exit\r\n2024-08-15T07:30:05.194000Z TestFramework (INFO): Tests successful\r\n```",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2291136157",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "commented",
      "id": 2291183910,
      "node_id": "IC_kwDOABII586IkLEm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2291183910",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-15T12:32:10Z",
      "updated_at": "2024-08-15T12:32:10Z",
      "author_association": "MEMBER",
      "body": "Can you explain this a bit more? I think optimizing the test framework to cleanly shut down on a failure is a bit premature, and may not be needed. However, if a failing test may leave behind a dangling bitcoind process, this seems like something to fix, because it will otherwise lead to test warnings and failures down the road.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2291183910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13922841561,
      "node_id": "HRFPE_lADOABII586TGVLXzwAAAAM93bPZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13922841561",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-18T20:10:11Z"
    },
    {
      "event": "commented",
      "id": 2295379703,
      "node_id": "IC_kwDOABII586I0Lb3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2295379703",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-18T20:23:33Z",
      "updated_at": "2024-08-18T20:31:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Can you explain this a bit more? I think optimizing the test framework to cleanly shut down on a failure is a bit premature, and may not be needed.\r\n\r\nAs long as the additional complexity and maintenance burden is low, I think it is worth having a cleaner shutdown to avoid muddying the waters for people trying to figure out root causes.\r\n\r\n> However, if a failing test may leave behind a dangling bitcoind process, this seems like something to fix, because it will otherwise lead to test warnings and failures down the road.\r\n\r\nIt does clean up dangling bitcoind processes without the fix, as can be seen in the log:\r\n```\r\n[node 0] Cleaning up leftover process\r\n```\r\nThe latest push (~bcc87514e780cd35d1f71d5c4c4069a8fac95324~ 0ea00cddc3d4a3f92c6bfae13a8b844e97ebc8c3) now explains in the log message that it is terminating the process to avoid `wait_until_stopped` timing out (which raises an additional exception).\r\n\r\n\\+ Broke out a commit adding the `self.expected_ret_code` functionality, so that the fix commit in the middle is clearer.\r\n\\+ Attempted to make the comment at the top of the test file more explanatory.\r\n\\+ ~Switched from `process.kill()` to the somewhat less aggressive `process.terminate()` (although on second thoughts, if the RPC interface is not responding in a real-world situation outside of the added test, maybe `.kill()` is closer to what we want).~",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2295379703",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13922875317,
      "node_id": "HRFPE_lADOABII586TGVLXzwAAAAM93je1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13922875317",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-18T20:29:55Z"
    },
    {
      "event": "commented",
      "id": 2311026632,
      "node_id": "IC_kwDOABII586Jv3fI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2311026632",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T20:27:30Z",
      "updated_at": "2024-08-26T20:50:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "Last week I was [hit by this again](https://github.com/hodlinator/bitcoin/actions/runs/10491632082/job/29061229925#step:27:98). Probably line ending differences on Windows makes any additional Python exception reporting extra annoying to read due to every second line being blank (separate issue, but slightly improved by this PR producing less output).\r\n\r\n### Git-sleuthing to help motivate this PR\r\n#### Was this ever working?\r\nUnfortunately for my case, it seems the answer is no:\r\n7897338918dac072e788b8ab2919d4559f311bef (Aug, 2017) broke out **test_node.py** from **test_framework.py** added the `self.rpc_connected` flag. Would have been nice if it had protected use of the `stop()` RPC using this new flag (like in this PR) but unfortunately it did not.\r\n\r\n#### Fixes in the same area\r\n\r\nfafb33cdefd2d8ce065263978075d26a1672b630 (May, 2016) MarcoFalke wrapped `stop()` attempts in `try`/`except` so at least *other nodes* would have a chance of [shutting down properly](https://github.com/bitcoin/bitcoin/pull/7971#issuecomment-215962540). (6 days later in fab5233fe6c99d446a2cebc48cf479c3f026c2cc a timeout for waiting on the process to shutdown was added too, probably so the tests wouldn't hang waiting for a non-crashed `bitcoind` that we failed to send `stop()` to).\r\n\r\n#14670 (Dec, 2018) is tangential and adds **test/functional/feature_shutdown.py** in 28479f926f21f2a91bec5a06671c60e5b0c55532, to ensure that HTTP responses for `stop()` make it all the way back to the client if I'm understanding it correctly. It fixes #11777 (Nov, 2017) which is arguably about shutdowns not being clean enough (sometimes showing additional errors depending on timing). The current PR is certainly more nit-level, but still continuing in the same general direction.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2311026632",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "commented",
      "id": 2311186892,
      "node_id": "IC_kwDOABII586JwenM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2311186892",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-26T22:07:37Z",
      "updated_at": "2024-08-26T22:07:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "Another argument for this PR is that even the current title of #30390 is \"ConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\". This in itself when looking at logs like https://github.com/bitcoin/bitcoin/actions/runs/9677128783/job/26698120754#step:27:225 is actually just a knock-on exception happening after the RPC connection attempt times out and `stop()`-RPC is called in vain:\r\n<details>\r\n<summary>Copied log excerpt</summary>\r\n\r\n```\r\n313/313 - wallet_listsinceblock.py --legacy-wallet failed, Duration: 2415 s\r\nstdout:\r\n2024-06-26T09:53:17.196000Z TestFramework (INFO): PRNG seed is: 3062882430636553844\r\n2024-06-26T09:53:17.227000Z TestFramework (INFO): Initializing test directory D:\\a\\_temp\\test_runner_₿_🏃_20240626_093314\\wallet_listsinceblock_88\r\n2024-06-26T10:33:29.783000Z TestFramework (ERROR): Assertion failed\r\nTraceback (most recent call last):\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 569, in start_nodes\r\n    node.wait_for_rpc_connection()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 314, in wait_for_rpc_connection\r\n    self._raise_assertion_error(\"Unable to connect to bitcoind after {}s\".format(self.rpc_timeout))\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 188, in _raise_assertion_error\r\n    raise AssertionError(self._node_msg(msg))\r\nAssertionError: [node 3] Unable to connect to bitcoind after 2400s\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 131, in main\r\n    self.setup()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 302, in setup\r\n    self.setup_network()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 396, in setup_network\r\n    self.setup_nodes()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 418, in setup_nodes\r\n    self.start_nodes()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 572, in start_nodes\r\n    self.stop_nodes()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 587, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 375, in stop_node\r\n    self.stop(wait=wait)\r\n    ^^^^^^^^^\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 205, in __getattr__\r\n    assert self.rpc_connected and self.rpc is not None, self._node_msg(\"Error: no RPC connection\")\r\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\nAssertionError: [node 3] Error: no RPC connection\r\n2024-06-26T10:33:29.842000Z TestFramework (INFO): Stopping nodes\r\n[node 3] Cleaning up leftover process\r\n[node 2] Cleaning up leftover process\r\n[node 1] Cleaning up leftover process\r\n[node 0] Cleaning up leftover process\r\n\r\nstderr:\r\nTraceback (most recent call last):\r\n  File \"D:\\a\\bitcoin\\bitcoin/test/functional/wallet_listsinceblock.py\", line 508, in <module>\r\n    ListSinceBlockTest().main()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 155, in main\r\n    exit_code = self.shutdown()\r\n                ^^^^^^^^^^^^^^^\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 318, in shutdown\r\n    self.stop_nodes()\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_framework.py\", line 587, in stop_nodes\r\n    node.stop_node(wait=wait, wait_until_stopped=False)\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\test_node.py\", line 375, in stop_node\r\n    self.stop(wait=wait)\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\authproxy.py\", line 127, in __call__\r\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"D:\\a\\bitcoin\\bitcoin\\test\\functional\\test_framework\\authproxy.py\", line 105, in _request\r\n    self.__conn.request(method, path, postdata, headers)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1336, in request\r\n    self._send_request(method, url, body, headers, encode_chunked)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1382, in _send_request\r\n    self.endheaders(body, encode_chunked=encode_chunked)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1331, in endheaders\r\n    self._send_output(message_body, encode_chunked=encode_chunked)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1091, in _send_output\r\n    self.send(msg)\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1035, in send\r\n    self.connect()\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\http\\client.py\", line 1001, in connect\r\n    self.sock = self._create_connection(\r\n                ^^^^^^^^^^^^^^^^^^^^^^^^\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\socket.py\", line 853, in create_connection\r\n    raise exceptions[0]\r\n  File \"C:\\hostedtoolcache\\windows\\Python\\3.12.4\\x64\\Lib\\socket.py\", line 838, in create_connection\r\n    sock.connect(sa)\r\nConnectionRefusedError: [WinError 10061] No connection could be made because the target machine actively refused it\r\n```\r\n\r\n</details>\r\n\r\nA better title might have been \"Unable to connect to bitcoind after 2400s errors on Windows\", which this PR would have made it more likely to be in the first place (had it predated the issue).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2311186892",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI3MjQ4OGQ5ZTE3MzgwYjAyNGI2ZjRmY2M0MGVlMTAxYWNkYmNlZTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b72488d9e17380b024b6f4fcc40ee101acdbcee6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b72488d9e17380b024b6f4fcc40ee101acdbcee6",
      "tree": {
        "sha": "3588442415142bb8e80ca3dccad0fc694f745c85",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3588442415142bb8e80ca3dccad0fc694f745c85"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3588442415142bb8e80ca3dccad0fc694f745c85\nparent 5fdbc8b4ee609d7f58dd4dff30e506a7400cd768\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724767253 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724769068 +0200\n\ntest refactor: wait_for_rpc_connection - Treat OSErrors the same\n\nConnectionResetError is an OSError as well, no reason to have a separate except-block for it.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQG0Fnf+27r0aASqu2L6IqTiLYiu8/s1CJBJYqZa82/qwP0STzr8j4q5oKIihbW48tU\np66C4EXtYDeAY9pQ70two=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5fdbc8b4ee609d7f58dd4dff30e506a7400cd768",
          "sha": "5fdbc8b4ee609d7f58dd4dff30e506a7400cd768",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5fdbc8b4ee609d7f58dd4dff30e506a7400cd768"
        }
      ],
      "message": "test refactor: wait_for_rpc_connection - Treat OSErrors the same\n\nConnectionResetError is an OSError as well, no reason to have a separate except-block for it.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-27T14:31:08Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-27T14:00:53Z"
      },
      "sha": "b72488d9e17380b024b6f4fcc40ee101acdbcee6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkyODIyOGE2NmRjNmIzM2NlZWQ5YmEwZTAyYWJiMzFlNTM3ZTMxYjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/928228a66dc6b33ceed9ba0e02abb31e537e31b0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/928228a66dc6b33ceed9ba0e02abb31e537e31b0",
      "tree": {
        "sha": "5fa08f2f016bca61441f6df42bad3147fcfe3488",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5fa08f2f016bca61441f6df42bad3147fcfe3488"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5fa08f2f016bca61441f6df42bad3147fcfe3488\nparent b72488d9e17380b024b6f4fcc40ee101acdbcee6\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724791783 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724791783 +0200\n\ntest: Include ignored errors in RPC connection timeout\n\nWhen an RPC connection attempt with bitcoind times out, include which ignored errors occurred in the exception message.\n\nMay provide clues of what has gone wrong.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQL9FzIX3Dfn+0BOMy1l0K+xaFqUa7umZrpTgBuP4QiHG1Zauw1auUXge7Pwg9Lz2Lr\nBbFhcEPYgTS93OOSvkXgQ=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b72488d9e17380b024b6f4fcc40ee101acdbcee6",
          "sha": "b72488d9e17380b024b6f4fcc40ee101acdbcee6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b72488d9e17380b024b6f4fcc40ee101acdbcee6"
        }
      ],
      "message": "test: Include ignored errors in RPC connection timeout\n\nWhen an RPC connection attempt with bitcoind times out, include which ignored errors occurred in the exception message.\n\nMay provide clues of what has gone wrong.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-27T20:49:43Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-27T20:49:43Z"
      },
      "sha": "928228a66dc6b33ceed9ba0e02abb31e537e31b0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ1OGMwMGM0NjIyODhhN2ZmMGU0MDM3NDAzY2MxMzFjZGY1MjRiNzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/458c00c462288a7ff0e4037403cc131cdf524b78",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/458c00c462288a7ff0e4037403cc131cdf524b78",
      "tree": {
        "sha": "47458c32c44c147d9d9b391c432cda41a1ee6b3e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/47458c32c44c147d9d9b391c432cda41a1ee6b3e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 47458c32c44c147d9d9b391c432cda41a1ee6b3e\nparent 928228a66dc6b33ceed9ba0e02abb31e537e31b0\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724011491 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724791784 +0200\n\ntest: Allow changing expected internal return code\n\nTo be used in next commit.\n\nAlso adds process IDs in relevant log messages.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQPxFuOJQiNVp7X3lZ/AcNZ4/xvJ+7F2Ap42TRiLZ5kDhpA7WTgcmzeawGyYGUwE0pl\n25ZkeSxG9RLia2pJvtAA0=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/928228a66dc6b33ceed9ba0e02abb31e537e31b0",
          "sha": "928228a66dc6b33ceed9ba0e02abb31e537e31b0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/928228a66dc6b33ceed9ba0e02abb31e537e31b0"
        }
      ],
      "message": "test: Allow changing expected internal return code\n\nTo be used in next commit.\n\nAlso adds process IDs in relevant log messages.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-27T20:49:44Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-18T20:04:51Z"
      },
      "sha": "458c00c462288a7ff0e4037403cc131cdf524b78"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJmMzZiMDZkZTYxMTU5Y2Q2ZGFlMzc5Yjc5N2FiM2IxYzgxNmMyMzY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bf36b06de61159cd6dae379b797ab3b1c816c236",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bf36b06de61159cd6dae379b797ab3b1c816c236",
      "tree": {
        "sha": "7897ca651a56c82365b33817ed681efdf2cf461f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7897ca651a56c82365b33817ed681efdf2cf461f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7897ca651a56c82365b33817ed681efdf2cf461f\nparent 458c00c462288a7ff0e4037403cc131cdf524b78\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724012970 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724791784 +0200\n\ntest: kill process if stop-RPC is not available\n\n`BitcoinTestFramework.start_nodes()`, upon failing to establish RPC connections, calls `stop_nodes()` which would raise an exception immediately through attempting to use the non-existent RPC interface, preventing a clean shutdown.\n\nWe now avoid calling the RPC interface and instead kill the bitcoind process, so that subsequent wait_until_stopped() calls will succeed instantly instead of waiting for the full timeout only to raise another exception.\n\nSince explicit killing means the bitcoind process will not exit with return code 0, we adjust the expected value.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQFRU70HqOKjKIip7ctf4kvPOaTEZ8Ap83NaRVgpT1KSgYOaVtCCtX/tm8eDZNLulVD\nJheWy885NSGlfqkL/GOwY=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/458c00c462288a7ff0e4037403cc131cdf524b78",
          "sha": "458c00c462288a7ff0e4037403cc131cdf524b78",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/458c00c462288a7ff0e4037403cc131cdf524b78"
        }
      ],
      "message": "test: kill process if stop-RPC is not available\n\n`BitcoinTestFramework.start_nodes()`, upon failing to establish RPC connections, calls `stop_nodes()` which would raise an exception immediately through attempting to use the non-existent RPC interface, preventing a clean shutdown.\n\nWe now avoid calling the RPC interface and instead kill the bitcoind process, so that subsequent wait_until_stopped() calls will succeed instantly instead of waiting for the full timeout only to raise another exception.\n\nSince explicit killing means the bitcoind process will not exit with return code 0, we adjust the expected value.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-27T20:49:44Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-18T20:29:30Z"
      },
      "sha": "bf36b06de61159cd6dae379b797ab3b1c816c236"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNkOTc4MTZmZmZhYjNjNzE1YjZlYzExODNjMzQ5ZDY2Yzc4NGY1MzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3d97816fffab3c715b6ec1183c349d66c784f530",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3d97816fffab3c715b6ec1183c349d66c784f530",
      "tree": {
        "sha": "11dd39f2bb69cbcff70f09f7faf7907ca4a5d472",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/11dd39f2bb69cbcff70f09f7faf7907ca4a5d472"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 11dd39f2bb69cbcff70f09f7faf7907ca4a5d472\nparent bf36b06de61159cd6dae379b797ab3b1c816c236\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724767729 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1724791784 +0200\n\ntest: Add feature_framework_rpc_failure.py\n\nVerifies correct behavior when failing to connect to bitcoind RPC interface during setup. Parent commit fixes issues where a raised exception raised additional knock-on exceptions.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQJOJvxqPkaN8kkbAiO+nlbZfKBeplUNx6oomgRz67l58xjEaoCseG0s84Chj9+0daU\nssuixc9UkK7DeljV7IZAU=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bf36b06de61159cd6dae379b797ab3b1c816c236",
          "sha": "bf36b06de61159cd6dae379b797ab3b1c816c236",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bf36b06de61159cd6dae379b797ab3b1c816c236"
        }
      ],
      "message": "test: Add feature_framework_rpc_failure.py\n\nVerifies correct behavior when failing to connect to bitcoind RPC interface during setup. Parent commit fixes issues where a raised exception raised additional knock-on exceptions.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-27T20:49:44Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2024-08-27T14:08:49Z"
      },
      "sha": "3d97816fffab3c715b6ec1183c349d66c784f530"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14035813832,
      "node_id": "HRFPE_lADOABII586TGVLXzwAAAANEmYXI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14035813832",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-27T21:53:56Z"
    },
    {
      "event": "commented",
      "id": 2313645385,
      "node_id": "IC_kwDOABII586J521J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2313645385",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-27T21:54:40Z",
      "updated_at": "2024-08-27T21:54:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "After more investigation into #30390, my impression is that since `TestNode.wait_for_rpc_connection()` ignores a bunch of exceptions, the knock-on exceptions when calling `stop()` and failing prior to this PR actually may sometimes provide a clue for why the RPC connection wasn't established in the first place.\r\n\r\nThat realization made me add 2 more commits here, which provide more information on the original exceptions being triggered and ignored inside `wait_for_rpc_connection`. Only fair since we are avoiding the triggering of knock-on exceptions later.\r\n\r\nThe timeout exception's message thereby now includes counters of encountered (and ignored) exceptions + latest exception type & message:\r\n`Unable to connect to bitcoind after 60s (ignored errors: {'missing_credentials': 5}, latest error: ValueError('No RPC credentials'))`",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30660#issuecomment-2313645385",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30660"
    },
    {
      "event": "labeled",
      "id": 14036556028,
      "node_id": "LE_lADOABII586TGVLXzwAAAANEpNj8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14036556028",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-27T23:54:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": []
}