{
  "type": "issue",
  "issue": {
    "id": 850427549,
    "node_id": "MDU6SXNzdWU4NTA0Mjc1NDk=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/21605",
    "number": 21605,
    "state": "closed",
    "state_reason": "completed",
    "title": "wallet: Segmentation fault during sync",
    "body": "Trying to sync my several years old wallet using bitcoin-qt on Linux WITH PRUNING ON. After 44% (around Dec. 3 2017, 16:xx), it quits with a segmentation fault. Guessing from the date, I could have made a transaction from that wallet around that time. Tried different computers with different flavors of Linux (Ubuntu 20.04, q4os 20.04) to no avail. If I am syncing without a wallet, it works.\r\nHere, logs from a run with GDB and a subsequent backtrace (not sure if that helps, please contact me for debug info):\r\n\r\nReading symbols from ./bitcoin/bitcoin-0.21.0/bin/bitcoin-qt...\r\n(No debugging symbols found in ./bitcoin/bitcoin-0.21.0/bin/bitcoin-qt)\r\n(gdb) start\r\nFunction \"main\" not defined.\r\nMake breakpoint pending on future shared library load? (y or [n]) n\r\nStarting program: /home/chrischan/bitcoin/bitcoin-0.21.0/bin/bitcoin-qt \r\n[Thread debugging using libthread_db enabled]\r\nUsing host libthread_db library \"/lib/x86_64-linux-gnu/libthread_db.so.1\".\r\n[New Thread 0x7ffff742f700 (LWP 32345)]\r\n[New Thread 0x7ffff63dc700 (LWP 32346)]\r\n[New Thread 0x7ffff5a9a700 (LWP 32347)]\r\n[New Thread 0x7fffe6ffe700 (LWP 32348)]\r\n[New Thread 0x7fffe67fd700 (LWP 32349)]\r\n[New Thread 0x7fffc5881700 (LWP 32350)]\r\n[New Thread 0x7fff4a870700 (LWP 32353)]\r\n[New Thread 0x7fff42ee6700 (LWP 32354)]\r\n[Thread 0x7fff4a870700 (LWP 32353) exited]\r\n[New Thread 0x7fff426e5700 (LWP 32355)]\r\n[New Thread 0x7fff41ee4700 (LWP 32356)]\r\n[New Thread 0x7fff416e3700 (LWP 32357)]\r\n[New Thread 0x7fff40ee2700 (LWP 32358)]\r\n[New Thread 0x7fff2bfff700 (LWP 32359)]\r\n[New Thread 0x7fff2b7fe700 (LWP 32360)]\r\n[New Thread 0x7fff2affd700 (LWP 32361)]\r\n[New Thread 0x7fff2a7fc700 (LWP 32362)]\r\n[Thread 0x7fff41ee4700 (LWP 32356) exited]\r\n\r\nThread 6 \"b-scheduler\" received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fffe67fd700 (LWP 32349)]\r\n0x0000555555c2ba7b in ?? ()\r\n(gdb) bt\r\n#0  0x0000555555c2ba7b in ?? ()\r\n#1  0x0000555555c4d72d in ?? ()\r\n#2  0x0000555555c4e03d in ?? ()\r\n#3  0x0000555555c4e454 in ?? ()\r\n#4  0x0000555555ac964b in ?? ()\r\n#5  0x0000555555da43b0 in ?? ()\r\n#6  0x0000555555da31ca in ?? ()\r\n#7  0x00005555558a097b in ?? ()\r\n#8  0x0000555555e6e58a in ?? ()\r\n#9  0x00007ffff7f9c609 in start_thread (arg=<optimized out>) at pthread_create.c:477\r\n#10 0x00007ffff7c16293 in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n(gdb) \r\n\r\n\r\n**System information**\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\nV21.0, from website, verified signature\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\n(1) Old asus EeePc, 2MB RAM, 250GB SSD\r\n(2) Acer Laptop, 4MB RAM, 250GB SSD \r\n<!-- GUI-related issue? What is your operating system and its version? If Linux, what is your desktop environment and graphical shell? -->\r\nUbuntu 20.04\r\nQ4OS (latest)\r\n",
    "user": {
      "login": "rednil",
      "id": 9349074,
      "node_id": "MDQ6VXNlcjkzNDkwNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/9349074?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rednil",
      "html_url": "https://github.com/rednil",
      "followers_url": "https://api.github.com/users/rednil/followers",
      "following_url": "https://api.github.com/users/rednil/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/rednil/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/rednil/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/rednil/subscriptions",
      "organizations_url": "https://api.github.com/users/rednil/orgs",
      "repos_url": "https://api.github.com/users/rednil/repos",
      "events_url": "https://api.github.com/users/rednil/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/rednil/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "comments": 10,
    "closed_at": "2022-02-23T11:53:42Z",
    "created_at": "2021-04-05T14:59:27Z",
    "updated_at": "2023-02-23T10:14:25Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 4551984161,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ1NTE5ODQxNjE=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4551984161",
      "actor": {
        "login": "rednil",
        "id": 9349074,
        "node_id": "MDQ6VXNlcjkzNDkwNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9349074?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rednil",
        "html_url": "https://github.com/rednil",
        "followers_url": "https://api.github.com/users/rednil/followers",
        "following_url": "https://api.github.com/users/rednil/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rednil/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rednil/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rednil/subscriptions",
        "organizations_url": "https://api.github.com/users/rednil/orgs",
        "repos_url": "https://api.github.com/users/rednil/repos",
        "events_url": "https://api.github.com/users/rednil/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rednil/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-05T14:59:27Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "labeled",
      "id": 4552118112,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ1NTIxMTgxMTI=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4552118112",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-05T15:32:25Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 813480631,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgxMzQ4MDYzMQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813480631",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-05T16:17:21Z",
      "updated_at": "2021-04-05T16:17:21Z",
      "author_association": "MEMBER",
      "body": "Can you share the last lines from debug.log?",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-813480631",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "commented",
      "id": 813487822,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgxMzQ4NzgyMg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813487822",
      "actor": {
        "login": "rednil",
        "id": 9349074,
        "node_id": "MDQ6VXNlcjkzNDkwNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9349074?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rednil",
        "html_url": "https://github.com/rednil",
        "followers_url": "https://api.github.com/users/rednil/followers",
        "following_url": "https://api.github.com/users/rednil/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rednil/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rednil/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rednil/subscriptions",
        "organizations_url": "https://api.github.com/users/rednil/orgs",
        "repos_url": "https://api.github.com/users/rednil/repos",
        "events_url": "https://api.github.com/users/rednil/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rednil/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-05T16:30:39Z",
      "updated_at": "2021-04-05T16:30:39Z",
      "author_association": "NONE",
      "body": "Sure.\r\n\r\n2021-04-05T16:28:49Z Pre-allocating up to position 0xc00000 in rev01085.dat\r\n2021-04-05T16:28:49Z UpdateTip: new best=00000000000000000028b02bad2699993a82fc52e73936b96226296a803b6d6e height=497387 version=0x20000000 log2_work=87.579934 tx=277599023 date='2017-12-03T15:22:54Z' progress=0.440660 cache=85.0MiB(640030txo)\r\n2021-04-05T16:28:51Z UpdateTip: new best=0000000000000000004ea0ab05d11e558456e12e80b1e3a11614d44ea401cbdb height=497388 version=0x20000000 log2_work=87.579971 tx=277600074 date='2017-12-03T15:23:16Z' progress=0.440662 cache=85.8MiB(645919txo)\r\n2021-04-05T16:28:52Z UpdateTip: new best=0000000000000000003b383f9dc396a6bf46d980fa4872bdace5ecd56736a613 height=497389 version=0x20000000 log2_work=87.580007 tx=277602786 date='2017-12-03T15:27:40Z' progress=0.440666 cache=86.4MiB(650778txo)",
      "user": {
        "login": "rednil",
        "id": 9349074,
        "node_id": "MDQ6VXNlcjkzNDkwNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9349074?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rednil",
        "html_url": "https://github.com/rednil",
        "followers_url": "https://api.github.com/users/rednil/followers",
        "following_url": "https://api.github.com/users/rednil/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rednil/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rednil/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rednil/subscriptions",
        "organizations_url": "https://api.github.com/users/rednil/orgs",
        "repos_url": "https://api.github.com/users/rednil/repos",
        "events_url": "https://api.github.com/users/rednil/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rednil/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-813487822",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "commented",
      "id": 813522494,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgxMzUyMjQ5NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/813522494",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-05T17:32:19Z",
      "updated_at": "2021-04-05T17:42:52Z",
      "author_association": "MEMBER",
      "body": "Annotation of the backtrace address using the gitian debug information for 0.21.0 x86_64:\r\n```\r\n(gdb) info line *0x0000555555c2ba7b\r\nLine 360 of \"wallet/scriptpubkeyman.cpp\" starts at address 0x555555c2ba79 <LegacyScriptPubKeyMan::MarkUnusedAddresses(CScript const&)+873>\r\n   and ends at 0x555555c2ba82 <LegacyScriptPubKeyMan::MarkUnusedAddresses(CScript const&)+882>.\r\n\r\n(gdb) info line *0x0000555555c4d72d \r\nLine 287 of \"/usr/include/c++/7/bits/stl_tree.h\" starts at address 0x555555c4d72d <CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool)+925>\r\n   and ends at 0x555555c4d735 <CWallet::AddToWalletIfInvolvingMe(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool)+933>.\r\n\r\n(gdb) info line *0x0000555555c4e03d\r\nLine 1152 of \"wallet/wallet.cpp\" starts at address 0x555555c4e02f <CWallet::SyncTransaction(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool)+95>\r\n   and ends at 0x555555c4e045 <CWallet::SyncTransaction(std::shared_ptr<CTransaction const> const&, CWalletTx::Confirmation, bool)+117>.\r\n\r\n(gdb) info line *0x0000555555c4e454\r\nLine 1217 of \"wallet/wallet.cpp\" starts at address 0x555555c4e42c <CWallet::blockConnected(CBlock const&, int)+220> and ends at 0x555555c4e458 <CWallet::blockConnected(CBlock const&, int)+264>.\r\n\r\n(gdb) info line *0x0000555555ac964b\r\nLine 222 of \"validationinterface.cpp\"\r\n   starts at address 0x555555ac9638 <std::_Function_handler<void(), CMainSignals::BlockConnected(const std::shared_ptr<const CBlock>&, const CBlockIndex*)::<lambda()> >::_M_invoke(const std::_Any_data &)+760>\r\n   and ends at 0x555555ac9670 <std::_Function_handler<void(), CMainSignals::BlockConnected(const std::shared_ptr<const CBlock>&, const CBlockIndex*)::<lambda()> >::_M_invoke(const std::_Any_data &)+816>.\r\n```\r\nSo this line: https://github.com/bitcoin/bitcoin/blob/v0.21.0/src/wallet/scriptpubkeyman.cpp#L360\r\n\r\nThe only thing I can think of is some kind of out of bounds access. E.g. as far as I see it doesn't check `meta.has_key_origin`, nor the length of `meta.key_origin.path`.\r\n```c++\r\nbool internal = (meta.key_origin.path[1] & ~BIP32_HARDENED_KEY_LIMIT) != 0;\r\n```\r\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-813522494",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "renamed",
      "id": 4552684295,
      "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50NDU1MjY4NDI5NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/4552684295",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-05T17:53:51Z",
      "rename": {
        "from": "Segmentation fault during sync",
        "to": "wallet: Segmentation fault during sync"
      }
    },
    {
      "event": "commented",
      "id": 814934941,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgxNDkzNDk0MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/814934941",
      "actor": {
        "login": "rednil",
        "id": 9349074,
        "node_id": "MDQ6VXNlcjkzNDkwNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9349074?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rednil",
        "html_url": "https://github.com/rednil",
        "followers_url": "https://api.github.com/users/rednil/followers",
        "following_url": "https://api.github.com/users/rednil/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rednil/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rednil/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rednil/subscriptions",
        "organizations_url": "https://api.github.com/users/rednil/orgs",
        "repos_url": "https://api.github.com/users/rednil/repos",
        "events_url": "https://api.github.com/users/rednil/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rednil/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-07T13:55:23Z",
      "updated_at": "2021-04-07T13:58:04Z",
      "author_association": "NONE",
      "body": "Now I tried it without pruning. Full node completely synced, updated from 0.20.1 to 0.21.0, placed my old wallet file (not the one it was indexing before) into the \"wallets\" directory, started up bitcoin-qt, hit \"Load Wallet\", selected my file => segfault after a few seconds:\r\n\r\nThread 19 \"b-qt-walletctrl\" received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fff457fa700 (LWP 759452)]\r\n0x0000555555c2ba7b in ?? ()\r\n(gdb) bt\r\n#0  0x0000555555c2ba7b in ?? ()\r\n#1  0x0000555555c4d72d in ?? ()\r\n#2  0x0000555555c4e03d in ?? ()\r\n#3  0x0000555555c4f2ba in ?? ()\r\n#4  0x0000555555c51a46 in ?? ()\r\n#5  0x0000555555c53e7b in ?? ()\r\n#6  0x0000555555b7aba5 in ?? ()\r\n#7  0x00005555557ffabe in ?? ()\r\n#8  0x00005555564ab464 in ?? ()\r\n#9  0x00005555564a13eb in ?? ()\r\n#10 0x0000555556589fbc in ?? ()\r\n#11 0x00005555565915ff in ?? ()\r\n#12 0x000055555646e288 in ?? ()\r\n#13 0x00005555564c6eae in ?? ()\r\n#14 0x00005555564c4c56 in ?? ()\r\n#15 0x000055555646c06f in ?? ()\r\n#16 0x00005555562f34ca in ?? ()\r\n#17 0x00005555562f5b7d in ?? ()\r\n#18 0x00007ffff7f98609 in start_thread (arg=<optimized out>)\r\n    at pthread_create.c:477\r\n#19 0x00007ffff7c12293 in clone ()\r\n    at ../sysdeps/unix/sysv/linux/x86_64/clone.S:95\r\n(gdb) \r\n\r\ndebug.log:\r\n\r\n2021-04-07T13:44:22Z init message: Lade Wallet...\r\n2021-04-07T13:44:23Z [main.dat] Wallet File Version = 139900\r\n2021-04-07T13:44:23Z [main.dat] Keys: 0 plaintext, 4015 encrypted, 4015 w/ metadata, 4015 total. Unknown wallet records: 0\r\n2021-04-07T13:44:23Z [main.dat] Wallet completed loading in            1374ms\r\n2021-04-07T13:44:24Z init message: Durchsuche erneut...\r\n2021-04-07T13:44:24Z [main.dat] Rescanning last 180900 blocks (from block 497263)...\r\n2021-04-07T13:44:24Z [main.dat] Rescan started from block 000000000000000000cc0bef9e18edb27c254b1294e0056fb92f02a00117abc9...\r\n2021-04-07T13:44:38Z New outbound peer connected: version: 70015, blocks=678167, peer=2 (full-relay)\r\n2021-04-07T13:44:38Z New outbound peer connected: version: 70016, blocks=678167, peer=3 (full-relay)\r\n\r\nThe wallet file worked until quite recently, maybe 0.19 or so.\r\n",
      "user": {
        "login": "rednil",
        "id": 9349074,
        "node_id": "MDQ6VXNlcjkzNDkwNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9349074?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rednil",
        "html_url": "https://github.com/rednil",
        "followers_url": "https://api.github.com/users/rednil/followers",
        "following_url": "https://api.github.com/users/rednil/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rednil/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rednil/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rednil/subscriptions",
        "organizations_url": "https://api.github.com/users/rednil/orgs",
        "repos_url": "https://api.github.com/users/rednil/repos",
        "events_url": "https://api.github.com/users/rednil/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rednil/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-814934941",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "commented",
      "id": 832922086,
      "node_id": "MDEyOklzc3VlQ29tbWVudDgzMjkyMjA4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/832922086",
      "actor": {
        "login": "demensdeum",
        "id": 19148646,
        "node_id": "MDQ6VXNlcjE5MTQ4NjQ2",
        "avatar_url": "https://avatars.githubusercontent.com/u/19148646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/demensdeum",
        "html_url": "https://github.com/demensdeum",
        "followers_url": "https://api.github.com/users/demensdeum/followers",
        "following_url": "https://api.github.com/users/demensdeum/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/demensdeum/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/demensdeum/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/demensdeum/subscriptions",
        "organizations_url": "https://api.github.com/users/demensdeum/orgs",
        "repos_url": "https://api.github.com/users/demensdeum/repos",
        "events_url": "https://api.github.com/users/demensdeum/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/demensdeum/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-05-05T18:42:06Z",
      "updated_at": "2021-05-05T18:56:41Z",
      "author_association": "NONE",
      "body": "I have two wallet.dat files, and with old wallet.dat (2014 year) everything is ok, but with another wallet.dat (2019 year) I got crash on Windows 10 that I can't trace, and crash in Ubuntu that I can trace from source code with debug mode.\r\nI use pruned mode (4096MB).\r\nUbuntu lldb crash trace:\r\n\r\nlldb src/qt/bitcoin-qt\r\nprocess launch -- -reindex-chainstate -prune=4096\r\n\r\n* thread #12, name = 'b-scheduler', stop reason = signal SIGSEGV: invalid address (fault address: 0x78)\r\n    frame #0: 0x00005555557cf3c9 bitcoin-qt`CBlockIndex::GetBlockTime(this=0x0000000000000000) const at chain.h:262:25\r\n   259 \r\n   260      int64_t GetBlockTime() const\r\n   261      {\r\n-> 262          return (int64_t)nTime;\r\n   263      }\r\n   264 \r\n   265      int64_t GetBlockTimeMax() const\r\n\r\ndb.log is empty\r\ndebug.log:\r\nhttps://pastebin.com/jP6tH3PE\r\n\r\nlldb stack trace:\r\nhttps://pastebin.com/0n9CG0Vm",
      "user": {
        "login": "demensdeum",
        "id": 19148646,
        "node_id": "MDQ6VXNlcjE5MTQ4NjQ2",
        "avatar_url": "https://avatars.githubusercontent.com/u/19148646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/demensdeum",
        "html_url": "https://github.com/demensdeum",
        "followers_url": "https://api.github.com/users/demensdeum/followers",
        "following_url": "https://api.github.com/users/demensdeum/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/demensdeum/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/demensdeum/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/demensdeum/subscriptions",
        "organizations_url": "https://api.github.com/users/demensdeum/orgs",
        "repos_url": "https://api.github.com/users/demensdeum/repos",
        "events_url": "https://api.github.com/users/demensdeum/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/demensdeum/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-832922086",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "commented",
      "id": 865241734,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTI0MTczNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/865241734",
      "actor": {
        "login": "DeerSpotter",
        "id": 16710090,
        "node_id": "MDQ6VXNlcjE2NzEwMDkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16710090?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DeerSpotter",
        "html_url": "https://github.com/DeerSpotter",
        "followers_url": "https://api.github.com/users/DeerSpotter/followers",
        "following_url": "https://api.github.com/users/DeerSpotter/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DeerSpotter/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DeerSpotter/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DeerSpotter/subscriptions",
        "organizations_url": "https://api.github.com/users/DeerSpotter/orgs",
        "repos_url": "https://api.github.com/users/DeerSpotter/repos",
        "events_url": "https://api.github.com/users/DeerSpotter/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DeerSpotter/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-21T18:11:21Z",
      "updated_at": "2021-06-21T18:11:21Z",
      "author_association": "NONE",
      "body": "any updates on this",
      "user": {
        "login": "DeerSpotter",
        "id": 16710090,
        "node_id": "MDQ6VXNlcjE2NzEwMDkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16710090?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DeerSpotter",
        "html_url": "https://github.com/DeerSpotter",
        "followers_url": "https://api.github.com/users/DeerSpotter/followers",
        "following_url": "https://api.github.com/users/DeerSpotter/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DeerSpotter/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DeerSpotter/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DeerSpotter/subscriptions",
        "organizations_url": "https://api.github.com/users/DeerSpotter/orgs",
        "repos_url": "https://api.github.com/users/DeerSpotter/repos",
        "events_url": "https://api.github.com/users/DeerSpotter/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DeerSpotter/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-865241734",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "commented",
      "id": 865275596,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2NTI3NTU5Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/865275596",
      "actor": {
        "login": "rednil",
        "id": 9349074,
        "node_id": "MDQ6VXNlcjkzNDkwNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9349074?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rednil",
        "html_url": "https://github.com/rednil",
        "followers_url": "https://api.github.com/users/rednil/followers",
        "following_url": "https://api.github.com/users/rednil/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rednil/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rednil/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rednil/subscriptions",
        "organizations_url": "https://api.github.com/users/rednil/orgs",
        "repos_url": "https://api.github.com/users/rednil/repos",
        "events_url": "https://api.github.com/users/rednil/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rednil/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-21T19:06:55Z",
      "updated_at": "2021-06-21T19:06:55Z",
      "author_association": "NONE",
      "body": "I found out that this was NOT my recent wallet that worked not long ago. Instead, it was possibly a VERY old, somehow corrupted wallet I already had problems with years ago. So I guess this is low prio, although it's still a segfault.",
      "user": {
        "login": "rednil",
        "id": 9349074,
        "node_id": "MDQ6VXNlcjkzNDkwNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9349074?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rednil",
        "html_url": "https://github.com/rednil",
        "followers_url": "https://api.github.com/users/rednil/followers",
        "following_url": "https://api.github.com/users/rednil/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rednil/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rednil/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rednil/subscriptions",
        "organizations_url": "https://api.github.com/users/rednil/orgs",
        "repos_url": "https://api.github.com/users/rednil/repos",
        "events_url": "https://api.github.com/users/rednil/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rednil/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-865275596",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "rooprob",
        "id": 124807,
        "node_id": "MDQ6VXNlcjEyNDgwNw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/124807?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rooprob",
        "html_url": "https://github.com/rooprob",
        "followers_url": "https://api.github.com/users/rooprob/followers",
        "following_url": "https://api.github.com/users/rooprob/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rooprob/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rooprob/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rooprob/subscriptions",
        "organizations_url": "https://api.github.com/users/rooprob/orgs",
        "repos_url": "https://api.github.com/users/rooprob/repos",
        "events_url": "https://api.github.com/users/rooprob/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rooprob/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-14T04:38:52Z",
      "updated_at": "2021-10-14T04:38:52Z",
      "source": {
        "issue": {
          "id": 1025939597,
          "node_id": "PR_kwDOABII584tLbYu",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23277",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23277/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23277/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/23277/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/23277",
          "number": 23277,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Add size check on meta.key_origin.path",
          "body": "Resolves https://github.com/bitcoin/bitcoin/issues/21605 segfault on legacy wallet\r\n\r\nI also encountered same [*] when resyncing a 2017 era blockchain.\r\n* https://gist.github.com/rooprob/91d78358b920b8f8b7df78af8b2ce99c",
          "user": {
            "login": "rooprob",
            "id": 124807,
            "node_id": "MDQ6VXNlcjEyNDgwNw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/124807?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/rooprob",
            "html_url": "https://github.com/rooprob",
            "followers_url": "https://api.github.com/users/rooprob/followers",
            "following_url": "https://api.github.com/users/rooprob/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/rooprob/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/rooprob/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/rooprob/subscriptions",
            "organizations_url": "https://api.github.com/users/rooprob/orgs",
            "repos_url": "https://api.github.com/users/rooprob/repos",
            "events_url": "https://api.github.com/users/rooprob/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/rooprob/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 9,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/23277",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/23277",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/23277.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/23277.patch"
          },
          "closed_at": "2021-11-03T02:40:08Z",
          "created_at": "2021-10-14T04:38:52Z",
          "updated_at": "2022-11-03T17:17:55Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 943934600,
      "node_id": "IC_kwDOABII5844Q0yI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/943934600",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-10-15T02:28:02Z",
      "updated_at": "2021-10-15T02:28:02Z",
      "author_association": "MEMBER",
      "body": "The problem is likely that the wallets are encrypted and so the new fields that are being used are not actually populated at the time of use, causing the segfault. The metadata upgrade requires the private keys to be available, so the wallet needs to be unlocked.\r\n\r\nIf you were to unlock your wallet before the problematic blocks is reached, then the upgrade will occur and there won't be a crash. ",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-943934600",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "commented",
      "id": 998704382,
      "node_id": "IC_kwDOABII5847hwT-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/998704382",
      "actor": {
        "login": "demensdeum",
        "id": 19148646,
        "node_id": "MDQ6VXNlcjE5MTQ4NjQ2",
        "avatar_url": "https://avatars.githubusercontent.com/u/19148646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/demensdeum",
        "html_url": "https://github.com/demensdeum",
        "followers_url": "https://api.github.com/users/demensdeum/followers",
        "following_url": "https://api.github.com/users/demensdeum/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/demensdeum/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/demensdeum/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/demensdeum/subscriptions",
        "organizations_url": "https://api.github.com/users/demensdeum/orgs",
        "repos_url": "https://api.github.com/users/demensdeum/repos",
        "events_url": "https://api.github.com/users/demensdeum/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/demensdeum/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-21T11:31:06Z",
      "updated_at": "2022-01-09T15:37:16Z",
      "author_association": "NONE",
      "body": "Bitcoin core Qt, v22.0.0. still crashing.\r\nwallet.dat\r\n[https://www.mediafire.com/file/rcf2yc3bhinztio/wallet.dat/file](https://www.mediafire.com/file/rcf2yc3bhinztio/wallet.dat/file)\r\nI have passphrase from it, and I don't know how to unlock it from UI, I can only change passphrase.",
      "user": {
        "login": "demensdeum",
        "id": 19148646,
        "node_id": "MDQ6VXNlcjE5MTQ4NjQ2",
        "avatar_url": "https://avatars.githubusercontent.com/u/19148646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/demensdeum",
        "html_url": "https://github.com/demensdeum",
        "followers_url": "https://api.github.com/users/demensdeum/followers",
        "following_url": "https://api.github.com/users/demensdeum/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/demensdeum/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/demensdeum/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/demensdeum/subscriptions",
        "organizations_url": "https://api.github.com/users/demensdeum/orgs",
        "repos_url": "https://api.github.com/users/demensdeum/repos",
        "events_url": "https://api.github.com/users/demensdeum/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/demensdeum/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-998704382",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-17T17:27:56Z",
      "updated_at": "2022-02-17T17:27:56Z",
      "source": {
        "issue": {
          "id": 1136556861,
          "node_id": "I_kwDOABII585Dvns9",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24335",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24335/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24335/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24335/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/24335",
          "number": 24335,
          "state": "closed",
          "state_reason": "completed",
          "title": "Segmentation Fault in V21 and V22 releases",
          "body": "OS: Ubuntu 20.04.\r\nReleases: Bitcoin Core V21 and V22.\r\n\r\nThe problem:\r\nI have a lot of HD wallets, with the first transaction in Dic 2017, encrypted, not checked for 5 years.\r\n\r\nIt starts reescaning and segmentation fault error. Tried with bitcoin-qt, bitcoind, reindex the whole blockchain, and still segmentation fault.\r\nAfter loading the GUI, load the wallet, again it closes with segmentation fault\r\n\r\nV21 and V22 downloaded and checked for signatures and hashes.\r\n\r\nThe same wallets, if checked after mid-2018-2019 (a year or more) work.\r\n\r\nThe machine is a DELL inspiron with 16Gb of ram (dbcache=8000). Tried a lot of other things (-rescan, etc) that didn't work.\r\n\r\nAll other wallets work fine, no problems, but these ones fail with newer versions of bitcoin core. Run bitcoin-wallet info, the wallets are ok, (not corrupted or anything).\r\n\r\nIf I do the reindex while the wallet is loaded, it crashes the moment the reindex gets to Dic 2017-Jan 2018. Then I reestart without the wallet loaded and it finishes reindexing OK.\r\n\r\nIn the log says it loads the wallet OK (5s :)), starts reescaning and then nothing else (it crashes).\r\n\r\nIt crashes 4 or 5 seconds after reescaning (really fast) both bitcoin-qt and bitcoind.\r\n",
          "user": {
            "login": "GITErnesO",
            "id": 99622432,
            "node_id": "U_kgDOBfAeIA",
            "avatar_url": "https://avatars.githubusercontent.com/u/99622432?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GITErnesO",
            "html_url": "https://github.com/GITErnesO",
            "followers_url": "https://api.github.com/users/GITErnesO/followers",
            "following_url": "https://api.github.com/users/GITErnesO/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/GITErnesO/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/GITErnesO/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/GITErnesO/subscriptions",
            "organizations_url": "https://api.github.com/users/GITErnesO/orgs",
            "repos_url": "https://api.github.com/users/GITErnesO/repos",
            "events_url": "https://api.github.com/users/GITErnesO/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/GITErnesO/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64585,
              "node_id": "MDU6TGFiZWw2NDU4NQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
              "name": "Bug",
              "color": "FBBAAB",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/52",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/52",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/52/labels",
            "id": 6179837,
            "node_id": "MDk6TWlsZXN0b25lNjE3OTgzNw==",
            "number": 52,
            "state": "closed",
            "title": "23.0",
            "description": "",
            "creator": {
              "login": "MarcoFalke",
              "id": 6399679,
              "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
              "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/MarcoFalke",
              "html_url": "https://github.com/MarcoFalke",
              "followers_url": "https://api.github.com/users/MarcoFalke/followers",
              "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
              "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
              "repos_url": "https://api.github.com/users/MarcoFalke/repos",
              "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 123,
            "created_at": "2020-12-04T08:54:20Z",
            "updated_at": "2022-04-25T20:51:00Z",
            "closed_at": "2022-04-22T18:08:30Z"
          },
          "locked": true,
          "comments": 14,
          "closed_at": "2022-03-02T08:35:23Z",
          "created_at": "2022-02-14T00:08:53Z",
          "updated_at": "2023-03-02T10:15:21Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-21T23:31:43Z",
      "updated_at": "2022-02-21T23:31:43Z",
      "source": {
        "issue": {
          "id": 1144644022,
          "node_id": "I_kwDOABII585EOeG2",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24388",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24388/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24388/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24388/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/24388",
          "number": 24388,
          "state": "closed",
          "state_reason": "completed",
          "title": "Segmentation fault. \"b-httpworker.0\"",
          "body": "<!-- Describe the issue -->\r\nAfter calling `importaddress` trough HTTP RPC, i get segmentation fault at the end of sync(tracked by progress.\r\n\r\n**Expected behavior**\r\nShould complete importaddress\r\n\r\n<!--- What behavior did you expect? -->\r\nShould complete importaddress\r\n\r\n**Actual behavior**\r\nSegmentation fault\r\n\r\n**To reproduce**\r\nJust try to call `importaddress` trought wallet RPC in bitcoin testnet.\r\n\r\n<!--- How reliably can you reproduce the issue, what are the steps to do so? -->\r\n10/10 times\r\n\r\n**System information**\r\nUbuntu\r\n\r\n<!-- What version of Bitcoin Core are you using, where did you get it (website, self-compiled, etc)? -->\r\n0.21.1\r\n\r\n<!-- What type of machine are you observing the error on (OS/CPU and disk type)? -->\r\nDigital ocean Ubuntu instance\r\n\r\n<!-- Any extra information that might be useful in the debugging process. -->\r\ngdb\r\n\r\n<!--- This is normally the contents of a `debug.log` or `config.log` file. Raw text or a link to a pastebin type site are preferred. -->\r\nHeres log right before crash:\r\n```\r\n2022-02-19T10:11:15Z sending verack (0 bytes) peer=2291\r\n2022-02-19T10:11:15Z receive version message: /Satoshi:0.17.1/: version 70013, blocks=0, us=68.183.75.14:18333, peer=2291\r\n2022-02-19T10:11:15Z socket closed for peer=2290\r\n2022-02-19T10:11:15Z disconnecting peer=2290\r\n2022-02-19T10:11:15Z received: verack (0 bytes) peer=2290\r\n2022-02-19T10:11:15Z sending sendheaders (0 bytes) peer=2290\r\n\r\nThread 11 \"b-httpworker.0\" received signal SIGSEGV, Segmentation fault.\r\n[Switching to Thread 0x7fffcffff700 (LWP 1008189)]\r\n```\r\n",
          "user": {
            "login": "IvRRimum",
            "id": 5957079,
            "node_id": "MDQ6VXNlcjU5NTcwNzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5957079?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/IvRRimum",
            "html_url": "https://github.com/IvRRimum",
            "followers_url": "https://api.github.com/users/IvRRimum/followers",
            "following_url": "https://api.github.com/users/IvRRimum/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/IvRRimum/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/IvRRimum/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/IvRRimum/subscriptions",
            "organizations_url": "https://api.github.com/users/IvRRimum/orgs",
            "repos_url": "https://api.github.com/users/IvRRimum/repos",
            "events_url": "https://api.github.com/users/IvRRimum/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/IvRRimum/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64585,
              "node_id": "MDU6TGFiZWw2NDU4NQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
              "name": "Bug",
              "color": "FBBAAB",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "comments": 9,
          "closed_at": "2022-02-23T12:17:23Z",
          "created_at": "2022-02-19T10:15:52Z",
          "updated_at": "2023-02-23T10:14:19Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1048705156,
      "node_id": "IC_kwDOABII584-gfiE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1048705156",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-23T11:53:42Z",
      "updated_at": "2022-02-23T11:53:42Z",
      "author_association": "MEMBER",
      "body": "It's been confirmed that this is the same issue as #24335. I'm going to close this issue to consolidate discussion there. Ideally we'll get this solved for 23.0.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/21605#issuecomment-1048705156",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21605"
    },
    {
      "event": "closed",
      "id": 6124433461,
      "node_id": "CE_lADOABII584ysH6dzwAAAAFtC3A1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6124433461",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-23T11:53:42Z"
    },
    {
      "event": "locked",
      "id": 8589913555,
      "node_id": "LOE_lADOABII584ysH6dzwAAAAH__63T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8589913555",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-23T10:14:25Z"
    }
  ]
}