{
  "type": "issue",
  "issue": {
    "id": 1872867013,
    "node_id": "I_kwDOABII585voa7F",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28367",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28367/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28367/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28367/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28367",
    "number": 28367,
    "state": "open",
    "state_reason": null,
    "title": "a native token protocol",
    "body": "### Please describe the feature you'd like to see added.\n\na native token protocol can be implemented on btc\r\nA UTXO-based blockchain structure with a native token method, which I call \"dye coins.\"\r\n1. The transaction output class needs to add a new field called \"color\".\r\n2. The block header needs to add a new field called \"color\".\r\n3. The validation of ordinary transactions needs to add additional validation logic.\r\n4. The validation of Coinbase transactions needs to add additional validation logic.\r\n5. The validation of blocks needs to add new validation logic.\r\n\r\nSpecific logic is as follows:\r\n1. After the transaction output has the color tag field, there are only two results, 0 (all 0) indicates not marked, non-0 indicates marked.\r\n2. To verify that a normal transaction (non-coinbase) is valid, additional validation logic needs to be added. Specifically, it means that the input and output of all transactions must be traversed to ensure that the output values of all colors are less than or equal to the input values of the corresponding colors.\r\n3. Miners need to verify that all or some of the normal transactions in the transaction pool that need to be packaged meet 2, and calculate the difference between all the corresponding colors in all these transactions as utxo (can be single or multiple) added to the Coinbase output.\r\n4. A coinbase transaction is a special transaction that essentially has no input and only output. In addition to the utxo generated by the block miner fee, the coinbase transaction itself has a certain number of native token rewards.\r\n5. The structure of a coinbase transaction that does not participate in color marking is as follows:\r\n* \tAssuming that the current block reward is 50 white coins, and the transaction output generated by the miner fee contains 10 red coins, 10 green coins, and 10 white coins.\r\n* \tWhen constructing a coinbase transaction, 3 red coin outputs (3 red coin outputs total 10) can be output, 2 green coin outputs (2 green coin outputs total 10) and 1 white coin output (output quantity is equal to 60)\r\n6. The structure of a coinbase transaction that participates in color marking is as follows:\r\n* \tAssuming that the current block reward is 50 white coins, and the transaction output generated by the miner fee contains 10 red coins, 10 green coins, and 10 white coins.\r\n* \tWhen constructing a coinbase transaction, 3 red coin outputs (3 red coin outputs total 10) can be output, 2 green coin outputs (2 green coin outputs total 10), and the remaining 60 white coins will be dyed yellow as a single output (or multiple outputs). However, 60 white coins cannot be dyed yellow, 30 blue, and white coins can only be dyed the same color and a color that has not appeared before (how to determine if the color exists will be mentioned later), otherwise the transaction will fail.\r\n7. Next, the miner will pack all the transactions to generate the Merkle tree, and assign the color value of the dye in the coinbase transaction to the color field in the block header, and then start Proof of Work to generate the block.\r\n8. After the miner generates the block, it will broadcast the block to the entire network.\r\n9. Other miners will verify the validity of the block. This includes verifying the validity of each transaction, especially the coinbase transaction. It must be ensured that the only color that can be dyed in the coinbase transaction is one color (not that there is only one color of output), and that this color has never appeared before (it can be obtained by traversing all the block headers or caching all the colors locally). Otherwise, the transaction will fail. If there is no dyeing (meaning that the output of the coinbase transaction does not produce a new color utxo, and the number of utxo tokens of other colors does not increase), the traversal process can be skipped.\r\n10. Verify whether the color value in the block header (0 if no dyeing) is equal to the new color value in the coinbase transaction. If equal, the block is valid, the block is added to the blockchain, and the next block is mined. If not equal, the block is invalid and the block is rejected.\r\n11. [Note] There is no inflation problem here, because inflation can be achieved simply by adding one more color utxo, for example, green and red are marked as US dollars.\r\nif interested, pls contact me zhangguoqing0906@icloud.com\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\n_No response_\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\n_No response_",
    "user": {
      "login": "dogbitcoin",
      "id": 46561745,
      "node_id": "MDQ6VXNlcjQ2NTYxNzQ1",
      "avatar_url": "https://avatars.githubusercontent.com/u/46561745?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dogbitcoin",
      "html_url": "https://github.com/dogbitcoin",
      "followers_url": "https://api.github.com/users/dogbitcoin/followers",
      "following_url": "https://api.github.com/users/dogbitcoin/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/dogbitcoin/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/dogbitcoin/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/dogbitcoin/subscriptions",
      "organizations_url": "https://api.github.com/users/dogbitcoin/orgs",
      "repos_url": "https://api.github.com/users/dogbitcoin/repos",
      "events_url": "https://api.github.com/users/dogbitcoin/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/dogbitcoin/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 0,
    "created_at": "2023-08-30T04:25:33Z",
    "updated_at": "2023-08-30T04:25:33Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 10228114795,
      "node_id": "LE_lADOABII585voa7FzwAAAAJhpKVr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10228114795",
      "actor": {
        "login": "dogbitcoin",
        "id": 46561745,
        "node_id": "MDQ6VXNlcjQ2NTYxNzQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/46561745?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dogbitcoin",
        "html_url": "https://github.com/dogbitcoin",
        "followers_url": "https://api.github.com/users/dogbitcoin/followers",
        "following_url": "https://api.github.com/users/dogbitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dogbitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dogbitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dogbitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/dogbitcoin/orgs",
        "repos_url": "https://api.github.com/users/dogbitcoin/repos",
        "events_url": "https://api.github.com/users/dogbitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dogbitcoin/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T04:25:33Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    }
  ]
}