{
  "type": "issue",
  "issue": {
    "id": 1798161589,
    "node_id": "I_kwDOABII585rLcS1",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28064",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28064/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28064/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28064/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28064",
    "number": 28064,
    "state": "closed",
    "state_reason": "completed",
    "title": "Internal bug detected: \"isValid == error_msg.empty()\" when validateaddress(bc1p0xlxvlhemja6c4dqv22uapctqupfhlxm9h8z3k2e72q4k9hcz7v07qwwzcrf)",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nvalidateaddress(bc1p0xlxvlhemja6c4dqv22uapctqupfhlxm9h8z3k2e72q4k9hcz7v07qwwzcrf)\r\n\r\nwhen calling through rpc api, throws an error:\r\n\r\n```\r\nInternal bug detected: \"isValid == error_msg.empty()\"\r\nrpc/output_script.cpp:64 (operator())\r\nBitcoin Core v25.0.0\r\nPlease report this issue here: https://github.com/bitcoin/bitcoin/issues\r\n```\n\n### Expected behaviour\n\nAddress validation to return is_valid=false in the rpc api result.\r\n\r\nThis address `bc1p0xlxvlhemja6c4dqv22uapctqupfhlxm9h8z3k2e72q4k9hcz7v07qwwzcrf` is taken from the test vectors found here:\r\n\r\nhttps://github.com/bitcoin/bips/blob/master/bip-0350.mediawiki\n\n### Steps to reproduce\n\nCall RPC API: validateaddress(bc1p0xlxvlhemja6c4dqv22uapctqupfhlxm9h8z3k2e72q4k9hcz7v07qwwzcrf)\n\n### Relevant log output\n\n```\r\nInternal bug detected: \"isValid == error_msg.empty()\"\r\nrpc/output_script.cpp:64 (operator())\r\nBitcoin Core v25.0.0\r\nPlease report this issue here: https://github.com/bitcoin/bitcoin/issues\r\n```\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nv25.0.0\n\n### Operating system and version\n\nMacOS Ventura 13.4 (22F66)\n\n### Machine specifications\n\n_No response_",
    "user": {
      "login": "meglio",
      "id": 282177,
      "node_id": "MDQ6VXNlcjI4MjE3Nw==",
      "avatar_url": "https://avatars.githubusercontent.com/u/282177?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/meglio",
      "html_url": "https://github.com/meglio",
      "followers_url": "https://api.github.com/users/meglio/followers",
      "following_url": "https://api.github.com/users/meglio/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/meglio/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/meglio/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/meglio/subscriptions",
      "organizations_url": "https://api.github.com/users/meglio/orgs",
      "repos_url": "https://api.github.com/users/meglio/repos",
      "events_url": "https://api.github.com/users/meglio/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/meglio/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/62",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/62",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/62/labels",
      "id": 9441433,
      "node_id": "MI_kwDOABII584AkBCZ",
      "number": 62,
      "state": "open",
      "title": "25.1",
      "description": "",
      "creator": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 2,
      "closed_issues": 7,
      "created_at": "2023-05-25T10:17:04Z",
      "updated_at": "2023-07-11T07:56:54Z"
    },
    "locked": false,
    "comments": 3,
    "closed_at": "2023-07-11T07:56:53Z",
    "created_at": "2023-07-11T05:55:45Z",
    "updated_at": "2023-07-11T07:58:08Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 1630193718,
      "node_id": "IC_kwDOABII585hKsg2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630193718",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-11T06:03:52Z",
      "updated_at": "2023-07-11T06:03:52Z",
      "author_association": "MEMBER",
      "body": "This will be fixed in 25.1, see 725c3dc2dd1402d631e05ef461fe2abbac9a008f",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28064#issuecomment-1630193718",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28064"
    },
    {
      "event": "milestoned",
      "id": 9782902828,
      "node_id": "MIE_lADOABII585rLcS1zwAAAAJHG0As",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9782902828",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-11T06:03:58Z",
      "milestone": {
        "title": "25.1"
      }
    },
    {
      "event": "labeled",
      "id": 9782904269,
      "node_id": "LE_lADOABII585rLcS1zwAAAAJHG0XN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9782904269",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-11T06:04:10Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 1630335753,
      "node_id": "IC_kwDOABII585hLPMJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630335753",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-11T07:56:53Z",
      "updated_at": "2023-07-11T07:56:53Z",
      "author_association": "MEMBER",
      "body": "Closing, given the fix has been backported. @meglio if you're able to compile the 25.x branch, and confirm this fixes your issue, please do.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28064#issuecomment-1630335753",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28064"
    },
    {
      "event": "closed",
      "id": 9783914768,
      "node_id": "CE_lADOABII585rLcS1zwAAAAJHKrEQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9783914768",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-11T07:56:54Z"
    },
    {
      "event": "mentioned",
      "id": 9783914836,
      "node_id": "MEE_lADOABII585rLcS1zwAAAAJHKrFU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9783914836",
      "actor": {
        "login": "meglio",
        "id": 282177,
        "node_id": "MDQ6VXNlcjI4MjE3Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/282177?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meglio",
        "html_url": "https://github.com/meglio",
        "followers_url": "https://api.github.com/users/meglio/followers",
        "following_url": "https://api.github.com/users/meglio/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meglio/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meglio/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meglio/subscriptions",
        "organizations_url": "https://api.github.com/users/meglio/orgs",
        "repos_url": "https://api.github.com/users/meglio/repos",
        "events_url": "https://api.github.com/users/meglio/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meglio/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-11T07:56:54Z"
    },
    {
      "event": "subscribed",
      "id": 9783914845,
      "node_id": "SE_lADOABII585rLcS1zwAAAAJHKrFd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9783914845",
      "actor": {
        "login": "meglio",
        "id": 282177,
        "node_id": "MDQ6VXNlcjI4MjE3Nw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/282177?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/meglio",
        "html_url": "https://github.com/meglio",
        "followers_url": "https://api.github.com/users/meglio/followers",
        "following_url": "https://api.github.com/users/meglio/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/meglio/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/meglio/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/meglio/subscriptions",
        "organizations_url": "https://api.github.com/users/meglio/orgs",
        "repos_url": "https://api.github.com/users/meglio/repos",
        "events_url": "https://api.github.com/users/meglio/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/meglio/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-11T07:56:54Z"
    },
    {
      "event": "commented",
      "id": 1630337550,
      "node_id": "IC_kwDOABII585hLPoO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1630337550",
      "actor": {
        "login": "russeree",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/russeree",
        "html_url": "https://github.com/russeree",
        "followers_url": "https://api.github.com/users/russeree/followers",
        "following_url": "https://api.github.com/users/russeree/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/russeree/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/russeree/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/russeree/subscriptions",
        "organizations_url": "https://api.github.com/users/russeree/orgs",
        "repos_url": "https://api.github.com/users/russeree/repos",
        "events_url": "https://api.github.com/users/russeree/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/russeree/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-11T07:58:08Z",
      "updated_at": "2023-07-11T07:58:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "This is currently resolved in master via the addition of an else case to ```if (ConvertBits<5, 8, false>([&](unsigned char c) { data.push_back(c); }, dec.data.begin() + 1, dec.data.end()))```\r\n\r\nhere \r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/ef29d5d7e239b42269dd22ea94a709b5e4ceb5e5/src/key_io.cpp#L194-L197",
      "user": {
        "login": "russeree",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/russeree",
        "html_url": "https://github.com/russeree",
        "followers_url": "https://api.github.com/users/russeree/followers",
        "following_url": "https://api.github.com/users/russeree/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/russeree/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/russeree/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/russeree/subscriptions",
        "organizations_url": "https://api.github.com/users/russeree/orgs",
        "repos_url": "https://api.github.com/users/russeree/repos",
        "events_url": "https://api.github.com/users/russeree/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/russeree/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28064#issuecomment-1630337550",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28064"
    }
  ]
}