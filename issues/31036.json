{
  "type": "issue",
  "issue": {
    "id": 2567662694,
    "node_id": "I_kwDOABII586ZC2xm",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31036",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31036/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31036/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31036/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/31036",
    "number": 31036,
    "state": "open",
    "state_reason": null,
    "title": "Listen on random port by default (not 8333)",
    "body": "### Please describe the feature you'd like to see added.\r\n\r\nConnections to port 8333 can be recognized right away as Bitcoin P2P connections. While it is still possible to recognize Bitcoin P2P connections regardless of the port, random ports would make network-wide monitoring harder.\r\n\r\n\r\n### Is your feature related to a problem, if so please describe it.\r\n\r\nNetwork-wide monitoring.\r\n\r\n### Describe the solution you'd like\r\n\r\nThe listening address and port of a node are propagated and saved in other nodes' databases, so the port has to be constant. Thus, after generating a random port it would need to be saved on disk (e.g. `settings.json`) and reused after restarts.\r\n\r\nThis applies to new installations. Existent ones have already propagated with port 8333 (if not changed by the node operator). So, something like: if a new installation and port is not explicitly provided, instead of using 8333 generate a random one and save it to `settings.json`.\r\n\r\nThis applies only to listening on IPv4 and IPv6 addresses.\r\n\r\n### Please leave any additional context\r\n\r\nThis is more of a network-wide measure. Individual nodes have stronger means to protect themselves.",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      },
      {
        "id": 64584,
        "node_id": "MDU6TGFiZWw2NDU4NA==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
        "name": "Brainstorming",
        "color": "ebd775",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 5,
    "created_at": "2024-10-05T05:04:57Z",
    "updated_at": "2024-10-10T22:57:44Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 14526871192,
      "node_id": "LE_lADOABII586ZC2xmzwAAAANh3naY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14526871192",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-05T05:04:57Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "labeled",
      "id": 14527255746,
      "node_id": "LE_lADOABII586ZC2xmzwAAAANh5FTC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14527255746",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-05T08:45:41Z",
      "label": {
        "name": "Brainstorming",
        "color": "ebd775"
      }
    },
    {
      "event": "commented",
      "id": 2395099390,
      "node_id": "IC_kwDOABII586OwlD-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2395099390",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-05T15:52:02Z",
      "updated_at": "2024-10-05T15:52:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "This would make the DNS seeds in their current from unusable (see #30900 for a related suggestion, though that would only remedy that for IPv4).",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31036#issuecomment-2395099390",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31036"
    },
    {
      "event": "commented",
      "id": 2395248735,
      "node_id": "IC_kwDOABII586OxJhf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2395248735",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-06T01:14:37Z",
      "updated_at": "2024-10-06T01:15:45Z",
      "author_association": "NONE",
      "body": "There are 7000 IPv4 and 2000 IPv6 nodes. I expect this ratio to continue for next 10 years based on the [adoption](https://www.google.com/intl/en/ipv6/statistics.html#tab=per-country-ipv6-adoption) stats.\r\n\r\nIPv4 nodes will not be able to benefit from non-default port support because of DNS seeds and IPv6.",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31036#issuecomment-2395248735",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31036"
    },
    {
      "event": "commented",
      "id": 2396705062,
      "node_id": "IC_kwDOABII586O2tEm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2396705062",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-07T11:47:47Z",
      "updated_at": "2024-10-07T11:47:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "Alright, looks like getting the DNS seeds to propagate ports would be really nice to have or an outright blocker for this.\r\n\r\nCurrently, about 7% of my IPv4/IPv6 addrman entries use non 8333 port.\r\n\r\n```sh\r\n$ bitcoin-cli getnodeaddresses 0 | jq -r 'map(select((.network == \"ipv6\" or .network == \"ipv4\") and .port != 8333)) | length'\r\n$ bitcoin-cli getnodeaddresses 0 | jq -r 'map(select(.network == \"ipv6\" or .network == \"ipv4\")) | length'\r\n```",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31036#issuecomment-2396705062",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31036"
    },
    {
      "event": "commented",
      "id": 2406165683,
      "node_id": "IC_kwDOABII586Payyz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2406165683",
      "actor": {
        "login": "Wronskode",
        "id": 142849734,
        "node_id": "U_kgDOCIO2xg",
        "avatar_url": "https://avatars.githubusercontent.com/u/142849734?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Wronskode",
        "html_url": "https://github.com/Wronskode",
        "followers_url": "https://api.github.com/users/Wronskode/followers",
        "following_url": "https://api.github.com/users/Wronskode/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Wronskode/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Wronskode/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Wronskode/subscriptions",
        "organizations_url": "https://api.github.com/users/Wronskode/orgs",
        "repos_url": "https://api.github.com/users/Wronskode/repos",
        "events_url": "https://api.github.com/users/Wronskode/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Wronskode/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-10T22:43:51Z",
      "updated_at": "2024-10-10T22:43:51Z",
      "author_association": "NONE",
      "body": "This may causes problems if we have to open the port on the rooter ?",
      "user": {
        "login": "Wronskode",
        "id": 142849734,
        "node_id": "U_kgDOCIO2xg",
        "avatar_url": "https://avatars.githubusercontent.com/u/142849734?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Wronskode",
        "html_url": "https://github.com/Wronskode",
        "followers_url": "https://api.github.com/users/Wronskode/followers",
        "following_url": "https://api.github.com/users/Wronskode/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Wronskode/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Wronskode/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Wronskode/subscriptions",
        "organizations_url": "https://api.github.com/users/Wronskode/orgs",
        "repos_url": "https://api.github.com/users/Wronskode/repos",
        "events_url": "https://api.github.com/users/Wronskode/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Wronskode/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31036#issuecomment-2406165683",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31036"
    },
    {
      "event": "commented",
      "id": 2406179522,
      "node_id": "IC_kwDOABII586Pa2LC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2406179522",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-10T22:55:00Z",
      "updated_at": "2024-10-10T22:57:44Z",
      "author_association": "MEMBER",
      "body": "> Currently, about 7% of my IPv4/IPv6 addrman entries use non 8333 port.\r\n\r\nSame (8% of IPv6, 2% of IPv6, 7% overall)\r\n",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31036#issuecomment-2406179522",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31036"
    }
  ]
}