{
  "type": "issue",
  "issue": {
    "id": 2084594854,
    "node_id": "I_kwDOABII5858QGSm",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29255",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29255/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29255/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29255/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/29255",
    "number": 29255,
    "state": "open",
    "state_reason": null,
    "title": "Unable to sync blockchain on laptop: ERROR: ReadBlockFromDisk: Deserialize or I/O error",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nAfter installing Bitcoin Core 26.0 in Windows Pro 11 and starting IBD, Core crashes. \r\n\r\nI know Windows might not be exactly ideal, but I like to run a pruned node on my work laptop as well. I didn't set pruning yet by the way, I started Core just with the standard settings. \r\n\r\nBitcoin Core crashes and the following error pops up in debug.log: \r\n\r\n`ERROR: ReadBlockFromDisk: Deserialize or I/O error - ReadCompactSize(): size too large: iostream error at FlatFilePos(nFile=327, nPos=8)`\r\n\r\n\r\n\n\n### Expected behaviour\n\nI expect to get to the tip of the chain, but unfortunately the chain gets corrupted every time. \n\n### Steps to reproduce\n\nThere are no settings, no bitcoin.conf file. \r\n\r\nThe problem persists after reindexing. It also persists after removing Core and removing the Bitcoin folder in %appdata% and trying a fresh start. \r\n\r\nThe disk is an NVMe Samsung 970 Evo Plus 2 TB. I read that the problem should be due to disk corruption. I tried the Samsung Magician program, which did a full scan for a whopping 18 hours, but didn't find any issues. Also tried Minitool Partition Wizard, which found no issues either. \r\n\r\nI thought the problem could be the laptop going into sleep mode. However, after disabling sleep mode, and trying to sync again, I found out this doesn't cause the issue either. \r\n\n\n### Relevant log output\n\nFirst attempt for which I have debug.log file: \r\n\r\n```\r\n2024-01-16T11:39:33Z UpdateTip: new best=00000000000000001240f87e370943617c128a8d098b3cad6bd06e4c0927c3fe height=372076 version=0x00000003 log2_work=83.275584 tx=81612997 date='2015-08-29T14:53:41Z' progress=0.085632 cache=115.5MiB(1048378txo)\r\n2024-01-16T11:39:33Z UpdateTip: new best=00000000000000000f8136ee9499e2920b99510bbc0bef7a2dfd95e49a911b99 height=372077 version=0x00000003 log2_work=83.275613 tx=81613437 date='2015-08-29T14:58:17Z' progress=0.085632 cache=115.5MiB(1048327txo)\r\n2024-01-16T11:39:33Z ERROR: ReadBlockFromDisk: Deserialize or I/O error - ReadCompactSize(): size too large: iostream error at FlatFilePos(nFile=327, nPos=8)\r\n2024-01-16T11:39:33Z *** Failed to read block\r\n2024-01-16T11:39:33Z Error: A fatal internal error occurred, see debug.log for details\r\n2024-01-16T13:01:41Z ERROR: ProcessNewBlock: ActivateBestChain failed (Failed to read block)\r\n2024-01-16T13:01:42Z New outbound-full-relay v1 peer connected: version: 70016, blocks=826027, peer=37\r\n2024-01-16T13:01:42Z Synchronizing blockheaders, height: 826027 (~100.00%)\r\n2024-01-16T13:01:42Z tor: Thread interrupt\r\n2024-01-16T13:01:42Z torcontrol thread exit\r\n2024-01-16T13:01:42Z addcon thread exit\r\n2024-01-16T13:01:42Z opencon thread exit\r\n2024-01-16T13:01:42Z Shutdown: In progress...\r\n2024-01-16T13:01:42Z net thread exit\r\n2024-01-16T13:01:43Z ERROR: ReadBlockFromDisk: Deserialize or I/O error - ReadCompactSize(): size too large: iostream error at FlatFilePos(nFile=327, nPos=8)\r\n2024-01-16T13:01:43Z *** Failed to read block\r\n2024-01-16T13:01:43Z Error: A fatal internal error occurred, see debug.log for details\r\n2024-01-16T13:01:43Z ERROR: ProcessNewBlock: ActivateBestChain failed (Failed to read block)\r\n2024-01-16T13:01:43Z msghand thread exit\r\n2024-01-16T13:01:43Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat started\r\n2024-01-16T13:01:43Z DumpAnchors: Flush 0 outbound block-relay-only peer addresses to anchors.dat completed (0.01s)\r\n2024-01-16T13:01:44Z scheduler thread exit\r\n2024-01-16T13:01:44Z Writing 0 unbroadcast transactions to disk.\r\n2024-01-16T13:01:44Z Dumped mempool: 2.8e-05s to copy, 0.01356s to dump\r\n2024-01-16T13:01:44Z Flushed fee estimates to fee_estimates.dat.\r\n\r\n```\r\n\r\nAnother attempt from scratch: \r\n\r\n2024-01-16T17:48:48Z UpdateTip: new best=0000000000000000002cf0d7bfe0db7ae76733bd0cfb72ae44db3043d60ef8fc height=385247 version=0x00000003 log2_work=83.646829 tx=94144065 date='2015-11-25T07:28:22Z' progress=0.098767 cache=138.9MiB(1283001txo)\r\n2024-01-16T17:48:48Z ERROR: ReadBlockFromDisk: Deserialize or I/O error - ReadCompactSize(): size too large: iostream error at FlatFilePos(nFile=380, nPos=8136310)\r\n2024-01-16T17:48:48Z *** Failed to read block\r\n2024-01-16T17:48:48Z Error: A fatal internal error occurred, see debug.log for details\r\n\r\n\n\n### How did you obtain Bitcoin Core\n\nPre-built binaries\n\n### What version of Bitcoin Core are you using?\n\nv26.0.0\n\n### Operating system and version\n\nWindows 11 Pro\n\n### Machine specifications\n\nAsus ExpertBook B5 B5602CBA-MB0220X\r\nIntel Core i7-1260P\r\n16 GB DDR5 RAM\r\nAdded: NVMe Samsung SSD 970 EVO Plus 2TB.\r\n",
    "user": {
      "login": "Xaspr",
      "id": 45730904,
      "node_id": "MDQ6VXNlcjQ1NzMwOTA0",
      "avatar_url": "https://avatars.githubusercontent.com/u/45730904?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Xaspr",
      "html_url": "https://github.com/Xaspr",
      "followers_url": "https://api.github.com/users/Xaspr/followers",
      "following_url": "https://api.github.com/users/Xaspr/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Xaspr/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Xaspr/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Xaspr/subscriptions",
      "organizations_url": "https://api.github.com/users/Xaspr/orgs",
      "repos_url": "https://api.github.com/users/Xaspr/repos",
      "events_url": "https://api.github.com/users/Xaspr/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Xaspr/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 234877,
        "node_id": "MDU6TGFiZWwyMzQ4Nzc=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Windows",
        "name": "Windows",
        "color": "884400",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 1,
    "created_at": "2024-01-16T18:41:50Z",
    "updated_at": "2024-01-16T19:37:06Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 11502905534,
      "node_id": "LE_lADOABII5858QGSmzwAAAAKtoGi-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11502905534",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-16T19:20:19Z",
      "label": {
        "name": "Windows",
        "color": "884400"
      }
    },
    {
      "event": "commented",
      "id": 1894391840,
      "node_id": "IC_kwDOABII585w6iAg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1894391840",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-16T19:37:06Z",
      "updated_at": "2024-01-16T19:37:06Z",
      "author_association": "MEMBER",
      "body": "Does it happen with the previous versions: 25.1, 24.2?\r\n\r\nDoes it happen, when antivirus tools/software are disabled (or the datadir is added to the excluded folders)?",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29255#issuecomment-1894391840",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29255"
    }
  ]
}