{
  "type": "issue",
  "issue": {
    "id": 2661291513,
    "node_id": "I_kwDOABII586eoBX5",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/31293",
    "number": 31293,
    "state": "open",
    "state_reason": null,
    "title": "Discover() will not run if listening on any address with an explicit bind=0.0.0.0",
    "body": "### Current behaviour\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/85bcfeea23568053ea09013fb8263fa1511d7123/src/init.cpp#L1890-L1892\r\n\r\n`Discover()` will run only if we are listening on all addresses (`bind_on_any` is `true`). However if `-bind=0.0.0.0:port` is explicitly given, then `bind_on_any` will end up being `false` and thus `Discover()` will not run when it should.\r\n\r\n### Expected behaviour\r\n\r\nDiscover own addresses even if `-bind=0.0.0.0:port` is given.\r\n\r\n### Steps to reproduce\r\n\r\nUse `-bind=0.0.0.0:port`.\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster@85bcfeea23568053ea09013fb8263fa1511d7123\r\n\r\n### Operating system and version\r\n\r\nWindows 3.11\r\n\r\n### Background\r\n\r\nSee https://github.com/bitcoin/bitcoin/issues/31133#issuecomment-2477231557",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 349312277,
        "node_id": "MDU6TGFiZWwzNDkzMTIyNzc=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/good%20first%20issue",
        "name": "good first issue",
        "color": "c2e0c6",
        "default": true
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 6,
    "created_at": "2024-11-15T08:54:02Z",
    "updated_at": "2024-11-26T21:21:14Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 2478721606,
      "node_id": "IC_kwDOABII586TvkpG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2478721606",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-15T12:37:09Z",
      "updated_at": "2024-11-15T12:37:09Z",
      "author_association": "MEMBER",
      "body": "> Operating system and version\n>\n> Windows 3.11\n\nDoubt.\n\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31293#issuecomment-2478721606",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293"
    },
    {
      "event": "commented",
      "id": 2488958085,
      "node_id": "IC_kwDOABII586UWnyF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2488958085",
      "actor": {
        "login": "andremralves",
        "id": 71379045,
        "node_id": "MDQ6VXNlcjcxMzc5MDQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/71379045?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andremralves",
        "html_url": "https://github.com/andremralves",
        "followers_url": "https://api.github.com/users/andremralves/followers",
        "following_url": "https://api.github.com/users/andremralves/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andremralves/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andremralves/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andremralves/subscriptions",
        "organizations_url": "https://api.github.com/users/andremralves/orgs",
        "repos_url": "https://api.github.com/users/andremralves/repos",
        "events_url": "https://api.github.com/users/andremralves/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andremralves/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-20T15:54:26Z",
      "updated_at": "2024-11-20T15:54:26Z",
      "author_association": "NONE",
      "body": "Is `Discover()` working properly? I tried running `test_runner.py --ihave1111and2222 feature_bind_port_discover.py` and the test didn't find the `1.1.1.1` and `2.2.2.2` addresses. In the commit where `feature-bind_port_discover.py` was added, the test works as expected and passes. Actually, I think, now, only ipv6 addresses are being discovered.",
      "user": {
        "login": "andremralves",
        "id": 71379045,
        "node_id": "MDQ6VXNlcjcxMzc5MDQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/71379045?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andremralves",
        "html_url": "https://github.com/andremralves",
        "followers_url": "https://api.github.com/users/andremralves/followers",
        "following_url": "https://api.github.com/users/andremralves/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andremralves/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andremralves/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andremralves/subscriptions",
        "organizations_url": "https://api.github.com/users/andremralves/orgs",
        "repos_url": "https://api.github.com/users/andremralves/repos",
        "events_url": "https://api.github.com/users/andremralves/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andremralves/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31293#issuecomment-2488958085",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293"
    },
    {
      "event": "commented",
      "id": 2497792487,
      "node_id": "IC_kwDOABII586U4Unn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2497792487",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-25T11:47:29Z",
      "updated_at": "2024-11-25T11:53:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "@andremralves good observation! `Discover()` seems to be ok, but the test has rotten because it is not run regularly in CI (it was clear upfront that this may happen, but still it is better to have it than not, maybe it can be made to be run by CI if we can `ifconfig lo:0 1.1.1.1/32 up` in the CI?).\r\n\r\nAt some point the test framework was changed to add some `-bind`s:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/2638fdb4f934be96b7c798dbac38ea5ab8a6374a/test/functional/test_framework/test_node.py#L231-L232\r\n\r\nand this messes with `feature_bind_port_discover.py`'s requirement to not have any `-bind`.\r\n\r\nHere is a patch to fix the test:\r\n\r\n<details>\r\n<summary>[patch] fix feature_bind_port_discover.py</summary>\r\n\r\n```diff\r\n--- i/test/functional/feature_bind_port_discover.py\r\n+++ w/test/functional/feature_bind_port_discover.py\r\n@@ -24,20 +24,38 @@ ADDR2 = '2.2.2.2'\r\n \r\n BIND_PORT = 31001\r\n \r\n class BindPortDiscoverTest(BitcoinTestFramework):\r\n     def set_test_params(self):\r\n         # Avoid any -bind= on the command line. Force the framework to avoid adding -bind=127.0.0.1.\r\n-        self.setup_clean_chain = True\r\n         self.bind_to_localhost_only = False\r\n         self.extra_args = [\r\n             ['-discover', f'-port={BIND_PORT}'], # bind on any\r\n             ['-discover', f'-bind={ADDR1}:{BIND_PORT}'],\r\n         ]\r\n         self.num_nodes = len(self.extra_args)\r\n \r\n+    def setup_network(self):\r\n+        \"\"\"\r\n+        BitcoinTestFramework.setup_network() without connecting node0 to node1,\r\n+        we don't need that and avoiding it makes the test faster.\r\n+        \"\"\"\r\n+        self.setup_nodes()\r\n+\r\n+    def setup_nodes(self):\r\n+        \"\"\"\r\n+        BitcoinTestFramework.setup_nodes() with overriden has_explicit_bind=True\r\n+        for each node and without the chain setup.\r\n+        \"\"\"\r\n+        self.add_nodes(self.num_nodes, self.extra_args)\r\n+        # TestNode.start() will add -bind= to extra_args if has_explicit_bind is\r\n+        # False. We do not want any -bind= thus set has_explicit_bind to True.\r\n+        for node in self.nodes:\r\n+            node.has_explicit_bind = True\r\n+        self.start_nodes()\r\n+\r\n     def add_options(self, parser):\r\n         parser.add_argument(\r\n             \"--ihave1111and2222\", action='store_true', dest=\"ihave1111and2222\",\r\n             help=f\"Run the test, assuming {ADDR1} and {ADDR2} are configured on the machine\",\r\n             default=False)\r\n \r\n```\r\n</details>\r\n\r\nThis boils down to the same issue: that `Discover()` is only ran if `args.GetArgs(\"-bind\").empty() && args.GetArgs(\"-whitebind\").empty()` is `true`, but it should also be ran if `-bind=0.0.0.0:port` is used or even if `-bind=0.0.0.0:port -bind=127.0.0.1:torport=onion` is used.\r\n\r\nSo, if that is fixed, then the above fix to the test will not be necessary.\r\n\r\nEdit: I guess the logic in `init.cpp` should be: run `Discover()` if:\r\n* no `-bind` is used (because then we will bind automatically to `0.0.0.0`); or\r\n* `-bind` is used and any of the given `-bind` options is for `0.0.0.0` or `::`.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31293#issuecomment-2497792487",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293"
    },
    {
      "event": "mentioned",
      "id": 15419398972,
      "node_id": "MEE_lADOABII586eoBX5zwAAAAOXEVs8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15419398972",
      "actor": {
        "login": "andremralves",
        "id": 71379045,
        "node_id": "MDQ6VXNlcjcxMzc5MDQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/71379045?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andremralves",
        "html_url": "https://github.com/andremralves",
        "followers_url": "https://api.github.com/users/andremralves/followers",
        "following_url": "https://api.github.com/users/andremralves/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andremralves/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andremralves/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andremralves/subscriptions",
        "organizations_url": "https://api.github.com/users/andremralves/orgs",
        "repos_url": "https://api.github.com/users/andremralves/repos",
        "events_url": "https://api.github.com/users/andremralves/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andremralves/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-25T11:47:31Z"
    },
    {
      "event": "subscribed",
      "id": 15419398992,
      "node_id": "SE_lADOABII586eoBX5zwAAAAOXEVtQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15419398992",
      "actor": {
        "login": "andremralves",
        "id": 71379045,
        "node_id": "MDQ6VXNlcjcxMzc5MDQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/71379045?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andremralves",
        "html_url": "https://github.com/andremralves",
        "followers_url": "https://api.github.com/users/andremralves/followers",
        "following_url": "https://api.github.com/users/andremralves/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andremralves/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andremralves/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andremralves/subscriptions",
        "organizations_url": "https://api.github.com/users/andremralves/orgs",
        "repos_url": "https://api.github.com/users/andremralves/repos",
        "events_url": "https://api.github.com/users/andremralves/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andremralves/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-25T11:47:31Z"
    },
    {
      "event": "commented",
      "id": 2497815300,
      "node_id": "IC_kwDOABII586U4aME",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2497815300",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-25T11:56:22Z",
      "updated_at": "2024-11-25T11:56:22Z",
      "author_association": "MEMBER",
      "body": "> At some point the test framework was changed to add some -binds:\r\n\r\nThat was done in #22729.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31293#issuecomment-2497815300",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293"
    },
    {
      "event": "labeled",
      "id": 15420628946,
      "node_id": "LE_lADOABII586eoBX5zwAAAAOXJB_S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15420628946",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-25T13:18:57Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "labeled",
      "id": 15420628960,
      "node_id": "LE_lADOABII586eoBX5zwAAAAOXJB_g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15420628960",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-25T13:18:57Z",
      "label": {
        "name": "good first issue",
        "color": "c2e0c6"
      }
    },
    {
      "event": "commented",
      "id": 2500256851,
      "node_id": "IC_kwDOABII586VBuRT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2500256851",
      "actor": {
        "login": "evgeniytar",
        "id": 11766612,
        "node_id": "MDQ6VXNlcjExNzY2NjEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/11766612?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/evgeniytar",
        "html_url": "https://github.com/evgeniytar",
        "followers_url": "https://api.github.com/users/evgeniytar/followers",
        "following_url": "https://api.github.com/users/evgeniytar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/evgeniytar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/evgeniytar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/evgeniytar/subscriptions",
        "organizations_url": "https://api.github.com/users/evgeniytar/orgs",
        "repos_url": "https://api.github.com/users/evgeniytar/repos",
        "events_url": "https://api.github.com/users/evgeniytar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/evgeniytar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-26T10:36:42Z",
      "updated_at": "2024-11-26T10:36:42Z",
      "author_association": "NONE",
      "body": "Applied patch provided by @vasild and test run. But seems like `Discover()` indeed doesn't see IPv4. I printed `self.nodes[0].getnetworkinfo()['localaddresses']` before first assertion and it shows only IPv6 addresses. \r\n\r\n```python3\r\n[{'address': '2a0d:3344:34da:6410::fc5', 'port': 31001, 'score': 1}, {'address': '2a0d:3344:34da:6410:80:af5f:cf76:f4b9', 'port': 31001, 'score': 1}, {'address': '2a0d:3344:34da:6410:8b8:ca87:43b2:565f', 'port': 31001, 'score': 1}]\r\n```\r\n\r\nSecond node displays empty array",
      "user": {
        "login": "evgeniytar",
        "id": 11766612,
        "node_id": "MDQ6VXNlcjExNzY2NjEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/11766612?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/evgeniytar",
        "html_url": "https://github.com/evgeniytar",
        "followers_url": "https://api.github.com/users/evgeniytar/followers",
        "following_url": "https://api.github.com/users/evgeniytar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/evgeniytar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/evgeniytar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/evgeniytar/subscriptions",
        "organizations_url": "https://api.github.com/users/evgeniytar/orgs",
        "repos_url": "https://api.github.com/users/evgeniytar/repos",
        "events_url": "https://api.github.com/users/evgeniytar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/evgeniytar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31293#issuecomment-2500256851",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293"
    },
    {
      "event": "mentioned",
      "id": 15433949532,
      "node_id": "MEE_lADOABII586eoBX5zwAAAAOX72Fc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15433949532",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-26T10:36:44Z"
    },
    {
      "event": "subscribed",
      "id": 15433949552,
      "node_id": "SE_lADOABII586eoBX5zwAAAAOX72Fw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15433949552",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-26T10:36:44Z"
    },
    {
      "event": "commented",
      "id": 2501957591,
      "node_id": "IC_kwDOABII586VINfX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2501957591",
      "actor": {
        "login": "evgeniytar",
        "id": 11766612,
        "node_id": "MDQ6VXNlcjExNzY2NjEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/11766612?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/evgeniytar",
        "html_url": "https://github.com/evgeniytar",
        "followers_url": "https://api.github.com/users/evgeniytar/followers",
        "following_url": "https://api.github.com/users/evgeniytar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/evgeniytar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/evgeniytar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/evgeniytar/subscriptions",
        "organizations_url": "https://api.github.com/users/evgeniytar/orgs",
        "repos_url": "https://api.github.com/users/evgeniytar/repos",
        "events_url": "https://api.github.com/users/evgeniytar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/evgeniytar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-26T21:21:13Z",
      "updated_at": "2024-11-26T21:21:13Z",
      "author_association": "NONE",
      "body": "It looks like `Discover()` skips loopback interfaces intentionally, it's done by this line of code\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/src/common/netif.cpp#L290\r\n\r\nOnce it commented the test passes. Maybe this test needs another routable address setup... ",
      "user": {
        "login": "evgeniytar",
        "id": 11766612,
        "node_id": "MDQ6VXNlcjExNzY2NjEy",
        "avatar_url": "https://avatars.githubusercontent.com/u/11766612?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/evgeniytar",
        "html_url": "https://github.com/evgeniytar",
        "followers_url": "https://api.github.com/users/evgeniytar/followers",
        "following_url": "https://api.github.com/users/evgeniytar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/evgeniytar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/evgeniytar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/evgeniytar/subscriptions",
        "organizations_url": "https://api.github.com/users/evgeniytar/orgs",
        "repos_url": "https://api.github.com/users/evgeniytar/repos",
        "events_url": "https://api.github.com/users/evgeniytar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/evgeniytar/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31293#issuecomment-2501957591",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31293"
    }
  ]
}