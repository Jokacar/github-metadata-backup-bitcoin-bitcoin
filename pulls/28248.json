{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248",
    "id": 1469278636,
    "node_id": "PR_kwDOABII585Xk2ms",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28248",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28248.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28248.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
    "number": 28248,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "p2p: peer connection bug fixes",
    "user": {
      "login": "jonatack",
      "id": 2415484,
      "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jonatack",
      "html_url": "https://github.com/jonatack",
      "followers_url": "https://api.github.com/users/jonatack/followers",
      "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
      "organizations_url": "https://api.github.com/users/jonatack/orgs",
      "repos_url": "https://api.github.com/users/jonatack/repos",
      "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/jonatack/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This pull fixes several peer connection bugs in our p2p code, along with the logging that uncovered them:\r\n\r\n1. Fix detection of inbound peer connections in `GetAddedNodeInfo`.\r\n\r\n2. Fix addnode CJDNS peers not detected in `GetAddedNodeInfo`, causing `ThreadOpenAddedConnections` to continually retry to connect to them and RPC `getaddednodeinfo` incorrectly showing them as not connected.\r\n\r\n3. Fix `ThreadOpenConnections` not detecting inbound CJDNS connections and making automatic outbound connections to them.\r\n\r\n4. Fix detection of already connected peers in `AlreadyConnectedToAddress()`.\r\n\r\n5. Fix detection of already connected peers when making outbound connections in `ConnectNode`.\r\n\r\n6. Fix accepting inbound connection requests in `CreateNodeFromAcceptedSocket` from peers already connected to us.\r\n\r\n7. Fix making automatic outbound connections in `ThreadOpenConnections` to addnode peers, in order not to allocate our limited outbound slots to them and to ensure addnode connections benefit from their intended protections. Our addnode logic usually connects the addnode peers before the automatic outbound logic does, but not always, as a connection race can occur (see the commit message for further details and mainnet examples). When an addnode peer is connected as an automatic outbound peer and is the only connection we have to a network, it can be protected by our new outbound network-specific eviction logic and persist in the \"wrong role\". Fix these issues by checking if the selected address is an addnode peer in our automatic outbound connection logic.\r\n\r\nUpdate the p2p logging with the improvements that allowed seeing/understanding/debugging the current behavior. Please see the commit messages for details.\r\n\r\nSimplify `MaybePickPreferredNetwork` to return `std::optional`, make it a const class method, and add Clang thread-safety analysis annotation and related assertions.\r\n",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2023-08-09T20:46:20Z",
    "updated_at": "2023-10-24T18:55:56Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "354aeff64e326e24ec310c170677d2fe6981fbe2",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "jonatack:2023-08-network-diversity",
      "ref": "2023-08-network-diversity",
      "sha": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 173103842,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNzMxMDM4NDI=",
        "name": "bitcoin",
        "full_name": "jonatack/bitcoin",
        "owner": {
          "login": "jonatack",
          "id": 2415484,
          "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/jonatack",
          "html_url": "https://github.com/jonatack",
          "followers_url": "https://api.github.com/users/jonatack/followers",
          "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
          "organizations_url": "https://api.github.com/users/jonatack/orgs",
          "repos_url": "https://api.github.com/users/jonatack/repos",
          "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/jonatack/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/jonatack/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/jonatack/bitcoin",
        "archive_url": "https://api.github.com/repos/jonatack/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/jonatack/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/jonatack/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/jonatack/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/jonatack/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/jonatack/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/jonatack/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/jonatack/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/jonatack/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/jonatack/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/jonatack/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/jonatack/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/jonatack/bitcoin/events",
        "forks_url": "https://api.github.com/repos/jonatack/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/jonatack/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/jonatack/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/jonatack/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/jonatack/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/jonatack/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/jonatack/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/jonatack/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/jonatack/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/jonatack/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/jonatack/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/jonatack/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/jonatack/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/jonatack/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/jonatack/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/jonatack/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:jonatack/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/jonatack/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/jonatack/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/jonatack/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/jonatack/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/jonatack/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/jonatack/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/jonatack/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/jonatack/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/jonatack/bitcoin/hooks",
        "svn_url": "https://github.com/jonatack/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 226286,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-10-24T18:55:29Z",
        "created_at": "2019-02-28T11:57:18Z",
        "updated_at": "2023-09-27T13:47:03Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "43704827b4c9c178f3651a005e26c09103cd4189",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35867,
        "stargazers_count": 71889,
        "watchers_count": 71889,
        "size": 243746,
        "default_branch": "master",
        "open_issues_count": 630,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-10-24T18:55:35Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-10-24T18:38:31Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 200,
    "deletions": 88,
    "changed_files": 8,
    "commits": 15,
    "review_comments": 58,
    "comments": 13
  },
  "events": [
    {
      "event": "commented",
      "id": 1672125136,
      "node_id": "IC_kwDOABII585jqprQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1672125136",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-09T20:46:24Z",
      "updated_at": "2023-10-24T18:55:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28248).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [brunoerg](https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1777344970) |\n| Stale ACK | [vasild](https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1695032063) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28155](https://github.com/bitcoin/bitcoin/pull/28155) (net: improves addnode / m_added_nodes logic by sr-gi)\n* [#27114](https://github.com/bitcoin/bitcoin/pull/27114) (p2p: Allow whitelisting outgoing connections by brunoerg)\n* [#27052](https://github.com/bitcoin/bitcoin/pull/27052) (test: rpc: add last block announcement time to getpeerinfo result by LarryRuane)\n* [#25832](https://github.com/bitcoin/bitcoin/pull/25832) (tracing: network connection tracepoints by 0xB10C)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1672125136",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "labeled",
      "id": 10052074961,
      "node_id": "LE_lADOABII585t6QbyzwAAAAJXJn3R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10052074961",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-09T20:46:26Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "ready_for_review",
      "id": 10053521088,
      "node_id": "RFRE_lADOABII585t6QbyzwAAAAJXPI7A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10053521088",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-10T00:56:27Z"
    },
    {
      "event": "commented",
      "id": 1672930044,
      "node_id": "IC_kwDOABII585jtuL8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1672930044",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-10T10:03:44Z",
      "updated_at": "2023-08-10T10:03:44Z",
      "author_association": "MEMBER",
      "body": "The title \"p2p: outbound network diversity improvements\" makes it sound like you are improving on the logic for making outbound connections but really you are refactoring and adding additional logging. Would you mind making the title more accurate?\r\n\r\n> Please see the commit messages for details.\r\n\r\nThe PR description is added to the merge commit, so in my opinion it makes sense to have at least a summary of what the PR does in the description.\r\n\r\nFrom our [docs](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#creating-the-pull-request):\r\n```\r\nThe body of the pull request should contain sufficient description of what the patch does, and even more importantly, why, with \r\njustification and reasoning. You should include references to any discussions (for example, other issues or mailing list\r\ndiscussions).\r\n```",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1672930044",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "renamed",
      "id": 10064305065,
      "node_id": "RTE_lADOABII585t6QbyzwAAAAJX4Rup",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10064305065",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-10T21:49:12Z",
      "rename": {
        "from": "p2p: outbound network diversity improvements",
        "to": "p2p: outbound network diversity refactoring and logging improvements"
      }
    },
    {
      "event": "commented",
      "id": 1673966621,
      "node_id": "IC_kwDOABII585jxrQd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1673966621",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-10T21:52:33Z",
      "updated_at": "2023-08-10T21:52:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "@dergoegge updated",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1673966621",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "mentioned",
      "id": 10064322432,
      "node_id": "MEE_lADOABII585t6QbyzwAAAAJX4V-A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10064322432",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-10T21:52:33Z"
    },
    {
      "event": "subscribed",
      "id": 10064322441,
      "node_id": "SE_lADOABII585t6QbyzwAAAAJX4V-J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10064322441",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-10T21:52:33Z"
    },
    {
      "event": "commented",
      "id": 1674241624,
      "node_id": "IC_kwDOABII585jyuZY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1674241624",
      "actor": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-11T05:51:05Z",
      "updated_at": "2023-08-11T05:51:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "This mostly seems like pointless refactoring (changing a `switch` to an `||` of two functions that themselves have switches). Doesn't seem worth the review effort to me.",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1674241624",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "unsubscribed",
      "id": 10067581798,
      "node_id": "UE_lADOABII585t6QbyzwAAAAJYExtm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10067581798",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-11T09:15:28Z"
    },
    {
      "event": "renamed",
      "id": 10074674878,
      "node_id": "RTE_lADOABII585t6QbyzwAAAAJYf1a-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10074674878",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-12T00:11:14Z",
      "rename": {
        "from": "p2p: outbound network diversity refactoring and logging improvements",
        "to": "p2p: outbound logic, logging and refactoring improvements"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10074710430,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJYf-Ge",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10074710430",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-12T00:18:37Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-12T00:51:42Z",
      "updated_at": "2023-08-12T00:51:42Z",
      "source": {
        "issue": {
          "id": 1612097868,
          "node_id": "PR_kwDOABII585LZ5fL",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27213",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27213/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27213/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27213/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27213",
          "number": 27213,
          "state": "closed",
          "state_reason": null,
          "title": "p2p: Diversify automatic outbound connections with respect to networks",
          "body": "This is joint work with mzumsande. \r\n\r\nThis is a proposal to diversify outbound connections with respect to reachable networks. The existing logic evaluates peers for connection based purely on the frequency of available addresses in `AddrMan`. This PR adds logic to automatically connect to alternate reachable networks and adds eviction logic that protects one existing connection to each network. \r\n\r\nFor instance, if `AddrMan` is populated primarily with IPv4 and IPv6 addresses and only a handful of onion addresses, it is likely that we won't establish any automatic outbound connections to Tor, even if we're capable of doing so. For smaller networks like CJDNS, this is even more of an issue and often requires adding manual peers to ensure regularly being connected to the network.\r\n\r\nConnecting to multiple networks improves resistance to eclipse attacks for individual nodes. It also benefits the entire p2p network by increasing partition resistance and privacy in general. \r\n\r\nThe automatic connections to alternate networks is done defensively, by first filling all outbound slots with random addresses (as in the status quo) and then adding additional peers from reachable networks the node is currently not connected to. This approach ensures that outbound slots are not left unfilled while attempting to connect to a network that may be unavailable due to a technical issue or misconfiguration that bitcoind cannot detect.\r\n\r\nOnce an additional peer is added and we have one more outbound connection than we want, outbound eviction ensures that peers are protected if they are the only ones for their network.\r\n\r\nManual connections are also taken into account: If a user already establishes manual connections to a trusted peer from a network, there is no longer a need to make extra efforts to ensure we also have an automatic connection to it (although this may of course happen by random selection). \r\n",
          "user": {
            "login": "amitiuttarwar",
            "id": 1500952,
            "node_id": "MDQ6VXNlcjE1MDA5NTI=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/amitiuttarwar",
            "html_url": "https://github.com/amitiuttarwar",
            "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
            "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
            "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
            "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
            "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 49,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27213",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27213",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27213.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27213.patch"
          },
          "closed_at": "2023-08-06T16:45:11Z",
          "created_at": "2023-03-06T19:46:54Z",
          "updated_at": "2023-08-12T02:26:29Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-12T09:02:30Z",
      "updated_at": "2023-08-12T09:02:30Z",
      "source": {
        "issue": {
          "id": 1837671308,
          "node_id": "PR_kwDOABII585XPvx_",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28222",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28222/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28222/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28222/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28222",
          "number": 28222,
          "state": "open",
          "state_reason": null,
          "title": "Use shared_ptr for CNode inside CConnman",
          "body": "Switch to using smart pointers to `CNode`s inside of `CConnman`.\r\n\r\nCurrently we are manually refcounting CNodes which is potentially error-prone and makes operations such as deleting them from multiple threads difficult without introducing new locks or other synchronisation operations (see https://github.com/bitcoin/bitcoin/pull/27912).\r\n\r\nSwitch to using `std::shared_ptr` references to `CNode`s inside of `m_nodes` and `m_nodes_disconnected` to give us better memory safety today, and in the future allow `AttemptToEvictConnection` (and optionally other sites) to safely synchronously disconnect nodes when needed.\r\n\r\nOpening as draft for now as I want to both gauge feedback on the approach, and see which PRs this may conflict with (#27213?) before moving it forwards.\r\n\r\nCC @vasild ",
          "user": {
            "login": "willcl-ark",
            "id": 6606587,
            "node_id": "MDQ6VXNlcjY2MDY1ODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/willcl-ark",
            "html_url": "https://github.com/willcl-ark",
            "followers_url": "https://api.github.com/users/willcl-ark/followers",
            "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
            "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
            "repos_url": "https://api.github.com/users/willcl-ark/repos",
            "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 12,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28222",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28222",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28222.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28222.patch"
          },
          "created_at": "2023-08-05T09:45:10Z",
          "updated_at": "2023-09-03T14:10:44Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-12T10:36:52Z",
      "updated_at": "2023-08-12T10:36:52Z",
      "source": {
        "issue": {
          "id": 1821123378,
          "node_id": "PR_kwDOABII585WYCBk",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28155",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28155/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28155/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28155/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28155",
          "number": 28155,
          "state": "open",
          "state_reason": null,
          "title": "net: improves addnode / m_added_nodes logic",
          "body": "## Rationale\r\n\r\nCurrently, `addnode` has a couple of corner cases that allow it to either connect to the same peer more than once, hence wasting outbound connection slots, or add redundant information to `m_added_nodes`, hence making Bitcoin iterate through useless data on a regular basis.\r\n\r\n### Connecting to the same node more than once\r\n\r\nIn general, connecting to the same node more than once is something we should try to prevent. Currently, this is possible via `addnode` in two different ways:\r\n\r\n1. Calling `addnode` more than once in a short time period, using two equivalent but distinct addresses\r\n2. Calling `addnode add` using an IP, and `addnode onetry` after with an address that resolved to the same IP\r\n\r\nFor the former, the issue boils down to `CConnman::ThreadOpenAddedConnections` calling `CConnman::GetAddedNodeInfo` once, and iterating over the result to open connections (`CConman::OpenNetworkConnection`) on the same loop for all addresses.`CConnman::ConnectNode` only checks a single address, at random, when resolving from a hostname, and uses it to check whether we are already connected to it.\r\n\r\nAn example to test this would be calling:\r\n\r\n```\r\nbitcoin-cli addnode \"127.0.0.1:port\" add\r\nbitcoin-cli addnode \"localhost:port\" add\r\n```\r\n\r\nAnd check how it allows us to perform both connections some times, and some times it fails.\r\n\r\nThe latter boils down to the same issue, but takes advantage of `onetry` bypassing the `CConnman::ThreadOpenAddedConnections` logic and calling `CConnman::OpenNetworkConnection` straightaway. A way to test this would be:\r\n\r\n```\r\nbitcoin-cli addnode \"127.0.0.1:port\" add\r\nbitcoin-cli addnode \"localhost:port\" onetry\r\n```\r\n\r\n### Adding the same peer with two different, yet equivalent, addresses\r\n\r\nThe current implementation of `addnode` is pretty naive when checking what data is added to `m_added_nodes`. Given the collection stores strings, the checks at `CConnman::AddNode()` basically check wether the exact provided string is already in the collection. If so, the data is rejected, otherwise, it is accepted. However, ips can be formatted in several ways that would bypass those checks. \r\n\r\nTwo examples would be `127.0.0.1` being equal to `127.1` and `[::1]` being equal to `[0:0:0:0:0:0:0:1]`. Adding any pair of these will be allowed by the rpc command, and both will be reported as connected by `getaddednodeinfo`, given they map to the same `CService`. \r\n\r\nThis is less severe than the previous issue, since even tough both nodes are reported as connected by `getaddednodeinfo`, there is only a single connection to them (as properly reported by `getpeerinfo`). However, this adds redundant data to `m_added_nodes`, which is undesirable.\r\n\r\n\r\n### Parametrize `CConnman::GetAddedNodeInfo`\r\nFinally, this PR also parametrizes `CConnman::GetAddedNodeInfo` so it returns either all added nodes info, or only info about the nodes we are **not** connected to. This method is used both for `rpc`, in `getaddednodeinfo`, in which we are reporting all data to the user, so the former applies, and to check what nodes we are not connected to, in `CConnman::ThreadOpenAddedConnections`, in which we are currently returning more data than needed and then actively filtering using `CService.fConnected()`\r\n",
          "user": {
            "login": "sr-gi",
            "id": 6665628,
            "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sr-gi",
            "html_url": "https://github.com/sr-gi",
            "followers_url": "https://api.github.com/users/sr-gi/followers",
            "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
            "organizations_url": "https://api.github.com/users/sr-gi/orgs",
            "repos_url": "https://api.github.com/users/sr-gi/repos",
            "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sr-gi/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 11,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28155",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28155",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28155.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28155.patch"
          },
          "created_at": "2023-07-25T20:47:02Z",
          "updated_at": "2023-10-24T15:27:15Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-12T15:20:09Z",
      "updated_at": "2023-08-12T15:20:09Z",
      "source": {
        "issue": {
          "id": 1588322692,
          "node_id": "PR_kwDOABII585KKgel",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27114",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27114/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27114/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27114/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27114",
          "number": 27114,
          "state": "open",
          "state_reason": null,
          "title": "p2p: Allow whitelisting outgoing connections",
          "body": "Revives #17167. It allows whitelisting outgoing connections.\r\n\r\nI previously revived it with #26441, however, some reviewers told me it's better to keep them splitted to facilitate reviews and probably having this one merged first since we need it to improve functional tests. \r\n",
          "user": {
            "login": "brunoerg",
            "id": 19480819,
            "node_id": "MDQ6VXNlcjE5NDgwODE5",
            "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/brunoerg",
            "html_url": "https://github.com/brunoerg",
            "followers_url": "https://api.github.com/users/brunoerg/followers",
            "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
            "organizations_url": "https://api.github.com/users/brunoerg/orgs",
            "repos_url": "https://api.github.com/users/brunoerg/repos",
            "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/brunoerg/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 22,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27114",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27114",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27114.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27114.patch"
          },
          "created_at": "2023-02-16T20:31:10Z",
          "updated_at": "2023-10-24T16:15:07Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-12T16:42:09Z",
      "updated_at": "2023-08-12T16:42:09Z",
      "source": {
        "issue": {
          "id": 1471685707,
          "node_id": "PR_kwDOABII585EFGFt",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26621",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26621/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26621/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26621/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26621",
          "number": 26621,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Continue moving application data from CNode to Peer",
          "body": "This PR picks up a subset of changes from #24970 and additionally moves `m_bip152_highbandwith{to,from}`, `nTimeOffset`, `nVersion`, `m_greates_common_version`.",
          "user": {
            "login": "dergoegge",
            "id": 8077169,
            "node_id": "MDQ6VXNlcjgwNzcxNjk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dergoegge",
            "html_url": "https://github.com/dergoegge",
            "followers_url": "https://api.github.com/users/dergoegge/followers",
            "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
            "organizations_url": "https://api.github.com/users/dergoegge/orgs",
            "repos_url": "https://api.github.com/users/dergoegge/repos",
            "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/dergoegge/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26621",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26621",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26621.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26621.patch"
          },
          "closed_at": "2023-09-28T20:06:13Z",
          "created_at": "2022-12-01T17:26:32Z",
          "updated_at": "2023-09-28T20:06:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "renamed",
      "id": 10080790763,
      "node_id": "RTE_lADOABII585t6QbyzwAAAAJY3Kjr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10080790763",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-13T23:14:22Z",
      "rename": {
        "from": "p2p: outbound logic, logging and refactoring improvements",
        "to": "p2p: bugfixes, logic and logging improvements"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10080809757,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJY3PMd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10080809757",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-13T23:25:05Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10080870828,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJY3eGs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10080870828",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-14T00:03:53Z"
    },
    {
      "event": "commented",
      "id": 1676644423,
      "node_id": "IC_kwDOABII585j75BH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1676644423",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-14T04:12:30Z",
      "updated_at": "2023-08-14T04:12:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated to propose fixes for the issues observed with the improved logging.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1676644423",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10081846362,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJY7MRa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10081846362",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-14T04:18:40Z"
    },
    {
      "event": "reviewed",
      "id": 1576881142,
      "node_id": "PRR_kwDOABII585d_Uv2",
      "url": null,
      "actor": null,
      "commit_id": "4b9774dd49359cc0a807f1dc57b96d182330a4a1",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1576881142",
      "submitted_at": "2023-08-14T13:58:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-15T10:21:46Z",
      "updated_at": "2023-08-15T10:21:46Z",
      "source": {
        "issue": {
          "id": 1573080079,
          "node_id": "PR_kwDOABII585JXcpb",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27052",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27052/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27052/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27052/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27052",
          "number": 27052,
          "state": "open",
          "state_reason": null,
          "title": "test: rpc: add last block announcement time to getpeerinfo result",
          "body": "This PR adds `last_block_announcement` to the per-peer `getpeerinfo` RPC result. This is the most recent time that this peer was the first to notify our node of a new block (one that we didn't already know about), or zero if this peer has never been the first to notify us of a new block. This timestamp already exists internally and is used for stale-tip eviction logic; this PR exposes it at the RPC layer.\r\n\r\nThis PR started out as a suggestion for additional test coverage, see https://github.com/bitcoin/bitcoin/pull/26172#issuecomment-1259678260. It turned out that the easiest way to test (already-merged) #26172 is to add this field to `getpeerinfo` and have a functional test verify its value. But it may also be useful to have this result in its own right, similar to that RPC's existing `last_block` field -- it indicates something about the quality of our peers. It allows one to predict which peer will be evicted when the stale tip logic activates. (I'm not sure if that would be useful, but it may be.)\r\n\r\nThe functional test added here fails without #26172, which is the main goal.\r\n\r\nThis PR does not test the actual stale-tip eviction logic; that's difficult to do with a functional test. But it does test the correctness of the timestamp that the eviction logic depends on. #23352 is an attempt to test the eviction logic using a unit test, it's not ready to be merged yet. I think having both kinds of tests would be beneficial.",
          "user": {
            "login": "LarryRuane",
            "id": 8321330,
            "node_id": "MDQ6VXNlcjgzMjEzMzA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8321330?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/LarryRuane",
            "html_url": "https://github.com/LarryRuane",
            "followers_url": "https://api.github.com/users/LarryRuane/followers",
            "following_url": "https://api.github.com/users/LarryRuane/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/LarryRuane/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/LarryRuane/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/LarryRuane/subscriptions",
            "organizations_url": "https://api.github.com/users/LarryRuane/orgs",
            "repos_url": "https://api.github.com/users/LarryRuane/repos",
            "events_url": "https://api.github.com/users/LarryRuane/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/LarryRuane/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27052",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27052",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27052.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27052.patch"
          },
          "created_at": "2023-02-06T18:32:56Z",
          "updated_at": "2023-10-24T16:17:36Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10099580214,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJZ-102",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10099580214",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-15T17:27:13Z"
    },
    {
      "event": "commented",
      "id": 1679547504,
      "node_id": "IC_kwDOABII585kG9xw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1679547504",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-15T20:16:18Z",
      "updated_at": "2023-08-15T20:16:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated for @vasild's review feedback to change `m_added_nodes` from a vector to an unordered set (https://github.com/bitcoin/bitcoin/pull/28248/commits/3f4a1f0bc98159f86d910227fd57d05d10bb8889), which simplifies and speeds up the `AddNode()` and `RemoveAddedNode()` methods along with the commit that follows it, `p2p: do not make automatic outbound connections to addnode peers` (048e1af).",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1679547504",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "mentioned",
      "id": 10101061269,
      "node_id": "MEE_lADOABII585t6QbyzwAAAAJaEfaV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10101061269",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-15T20:16:18Z"
    },
    {
      "event": "subscribed",
      "id": 10101061276,
      "node_id": "SE_lADOABII585t6QbyzwAAAAJaEfac",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10101061276",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-15T20:16:18Z"
    },
    {
      "event": "labeled",
      "id": 10101709660,
      "node_id": "LE_lADOABII585t6QbyzwAAAAJaG9tc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10101709660",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-15T21:41:47Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-16T02:50:31Z",
      "updated_at": "2023-08-16T02:50:31Z",
      "source": {
        "issue": {
          "id": 1579504924,
          "node_id": "PR_kwDOABII585Js_-Z",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27071/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27071",
          "number": 27071,
          "state": "closed",
          "state_reason": null,
          "title": "Handle CJDNS from LookupSubNet()",
          "body": "`LookupSubNet()` would treat addresses that start with `fc` as IPv6 even if `-cjdnsreachable` is set. This creates the following problems where it is called:\r\n\r\n* `NetWhitelistPermissions::TryParse()`: otherwise `-whitelist=` fails to white list CJDNS addresses: when a CJDNS peer connects to us, it will be matched against IPv6 `fc...` subnet and the match will never succeed.\r\n\r\n* `BanMapFromJson()`: CJDNS bans are stored as just IPv6 addresses in `banlist.json`. Upon reading from disk they have to be converted back to CJDNS, otherwise, after restart, a ban entry like (`fc00::1`, IPv6) would not match a peer (`fc00::1`, CJDNS).\r\n    \r\n* `RPCConsole::unbanSelectedNode()`: in the GUI the ban entries go through `CSubNet::ToString()` and back via `LookupSubNet()`. Then it must match whatever is stored in `BanMan`, otherwise it is impossible to unban via the GUI.\r\n\r\nThese were uncovered by https://github.com/bitcoin/bitcoin/pull/26859.\r\n\r\nThus, flip the result of `LookupSubNet()` to CJDNS if the network base address starts with `fc` and `-cjdnsreachable` is set. Since subnetting/masking does not make sense for CJDNS (the address is \"random\" bytes, like Tor and I2P, there is no hierarchy) treat `fc.../mask` as an invalid `CSubNet`.\r\n\r\nTo achieve that, `MaybeFlipIPv6toCJDNS()` has to be moved from `net` to `netbase` and thus also `IsReachable()`. In the process of moving `IsReachable()`, `SetReachable()` and `vfLimited[]` encapsulate those in a class.",
          "user": {
            "login": "vasild",
            "id": 266751,
            "node_id": "MDQ6VXNlcjI2Njc1MQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/vasild",
            "html_url": "https://github.com/vasild",
            "followers_url": "https://api.github.com/users/vasild/followers",
            "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
            "organizations_url": "https://api.github.com/users/vasild/orgs",
            "repos_url": "https://api.github.com/users/vasild/repos",
            "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/vasild/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/60",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/60",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/60/labels",
            "id": 9286970,
            "node_id": "MI_kwDOABII584AjbU6",
            "number": 60,
            "state": "open",
            "title": "26.0",
            "description": "",
            "creator": {
              "login": "fanquake",
              "id": 863730,
              "node_id": "MDQ6VXNlcjg2MzczMA==",
              "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/fanquake",
              "html_url": "https://github.com/fanquake",
              "followers_url": "https://api.github.com/users/fanquake/followers",
              "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
              "organizations_url": "https://api.github.com/users/fanquake/orgs",
              "repos_url": "https://api.github.com/users/fanquake/repos",
              "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/fanquake/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 3,
            "closed_issues": 101,
            "created_at": "2023-04-15T11:36:05Z",
            "updated_at": "2023-10-24T09:32:59Z"
          },
          "locked": false,
          "comments": 24,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27071",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27071",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27071.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27071.patch"
          },
          "closed_at": "2023-10-19T16:49:02Z",
          "created_at": "2023-02-10T11:20:45Z",
          "updated_at": "2023-10-23T12:24:09Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1580868907,
      "node_id": "PRR_kwDOABII585eOiUr",
      "url": null,
      "actor": null,
      "commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1580868907",
      "submitted_at": "2023-08-16T15:58:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-24T02:08:35Z",
      "updated_at": "2023-08-24T02:08:35Z",
      "source": {
        "issue": {
          "id": 1864182144,
          "node_id": "PR_kwDOABII585YpKGv",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28331",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28331/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28331/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28331/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28331",
          "number": 28331,
          "state": "closed",
          "state_reason": null,
          "title": "BIP324 integration",
          "body": "Part of #27634.\r\n\r\nThis makes BIP324 support feature complete, through a (default off) `-v2transport` option for enabling V2 connections. If it is enabled:\r\n* The `NODE_P2P_V2` service flag (*1 << 11*) is advertized.\r\n* Inbound connections can use V1 or V2 (automatically detected based on the protocol used by the peer)\r\n* V2 connections are used on outbound when the `NODE_P2P_V2` service is available (or the new `use_v2` parameter is set on the `addnode` RPC).\r\n* V2 outbound connections that instantly fail get retried as V1.\r\n\r\nThere are two new RPC fields, `\"transport_protocol_type\"` and `\"session_id\"`, in `getpeerinfo`.\r\n",
          "user": {
            "login": "sipa",
            "id": 548488,
            "node_id": "MDQ6VXNlcjU0ODQ4OA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sipa",
            "html_url": "https://github.com/sipa",
            "followers_url": "https://api.github.com/users/sipa/followers",
            "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
            "organizations_url": "https://api.github.com/users/sipa/orgs",
            "repos_url": "https://api.github.com/users/sipa/repos",
            "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sipa/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            },
            {
              "id": 493267104,
              "node_id": "MDU6TGFiZWw0OTMyNjcxMDQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20release%20note",
              "name": "Needs release note",
              "description": "",
              "color": "d2db6d",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 35,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28331",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28331",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28331.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28331.patch"
          },
          "closed_at": "2023-10-03T09:13:13Z",
          "created_at": "2023-08-24T00:25:16Z",
          "updated_at": "2023-10-11T08:57:21Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1695734301,
      "node_id": "IC_kwDOABII585lEtod",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1695734301",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-28T13:48:10Z",
      "updated_at": "2023-08-28T13:48:10Z",
      "author_association": "MEMBER",
      "body": "Needs rebase if still relevant",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1695734301",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10290438673,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJlW6IR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10290438673",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-06T03:49:29Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10291591959,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJlbTsX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10291591959",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-06T06:20:18Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-06T07:05:04Z",
      "updated_at": "2023-09-06T07:05:04Z",
      "source": {
        "issue": {
          "id": 1337499811,
          "node_id": "PR_kwDOABII5849G1u9",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25832",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25832/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25832/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25832/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25832",
          "number": 25832,
          "state": "open",
          "state_reason": null,
          "title": "tracing: network connection tracepoints",
          "body": "This adds five new tracepoints with documentation and tests for network connections:\r\n\r\n- established connections with `net:inbound_connection` and `net:outbound_connection`\r\n- closed connections (both closed by us or by the peer) with `net:closed_connnection`\r\n- inbound connections that we choose to evict with `net:evicted_inbound_connection`\r\n- connections that are misbehaving and punished with `net:misbehaving_connection`\r\n\r\nI've been using these tracepoints for a few months now to monitor connection lifetimes, re-connection frequency by IP and netgroup, misbehavior, peer discouragement, and eviction and more. Together with the two existing P2P message tracepoints they allow for a good overview of local P2P network activity. Also sort-of addresses https://github.com/bitcoin/bitcoin/pull/22006#discussion_r636775863. \r\n\r\nI've been back and forth on which arguments to include. For example, `net:evicted_connection` could also include some of the eviction metrics like e.g. `last_block_time`, `min_ping_time`, ... but I've left them out for now. If wanted, this can be added here or in a follow-up. I've tried to minimize a potential performance impact by measuring executed instructions with `gdb` where possible (method described [here](https://github.com/bitcoin/bitcoin/pull/23724#issuecomment-996919963)). I don't think a few hundred extra instructions are too crucial, as connection opens/closes aren't too frequent (compared to e.g. P2P messages).   Note: e.g. `CreateNodeFromAcceptedSocket()` usually executes between 80k and 90k instructions for each new inbound connection.\r\n\r\n| tracepoint                 \t| instructions                                           \t|\r\n|----------------------------\t|--------------------------------------------------------\t|\r\n| net:inbound_connection     \t| 390 ins                                                \t|\r\n| net:outbound_connection    \t| between 700 and 1000 ins                                     \t|\r\n| net:closed_connnection     \t| 473 ins                                                \t|\r\n| net:evicted_inbound_connection     \t| not measured; likely similar to net:closed_connnection \t|\r\n| net:misbehaving_connection | not measured                                           \t|\r\n\r\nAlso added a bpftrace (tested with v0.14.1) `log_p2p_connections.bt` example script that produces output similar to:\r\n```\r\nAttaching 6 probes...\r\nLogging opened, closed, misbehaving, and evicted P2P connections\r\nOUTBOUND conn to 127.0.0.1:15287: id=0, type=block-relay-only, network=0, total_out=1\r\nINBOUND conn from 127.0.0.1:45324: id=1, type=inbound, network=0, total_in=1\r\nMISBEHAVING conn id=1, score_before=0, score_increase=20, message='getdata message size = 50001', threshold_exceeded=false\r\nCLOSED conn to 127.0.0.1:15287: id=0, type=block-relay-only, network=0, established=1231006505\r\nEVICTED conn to 127.0.0.1:45324: id=1, type=inbound, network=0, established=1612312312\r\n```",
          "user": {
            "login": "0xB10C",
            "id": 19157360,
            "node_id": "MDQ6VXNlcjE5MTU3MzYw",
            "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/0xB10C",
            "html_url": "https://github.com/0xB10C",
            "followers_url": "https://api.github.com/users/0xB10C/followers",
            "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
            "organizations_url": "https://api.github.com/users/0xB10C/orgs",
            "repos_url": "https://api.github.com/users/0xB10C/repos",
            "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/0xB10C/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 13,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25832",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25832",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25832.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25832.patch"
          },
          "created_at": "2022-08-12T17:18:21Z",
          "updated_at": "2023-10-24T16:47:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10297773274,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJly4za",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10297773274",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-06T15:48:26Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10297946297,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJlzjC5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10297946297",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-06T16:04:54Z"
    },
    {
      "event": "commented",
      "id": 1708918026,
      "node_id": "IC_kwDOABII585l3AUK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1708918026",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-06T18:51:57Z",
      "updated_at": "2023-09-06T18:51:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased, updated with improved logging, and fixes for additional issues (71828e0c, f126d041, a1b1a24) observed with the logging or suggested by @vasild (thanks!)",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1708918026",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "mentioned",
      "id": 10299473703,
      "node_id": "MEE_lADOABII585t6QbyzwAAAAJl5X8n",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10299473703",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-06T18:51:57Z"
    },
    {
      "event": "subscribed",
      "id": 10299473712,
      "node_id": "SE_lADOABII585t6QbyzwAAAAJl5X8w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10299473712",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-06T18:51:57Z"
    },
    {
      "event": "unlabeled",
      "id": 10301711711,
      "node_id": "UNLE_lADOABII585t6QbyzwAAAAJmB6Vf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10301711711",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-07T00:57:21Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-07T01:14:35Z",
      "updated_at": "2023-09-07T01:14:35Z",
      "source": {
        "issue": {
          "id": 1884665382,
          "node_id": "PR_kwDOABII585Zt8Rw",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28423",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28423/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28423/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28423/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28423",
          "number": 28423,
          "state": "closed",
          "state_reason": null,
          "title": "kernel: Remove protocol.h/netaddress.h/compat.h from kernel headers",
          "body": "This removes the non-consensus critical `protocol.h` and `netaddress.h` headers from the kernel headers. With this patch, they are no longer required to include in order to use the libbitcoinkernel library. This also allows for the removal of the `compat.h` header from the kernel headers.\r\n\r\nAs an added future benefit it also reduces the number of of kernel headers that include the platform specific `bitcoin-config.h`.\r\n\r\nFor those interested, the currently required kernel headers can be inspected visually with the [sourcetrail](https://github.com/CoatiSoftware/Sourcetrail) tool by looking at the required includes of `bitcoin-chainstate.cpp`.\r\n\r\n---\r\n\r\nThis is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587), namely its stage 1 step 3: Decouple most non-consensus headers from libbitcoinkernel.\r\n",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 13,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28423",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28423",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28423.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28423.patch"
          },
          "closed_at": "2023-09-14T10:12:08Z",
          "created_at": "2023-09-06T19:58:47Z",
          "updated_at": "2023-09-14T19:56:56Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "subscribed",
      "id": 10311085566,
      "node_id": "SE_lADOABII585t6QbyzwAAAAJmlq3-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10311085566",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-07T19:37:39Z"
    },
    {
      "event": "renamed",
      "id": 10324365366,
      "node_id": "RTE_lADOABII585t6QbyzwAAAAJnYVA2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10324365366",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-09T14:03:18Z",
      "rename": {
        "from": "p2p: bugfixes, logic and logging improvements",
        "to": "p2p: peer connection bug fixes, logic and logging improvements"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-10T08:37:14Z",
      "updated_at": "2023-09-10T08:37:14Z",
      "source": {
        "issue": {
          "id": 1191033673,
          "node_id": "PR_kwDOABII5841jAnn",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24748",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24748/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24748/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24748/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24748",
          "number": 24748,
          "state": "open",
          "state_reason": null,
          "title": "test/BIP324: functional tests for v2 P2P encryption",
          "body": "This PR introduces support for v2 P2P encryption(BIP 324) in the existing functional test framework and adds functional tests for the same.\r\n\r\nIt's built on top of:\r\n* #28374\r\n\r\nOnly the last 13 commits belong to this PR. (from `[rpc/net] Allow v2 p2p support in addconnection`  to `[test] Check whether v2 TestNode performs downgrading` )\r\n\r\n### commits overview\r\n1. introduces a new class `EncryptedP2PState` to store the keys, functions for performing the initial v2 handshake and encryption/decryption.\r\n3. this class is used by `P2PConnection` in inbound/outbound connections to perform the initial v2 handshake before the v1 version handshake. Only after the initial v2 handshake is performed do application layer P2P messages(version, verack etc..) get exchanged. (in a v2 connection)\r\n    - `v2_state` is the object of class `EncryptedP2PState` in `P2PConnection` used to store its keys, session-id etc.\r\n    - a node [advertising](https://github.com/stratospher/blogosphere/blob/main/integration_test_bip324.md#advertising-to-support-v2-p2p) support for  v2 P2P is different from a node actually [supporting v2 P2P](https://github.com/stratospher/blogosphere/blob/main/integration_test_bip324.md#supporting-v2-p2p) (differ when false advertisement of services occur)\r\n        - introduce a boolean variable `supports_v2_p2p` in `P2PConnection` to denote if it supports v2 P2P.\r\n        - introduce a boolean variable `advertises_v2_p2p` to denote whether `P2PConnection` which mimics peer behaviour advertises V2 P2P support. Default option is `False`.\r\n    - In the test framework, you can create Inbound and Outbound connections to `TestNode`\r\n        1. During **Inbound Connections**, `P2PConnection` is the initiator [`TestNode` <--------- `P2PConnection`]\r\n            - Case 1:\r\n                - if the `TestNode` advertises/signals v2 P2P support (means `self.nodes[i]` set up with `\"-v2transport=1\"`), different behaviour will be exhibited based on whether:\r\n                    1. `P2PConnection` supports v2 P2P\r\n                    2. `P2PConnection` does not support v2 P2P\r\n               - In a real world scenario, the initiator node would intrinsically know if they support v2 P2P based on whatever code they choose to run. However, in the test scenario where we mimic peer behaviour, we have no way of knowing if `P2PConnection` should support v2 P2P or not. So `supports_v2_p2p` boolean variable is used as an option to enable support for v2 P2P in `P2PConnection`.\r\n              - Since the `TestNode` advertises v2 P2P support (using \"-v2transport=1\"), our initiator `P2PConnection` would send:\r\n                1. (if the `P2PConnection` supports v2 P2P) ellswift + garbage bytes to initiate the connection\r\n                2. (if the `P2PConnection` does not support v2 P2P) version message to initiate the connection\r\n           - Case 2:\r\n                - if the `TestNode` doesn't signal v2 P2P support; `P2PConnection` being the initiator would send version message to initiate a connection.\r\n       2. During **Outbound Connections** [TestNode --------> P2PConnection]\r\n           - initiator `TestNode` would send:\r\n                - (if the `P2PConnection` advertises v2 P2P) ellswift + garbage bytes to initiate the connection\r\n                - (if the `P2PConnection` advertises v2 P2P) version message to initiate the connection\r\n          - Suppose `P2PConnection` advertises v2 P2P support when it actually doesn't support v2 P2P (false advertisement scenario)\r\n               - `TestNode` sends ellswift + garbage bytes\r\n               - `P2PConnection` receives but can't process it and disconnects.\r\n               - `TestNode` then tries using v1 P2P and sends version message\r\n               - `P2PConnection` receives/processes this successfully and they communicate on v1 P2P\r\n\r\n4. the encrypted P2P messages follow a different format - 3 byte length + 1-13 byte message_type + payload + 16 byte MAC\r\n5. includes support for testing decoy messages and v2 connection downgrade(using false advertisement - when a v2 node makes an outbound connection to a node which doesn't support v2 but is advertised as v2 by some malicious\r\nintermediary)\r\n\r\n### run the tests\r\n* functional test - `test/functional/p2p_v2_encrypted.py` `test/functional/p2p_v2_earlykeyresponse.py`\r\n\r\nI'm also super grateful to @ dhruv for his really valuable feedback on this branch.\r\nAlso written a more elaborate explanation here - https://github.com/stratospher/blogosphere/blob/main/integration_test_bip324.md",
          "user": {
            "login": "stratospher",
            "id": 44024636,
            "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
            "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stratospher",
            "html_url": "https://github.com/stratospher",
            "followers_url": "https://api.github.com/users/stratospher/followers",
            "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
            "organizations_url": "https://api.github.com/users/stratospher/orgs",
            "repos_url": "https://api.github.com/users/stratospher/repos",
            "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/stratospher/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24748",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24748",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24748.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24748.patch"
          },
          "created_at": "2022-04-03T20:14:51Z",
          "updated_at": "2023-10-19T15:53:18Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-10T16:23:30Z",
      "updated_at": "2023-09-10T16:23:30Z",
      "source": {
        "issue": {
          "id": 1886408410,
          "node_id": "PR_kwDOABII585Zz1qR",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28429",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28429/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28429/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28429/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28429",
          "number": 28429,
          "state": "open",
          "state_reason": null,
          "title": "Do not log p2p bip61 reject messages, improve log, add tests",
          "body": "...per the IRC discussion around https://www.erisian.com.au/bitcoin-core-dev/log-2023-09-03.html#l-345.\r\n\r\nRationale for not logging the bip61 reject messages (as unknown commands):\r\n\r\n- they are not unknown and were valid before v20; see ##15437\r\n\r\n- peers have been observed that send a high number of these messages (I've seen 10k-20k messages per day from a single peer), thereby flooding the log when `-debug=net`\r\n\r\n- another option would be to continue logging bip61 reject messages, but with the `trace` log level instead\r\n\r\nRationale for improving the log output when receiving unknown commands:\r\n\r\n- logging only a peer id isn't of much help after the fact in understanding the source of the message and debugging what/why\r\n\r\n",
          "user": {
            "login": "jonatack",
            "id": 2415484,
            "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonatack",
            "html_url": "https://github.com/jonatack",
            "followers_url": "https://api.github.com/users/jonatack/followers",
            "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
            "organizations_url": "https://api.github.com/users/jonatack/orgs",
            "repos_url": "https://api.github.com/users/jonatack/repos",
            "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonatack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28429",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28429",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28429.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28429.patch"
          },
          "created_at": "2023-09-07T18:46:55Z",
          "updated_at": "2023-09-13T16:00:09Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10327942143,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJnl-P_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10327942143",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-11T01:33:00Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-11T15:55:00Z",
      "updated_at": "2023-09-11T15:55:00Z",
      "source": {
        "issue": {
          "id": 1890275529,
          "node_id": "PR_kwDOEEET9c5aAsPE",
          "url": "https://api.github.com/repos/bitcoin-core/gui/issues/754",
          "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
          "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/754/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/754/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/754/events",
          "html_url": "https://github.com/bitcoin-core/gui/pull/754",
          "number": 754,
          "state": "closed",
          "state_reason": null,
          "title": "Add BIP324-specific labels to peer details",
          "body": "This PR adds BIP324-specific labels to the peer details widget:\r\n-  a transport version\r\n- a session id\r\n\r\nSee: https://github.com/bitcoin/bitcoin/pull/28331#issuecomment-1693239025.\r\n\r\n![image](https://github.com/bitcoin-core/gui/assets/32963518/0e0b4c92-dde0-4b2e-b285-a2c69ef09efc)",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin-core/gui/milestones/11",
            "html_url": "https://github.com/bitcoin-core/gui/milestone/11",
            "labels_url": "https://api.github.com/repos/bitcoin-core/gui/milestones/11/labels",
            "id": 9994442,
            "node_id": "MI_kwDOEEET9c4AmIDK",
            "number": 11,
            "state": "open",
            "title": "26.0",
            "description": "",
            "creator": {
              "login": "hebasto",
              "id": 32963518,
              "node_id": "MDQ6VXNlcjMyOTYzNTE4",
              "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/hebasto",
              "html_url": "https://github.com/hebasto",
              "followers_url": "https://api.github.com/users/hebasto/followers",
              "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
              "organizations_url": "https://api.github.com/users/hebasto/orgs",
              "repos_url": "https://api.github.com/users/hebasto/repos",
              "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/hebasto/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 7,
            "created_at": "2023-10-03T09:23:05Z",
            "updated_at": "2023-10-23T14:16:09Z"
          },
          "locked": false,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/gui/pulls/754",
            "html_url": "https://github.com/bitcoin-core/gui/pull/754",
            "diff_url": "https://github.com/bitcoin-core/gui/pull/754.diff",
            "patch_url": "https://github.com/bitcoin-core/gui/pull/754.patch"
          },
          "closed_at": "2023-10-05T07:37:49Z",
          "created_at": "2023-09-11T11:16:49Z",
          "updated_at": "2023-10-06T02:15:34Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1716403390,
      "node_id": "IC_kwDOABII585mTjy-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1716403390",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-12T20:43:38Z",
      "updated_at": "2023-09-12T20:43:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated with further logging improvements. The p2p peer connection bugfixes here are unchanged from the previous push. It may be a good idea to tag this for v26?",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1716403390",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "reviewed",
      "id": 1623186191,
      "node_id": "PRR_kwDOABII585gv9sP",
      "url": null,
      "actor": null,
      "commit_id": "a4887e4d7db8d247d118155360d435c34cb0adb9",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Just had a short look and some questions, will review properly in the next weeks.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1623186191",
      "submitted_at": "2023-09-12T22:13:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
    },
    {
      "event": "unsubscribed",
      "id": 10352868774,
      "node_id": "UE_lADOABII585t6QbyzwAAAAJpFD2m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10352868774",
      "actor": {
        "login": "9cat",
        "id": 1379110,
        "node_id": "MDQ6VXNlcjEzNzkxMTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1379110?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/9cat",
        "html_url": "https://github.com/9cat",
        "followers_url": "https://api.github.com/users/9cat/followers",
        "following_url": "https://api.github.com/users/9cat/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/9cat/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/9cat/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/9cat/subscriptions",
        "organizations_url": "https://api.github.com/users/9cat/orgs",
        "repos_url": "https://api.github.com/users/9cat/repos",
        "events_url": "https://api.github.com/users/9cat/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/9cat/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-12T23:14:58Z"
    },
    {
      "event": "labeled",
      "id": 10370583833,
      "node_id": "LE_lADOABII585t6QbyzwAAAAJqIo0Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10370583833",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T10:38:34Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1719220940,
      "node_id": "IC_kwDOABII585meTrM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1719220940",
      "actor": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T10:50:47Z",
      "updated_at": "2023-09-14T10:50:47Z",
      "author_association": "MEMBER",
      "body": "If you're fixing bugs, it would be very beneficial to also add tests at the same time.",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1719220940",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-21T19:32:40Z",
      "updated_at": "2023-09-21T19:32:40Z",
      "source": {
        "issue": {
          "id": 1738163453,
          "node_id": "PR_kwDOABII585SADUs",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27804",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27804/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27804/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27804/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27804",
          "number": 27804,
          "state": "closed",
          "state_reason": null,
          "title": "init: deduplicate added connections",
          "body": "Fixes #5299\r\n\r\nPreviously connections may be added to both `m_added_nodes` (via `-addnode`) and `m_specified_outgoing` (via `-connect`) if duplicated in config.\r\n\r\nDuring init this can see duplicate connections made to the same outbound node as `ThreadOpenConnections` and `ThreadOpenAddedConnections` will both try to make the same connection at the same time.\r\n\r\nDeduplicate the two vectors as a basic sanity check before starting connection manager.",
          "user": {
            "login": "willcl-ark",
            "id": 6606587,
            "node_id": "MDQ6VXNlcjY2MDY1ODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/willcl-ark",
            "html_url": "https://github.com/willcl-ark",
            "followers_url": "https://api.github.com/users/willcl-ark/followers",
            "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
            "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
            "repos_url": "https://api.github.com/users/willcl-ark/repos",
            "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27804",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27804",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27804.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27804.patch"
          },
          "closed_at": "2023-09-25T17:39:28Z",
          "created_at": "2023-06-02T13:01:57Z",
          "updated_at": "2023-09-25T17:39:29Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10612651020,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJ4kDQM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10612651020",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-11T03:43:43Z"
    },
    {
      "event": "unlabeled",
      "id": 10613283710,
      "node_id": "UNLE_lADOABII585t6QbyzwAAAAJ4mdt-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10613283710",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-11T05:33:46Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-11T05:43:10Z",
      "updated_at": "2023-10-11T05:43:10Z",
      "source": {
        "issue": {
          "id": 1929625027,
          "node_id": "PR_kwDOABII585cFNAp",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28605",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28605/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28605/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28605/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28605",
          "number": 28605,
          "state": "open",
          "state_reason": null,
          "title": "Fix typos and suggest doing so before branch-off",
          "body": "We probably don't want too many pull requests that just fix a typo. At the same time, if we never fix them people will start ignore the linter all-together. So my suggestion would be to do this before branch-off.\r\n\r\nThis PR fixes typos found by lint-spelling.py using codespell 2.2.6, and adds a note to the release process.\r\n\r\nOur CI linter job uses codespell 2.2.5 and found fewer typos that I did locally. In any case it's happy now.",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 15,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28605",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28605",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28605.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28605.patch"
          },
          "created_at": "2023-10-06T07:48:58Z",
          "updated_at": "2023-10-24T15:30:51Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-11T06:17:58Z",
      "updated_at": "2023-10-11T06:17:58Z",
      "source": {
        "issue": {
          "id": 1893223976,
          "node_id": "PR_kwDOABII585aKu0D",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28463",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28463/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28463/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28463/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28463",
          "number": 28463,
          "state": "open",
          "state_reason": null,
          "title": "p2p: Increase inbound capacity for block-relay only connections",
          "body": "This is joint work with amitiuttarwar.\r\n\r\n**Current PR: #28464** with the first few commits, I will keep this in draft for now.\r\n\r\nSee issue #28462 for a broader discussion on increasing the number of block-relay-only connections independent of this particular implementation proposal.\r\n\r\nWe suggest to increase the number of inbound slots allocated to block-relay-only peers by increasing the default maximum connections from 125 to 200, with 60% of inbound slots accessible for tx-relaying peers.\r\nThis is a prerequisite for being able to increase the default number of outgoing block-relay-only peers later, because the current inbound capacity of the network is not sufficient.\r\nIn order to account for incoming tx-relaying peers separately from incoming block-relay peers, changes to the inbound eviction logic are necessary.\r\n\r\nSee the next post in this thread for a more detailed explanation and motivation of the changes.\r\n\r\n### TODOs\r\n*  add test coverage for the new `-inboundrelaypercent` parameter\r\n",
          "user": {
            "login": "mzumsande",
            "id": 48763452,
            "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mzumsande",
            "html_url": "https://github.com/mzumsande",
            "followers_url": "https://api.github.com/users/mzumsande/followers",
            "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
            "organizations_url": "https://api.github.com/users/mzumsande/orgs",
            "repos_url": "https://api.github.com/users/mzumsande/repos",
            "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/mzumsande/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28463",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28463",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28463.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28463.patch"
          },
          "created_at": "2023-09-12T20:36:39Z",
          "updated_at": "2023-10-19T22:29:45Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1673614690,
      "node_id": "PRR_kwDOABII585jwVVi",
      "url": null,
      "actor": null,
      "commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Reviewed as of 2a9db3a16a93d497bfe496b7c35edac975ee81d2. Good fixes! LGTM modulo the comments below.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1673614690",
      "submitted_at": "2023-10-12T11:16:08Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10672940338,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJ8KCUy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10672940338",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T04:10:01Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10673000323,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJ8KQ-D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10673000323",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T04:21:23Z"
    },
    {
      "event": "labeled",
      "id": 10673001177,
      "node_id": "LE_lADOABII585t6QbyzwAAAAJ8KRLZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10673001177",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T04:21:33Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10673086637,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAJ8KmCt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10673086637",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T04:39:00Z"
    },
    {
      "event": "commented",
      "id": 1765675944,
      "node_id": "IC_kwDOABII585pPhOo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1765675944",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T05:07:12Z",
      "updated_at": "2023-10-17T05:07:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you, @vasild! I've pushed a WIP checkpoint update covering all your suggestions. Will return to it tomorrow and happy to take any further suggestions you may have.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1765675944",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "mentioned",
      "id": 10673243013,
      "node_id": "MEE_lADOABII585t6QbyzwAAAAJ8LMOF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10673243013",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T05:07:12Z"
    },
    {
      "event": "subscribed",
      "id": 10673243029,
      "node_id": "SE_lADOABII585t6QbyzwAAAAJ8LMOV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10673243029",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T05:07:12Z"
    },
    {
      "event": "unlabeled",
      "id": 10673605094,
      "node_id": "UNLE_lADOABII585t6QbyzwAAAAJ8Mknm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10673605094",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T06:07:54Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1682305820,
      "node_id": "PRR_kwDOABII585kRfMc",
      "url": null,
      "actor": null,
      "commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Looks good as of 44ceac2ef9 (the last commit needs to be dispersed).",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1682305820",
      "submitted_at": "2023-10-17T13:40:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
    },
    {
      "event": "labeled",
      "id": 10715605934,
      "node_id": "LE_lADOABII585t6QbyzwAAAAJ-syuu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10715605934",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-19T18:26:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10748810402,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAKArdSi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10748810402",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T03:44:43Z"
    },
    {
      "event": "commented",
      "id": 1776503589,
      "node_id": "IC_kwDOABII585p40sl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1776503589",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T04:01:12Z",
      "updated_at": "2023-10-24T13:34:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased and updated to take the latest feedback from @vasild.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1776503589",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "mentioned",
      "id": 10748921814,
      "node_id": "MEE_lADOABII585t6QbyzwAAAAKAr4fW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10748921814",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T04:01:12Z"
    },
    {
      "event": "subscribed",
      "id": 10748921820,
      "node_id": "SE_lADOABII585t6QbyzwAAAAKAr4fc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10748921820",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T04:01:12Z"
    },
    {
      "event": "labeled",
      "id": 10749430560,
      "node_id": "LE_lADOABII585t6QbyzwAAAAKAt0sg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10749430560",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T05:45:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10749430779,
      "node_id": "UNLE_lADOABII585t6QbyzwAAAAKAt0v7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10749430779",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T05:45:45Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ3NDYyMzE4MDk4MTRmNTI2OTVhMzc2YmQ3N2Y0ZDA2NjIyMjg5YTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d746231809814f52695a376bd77f4d06622289a4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d746231809814f52695a376bd77f4d06622289a4",
      "tree": {
        "sha": "505e5190c2563e082f8a45dd6bbfcc7b5cc24b2a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/505e5190c2563e082f8a45dd6bbfcc7b5cc24b2a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/004367dba8a3e8520b871f27945a0dad7820bb3a",
          "sha": "004367dba8a3e8520b871f27945a0dad7820bb3a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/004367dba8a3e8520b871f27945a0dad7820bb3a"
        }
      ],
      "message": "p2p, bugfix: detect all inbound connections in GetAddedNodeInfo()\n\nDue to their potentially different port numbers, inbound peers can be overlooked\nin CConnman::GetAddedNodeInfo() when comparing CServices, i.e. both addr and port.\n\nFix this by comparing CNetAddr instances, i.e. addr only, for inbound peers.\n\nCo-authored-by: Jon Atack <jon@atack.com>",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T13:02:18Z"
      },
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2023-09-06T00:06:32Z"
      },
      "sha": "d746231809814f52695a376bd77f4d06622289a4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVmNTNlNmMwNzNkMDg5NTk4YTQ0NDQzNmQ3NGUxZjVjMTYxNTAzMGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f53e6c073d089598a444436d74e1f5c1615030b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5f53e6c073d089598a444436d74e1f5c1615030b",
      "tree": {
        "sha": "58c459cc6b922b48c46cc58b23a4bfa6eb66a461",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/58c459cc6b922b48c46cc58b23a4bfa6eb66a461"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d746231809814f52695a376bd77f4d06622289a4",
          "sha": "d746231809814f52695a376bd77f4d06622289a4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d746231809814f52695a376bd77f4d06622289a4"
        }
      ],
      "message": "p2p, bugfix: detect addnode cjdns peers in GetAddedNodeInfo()\n\nAddnode (manual) peers connected to us via the cjdns network are currently not\ndetected by CConnman::GetAddedNodeInfo(), i.e. fConnected is always false.\n\nThis causes the following issues:\n\n- RPC `getaddednodeinfo` incorrectly shows them as not connected\n\n- CConnman::ThreadOpenAddedConnections() continually retries to connect them",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T13:02:18Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-08-11T22:12:42Z"
      },
      "sha": "5f53e6c073d089598a444436d74e1f5c1615030b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDEyZmY4MDc3Y2U5ZWVkMTJmYjcxZWVkZmY0YjAxOGIwOWYyMjUyY2Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/12ff8077ce9eed12fb71eedff4b018b09f2252cd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/12ff8077ce9eed12fb71eedff4b018b09f2252cd",
      "tree": {
        "sha": "89d2fe991700a00c13701c925d1731323bea01a4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/89d2fe991700a00c13701c925d1731323bea01a4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5f53e6c073d089598a444436d74e1f5c1615030b",
          "sha": "5f53e6c073d089598a444436d74e1f5c1615030b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5f53e6c073d089598a444436d74e1f5c1615030b"
        }
      ],
      "message": "p2p, bugfix: detect inbound cjdns peers in AlreadyConnectedToAddress()\n\nCurrently ThreadOpenConnections() does not detect inbound cjdns peers that we\nare already connected to when it calls AlreadyConnectedToAddress().\n\nFix this by calling MaybeFlipIPv6toCJDNS before the search.",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T13:02:18Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-08-13T15:59:49Z"
      },
      "sha": "12ff8077ce9eed12fb71eedff4b018b09f2252cd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk1ZDhhZDNiOWEwYWI2MjE3NDNmMzI3ODNiNDBkMWQyM2QyNWJmMTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/95d8ad3b9a0ab621743f32783b40d1d23d25bf18",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/95d8ad3b9a0ab621743f32783b40d1d23d25bf18",
      "tree": {
        "sha": "8295c6d3865d00a6dc753259b0ca52ec3821410d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8295c6d3865d00a6dc753259b0ca52ec3821410d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/12ff8077ce9eed12fb71eedff4b018b09f2252cd",
          "sha": "12ff8077ce9eed12fb71eedff4b018b09f2252cd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/12ff8077ce9eed12fb71eedff4b018b09f2252cd"
        }
      ],
      "message": "refactor: move locks from CConnman::FindNode methods to their callers\n\nDereferencing the pointer result after FindNode* has released m_nodes_mutex is unsafe,\nso we currently have to add unneeded recursive locks before calling FindNode*.\n\nFix this by acquiring the mutex before calling FindNode* rather than inside them.\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T13:02:18Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-23T21:50:03Z"
      },
      "sha": "95d8ad3b9a0ab621743f32783b40d1d23d25bf18"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkxNzk2YWQyNzI2OTc4ODAxZmIzM2UyMGEyMTNlZmMxNmIyMmI5OWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91796ad2726978801fb33e20a213efc16b22b99e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/91796ad2726978801fb33e20a213efc16b22b99e",
      "tree": {
        "sha": "9a7dd56e71b82c5b461a68e44b7494e882f6df66",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9a7dd56e71b82c5b461a68e44b7494e882f6df66"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/95d8ad3b9a0ab621743f32783b40d1d23d25bf18",
          "sha": "95d8ad3b9a0ab621743f32783b40d1d23d25bf18",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/95d8ad3b9a0ab621743f32783b40d1d23d25bf18"
        }
      ],
      "message": "refactor: allow CConnman::FindNode methods to filter by inbound status",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T13:02:18Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-23T22:05:55Z"
      },
      "sha": "91796ad2726978801fb33e20a213efc16b22b99e"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10753708205,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAKA-JCt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10753708205",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T13:08:58Z"
    },
    {
      "event": "renamed",
      "id": 10753963555,
      "node_id": "RTE_lADOABII585t6QbyzwAAAAKA_HYj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10753963555",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T13:30:53Z",
      "rename": {
        "from": "p2p: peer connection bug fixes, logic and logging improvements",
        "to": "p2p: peer connection bug fixes"
      }
    },
    {
      "event": "reviewed",
      "id": 1695032063,
      "node_id": "PRR_kwDOABII585lCCL_",
      "url": null,
      "actor": null,
      "commit_id": "f196b096f55f909e2bb63d5ff43bc3418c0ebbab",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK f196b096f55f909e2bb63d5ff43bc3418c0ebbab",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1695032063",
      "submitted_at": "2023-10-24T14:23:35Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
    },
    {
      "event": "reviewed",
      "id": 1695037517,
      "node_id": "PRR_kwDOABII585lCDhN",
      "url": null,
      "actor": null,
      "commit_id": "2ec971326d3de33455a626b8189e0375fc88061f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1695037517",
      "submitted_at": "2023-10-24T14:25:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
    },
    {
      "event": "reviewed",
      "id": 1695050402,
      "node_id": "PRR_kwDOABII585lCGqi",
      "url": null,
      "actor": null,
      "commit_id": "f196b096f55f909e2bb63d5ff43bc3418c0ebbab",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1695050402",
      "submitted_at": "2023-10-24T14:30:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
    },
    {
      "event": "commented",
      "id": 1777344970,
      "node_id": "IC_kwDOABII585p8CHK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1777344970",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T14:31:22Z",
      "updated_at": "2023-10-24T14:32:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\ntests for the bug fixes would be helpful",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1777344970",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28248"
    },
    {
      "event": "reviewed",
      "id": 1695165495,
      "node_id": "PRR_kwDOABII585lCiw3",
      "url": null,
      "actor": null,
      "commit_id": "f196b096f55f909e2bb63d5ff43bc3418c0ebbab",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#pullrequestreview-1695165495",
      "submitted_at": "2023-10-24T15:04:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNiODJhOTI4NWNjYjU4YTFmOGZlZjQxYzRjZTY2NGM1ZmU0NmZjOTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb82a9285ccb58a1f8fef41c4ce664c5fe46fc94",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cb82a9285ccb58a1f8fef41c4ce664c5fe46fc94",
      "tree": {
        "sha": "a3131879907a43a13800f9d9ffd51c319bc178ab",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a3131879907a43a13800f9d9ffd51c319bc178ab"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/91796ad2726978801fb33e20a213efc16b22b99e",
          "sha": "91796ad2726978801fb33e20a213efc16b22b99e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/91796ad2726978801fb33e20a213efc16b22b99e"
        }
      ],
      "message": "p2p, bugfix: correctly detect connected peers in AlreadyConnectedToAddress()\n\nusing the following logic:\n\nIf we are about to open an outbound connection\n  - for all outbound connections, compare the peer's address and port\n  - for all inbound connections and provided we're not making a manual connection,\n    compare only the address and ignore the port\n\nIf we are about to accept an inbound connection\n  - for all connections, both inbound and outbound, compare only the address and\n    ignore the port\n\nFix the logging to be actually useful by stating which peer is already connected,\nand further improve it to provide full details for debugging purposes.\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:42:56Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-23T22:21:04Z"
      },
      "sha": "cb82a9285ccb58a1f8fef41c4ce664c5fe46fc94"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMyZDMyMjY2NTNjMWZlZTNjMTA1NjI3ZjM4MmMwNzIwYjA0NTlkMjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c2d3226653c1fee3c105627f382c0720b0459d22",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c2d3226653c1fee3c105627f382c0720b0459d22",
      "tree": {
        "sha": "5d5548d6da6d1943b28491a370632e925145b87a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5d5548d6da6d1943b28491a370632e925145b87a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cb82a9285ccb58a1f8fef41c4ce664c5fe46fc94",
          "sha": "cb82a9285ccb58a1f8fef41c4ce664c5fe46fc94",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cb82a9285ccb58a1f8fef41c4ce664c5fe46fc94"
        }
      ],
      "message": "p2p, bugfix: correctly detect already connected peers in ConnectNode()\n\nby upgrading the checks from FindNode() to AlreadyConnectedToAddress().",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:43:10Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-08-11T15:44:13Z"
      },
      "sha": "c2d3226653c1fee3c105627f382c0720b0459d22"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIyNWI2Yzg2OGQxYzI1NjIzOTZlZmNjNDhmOTIwMDRhNDIwNzc3NWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/225b6c868d1c2562396efcc48f92004a4207775d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/225b6c868d1c2562396efcc48f92004a4207775d",
      "tree": {
        "sha": "962488bff053f2e58cafa5ffd0f8077fc67b6559",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/962488bff053f2e58cafa5ffd0f8077fc67b6559"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c2d3226653c1fee3c105627f382c0720b0459d22",
          "sha": "c2d3226653c1fee3c105627f382c0720b0459d22",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c2d3226653c1fee3c105627f382c0720b0459d22"
        }
      ],
      "message": "p2p: do not accept inbound connections from already connected I2P peers\n\nas creating I2P tunnels is expensive.\n\nThese duplicate connection requests come most frequently from inbound peers.\nThe other fixes in this PR may mitigate this behavior by our peers, but not for\nnodes running earlier versions of Bitcoin Core.\n\nExtend a related functional test.",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:43:10Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-09-06T00:41:05Z"
      },
      "sha": "225b6c868d1c2562396efcc48f92004a4207775d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY5MWUyZWY0OWRlMjc0MmIwOGIzZTYwNjQxMzdlMGYyOWMyZWU5ZDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/691e2ef49de2742b08b3e6064137e0f29c2ee9d4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/691e2ef49de2742b08b3e6064137e0f29c2ee9d4",
      "tree": {
        "sha": "ab9e53a5ffe8a895bd0e2c25aecd4fd93f1bafbe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ab9e53a5ffe8a895bd0e2c25aecd4fd93f1bafbe"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/225b6c868d1c2562396efcc48f92004a4207775d",
          "sha": "225b6c868d1c2562396efcc48f92004a4207775d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/225b6c868d1c2562396efcc48f92004a4207775d"
        }
      ],
      "message": "refactor: pass AddedNodeParams to CConnman::RemoveAddedNode()\n\ninstead of a std::string (and rename its argument and that of\nCConnman::AddNode() to \"params\").\n\nPassing AddedNodeParams makes the two member functions AddNode and\nRemoveAddedNode consistent, and is needed in order to refactor\n`m_added_node_params` from a vector to an unordered set in the next commit.",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:43:10Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-10T21:40:01Z"
      },
      "sha": "691e2ef49de2742b08b3e6064137e0f29c2ee9d4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU1ZTc1ZjZiZGY2NzE4YWU2ZmUyYzkyNzAwOTNlMTAzNjIxZDk0ODU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e5e75f6bdf6718ae6fe2c9270093e103621d9485",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e5e75f6bdf6718ae6fe2c9270093e103621d9485",
      "tree": {
        "sha": "240bd3266606dee24ad428638eedbafddef58b7f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/240bd3266606dee24ad428638eedbafddef58b7f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/691e2ef49de2742b08b3e6064137e0f29c2ee9d4",
          "sha": "691e2ef49de2742b08b3e6064137e0f29c2ee9d4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/691e2ef49de2742b08b3e6064137e0f29c2ee9d4"
        }
      ],
      "message": "refactor: change m_added_node_params from vector to unordered_set\n\nwhich simplifies and speeds up the AddNode() and RemoveAddedNode() methods,\nas well as the next commit, \"p2p: do not make automatic outbound connections\nto addnode peers\", which checks if an address is already in m_added_node_params.\n\nThis refactoring is covered by functional tests in rpc_net.py.\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:43:10Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-08-15T15:33:24Z"
      },
      "sha": "e5e75f6bdf6718ae6fe2c9270093e103621d9485"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIxZjg0MjZjODIzZmQ4M2M0MGZkODFmMDhmZjJiZjM5ZWM2YTQ1NzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/21f8426c823fd83c40fd81f08ff2bf39ec6a4575",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/21f8426c823fd83c40fd81f08ff2bf39ec6a4575",
      "tree": {
        "sha": "189fb306e4a5178cfa6db695550e23f248f4dd8d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/189fb306e4a5178cfa6db695550e23f248f4dd8d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e5e75f6bdf6718ae6fe2c9270093e103621d9485",
          "sha": "e5e75f6bdf6718ae6fe2c9270093e103621d9485",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e5e75f6bdf6718ae6fe2c9270093e103621d9485"
        }
      ],
      "message": "p2p, bugfix: do not make automatic outbound connections to addnode peers\n\nto allocate our limited outbound slots correctly, and to ensure addnode\nconnections benefit from their intended protections.\n\nOur addnode logic usually connects the addnode peers before the automatic\noutbound logic does, but not always, as a connection race can occur.\n\nFor instance, our internet connection or router (or the addnode peer) could be\ntemporarily offline, and then return online during the automatic outbound\nthread.  Or we could add a new manual peer using the `addnode` RPC at that time.\nThe race can be more apparent when our node doesn't know many peers, or with\nnetworks like cjdns that currently have few bitcoin peers.\n\nExamples on mainnet using logging added in the same pull request:\n\n2023-08-12T14:51:05.681743Z [opencon] [net.cpp:1949] [ThreadOpenConnections]\n[net:debug] Not making automatic network-specific outbound-full-relay connection\nto i2p peer selected for manual (addnode) connection: [geh...odq.b32.i2p]:0\n\n2023-08-13T03:59:28.050853Z [opencon] [net.cpp:1949] [ThreadOpenConnections]\n[net:debug] Not making automatic block-relay-only connection to onion peer\nselected for manual (addnode) connection: kpg...aid.onion:8333\n\n2023-08-13T16:21:26.979052Z [opencon] [net.cpp:1949] [ThreadOpenConnections]\n[net:debug] Not making automatic network-specific outbound-full-relay connection\nto cjdns peer selected for manual (addnode) connection: [fcc...8ce]:8333\n\n2023-08-14T20:43:53.401271Z [opencon] [net.cpp:1949] [ThreadOpenConnections]\n[net:debug] Not making automatic network-specific outbound-full-relay connection\nto cjdns peer selected for manual (addnode) connection: [fc7...59e]:8333\n\n2023-08-15T00:10:01.894147Z [opencon] [net.cpp:1949] [ThreadOpenConnections]\n[net:debug] Not making automatic feeler connection to i2p peer selected for\nmanual (addnode) connection: geh...odq.b32.i2p:8333\n\nWhen an addnode peer is connected as an automatic outbound peer and is the only\nconnection we have to a network, it can be protected by our new outbound\neviction logic and persist in the \"wrong role\".\n\nFinally, there does not seem to be a reason to make block-relay or short-lived\nfeeler connections to addnode peers, as the addnode logic will ensure we connect\nto them if they are up, within the addnode connection limit.\n\nFix these issues by checking if the address is an addnode peer in our automatic\noutbound connection logic.\n\nCo-authored-by: Vasil Dimov <vd@FreeBSD.org>",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:43:10Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-08-11T20:45:45Z"
      },
      "sha": "21f8426c823fd83c40fd81f08ff2bf39ec6a4575"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI4YjFkNTk5MmE2NTljODNlYTQ5OWVkNWVhYWQ1YTc0N2ZiZDhmYWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b8b1d5992a659c83ea499ed5eaad5a747fbd8faf",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b8b1d5992a659c83ea499ed5eaad5a747fbd8faf",
      "tree": {
        "sha": "80defd014e87b620f20d5ac6b5a6dcdcd53c7dcc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/80defd014e87b620f20d5ac6b5a6dcdcd53c7dcc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/21f8426c823fd83c40fd81f08ff2bf39ec6a4575",
          "sha": "21f8426c823fd83c40fd81f08ff2bf39ec6a4575",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/21f8426c823fd83c40fd81f08ff2bf39ec6a4575"
        }
      ],
      "message": "p2p: improve ConnectNode log, rm redundant ThreadOpenConnections log\n\nBy moving the \"Trying connection\" log entry in ConnectNode to after the address\nresolution, we can:\n\n- not needlessly log the attempt until after checking if we are already connected to it\n\n- know the network the peer connected through, i.e. for cjdns peers\n\n- add useful peer info to the log entry for debugging purposes\n\nThis change makes the feeler log entry in CConnman::ThreadOpenConnections()\nredundant...\n\n2023-09-06T01:11:42.614464Z Making feeler connection to dft...dyd.onion:8333\n2023-09-06T01:11:42.614722Z Trying feeler connection to net=onion, peeraddr=dft...dyd.onion:8333, lastseen=4.2hrs\n\n...so remove it.",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:43:10Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-09-05T23:49:42Z"
      },
      "sha": "b8b1d5992a659c83ea499ed5eaad5a747fbd8faf"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA5MDMwYzZjYTI3ZGFkMjM0YzZjYTNmNWVmZjY2YzAzYzNjNDE4OWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/09030c6ca27dad234c6ca3f5eff66c03c3c4189e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/09030c6ca27dad234c6ca3f5eff66c03c3c4189e",
      "tree": {
        "sha": "4e5b2c6bacd212905514d7c6d47fa31f018ca02c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4e5b2c6bacd212905514d7c6d47fa31f018ca02c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b8b1d5992a659c83ea499ed5eaad5a747fbd8faf",
          "sha": "b8b1d5992a659c83ea499ed5eaad5a747fbd8faf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b8b1d5992a659c83ea499ed5eaad5a747fbd8faf"
        }
      ],
      "message": "p2p: log when protecting last remaining network peer from eviction\n\nThis logging has been helpful for observing and debugging our peer connection\nand eviction behavior.\n\nAlso improve related log entries for\n- eviction of an inbound peer\n- protecting a peer from eviction for a bad or slow chain",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:43:10Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-08-09T16:55:05Z"
      },
      "sha": "09030c6ca27dad234c6ca3f5eff66c03c3c4189e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkzMWRmNWFlMTUzMzU3NmIyODk1YjJmYWI5YjhhODU2ODMzOWFjN2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/931df5ae1533576b2895b2fab9b8a8568339ac7b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/931df5ae1533576b2895b2fab9b8a8568339ac7b",
      "tree": {
        "sha": "0a5cf058125ab4bec670ed4dbd67ed8a31691130",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0a5cf058125ab4bec670ed4dbd67ed8a31691130"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/09030c6ca27dad234c6ca3f5eff66c03c3c4189e",
          "sha": "09030c6ca27dad234c6ca3f5eff66c03c3c4189e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/09030c6ca27dad234c6ca3f5eff66c03c3c4189e"
        }
      ],
      "message": "p2p: improve inbound/outbound/anchor/network-specific log messages",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:43:10Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-08-11T15:52:47Z"
      },
      "sha": "931df5ae1533576b2895b2fab9b8a8568339ac7b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQyMzhiNmYwYTc1NTNlYmM1Y2VlNmY3Yzc3ZDM4MTMxOTNmN2EzMjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "tree": {
        "sha": "a5dac8ba15b1cf11571c8c3a6a4db35242bbefda",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a5dac8ba15b1cf11571c8c3a6a4db35242bbefda"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/931df5ae1533576b2895b2fab9b8a8568339ac7b",
          "sha": "931df5ae1533576b2895b2fab9b8a8568339ac7b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/931df5ae1533576b2895b2fab9b8a8568339ac7b"
        }
      ],
      "message": "refactor: simplify MaybePickPreferredNetwork, drop out-param, return optional\n\nand make it a const class method, and add Clang thread-safety analysis annotation and\nrelated assertions.",
      "committer": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-10-24T18:43:10Z"
      },
      "author": {
        "name": "Jon Atack",
        "email": "jon@atack.com",
        "date": "2023-08-07T20:23:50Z"
      },
      "sha": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10758121963,
      "node_id": "HRFPE_lADOABII585t6QbyzwAAAAKBO-nr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10758121963",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-24T18:55:34Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1293481061",
      "pull_request_review_id": 1576881142,
      "id": 1293481061,
      "node_id": "PRRC_kwDOABII585NGPRl",
      "diff_hunk": "@@ -1928,6 +1921,25 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 continue;\n             }\n \n+            // Do not make automatic outbound connections to addnode peers, to\n+            // avoid using our limited outbound slots for them and to ensure\n+            // addnode connections benefit from their intended protections.\n+            {\n+                const auto str_addr{addr.ToStringAddr()};\n+                const auto str_addr_port{addr.ToStringAddrPort()};\n+\n+                LOCK(m_added_nodes_mutex);\n+                if (m_added_nodes.size() < 16 // bound the query to a reasonable limit\n+                    && std::any_of(m_added_nodes.cbegin(), m_added_nodes.cend(), [&](const auto& a) { return a == str_addr || a == str_addr_port; })) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 121,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "4b9774dd49359cc0a807f1dc57b96d182330a4a1",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good catch with this deficiency!\r\n\r\nIf `m_added_nodes` is changed to `std::unordered_set`, then this can be a simple `m_added_nodes.count() > 0` and `CConnman::AddNode()` and `CConnman::RemoveAddedNode()` could be simplified (and made faster since they are now `O(number of added nodes)` and will become `O(1)`, I guess performance is irrelevant in practice because of the small number of elements).\r\n\r\nMaybe this is worth a separate PR since it is distinct from other commits (one commit to change it to `std::unordered_set` and one to add this check).",
      "created_at": "2023-08-14T13:46:05Z",
      "updated_at": "2023-08-14T13:58:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1293481061",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1293481061"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 1924,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1933,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294891951",
      "pull_request_review_id": 1579039581,
      "id": 1294891951,
      "node_id": "PRRC_kwDOABII585NLnuv",
      "diff_hunk": "@@ -1928,6 +1921,25 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 continue;\n             }\n \n+            // Do not make automatic outbound connections to addnode peers, to\n+            // avoid using our limited outbound slots for them and to ensure\n+            // addnode connections benefit from their intended protections.\n+            {\n+                const auto str_addr{addr.ToStringAddr()};\n+                const auto str_addr_port{addr.ToStringAddrPort()};\n+\n+                LOCK(m_added_nodes_mutex);\n+                if (m_added_nodes.size() < 16 // bound the query to a reasonable limit\n+                    && std::any_of(m_added_nodes.cbegin(), m_added_nodes.cend(), [&](const auto& a) { return a == str_addr || a == str_addr_port; })) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 121,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "4b9774dd49359cc0a807f1dc57b96d182330a4a1",
      "in_reply_to_id": 1293481061,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good idea, simpler and faster. Done (thanks!)",
      "created_at": "2023-08-15T17:13:01Z",
      "updated_at": "2023-08-15T17:13:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1294891951",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1294891951"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 1924,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 1933,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296069949",
      "pull_request_review_id": 1580868907,
      "id": 1296069949,
      "node_id": "PRRC_kwDOABII585NQHU9",
      "diff_hunk": "@@ -408,7 +397,8 @@ CNode* CConnman::FindNode(const CService& addr)\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    return FindNode(service) || FindNode(service.ToStringAddrPort());",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Before this it would compare just the address and after this change it would compare the address and the port. I think that is undesirable because for inbound connections we see the peer as e.g. `1.2.3.4:somerandomport` and when we try to connect to `1.2.3.4:8333` we should assume we are already connected to that peer.",
      "created_at": "2023-08-16T15:15:07Z",
      "updated_at": "2023-08-16T15:58:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1296069949",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296069949"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 398,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 401,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296074743",
      "pull_request_review_id": 1580868907,
      "id": 1296074743,
      "node_id": "PRRC_kwDOABII585NQIf3",
      "diff_hunk": "@@ -1995,7 +2004,7 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n     }\n \n     for (const std::string& strAddNode : lAddresses) {\n-        CService service(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)));\n+        CService service{MaybeFlipIPv6toCJDNS(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)))};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 158,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "The existent code in `master` seems to be comparing the ports. Is there another bug that an inbound connection from `1.2.3.4` would not be considered as \"we are connected to `1.2.3.4:8333`\"?",
      "created_at": "2023-08-16T15:18:50Z",
      "updated_at": "2023-08-16T15:58:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1296074743",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296074743"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 1998,
      "start_side": "LEFT",
      "line": null,
      "original_line": 2794,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296106505",
      "pull_request_review_id": 1580868907,
      "id": 1296106505,
      "node_id": "PRRC_kwDOABII585NQQQJ",
      "diff_hunk": "@@ -2621,24 +2630,15 @@ std::vector<CAddress> CConnman::GetAddresses(CNode& requestor, size_t max_addres\n bool CConnman::AddNode(const std::string& strNode)\n {\n     LOCK(m_added_nodes_mutex);\n-    for (const std::string& it : m_added_nodes) {\n-        if (strNode == it) return false;\n-    }\n-\n-    m_added_nodes.push_back(strNode);\n+    if (m_added_nodes.count(strNode)) return false;\n+    m_added_nodes.insert(strNode);\n     return true;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 173,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Or this:\r\n\r\n```cpp\r\nreturn m_added_nodes.insert(strNode).second;\r\n```",
      "created_at": "2023-08-16T15:43:05Z",
      "updated_at": "2023-08-16T15:58:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1296106505",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296106505"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 2633,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2635,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296121513",
      "pull_request_review_id": 1580868907,
      "id": 1296121513,
      "node_id": "PRRC_kwDOABII585NQT6p",
      "diff_hunk": "@@ -437,6 +427,14 @@ static CAddress GetBindAddress(const Sock& sock)\n     return addr_bind;\n }\n \n+static void LogAlreadyConnected(CNode* pnode, ConnectionType conn_type)\n+{\n+    LogPrintfCategory(BCLog::NET, \"Failed to open new %s connection, already connected to peer=%d, net=%s%s (%s)\\n\",",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 43,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why not use `LogPrintLevel(BCLog::NET, BCLog::Level::Debug`?",
      "created_at": "2023-08-16T15:55:15Z",
      "updated_at": "2023-08-16T15:58:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1296121513",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296121513"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 432,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296393528",
      "pull_request_review_id": 1581366261,
      "id": 1296393528,
      "node_id": "PRRC_kwDOABII585NRWU4",
      "diff_hunk": "@@ -2621,24 +2630,15 @@ std::vector<CAddress> CConnman::GetAddresses(CNode& requestor, size_t max_addres\n bool CConnman::AddNode(const std::string& strNode)\n {\n     LOCK(m_added_nodes_mutex);\n-    for (const std::string& it : m_added_nodes) {\n-        if (strNode == it) return false;\n-    }\n-\n-    m_added_nodes.push_back(strNode);\n+    if (m_added_nodes.count(strNode)) return false;\n+    m_added_nodes.insert(strNode);\n     return true;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 173,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": 1296106505,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thank you, done.",
      "created_at": "2023-08-16T20:28:46Z",
      "updated_at": "2023-08-16T20:47:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1296393528",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296393528"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 2633,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2635,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296405960",
      "pull_request_review_id": 1581383931,
      "id": 1296405960,
      "node_id": "PRRC_kwDOABII585NRZXI",
      "diff_hunk": "@@ -437,6 +427,14 @@ static CAddress GetBindAddress(const Sock& sock)\n     return addr_bind;\n }\n \n+static void LogAlreadyConnected(CNode* pnode, ConnectionType conn_type)\n+{\n+    LogPrintfCategory(BCLog::NET, \"Failed to open new %s connection, already connected to peer=%d, net=%s%s (%s)\\n\",",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 43,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": 1296121513,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I didn't change the level from the current `LogPrintf` since 236618061a445d2cb11e722cfac5fdae5be26abb in 2017. Since this shouldn't normally occur, unconditionally logging seems helpful (the `net` category is currently much too busy to leave on and see this happen unless you proactively grep for it -- finishing the logging severity level upgrade should solve that. I personally test this branch with the added logging changed to unconditional).",
      "created_at": "2023-08-16T20:41:00Z",
      "updated_at": "2023-08-16T20:48:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1296405960",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296405960"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 432,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296427115",
      "pull_request_review_id": 1581416432,
      "id": 1296427115,
      "node_id": "PRRC_kwDOABII585NRehr",
      "diff_hunk": "@@ -1995,7 +2004,7 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n     }\n \n     for (const std::string& strAddNode : lAddresses) {\n-        CService service(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)));\n+        CService service{MaybeFlipIPv6toCJDNS(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)))};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 158,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": 1296074743,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, I think that is currently an issue as well.\r\n",
      "created_at": "2023-08-16T21:03:15Z",
      "updated_at": "2023-09-01T22:04:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1296427115",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296427115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 1998,
      "start_side": "LEFT",
      "line": null,
      "original_line": 2794,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296810743",
      "pull_request_review_id": 1581989659,
      "id": 1296810743,
      "node_id": "PRRC_kwDOABII585NS8L3",
      "diff_hunk": "@@ -1995,7 +2004,7 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n     }\n \n     for (const std::string& strAddNode : lAddresses) {\n-        CService service(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)));\n+        CService service{MaybeFlipIPv6toCJDNS(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)))};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 158,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": 1296074743,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I mean, if we already have an inbound connection from `1.2.3.4` (ie we are connected to `1.2.3.4:somerandomport`) and this code checks whether we are connected to `1.2.3.4:8333` it would wrongly assume that we are not and would open an outbound connection to that address.",
      "created_at": "2023-08-17T07:43:27Z",
      "updated_at": "2023-08-17T07:43:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1296810743",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1296810743"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 1998,
      "start_side": "LEFT",
      "line": null,
      "original_line": 2794,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313569401",
      "pull_request_review_id": 1607704196,
      "id": 1313569401,
      "node_id": "PRRC_kwDOABII585OS3p5",
      "diff_hunk": "@@ -1995,7 +2004,7 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n     }\n \n     for (const std::string& strAddNode : lAddresses) {\n-        CService service(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)));\n+        CService service{MaybeFlipIPv6toCJDNS(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)))};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 158,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": 1296074743,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good call. I've reproduced that bug and am looking at a fix.",
      "created_at": "2023-09-01T21:57:12Z",
      "updated_at": "2023-09-01T21:57:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1313569401",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313569401"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 1998,
      "start_side": "LEFT",
      "line": null,
      "original_line": 2794,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313569449",
      "pull_request_review_id": 1607704224,
      "id": 1313569449,
      "node_id": "PRRC_kwDOABII585OS3qp",
      "diff_hunk": "@@ -408,7 +397,8 @@ CNode* CConnman::FindNode(const CService& addr)\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    return FindNode(service) || FindNode(service.ToStringAddrPort());",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": 1296069949,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Changed `FindNode(service)` to `FindNode(static_cast<CNetAddr>(service))`.",
      "created_at": "2023-09-01T21:57:15Z",
      "updated_at": "2023-09-01T21:57:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1313569449",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313569449"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 398,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 401,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313569577",
      "pull_request_review_id": 1607704324,
      "id": 1313569577,
      "node_id": "PRRC_kwDOABII585OS3sp",
      "diff_hunk": "@@ -437,6 +427,14 @@ static CAddress GetBindAddress(const Sock& sock)\n     return addr_bind;\n }\n \n+static void LogAlreadyConnected(CNode* pnode, ConnectionType conn_type)\n+{\n+    LogPrintfCategory(BCLog::NET, \"Failed to open new %s connection, already connected to peer=%d, net=%s%s (%s)\\n\",",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 43,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": 1296121513,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "On second thought, taking your suggestion as the goal is to migrate to severity level logging. Thanks!",
      "created_at": "2023-09-01T21:57:25Z",
      "updated_at": "2023-10-24T14:27:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1313569577",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1313569577"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 432,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1316687977",
      "pull_request_review_id": 1612367872,
      "id": 1316687977,
      "node_id": "PRRC_kwDOABII585OexBp",
      "diff_hunk": "@@ -1995,7 +2004,7 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n     }\n \n     for (const std::string& strAddNode : lAddresses) {\n-        CService service(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)));\n+        CService service{MaybeFlipIPv6toCJDNS(LookupNumeric(strAddNode, Params().GetDefaultPort(strAddNode)))};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 158,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "a411cb5a170098c99e7c64f508153613f5e377da",
      "in_reply_to_id": 1296074743,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Updated with a fix, along with several additional issues found and possibly fixed now while looking into this (thanks!)",
      "created_at": "2023-09-06T03:56:40Z",
      "updated_at": "2023-09-06T03:56:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1316687977",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1316687977"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 1998,
      "start_side": "LEFT",
      "line": null,
      "original_line": 2794,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1323598562",
      "pull_request_review_id": 1623186191,
      "id": 1323598562,
      "node_id": "PRRC_kwDOABII585O5ILi",
      "diff_hunk": "@@ -2734,13 +2734,13 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n \n \n     // Build a map of all already connected addresses (by IP:port and by name) to inbound/outbound and resolved CService\n-    std::map<CService, bool> mapConnected;\n+    std::map<CNetAddr, bool> mapConnected;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "54804cba858b614462b21e20dac088b2e7740e11",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could this lead to disambiguities? Say if you want to addnode different localhost peers with different ports (but the same IP 127.0.0.1), would `getaddednode()` now say you are connected to all of them, even when you are only connected to 1 in reality? ",
      "created_at": "2023-09-12T21:28:33Z",
      "updated_at": "2023-09-12T22:13:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1323598562",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1323598562"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2858,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1323646824",
      "pull_request_review_id": 1623186191,
      "id": 1323646824,
      "node_id": "PRRC_kwDOABII585O5T9o",
      "diff_hunk": "@@ -1814,6 +1814,16 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+\n+    // Don't accept inbound connections from peers already connected to us.\n+    // Skip this check for Tor, as their inbound/outbound addresses differ.\n+    if (!inbound_onion) {\n+        if (auto pnode = AlreadyConnectedToAddress(addr)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "b97cfd18da8ad4e29319b8e3c84c3388cd75ff60",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Similar question here: Could this make some local network setups no longer viable? Probably no one should mainnet for those if it's just for testing, but possibly some setups with multiple nodes sharing the same IP exist?",
      "created_at": "2023-09-12T22:05:39Z",
      "updated_at": "2023-09-12T22:22:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1323646824",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1323646824"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1868,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356400497",
      "pull_request_review_id": 1673481614,
      "id": 1356400497,
      "node_id": "PRRC_kwDOABII585Q2Qdx",
      "diff_hunk": "@@ -2734,13 +2734,13 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n \n \n     // Build a map of all already connected addresses (by IP:port and by name) to inbound/outbound and resolved CService\n-    std::map<CService, bool> mapConnected;\n+    std::map<CNetAddr, bool> mapConnected;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "54804cba858b614462b21e20dac088b2e7740e11",
      "in_reply_to_id": 1323598562,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Right. Comparing ports for incoming connections is problematic also. I think the right approach for determining if we are connected to `addr:port`, _for the purposes of making an outbound connection_:\r\n\r\n* For incoming connections, compare just `addr` and ignore `port`\r\n* For outgoing connections, compare both `addr` and `port`.\r\n\r\nThis can't be done with a single map of either `CService` or `CNetAddr`. I guess two containers are needed, as this:\r\n\r\n<details>\r\n<summary>[patch] compare differently inbound and outbound addresses</summary>\r\n\r\n```diff\r\ndiff --git i/src/net.cpp w/src/net.cpp\r\nindex 91282d927d..0eb0023112 100644\r\n--- i/src/net.cpp\r\n+++ w/src/net.cpp\r\n@@ -2809,41 +2809,49 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\r\n         LOCK(m_added_nodes_mutex);\r\n         ret.reserve(m_added_node_params.size());\r\n         std::copy(m_added_node_params.cbegin(), m_added_node_params.cend(), std::back_inserter(lAddresses));\r\n     }\r\n \r\n \r\n-    // Build a map of all already connected addresses (by IP:port and by name) to inbound/outbound and resolved CService\r\n-    std::map<CNetAddr, bool> mapConnected;\r\n+    // Collect all addresses to which we are already connected.\r\n+    std::unordered_set<CNetAddr, CNetAddrHash> connected_to_inbound;\r\n+    std::unordered_set<CService, CServiceHash> connected_to_outbound;\r\n     std::map<std::string, std::pair<bool, CService>> mapConnectedByName;\r\n     {\r\n         LOCK(m_nodes_mutex);\r\n         for (const CNode* pnode : m_nodes) {\r\n             if (pnode->addr.IsValid()) {\r\n-                mapConnected[static_cast<CNetAddr>(pnode->addr)] = pnode->IsInboundConn();\r\n+                if (pnode->IsInboundConn()) {\r\n+                    connected_to_inbound.insert(pnode->addr);\r\n+                } else {\r\n+                    connected_to_outbound.insert(pnode->addr);\r\n+                }\r\n             }\r\n             std::string addrName{pnode->m_addr_name};\r\n             if (!addrName.empty()) {\r\n                 mapConnectedByName[std::move(addrName)] = std::make_pair(pnode->IsInboundConn(), static_cast<const CService&>(pnode->addr));\r\n             }\r\n         }\r\n     }\r\n \r\n     for (const auto& addr : lAddresses) {\r\n         CService service(LookupNumeric(addr.m_added_node, GetDefaultPort(addr.m_added_node)));\r\n         AddedNodeInfo addedNode{addr, CService(), false, false};\r\n         if (service.IsValid()) {\r\n-            // strAddNode is an IP:port\r\n-            auto it = mapConnected.find(static_cast<CNetAddr>(service));\r\n-            if (it != mapConnected.end()) {\r\n+            // addr.m_added_node is an addr:port\r\n+            if (connected_to_outbound.count(service) > 0) {\r\n+                addedNode.resolvedAddress = service;\r\n+                addedNode.fConnected = true;\r\n+                addedNode.fInbound = false;\r\n+            } else if (connected_to_inbound.count(service) > 0) {\r\n                 addedNode.resolvedAddress = service;\r\n                 addedNode.fConnected = true;\r\n-                addedNode.fInbound = it->second;\r\n+                addedNode.fInbound = true;\r\n             }\r\n         } else {\r\n-            // strAddNode is a name\r\n+            // addr.m_added_node is a name\r\n             auto it = mapConnectedByName.find(addr.m_added_node);\r\n             if (it != mapConnectedByName.end()) {\r\n                 addedNode.resolvedAddress = it->second.second;\r\n                 addedNode.fConnected = true;\r\n                 addedNode.fInbound = it->second.first;\r\n             }\r\ndiff --git i/src/netaddress.h w/src/netaddress.h\r\nindex ad09f16799..99a3b0fc22 100644\r\n--- i/src/netaddress.h\r\n+++ w/src/netaddress.h\r\n@@ -254,12 +254,13 @@ public:\r\n             UnserializeV2Stream(s);\r\n         } else {\r\n             UnserializeV1Stream(s);\r\n         }\r\n     }\r\n \r\n+    friend class CNetAddrHash;\r\n     friend class CSubNet;\r\n \r\n private:\r\n     /**\r\n      * Parse a Tor address and set this object to it.\r\n      * @param[in] addr Address to parse, must be a valid C string, for example\r\n@@ -473,12 +474,36 @@ private:\r\n         // will not be gossiped, but continue reading next addresses from the stream.\r\n         m_net = NET_IPV6;\r\n         m_addr.assign(ADDR_IPV6_SIZE, 0x0);\r\n     }\r\n };\r\n \r\n+class CNetAddrHash\r\n+{\r\n+public:\r\n+    CNetAddrHash()\r\n+        : m_salt_k0{GetRand<uint64_t>()},\r\n+          m_salt_k1{GetRand<uint64_t>()}\r\n+    {\r\n+    }\r\n+\r\n+    CNetAddrHash(uint64_t salt_k0, uint64_t salt_k1) : m_salt_k0{salt_k0}, m_salt_k1{salt_k1} {}\r\n+\r\n+    size_t operator()(const CNetAddr& a) const noexcept\r\n+    {\r\n+        CSipHasher hasher(m_salt_k0, m_salt_k1);\r\n+        hasher.Write(a.m_net);\r\n+        hasher.Write(a.m_addr);\r\n+        return static_cast<size_t>(hasher.Finalize());\r\n+    }\r\n+\r\n+private:\r\n+    const uint64_t m_salt_k0;\r\n+    const uint64_t m_salt_k1;\r\n+};\r\n+\r\n class CSubNet\r\n {\r\n protected:\r\n     /// Network (base) address\r\n     CNetAddr network;\r\n     /// Netmask, in network byte order\r\n```\r\n</details>",
      "created_at": "2023-10-12T07:39:25Z",
      "updated_at": "2023-10-12T10:05:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356400497",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356400497"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2858,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356484191",
      "pull_request_review_id": 1673614690,
      "id": 1356484191,
      "node_id": "PRRC_kwDOABII585Q2k5f",
      "diff_hunk": "@@ -408,9 +408,13 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+std::optional<CNode*> CConnman::AlreadyConnectedToAddress(const CAddress& addr)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Two concerns about this interface change:\r\n\r\n1. The pointer could become stale as soon as this method returns. It is good that this method is private which somewhat limits the danger that somebody will dereference a stale pointer, but does not eliminate it. `FindNode()` already has such an unsafe interface where it locks `m_nodes_mutex`, fetches a pointer to an element inside `m_nodes`, releases the mutex and returns the (possibly stale) pointer. In `master`, all places where `FindNode()` is called either only check if the returned pointer is null without dereferencing it (ok), or lock the mutex, call `FindNode()` (requiring the mutex to be recursive), dereference the pointer, unlock the mutex. But this PR in commit cb3f5a805caa2d42fdab57b42e6aee820ccd347d `p2p, bugfix: correctly detect already connected peers in ConnectNode()` adds calls where the pointer is dereferenced after releasing the mutex. I would rather have less such unsafe interfaces than more. Maybe log the message from inside `AlreadyConnectedToAddress()` or have it return the message as a string, to be optionally logged by the caller?\r\n\r\n2. (minor) `optional` from a pointer is redundant - if the pointer will never be null, then it can be reference. If the pointer can be null, then the `optional` can be dropped and null pointer to mean \"not connected\".",
      "created_at": "2023-10-12T08:37:47Z",
      "updated_at": "2023-10-12T11:16:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356484191",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356484191"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356558158",
      "pull_request_review_id": 1673614690,
      "id": 1356558158,
      "node_id": "PRRC_kwDOABII585Q229O",
      "diff_hunk": "@@ -2902,7 +2944,7 @@ void CConnman::OpenNetworkConnection(const CAddress& addrConnect, bool fCountFai\n     }\n     if (!pszDest) {\n         bool banned_or_discouraged = m_banman && (m_banman->IsDiscouraged(addrConnect) || m_banman->IsBanned(addrConnect));\n-        if (IsLocal(addrConnect) || banned_or_discouraged || AlreadyConnectedToAddress(addrConnect)) {\n+        if (IsLocal(addrConnect) || banned_or_discouraged) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 248,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "cb3f5a805caa2d42fdab57b42e6aee820ccd347d `p2p, bugfix: correctly detect already connected peers in ConnectNode()`\r\n\r\n>    - Remove an AlreadyConnectedToAddress() check in CConnman::OpenNetworkConnection,\r\n      as it is now redundant to the checks added in this commit, and it is\r\n      preferable to log if it occurs.\r\n\r\nIt might happen that `CConnman::ConnectNode()` skips the call to `AlreadyConnectedToAddress()` and connects - if `pszDest` is null and `Lookup(pszDest` returns empty result. Then it will go here:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/4a5aae9330780c3740e27cc511f7cba1fab745b9/src/net.cpp#L549-L558\r\n\r\nSo maybe keep the call to `AlreadyConnectedToAddress()` from `CConnman::OpenNetworkConnection()`.",
      "created_at": "2023-10-12T09:34:26Z",
      "updated_at": "2023-10-12T11:16:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356558158",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356558158"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 2905,
      "start_side": "LEFT",
      "line": null,
      "original_line": 2947,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356561796",
      "pull_request_review_id": 1673614690,
      "id": 1356561796,
      "node_id": "PRRC_kwDOABII585Q232E",
      "diff_hunk": "@@ -1847,6 +1861,16 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+\n+    // Don't accept inbound connections from peers already connected to us.\n+    // Skip this check for inbound Tor connections, as each IP will differ.",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 106,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n    // Skip this check for inbound Tor connections because all of them seem to come from the IP address of the Tor router (usually 127.0.0.1).\r\n```",
      "created_at": "2023-10-12T09:37:33Z",
      "updated_at": "2023-10-12T11:16:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356561796",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356561796"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1866,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356590348",
      "pull_request_review_id": 1673614690,
      "id": 1356590348,
      "node_id": "PRRC_kwDOABII585Q2-0M",
      "diff_hunk": "@@ -408,9 +408,13 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+std::optional<CNode*> CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return std::nullopt; // allow bilateral connections on test chains\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    if (auto pnode = FindNode(static_cast<CNetAddr>(service))) return pnode;\n+    if (auto pnode = FindNode(service.ToStringAddrPort())) return pnode;\n+    return std::nullopt;\n }",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 22,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This needs to know whether to ignore the port or not in order to do the check properly:\r\n\r\n* if we are about to make an outbound connection and wonder whether we are already connected to the peer we intend to connect to\r\n  * for all existent outbound connections, compare the prospect's address and port and if both match, then we are already connected\r\n  * for all existent inbound connections, compare only the address and ignore the port, if a match is found, then we are already connected\r\n  * otherwise we are not connected\r\n* if we are accepting in inbound connection, for all existent inbound and outbound connections, compare only the address and if a match is found then we are already connected, otherwise we are not connected.",
      "created_at": "2023-10-12T10:02:13Z",
      "updated_at": "2023-10-12T11:16:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356590348",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356590348"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 411,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 397,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356598798",
      "pull_request_review_id": 1673614690,
      "id": 1356598798,
      "node_id": "PRRC_kwDOABII585Q3A4O",
      "diff_hunk": "@@ -101,6 +101,17 @@ typedef int64_t NodeId;\n struct AddedNodeParams {\n     std::string m_added_node;\n     bool m_use_v2transport;\n+    bool operator==(const AddedNodeParams& p) const\n+    {\n+        return m_added_node == p.m_added_node && m_use_v2transport == p.m_use_v2transport;\n+    }\n+};\n+\n+struct AddedNodeHasher {\n+    size_t operator()(const AddedNodeParams& p) const noexcept",
      "path": "src/net.h",
      "position": null,
      "original_position": 11,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit, feel free to ignore: for consistency with `CServiceHash` this better end in `Hash`. Given that it operates on `AddedNodeParams` better use that name verbatim instead of shortening it to `AddedNode`. I.e. consider renaming this to `AddedNodeParamsHash`.",
      "created_at": "2023-10-12T10:10:07Z",
      "updated_at": "2023-10-12T11:16:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356598798",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356598798"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 110,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 111,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356610866",
      "pull_request_review_id": 1673614690,
      "id": 1356610866,
      "node_id": "PRRC_kwDOABII585Q3D0y",
      "diff_hunk": "@@ -101,6 +101,17 @@ typedef int64_t NodeId;\n struct AddedNodeParams {\n     std::string m_added_node;\n     bool m_use_v2transport;\n+    bool operator==(const AddedNodeParams& p) const\n+    {\n+        return m_added_node == p.m_added_node && m_use_v2transport == p.m_use_v2transport;\n+    }\n+};\n+\n+struct AddedNodeHasher {\n+    size_t operator()(const AddedNodeParams& p) const noexcept\n+    {\n+        return std::hash<std::string>()(p.m_added_node) ^ (std::hash<bool>()(p.m_use_v2transport) << 1);",
      "path": "src/net.h",
      "position": null,
      "original_position": 13,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Why `<< 1`?",
      "created_at": "2023-10-12T10:22:08Z",
      "updated_at": "2023-10-12T11:16:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356610866",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356610866"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 113,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356628687",
      "pull_request_review_id": 1673614690,
      "id": 1356628687,
      "node_id": "PRRC_kwDOABII585Q3ILP",
      "diff_hunk": "@@ -2760,6 +2787,19 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 continue;\n             }\n \n+            // Do not make automatic outbound connections to addnode peers,\n+            // to allocate our limited outbound slots correctly and to ensure\n+            // addnode connections benefit from their intended protections.\n+            // Expect BIP324 transport when both us and them have NODE_V2_P2P set.\n+            const bool v2_p2p(addr.nServices & GetLocalServices() & NODE_P2P_V2);\n+            if (WITH_LOCK(m_added_nodes_mutex, return m_added_node_params.count({addr.ToStringAddr(), v2_p2p}) || m_added_node_params.count({addr.ToStringAddrPort(), v2_p2p}))) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 187,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "If we have the address for manual connections (given to `addnode`) here we should ignore whether v1 or v2 is going to be used. It is the same peer after all, regardless of p2p encryption. I guess this better be something like:\r\n\r\n```cpp\r\nbool in_added_nodes;\r\n{\r\n    const std::string addr_str{addr.ToStringAddr()};\r\n    const std::string addr_port_str{addr.ToStringAddrPort()};\r\n    LOCK(m_added_nodes_mutex);\r\n    in_added_nodes =\r\n        m_added_node_params.count({addr_str, /*m_use_v2transport=*/true}) > 0 ||\r\n        m_added_node_params.count({addr_str, /*m_use_v2transport=*/false}) > 0 ||\r\n        m_added_node_params.count({addr_port_str, /*m_use_v2transport=*/true}) > 0 ||\r\n        m_added_node_params.count({addr_port_str, /*m_use_v2transport=*/false}) > 0;\r\n}\r\nif (in_added_nodes) {",
      "created_at": "2023-10-12T10:39:03Z",
      "updated_at": "2023-10-12T11:16:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356628687",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356628687"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 2794,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2795,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356657006",
      "pull_request_review_id": 1673614690,
      "id": 1356657006,
      "node_id": "PRRC_kwDOABII585Q3PFu",
      "diff_hunk": "@@ -474,15 +483,18 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             }\n             // It is possible that we already have a connection to the IP/port pszDest resolved to.\n             // In that case, drop the connection that was just created.\n-            LOCK(m_nodes_mutex);\n-            CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-            if (pnode) {\n-                LogPrintf(\"Failed to open new connection, already connected\\n\");\n+            if (auto pnode = AlreadyConnectedToAddress(addrConnect)) {\n+                LogPrintLevel(BCLog::NET, BCLog::Level::Info, \"%s\\n\", AlreadyConnected(pnode.value(), addrConnect, conn_type));\n                 return nullptr;\n             }\n         }\n     }\n \n+    LogPrintLevel(BCLog::NET, BCLog::Level::Debug, \"Trying v%i %s connection to net=%s%s, lastseen=%.1fhrs\\n\",",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 81,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:\r\n```suggestion\r\n    LogPrintLevel(BCLog::NET, BCLog::Level::Debug, \"Trying v%i %s connection to net=%s%s, lastseen=%.1fh ago\\n\",\r\n```",
      "created_at": "2023-10-12T11:05:27Z",
      "updated_at": "2023-10-12T11:16:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356657006",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356657006"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 493,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356660922",
      "pull_request_review_id": 1673614690,
      "id": 1356660922,
      "node_id": "PRRC_kwDOABII585Q3QC6",
      "diff_hunk": "@@ -1869,7 +1893,9 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     pnode->AddRef();\n     m_msgproc->InitializeNode(*pnode, nodeServices);\n \n-    LogPrint(BCLog::NET, \"connection from %s accepted\\n\", addr.ToStringAddrPort());\n+    LogPrintLevel(BCLog::NET, BCLog::Level::Debug, \"New %s connection accepted from peer=%d, net=%s%s\\n\",",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 122,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: I find \"...connection accepted from peer=5\"  a bit confusing. Maybe:\r\n```suggestion\r\n    LogPrintLevel(BCLog::NET, BCLog::Level::Debug, \"New %s connection accepted, peer=%d, net=%s%s\\n\",\r\n```",
      "created_at": "2023-10-12T11:09:23Z",
      "updated_at": "2023-10-12T11:16:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356660922",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1356660922"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1896,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361236879",
      "pull_request_review_id": 1680913596,
      "id": 1361236879,
      "node_id": "PRRC_kwDOABII585RItOP",
      "diff_hunk": "@@ -474,15 +483,18 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             }\n             // It is possible that we already have a connection to the IP/port pszDest resolved to.\n             // In that case, drop the connection that was just created.\n-            LOCK(m_nodes_mutex);\n-            CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-            if (pnode) {\n-                LogPrintf(\"Failed to open new connection, already connected\\n\");\n+            if (auto pnode = AlreadyConnectedToAddress(addrConnect)) {\n+                LogPrintLevel(BCLog::NET, BCLog::Level::Info, \"%s\\n\", AlreadyConnected(pnode.value(), addrConnect, conn_type));\n                 return nullptr;\n             }\n         }\n     }\n \n+    LogPrintLevel(BCLog::NET, BCLog::Level::Debug, \"Trying v%i %s connection to net=%s%s, lastseen=%.1fhrs\\n\",",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 81,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356657006,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-10-16T20:34:38Z",
      "updated_at": "2023-10-16T20:34:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361236879",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361236879"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 493,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361236968",
      "pull_request_review_id": 1680913719,
      "id": 1361236968,
      "node_id": "PRRC_kwDOABII585RItPo",
      "diff_hunk": "@@ -1869,7 +1893,9 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     pnode->AddRef();\n     m_msgproc->InitializeNode(*pnode, nodeServices);\n \n-    LogPrint(BCLog::NET, \"connection from %s accepted\\n\", addr.ToStringAddrPort());\n+    LogPrintLevel(BCLog::NET, BCLog::Level::Debug, \"New %s connection accepted from peer=%d, net=%s%s\\n\",",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 122,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356660922,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-10-16T20:34:43Z",
      "updated_at": "2023-10-16T20:34:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361236968",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361236968"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1896,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361237154",
      "pull_request_review_id": 1680913997,
      "id": 1361237154,
      "node_id": "PRRC_kwDOABII585RItSi",
      "diff_hunk": "@@ -101,6 +101,17 @@ typedef int64_t NodeId;\n struct AddedNodeParams {\n     std::string m_added_node;\n     bool m_use_v2transport;\n+    bool operator==(const AddedNodeParams& p) const\n+    {\n+        return m_added_node == p.m_added_node && m_use_v2transport == p.m_use_v2transport;\n+    }\n+};\n+\n+struct AddedNodeHasher {\n+    size_t operator()(const AddedNodeParams& p) const noexcept",
      "path": "src/net.h",
      "position": null,
      "original_position": 11,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356598798,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-10-16T20:34:56Z",
      "updated_at": "2023-10-16T20:34:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361237154",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361237154"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 110,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 111,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361237294",
      "pull_request_review_id": 1680914186,
      "id": 1361237294,
      "node_id": "PRRC_kwDOABII585RItUu",
      "diff_hunk": "@@ -1847,6 +1861,16 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+\n+    // Don't accept inbound connections from peers already connected to us.\n+    // Skip this check for inbound Tor connections, as each IP will differ.",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 106,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356561796,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2023-10-16T20:35:04Z",
      "updated_at": "2023-10-16T20:35:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361237294",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361237294"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1866,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361245328",
      "pull_request_review_id": 1680928309,
      "id": 1361245328,
      "node_id": "PRRC_kwDOABII585RIvSQ",
      "diff_hunk": "@@ -2760,6 +2787,19 @@ void CConnman::ThreadOpenConnections(const std::vector<std::string> connect)\n                 continue;\n             }\n \n+            // Do not make automatic outbound connections to addnode peers,\n+            // to allocate our limited outbound slots correctly and to ensure\n+            // addnode connections benefit from their intended protections.\n+            // Expect BIP324 transport when both us and them have NODE_V2_P2P set.\n+            const bool v2_p2p(addr.nServices & GetLocalServices() & NODE_P2P_V2);\n+            if (WITH_LOCK(m_added_nodes_mutex, return m_added_node_params.count({addr.ToStringAddr(), v2_p2p}) || m_added_node_params.count({addr.ToStringAddrPort(), v2_p2p}))) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 187,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356628687,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks. I hesitated on this point. Done.",
      "created_at": "2023-10-16T20:45:14Z",
      "updated_at": "2023-10-16T20:45:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361245328",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361245328"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 2794,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2795,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361303135",
      "pull_request_review_id": 1681020942,
      "id": 1361303135,
      "node_id": "PRRC_kwDOABII585RI9Zf",
      "diff_hunk": "@@ -2734,13 +2734,13 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n \n \n     // Build a map of all already connected addresses (by IP:port and by name) to inbound/outbound and resolved CService\n-    std::map<CService, bool> mapConnected;\n+    std::map<CNetAddr, bool> mapConnected;",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "54804cba858b614462b21e20dac088b2e7740e11",
      "in_reply_to_id": 1323598562,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@vasild Thanks! I agree with your bimodal approach and replaced 71528aeaba2fbb3141693b000f2ec7799074bfdf with your suggestion above credited to you.",
      "created_at": "2023-10-16T21:52:43Z",
      "updated_at": "2023-10-16T21:52:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361303135",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361303135"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2858,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361380390",
      "pull_request_review_id": 1681130735,
      "id": 1361380390,
      "node_id": "PRRC_kwDOABII585RJQQm",
      "diff_hunk": "@@ -408,9 +408,13 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+std::optional<CNode*> CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return std::nullopt; // allow bilateral connections on test chains\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    if (auto pnode = FindNode(static_cast<CNetAddr>(service))) return pnode;\n+    if (auto pnode = FindNode(service.ToStringAddrPort())) return pnode;\n+    return std::nullopt;\n }",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 22,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356590348,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think that makes sense. Done -- thanks!",
      "created_at": "2023-10-17T00:20:34Z",
      "updated_at": "2023-10-17T00:20:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361380390",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361380390"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 411,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 397,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361468438",
      "pull_request_review_id": 1681302157,
      "id": 1361468438,
      "node_id": "PRRC_kwDOABII585RJlwW",
      "diff_hunk": "@@ -408,9 +408,13 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+std::optional<CNode*> CConnman::AlreadyConnectedToAddress(const CAddress& addr)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356484191,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good points. Changed `AlreadyConnectedToAddress()` back to return a `bool` and log the message from inside it.",
      "created_at": "2023-10-17T03:29:09Z",
      "updated_at": "2023-10-17T03:29:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361468438",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361468438"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361473409",
      "pull_request_review_id": 1681309253,
      "id": 1361473409,
      "node_id": "PRRC_kwDOABII585RJm-B",
      "diff_hunk": "@@ -2902,7 +2944,7 @@ void CConnman::OpenNetworkConnection(const CAddress& addrConnect, bool fCountFai\n     }\n     if (!pszDest) {\n         bool banned_or_discouraged = m_banman && (m_banman->IsDiscouraged(addrConnect) || m_banman->IsBanned(addrConnect));\n-        if (IsLocal(addrConnect) || banned_or_discouraged || AlreadyConnectedToAddress(addrConnect)) {\n+        if (IsLocal(addrConnect) || banned_or_discouraged) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 248,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356558158,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Keeping the call (thanks).",
      "created_at": "2023-10-17T03:41:05Z",
      "updated_at": "2023-10-17T03:41:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361473409",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361473409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 2905,
      "start_side": "LEFT",
      "line": null,
      "original_line": 2947,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361490253",
      "pull_request_review_id": 1681333894,
      "id": 1361490253,
      "node_id": "PRRC_kwDOABII585RJrFN",
      "diff_hunk": "@@ -101,6 +101,17 @@ typedef int64_t NodeId;\n struct AddedNodeParams {\n     std::string m_added_node;\n     bool m_use_v2transport;\n+    bool operator==(const AddedNodeParams& p) const\n+    {\n+        return m_added_node == p.m_added_node && m_use_v2transport == p.m_use_v2transport;\n+    }\n+};\n+\n+struct AddedNodeHasher {\n+    size_t operator()(const AddedNodeParams& p) const noexcept\n+    {\n+        return std::hash<std::string>()(p.m_added_node) ^ (std::hash<bool>()(p.m_use_v2transport) << 1);",
      "path": "src/net.h",
      "position": null,
      "original_position": 13,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356610866,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "It's adapted from the `struct MyHash` code example in https://en.cppreference.com/w/cpp/utility/hash, and I've updated it in the latest push to be more like that example.  I'd be very happy for advice on how to improve that hashing function or use our time-tested existing ones.\r\n\r\n```cpp\r\nstruct MyHash\r\n{\r\n    std::size_t operator()(const S& s) const noexcept\r\n    {\r\n        std::size_t h1 = std::hash<std::string>{}(s.first_name);\r\n        std::size_t h2 = std::hash<std::string>{}(s.last_name);\r\n        return h1 ^ (h2 << 1);\r\n    }\r\n};\r\n```\r\n",
      "created_at": "2023-10-17T04:19:16Z",
      "updated_at": "2023-10-17T04:19:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361490253",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361490253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 113,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361515079",
      "pull_request_review_id": 1681374558,
      "id": 1361515079,
      "node_id": "PRRC_kwDOABII585RJxJH",
      "diff_hunk": "@@ -1814,6 +1814,16 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+\n+    // Don't accept inbound connections from peers already connected to us.\n+    // Skip this check for Tor, as their inbound/outbound addresses differ.\n+    if (!inbound_onion) {\n+        if (auto pnode = AlreadyConnectedToAddress(addr)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "b97cfd18da8ad4e29319b8e3c84c3388cd75ff60",
      "in_reply_to_id": 1323646824,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good question.  I've rewritten `AlreadyConnectedToAddress()` with the suggestions in https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1356590348. Do you think that resolves the possible issue you describe?",
      "created_at": "2023-10-17T05:09:29Z",
      "updated_at": "2023-10-17T05:09:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1361515079",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1361515079"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1868,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362002965",
      "pull_request_review_id": 1682140589,
      "id": 1362002965,
      "node_id": "PRRC_kwDOABII585RLoQV",
      "diff_hunk": "@@ -101,6 +101,17 @@ typedef int64_t NodeId;\n struct AddedNodeParams {\n     std::string m_added_node;\n     bool m_use_v2transport;\n+    bool operator==(const AddedNodeParams& p) const\n+    {\n+        return m_added_node == p.m_added_node && m_use_v2transport == p.m_use_v2transport;\n+    }\n+};\n+\n+struct AddedNodeHasher {\n+    size_t operator()(const AddedNodeParams& p) const noexcept\n+    {\n+        return std::hash<std::string>()(p.m_added_node) ^ (std::hash<bool>()(p.m_use_v2transport) << 1);",
      "path": "src/net.h",
      "position": null,
      "original_position": 13,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356610866,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I am not sure why they used `<< 1`. It seems to be useless and also it drops one bit from `h2`. Maybe to avoid returning `0` if first name and last name happen to be equal?\r\n\r\nI think for the purposes of hashing `m_added_node_params` this suffices:\r\n```cpp\r\n    size_t operator()(const AddedNodeParams& p) const noexcept\r\n    {\r\n        return std::hash<std::string>()(p.m_added_node) ^ p.m_use_v2transport;\r\n    }\r\n```\r\n\r\nHowever `std::hash` is not used anywhere in the code (modulo in some tests and benchmarks). `CServiceHash` uses `CSipHasher`, but there are security concerns with an outsider being able to fiddle with the hashing, maybe this is an overkill for `AddedNodeParams`. If that is to be used here, then it would look like:\r\n\r\n```cpp\r\n        CSipHasher hasher(m_salt_k0, m_salt_k1);\r\n        hasher.Write(MakeUCharSpan(p.m_added_node));\r\n        hasher.Write(p.m_use_v2transport);\r\n        return static_cast<size_t>(hasher.Finalize());\r\n```\r\n\r\nOr use some of the stateless `Hash*` functions from `src/hash.h`.\r\n\r\nI guess @sipa can give us an advice?",
      "created_at": "2023-10-17T12:01:57Z",
      "updated_at": "2023-10-17T12:01:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1362002965",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362002965"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 113,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362086687",
      "pull_request_review_id": 1682305820,
      "id": 1362086687,
      "node_id": "PRRC_kwDOABII585RL8sf",
      "diff_hunk": "@@ -408,9 +409,32 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    const bool inbound{conn_type == ConnectionType::INBOUND};\n+    CNode* pnode{nullptr};\n+    if (inbound) {\n+        // For accepting an inbound connection, check all existing connections by addr only.\n+        pnode = FindNode(static_cast<CNetAddr>(service));\n+    } else {\n+        // For making an outbound connection, check the existing outbound connections\n+        // by addr and port, and if none, then inbound connections by addr only.\n+        pnode = FindNode(service.ToStringAddrPort(), /*inbound=*/false);",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 54,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Can use `CConnman::FindNode(const CService& addr)` here?\r\n```suggestion\r\n        pnode = FindNode(service, /*inbound=*/false);\r\n```\r\n\r\nbut then we will not be comparing against `CNode::m_addr_name`. I wonder if we should compare against both `CNode::addr` and `CNode::m_addr_name`?",
      "created_at": "2023-10-17T13:08:52Z",
      "updated_at": "2023-10-17T13:40:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1362086687",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362086687"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 424,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362096272",
      "pull_request_review_id": 1682305820,
      "id": 1362096272,
      "node_id": "PRRC_kwDOABII585RL_CQ",
      "diff_hunk": "@@ -408,9 +409,32 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    const bool inbound{conn_type == ConnectionType::INBOUND};\n+    CNode* pnode{nullptr};\n+    if (inbound) {\n+        // For accepting an inbound connection, check all existing connections by addr only.\n+        pnode = FindNode(static_cast<CNetAddr>(service));\n+    } else {\n+        // For making an outbound connection, check the existing outbound connections\n+        // by addr and port, and if none, then inbound connections by addr only.\n+        pnode = FindNode(service.ToStringAddrPort(), /*inbound=*/false);\n+        if (!pnode) pnode = FindNode(static_cast<CNetAddr>(service), /*inbound=*/true);\n+    }\n+    if (pnode && log) {\n+        LogPrintLevel(BCLog::NET, inbound ? BCLog::Level::Debug : BCLog::Level::Info,\n+                      \"Not %s new %s connection%s, already connected to %s %s %s peer=%d%s, version=%d, subver=%s\\n\",\n+                      inbound ? \"accepting\" : \"opening\", ConnectionTypeAsString(conn_type),\n+                      fLogIPs ? strprintf(\" %s %s\", inbound ? \"from\" : \"to\", addr.ToStringAddrPort()) : \"\",\n+                      TransportTypeAsString(pnode->m_transport->GetInfo().transport_type),\n+                      pnode->ConnectionTypeAsString(), GetNetworkName(pnode->ConnectedThroughNetwork()),",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 63,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Dereferencing `pnode` after `FindNode()` has released `m_nodes_mutex` is not safe. I don't like adding recursive mutex calls, but without altering `FindNode()` we have to do that - this code has to acquire the mutex before any call to `FindNode()`, dereference the returned pointer and then release the mutex:\r\n\r\n```diff\r\n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\r\n {\r\n     if (Params().IsTestChain()) return false; // allow bilateral connections on test chains\r\n     const CService service{MaybeFlipIPv6toCJDNS(addr)};\r\n     const bool inbound{conn_type == ConnectionType::INBOUND};\r\n     CNode* pnode{nullptr};\r\n+    LOCK(m_nodes_mutex);\r\n     if (inbound) {\r\n         // For accepting an inbound connection, check all existing connections by addr only.\r\n         pnode = FindNode(static_cast<CNetAddr>(service));\r\n     } else {\r\n         // For making an outbound connection, check the existing outbound connections\r\n         // by addr and port, and if none, then inbound connections by addr only.\r\n         pnode = FindNode(service.ToStringAddrPort(), /*inbound=*/false);\r\n         if (!pnode) pnode = FindNode(static_cast<CNetAddr>(service), /*inbound=*/true);\r\n     }\r\n     if (pnode && log) {\r\n         LogPrintLevel(BCLog::NET, inbound ? BCLog::Level::Debug : BCLog::Level::Info,\r\n                       \"Not %s new %s connection%s, already connected to %s %s %s peer=%d%s, version=%d, subver=%s\\n\",\r\n                       inbound ? \"accepting\" : \"opening\", ConnectionTypeAsString(conn_type),\r\n                       fLogIPs ? strprintf(\" %s %s\", inbound ? \"from\" : \"to\", addr.ToStringAddrPort()) : \"\",\r\n                       TransportTypeAsString(pnode->m_transport->GetInfo().transport_type),\r\n                       pnode->ConnectionTypeAsString(), GetNetworkName(pnode->ConnectedThroughNetwork()),\r\n                       pnode->GetId(), fLogIPs ? strprintf(\", peeraddr=%s\", pnode->addr.ToStringAddrPort()) : \"\",\r\n                       pnode->nVersion.load(), WITH_LOCK(pnode->m_subver_mutex, return pnode->cleanSubVer));\r\n     }\r\n-    return pnode;\r\n+    return pnode != nullptr;\r\n }\r\n```",
      "created_at": "2023-10-17T13:15:55Z",
      "updated_at": "2023-10-17T13:40:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1362096272",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362096272"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 425,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362126888",
      "pull_request_review_id": 1682305820,
      "id": 1362126888,
      "node_id": "PRRC_kwDOABII585RMGgo",
      "diff_hunk": "@@ -364,11 +365,11 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+CNode* CConnman::FindNode(const CNetAddr& ip, std::optional<bool> inbound)\n {\n     LOCK(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n+        if (static_cast<CNetAddr>(pnode->addr) == ip && (!inbound || pnode->IsInboundConn() == inbound)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Here and in the other `FindNode()` using `std::optional<bool>` as a boolean is a bit unclear whether we are checking if the optional has a value or whether the value is true. I find this more clear:\r\n\r\n```suggestion\r\n        if (static_cast<CNetAddr>(pnode->addr) == ip && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\r\n```",
      "created_at": "2023-10-17T13:35:36Z",
      "updated_at": "2023-10-17T13:40:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1362126888",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362126888"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 372,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362144275",
      "pull_request_review_id": 1682415998,
      "id": 1362144275,
      "node_id": "PRRC_kwDOABII585RMKwT",
      "diff_hunk": "@@ -364,11 +365,11 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+CNode* CConnman::FindNode(const CNetAddr& ip, std::optional<bool> inbound)\n {\n     LOCK(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n+        if (static_cast<CNetAddr>(pnode->addr) == ip && (!inbound || pnode->IsInboundConn() == inbound)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "in_reply_to_id": 1362126888,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "<strike>Added new `FindNode` methods with 2 params rather than modifying the existing ones.</strike>\r\n\r\nDone.",
      "created_at": "2023-10-17T13:44:54Z",
      "updated_at": "2023-10-18T03:32:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1362144275",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362144275"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 372,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362147437",
      "pull_request_review_id": 1682420261,
      "id": 1362147437,
      "node_id": "PRRC_kwDOABII585RMLht",
      "diff_hunk": "@@ -408,9 +409,32 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    const bool inbound{conn_type == ConnectionType::INBOUND};\n+    CNode* pnode{nullptr};\n+    if (inbound) {\n+        // For accepting an inbound connection, check all existing connections by addr only.\n+        pnode = FindNode(static_cast<CNetAddr>(service));\n+    } else {\n+        // For making an outbound connection, check the existing outbound connections\n+        // by addr and port, and if none, then inbound connections by addr only.\n+        pnode = FindNode(service.ToStringAddrPort(), /*inbound=*/false);\n+        if (!pnode) pnode = FindNode(static_cast<CNetAddr>(service), /*inbound=*/true);\n+    }\n+    if (pnode && log) {\n+        LogPrintLevel(BCLog::NET, inbound ? BCLog::Level::Debug : BCLog::Level::Info,\n+                      \"Not %s new %s connection%s, already connected to %s %s %s peer=%d%s, version=%d, subver=%s\\n\",\n+                      inbound ? \"accepting\" : \"opening\", ConnectionTypeAsString(conn_type),\n+                      fLogIPs ? strprintf(\" %s %s\", inbound ? \"from\" : \"to\", addr.ToStringAddrPort()) : \"\",\n+                      TransportTypeAsString(pnode->m_transport->GetInfo().transport_type),\n+                      pnode->ConnectionTypeAsString(), GetNetworkName(pnode->ConnectedThroughNetwork()),",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 63,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "in_reply_to_id": 1362096272,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Good point. (Several times I've been tempted to move the locking inside the `FindNode` methods to their callers.)",
      "created_at": "2023-10-17T13:46:39Z",
      "updated_at": "2023-10-17T13:46:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1362147437",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362147437"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 425,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362154109",
      "pull_request_review_id": 1682429054,
      "id": 1362154109,
      "node_id": "PRRC_kwDOABII585RMNJ9",
      "diff_hunk": "@@ -101,6 +101,17 @@ typedef int64_t NodeId;\n struct AddedNodeParams {\n     std::string m_added_node;\n     bool m_use_v2transport;\n+    bool operator==(const AddedNodeParams& p) const\n+    {\n+        return m_added_node == p.m_added_node && m_use_v2transport == p.m_use_v2transport;\n+    }\n+};\n+\n+struct AddedNodeHasher {\n+    size_t operator()(const AddedNodeParams& p) const noexcept\n+    {\n+        return std::hash<std::string>()(p.m_added_node) ^ (std::hash<bool>()(p.m_use_v2transport) << 1);",
      "path": "src/net.h",
      "position": null,
      "original_position": 13,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356610866,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Maybe to avoid returning `0` if first name and last name happen to be equal?\r\n\r\nIndeed, makes sense.\r\n\r\n> I think for the purposes of hashing `m_added_node_params` this suffices:\r\n> \r\n> ```c++\r\n>         return std::hash<std::string>()(p.m_added_node) ^ p.m_use_v2transport;\r\n> ```\r\n\r\n👍 \r\n\r\n> However `std::hash` is not used anywhere in the code (modulo in some tests and benchmarks). `CServiceHash` uses `CSipHasher`. If that is to be used here, then it would look like:\r\n> \r\n> ```c++\r\n>         CSipHasher hasher(m_salt_k0, m_salt_k1);\r\n>         hasher.Write(MakeUCharSpan(p.m_added_node));\r\n>         hasher.Write(p.m_use_v2transport);\r\n>         return static_cast<size_t>(hasher.Finalize());\r\n> ```\r\n> \r\n> Or use some of the stateless `Hash*` functions from `src/hash.h`.\r\n\r\n👍 \r\n",
      "created_at": "2023-10-17T13:50:12Z",
      "updated_at": "2023-10-17T13:50:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1362154109",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362154109"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 113,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362269096",
      "pull_request_review_id": 1682593573,
      "id": 1362269096,
      "node_id": "PRRC_kwDOABII585RMpOo",
      "diff_hunk": "@@ -101,6 +101,17 @@ typedef int64_t NodeId;\n struct AddedNodeParams {\n     std::string m_added_node;\n     bool m_use_v2transport;\n+    bool operator==(const AddedNodeParams& p) const\n+    {\n+        return m_added_node == p.m_added_node && m_use_v2transport == p.m_use_v2transport;\n+    }\n+};\n+\n+struct AddedNodeHasher {\n+    size_t operator()(const AddedNodeParams& p) const noexcept\n+    {\n+        return std::hash<std::string>()(p.m_added_node) ^ (std::hash<bool>()(p.m_use_v2transport) << 1);",
      "path": "src/net.h",
      "position": null,
      "original_position": 13,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2a9db3a16a93d497bfe496b7c35edac975ee81d2",
      "in_reply_to_id": 1356610866,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "<strike>Updated with the `CSipHasher` version (thanks!)</strike>\r\n\r\nEdit: the addnode test in `test/functional/rpc_net.py` failed with the `CSipHasher` version suggestion (implemented like `CServiceHash` or `CNetAddrHash`).\r\n\r\nUsing `return std::hash<std::string>()(p.m_added_node) ^ p.m_use_v2transport;` in the latest push.",
      "created_at": "2023-10-17T14:53:54Z",
      "updated_at": "2023-10-24T02:19:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1362269096",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362269096"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 113,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1363082393",
      "pull_request_review_id": 1683867144,
      "id": 1363082393,
      "node_id": "PRRC_kwDOABII585RPvyZ",
      "diff_hunk": "@@ -408,9 +409,32 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    const bool inbound{conn_type == ConnectionType::INBOUND};\n+    CNode* pnode{nullptr};\n+    if (inbound) {\n+        // For accepting an inbound connection, check all existing connections by addr only.\n+        pnode = FindNode(static_cast<CNetAddr>(service));\n+    } else {\n+        // For making an outbound connection, check the existing outbound connections\n+        // by addr and port, and if none, then inbound connections by addr only.\n+        pnode = FindNode(service.ToStringAddrPort(), /*inbound=*/false);",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 54,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "in_reply_to_id": 1362086687,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Proposed an implementation:\r\n\r\n```cpp\r\npnode = FindNode(service, /*inbound=*/false);\r\nif (!pnode || !pnode->addr.IsValid()) pnode = FindNode(service.ToStringAddrPort(), /*inbound=*/false);\r\nif (!pnode || !pnode->addr.IsValid()) pnode = FindNode(static_cast<CNetAddr>(service), /*inbound=*/true);\r\n```",
      "created_at": "2023-10-18T03:15:37Z",
      "updated_at": "2023-10-18T03:15:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1363082393",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1363082393"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 424,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1363491489",
      "pull_request_review_id": 1684470261,
      "id": 1363491489,
      "node_id": "PRRC_kwDOABII585RRTqh",
      "diff_hunk": "@@ -408,9 +409,32 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    const bool inbound{conn_type == ConnectionType::INBOUND};\n+    CNode* pnode{nullptr};\n+    if (inbound) {\n+        // For accepting an inbound connection, check all existing connections by addr only.\n+        pnode = FindNode(static_cast<CNetAddr>(service));\n+    } else {\n+        // For making an outbound connection, check the existing outbound connections\n+        // by addr and port, and if none, then inbound connections by addr only.\n+        pnode = FindNode(service.ToStringAddrPort(), /*inbound=*/false);",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 54,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "in_reply_to_id": 1362086687,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Looks good. Can `CNode::addr` ever be invalid?",
      "created_at": "2023-10-18T08:41:50Z",
      "updated_at": "2023-10-18T08:41:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1363491489",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1363491489"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 424,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1369594937",
      "pull_request_review_id": 1693979860,
      "id": 1369594937,
      "node_id": "PRRC_kwDOABII585Rolw5",
      "diff_hunk": "@@ -408,9 +409,32 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    const bool inbound{conn_type == ConnectionType::INBOUND};\n+    CNode* pnode{nullptr};\n+    if (inbound) {\n+        // For accepting an inbound connection, check all existing connections by addr only.\n+        pnode = FindNode(static_cast<CNetAddr>(service));\n+    } else {\n+        // For making an outbound connection, check the existing outbound connections\n+        // by addr and port, and if none, then inbound connections by addr only.\n+        pnode = FindNode(service.ToStringAddrPort(), /*inbound=*/false);",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 54,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "in_reply_to_id": 1362086687,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not sure, so keeping as belt and suspenders.",
      "created_at": "2023-10-24T03:45:13Z",
      "updated_at": "2023-10-24T03:45:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1369594937",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1369594937"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 424,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1369597289",
      "pull_request_review_id": 1693983561,
      "id": 1369597289,
      "node_id": "PRRC_kwDOABII585RomVp",
      "diff_hunk": "@@ -408,9 +409,32 @@ CNode* CConnman::FindNode(const CService& addr)\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains\n+    const CService service{MaybeFlipIPv6toCJDNS(addr)};\n+    const bool inbound{conn_type == ConnectionType::INBOUND};\n+    CNode* pnode{nullptr};\n+    if (inbound) {\n+        // For accepting an inbound connection, check all existing connections by addr only.\n+        pnode = FindNode(static_cast<CNetAddr>(service));\n+    } else {\n+        // For making an outbound connection, check the existing outbound connections\n+        // by addr and port, and if none, then inbound connections by addr only.\n+        pnode = FindNode(service.ToStringAddrPort(), /*inbound=*/false);\n+        if (!pnode) pnode = FindNode(static_cast<CNetAddr>(service), /*inbound=*/true);\n+    }\n+    if (pnode && log) {\n+        LogPrintLevel(BCLog::NET, inbound ? BCLog::Level::Debug : BCLog::Level::Info,\n+                      \"Not %s new %s connection%s, already connected to %s %s %s peer=%d%s, version=%d, subver=%s\\n\",\n+                      inbound ? \"accepting\" : \"opening\", ConnectionTypeAsString(conn_type),\n+                      fLogIPs ? strprintf(\" %s %s\", inbound ? \"from\" : \"to\", addr.ToStringAddrPort()) : \"\",\n+                      TransportTypeAsString(pnode->m_transport->GetInfo().transport_type),\n+                      pnode->ConnectionTypeAsString(), GetNetworkName(pnode->ConnectedThroughNetwork()),",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 63,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "44ceac2ef9992c799dce22477a5884bd82ba9860",
      "in_reply_to_id": 1362096272,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Dereferencing `pnode` after `FindNode()` has released `m_nodes_mutex` is not safe. I don't like adding recursive mutex calls, but without altering `FindNode()` we have to do that.\r\n\r\nDone, and moved the locking from the FindNode* methods to their callers.",
      "created_at": "2023-10-24T03:46:50Z",
      "updated_at": "2023-10-24T03:46:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1369597289",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1369597289"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": 425,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370281097",
      "pull_request_review_id": 1695037517,
      "id": 1370281097,
      "node_id": "PRRC_kwDOABII585RrNSJ",
      "diff_hunk": "@@ -1819,6 +1819,14 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+\n+    // Do not accept inbound connections from peers already connected to us.",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2ec971326d3de33455a626b8189e0375fc88061f",
      "in_reply_to_id": null,
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Just because the connections come from the same IP does no mean it is the same peer, e.g. multiple peers could be connecting to you through the same Tor exit relay.\r\n\r\nThis does not seem like a bug fix and more like a behavior change. Our inbound eviction logic should handle stuff like this and it probably already does.",
      "created_at": "2023-10-24T14:25:53Z",
      "updated_at": "2023-10-24T14:25:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370281097",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370281097"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1823,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370290642",
      "pull_request_review_id": 1695050402,
      "id": 1370290642,
      "node_id": "PRRC_kwDOABII585RrPnS",
      "diff_hunk": "@@ -328,42 +329,67 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+CNode* CConnman::FindNode(const CNetAddr& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n+        if (static_cast<CNetAddr>(pnode->addr) == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-CNode* CConnman::FindNode(const std::string& addrName)\n+CNode* CConnman::FindNode(const std::string& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n+        if (pnode->m_addr_name == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+CNode* CConnman::FindNode(const CService& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n+        if (static_cast<CService>(pnode->addr) == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 58,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "f196b096f55f909e2bb63d5ff43bc3418c0ebbab",
      "in_reply_to_id": null,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```cpp\r\n    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains\r\n```\r\n\r\nThis seems very out of place to me, and would also prevent writing certain types of tests?",
      "created_at": "2023-10-24T14:30:42Z",
      "updated_at": "2023-10-24T14:30:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370290642",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370290642"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 367,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370295096",
      "pull_request_review_id": 1695055890,
      "id": 1370295096,
      "node_id": "PRRC_kwDOABII585RrQs4",
      "diff_hunk": "@@ -1819,6 +1819,14 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+\n+    // Do not accept inbound connections from peers already connected to us.",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2ec971326d3de33455a626b8189e0375fc88061f",
      "in_reply_to_id": 1370281097,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Inbound tor peers are exempted from this check.  I do see many such redundant connection attempts logged when running this branch. In the case of I2P peers, needlessly accepting to build these tunnels can be expensive. As mentioned in the commit message, the other fixes in this PR may mitigate this behavior by our peers, but not for nodes running earlier versions of Bitcoin Core.",
      "created_at": "2023-10-24T14:32:46Z",
      "updated_at": "2023-10-24T14:32:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370295096",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370295096"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1823,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370296681",
      "pull_request_review_id": 1695058000,
      "id": 1370296681,
      "node_id": "PRRC_kwDOABII585RrRFp",
      "diff_hunk": "@@ -328,42 +329,67 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+CNode* CConnman::FindNode(const CNetAddr& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n+        if (static_cast<CNetAddr>(pnode->addr) == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-CNode* CConnman::FindNode(const std::string& addrName)\n+CNode* CConnman::FindNode(const std::string& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n+        if (pnode->m_addr_name == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+CNode* CConnman::FindNode(const CService& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n+        if (static_cast<CService>(pnode->addr) == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 58,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "f196b096f55f909e2bb63d5ff43bc3418c0ebbab",
      "in_reply_to_id": 1370290642,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is required currently for several of our p2p functional tests. They would need to be updated not to make bilateral connections.",
      "created_at": "2023-10-24T14:33:33Z",
      "updated_at": "2023-10-24T14:34:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370296681",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370296681"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 367,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370301459",
      "pull_request_review_id": 1695064681,
      "id": 1370301459,
      "node_id": "PRRC_kwDOABII585RrSQT",
      "diff_hunk": "@@ -328,42 +329,67 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+CNode* CConnman::FindNode(const CNetAddr& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n+        if (static_cast<CNetAddr>(pnode->addr) == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-CNode* CConnman::FindNode(const std::string& addrName)\n+CNode* CConnman::FindNode(const std::string& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n+        if (pnode->m_addr_name == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+CNode* CConnman::FindNode(const CService& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n+        if (static_cast<CService>(pnode->addr) == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 58,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "f196b096f55f909e2bb63d5ff43bc3418c0ebbab",
      "in_reply_to_id": 1370290642,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Which tests?",
      "created_at": "2023-10-24T14:35:21Z",
      "updated_at": "2023-10-24T14:35:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370301459",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370301459"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 367,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370307319",
      "pull_request_review_id": 1695073724,
      "id": 1370307319,
      "node_id": "PRRC_kwDOABII585RrTr3",
      "diff_hunk": "@@ -1819,6 +1819,14 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+\n+    // Do not accept inbound connections from peers already connected to us.",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2ec971326d3de33455a626b8189e0375fc88061f",
      "in_reply_to_id": 1370281097,
      "user": {
        "login": "dergoegge",
        "id": 8077169,
        "node_id": "MDQ6VXNlcjgwNzcxNjk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8077169?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/dergoegge",
        "html_url": "https://github.com/dergoegge",
        "followers_url": "https://api.github.com/users/dergoegge/followers",
        "following_url": "https://api.github.com/users/dergoegge/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/dergoegge/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/dergoegge/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/dergoegge/subscriptions",
        "organizations_url": "https://api.github.com/users/dergoegge/orgs",
        "repos_url": "https://api.github.com/users/dergoegge/repos",
        "events_url": "https://api.github.com/users/dergoegge/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/dergoegge/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Inbound tor peers are exempted from this check.\r\n\r\nWe don't have logic for detecting if someone is using Tor as a proxy to connect to the IPv4 network. Our \"inbound Tor\" classification simply refers to someone connecting to our hidden service.\r\n\r\nAnother example would be multiple peers connecting to us through the same VPN provider.",
      "created_at": "2023-10-24T14:38:13Z",
      "updated_at": "2023-10-24T14:40:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370307319",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370307319"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1823,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370312562",
      "pull_request_review_id": 1695079464,
      "id": 1370312562,
      "node_id": "PRRC_kwDOABII585RrU9y",
      "diff_hunk": "@@ -328,42 +329,67 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+CNode* CConnman::FindNode(const CNetAddr& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n+        if (static_cast<CNetAddr>(pnode->addr) == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-CNode* CConnman::FindNode(const std::string& addrName)\n+CNode* CConnman::FindNode(const std::string& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n+        if (pnode->m_addr_name == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+CNode* CConnman::FindNode(const CService& addr, std::optional<bool> inbound)\n {\n-    LOCK(m_nodes_mutex);\n+    AssertLockHeld(m_nodes_mutex);\n     for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n+        if (static_cast<CService>(pnode->addr) == addr && (!inbound.has_value() || pnode->IsInboundConn() == inbound.value())) {\n             return pnode;\n         }\n     }\n     return nullptr;\n }\n \n-bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n+bool CConnman::AlreadyConnectedToAddress(const CAddress& addr, ConnectionType conn_type, bool log)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    if (Params().IsTestChain()) return false; // allow bilateral connections on test chains",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 58,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "f196b096f55f909e2bb63d5ff43bc3418c0ebbab",
      "in_reply_to_id": 1370290642,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> They would need to be updated not to make bilateral connections.\r\n\r\nI would suggest updating the tests to account for the behaviour you've changed (it may also help to make the bug fixes clearer for reviewers); rather than introducing per-chain, networking functionality. This seems generally dangerous, and mostly unintuitive.",
      "created_at": "2023-10-24T14:39:44Z",
      "updated_at": "2023-10-24T14:39:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370312562",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370312562"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 367,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370338677",
      "pull_request_review_id": 1695117966,
      "id": 1370338677,
      "node_id": "PRRC_kwDOABII585RrbV1",
      "diff_hunk": "@@ -1819,6 +1819,14 @@ void CConnman::CreateNodeFromAcceptedSocket(std::unique_ptr<Sock>&& sock,\n     }\n \n     const bool inbound_onion = std::find(m_onion_binds.begin(), m_onion_binds.end(), addr_bind) != m_onion_binds.end();\n+\n+    // Do not accept inbound connections from peers already connected to us.",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "2ec971326d3de33455a626b8189e0375fc88061f",
      "in_reply_to_id": 1370281097,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Ok, this could be dropped and deferred until later, to see if the other fixes resolve the behavior seen from peers (I think it's likely).",
      "created_at": "2023-10-24T14:47:53Z",
      "updated_at": "2023-10-24T14:47:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370338677",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370338677"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1823,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370365935",
      "pull_request_review_id": 1695165495,
      "id": 1370365935,
      "node_id": "PRRC_kwDOABII585Rrh_v",
      "diff_hunk": "@@ -2783,18 +2833,21 @@ std::vector<AddedNodeInfo> CConnman::GetAddedNodeInfo() const\n     }\n \n     for (const auto& addr : lAddresses) {\n-        CService service(LookupNumeric(addr.m_added_node, GetDefaultPort(addr.m_added_node)));\n+        CService service{MaybeFlipIPv6toCJDNS(LookupNumeric(addr.m_added_node, GetDefaultPort(addr.m_added_node)))};",
      "path": "src/net.cpp",
      "position": 291,
      "original_position": 288,
      "commit_id": "4238b6f0a7553ebc5cee6f7c77d3813193f7a322",
      "original_commit_id": "f196b096f55f909e2bb63d5ff43bc3418c0ebbab",
      "in_reply_to_id": null,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> MaybeFlipIPv6toCJDNS\r\n\r\nIs there any way to better encapsulate this `MaybeFlipIPv6toCJDNS()` usage? This seems to be a frequent pattern (a number of additional calls were added in #27071), and it seems like something that would be better handled at a lower level, rather than having to continually remember to wrap various networking-related calls.\r\n\r\nI guess this is also able to remain broken is various ways because we don't have any specific tests for this functionality?",
      "created_at": "2023-10-24T15:04:19Z",
      "updated_at": "2023-10-24T15:05:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370365935",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1370365935"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28248"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 2839,
      "original_line": 2839,
      "side": "RIGHT"
    }
  ]
}