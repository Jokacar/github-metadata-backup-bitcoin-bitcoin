{
  "type": "issue",
  "issue": {
    "id": 37453882,
    "node_id": "MDU6SXNzdWUzNzQ1Mzg4Mg==",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4493",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4493/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4493/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4493/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/4493",
    "number": 4493,
    "state": "closed",
    "state_reason": "completed",
    "title": "Potential deadlock on {cs_main, pnode->cs_vSend}",
    "body": "2014-07-09 10:10:33 POTENTIAL DEADLOCK DETECTED\n2014-07-09 10:10:33 Previous lock order was:\n2014-07-09 10:10:33  pnode->cs_vRecvMsg  net.cpp:1541\n2014-07-09 10:10:33  (1) cs_main  main.cpp:3887\n2014-07-09 10:10:33  (2) cs_vSend  net.h:480\n2014-07-09 10:10:33 Current lock order is:\n2014-07-09 10:10:33  (2) pnode->cs_vSend  net.cpp:1560\n2014-07-09 10:10:33  (1) cs_main  main.cpp:4387\n2014-07-09 10:10:33  (1) cs_main  main.cpp:1320\n\nThe problem seems to be:\n- Many paths of execution will grab cs_main and then cs_vSend, eg. ProcessMessage(\"tx\") locks cs_main and then can call pfrom->PushMessage if it rejects the tx.  PushMessage() obtains pnode->cs_vSend.  Another example: CheckBlock() will lock cs_main and then can call PushGetBlocks() which does a call to PushMessage() which locks pnode->cs_vSend.\n- As far as I can tell, there is just a single execution path that obtains these locks in the opposite order: ThreadMessageHandler() locks pnode->cs_vSend and then calls SendMessages() which locks cs_main in order to call IsInitialBlockDownload().\n\nThe least painful fix seems to be to change the SendMessages() code to not need cs_main.  Otherwise, ThreadMessageHandler() would need to lock cs_main prior to its SendMessages calls, which might be expensive use of the lock.  Any ideas on making the IsInitialBlockDownload() check available to SendMessages() without it having to lock cs_main every time?  Maybe caching it is possible?\n",
    "user": {
      "login": "ashleyholman",
      "id": 549484,
      "node_id": "MDQ6VXNlcjU0OTQ4NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/549484?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ashleyholman",
      "html_url": "https://github.com/ashleyholman",
      "followers_url": "https://api.github.com/users/ashleyholman/followers",
      "following_url": "https://api.github.com/users/ashleyholman/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ashleyholman/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ashleyholman/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ashleyholman/subscriptions",
      "organizations_url": "https://api.github.com/users/ashleyholman/orgs",
      "repos_url": "https://api.github.com/users/ashleyholman/repos",
      "events_url": "https://api.github.com/users/ashleyholman/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ashleyholman/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 5,
    "closed_at": "2017-01-23T17:56:46Z",
    "created_at": "2014-07-09T11:02:03Z",
    "updated_at": "2021-09-08T12:25:23Z"
  },
  "events": [
    {
      "event": "renamed",
      "id": 139647919,
      "node_id": "MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTM5NjQ3OTE5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/139647919",
      "actor": {
        "login": "ashleyholman",
        "id": 549484,
        "node_id": "MDQ6VXNlcjU0OTQ4NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/549484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ashleyholman",
        "html_url": "https://github.com/ashleyholman",
        "followers_url": "https://api.github.com/users/ashleyholman/followers",
        "following_url": "https://api.github.com/users/ashleyholman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ashleyholman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ashleyholman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ashleyholman/subscriptions",
        "organizations_url": "https://api.github.com/users/ashleyholman/orgs",
        "repos_url": "https://api.github.com/users/ashleyholman/repos",
        "events_url": "https://api.github.com/users/ashleyholman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ashleyholman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-07-09T11:02:47Z",
      "rename": {
        "from": "Potential deadlock on {cs_main, cs_vSend}",
        "to": "Potential deadlock on {cs_main, pnode->cs_vSend}"
      }
    },
    {
      "event": "commented",
      "id": 48457526,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDU3NTI2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48457526",
      "actor": {
        "login": "ashleyholman",
        "id": 549484,
        "node_id": "MDQ6VXNlcjU0OTQ4NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/549484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ashleyholman",
        "html_url": "https://github.com/ashleyholman",
        "followers_url": "https://api.github.com/users/ashleyholman/followers",
        "following_url": "https://api.github.com/users/ashleyholman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ashleyholman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ashleyholman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ashleyholman/subscriptions",
        "organizations_url": "https://api.github.com/users/ashleyholman/orgs",
        "repos_url": "https://api.github.com/users/ashleyholman/repos",
        "events_url": "https://api.github.com/users/ashleyholman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ashleyholman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-07-09T11:18:38Z",
      "updated_at": "2014-07-09T11:18:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "Oh, I've just realised that SendMessages() does a TRY_LOCK() on cs_main first, and if it can't get the lock it returns early before calling IsInitialBlockDownload().  So does that mean its not a deadlock risk in actuality?  Although the LOCK() calls are in the opposite order, there may be no chance of deadlock?\n",
      "user": {
        "login": "ashleyholman",
        "id": 549484,
        "node_id": "MDQ6VXNlcjU0OTQ4NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/549484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ashleyholman",
        "html_url": "https://github.com/ashleyholman",
        "followers_url": "https://api.github.com/users/ashleyholman/followers",
        "following_url": "https://api.github.com/users/ashleyholman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ashleyholman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ashleyholman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ashleyholman/subscriptions",
        "organizations_url": "https://api.github.com/users/ashleyholman/orgs",
        "repos_url": "https://api.github.com/users/ashleyholman/repos",
        "events_url": "https://api.github.com/users/ashleyholman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ashleyholman/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/4493#issuecomment-48457526",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4493"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ashleyholman",
        "id": 549484,
        "node_id": "MDQ6VXNlcjU0OTQ4NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/549484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ashleyholman",
        "html_url": "https://github.com/ashleyholman",
        "followers_url": "https://api.github.com/users/ashleyholman/followers",
        "following_url": "https://api.github.com/users/ashleyholman/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ashleyholman/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ashleyholman/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ashleyholman/subscriptions",
        "organizations_url": "https://api.github.com/users/ashleyholman/orgs",
        "repos_url": "https://api.github.com/users/ashleyholman/repos",
        "events_url": "https://api.github.com/users/ashleyholman/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ashleyholman/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-07-09T11:33:41Z",
      "updated_at": "2014-07-09T11:33:41Z",
      "source": {
        "issue": {
          "id": 34258103,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTYzMTIzNzE=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4230",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4230/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4230/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4230/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/4230",
          "number": 4230,
          "state": "closed",
          "state_reason": null,
          "title": "ThreadMessageHandler: replace MilliSleep() with condition variable",
          "body": "I'm hoping to get some feedback on this.  It was mentioned by @gmaxwell that there is a 100ms sleep inside ThreadMessageHandler() which can delay the receiving and sending of network messages.  By replacing this with a semaphore, it can hopefully improve block propagation times.\n\nI haven't experienced any connections stalling with this patch, so it seems to work, and the ThreadMessageHandler() loop executed about 10 times per second on average when I tested with 8 peers.\n\nThere is still a lot of overhead since each execution of the loop does a scan of all nodes to check for new messages to send/receive, which I believe will happen every time there is a post() done on the semaphore. But, I haven't noticed any additional CPU load with this patch. \n\nI am yet to test how this effects block propagation.  Does anyone have a testing environment where you can roll out patches and test their effect on block latency?\n",
          "user": {
            "login": "ashleyholman",
            "id": 549484,
            "node_id": "MDQ6VXNlcjU0OTQ4NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/549484?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ashleyholman",
            "html_url": "https://github.com/ashleyholman",
            "followers_url": "https://api.github.com/users/ashleyholman/followers",
            "following_url": "https://api.github.com/users/ashleyholman/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ashleyholman/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ashleyholman/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ashleyholman/subscriptions",
            "organizations_url": "https://api.github.com/users/ashleyholman/orgs",
            "repos_url": "https://api.github.com/users/ashleyholman/repos",
            "events_url": "https://api.github.com/users/ashleyholman/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ashleyholman/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/18",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/18",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/18/labels",
            "id": 818033,
            "node_id": "MDk6TWlsZXN0b25lODE4MDMz",
            "number": 18,
            "state": "closed",
            "title": "0.11.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 21,
            "created_at": "2014-10-08T08:27:24Z",
            "updated_at": "2015-12-03T11:57:57Z",
            "closed_at": "2015-12-03T11:57:57Z"
          },
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 90,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/4230",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/4230",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/4230.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/4230.patch"
          },
          "closed_at": "2015-03-18T12:58:31Z",
          "created_at": "2014-05-25T08:16:08Z",
          "updated_at": "2021-09-08T10:35:01Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 48467411,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ4NDY3NDEx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/48467411",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-07-09T13:12:01Z",
      "updated_at": "2014-07-09T13:13:35Z",
      "author_association": "MEMBER",
      "body": "Well as long as there is one place where both locks are acquired (in any order) that's not a TRY_LOCK, there could be a deadlock there. If they are all TRY_LOCKS then indeed a deadlock cannot happen, but maybe livelock or thread starvation could (if both threads refuse to give up the other lock after getting the other one fails).\n\nAs for IsInitialBlockDownload: one idea would be to change it to return a global flag that is cleared only after the initial block download (+ check at initialization time). This would be more efficient than executing the checks every time as well.\n",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/4493#issuecomment-48467411",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4493"
    },
    {
      "event": "labeled",
      "id": 147585130,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDE0NzU4NTEzMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/147585130",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2014-07-31T07:47:13Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-01-08T03:25:07Z",
      "updated_at": "2016-01-08T03:25:07Z",
      "source": {
        "issue": {
          "id": 125534274,
          "node_id": "MDU6SXNzdWUxMjU1MzQyNzQ=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7314",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7314/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7314/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7314/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/7314",
          "number": 7314,
          "state": "closed",
          "state_reason": "completed",
          "title": "POTENTIAL DEADLOCK FYI",
          "body": "If anyone cares. I haven't had the time to look into this potential deadlock on regtest (after generating two blocks). The annoying error is related to #5405, so ignore that.\n\n2016-01-08 03:13:42 keypool reserve 17\n2016-01-08 03:13:42 CreateNewBlock(): total size 1000 txs: 0 fees: 0 sigops 100\n2016-01-08 03:13:42 UpdateTip: new best=5c1a7a90c6d94ff3a54c42c621f05942dba3945a455d8d1dc3183e1893c961f7  height=338  log2_work=9.4051415  tx=393  date=2016-01-08 03:13:42 progress=1.000000  cache=0.0MiB(1tx)\n2016-01-08 03:13:42 AddToWallet 95e658f43e5d2ef31ea15f5f7fef37b8d1461d46a28457ac8ab378113f091e34  new\n2016-01-08 03:13:42 keypool keep 17\n2016-01-08 03:13:42 CreateNewBlock(): total size 1000 txs: 0 fees: 0 sigops 100\n2016-01-08 03:13:42 ERROR: CheckProofOfWork(): hash doesn't match nBits\n2016-01-08 03:13:42 ERROR: CheckProofOfWork(): hash doesn't match nBits\n2016-01-08 03:13:42 UpdateTip: new best=3a3a194bcfcb9a11b5f71c0a177823ae1fa9f2459dcc30f93954596ce655c59f  height=339  log2_work=9.4093909  tx=394  date=2016-01-08 03:13:42 progress=1.000000  cache=0.0MiB(2tx)\n2016-01-08 03:13:42 AddToWallet 2aa2dcbde5483019739c2900dba89638661e34d83aa660acb1d458ce13cb00d9  new\n2016-01-08 03:13:42 POTENTIAL DEADLOCK DETECTED\n2016-01-08 03:13:42 Previous lock order was:\n2016-01-08 03:13:42  pnode->cs_vRecvMsg  net.cpp:1747 (TRY)\n2016-01-08 03:13:42  (1) cs_main  main.cpp:4628\n2016-01-08 03:13:42  (2) cs_vSend  net.cpp:2461\n2016-01-08 03:13:42 Current lock order is:\n2016-01-08 03:13:42  (2) pnode->cs_vSend  net.cpp:1766 (TRY)\n2016-01-08 03:13:42  (1) cs_main  main.cpp:5339 (TRY)\n2016-01-08 03:13:42  (1) cs_main  main.cpp:1369\n",
          "user": {
            "login": "ghost",
            "id": 10137,
            "node_id": "MDQ6VXNlcjEwMTM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ghost",
            "html_url": "https://github.com/ghost",
            "followers_url": "https://api.github.com/users/ghost/followers",
            "following_url": "https://api.github.com/users/ghost/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ghost/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ghost/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
            "organizations_url": "https://api.github.com/users/ghost/orgs",
            "repos_url": "https://api.github.com/users/ghost/repos",
            "events_url": "https://api.github.com/users/ghost/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ghost/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 7,
          "closed_at": "2016-01-08T09:59:14Z",
          "created_at": "2016-01-08T03:20:24Z",
          "updated_at": "2021-09-08T12:23:17Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-02-16T17:23:21Z",
      "updated_at": "2016-02-16T17:23:21Z",
      "source": {
        "issue": {
          "id": 131536881,
          "node_id": "MDU6SXNzdWUxMzE1MzY4ODE=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7470",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7470/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7470/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/7470/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/7470",
          "number": 7470,
          "state": "closed",
          "state_reason": "completed",
          "title": "Potential deadlock assertion in net code on 0.12RC3",
          "body": "<githubroot>I was running 0.12RC2, I downloaded 0.12RC3 (b1f031d) today and did a configure make (without a clean). This caused my mainnet and testnet nodes to crash within 1s. I tried to do a reindex on the mainnet node, and that did nothing (I shouldn't have). I did a \"make clean\", and rebuilt, now the testnet node appears okay  (didn't try a reindex) however now the mainnet node crashes in minutes (but it sometimes takes a while, so I don't see it) with the following error:\n\nCrash error:\n\nbitcoind: sync.cpp:112: void potential_deadlock_detected(const std::pair<void*, void*>&, const LockStack&, const LockStack&): Assertion `onlyMaybeDeadlock' failed.  \n\ndebug.log tail:\n\nLoadExternalBlockFile: Processing out of order child 000000000000004f2d365bee2d14cea4cd33c238a75f5dee833048fa0f3855ac of 0000000000000004851be1a8e239bfd84b806f4e7341f09b73ffa7ffe7ea4700\n2016-02-04 23:51:14 UpdateTip: new best=000000000000004f2d365bee2d14cea4cd33c238a75f5dee833048fa0f3855ac  height=246847  log2_work=70.747326  tx=20743335  date=2013-07-16 11:09:45 progress=0.087758  cache=5.6MiB(7660tx)\n2016-02-04 23:51:14 POTENTIAL DEADLOCK DETECTED\n2016-02-04 23:51:14 Previous lock order was:\n2016-02-04 23:51:14  (1) pnode->cs_vRecvMsg  net.cpp:1736 (TRY)\n2016-02-04 23:51:14  (2) cs_main  main.cpp:296\n2016-02-04 23:51:14 Current lock order is:\n2016-02-04 23:51:14  pnode->cs_vSend  net.cpp:1755 (TRY)\n2016-02-04 23:51:14  (2) cs_main  main.cpp:5345 (TRY)\n2016-02-04 23:51:14  (1) pto->cs_inventory  main.cpp:5445\n\nI'm not sure if it's relevant but I also run \"getblockchaininfo\" every 0.5s to get the verification progress (I have a CLI progress bar). I've been considering doing a blockchain redownload, but I don't want to if it won't fix anything.</githubroot>\n",
          "user": {
            "login": "GIJensen",
            "id": 16140350,
            "node_id": "MDQ6VXNlcjE2MTQwMzUw",
            "avatar_url": "https://avatars.githubusercontent.com/u/16140350?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/GIJensen",
            "html_url": "https://github.com/GIJensen",
            "followers_url": "https://api.github.com/users/GIJensen/followers",
            "following_url": "https://api.github.com/users/GIJensen/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/GIJensen/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/GIJensen/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/GIJensen/subscriptions",
            "organizations_url": "https://api.github.com/users/GIJensen/orgs",
            "repos_url": "https://api.github.com/users/GIJensen/repos",
            "events_url": "https://api.github.com/users/GIJensen/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/GIJensen/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98298007,
              "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
              "name": "P2P",
              "color": "006b75",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 19,
          "closed_at": "2016-06-02T11:21:44Z",
          "created_at": "2016-02-05T02:25:46Z",
          "updated_at": "2021-09-08T12:34:54Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 274565444,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI3NDU2NTQ0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/274565444",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-23T17:56:46Z",
      "updated_at": "2017-01-23T17:56:46Z",
      "author_association": "MEMBER",
      "body": "I'm going to close this, assuming that it was fixed by #7846 or other locking changes in recent time. Feel free to reopen if other problems are found.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/4493#issuecomment-274565444",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4493"
    },
    {
      "event": "closed",
      "id": 933231243,
      "node_id": "MDExOkNsb3NlZEV2ZW50OTMzMjMxMjQz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/933231243",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-23T17:56:46Z"
    },
    {
      "event": "commented",
      "id": 276144478,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjE0NDQ3OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/276144478",
      "actor": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-30T18:17:23Z",
      "updated_at": "2017-01-30T18:18:55Z",
      "author_association": "NONE",
      "body": "Seen today on 0.13.2:\r\n```\r\n2017-01-30 18:03:10 receive version message: /Satoshi:0.13.1/: version 70014, blocks=1087141, us=38.121.165.30:32483, peer=8\r\n2017-01-30 18:03:10 AdvertiseLocal: advertising address 38.121.165.30:18333\r\n2017-01-30 18:03:10 connect() to [2001:0:9d38:90d7:2cfe:1245:ac28:731a]:18333 failed: Network is unreachable (101)\r\n2017-01-30 18:03:37 POTENTIAL DEADLOCK DETECTED\r\n2017-01-30 18:03:37 Previous lock order was:\r\n2017-01-30 18:03:37  pnode->cs_vRecvMsg  net.cpp:1877 (TRY)\r\n2017-01-30 18:03:37  (1) cs_main  main.cpp:5911\r\n2017-01-30 18:03:37  (2) cs_vSend  net.cpp:2585\r\n2017-01-30 18:03:37 Current lock order is:\r\n2017-01-30 18:03:37  (2) pnode->cs_vSend  net.cpp:1896 (TRY)\r\n2017-01-30 18:03:37  (1) cs_main  main.cpp:6483 (TRY)\r\n2017-01-30 18:03:37  (1) cs_main  main.cpp:1745\r\n2017-01-30 18:03:37 UpdateTip: new best=000000000000093a78ec61c44009ff74a44de94fd6e6b0fff2422804d180c082 height=1087142 version=0x20000000 log2_work=68.931904 tx=13040484 date='2017-01-30 18:03:19' progress=1.000000 cache=2.1MiB(9691tx) warning='1 of last 100 blocks have unexpected version'\r\n2017-01-30 18:03:51 UpdateTip: new best=00000000000005f96e01b15ac4cfb95859e3eecf7f4885274e1f24b3d7e3fde9 height=1087143 version=0x20000000 log2_work=68.931923 tx=13040485 date='2017-01-30 18:03:37' progress=1.000000 cache=2.1MiB(9692tx) warning='1 of last 100 blocks have unexpected version'\r\n2017-01-30 18:04:11 UpdateTip: new best=00000000000008bf5f8409d19de20f248f5b61e391071afd69bc9119efa3c0a4 height=1087144 version=0x20000000 log2_work=68.931941 tx=13040487 date='2017-01-30 18:03:51' progress=1.000000 cache=2.1MiB(9694tx) warning='1 of last 100 blocks have unexpected version'\r\n2017-01-30 18:04:35 connect() to [2001:0:9d38:6ab8:248d:2e3a:983b:b04a]:18333 failed: Network is unreachable (101)\r\n2017-01-30 18:05:58 POTENTIAL DEADLOCK DETECTED\r\n2017-01-30 18:06:00 Previous lock order was:\r\n2017-01-30 18:06:05  pnode->cs_vRecvMsg  net.cpp:1877 (TRY)\r\n2017-01-30 18:06:07  (1) cs_main  main.cpp:5911\r\n2017-01-30 18:06:13  (2) cs_vSend  net.cpp:2585\r\n2017-01-30 18:06:16 Current lock order is:\r\n2017-01-30 18:06:28  (2) pnode->cs_vSend  net.cpp:1896 (TRY)\r\n2017-01-30 18:06:31  (1) cs_main  main.cpp:6483 (TRY)\r\n2017-01-30 18:06:32  (1) cs_main  main.cpp:1745\r\n2017-01-30 18:08:58 UpdateTip: new best=000000000000095216f28d2cd715abee070cd83079411a93463ec61fa2a782eb height=1087145 version=0x20000000 log2_work=68.931959 tx=13040491 date='2017-01-30 18:05:29' progress=1.000000 cache=2.1MiB(9701tx) warning='1 of last 100 blocks have unexpected version'\r\n2017-01-30 18:08:58 POTENTIAL DEADLOCK DETECTED\r\n2017-01-30 18:08:58 Previous lock order was:\r\n2017-01-30 18:08:58  pnode->cs_vRecvMsg  net.cpp:1877 (TRY)\r\n2017-01-30 18:08:58  (1) cs_main  main.cpp:5911\r\n2017-01-30 18:08:58  (2) cs_vSend  net.cpp:2585\r\n2017-01-30 18:08:58 Current lock order is:\r\n2017-01-30 18:08:58  (2) pnode->cs_vSend  net.cpp:1896 (TRY)\r\n2017-01-30 18:08:58  (1) cs_main  main.cpp:6483 (TRY)\r\n2017-01-30 18:08:58  (1) cs_main  main.cpp:1745\r\n2017-01-30 18:08:58 UpdateTip: new best=000000000000024c5841a34b630828a27114c895ac7de8f1cb3376ec7d7a35a1 height=1087146 version=0x20000000 log2_work=68.931977 tx=13040493 date='2017-01-30 18:08:04' progress=1.000000 cache=2.1MiB(9703tx) warning='1 of last 100 blocks have unexpected version'\r\n```\r\n\r\nBitcoin did seem to sync successfully on testnet, and I'm not entirely sure if these message indicated a real problem?",
      "user": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/4493#issuecomment-276144478",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4493"
    },
    {
      "event": "commented",
      "id": 276151595,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI3NjE1MTU5NQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/276151595",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-01-30T18:43:27Z",
      "updated_at": "2017-01-30T18:43:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Yes, this is a spurious warning on many recent versions of Bitcoin Core, however, it is believed to have been \"fixed\" in master/will be fixed in 0.14.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/4493#issuecomment-276151595",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/4493"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-06-08T08:28:15Z",
      "updated_at": "2018-06-08T08:28:15Z",
      "source": {
        "issue": {
          "id": 330565833,
          "node_id": "MDU6SXNzdWUzMzA1NjU4MzM=",
          "url": "https://api.github.com/repos/bulwark-crypto/Bulwark/issues/84",
          "repository_url": "https://api.github.com/repos/bulwark-crypto/Bulwark",
          "labels_url": "https://api.github.com/repos/bulwark-crypto/Bulwark/issues/84/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bulwark-crypto/Bulwark/issues/84/comments",
          "events_url": "https://api.github.com/repos/bulwark-crypto/Bulwark/issues/84/events",
          "html_url": "https://github.com/bulwark-crypto/Bulwark/issues/84",
          "number": 84,
          "state": "closed",
          "state_reason": "completed",
          "title": "Error \"POTENTIAL DEADLOCK DETECTED\"",
          "body": "### User Story\r\n\r\nBeen getting reports about a deadlock error from multiple users in the last few weeks.  \r\nError coincides with high CPU usage.\r\n\r\n### Description\r\n\r\n*Type*: Bug\r\n\r\nbulwarkd reports a possible deadlock as shown in the Logs section. \r\nCPU usage often grows to 100% when this happens.\r\n\r\n\r\n#### Expected behavior\r\n\r\nShould not deadlock.\r\n\r\n#### Actual behavior\r\n\r\nSeems to deadlock.\r\n\r\n### Reproduction\r\n\r\nUnknown, appears to happen without any known pattern on VPS.\r\n\r\n### Solution\r\n\r\nIt seems that we inherited this problem from the [Bitcoin codebase](https://github.com/bitcoin/bitcoin/issues/4493).\r\nApparently, they fixed it in or after version 0.14.\r\n\r\n- [ ] Research if and when Bitcoin Core fixed this bug\r\n- [ ] Update Bulwark codebase to newer version of Bitcoin Core\r\n\r\n### Additional Information\r\n\r\n* Bulwark version: 1.2.4.0\r\n\r\n* Operating System: Linux\r\n\r\n#### Logs\r\n\r\n```\r\n2018-06-08 08:01:09 POTENTIAL DEADLOCK DETECTED\r\n2018-06-08 08:01:09 Previous lock order was:\r\n2018-06-08 08:01:09  pnode->cs_vRecvMsg  net.cpp:1380\r\n2018-06-08 08:01:09  (1) cs_main  main.cpp:5007\r\n2018-06-08 08:01:09  (2) cs_vSend  net.cpp:1990\r\n2018-06-08 08:01:09 Current lock order is:\r\n2018-06-08 08:01:09  (2) pnode->cs_vSend  net.cpp:1396\r\n2018-06-08 08:01:09  (1) cs_main  main.cpp:5794\r\n2018-06-08 08:01:09  (1) cs_main  main.cpp:1925\r\n```\r\n",
          "user": {
            "login": "ghost",
            "id": 10137,
            "node_id": "MDQ6VXNlcjEwMTM3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10137?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ghost",
            "html_url": "https://github.com/ghost",
            "followers_url": "https://api.github.com/users/ghost/followers",
            "following_url": "https://api.github.com/users/ghost/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ghost/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ghost/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ghost/subscriptions",
            "organizations_url": "https://api.github.com/users/ghost/orgs",
            "repos_url": "https://api.github.com/users/ghost/repos",
            "events_url": "https://api.github.com/users/ghost/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ghost/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 1,
          "closed_at": "2018-06-28T23:45:56Z",
          "created_at": "2018-06-08T08:28:15Z",
          "updated_at": "2019-02-26T09:04:21Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "locked",
      "id": 5271964906,
      "node_id": "LOE_lADOABII584CO4A6zwAAAAE6O8zq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5271964906",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-09-08T12:25:23Z",
      "lock_reason": "resolved"
    }
  ]
}