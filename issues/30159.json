{
  "type": "issue",
  "issue": {
    "id": 2313204824,
    "node_id": "I_kwDOABII586J4LRY",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/30159",
    "number": 30159,
    "state": "open",
    "state_reason": null,
    "title": "LevelDB read failure: Corruption: block checksum mismatch",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nWhen running in prune=550 mode, I consistently get the following error about once every 10 days per machine:\r\n\r\nLevelDB read failure: Corruption: block checksum mismatch\r\n\r\nThere is no recovery from this error (reindex doesn't work in prune mode), so the only solution is to nuke the datadir and do a full resync or restore the datadir from a backup.\r\n\r\nSearching the webs, the conventional wisdom is that this is caused by a hardware/disk problem. That is definitely not the case here, as I'll explain. I suspect a bug in the code is causing some thread to write to an incorrect memory location, possibly a memory use-after-free/reallocation/reorganization bug.\r\n\r\nDetails:\r\n\r\nI set up bitcoind in prune=550 mode to run on ten Amazon EC2 t4g.nano instances that each have 512mb ram and a 4 GB gpt3 (SSD) swap drive. The only job the machines have is to track the blockchain and provide RPC information on recent blocks and confirmed transactions. There is a lot of memory pressure and paging when a block comes in, but since speed is not an issue, that shouldn't be a problem.\r\n\r\nAbout once per day, bitcoind on one of the machines reports LevelDB read failure: Corruption: block checksum mismatch and stops working. The only fix is to delete and restore the bitcoin data directory, and then restart bitcoind to sync and catch back up.\r\n\r\nI am virtually certain this is a software bug in bitcoind because (a) Amazon EC2 has some of the most tested and reliable hardware in the world; (b) this problem had shown up on all ten Amazon EC2 instances all running in different EC2 availability zones; (c) Bitcoin Cash Node is also installed on all ten machines, and it has had zero problems. Bitcoin Cash Node forked from bitcoin core a while back and also uses LevelDB, among other commonalities.\r\n\r\nI tried this with the bitcoin binary distributions bitcoin-25.2-aarch64-linux-gnu.tar.gz and bitcoin-26.1-aarch64-linux-gnu.tar.gz, as well as well as bitcoin-25.2 compiled from source, and it made no difference.\r\n\r\nI collected some of the files that have the checksum mismatch and can provide them if someone wants to look for clues on which software component corrupted the data.\n\n### Expected behaviour\n\nI expect to never see a LevelDB data corruption failure.\n\n### Steps to reproduce\n\nbitcoind config file:\r\n\r\ndatadir=/bdata/bitcoin-data\r\n\r\ndiscover=0\r\nlisten=1\r\nmaxconnections=24\r\n\r\npar=1\r\n\r\nblocksonly=1\r\ndbcache=200\r\nmaxsigcachesize=4\r\nprune=550\r\n\r\nmaxmempool=5\r\nblockreconstructionextratxn=1\r\nmaxorphantx=1\r\nmempoolexpiry=1\r\npersistmempool=0\r\n\r\ndisablewallet=1\r\n\r\nserver=1\r\nrpcallowip=127.0.0.1\r\nrpcuser=btc\r\nrpcpassword=btc\r\nrpcworkqueue=40\r\nrpcthreads=1\r\n\r\nprinttoconsole=1\r\nnodebuglogfile=1\r\n\r\n[main]\r\nrpcport=8332\r\nrpcbind=127.0.0.1:8332\r\nbind=[::]:9333\r\nbind=127.0.0.1:8334=onion\n\n### Relevant log output\n\nThis is one example, I have more, they all look the same:\r\n\r\nStarted bitcoind.service.\r\n2024-05-22T17:53:08Z Bitcoin Core version v25.2.0 (release build)\r\n ...\r\n2024-05-22T19:05:51Z UpdateTip: new best=00000000000000000002c656268be2b9e044b5963af0507e16414552aa526d57 height=844603 version=0x237c6000 log2_work=94.939158 tx=1009037420 date='2024-05-22T14:46:04Z' progress=0.999943 cache=72.4MiB(515946txo)\r\n2024-05-22T19:05:57Z UpdateTip: new best=000000000000000000028401d5cd96ea647cc9adae836735615d7dbf64feed6f height=844604 version=0x2f50c000 log2_work=94.939172 tx=1009041112 date='2024-05-22T15:00:11Z' progress=0.999946 cache=73.9MiB(526621txo)\r\n2024-05-22T19:06:00Z Socks5() connect to 78.44.10.186:8333 failed: connection refused\r\n2024-05-22T19:06:03Z UpdateTip: new best=000000000000000000018332b3b2594e340a0dfd150cbc2a852930c0cddaa91b height=844605 version=0x20000000 log2_work=94.939185 tx=1009044861 date='2024-05-22T15:14:46Z' progress=0.999949 cache=75.4MiB(537704txo)\r\n2024-05-22T19:06:05Z Socks5() connect to 2601:283:5080:8540::55d6:8333 failed: general failure\r\n2024-05-22T19:06:12Z UpdateTip: new best=0000000000000000000163e90fef2b79654d0235d68a603f46ac5e41ce62d827 height=844606 version=0x2e000000 log2_work=94.939199 tx=1009048116 date='2024-05-22T15:31:30Z' progress=0.999953 cache=76.8MiB(548883txo)\r\n2024-05-22T19:06:20Z UpdateTip: new best=00000000000000000001a4ce0b96e5a761337a84974d27a694c7b8d2c74b8cf0 height=844607 version=0x27a94000 log2_work=94.939212 tx=1009050900 date='2024-05-22T15:43:50Z' progress=0.999956 cache=78.1MiB(558437txo)\r\n2024-05-22T19:06:26Z UpdateTip: new best=00000000000000000001d82049db35f2dfabccfba593ee3a433f0500c2734f4e height=844608 version=0x274a6000 log2_work=94.939226 tx=1009054026 date='2024-05-22T16:09:29Z' progress=0.999961 cache=79.5MiB(569127txo)\r\n2024-05-22T19:06:49Z Socks5() connect to 212.102.36.243:8333 failed: general failure\r\n2024-05-22T19:07:09Z UpdateTip: new best=00000000000000000003571b667acb77721004099827b38802f77500cd370d8b height=844609 version=0x20000000 log2_work=94.939240 tx=1009057717 date='2024-05-22T16:21:29Z' progress=0.999964 cache=5.4MiB(0txo)\r\n2024-05-22T19:07:17Z LevelDB read failure: Corruption: block checksum mismatch: /bdata/bitcoin-data/chainstate/5847811.ldb\r\n2024-05-22T19:07:17Z Fatal LevelDB error: Corruption: block checksum mismatch: /bdata/bitcoin-data/chainstate/5847811.ldb\r\n2024-05-22T19:07:17Z You can use -debug=leveldb to get more complete diagnostic messages\r\n2024-05-22T19:07:17Z Error: Error reading from database, shutting down.\r\nError: Error reading from database, shutting down.\r\n2024-05-22T19:07:17Z Error reading from database: Fatal LevelDB error: Corruption: block checksum mismatch: /bdata/bitcoin-data/chainstate/5847811.ldb\r\nbitcoind.service: Main process exited, code=dumped, status=6/ABRT\r\nbitcoind.service: Failed with result 'core-dump'.\r\nbitcoind.service: Consumed 16min 43.740s CPU time.\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nbitcoin-25.2-aarch64-linux-gnu.tar.gz and bitcoin-26.1-aarch64-linux-gnu.tar.gz\n\n### Operating system and version\n\nLinux 6.1.87-99.174.amzn2023.aarch64 #1 SMP\n\n### Machine specifications\n\nAmazon EC2 t4g.nano instance (512mb ram) with unlimited CPU\r\nzram driver disabled (sudo yum remove zram-generator, reboot)\r\n14 GB gp3 root drive\r\n4 GB gp3 swap drive\r\n40 GB gp3 data drive for bitcoin blockchain\r\n\r\nNAME          MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS\r\nnvme1n1       259:0    0  40G  0 disk /bdata\r\nnvme2n1       259:1    0   4G  0 disk [SWAP]\r\nnvme0n1       259:2    0  14G  0 disk\r\n├─nvme0n1p1   259:3    0  14G  0 part /\r\n└─nvme0n1p128 259:4    0  10M  0 part /boot/efi\r\n\r\nIPv4 enabled but not assigned an IP address\r\nIPv6 enabled, assigned an IP address, and routed to internet\r\n\r\nSome machines have Tor installed and enabled for testing (including the one for the log file attached above), but this made no difference in results.",
    "user": {
      "login": "apulsifer",
      "id": 7013474,
      "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/apulsifer",
      "html_url": "https://github.com/apulsifer",
      "followers_url": "https://api.github.com/users/apulsifer/followers",
      "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
      "organizations_url": "https://api.github.com/users/apulsifer/orgs",
      "repos_url": "https://api.github.com/users/apulsifer/repos",
      "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/apulsifer/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      },
      {
        "id": 323697996,
        "node_id": "MDU6TGFiZWwzMjM2OTc5OTY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Data%20corruption",
        "name": "Data corruption",
        "color": "f7c6c7",
        "default": false
      },
      {
        "id": 326918230,
        "node_id": "MDU6TGFiZWwzMjY5MTgyMzA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Resource%20usage",
        "name": "Resource usage",
        "color": "981023",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 30,
    "created_at": "2024-05-23T15:22:09Z",
    "updated_at": "2024-08-12T07:46:56Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 12911310069,
      "node_id": "LE_lADOABII586J4LRYzwAAAAMBkvT1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12911310069",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:24:36Z",
      "label": {
        "name": "Data corruption",
        "color": "f7c6c7"
      }
    },
    {
      "event": "labeled",
      "id": 12911341894,
      "node_id": "LE_lADOABII586J4LRYzwAAAAMBk3FG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12911341894",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:26:57Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "commented",
      "id": 2127439462,
      "node_id": "IC_kwDOABII585-ziZm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127439462",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:35:05Z",
      "updated_at": "2024-05-23T15:35:05Z",
      "author_association": "MEMBER",
      "body": "> I suspect a bug in the code is causing some thread to write to an incorrect memory location, possibly a memory use-after-free/reallocation/reorganization bug.\r\n\r\nWould it be possible for you to compile and run with asan, or a similar sanitizer?\r\n\r\nAlso, what filesystem are you using on the drives? Something like `df --print-type --human-readable /bdata` should print it.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127439462",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127451533,
      "node_id": "IC_kwDOABII585-zlWN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127451533",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:40:50Z",
      "updated_at": "2024-05-23T15:40:50Z",
      "author_association": "NONE",
      "body": "xfs on the root and data drive\r\n\r\nsudo mkswap /dev/nvme[4 GB disk]\r\nsudo swapon /dev/nvme[4 GB disk]\r\n\r\nsudo mkdir /bdata\r\nsudo mkfs -t xfs /dev/nvme[40 GB disk]\r\nlsblk -o name,size,type,uuid\r\nsudo nano /etc/fstab\r\n\r\nadd to fstab:\r\nUUID=[4 GB disk uuid] swap swap defaults 0 0\r\nUUID=[40 GB disk uuid] /bdata xfs defaults,nofail 0 2\r\n\r\nsudo mount -a\r\n\r\nFilesystem       Type      Size  Used Avail Use% Mounted on\r\ndevtmpfs         devtmpfs  4.0M     0  4.0M   0% /dev\r\ntmpfs            tmpfs     210M     0  210M   0% /dev/shm\r\ntmpfs            tmpfs      84M  552K   84M   1% /run\r\n/dev/nvme0n1p1   xfs        14G  3.4G   11G  25% /\r\ntmpfs            tmpfs     210M     0  210M   0% /tmp\r\n/dev/nvme1n1     xfs        40G   19G   22G  46% /bdata\r\n/dev/nvme0n1p128 vfat       10M  1.4M  8.7M  14% /boot/efi\r\ntmpfs            tmpfs      42M     0   42M   0% /run/user/1000\r\n",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127451533",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127461229,
      "node_id": "IC_kwDOABII585-zntt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127461229",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T15:45:40Z",
      "updated_at": "2024-05-23T15:45:40Z",
      "author_association": "NONE",
      "body": "> Would it be possible for you to compile and run with asan, or a similar sanitizer?\r\n\r\nI don't see where I would get a chunk of time to do that right now.... But as I mentioned, I copied the corrupted files, and that might give some clues to someone familiar with their format (especially if the corruption is ascii in the middle of binary, or vice versa)",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127461229",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127569909,
      "node_id": "IC_kwDOABII585-0CP1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127569909",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T16:22:38Z",
      "updated_at": "2024-05-23T16:22:38Z",
      "author_association": "MEMBER",
      "body": "> I don't see where I would get a chunk of time to do that right now....\r\n\r\nSure, no rush. I'll probably take some time to pin this down. (I don't have an AWS account, so I can't test it, but maybe someone else has).\r\n\r\nSome other ideas to test in the meantime:\r\n\r\n* Try another filesystem instead of xfs\r\n* Try the master branch (not for production, just for testing whether the issue still happens there)\r\n\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127569909",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "labeled",
      "id": 12912262744,
      "node_id": "LE_lADOABII586J4LRYzwAAAAMBoX5Y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12912262744",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T16:23:03Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "commented",
      "id": 2127734105,
      "node_id": "IC_kwDOABII585-0qVZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127734105",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T17:51:13Z",
      "updated_at": "2024-05-23T17:51:13Z",
      "author_association": "NONE",
      "body": "xfs is used on the root drive of every Amazon EC2 instance running Amazon Linux. If xfs on Amazon EC2 were the problem, a lot of of critical infrastructure would be failing right now. And as I mentioned, these machines are also running bitcoin cash in an almost an identical configuration (data file path and ports changed) and it has had zero problems. Since the data corruption only happens about once per week when running on mainnet, I think figuring this problem out will probably take a customized and instrumented version of bitcoind being feed blocks at high speed with random jitter and waits and synthetic memory pressure. This could probably be done on a virtual machine anywhere, like Xen, KVM, Virtual Box, etc.",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127734105",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127790284,
      "node_id": "IC_kwDOABII585-04DM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127790284",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T18:27:30Z",
      "updated_at": "2024-05-23T18:27:30Z",
      "author_association": "MEMBER",
      "body": "> Since the data corruption only happens about once per week\r\n\r\nOnce per week is a lot and if this was a broader problem, I'd assume that more people were complaining. Given that you can consistently reproduce on different machines, this seems like a real bug is somewhere. However, Bitcoin Core is running fine in a lot of other places, so there has to be some hardware or configuration setting (or combination thereof) that triggers this bug on your side. It would be good to know which one it is.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127790284",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127797705,
      "node_id": "IC_kwDOABII585-053J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127797705",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T18:32:13Z",
      "updated_at": "2024-05-23T19:18:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "(edited first question out, I misunderstood)\r\n\r\nFrom your log it appears that this happened while the node was catching up with the tip (almost but not completely synced yet), receiving blocks quickly. Is that typical, or does it usually happen when the node is synced and receives blocks as they are mined?",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127797705",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127853991,
      "node_id": "IC_kwDOABII585-1Hmn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127853991",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T19:10:03Z",
      "updated_at": "2024-05-23T19:10:03Z",
      "author_association": "NONE",
      "body": "> Once per week is a lot and if this was a broader problem, I'd assume that more people were complaining. \r\n\r\nIt could just be that the memory pressure is uncovering the problem. Of course, any machine can experience memory pressure at times, but one thing that's unique is that those machines starting hard paging to SSD for about 20 seconds after each new block arrives.",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127853991",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127922118,
      "node_id": "IC_kwDOABII585-1YPG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127922118",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T19:58:24Z",
      "updated_at": "2024-05-23T19:58:24Z",
      "author_association": "NONE",
      "body": "> Could you explain the paging in a bit more detail?\r\n\r\nThe machines page pretty hard to SSD for about 20 seconds after each new block arrives.  That info comes from \"sar -d 10\", which I logged for a while when I was setting up the first machine.\r\n\r\n> Is the node constantly being bombarded with lots of simultaneous RPC calls (which ones?) or is some other interface used?\r\n\r\nNone of these machines has at this point serviced a single RPC call (I'm still trying to get things set up). No other interface is being used, just the bitcoind peer network, half of the machines with direct IPv6, half via torproxy.\r\n\r\n> Also, from your log it appears that this happened while the node was catching up with the tip (almost but not completely synced yet), receiving blocks quickly. Is that typical, or does it usually happen when the node is synced and receives blocks as they are mined?\r\n\r\nSync'ing has been pretty typical at the moment, since I'm still setting things up and bitcoind has been started and stopped from time-to-time to try out different settings.\r\n\r\nThe initial sync from the genesis block was done on a machine with 16 GB RAM. Then on May 7, bitcoind on that machine was stopped and the /bdata directory was copied to these 10 machines with only 512 MB RAM that are only expected to keep up with new blocks as they arrive. Since that time, two of the ten machines have had no data corruption. The other eight machines have had data corruption one or more times.\r\n\r\nThe problem doesn't just show up during block sync however. I do know that on Monday at end of day, all the machines were running and fully synced, and by Tuesday morning, two machines had data corruption. I was busy with other things and left all the machines alone, and by the time I went to fix them Wednesday afternoon, four machines had data corruption.\r\n\r\nI don't think I can definitely rule out that starting and stopping bitcoind, or rebooting the machines has not contributed to this problem. The files could sit in the bdata directory for a while, and it's possible one is getting corrupted when bitcoind shuts down or the machine reboots but bitcoind doesn't notice it until sometime later when it reads the file.  Note that bitcoind is being started and stopped by systemd service files (attached below) which has a 10 minute timeout. So systemd will politely ask bitcoind to stop, and if it hasn't exited after 10 minutes, systemd will kill it. Another thing worth noting from the service file is that I set up bitcoind to run at Nice=16, which might contribute to triggering the problem.\r\n\r\nAs of late last night, all machines are running and fully synced again. By next week, I'm going to start leaving them alone to run autonomously (with the exception of rebuilding a datadir if needed), so that will be a much better test of what happens when the machines are fully synced and bitcoind is running continuously.\r\n\r\n[Service]\r\nWorkingDirectory=/home/ec2-user\r\nExecStart=/home/ec2-user/bitcoin/bin/bitcoind -conf=/home/ec2-user/bitcoin.conf\r\nRestart=always\r\nRestartSec=60\r\nTimeoutStopSec=600\r\nNice=16\r\nUser=ec2-user\r\nGroup=ec2-user\r\nStandardOutput=journal\r\nStandardError=journal\r\n\r\n[Unit]\r\nAfter=network-online.target\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127922118",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2127953334,
      "node_id": "IC_kwDOABII585-1f22",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2127953334",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T20:20:01Z",
      "updated_at": "2024-05-23T20:20:35Z",
      "author_association": "MEMBER",
      "body": "I think calling the RPC `gettxoutsetinfo muhash` on all nodes (when they are synced to the same block) and it matches for all, then the chainstate leveldb at that point in time is probably fine. I presume all failures happened in the `/bdata/bitcoin-data/chainstate/` leveldb?\r\n\r\nEdit: Calling that RPC will take a long time on your machines, I suspect.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2127953334",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2128231134,
      "node_id": "IC_kwDOABII585-2jre",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2128231134",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-23T23:51:17Z",
      "updated_at": "2024-05-23T23:51:17Z",
      "author_association": "NONE",
      "body": "Yes, all the checksum errors are in numerically-named NNNNNN.ldb files in /bdata/bitcoin-data/chainstate/\r\n\r\nI had no luck with gettxoutsetinfo muhash:\r\n\r\nbitcoin/bin/bitcoin-cli -rpcwaittimeout=0 -conf=/home/ec2-user/bitcoin.conf getblockcount\r\n844826\r\n\r\nbitcoin/bin/bitcoin-cli -rpcwaittimeout=0 -conf=/home/ec2-user/bitcoin.conf gettxoutsetinfo muhash\r\nerror: timeout on transient error: Could not connect to the server 127.0.0.1:8332 (error code 0 - \"timeout reached\")\r\n",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2128231134",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2128657943,
      "node_id": "IC_kwDOABII585-4L4X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2128657943",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-24T06:27:58Z",
      "updated_at": "2024-05-24T06:27:58Z",
      "author_association": "MEMBER",
      "body": "The RPC will take a long time (probably hours), so you'll have to disable the client timeout `-rpcclienttimeout=0`.\r\n\r\n```\r\nbitcoin/bin/bitcoin-cli -rpcclienttimeout=0 -rpcwaittimeout=0 -conf=/home/ec2-user/bitcoin.conf gettxoutsetinfo muhash",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2128657943",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2129447054,
      "node_id": "IC_kwDOABII585-7MiO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2129447054",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-24T12:43:57Z",
      "updated_at": "2024-05-24T12:43:57Z",
      "author_association": "NONE",
      "body": "Took about 20 minutes. They all match.\r\n\r\nFri May 24 12:12:33 UTC 2024\r\n{\r\n  \"height\": 844917,\r\n  \"bestblock\": \"000000000000000000017dd5f59b73629f6f88797e90017a9df39c5e435296bf\",\r\n  \"txouts\": 181984254,\r\n  \"bogosize\": 13994337434,\r\n  \"muhash\": \"b97a3fb13a61e8c889668d064f7ae5408a78ee7e4c6a4fdebedb30ecb2f23378\",\r\n  \"total_amount\": 19702649.24256659,\r\n  \"transactions\": 125720653,\r\n  \"disk_size\": 12220356091\r\n}\r\nFri May 24 12:39:58 UTC 2024\r\n",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2129447054",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2142645727,
      "node_id": "IC_kwDOABII585_ti3f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2142645727",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T16:55:42Z",
      "updated_at": "2024-05-31T16:55:42Z",
      "author_association": "NONE",
      "body": "Update: Since leaving these servers alone for a week and not rebooting them or restarting bitcoind, they have stayed perfectly in sync without issues. So it looks like the problem is triggered by starting and stopping bitcoind (which I can live with, if I do have to restart a server and I get data corruption, I'll image the data from another server).",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2142645727",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2147462839,
      "node_id": "IC_kwDOABII585__663",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2147462839",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-04T12:53:15Z",
      "updated_at": "2024-06-04T12:53:15Z",
      "author_association": "NONE",
      "body": "Update: After running continuously since 05-23 (no reboots or restarting bitcoind), one of the servers failed this morning. So it seems the data corruption bug occurs even when bitcoind is running continuously, although at a much lower rate.\r\n\r\nStarted bitcoind.service.\r\n2024-05-23T11:23:40Z Bitcoin Core version v25.2.0 (release build)\r\n2024-05-23T11:23:40Z InitParameterInteraction: parameter interaction: -blocksonly=1 -> setting -whitelistrelay=0\r\n2024-05-23T11:23:40Z Using the 'arm_shani(1way,2way)' SHA256 implementation\r\n2024-05-23T11:23:40Z Default data directory /home/ec2-user/.bitcoin\r\n2024-05-23T11:23:40Z Using data directory /bdata/bitcoin-data\r\n2024-05-23T11:23:40Z Config file: /home/ec2-user/bitcoin.conf\r\n2024-05-23T11:23:40Z Config file arg: blockreconstructionextratxn=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: blocksonly=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: datadir=\"/bdata/bitcoin-data\"\r\n2024-05-23T11:23:40Z Config file arg: dbcache=\"200\"\r\n2024-05-23T11:23:40Z Config file arg: debuglogfile=false\r\n2024-05-23T11:23:40Z Config file arg: disablewallet=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: discover=\"0\"\r\n2024-05-23T11:23:40Z Config file arg: dns=\"0\"\r\n2024-05-23T11:23:40Z Config file arg: dnsseed=\"0\"\r\n2024-05-23T11:23:40Z Config file arg: listen=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: maxconnections=\"24\"\r\n2024-05-23T11:23:40Z Config file arg: maxmempool=\"5\"\r\n2024-05-23T11:23:40Z Config file arg: maxorphantx=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: maxsigcachesize=\"4\"\r\n2024-05-23T11:23:40Z Config file arg: mempoolexpiry=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: par=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: persistmempool=\"0\"\r\n2024-05-23T11:23:40Z Config file arg: printtoconsole=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: prune=\"550\"\r\n2024-05-23T11:23:40Z Config file arg: rest=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: rpcallowip=\"127.0.0.1\"\r\n2024-05-23T11:23:40Z Config file arg: rpcthreads=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: rpcworkqueue=\"40\"\r\n2024-05-23T11:23:40Z Config file arg: server=\"1\"\r\n2024-05-23T11:23:40Z Config file arg: [main] bind=\"127.0.0.1:8334=onion\"\r\n2024-05-23T11:23:40Z Config file arg: [main] rpcbind=\"127.0.0.1:8332\"\r\n2024-05-23T11:23:40Z Command-line arg: conf=\"/home/ec2-user/bitcoin.conf\"\r\n2024-05-23T11:23:40Z Using at most 24 automatic connections (65535 file descriptors available)\r\n2024-05-23T11:23:40Z Using 2 MiB out of 2 MiB requested for signature cache, able to store 65536 elements\r\n2024-05-23T11:23:40Z Using 2 MiB out of 2 MiB requested for script execution cache, able to store 65536 elements\r\n2024-05-23T11:23:40Z Script verification uses 0 additional threads\r\n2024-05-23T11:23:40Z Wallet disabled!\r\n2024-05-23T11:23:40Z scheduler thread start\r\n2024-05-23T11:23:40Z Binding RPC on address 127.0.0.1 port 8332\r\n2024-05-23T11:23:40Z [http] creating work queue of depth 40\r\n2024-05-23T11:23:40Z [http] starting 1 worker threads\r\n2024-05-23T11:23:40Z Using /16 prefix for IP bucketing\r\n2024-05-23T11:23:40Z init message: Loading P2P addresses…\r\n2024-05-23T11:23:41Z Loaded 67288 addresses from peers.dat  1001ms\r\n2024-05-23T11:23:41Z init message: Loading banlist…\r\n2024-05-23T11:23:41Z SetNetworkActive: true\r\n2024-05-23T11:23:41Z Cache configuration:\r\n2024-05-23T11:23:41Z * Using 2.0 MiB for block index database\r\n2024-05-23T11:23:41Z * Using 8.0 MiB for chain state database\r\n2024-05-23T11:23:41Z * Using 190.0 MiB for in-memory UTXO set (plus up to 4.8 MiB of unused mempool space)\r\n2024-05-23T11:23:41Z init message: Loading block index…\r\n2024-05-23T11:23:41Z Assuming ancestors of block 000000000000000000035c3f0d31e71a5ee24c5aaf3354689f65bd7b07dee632 have valid signatures.\r\n2024-05-23T11:23:41Z Setting nMinimumChainWork=000000000000000000000000000000000000000044a50fe819c39ad624021859\r\n2024-05-23T11:23:41Z Prune configured to target 550 MiB on disk for block and undo files.\r\n2024-05-23T11:23:41Z Opening LevelDB in /bdata/bitcoin-data/blocks/index\r\n2024-05-23T11:23:41Z Opened LevelDB successfully\r\n2024-05-23T11:23:41Z Using obfuscation key for /bdata/bitcoin-data/blocks/index: 0000000000000000\r\n2024-05-23T11:23:50Z LoadBlockIndexDB: last block file = 4298\r\n2024-05-23T11:23:50Z LoadBlockIndexDB: last block file info: CBlockFileInfo(blocks=12, size=18765314, heights=844726...844737, time=2024-05-23...2024-05-23)\r\n2024-05-23T11:23:50Z Checking all blk files are present...\r\n2024-05-23T11:23:51Z LoadBlockIndexDB(): Block files have previously been pruned\r\n2024-05-23T11:23:53Z Initializing chainstate Chainstate [ibd] @ height -1 (null)\r\n2024-05-23T11:23:53Z Opening LevelDB in /bdata/bitcoin-data/chainstate\r\n2024-05-23T11:23:53Z Opened LevelDB successfully\r\n2024-05-23T11:23:53Z Using obfuscation key for /bdata/bitcoin-data/chainstate: 27687fc922c5e117\r\n2024-05-23T11:23:59Z Loaded best chain: hashBestChain=000000000000000000027d7ef87e117148fb2f0fd86daa593be6a9ab60d90b55 height=844737 date=2024-05-23T11:14:21Z progress=0.999998\r\n2024-05-23T11:23:59Z [snapshot] allocating all cache to the IBD chainstate\r\n2024-05-23T11:23:59Z Opening LevelDB in /bdata/bitcoin-data/chainstate\r\n2024-05-23T11:23:59Z Opened LevelDB successfully\r\n2024-05-23T11:23:59Z Using obfuscation key for /bdata/bitcoin-data/chainstate: 27687fc922c5e117\r\n2024-05-23T11:23:59Z [Chainstate [ibd] @ height 844737 (000000000000000000027d7ef87e117148fb2f0fd86daa593be6a9ab60d90b55)] resized coinsdb cache to 8.0 MiB\r\n2024-05-23T11:23:59Z [Chainstate [ibd] @ height 844737 (000000000000000000027d7ef87e117148fb2f0fd86daa593be6a9ab60d90b55)] resized coinstip cache to 190.0 MiB\r\n2024-05-23T11:23:59Z init message: Verifying blocks…\r\n2024-05-23T11:23:59Z Verifying last 6 blocks at level 3\r\n2024-05-23T11:23:59Z Verification progress: 0%\r\n2024-05-23T11:24:08Z Verification progress: 16%\r\n2024-05-23T11:24:13Z Verification progress: 33%\r\n2024-05-23T11:24:16Z Verification progress: 50%\r\n2024-05-23T11:24:21Z Verification progress: 66%\r\n2024-05-23T11:24:26Z Verification progress: 83%\r\n2024-05-23T11:24:30Z Verification progress: 99%\r\n2024-05-23T11:24:30Z Verification: No coin database inconsistencies in last 6 blocks (17307 transactions)\r\n2024-05-23T11:24:30Z  block index           49358ms\r\n2024-05-23T11:24:30Z init message: Pruning blockstore…\r\n2024-05-23T11:24:30Z Leaving InitialBlockDownload (latching to false)\r\n2024-05-23T11:24:30Z block tree size = 844738\r\n2024-05-23T11:24:30Z nBestHeight = 844737\r\n2024-05-23T11:24:30Z loadblk thread start\r\n2024-05-23T11:24:30Z loadblk thread exit\r\n2024-05-23T11:24:30Z torcontrol thread start\r\n2024-05-23T11:24:30Z Bound to 127.0.0.1:8334\r\n2024-05-23T11:24:30Z init message: Starting network threads…\r\n2024-05-23T11:24:30Z DNS seeding disabled\r\n2024-05-23T11:24:30Z init message: Done loading\r\n2024-05-23T11:24:30Z opencon thread start\r\n2024-05-23T11:24:30Z net thread start\r\n2024-05-23T11:24:30Z addcon thread start\r\n2024-05-23T11:24:30Z msghand thread start\r\n2024-05-23T11:24:30Z New outbound peer connected: version: 70016, blocks=844737, peer=1 (manual)\r\n2024-05-23T11:24:31Z New outbound peer connected: version: 70016, blocks=844737, peer=4 (manual)\r\n2024-05-23T11:24:31Z New outbound peer connected: version: 70016, blocks=844737, peer=5 (manual)\r\n2024-05-23T11:24:31Z New outbound peer connected: version: 70016, blocks=844737, peer=6 (manual)\r\n2024-05-23T11:25:09Z New outbound peer connected: version: 70016, blocks=844737, peer=10 (manual)\r\n2024-05-23T11:26:10Z New outbound peer connected: version: 70016, blocks=844737, peer=13 (manual)\r\n2024-05-23T11:26:13Z Saw new header hash=00000000000000000003508531e1ec11798f1972e307235a54ef91bf945e246c height=844738\r\n2024-05-23T11:26:58Z UpdateTip: new best=00000000000000000003508531e1ec11798f1972e307235a54ef91bf945e246c height=844738 version=0x322d6000 log2_work=94.940996 tx=1009663503 date='2024-05-23T11:22:20Z' progress=0.999999 cache=1.8MiB(11945txo)\r\n2024-05-23T11:26:58Z Saw new header hash=00000000000000000000c18685513156cfd695edd2378ca2ba819d785866a571 height=844739\r\n2024-05-23T11:27:08Z UpdateTip: new best=00000000000000000000c18685513156cfd695edd2378ca2ba819d785866a571 height=844739 version=0x29a3e000 log2_work=94.941009 tx=1009668305 date='2024-05-23T11:25:43Z' progress=1.000000 cache=2.6MiB(18123txo)\r\n2024-05-23T11:27:39Z New outbound peer connected: version: 70016, blocks=844737, peer=15 (manual)\r\n2024-05-23T11:27:55Z New outbound peer connected: version: 70016, blocks=844737, peer=14 (manual)\r\n2024-05-23T11:36:44Z Saw new header hash=00000000000000000000e9be8cfceef5f4d12313ab2657d7fcf4e617dc9bb839 height=844740\r\n2024-05-23T11:36:51Z UpdateTip: new best=00000000000000000000e9be8cfceef5f4d12313ab2657d7fcf4e617dc9bb839 height=844740 version=0x224c8000 log2_work=94.941023 tx=1009673632 date='2024-05-23T11:36:11Z' progress=1.000000 cache=3.9MiB(26582txo)\r\n2024-05-23T11:47:09Z Saw new header hash=0000000000000000000152fee6b2cb2779c2fe0ce34aaad57f9034c1613463a0 height=844741\r\n2024-05-23T11:47:15Z UpdateTip: new best=0000000000000000000152fee6b2cb2779c2fe0ce34aaad57f9034c1613463a0 height=844741 version=0x24000000 log2_work=94.941037 tx=1009679243 date='2024-05-23T11:46:34Z' progress=1.000000 cache=4.9MiB(34377txo)\r\n2024-05-23T11:49:55Z Saw new header hash=000000000000000000025c416dc7962405d500d87238bf392c95aa9610c3a71e height=844742\r\n2024-05-23T11:49:58Z UpdateTip: new best=000000000000000000025c416dc7962405d500d87238bf392c95aa9610c3a71e height=844742 version=0x2e000000 log2_work=94.941051 tx=1009686227 date='2024-05-23T11:49:28Z' progress=1.000000 cache=5.3MiB(37584txo)\r\n2024-05-23T11:59:40Z Saw new header hash=000000000000000000014072f1d5d67100bf6c097e971cd2af2d579b32a30f93 height=844743\r\n2024-05-23T11:59:46Z UpdateTip: new best=000000000000000000014072f1d5d67100bf6c097e971cd2af2d579b32a30f93 height=844743 version=0x2652e000 log2_work=94.941064 tx=1009691358 date='2024-05-23T11:59:05Z' progress=1.000000 cache=6.8MiB(45760txo)\r\n2024-05-23T12:04:32Z Saw new header hash=00000000000000000002b692a4141102da57b78d667d8a3f9a461fe85106a4c5 height=844744\r\n\r\n...\r\n\r\n2024-06-04T06:23:12Z Saw new header hash=00000000000000000001de5e312d55f873e73d14f3cd8a8ee656a392dbc28236 height=846459\r\n2024-06-04T06:23:52Z UpdateTip: new best=00000000000000000001de5e312d55f873e73d14f3cd8a8ee656a392dbc28236 height=846459 version=0x2403a000 log2_work=94.964467 tx=1017950010 date='2024-06-04T06:22:45Z' progress=1.000000 cache=87.4MiB(578849txo)\r\n2024-06-04T06:24:43Z Saw new header hash=00000000000000000000225789427db9f0e8f310d8bc0a205f884a8ce68a2aaf height=846460\r\n2024-06-04T06:25:09Z UpdateTip: new best=00000000000000000000225789427db9f0e8f310d8bc0a205f884a8ce68a2aaf height=846460 version=0x25ed2000 log2_work=94.964481 tx=1017955017 date='2024-06-04T06:24:38Z' progress=1.000000 cache=88.0MiB(583022txo)\r\n2024-06-04T06:37:08Z Saw new header hash=0000000000000000000012f2d726f8a033a2bfb5eada30cd92e15e6e1d196ce7 height=846461\r\n2024-06-04T06:37:47Z UpdateTip: new best=0000000000000000000012f2d726f8a033a2bfb5eada30cd92e15e6e1d196ce7 height=846461 version=0x23c16000 log2_work=94.964494 tx=1017959189 date='2024-06-04T06:36:37Z' progress=1.000000 cache=89.1MiB(590143txo)\r\n2024-06-04T07:36:10Z Saw new header hash=000000000000000000031f97130e48c0a7797547416d16ccd3d7dd8a6cc6d0b0 height=846462\r\n2024-06-04T07:36:52Z UpdateTip: new best=000000000000000000031f97130e48c0a7797547416d16ccd3d7dd8a6cc6d0b0 height=846462 version=0x2001e000 log2_work=94.964508 tx=1017962502 date='2024-06-04T07:35:52Z' progress=1.000000 cache=90.6MiB(602543txo)\r\n2024-06-04T07:42:53Z Saw new header hash=000000000000000000002bde133693a19d84616a4cf1db767f8864b5288cce6b height=846463\r\n2024-06-04T07:44:01Z UpdateTip: new best=000000000000000000002bde133693a19d84616a4cf1db767f8864b5288cce6b height=846463 version=0x21aea000 log2_work=94.964521 tx=1017965939 date='2024-06-04T07:42:39Z' progress=1.000000 cache=11.0MiB(0txo)\r\n2024-06-04T08:01:04Z Saw new header hash=00000000000000000001d5e0369520ead2dc646b7b592b8bafff8dc02e368600 height=846464\r\n2024-06-04T08:01:40Z LevelDB read failure: Corruption: block checksum mismatch: /bdata/bitcoin-data/chainstate/5978736.ldb\r\n2024-06-04T08:01:40Z Fatal LevelDB error: Corruption: block checksum mismatch: /bdata/bitcoin-data/chainstate/5978736.ldb\r\n2024-06-04T08:01:40Z You can use -debug=leveldb to get more complete diagnostic messages\r\n2024-06-04T08:01:40Z Error: Error reading from database, shutting down.\r\nError: Error reading from database, shutting down.\r\n2024-06-04T08:01:40Z Error reading from database: Fatal LevelDB error: Corruption: block checksum mismatch: /bdata/bitcoin-data/chainstate/5978736.ldb\r\nbitcoind.service: Main process exited, code=dumped, status=6/ABRT\r\nbitcoind.service: Failed with result 'core-dump'.\r\nbitcoind.service: Consumed 3h 46min 58.907s CPU time.\r\nbitcoind.service: Scheduled restart job, restart counter is at 1.\r\nStopped bitcoind.service.\r\nbitcoind.service: Consumed 3h 46min 58.907s CPU time.\r\n",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2147462839",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2148033169,
      "node_id": "IC_kwDOABII586ACGKR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2148033169",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-04T17:17:26Z",
      "updated_at": "2024-06-04T17:17:26Z",
      "author_association": "MEMBER",
      "body": "Another thing you could try to debug this further is to put a swapfile, and the datadir on the same AWS gp3 SSD filesystem.\r\n\r\nI am happy to create an AWS account to test this, but it would be good if there was a single (bash) script, which can be deployed to AWS, so that it is easy for anyone to reproduce your exact setup.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2148033169",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2148114593,
      "node_id": "IC_kwDOABII586ACaCh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2148114593",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-04T18:05:47Z",
      "updated_at": "2024-06-04T18:05:47Z",
      "author_association": "NONE",
      "body": "IMO, the first thing to do would be for someone who's familiar with the format of these block files to look at the corrupted files and see if they can figure out what code may have stomped on the blocks (it might be obvious, like a fragment of p2p networking data in the middle of a block -- you never know until you look).\r\n\r\nThe most likely scenario is that this is a latent software bug that will show up on any machine if its under memory pressure and heavy paging.  In my experience, finding problems low incidence seemingly random problems like this requires instrumenting the code (or using automated tools) with frequent memory buffer guard checks, injected faults such as networking jitter, stalls, disconnects, and invalid data, and random waits before and after memory is allocated, freed, and used (including networking and I/O buffers) and locks are acquired and released. I myself am more familiar with troubleshooting these problems under Windoze than Linux tho.",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2148114593",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2199690757,
      "node_id": "IC_kwDOABII586DHJ4F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2199690757",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T09:39:11Z",
      "updated_at": "2024-07-03T11:12:48Z",
      "author_association": "NONE",
      "body": "Update: After seeing no data corruption for over a week, 5 of the 10 servers experienced data corruption over the last two days. This makes me suspect the problem is not completely random, but depends on contents of the blocks.  A replay of the mainnet blocks generated from 2024-06-28 to 2024-06-31 might make good test data (starting with the best blocks, and possibly also including the orphan blocks).",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2199690757",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2229618185,
      "node_id": "IC_kwDOABII586E5UYJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2229618185",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-15T23:33:00Z",
      "updated_at": "2024-07-15T23:33:00Z",
      "author_association": "NONE",
      "body": "Another update: After again seeing no data corruption for a while (since the last update above), five of the ten servers again got data corruption over a two day period. This reinforces my beliefs that (a) this data corruption depends on the contents of the blocks received by the bitcoind, and that whatever triggers it is currently relatively infrequent (about once every two weeks); and (2) the data corruption happens at some earlier time and is not detected by bitcoind until sometime later when it attempts to read the corrupted block from the disk.",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2229618185",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2249700975,
      "node_id": "IC_kwDOABII586GF7Zv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2249700975",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-25T07:59:36Z",
      "updated_at": "2024-07-25T07:59:36Z",
      "author_association": "MEMBER",
      "body": "Ok, I spun up two machines to see if I can reproduce. I left zram and put everything on one SSD. Also, my config has some debug logging enabled. Also, I am using a recent guix build, instead of a source compile of 25.x.\r\n\r\nLet me know when this happens again, so that I can check if it happened to me as well. I'll then try to debug this further.\r\n\r\n\r\n```\r\nsh-5.2$ nproc\r\n2\r\nsh-5.2$ uname --kernel-release --kernel-version \r\n6.1.97-104.177.amzn2023.aarch64 #1 SMP Tue Jul 16 15:18:22 UTC 2024\r\nsh-5.2$ free --human\r\n               total        used        free      shared  buff/cache   available\r\nMem:           419Mi       354Mi        11Mi       0.0Ki        52Mi        54Mi\r\nSwap:          4.4Gi       435Mi       4.0Gi\r\nsh-5.2$ df --print-type --human-readable ./ \r\nFilesystem     Type  Size  Used Avail Use% Mounted on\r\n/dev/nvme0n1p1 xfs    30G   19G   12G  63% /\r\nsh-5.2$ cat ./bitcoin.conf \r\ndiscover=0\r\nlisten=1\r\nmaxconnections=24\r\n\r\npar=1\r\n\r\nblocksonly=1\r\ndbcache=200\r\nmaxsigcachesize=4\r\nprune=550\r\n\r\nmaxmempool=5\r\nblockreconstructionextratxn=1\r\nmaxorphantx=1\r\nmempoolexpiry=1\r\npersistmempool=0\r\n\r\ndisablewallet=1\r\n\r\nserver=1\r\nrpcallowip=127.0.0.1\r\nrpcuser=btc\r\nrpcpassword=btc\r\nrpcworkqueue=40\r\nrpcthreads=1\r\n\r\nprinttoconsole=1\r\nnodebuglogfile=1\r\n\r\n[main]\r\nrpcport=8332\r\nrpcbind=127.0.0.1:8332\r\nbind=[::]:9333\r\nbind=127.0.0.1:8334=onion\r\n\r\n# extra args\r\nlogthreadnames=1\r\nlogsourcelocations=1\r\ndebug=1\r\ndebugexclude=libevent\r\n#debugexclude=leveldb\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2249700975",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2249707433,
      "node_id": "IC_kwDOABII586GF8-p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2249707433",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-25T08:02:46Z",
      "updated_at": "2024-07-25T08:02:46Z",
      "author_association": "MEMBER",
      "body": "In the meantime it could make sense for you to consider upgrading to a more recent version of Bitcoin Core. According to https://bitcoincore.org/en/lifecycle/ and https://bitcoincore.org/en/security-advisories/ , 25.x will be EOL soon and \"Medium and High severity bugs will be disclosed 2 weeks after the [last affected release goes EOL](https://bitcoincore.org/en/lifecycle/). This is a year after a fixed version was first released. A pre-announcement will be made 2 weeks prior to disclosure.\"\r\n\r\n(I don't know if there will be any disclosures, but given the advisory, it seems better to attempt an upgrade, than not to)",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2249707433",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2253346347,
      "node_id": "IC_kwDOABII586GT1Yr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2253346347",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-26T19:30:13Z",
      "updated_at": "2024-07-26T19:30:13Z",
      "author_association": "NONE",
      "body": "ok, thx, I updated all the servers to bitcoin-27.1-aarch64-linux-gnu.tar.gz\r\nThe last data corruption occurred on July 13 and 14. I'll let you know next time I see it.",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2253346347",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2261469507,
      "node_id": "IC_kwDOABII586Gy0lD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2261469507",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-31T21:11:11Z",
      "updated_at": "2024-07-31T21:11:11Z",
      "author_association": "NONE",
      "body": "FYI, I'm now seeing an outbreak of data corruption, 1 server yesterday, 2 more today, won't be surprised to see more later today or tomorrow...",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2261469507",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2262150527,
      "node_id": "IC_kwDOABII586G1a1_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2262150527",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-01T06:26:21Z",
      "updated_at": "2024-08-01T06:26:21Z",
      "author_association": "MEMBER",
      "body": "Both of mine are still up.\r\n\r\nWhat type of RPCs are you calling?\r\n\r\nI am not calling any RPCs and I am running a version after https://github.com/bitcoin/bitcoin/pull/30094 (which may be related).\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2262150527",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "labeled",
      "id": 13720427198,
      "node_id": "LE_lADOABII586J4LRYzwAAAAMxzRq-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13720427198",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-01T06:26:42Z",
      "label": {
        "name": "Resource usage",
        "color": "981023"
      }
    },
    {
      "event": "commented",
      "id": 2263909408,
      "node_id": "IC_kwDOABII586G8IQg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2263909408",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-01T20:18:00Z",
      "updated_at": "2024-08-01T20:18:00Z",
      "author_association": "NONE",
      "body": "Several times a day, we call \"bitcoin-cli -rpcclienttimeout=0 getblockcount\" to check if bitcoind is still operating. (This is done thru an SSH tunnel, which is the easiest way to check all servers.) That's the only RPC call we've been making at this point.",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2263909408",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2265224521,
      "node_id": "IC_kwDOABII586HBJVJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2265224521",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-02T12:13:17Z",
      "updated_at": "2024-08-02T12:13:17Z",
      "author_association": "MEMBER",
      "body": "> getblockcount\r\n\r\nyeah, that shouldn't cause OOM, because all it does is serialize a single integer to JSON. I'll downgrade my two versions to 27.1 and see what happens then. Otherwise, I'll try to use different SSDs (c.f. https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2148033169).\r\n\r\nCan you try if using a single SSD works around the problem for you for now?\r\n\r\nIf that doesn't pin down the problem, I am not sure how to proceed, because without steps to reproduce, this will be close to impossible to debug or diagnose.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2265224521",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2265618496,
      "node_id": "IC_kwDOABII586HCphA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2265618496",
      "actor": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-02T15:12:03Z",
      "updated_at": "2024-08-02T15:12:03Z",
      "author_association": "NONE",
      "body": "At some point last night, another server got data corruption, so up to 4 of 10 on this outbreak. The incidence rate is still only about half the machines every two weeks, so it's going to take a while to duplicate this using only data from the live mainnet. (Note, also very unlikely getblockcount is causing OOM because it's only called about 100 times between data corruption issues.)\r\n\r\nAnother difference in our setup is that our servers do all of their communication over IPv6, while it looks like yours is only configured with IPv4. (There is some very weak evidence this might be related to the problem -- I have two servers that are only configured with IPv4, and these two servers have never had a data corruption issue, but there are other differences in these servers: one is running testnet, not mainnet, and the other was only running bitcoind for about 2 weeks before bitcoind was shutdown because all of that machine's resources were needed for something else.)\r\n\r\nConfiguring an EC2 instance with IPv6 is a little cumbersome, but works something like this (from my notes):\r\n\r\nedit VPC to assign an Amazon-provided IPv6 CIDR address block\r\nedit VPC route table to create a route from ::/0 to the Internet Gateway\r\n\t(a local route will also automatically be created for the new route table IPv6 CIDR)\r\n\r\nedit all subnets:\r\n\tdisable auto IPv4 assignment\r\n\t\t[note: IPv4 is still enabled and a private IPv4 address is assigned; if IPv4 were disabled, the instance's NTP client might have to be reconfigured]\r\n\tadd IPv6 /64 address block (each subnet must have a unique [sequential] prefix)\r\n\r\nedit security group to allow:\r\n\tincoming SSH from admin IPv6 address\r\n\t(an outgoing rule will also automatically be created to allow all traffic to ::/0)\r\n",
      "user": {
        "login": "apulsifer",
        "id": 7013474,
        "node_id": "MDQ6VXNlcjcwMTM0NzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7013474?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/apulsifer",
        "html_url": "https://github.com/apulsifer",
        "followers_url": "https://api.github.com/users/apulsifer/followers",
        "following_url": "https://api.github.com/users/apulsifer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/apulsifer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/apulsifer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/apulsifer/subscriptions",
        "organizations_url": "https://api.github.com/users/apulsifer/orgs",
        "repos_url": "https://api.github.com/users/apulsifer/repos",
        "events_url": "https://api.github.com/users/apulsifer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/apulsifer/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2265618496",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2278758371,
      "node_id": "IC_kwDOABII586H0xfj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2278758371",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-09T21:07:39Z",
      "updated_at": "2024-08-09T21:12:24Z",
      "author_association": "MEMBER",
      "body": "Did you get a chance to see if you can reproduce the crash, if you put all data and swap on a single root SSD?\r\n\r\n<!-- https://github.com/bitcoin/bitcoin/issues/28552#issuecomment-1742034490\r\n\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2278758371",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2280879011,
      "node_id": "IC_kwDOABII586H83Oj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2280879011",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-10T10:29:19Z",
      "updated_at": "2024-08-10T10:29:19Z",
      "author_association": "MEMBER",
      "body": "In the meantime I booted up 4 more machines with zram disabled, two of which use three SSDs, as in your setup.\r\n\r\nI'd be highly surprised if leveldb corruption has something to do with ipv6, so I won't be testing that.\r\n\r\nI'll let them run for a month or two, but if they don't find anything, I am not sure what to do here.\r\n\r\nWithout *exact* and *full* steps to reproduce every single step, including the exact AWS VM setup, as well as the internal VM setup, there is little that can be done here.\r\n\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2280879011",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    },
    {
      "event": "commented",
      "id": 2283305777,
      "node_id": "IC_kwDOABII586IGHsx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2283305777",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-12T07:46:55Z",
      "updated_at": "2024-08-12T07:46:55Z",
      "author_association": "MEMBER",
      "body": "The very first machine I set up on AWS refused ssh access and had to be rebooted (fine so far after a reboot). Maybe all of this is just AWS hardware failures?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30159#issuecomment-2283305777",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30159"
    }
  ]
}