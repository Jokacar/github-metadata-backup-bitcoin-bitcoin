{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539",
    "id": 877751403,
    "node_id": "PR_kwDOABII5840UWxr",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/24539",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/24539.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/24539.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/48d829484eb9fc0a63fd04083d92f6a3005ec491",
    "number": 24539,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Add a \"tx output spender\" index",
    "user": {
      "login": "sstone",
      "id": 1573866,
      "node_id": "MDQ6VXNlcjE1NzM4NjY=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sstone",
      "html_url": "https://github.com/sstone",
      "followers_url": "https://api.github.com/users/sstone/followers",
      "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
      "organizations_url": "https://api.github.com/users/sstone/orgs",
      "repos_url": "https://api.github.com/users/sstone/repos",
      "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/sstone/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR adds a new \"tx output spender\" index, which allows users to query which tx spent a given outpoint with the `gettxspendingprevout` RPC call that was added by https://github.com/bitcoin/bitcoin/pull/24408.\r\n\r\nSuch an index would be extremely useful for Lightning, and probably for most layer-2 protocols that rely on chains of unpublished transactions.\r\n\r\nCode may need additional tests, but I wanted to collect ACKs/NACKs first (I'm aware that new indexes are not necessarily welcome additions)\r\n\r\nI chose to store an outpoint (32 + 4 bytes) -> txid (32 bytes) index (so -txospenderindex requires -txindex) rather than a outpoint -> disk pos index.",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      }
    ],
    "created_at": "2022-03-11T19:32:41Z",
    "updated_at": "2023-08-10T03:44:52Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "58735166eaf2ebb4639c5d111a3e1c84fce1f3f0",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "sstone:add-txospender-index",
      "ref": "add-txospender-index",
      "sha": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 31305826,
        "node_id": "MDEwOlJlcG9zaXRvcnkzMTMwNTgyNg==",
        "name": "bitcoin",
        "full_name": "sstone/bitcoin",
        "owner": {
          "login": "sstone",
          "id": 1573866,
          "node_id": "MDQ6VXNlcjE1NzM4NjY=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/sstone",
          "html_url": "https://github.com/sstone",
          "followers_url": "https://api.github.com/users/sstone/followers",
          "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
          "organizations_url": "https://api.github.com/users/sstone/orgs",
          "repos_url": "https://api.github.com/users/sstone/repos",
          "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/sstone/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/sstone/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/sstone/bitcoin",
        "archive_url": "https://api.github.com/repos/sstone/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/sstone/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/sstone/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/sstone/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/sstone/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/sstone/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/sstone/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/sstone/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/sstone/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/sstone/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/sstone/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/sstone/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/sstone/bitcoin/events",
        "forks_url": "https://api.github.com/repos/sstone/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/sstone/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/sstone/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/sstone/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/sstone/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/sstone/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/sstone/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/sstone/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/sstone/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/sstone/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/sstone/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/sstone/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/sstone/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/sstone/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/sstone/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/sstone/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:sstone/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/sstone/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/sstone/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/sstone/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/sstone/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/sstone/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/sstone/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/sstone/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/sstone/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/sstone/bitcoin/hooks",
        "svn_url": "https://github.com/sstone/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 203415,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-08T12:39:31Z",
        "created_at": "2015-02-25T09:17:18Z",
        "updated_at": "2022-01-10T08:23:52Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "b565485c24c0feacae559a7f6f7b83d7516ca58d",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35487,
        "stargazers_count": 70684,
        "watchers_count": 70684,
        "size": 236373,
        "default_branch": "master",
        "open_issues_count": 681,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-10T02:22:24Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-10T03:01:48Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 416,
    "deletions": 1,
    "changed_files": 13,
    "commits": 3,
    "review_comments": 65,
    "comments": 22
  },
  "events": [
    {
      "event": "head_ref_force_pushed",
      "id": 6227681994,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAFzMuLK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227681994",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:08:30Z"
    },
    {
      "event": "commented",
      "id": 1065541156,
      "node_id": "IC_kwDOABII584_gt4k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065541156",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:24:10Z",
      "updated_at": "2022-03-11T21:24:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK. It would be good know more about specific use-cases for this, if you can provide some links or more description. But the implementation seems very simple, so I don't think adding this would be a maintenance burden.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065541156",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "labeled",
      "id": 6227844439,
      "node_id": "LE_lADOABII585Fi6uozwAAAAFzNV1X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227844439",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:39:05Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "labeled",
      "id": 6227844441,
      "node_id": "LE_lADOABII585Fi6uozwAAAAFzNV1Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227844441",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:39:05Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "labeled",
      "id": 6227844444,
      "node_id": "LE_lADOABII585Fi6uozwAAAAFzNV1c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227844444",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:39:05Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "labeled",
      "id": 6227844446,
      "node_id": "LE_lADOABII585Fi6uozwAAAAFzNV1e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6227844446",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-11T21:39:05Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "commented",
      "id": 1065836894,
      "node_id": "IC_kwDOABII584_h2Fe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065836894",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-12T08:01:34Z",
      "updated_at": "2022-03-12T08:01:34Z",
      "author_association": "MEMBER",
      "body": "@ ryan, I think the idea is that there is one coin that is owned by more than one entity. There may be several (conflicting) pre-signed txs spending it and as soon as it is spent, all entities with ownership in it want to check which pre-signed tx spent the coin.\r\nIf they use Bitcoin Core to monitor the coin, they may use:\r\n* A watch-only wallet (which requires a file on disk and BDB/Sqlite)\r\n* Walk the raw chain and raw mempool themselves (According to https://github.com/bitcoin/bitcoin/pull/24408#issuecomment-1059188351 this is doable for the chain, but may not be for the mempool)\r\n* Use an index. A blockfilterindex might speed up scanning the chain, whereas this index directly gives the answer.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065836894",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1065868465,
      "node_id": "IC_kwDOABII584_h9yx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065868465",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-12T11:46:10Z",
      "updated_at": "2022-03-12T11:46:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "Lightning channels are basically trees of unpublished transactions:\r\n- a commit tx that spends a shared onchain \"funding\" UTXO\r\n- HTLC txs that spend the commit tx (there can be competing HTLC txs that spend the same commit tx output: one for successful payments, one for timed out payments)\r\n\r\nThere is also a penalty scheme built into these txs: if you cheat, you need to wait before you can spend your outputs but your channel peer can spend them immediately.\r\n\r\nAnd LN is also transitioning to a model where these txs pay minimum fees and can be \"bumped\" with RBF/CPFP.\r\n\r\n=> it's very useful for LN nodes to detect when transactions have been spent, but also how they've been spent and react accordingly (by extracting info from the spending txs for example), and walk up chains of txs that spend each other.\r\n\r\nAs described above, there are tools in bitcoin core that we could use and would help a bit, and Lightning nodes could also create their own indexes independently or use electrum servers, block explorers, but this would make running LN nodes connected to your own bitcoin node much easier.\r\n",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065868465",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1065899900,
      "node_id": "IC_kwDOABII584_iFd8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065899900",
      "actor": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-12T15:13:04Z",
      "updated_at": "2022-03-12T15:13:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nI think the use case is clear and if others think the maintenance burden is reasonable there doesn't seem to be an obvious downside.\r\n\r\n> This PR can be viewed as an \"extension\" to #24408\r\n\r\nSeems like review should be focused on #24408 first but assuming that gets merged, Concept ACK for this.",
      "user": {
        "login": "michaelfolkson",
        "id": 16323900,
        "node_id": "MDQ6VXNlcjE2MzIzOTAw",
        "avatar_url": "https://avatars.githubusercontent.com/u/16323900?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/michaelfolkson",
        "html_url": "https://github.com/michaelfolkson",
        "followers_url": "https://api.github.com/users/michaelfolkson/followers",
        "following_url": "https://api.github.com/users/michaelfolkson/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/michaelfolkson/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/michaelfolkson/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/michaelfolkson/subscriptions",
        "organizations_url": "https://api.github.com/users/michaelfolkson/orgs",
        "repos_url": "https://api.github.com/users/michaelfolkson/repos",
        "events_url": "https://api.github.com/users/michaelfolkson/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/michaelfolkson/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065899900",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1065965240,
      "node_id": "IC_kwDOABII584_iVa4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1065965240",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-12T21:25:18Z",
      "updated_at": "2023-08-10T03:44:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065541156), [michaelfolkson](https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065899900), [mzumsande](https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-908174478), [glozow](https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1086218571), [aureleoules](https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276604721), [achow101](https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1188968612) |\n| Approach ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-958601762) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28241](https://github.com/bitcoin/bitcoin/pull/28241) (Silent payment index (for light wallets and consistency check) by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1065965240",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-13T17:50:10Z",
      "updated_at": "2022-03-13T17:50:10Z",
      "source": {
        "issue": {
          "id": 860798104,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjE3NTgwNjM4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21726",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21726/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21726/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21726/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/21726",
          "number": 21726,
          "state": "closed",
          "state_reason": null,
          "title": "Improve Indices on pruned nodes via prune blockers",
          "body": "# Motivation\r\nThe main motivation of this change and only behavior change noticeable by user is to allow running `coinstatsindex` on pruned nodes as has been requested [here for example](https://twitter.com/benthecarman/status/1388170854140452870?s=20).\r\n\r\n# Background\r\n`coinstatsindex` on pruned nodes can be enabled in a much simpler than it is done here but it comes with downside. The ability to run `blockfilterindex`on pruned nodes was added in #15946 but it also added the `blockfilterindex` as a dependency to `validation` and it introduced two new circular dependencies. Enabling `coinstatsindex` on pruned nodes in a similar way would add it as a dependency as well and introduce another circular dependency. \r\n\r\nInstead, this PR introduces a `m_prune_blockers` map to `BlockManager` as a flexible approach to block pruning. Entities like `blockfilterindex`, for example, can add a key and a height to block pruning over that height. These entities need to update that value to allow more pruning when they are ready.\r\n\r\n# Alternative approach\r\nUpon completing the first draft of this PR I found #19463 as an alternative that follows the same but follows a very different approach. I am listing the main differences here as I see them:\r\n- Usage of globals\r\n- Blocks pruning with a start and a stop height\r\n- Can persist blockers across restarts\r\n- Blockers can be set/unset via RPCs\r\n\r\nPersonally, I don't think any of these are necessary to be added here but if the general approach or specific features are more appealing to reviewers I am happy to change to a solution based on that PR or port over specific parts of it here.",
          "user": {
            "login": "fjahr",
            "id": 1322187,
            "node_id": "MDQ6VXNlcjEzMjIxODc=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fjahr",
            "html_url": "https://github.com/fjahr",
            "followers_url": "https://api.github.com/users/fjahr/followers",
            "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
            "organizations_url": "https://api.github.com/users/fjahr/orgs",
            "repos_url": "https://api.github.com/users/fjahr/repos",
            "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fjahr/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 118379652,
              "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
              "name": "Validation",
              "color": "6060aa",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 38,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21726",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/21726",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/21726.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/21726.patch"
          },
          "closed_at": "2022-04-26T18:43:10Z",
          "created_at": "2021-04-18T23:56:49Z",
          "updated_at": "2022-08-13T16:50:07Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 908174478,
      "node_id": "PRR_kwDOABII5842IaSO",
      "url": null,
      "actor": null,
      "commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK - I can see why this could be helpful for lightning, the code is very similar to the txindex code.\r\n\r\nSome general thoughts:\r\n- `getmempooltxspendingprevout` in #24408 takes a list of outpoints, `gettxospender` takes a single outpoint. Would it make sense to have the same format here (I'd guess a common use case would be to check both RPCs with the same outpoint(s)?)\r\n- Taking this one step further, `getrawtransaction` queries transaction data from the mempool or from blocks (if txindex is enabled) in one RPC. Would it make sense to have something similar for outpoints, instead of two separate RPCs?\r\n- I think that the indexed data will not be deleted in case of a reorg (but possibly overwritten if an outpoint would be spent in a different tx as a result of a reorg). That means that a result from `gettxospender` could be stale. Would it make sense to delete entries or should we at least mention this possibility in the rpc doc?\r\n- What's the reason for the dependency on -txindex? As far as I can see it's not technical, so would knowing the fact that an outpoint was used in a tx (even if we can't lookup the details of that tx further) be sufficient for some use cases?",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-908174478",
      "submitted_at": "2022-03-13T21:25:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6234272771,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAFzl3QD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6234272771",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-14T10:27:58Z"
    },
    {
      "event": "commented",
      "id": 1066633467,
      "node_id": "IC_kwDOABII584_k4j7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1066633467",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-14T10:47:14Z",
      "updated_at": "2022-03-14T10:47:14Z",
      "author_association": "CONTRIBUTOR",
      "body": ">     * `getmempooltxspendingprevout` in #24408 takes a list of outpoints, `gettxospender` takes a single outpoint. Would it make sense to have the same format here (I'd guess a common use case would be to check both RPCs with the same outpoint(s)?)\r\n\r\nBitcoin supports batched RPC request so from a functional p.o.v it's equivalent to passing a list of outpoints but it's a bit easier to reason about imho. \r\nI think that the use case for  `getmempooltxspendingprevout` is a bit different: you want to bump fees for a set of txs that are related to the same channel and want to understand who is spending what. You may also have txs with multiple inputs, and would pass them all together to `getmempooltxspendingprevout`.\r\n\r\nFor `gettxospender` the use case is trying to understand why channels have been closed and react if needed, if we could pass in multiple outpoints they would likely be unrelated.\r\n \r\n>     * Taking this one step further, `getrawtransaction` queries transaction data from the mempool or from blocks (if txindex is enabled) in one RPC. Would it make sense to have something similar for outpoints, instead of two separate RPCs?\r\n\r\nMaybe, let's see where the discussion in https://github.com/bitcoin/bitcoin/pull/24408 but to me it feels cleaner to have separate calls.\r\n\r\n>     * I think that the indexed data will not be deleted in case of a reorg (but possibly overwritten if an outpoint would be spent in a different tx as a result of a reorg). That means that a result from `gettxospender` could be stale. Would it make sense to delete entries or should we at least mention this possibility in the rpc doc?\r\n> \r\n>     * What's the reason for the dependency on -txindex? As far as I can see it's not technical, so would knowing the fact that an outpoint was used in a tx (even if we can't lookup the details of that tx further) be sufficient for some use cases?\r\n\r\nWe would almost always want to get the actual tx that spends our outpoint. My reasoning was that relying on `-txindex` makes `gettxospender` robust and consistent in the case of reorgs and is also simpler and easier to understand that storing block positions instead of txids. ",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1066633467",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-16T11:07:42Z",
      "updated_at": "2022-03-16T11:07:42Z",
      "source": {
        "issue": {
          "id": 1170864827,
          "node_id": "PR_kwDOABII5840hlQ2",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24582",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24582/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24582/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24582/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24582",
          "number": 24582,
          "state": "closed",
          "state_reason": null,
          "title": "Move txoutproof RPCs to txoutproof.cpp",
          "body": "The txoutproof RPCs don't really fit into `rawtransaction.cpp`, as they deal with txids, not with raw transactions. As they are placed in the `blockchain` RPC category, they could be moved there. However, `blockchain.cpp` already takes about 20 seconds to compile (and `rawtransaction.cpp` even longer), so move them to a separate file.\r\n\r\nCan be reviewed with `--color-moved=dimmed-zebra --color-moved-ws=ignore-all-space`.",
          "user": {
            "login": "MarcoFalke",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MarcoFalke",
            "html_url": "https://github.com/MarcoFalke",
            "followers_url": "https://api.github.com/users/MarcoFalke/followers",
            "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
            "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
            "repos_url": "https://api.github.com/users/MarcoFalke/repos",
            "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24582",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24582",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24582.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24582.patch"
          },
          "closed_at": "2022-03-23T20:01:28Z",
          "created_at": "2022-03-16T11:01:57Z",
          "updated_at": "2023-03-24T10:20:37Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 6294804839,
      "node_id": "LE_lADOABII585Fi6uozwAAAAF3Mxln",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6294804839",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-23T20:55:24Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6297680749,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAF3Xvtt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6297680749",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T09:11:13Z"
    },
    {
      "event": "unlabeled",
      "id": 6297823303,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAF3YShH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6297823303",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T09:30:14Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T10:12:32Z",
      "updated_at": "2022-03-24T10:12:32Z",
      "source": {
        "issue": {
          "id": 1175324896,
          "node_id": "PR_kwDOABII5840vKdO",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24626",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24626/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24626/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24626/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24626",
          "number": 24626,
          "state": "closed",
          "state_reason": null,
          "title": "init: disallow reindex-chainstate when pruning",
          "body": "The combination of `-reindex-chainstate` and `-prune` currently makes the node stuck in an endless loop:\r\n\r\n- `LoadChainstate()` will wipe the existing chainstate (so we have no genesis block anymore). It won't clean up unusable block files by calling `CleanupBlockRevFiles()` as for full `-reindex`.\r\n- `ThreadImport()` has [logic](https://github.com/bitcoin/bitcoin/blob/91d12344b1e51809c1ef6b630b631a6da00267c3/src/node/blockstorage.cpp#L855) of reloading Genesis after reindexing. This is what makes full `-reindex` work with `-prune` but it's not executed for `-reindex-chainstate`.\r\n- Since we still don't have a genesis block, init will wait for it forever in an endless loop ([code](https://github.com/bitcoin/bitcoin/blob/91d12344b1e51809c1ef6b630b631a6da00267c3/src/init.cpp#L1630-L1640)).\r\n\r\nFix this by disallowing `-reindex-chainstate` together with `-prune`. This is discouraged in the help for `-reindex-chainstate` anyway (\"When in pruning mode or if blocks on disk might be corrupted, use full -reindex instead.\") but wasn't enforced.\r\n\r\nFixes #24242",
          "user": {
            "login": "mzumsande",
            "id": 48763452,
            "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mzumsande",
            "html_url": "https://github.com/mzumsande",
            "followers_url": "https://api.github.com/users/mzumsande/followers",
            "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
            "organizations_url": "https://api.github.com/users/mzumsande/orgs",
            "repos_url": "https://api.github.com/users/mzumsande/repos",
            "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/mzumsande/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24626",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24626",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24626.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24626.patch"
          },
          "closed_at": "2022-03-24T13:28:31Z",
          "created_at": "2022-03-21T12:38:21Z",
          "updated_at": "2023-04-06T14:42:13Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6298501136,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAF3a4AQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6298501136",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-03-24T11:03:23Z"
    },
    {
      "event": "commented",
      "id": 1086218571,
      "node_id": "IC_kwDOABII585AvmFL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1086218571",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-01T18:41:32Z",
      "updated_at": "2022-04-01T18:41:32Z",
      "author_association": "MEMBER",
      "body": "Concept ACK, nice",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1086218571",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "unlabeled",
      "id": 6432241836,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAF_ZDis",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6432241836",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T06:54:43Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "unlabeled",
      "id": 6432241837,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAF_ZDit",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6432241837",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T06:54:43Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "unlabeled",
      "id": 6432241838,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAF_ZDiu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6432241838",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-14T06:54:43Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-22T21:35:51Z",
      "updated_at": "2022-04-22T21:35:51Z",
      "source": {
        "issue": {
          "id": 1146062635,
          "node_id": "PR_kwDOABII584zPgDu",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24408",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24408/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24408/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24408/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24408",
          "number": 24408,
          "state": "closed",
          "state_reason": null,
          "title": "rpc: add rpc to get mempool txs spending specific prevouts",
          "body": "We add an RPC to fetch mempool transactions spending any of the given outpoints.\r\n\r\nWithout this RPC, application developers need to first call `getrawmempool` which returns a long list of `txid`, then fetch each of these transactions individually (`getrawtransaction`) to check whether they spend the given outpoints, which wastes a lot of bandwidth (in the worst case we need to transfer the whole mempool).\r\n\r\nFor example in lightning, when we discover that one of our channel funding transactions has been spent, we need to find the spending transaction to claim our outputs from it. We are currently forced to fetch the whole mempool to do the analysis ourselves, which is quite costly.\r\n\r\nI believe that this RPC is also generally useful when doing some introspection on your mempool after one of your transactions failed to broadcast, for example when you implement RBF at the application level. Fetching and analyzing the conflicting transaction gives you more information to successfully replace it.",
          "user": {
            "login": "t-bast",
            "id": 31281497,
            "node_id": "MDQ6VXNlcjMxMjgxNDk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/t-bast",
            "html_url": "https://github.com/t-bast",
            "followers_url": "https://api.github.com/users/t-bast/followers",
            "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
            "organizations_url": "https://api.github.com/users/t-bast/orgs",
            "repos_url": "https://api.github.com/users/t-bast/repos",
            "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/t-bast/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 34,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24408",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24408",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24408.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24408.patch"
          },
          "closed_at": "2022-05-27T13:18:10Z",
          "created_at": "2022-02-21T17:24:18Z",
          "updated_at": "2023-05-29T10:04:03Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 950732877,
      "node_id": "PRR_kwDOABII5844qwhN",
      "url": null,
      "actor": null,
      "commit_id": "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-950732877",
      "submitted_at": "2022-04-23T00:41:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-25T00:58:49Z",
      "updated_at": "2022-04-25T00:58:49Z",
      "source": {
        "issue": {
          "id": 1213672368,
          "node_id": "PR_kwDOABII5842rzKg",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24959",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24959/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24959/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24959/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24959",
          "number": 24959,
          "state": "closed",
          "state_reason": null,
          "title": "Remove not needed clang-format off comments",
          "body": "It seems odd to disable clang-format and force manual formatting when there is no need for it. So remove the clang-format comments and other unneeded comments.\r\n\r\nCan be reviewed with `--word-diff-regex=. --ignore-all-space`\r\n\r\nLooks like this was initially added in commit d9d79576f423cd9c5cef4547c7e3648dbb339460 to accommodate a linter that has since been removed and replaced by a functional test.",
          "user": {
            "login": "MarcoFalke",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MarcoFalke",
            "html_url": "https://github.com/MarcoFalke",
            "followers_url": "https://api.github.com/users/MarcoFalke/followers",
            "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
            "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
            "repos_url": "https://api.github.com/users/MarcoFalke/repos",
            "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24959",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24959",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24959.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24959.patch"
          },
          "closed_at": "2022-04-26T13:11:58Z",
          "created_at": "2022-04-24T14:37:11Z",
          "updated_at": "2023-04-27T09:57:26Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6492194951,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGC9wiH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6492194951",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-25T17:03:37Z"
    },
    {
      "event": "commented",
      "id": 1108832699,
      "node_id": "IC_kwDOABII585CF3G7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1108832699",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-25T17:14:59Z",
      "updated_at": "2022-04-25T17:14:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased on https://github.com/bitcoin/bitcoin/pull/24408",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1108832699",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "labeled",
      "id": 6501915115,
      "node_id": "LE_lADOABII585Fi6uozwAAAAGDi1nr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6501915115",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-26T20:48:55Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1110949442,
      "node_id": "IC_kwDOABII585CN75C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1110949442",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T12:37:13Z",
      "updated_at": "2022-04-27T12:37:13Z",
      "author_association": "MEMBER",
      "body": "Looks like the test somehow went away? If #https://github.com/bitcoin/bitcoin/pull/24408 is merged soon, you can fix everything on the next rebase.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1110949442",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6507479187,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGD4ECT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6507479187",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T14:22:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6507719483,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGD4-s7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6507719483",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T14:51:34Z"
    },
    {
      "event": "commented",
      "id": 1111137054,
      "node_id": "IC_kwDOABII585COpse",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1111137054",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T15:23:50Z",
      "updated_at": "2022-04-27T15:23:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Looks like the test somehow went away? If ##24408 is merged soon, you can fix everything on the next rebase.\r\n\r\nYes sorry about that, I've brought it back. I will also add another commit to move `gettxspendingprevout` out of `rpc/mempool.cpp`.",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1111137054",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "unlabeled",
      "id": 6508168651,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAGD6sXL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6508168651",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-27T15:48:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-29T06:31:14Z",
      "updated_at": "2022-04-29T06:31:14Z",
      "source": {
        "issue": {
          "id": 829979688,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTkxNTU5MTg5",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21422",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21422/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21422/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/21422/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/21422",
          "number": 21422,
          "state": "closed",
          "state_reason": null,
          "title": "Add feerate histogram to getmempoolinfo",
          "body": "This PR is a slightly modified version of #15836 (jonasschnelli):\r\n\r\n> This follows the approach of adding statistical information to Bitcoin Core that would otherwise be inefficient to calculate outside of the codebase.\r\n> \r\n> Adds an optional feerate histogram to `getmempoolinfo`.\r\n> \r\n> The concept and code is heavily inspired by the stats jhoenicke runs (https://github.com/jhoenicke/mempool, http://bitcoin-mempool.info).\r\n> \r\n> If someone has a good idea how to make the feerate-groups dynamic but also semi-constant for similar fee environments, please comment.\r\n> \r\n> If this is feature we'd like to have in master (concept ACKs), I'd continue this with writing tests.\r\n> \r\n> A simple plot of the data is [here](https://bitcointools.jonasschnelli.ch/mempool-histogram/).\r\n> RPC output sample is [here](https://gist.github.com/jonasschnelli/f5b8a701375c280b65842f44e4f6c046).\r\n\r\n<s>My attempts to contact jonasschnelli were, unfortunately, unsuccessful so I decided to create this PR in an attempt to move this forward. If this is somehow problematic, please let me know to work it out.</s> **edit:** Jonas is happy the work continues.\r\n\r\n### This PR\r\n\r\nNote that REST support which is in #15836 is not included in this PR. It can be improved in this PR or in a follow-up one if it is deemed useful/required/etc.\r\n\r\n#### Applied review comments from the old PR\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/15836#discussion_r304327165 - \"Remove these files and maybe update .gitignore?\"\r\n* https://github.com/bitcoin/bitcoin/pull/15836#discussion_r304346834 - \"This must be before the above line (order is important) otherwise `rest_mempool_info_with_fee_histogram` is never called.\"\r\n* https://github.com/bitcoin/bitcoin/pull/15836#issuecomment-499886548 - \"This gives me a new warning on build: [...]\" This is already addressed, I believe.\r\n* https://github.com/bitcoin/bitcoin/pull/15836#discussion_r588927756 - Simplify `if (feeperbyte >= feelimits[i] && (i == feelimits.size() - 1 || feeperbyte < feelimits[i + 1])) {`\r\n* https://github.com/bitcoin/bitcoin/commit/0b6ba66238c377116bc6c21e19cffbf1b6dfc788 - Added test proposed by promag\r\n* https://github.com/bitcoin/bitcoin/pull/15836#discussion_r437788703 - `std::to_string(...)` replaced with `ToString(...) as done in #18134\r\n\r\n#### Test commands\r\n\r\n```bash\r\n$ ./bitcoin-cli -testnet getmempoolinfo \"[0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 17, 20, 25, 30, 40, 50, 60, 70, 80, 100, 120, 140, 170, 200]\" # To test the new behavior\r\n```\r\n\r\n```bash\r\n$ test/functional/test_runner.py mempool_fee_histogram.py # To run the new test\r\n```\r\n\r\n```bash\r\n$ ./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test help getmempoolinfo\r\ngetmempoolinfo ( [fee_rate,...] )\r\n\r\nReturns details on the active state of the TX memory pool.\r\n\r\nArguments:\r\n1. fee_histogram    (json array, optional) Fee statistics grouped by fee rate ranges\r\n     [\r\n       fee_rate,    (numeric, required) Fee rate (in sat/vB) to group the fees by\r\n       ...\r\n     ]\r\n\r\nResult:\r\n{                               (json object)\r\n  \"loaded\" : true|false,        (boolean) True if the mempool is fully loaded\r\n  \"size\" : n,                   (numeric) Current tx count\r\n  \"bytes\" : n,                  (numeric) Sum of all virtual transaction sizes as defined in BIP 141. Differs from actual serialized size because witness data is discounted\r\n  \"usage\" : n,                  (numeric) Total memory usage for the mempool\r\n  \"total_fee\" : n,              (numeric) Total fees for the mempool in BTC, ignoring modified fees through prioritizetransaction\r\n  \"maxmempool\" : n,             (numeric) Maximum memory usage for the mempool\r\n  \"mempoolminfee\" : n,          (numeric) Minimum fee rate in BTC/kvB for tx to be accepted. Is the maximum of minrelaytxfee and minimum mempool fee\r\n  \"minrelaytxfee\" : n,          (numeric) Current minimum relay fee for transactions\r\n  \"unbroadcastcount\" : n,       (numeric) Current number of transactions that haven't passed initial broadcast yet\r\n  \"fee_histogram\" : {           (json object)\r\n    \"fee_rate_groups\" : {       (json object)\r\n      \"<fee_rate_group>\" : {    (json object) Fee rate group named by its lower bound (in sat/vB), identical to the \"from\" field below\r\n        \"size\" : n,             (numeric) Cumulative size of all transactions in the fee rate group (in vBytes)\r\n        \"count\" : n,            (numeric) Number of transactions in the fee rate group\r\n        \"fees\" : n,             (numeric) Cumulative fees of all transactions in the fee rate group (in sat)\r\n        \"from\" : n             (numeric) Group contains transactions with fee rates equal or greater than this value (in sat/vB)\r\n      },\r\n      ...\r\n    },\r\n    \"total_fees\" : n            (numeric) Total available fees in mempool (in sat)\r\n  }\r\n}\r\n\r\nExamples:\r\n> bitcoin-cli getmempoolinfo\r\n> bitcoin-cli getmempoolinfo \"[0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 17, 20, 25, 30, 40, 50, 60, 70, 80, 100, 120, 140, 170, 200]\"\r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getmempoolinfo\", \"params\": []}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n> curl --user myusername --data-binary '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getmempoolinfo\", \"params\": [[0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 17, 20, 25, 30, 40, 50, 60, 70, 80, 100, 120, 140, 170, 200]]}' -H 'content-type: text/plain;' http://127.0.0.1:8332/\r\n```\r\n\r\n#### Output on testnet (2022-07-09)\r\n\r\n```bash\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0, 1, 2, 3, 4, 5, 6, 7, 8, 10, 12, 14, 17, 20, 25, 30, 40, 50, 60, 70, 80, 100, 120, 140, 170, 200]\"\r\n```\r\n\r\n<details>\r\n  <summary>JSON output</summary>\r\n\r\n  ```json\r\n{\r\n  \"loaded\": true,\r\n  \"size\": 10,\r\n  \"bytes\": 2652,\r\n  \"usage\": 13504,\r\n  \"total_fee\": 0.00363010,\r\n  \"maxmempool\": 300000000,\r\n  \"mempoolminfee\": 0.00001000,\r\n  \"minrelaytxfee\": 0.00001000,\r\n  \"unbroadcastcount\": 0,\r\n  \"fee_histogram\": {\r\n    \"fee_rate_groups\": {\r\n      \"0\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 0\r\n      },\r\n      \"1\": {\r\n        \"size\": 403,\r\n        \"count\": 2,\r\n        \"fees\": 403,\r\n        \"from\": 1\r\n      },\r\n      \"2\": {\r\n        \"size\": 554,\r\n        \"count\": 2,\r\n        \"fees\": 561,\r\n        \"from\": 2\r\n      },\r\n      \"3\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 3\r\n      },\r\n      \"4\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 4\r\n      },\r\n      \"5\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 5\r\n      },\r\n      \"6\": {\r\n        \"size\": 255,\r\n        \"count\": 1,\r\n        \"fees\": 1345,\r\n        \"from\": 6\r\n      },\r\n      \"7\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 7\r\n      },\r\n      \"8\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 8\r\n      },\r\n      \"10\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 10\r\n      },\r\n      \"12\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 12\r\n      },\r\n      \"14\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 14\r\n      },\r\n      \"17\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 17\r\n      },\r\n      \"20\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 20\r\n      },\r\n      \"25\": {\r\n        \"size\": 352,\r\n        \"count\": 1,\r\n        \"fees\": 9505,\r\n        \"from\": 25\r\n      },\r\n      \"30\": {\r\n        \"size\": 144,\r\n        \"count\": 1,\r\n        \"fees\": 4520,\r\n        \"from\": 30\r\n      },\r\n      \"40\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 40\r\n      },\r\n      \"50\": {\r\n        \"size\": 374,\r\n        \"count\": 1,\r\n        \"fees\": 20000,\r\n        \"from\": 50\r\n      },\r\n      \"60\": {\r\n        \"size\": 351,\r\n        \"count\": 1,\r\n        \"fees\": 23937,\r\n        \"from\": 60\r\n      },\r\n      \"70\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 70\r\n      },\r\n      \"80\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 80\r\n      },\r\n      \"100\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 100\r\n      },\r\n      \"120\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 120\r\n      },\r\n      \"140\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 140\r\n      },\r\n      \"170\": {\r\n        \"size\": 0,\r\n        \"count\": 0,\r\n        \"fees\": 0,\r\n        \"from\": 170\r\n      },\r\n      \"200\": {\r\n        \"size\": 219,\r\n        \"count\": 1,\r\n        \"fees\": 302739,\r\n        \"from\": 200\r\n      }\r\n    },\r\n    \"total_fees\": 363010\r\n  }\r\n}\r\n```\r\n</details>\r\n\r\n#### Various inputs\r\n\r\n```bash\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0]\"       # OK, one fee rate group covering all possible transaction fee rates (i.e. `>=0`); total_fee = fee_histogram.total_fees\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[-1]\"      # reports: Non-negative values are expected\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0,0]\"     # reports: Strictly increasing values are expected\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0,1,0]\"   # reports: Strictly increasing values are expected\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo \"[0, 1000000000000000000000000000000000]\" # reports: JSON integer out of range\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo '[1.2,2,3]' # reports: JSON integer out of range\r\n./bitcoin-cli -testnet -rpcuser=test -rpcpassword=test getmempoolinfo '[\"2\"]'     # reports: Error parsing JSON: ['2']\r\n```",
          "user": {
            "login": "kiminuo",
            "id": 58662979,
            "node_id": "MDQ6VXNlcjU4NjYyOTc5",
            "avatar_url": "https://avatars.githubusercontent.com/u/58662979?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kiminuo",
            "html_url": "https://github.com/kiminuo",
            "followers_url": "https://api.github.com/users/kiminuo/followers",
            "following_url": "https://api.github.com/users/kiminuo/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/kiminuo/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/kiminuo/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/kiminuo/subscriptions",
            "organizations_url": "https://api.github.com/users/kiminuo/orgs",
            "repos_url": "https://api.github.com/users/kiminuo/repos",
            "events_url": "https://api.github.com/users/kiminuo/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/kiminuo/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 71,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/21422",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/21422",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/21422.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/21422.patch"
          },
          "closed_at": "2023-03-20T14:42:45Z",
          "created_at": "2021-03-12T10:32:00Z",
          "updated_at": "2023-07-08T08:02:40Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1113716662,
      "node_id": "IC_kwDOABII585CYfe2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1113716662",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-29T20:52:02Z",
      "updated_at": "2022-04-29T20:52:02Z",
      "author_association": "MEMBER",
      "body": "As with #24408, unless there's a need for looking up an unpredictable outpoint after its spend is mined (why?), I think a watch-only wallet is the correct approach for this use case, and expecting users to build infinitely-growing indexes isn't a good solution.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1113716662",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "reviewed",
      "id": 958241302,
      "node_id": "PRR_kwDOABII5845HZoW",
      "url": null,
      "actor": null,
      "commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Suggested patch: https://gist.github.com/luke-jr/beb37abb2cfc2f7db86605f74bc4b934",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-958241302",
      "submitted_at": "2022-04-29T22:47:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-04-30T14:50:55Z",
      "updated_at": "2022-04-30T14:50:55Z",
      "source": {
        "issue": {
          "id": 930266556,
          "node_id": "MDExOlB1bGxSZXF1ZXN0Njc3OTg5MzM4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22341",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22341/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22341/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/22341/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/22341",
          "number": 22341,
          "state": "open",
          "state_reason": null,
          "title": "rpc: add getxpub",
          "body": "Depends on #26728\r\n\r\nThis PR introduces a new wallet RPC `getxpub`. It takes a BIP32 path as argument and returns the xpub, along with the master key fingerprint.\r\n\r\nTo test this PR:\r\n\r\n* create a regular descriptor wallet\r\n* call `getxpub m/86h/0h/0h`\r\n* call `listdescriptors`, compare the xpub in the `tr()` descriptor with the previous step\r\n\r\n## Bigger picture\r\n\r\nThis paves the way for using Bitcoin Core as one signer in a multisig setup. It simplifies the proposed flow in #22067.\r\n\r\nThe eventual flow would be:\r\n1. Create a blank wallet with a seed (either with no descriptors, or where its single key descriptors are not `active`, so they don't get used when calling `getnewaddress`). \r\n2. Call `getxpub m/87h/0h/0h` (as suggested in [BIP 87](https://github.com/bitcoin/bips/blob/master/bip-0087.mediawiki))\r\n3. (Manually, with Specter or with a simple Python utility - TBD): craft a multisig descriptor containing this xpub\r\n4. Call `importdescriptors` which will allow the import if its own fingerprint is recognized (and after checking the xpub)\r\n5. The usual flow with `getnewaddress`, `send` and `walletprocesspsbt` (and their GUI equivalents)\r\n\r\nThis PR makes step (2) possible.\r\n\r\nStep (1) would require a followup, because blank wallets currently can't have a seed. Step 4 would also require a followup,  so that `importdescriptors` treats an `xpub` as if it was an `xpriv`, after checking that it can derive the xpub from the seed (that matches the fingerprint)\r\n\r\nOn the GUI side a wizard could perform the above steps and guide the user, where they either:\r\n* export their own xpub and then import a descriptor from somewhere else (performing some sanity checks); or\r\n* import xpub(s) from other wallets, compose a multisig and get the descriptors for export; or\r\n* get xpub(s) from connected hardware devices and configure a multisig (with or without a key on their machine)",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 29,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/22341",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/22341",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/22341.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/22341.patch"
          },
          "created_at": "2021-06-25T15:12:03Z",
          "updated_at": "2023-08-03T23:36:58Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 958601762,
      "node_id": "PRR_kwDOABII5845Ixoi",
      "url": null,
      "actor": null,
      "commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-958601762",
      "submitted_at": "2022-05-01T15:16:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "reviewed",
      "id": 959202584,
      "node_id": "PRR_kwDOABII5845LEUY",
      "url": null,
      "actor": null,
      "commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-959202584",
      "submitted_at": "2022-05-02T15:18:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "reviewed",
      "id": 959413555,
      "node_id": "PRR_kwDOABII5845L30z",
      "url": null,
      "actor": null,
      "commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-959413555",
      "submitted_at": "2022-05-02T18:34:59Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "commented",
      "id": 1115235423,
      "node_id": "IC_kwDOABII585CeSRf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1115235423",
      "actor": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-02T18:42:06Z",
      "updated_at": "2022-05-02T18:42:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "@sstone I created a branch that modifies this PR to include the `in_mempool` and `block_height` of the transaction that spends the output.\r\nThe result is like this:\r\n\r\n```\r\n[\r\n  {\r\n    \"txid\": \"c8de5b22e7dac049cd6a2628580876d74c16a58a886be2b4b1c744901f8e953e\",\r\n    \"vout\": 0,\r\n    \"spendingtxid\": \"117dd0df58201d4ac6c49472dc59208487caa7d79079a4bb32d85c16f4174e72\",\r\n    \"in_mempool\": false,\r\n    \"block_height\": 88551\r\n  }\r\n]\r\n```\r\n\r\nIf you agree with this approach, feel free to use the code of that branch.\r\nhttps://github.com/w0xlt/bitcoin/tree/add_txospender_index_2",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1115235423",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "mentioned",
      "id": 6535486440,
      "node_id": "MEE_lADOABII585Fi6uozwAAAAGFi5vo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6535486440",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-02T18:42:06Z"
    },
    {
      "event": "subscribed",
      "id": 6535486448,
      "node_id": "SE_lADOABII585Fi6uozwAAAAGFi5vw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6535486448",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-02T18:42:06Z"
    },
    {
      "event": "comment_deleted",
      "id": 6543103911,
      "node_id": "CDE_lADOABII585Fi6uozwAAAAGF_9en",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6543103911",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-03T18:51:05Z"
    },
    {
      "event": "commented",
      "id": 1116455957,
      "node_id": "IC_kwDOABII585Ci8QV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1116455957",
      "actor": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-03T19:00:42Z",
      "updated_at": "2022-05-03T19:00:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "There is no need for a new commit to address review comments.\r\nThe last commit can be squashed.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#squashing-commits",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1116455957",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6543418094,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGGBKLu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6543418094",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-03T19:37:39Z"
    },
    {
      "event": "commented",
      "id": 1117947117,
      "node_id": "IC_kwDOABII585CooTt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1117947117",
      "actor": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-04T21:18:05Z",
      "updated_at": "2022-05-04T21:18:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "The `static RPCHelpMan getindexinfo()` RPC should also be updated.\r\n\r\n```diff\r\nstatic RPCHelpMan getindexinfo()\r\n{\r\n    // ...\r\n    if (g_txindex) {\r\n        result.pushKVs(SummaryToJSON(g_txindex->GetSummary(), index_name));\r\n    }\r\n\r\n    if (g_coin_stats_index) {\r\n        result.pushKVs(SummaryToJSON(g_coin_stats_index->GetSummary(), index_name));\r\n    }\r\n\r\n+    if (g_txospenderindex) {\r\n+        result.pushKVs(SummaryToJSON(g_txospenderindex->GetSummary(), index_name));\r\n+    }\r\n\r\n    ForEachBlockFilterIndex([&result, &index_name](const BlockFilterIndex& index) {\r\n        result.pushKVs(SummaryToJSON(index.GetSummary(), index_name));\r\n    });\r\n    // ...\r\n}\r\n```\r\n\r\n",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1117947117",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6558792341,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGG7zqV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6558792341",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-05T18:35:21Z"
    },
    {
      "event": "commented",
      "id": 1119010703,
      "node_id": "IC_kwDOABII585Csr-P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1119010703",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-05T20:21:43Z",
      "updated_at": "2022-05-05T20:21:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The `static RPCHelpMan getindexinfo()` RPC should also be updated.\r\n> \r\n> ```diff\r\n> static RPCHelpMan getindexinfo()\r\n> {\r\n>     // ...\r\n>     if (g_txindex) {\r\n>         result.pushKVs(SummaryToJSON(g_txindex->GetSummary(), index_name));\r\n>     }\r\n> \r\n>     if (g_coin_stats_index) {\r\n>         result.pushKVs(SummaryToJSON(g_coin_stats_index->GetSummary(), index_name));\r\n>     }\r\n> \r\n> +    if (g_txospenderindex) {\r\n> +        result.pushKVs(SummaryToJSON(g_txospenderindex->GetSummary(), index_name));\r\n> +    }\r\n> \r\n>     ForEachBlockFilterIndex([&result, &index_name](const BlockFilterIndex& index) {\r\n>         result.pushKVs(SummaryToJSON(index.GetSummary(), index_name));\r\n>     });\r\n>     // ...\r\n> }\r\n> ```\r\n\r\nThanks! done in https://github.com/bitcoin/bitcoin/pull/24539/commits/d9d96f8b5dab7a617efb95c7a4c53114a7815abe",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1119010703",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "t-bast",
        "id": 31281497,
        "node_id": "MDQ6VXNlcjMxMjgxNDk3",
        "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/t-bast",
        "html_url": "https://github.com/t-bast",
        "followers_url": "https://api.github.com/users/t-bast/followers",
        "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
        "organizations_url": "https://api.github.com/users/t-bast/orgs",
        "repos_url": "https://api.github.com/users/t-bast/repos",
        "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/t-bast/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-06T08:17:33Z",
      "updated_at": "2022-05-06T08:17:33Z",
      "source": {
        "issue": {
          "id": 1226912889,
          "node_id": "PR_kwDOAnIUks43XcpN",
          "url": "https://api.github.com/repos/ACINQ/eclair/issues/2258",
          "repository_url": "https://api.github.com/repos/ACINQ/eclair",
          "labels_url": "https://api.github.com/repos/ACINQ/eclair/issues/2258/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/ACINQ/eclair/issues/2258/comments",
          "events_url": "https://api.github.com/repos/ACINQ/eclair/issues/2258/events",
          "html_url": "https://github.com/ACINQ/eclair/pull/2258",
          "number": 2258,
          "state": "closed",
          "state_reason": null,
          "title": "Improve wallet double-spend detection",
          "body": "Our mechanism to detect double-spending wasn't correctly taking into account unconfirmed inputs. This was only used in single-funder scenarios so it could only be an issue in rare edge cases, where it would not lead to any loss of funds as we keep commit tx data in our DB even for closed channels.\r\n\r\nThe second commit is a refactoring that introduces an `isTransactionOutputSpent` function, let me know if you like it, otherwise we can just keep the first commit alone. In the future, once (if) we have https://github.com/bitcoin/bitcoin/pull/24539 we can update `isTransactionOutputSpent` and `doubleSpent` with a `minDepth` parameter to make them reorg-safe(r).",
          "user": {
            "login": "t-bast",
            "id": 31281497,
            "node_id": "MDQ6VXNlcjMxMjgxNDk3",
            "avatar_url": "https://avatars.githubusercontent.com/u/31281497?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/t-bast",
            "html_url": "https://github.com/t-bast",
            "followers_url": "https://api.github.com/users/t-bast/followers",
            "following_url": "https://api.github.com/users/t-bast/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/t-bast/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/t-bast/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/t-bast/subscriptions",
            "organizations_url": "https://api.github.com/users/t-bast/orgs",
            "repos_url": "https://api.github.com/users/t-bast/repos",
            "events_url": "https://api.github.com/users/t-bast/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/t-bast/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 1,
          "pull_request": {
            "url": "https://api.github.com/repos/ACINQ/eclair/pulls/2258",
            "html_url": "https://github.com/ACINQ/eclair/pull/2258",
            "diff_url": "https://github.com/ACINQ/eclair/pull/2258.diff",
            "patch_url": "https://github.com/ACINQ/eclair/pull/2258.patch"
          },
          "closed_at": "2022-05-16T12:56:05Z",
          "created_at": "2022-05-05T16:23:10Z",
          "updated_at": "2022-05-16T12:56:09Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-07T02:21:37Z",
      "updated_at": "2022-05-07T02:21:37Z",
      "source": {
        "issue": {
          "id": 1206247497,
          "node_id": "PR_kwDOABII5842Uktn",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24897",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24897/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24897/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24897/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24897",
          "number": 24897,
          "state": "closed",
          "state_reason": null,
          "title": "[Draft / POC] Silent Payments",
          "body": "This PR proposes an early version of [Silent Payment](https://gist.github.com/RubenSomsen/c43b79517e7cb701ebf77eec6dbb46b8) (author:@RubenSomsen).\r\nIn this scheme, the recipient generates a public address, but the sender tweaks the address and the recipient detects the payment by verifying all transactions on the blockchain. An example use case would be private donations.\r\n\r\nThe purpose of this PR is not a final version, but to start the discussion and get benchmarks based on a real implementation.\r\n\r\nThis version is built on top of [#994](https://github.com/bitcoin-core/secp256k1/pull/994) (bitcoin-core/secp256k1) for x-only ECDH support and #23480 (bitcoin/bitcoin) for `rawtr()`. Each new silent transaction detected is stored in wallet as a `rawtr()` descriptor. \r\n\r\nIn this implementation, the sender can tweak the recipient address by passing the `silent_payment` option to send RPC. The transaction output will be different from the address entered.\r\n\r\nFor example `./src/bitcoin-cli -regtest -named send outputs=\"[{\\\"bcrt1pwlh5xuyrpgfunwyww8cfu78yfs2yqyevl7yturavahh5kgxwdd2q5hzgfu\\\": 1.1}]\" fee_rate=1 options=\"{ \\\"silent_payment\\\": true}\"`.\r\n\r\nwill generate `vout` with completely unrelated outputs:\r\n\r\n```\r\n\"vout\": [\r\n    {\r\n      \"value\": 1.10000000,\r\n      \"n\": 0,\r\n      \"scriptPubKey\": {\r\n        \"desc\": \"rawtr(65b19890c5ca40edb816d26f5f48cd9f3ed51121613b1c2405adc1a6dbbc824a)#8myx9tcu\",\r\n        \"address\": \"bcrt1pvkce3yx9efqwmwqk6fh47jxdnuld2yfpvya3cfq94hq6dkausf9qrfjkgz\",\r\n\r\n      }\r\n    },\r\n    {\r\n      \"value\": 2.02499835,\r\n      \"n\": 1,\r\n      \"scriptPubKey\": {\r\n        \"desc\": \"rawtr(c45cb3d500bbf8f0c8841e8e011b008781d826c16ee348edb822c0f97419bc4d)#26hcce63\",\r\n        \"address\": \"bcrt1pc3wt84gqh0u0pjyyr68qzxcqs7qasfkpdm353mdcytq0jaqeh3xsuvlykg\",\r\n      }\r\n    }\r\n  ]\r\n```\r\n\r\nAny wallet, as long as it has access to private keys, can send silent payments. Thus, this excludes watch-only wallets or wallets with external signers .\r\n\r\nBut the recipient's wallet needs a new flag called `SILENT_PAYMENT`. This flag allows an additional scan that verifies that the wallet keys match the silent payment scheme. When it detects a silent payment that belongs to the wallet, it is stored in a `rawtr()` descriptor.\r\n\r\n`./src/bitcoin-cli -regtest -named createwallet wallet_name=\"recipient\" silent_payment=true`\r\n\r\nTherefore, scanning each address for each transaction is potentially prohibitive overhead, so the node can be initialized with `keypool=1` or a descriptor with range [0,1] can be imported into a blank wallet. Until there is more benchmark data, it is the safest option. The proposal recommends one static address.\r\n\r\nI've been running some silent payments on signet using wallets with default keypool and default range, I haven't noticed any relevant performance drops on the signet node.\r\nApparently this implementation is working as expected but I can't guarantee that the scheme is implemented correctly or safely, so I'm opening this PR for reviews, modifications and improvements.\r\n\r\nThere is a new functional test (`test/functional/wallet_silentpayment.py`) that can help to better understand the implementation.",
          "user": {
            "login": "w0xlt",
            "id": 94266259,
            "node_id": "U_kgDOBZ5jkw",
            "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/w0xlt",
            "html_url": "https://github.com/w0xlt",
            "followers_url": "https://api.github.com/users/w0xlt/followers",
            "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
            "organizations_url": "https://api.github.com/users/w0xlt/orgs",
            "repos_url": "https://api.github.com/users/w0xlt/repos",
            "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/w0xlt/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 159815356,
              "node_id": "MDU6TGFiZWwxNTk4MTUzNTY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Upstream",
              "name": "Upstream",
              "color": "bfd4f2",
              "default": false
            },
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 1482182044,
              "node_id": "MDU6TGFiZWwxNDgyMTgyMDQ0",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Descriptors",
              "name": "Descriptors",
              "description": "",
              "color": "e9f76c",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 86,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24897",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24897",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24897.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24897.patch"
          },
          "closed_at": "2023-06-05T13:18:14Z",
          "created_at": "2022-04-17T00:37:23Z",
          "updated_at": "2023-06-27T11:03:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-25T03:42:53Z",
      "updated_at": "2022-05-25T03:42:53Z",
      "source": {
        "issue": {
          "id": 1247257875,
          "node_id": "PR_kwDOABII5844ZphF",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25204",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25204/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25204/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25204/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25204",
          "number": 25204,
          "state": "closed",
          "state_reason": null,
          "title": "rpc: remove deprecated top-level fee fields from mempool entries",
          "body": "Deprecating the top-level fee fields (`fee`, `modifiedfee`, `ancestorfees` and `descendantfees`) from the mempool entries and introducing `-deprecatedrpc=fees` was done in PR #22689 (released in v23.0). For the next release v24.0, this configuration option can be removed.",
          "user": {
            "login": "theStack",
            "id": 91535,
            "node_id": "MDQ6VXNlcjkxNTM1",
            "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/theStack",
            "html_url": "https://github.com/theStack",
            "followers_url": "https://api.github.com/users/theStack/followers",
            "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
            "organizations_url": "https://api.github.com/users/theStack/orgs",
            "repos_url": "https://api.github.com/users/theStack/repos",
            "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/theStack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25204",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25204",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25204.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25204.patch"
          },
          "closed_at": "2022-05-30T06:54:34Z",
          "created_at": "2022-05-25T00:30:00Z",
          "updated_at": "2023-05-30T10:04:11Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 6697741235,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGPN2uz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6697741235",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-05-29T02:20:03Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-13T07:27:33Z",
      "updated_at": "2022-07-13T07:27:33Z",
      "source": {
        "issue": {
          "id": 1286565113,
          "node_id": "PR_kwDOABII5846dNPb",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25487",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25487/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25487/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25487/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25487",
          "number": 25487,
          "state": "closed",
          "state_reason": null,
          "title": "[kernel 3b/n] Decouple `{Dump,Load}Mempool` from `ArgsManager`",
          "body": "This is part of the `libbitcoinkernel` project: #24303, https://github.com/bitcoin/bitcoin/projects/18\r\n\r\n-----\r\n\r\nThis PR moves `{Dump,Load}Mempool` into its own `kernel/mempool_persist` module and introduces `ArgsManager` `node::` helpers in `node/mempool_persist_args`to remove the scattered calls to `GetBoolArg(\"-persistmempool\", DEFAULT_PERSIST_MEMPOOL)`.\r\n\r\nMore context can be gleaned from the commit messages.\r\n\r\n-----\r\n\r\nOne thing I was reflecting on as I wrote this was that in the long run, I think we should probably invert the validation <-> mempool relationship. Instead of mempool not depending on validation, it might make more sense to have validation not depend on mempool. Not super urgent since `libbitcoinkernel` will include both validation and mempool, but perhaps something for the future.",
          "user": {
            "login": "dongcarl",
            "id": 3445290,
            "node_id": "MDQ6VXNlcjM0NDUyOTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3445290?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/dongcarl",
            "html_url": "https://github.com/dongcarl",
            "followers_url": "https://api.github.com/users/dongcarl/followers",
            "following_url": "https://api.github.com/users/dongcarl/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/dongcarl/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/dongcarl/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/dongcarl/subscriptions",
            "organizations_url": "https://api.github.com/users/dongcarl/orgs",
            "repos_url": "https://api.github.com/users/dongcarl/repos",
            "events_url": "https://api.github.com/users/dongcarl/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/dongcarl/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignee": {
            "login": "glozow",
            "id": 25183001,
            "node_id": "MDQ6VXNlcjI1MTgzMDAx",
            "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/glozow",
            "html_url": "https://github.com/glozow",
            "followers_url": "https://api.github.com/users/glozow/followers",
            "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
            "organizations_url": "https://api.github.com/users/glozow/orgs",
            "repos_url": "https://api.github.com/users/glozow/repos",
            "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/glozow/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "glozow",
              "id": 25183001,
              "node_id": "MDQ6VXNlcjI1MTgzMDAx",
              "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/glozow",
              "html_url": "https://github.com/glozow",
              "followers_url": "https://api.github.com/users/glozow/followers",
              "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
              "organizations_url": "https://api.github.com/users/glozow/orgs",
              "repos_url": "https://api.github.com/users/glozow/repos",
              "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/glozow/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "comments": 21,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25487",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25487",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25487.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25487.patch"
          },
          "closed_at": "2022-07-18T15:09:56Z",
          "created_at": "2022-06-27T23:35:15Z",
          "updated_at": "2023-07-26T10:16:54Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 7013334694,
      "node_id": "LE_lADOABII585Fi6uozwAAAAGiBv6m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7013334694",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-18T15:53:27Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7028797593,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAGi8vCZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7028797593",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-20T12:14:17Z"
    },
    {
      "event": "unlabeled",
      "id": 7029704478,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAGjAMce",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7029704478",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-07-20T14:00:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7446350582,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAG71kr2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7446350582",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-23T10:50:22Z"
    },
    {
      "event": "commented",
      "id": 1260928098,
      "node_id": "IC_kwDOABII585LKDxi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1260928098",
      "actor": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-28T13:36:38Z",
      "updated_at": "2022-09-28T13:37:09Z",
      "author_association": "MEMBER",
      "body": "> As described above, there are tools in bitcoin core that we could use and would help a bit\r\n\r\nMarcoFalke and luke-jr suggested using a watch-only wallet for this use case. I don't fully understand how Lightning works in depth/implementation. Do you know @sstone what would be the pros and cons of using a watch-only wallet for this? \r\n\r\nI haven't fully synced the txospenderindex (height 568907) and I know the index is optional but it's already ~60GB, so is it worth it for layer 2 node operators?",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1260928098",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "mentioned",
      "id": 7478044550,
      "node_id": "MEE_lADOABII585Fi6uozwAAAAG9ueeG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7478044550",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-28T13:36:39Z"
    },
    {
      "event": "subscribed",
      "id": 7478044558,
      "node_id": "SE_lADOABII585Fi6uozwAAAAG9ueeO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7478044558",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-28T13:36:39Z"
    },
    {
      "event": "commented",
      "id": 1265735375,
      "node_id": "IC_kwDOABII585LcZbP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1265735375",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-03T16:41:53Z",
      "updated_at": "2022-10-03T16:41:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "For most LN nodes watch-only wallets are probably enough: you would import all your channel outpoints, and check your wallet transactions for spending transactions (bitcoin core should include them). AFAIK you would do this by importing each channel outpoint in a single \"address\" descriptor (though it seems that there is currently no way to remove a descriptor ?).\r\n\r\nBut I'm not sure yet how practical and efficient this would be for large nodes with 10s of 1000s of transactions (I would like to have bitcoin core do some kind of filtering before it returns wallet transactions).   ",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1265735375",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-03T23:40:06Z",
      "updated_at": "2022-10-03T23:40:06Z",
      "source": {
        "issue": {
          "id": 1394891848,
          "node_id": "PR_kwDOABII585AEGSC",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26235",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26235/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26235/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26235/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26235",
          "number": 26235,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: move *index constants out of validation",
          "body": "Move `*index` default constants out of `validation.h`.",
          "user": {
            "login": "fanquake",
            "id": 863730,
            "node_id": "MDQ6VXNlcjg2MzczMA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fanquake",
            "html_url": "https://github.com/fanquake",
            "followers_url": "https://api.github.com/users/fanquake/followers",
            "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
            "organizations_url": "https://api.github.com/users/fanquake/orgs",
            "repos_url": "https://api.github.com/users/fanquake/repos",
            "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fanquake/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26235",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26235",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26235.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26235.patch"
          },
          "closed_at": "2022-10-04T10:38:01Z",
          "created_at": "2022-10-03T15:04:02Z",
          "updated_at": "2022-11-08T21:49:04Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 7515773589,
      "node_id": "LE_lADOABII585Fi6uozwAAAAG_-ZqV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7515773589",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-04T11:59:31Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7524218832,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHAenfQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7524218832",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-05T11:04:53Z"
    },
    {
      "event": "unlabeled",
      "id": 7524269215,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAHAezyf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7524269215",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-05T11:13:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-06T12:09:41Z",
      "updated_at": "2022-10-06T12:09:41Z",
      "source": {
        "issue": {
          "id": 1397981492,
          "node_id": "PR_kwDOABII585AOXp1",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26260",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26260/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26260/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26260/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26260",
          "number": 26260,
          "state": "open",
          "state_reason": null,
          "title": "Update best_header inside Connect/DisconnectTip",
          "body": "Fixes #26245. \r\nFrom furszy:\r\n> Update best_header inside Connect/DisconnectTip\r\n> This solves a problem where best_header isn't updated in case of forced reorg\r\n> like a block invalidation and reconsideration.\r\n\r\nI added a test.",
          "user": {
            "login": "aureleoules",
            "id": 22493292,
            "node_id": "MDQ6VXNlcjIyNDkzMjky",
            "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/aureleoules",
            "html_url": "https://github.com/aureleoules",
            "followers_url": "https://api.github.com/users/aureleoules/followers",
            "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
            "organizations_url": "https://api.github.com/users/aureleoules/orgs",
            "repos_url": "https://api.github.com/users/aureleoules/repos",
            "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/aureleoules/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26260",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26260",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26260.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26260.patch"
          },
          "created_at": "2022-10-05T15:22:55Z",
          "updated_at": "2023-08-08T09:19:14Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-11T17:26:31Z",
      "updated_at": "2022-10-11T17:26:31Z",
      "source": {
        "issue": {
          "id": 1404167542,
          "node_id": "PR_kwDOABII585Ai8fh",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26293",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26293/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26293/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26293/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26293",
          "number": 26293,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: move interfaces/* to common/interfaces/*",
          "body": "This came up in #26196: https://github.com/bitcoin/bitcoin/pull/26196#issuecomment-1268533492. Opening this as a draft for the minute, to point to from another PR.\r\n\r\nUltimately the goal here (aside from common quite possibly being a better home for this code) is to move the Boost Signals2 using code out of libbitcoin_util, which is/will be used by the kernel.\r\n\r\nWhen this is done, we can drop `$(BOOST_CPPFLAGS)` from libbitcoin_util (last commit).",
          "user": {
            "login": "fanquake",
            "id": 863730,
            "node_id": "MDQ6VXNlcjg2MzczMA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fanquake",
            "html_url": "https://github.com/fanquake",
            "followers_url": "https://api.github.com/users/fanquake/followers",
            "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
            "organizations_url": "https://api.github.com/users/fanquake/orgs",
            "repos_url": "https://api.github.com/users/fanquake/repos",
            "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fanquake/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26293",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26293",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26293.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26293.patch"
          },
          "closed_at": "2022-10-13T05:18:05Z",
          "created_at": "2022-10-11T07:51:42Z",
          "updated_at": "2022-10-13T18:54:42Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1276595646,
      "node_id": "IC_kwDOABII585MF02-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276595646",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-12T18:49:44Z",
      "updated_at": "2022-10-12T18:49:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "update: unless I've missed something, unless you have just a few transactions to monitor, using watch-only wallet would not work as is and even if it was modified it would still create serious operational issues:\r\n\r\nIf we were to use a single watch-only wallet and import all the outpoints that we need to watch, with one descriptor per outpoint , we would still to to fetch all wallet transactions to get spending transactions even if we used labels when importing our descriptors because label filtering only works for incoming transactions, so this does not scale (and again there does not seem to be a way to remove descriptors once they've been imported). \r\n\r\nSince with LN we currently know which transactions would spend the outpoints that we are watching, we could also import them. It would solves our filtering problem but we would end up with a huge number of transaction in our wallet (millions of them). \r\n\r\nAnother option would be using one watch-only wallet per channel. This would be much better from an indexing point of view but would scale even less because there would be one wallet database per channel.\r\n\r\nAnd even if we modified how watch-only wallets work to add an optional \"spent-by\" field to listtransactions (this would be fairly easy), using them would be a problem from an operational point of view: rebuilding a node can be done very quickly, as we don't even need to restore the bitcoin wallet that we used before (we just need to have a backup): we can just point our system to a new bitcoin node with a fresh wallet and we're good to go. With watch-only wallets we would first need to rebuild this wallet, which could take hours, before we're operational again.\r\n\r\n=> I still believe that indexing \"spending\" transactions is a better approach than watch-only wallets.",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276595646",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1276604721,
      "node_id": "IC_kwDOABII585MF3Ex",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1276604721",
      "actor": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-12T18:58:16Z",
      "updated_at": "2022-10-12T18:58:16Z",
      "author_association": "MEMBER",
      "body": "Thanks for the clarification @sstone. \r\n> I still believe that indexing \"spending\" transactions is a better approach than watch-only wallets.\r\n\r\nAgreed, this is Concept ACK for me then.\r\n\r\n> rebuilding a node can be done very quickly, as we don't even need to restore the bitcoin wallet that we used before (we just need to have a backup): we can just point our system to a new bitcoin node with a fresh wallet and we're good to go. With watch-only wallets we would first need to rebuild this wallet, which could take hours, before we're operational again.\r\n\r\nThe \"new bitcoin node\" would still need to have the `txospenderindex` constructed though right? Which also takes some time no?",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1276604721",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "mentioned",
      "id": 7574514401,
      "node_id": "MEE_lADOABII585Fi6uozwAAAAHDeerh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7574514401",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-12T18:58:17Z"
    },
    {
      "event": "subscribed",
      "id": 7574514408,
      "node_id": "SE_lADOABII585Fi6uozwAAAAHDeero",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7574514408",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-12T18:58:17Z"
    },
    {
      "event": "commented",
      "id": 1277200926,
      "node_id": "IC_kwDOABII585MIIoe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1277200926",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-10-13T08:05:05Z",
      "updated_at": "2022-10-13T08:05:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The \"new bitcoin node\" would still need to have the `txospenderindex` constructed though right? Which also takes some time no?\r\n\r\nYes, you would need to run your bitcoin nodes with -txospenderindex and -txindex (but theses indexes are \"generic\" and completely independent from your application). \r\n\r\n",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1277200926",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "reviewed",
      "id": 1140554364,
      "node_id": "PRR_kwDOABII585D-3p8",
      "url": null,
      "actor": null,
      "commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "LGTM.\r\nI tried this:\r\n```bash\r\n./src/bitcoin-cli -testnet gettxspendingprevout '[{\"txid\": \"f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2\", \"vout\": 1}]'\r\n[\r\n  {\r\n    \"txid\": \"f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2\",\r\n    \"vout\": 1,\r\n    \"spendingtxid\": \"cb891f936bb45b347495542ebc7f413db612424c5516e14faef0239fbedecee1\"\r\n  }\r\n]\r\n```\r\nThe information returned is correct (https://blockstream.info/testnet/tx/f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2?output:1).\r\n\r\nHere's the result on `master`:\r\n```bash\r\n./src/bitcoin-cli -testnet gettxspendingprevout '[{\"txid\": \"f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2\", \"vout\": 1}]'\r\n[\r\n  {\r\n    \"txid\": \"f52c6102a5e9b9d11ff5edf0d888009cdcad85b44a7e83f057cf934745d9dce2\",\r\n    \"vout\": 1\r\n  }\r\n]\r\n```\r\n\r\nI verified that if the spending transaction is already in the mempool, `gettxspendingprevout` behaves the same on master and this PR.\r\n\r\nFor info, the index is `6.7GB` on testnet, and 110GB on mainnet. \r\n\r\nI would also suggest splitting the PR in 3 commits (index, rpc and test) for easier review.\r\n",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1140554364",
      "submitted_at": "2022-10-13T11:44:09Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "reviewed",
      "id": 1140675810,
      "node_id": "PRR_kwDOABII585D_VTi",
      "url": null,
      "actor": null,
      "commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "didn't review, but left some nits (no need to address them, unless you push for other reasons)",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1140675810",
      "submitted_at": "2022-10-13T12:20:39Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-02T00:12:08Z",
      "updated_at": "2022-11-02T00:12:08Z",
      "source": {
        "issue": {
          "id": 1427424394,
          "node_id": "PR_kwDOABII585Bwjtt",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26415",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26415/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26415/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26415/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26415",
          "number": 26415,
          "state": "open",
          "state_reason": null,
          "title": "rpc,rest,zmq: faster getblock, NotifyBlock and rest_block by reading raw block",
          "body": "For the `getblock` endpoint with `verbosity=0`, the  `rest_block` REST endpoint for `bin` and `hex`, and zmq `NotifyBlock` we don't have to deserialize the block since we're just sending the raw data. This PR uses `ReadRawBlockFromDisk` instead of `ReadBlockFromDisk` to serve these requests (when `-rpcserialversion` is not set). See benchmarks in https://github.com/bitcoin/bitcoin/pull/26684.\r\n\r\nBenchmarked using ApacheBench. Requesting block 750,000 in binary 10k times on a single core (set `-rest=1` in config):\r\n`ab -n 10000 -c 1 \"http://127.0.0.1:8332/rest/block/0000000000000000000592a974b1b9f087cb77628bb4a097d5c2c11b3476a58e.bin\"`\r\n\r\nOn master, mean time 15ms.\r\nOn this branch, mean time 1ms.\r\n\r\nFor RPC\r\n```\r\necho '{\"jsonrpc\": \"1.0\", \"id\": \"curltest\", \"method\": \"getblock\", \"params\": [\"0000000000000000000592a974b1b9f087cb77628bb4a097d5c2c11b3476a58e\", 0]}' > /tmp/data.json\r\nab -p /tmp/data.json -n 1000 -c 1 -A user:password \"http://127.0.0.1:8332/\"\r\n```\r\nOn master, mean time 32ms\r\nOn this branch, mean time 13ms",
          "user": {
            "login": "andrewtoth",
            "id": 237213,
            "node_id": "MDQ6VXNlcjIzNzIxMw==",
            "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/andrewtoth",
            "html_url": "https://github.com/andrewtoth",
            "followers_url": "https://api.github.com/users/andrewtoth/followers",
            "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
            "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
            "repos_url": "https://api.github.com/users/andrewtoth/repos",
            "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26415",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26415",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26415.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26415.patch"
          },
          "created_at": "2022-10-28T15:27:04Z",
          "updated_at": "2023-08-07T15:09:40Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1320276112,
      "node_id": "IC_kwDOABII585OsdCQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1320276112",
      "actor": {
        "login": "Pantamis",
        "id": 13965245,
        "node_id": "MDQ6VXNlcjEzOTY1MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/13965245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Pantamis",
        "html_url": "https://github.com/Pantamis",
        "followers_url": "https://api.github.com/users/Pantamis/followers",
        "following_url": "https://api.github.com/users/Pantamis/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Pantamis/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Pantamis/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Pantamis/subscriptions",
        "organizations_url": "https://api.github.com/users/Pantamis/orgs",
        "repos_url": "https://api.github.com/users/Pantamis/repos",
        "events_url": "https://api.github.com/users/Pantamis/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Pantamis/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-18T16:50:46Z",
      "updated_at": "2022-11-18T16:50:46Z",
      "author_association": "NONE",
      "body": "I did not review the code but tested the PR at commit 972728ab72b63ad074ffc1f2d8275d0c05672fa8 and it works.\r\n\r\nIt would be great to reduce the size of the index because it is well larger than `txindex`:\r\n\r\n```\r\nbitcoin/indexes $ du -h --max-depth=1\r\n119G\t./txospenderindex\r\n38G\t./txindex\r\n157G\t.\r\n```\r\nInstead of storing outpoint (32 + 4 bytes) -> txid (32 bytes) it could be outpointhash (32  bytes) -> txid (32 bytes) to gain 4 bytes per txos (or even using RIPEMD160 to gain 4 + 12 bytes per txo).\r\n\r\nThe txospenderindex stores redondantly the funding_txid as key for each transaction's outputs. It could be made almost half its current size if it was possible to store with the following schema: \r\n\r\nfunding_txid (32 bytes) -> concat_txids (32 * number_of_outpoints_in_funding_txid bytes)\r\n\r\nwhere concat_txid would be all the spending txid concatenated in the order of the vout of the funding transaction or 32 bytes at 0 if the outpoint is unspent. To get the spending transaction of an outpoint txid:vout, you would just have to read the bytes 32 * vout to 32 * (vout+1)  of the concat_txids given by the index. However this requires modifying the value at a given key during the sync of the index, I don't know if it is an issue.\r\n\r\nIt could be nice to provide more informations on the spending transaction too, like blockheight of spending transaction and the index of the input spending the outpoint in the spending transaction althought not necessary since these information can be found by using `txindex`.",
      "user": {
        "login": "Pantamis",
        "id": 13965245,
        "node_id": "MDQ6VXNlcjEzOTY1MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/13965245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Pantamis",
        "html_url": "https://github.com/Pantamis",
        "followers_url": "https://api.github.com/users/Pantamis/followers",
        "following_url": "https://api.github.com/users/Pantamis/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Pantamis/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Pantamis/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Pantamis/subscriptions",
        "organizations_url": "https://api.github.com/users/Pantamis/orgs",
        "repos_url": "https://api.github.com/users/Pantamis/repos",
        "events_url": "https://api.github.com/users/Pantamis/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Pantamis/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1320276112",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "commented",
      "id": 1322129396,
      "node_id": "IC_kwDOABII585Ozhf0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1322129396",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-21T14:16:01Z",
      "updated_at": "2022-11-21T14:16:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "> It would be great to reduce the size of the index because it is well larger than `txindex`:\r\n> ...\r\n> Instead of storing outpoint (32 + 4 bytes) -> txid (32 bytes) it could be outpointhash (32 bytes) -> txid (32 bytes) to gain 4 bytes per txos (or even using RIPEMD160 to gain 4 + 12 bytes per txo).\r\n\r\nI went for a simple scheme that is easy to use and did not try to optimize for space as it would still be O(n) so there's not much to be gained unless I'm missing something.\r\nIt could be made smaller by using `blockheight | txindex |outputindex` (8 bytes) instead of txids ((this is how we define \"short channel ids\" in LN), but it would be harder to use. \r\n  \r\n> The txospenderindex stores redondantly the funding_txid as key for each transaction's outputs. It could be made almost half its current size if it was possible to store with the following schema:\r\n> \r\n> funding_txid (32 bytes) -> concat_txids (32 * number_of_outpoints_in_funding_txid bytes)\r\n> \r\n> where concat_txid would be all the spending txid concatenated in the order of the vout of the funding transaction or 32 bytes at 0 if the outpoint is unspent. To get the spending transaction of an outpoint txid:vout, you would just have to read the bytes 32 * vout to 32 * (vout+1) of the concat_txids given by the index. However this requires modifying the value at a given key during the sync of the index, I don't know if it is an issue.\r\n> \r\n\r\nSame reason as above, I'll have a look but I'm not sure the gain is worth the added complexity.\r\n\r\n> It could be nice to provide more informations on the spending transaction too, like blockheight of spending transaction and the index of the input spending the outpoint in the spending transaction althought not necessary since these information can be found by using `txindex`.\r\n\r\nYes, I supposed that users would call `gettransaction` to get additional info on the spending tx \r\n\r\n",
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#issuecomment-1322129396",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24539"
    },
    {
      "event": "reviewed",
      "id": 1188968612,
      "node_id": "PRR_kwDOABII585G3jik",
      "url": null,
      "actor": null,
      "commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1188968612",
      "submitted_at": "2022-11-21T22:01:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7869473337,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHVDqI5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7869473337",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-22T16:08:47Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7879596144,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHVqRhw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7879596144",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-11-23T18:01:53Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-01T05:34:32Z",
      "updated_at": "2022-12-01T05:34:32Z",
      "source": {
        "issue": {
          "id": 1469418096,
          "node_id": "PR_kwDOABII585D9YVQ",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26609",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26609/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26609/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26609/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26609",
          "number": 26609,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Move `txmempool_entry.h` --> `kernel/mempool_entry.h`",
          "body": "This PR addresses the https://github.com/bitcoin/bitcoin/pull/17786#discussion_r1027818360:\r\n> why not move it to the right place, that is to `kernel/txmempool_entry.h`?",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26609",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26609",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26609.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26609.patch"
          },
          "closed_at": "2022-12-06T18:06:07Z",
          "created_at": "2022-11-30T10:41:51Z",
          "updated_at": "2022-12-06T18:20:17Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7941177033,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHZVL7J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7941177033",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-02T14:27:06Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7941320883,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHZVvCz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7941320883",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-02T14:45:17Z"
    },
    {
      "event": "reviewed",
      "id": 1204651133,
      "node_id": "PRR_kwDOABII585HzYR9",
      "url": null,
      "actor": null,
      "commit_id": "47e60750e7de54365dba3651b412716af552f85f",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1204651133",
      "submitted_at": "2022-12-05T14:27:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "labeled",
      "id": 7970455511,
      "node_id": "LE_lADOABII585Fi6uozwAAAAHbE3_X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7970455511",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-06T20:07:46Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 7978142479,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHbiMsP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7978142479",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-07T14:01:39Z"
    },
    {
      "event": "unlabeled",
      "id": 7978810264,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAHbkvuY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7978810264",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-07T15:06:39Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-23T17:38:23Z",
      "updated_at": "2023-01-23T17:38:23Z",
      "source": {
        "issue": {
          "id": 1553025619,
          "node_id": "PR_kwDOABII585IUr3w",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26951",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26951/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26951/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26951/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26951",
          "number": 26951,
          "state": "open",
          "state_reason": null,
          "title": "wallet: improve rescan performance 640%",
          "body": "The BIP158 compact block filters make a compromise between performance and security by re-keying the filter for each block.  That means every block requires re-hashing and re-sorting for every script pub key before matching against the filter.\r\n\r\nTo improve on the performance we can simply generate filters using per index random keys (rather than per filter keys).  We don't share these filters with any attacker so there is no security risk.\r\n\r\nI don't use synthetic benchmarks for this as we have only a single data set we're ever processing.\r\n\r\nOn an arbitrary server:\r\nNo filters: 132 minutes\r\nBlock filters: 45 minutes\r\nWallet filters: 7 minutes\r\n\r\n",
          "user": {
            "login": "pstratem",
            "id": 620611,
            "node_id": "MDQ6VXNlcjYyMDYxMQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pstratem",
            "html_url": "https://github.com/pstratem",
            "followers_url": "https://api.github.com/users/pstratem/followers",
            "following_url": "https://api.github.com/users/pstratem/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/pstratem/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/pstratem/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
            "organizations_url": "https://api.github.com/users/pstratem/orgs",
            "repos_url": "https://api.github.com/users/pstratem/repos",
            "events_url": "https://api.github.com/users/pstratem/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/pstratem/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26951",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26951",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26951.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26951.patch"
          },
          "created_at": "2023-01-23T12:38:35Z",
          "updated_at": "2023-07-30T00:06:07Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8374655068,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAHzKxhc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8374655068",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-27T15:50:10Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-15T14:04:58Z",
      "updated_at": "2023-03-15T14:04:58Z",
      "source": {
        "issue": {
          "id": 1623253674,
          "node_id": "PR_kwDOABII585L_JCH",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27254",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27254/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27254/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27254/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27254",
          "number": 27254,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Extract util/fs from util/system",
          "body": "This pull request is part of the `libbitcoinkernel` project https://github.com/bitcoin/bitcoin/issues/24303 https://github.com/bitcoin/bitcoin/projects/18 and more specifically its \"Step 2: Decouple most non-consensus code from libbitcoinkernel\". This commit was originally authored by empact and is taken from its parent PR #25152.\r\n\r\n#### Context\r\n\r\nThere is an ongoing effort to decouple the `ArgsManager` used for command line parsing user-provided arguments from the libbitcoinkernel library (https://github.com/bitcoin/bitcoin/pull/25290, https://github.com/bitcoin/bitcoin/pull/25487, https://github.com/bitcoin/bitcoin/pull/25527, https://github.com/bitcoin/bitcoin/pull/25862, https://github.com/bitcoin/bitcoin/pull/26177, and https://github.com/bitcoin/bitcoin/pull/27125). The `ArgsManager` is defined in `system.h`. A similar pull request extracting functionality from `system.h` has been merged in https://github.com/bitcoin/bitcoin/pull/27238.\r\n\r\n#### Changes\r\n\r\nNext to providing better code organization, this PR removes some reliance of the tree of libbitcoinkernel header includes on `system.h` (and thus the `ArgsManager` definition) by moving filesystem related functions out of the `system.*` files. \r\n\r\nThere is already a pair of `fs.h` / `fs.cpp` in the top-level `src/` directory. They were not combined with the files introduced here, to keep the patch cleaner and more importantly because they are often included without the utility functions. The new files are therefore named `fs_helpers` and the existing `fs` files are moved into the util directory.\r\n\r\nFurther commits splitting more functionality out of `system.h` are still in #25152 and will be submitted in separate PRs once this PR has been processed.",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 11,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27254",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27254",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27254.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27254.patch"
          },
          "closed_at": "2023-04-03T13:41:34Z",
          "created_at": "2023-03-14T11:11:00Z",
          "updated_at": "2023-04-03T13:41:35Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Pantamis",
        "id": 13965245,
        "node_id": "MDQ6VXNlcjEzOTY1MjQ1",
        "avatar_url": "https://avatars.githubusercontent.com/u/13965245?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Pantamis",
        "html_url": "https://github.com/Pantamis",
        "followers_url": "https://api.github.com/users/Pantamis/followers",
        "following_url": "https://api.github.com/users/Pantamis/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Pantamis/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Pantamis/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Pantamis/subscriptions",
        "organizations_url": "https://api.github.com/users/Pantamis/orgs",
        "repos_url": "https://api.github.com/users/Pantamis/repos",
        "events_url": "https://api.github.com/users/Pantamis/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Pantamis/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T13:16:20Z",
      "updated_at": "2023-04-03T13:16:20Z",
      "source": {
        "issue": {
          "id": 1652055650,
          "node_id": "PR_kwDOC85ISc5NfUpM",
          "url": "https://api.github.com/repos/mempool/mempool/issues/3632",
          "repository_url": "https://api.github.com/repos/mempool/mempool",
          "labels_url": "https://api.github.com/repos/mempool/mempool/issues/3632/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/mempool/mempool/issues/3632/comments",
          "events_url": "https://api.github.com/repos/mempool/mempool/issues/3632/events",
          "html_url": "https://github.com/mempool/mempool/pull/3632",
          "number": 3632,
          "state": "open",
          "state_reason": null,
          "title": "WIP: Support spending transactions with Core txospenderindex",
          "body": "Support spending transactions display with Core txospenderindex bitcoin/bitcoin#24539\r\n\r\nThis PR also allows the forensic service to get closure method of all channels\r\n\r\nSince bitcoin/bitcoin#24539 is not merged, I keep this PR as a draft until it is eventually merged.\r\n",
          "user": {
            "login": "Pantamis",
            "id": 13965245,
            "node_id": "MDQ6VXNlcjEzOTY1MjQ1",
            "avatar_url": "https://avatars.githubusercontent.com/u/13965245?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Pantamis",
            "html_url": "https://github.com/Pantamis",
            "followers_url": "https://api.github.com/users/Pantamis/followers",
            "following_url": "https://api.github.com/users/Pantamis/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Pantamis/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Pantamis/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Pantamis/subscriptions",
            "organizations_url": "https://api.github.com/users/Pantamis/orgs",
            "repos_url": "https://api.github.com/users/Pantamis/repos",
            "events_url": "https://api.github.com/users/Pantamis/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Pantamis/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "NONE",
          "milestone": {
            "url": "https://api.github.com/repos/mempool/mempool/milestones/17",
            "html_url": "https://github.com/mempool/mempool/milestone/17",
            "labels_url": "https://api.github.com/repos/mempool/mempool/milestones/17/labels",
            "id": 9661380,
            "node_id": "MI_kwDOC85ISc4Ak2vE",
            "number": 17,
            "state": "open",
            "title": "v3.1",
            "description": "",
            "creator": {
              "login": "softsimon",
              "id": 8561090,
              "node_id": "MDQ6VXNlcjg1NjEwOTA=",
              "avatar_url": "https://avatars.githubusercontent.com/u/8561090?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/softsimon",
              "html_url": "https://github.com/softsimon",
              "followers_url": "https://api.github.com/users/softsimon/followers",
              "following_url": "https://api.github.com/users/softsimon/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/softsimon/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/softsimon/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/softsimon/subscriptions",
              "organizations_url": "https://api.github.com/users/softsimon/orgs",
              "repos_url": "https://api.github.com/users/softsimon/repos",
              "events_url": "https://api.github.com/users/softsimon/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/softsimon/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 224,
            "closed_issues": 24,
            "created_at": "2023-07-17T05:42:40Z",
            "updated_at": "2023-08-06T19:24:05Z"
          },
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/mempool/mempool/pulls/3632",
            "html_url": "https://github.com/mempool/mempool/pull/3632",
            "diff_url": "https://github.com/mempool/mempool/pull/3632.diff",
            "patch_url": "https://github.com/mempool/mempool/pull/3632.patch"
          },
          "created_at": "2023-04-03T13:16:20Z",
          "updated_at": "2023-07-17T05:43:51Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 8913456669,
      "node_id": "LE_lADOABII585Fi6uozwAAAAITSI4d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8913456669",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T14:07:24Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8914750217,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAITXEsJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8914750217",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T16:01:22Z"
    },
    {
      "event": "unlabeled",
      "id": 8914914692,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAITXs2E",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8914914692",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-03T16:16:19Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9082659489,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAIdXmKh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9082659489",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-24T15:04:54Z"
    },
    {
      "event": "labeled",
      "id": 9237859929,
      "node_id": "LE_lADOABII585Fi6uozwAAAAImno5Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9237859929",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-13T05:54:06Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unsubscribed",
      "id": 9281775210,
      "node_id": "UE_lADOABII585Fi6uozwAAAAIpPKZq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9281775210",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-18T16:41:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9286450296,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAIpg_x4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9286450296",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-19T07:11:42Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9287920726,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAIpmmxW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9287920726",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-19T10:14:45Z"
    },
    {
      "event": "unlabeled",
      "id": 9295604388,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAIqD6qk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9295604388",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-21T08:41:25Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 9384952005,
      "node_id": "LE_lADOABII585Fi6uozwAAAAIvYwDF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9384952005",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-31T03:29:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9435682643,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAIyaRdT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9435682643",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T16:13:59Z"
    },
    {
      "event": "unlabeled",
      "id": 9436392478,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAIyc-we",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9436392478",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-05T17:30:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-11T13:33:35Z",
      "updated_at": "2023-06-11T13:33:35Z",
      "source": {
        "issue": {
          "id": 1751329317,
          "node_id": "PR_kwDOABII585SstkX",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27854",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27854/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27854/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27854/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27854",
          "number": 27854,
          "state": "open",
          "state_reason": null,
          "title": "[WIP] add a stratum v2 template provider",
          "body": "## Description\r\n                                                                                                                                                                                                                                               \r\nThis is a WIP/draft pull request seeking concept/approach ACK. The goal is to initiate discussion and gather feedback on the proposed changes to see if there is sufficient support for an ACK before finalizing an implementation.\r\n\r\nThis PR initially proposes the addition of a new thread and server to enable Bitcoin Core to run as a Sv2 TP (Stratum V2 Template Provider). This approach is the most direct and naive approach in regards to integrating into the Bitcoin architecture. It builds on https://github.com/bitcoin/bitcoin/pull/23049 but no longer uses the Rust library and implements the server and message de/serialization in C++.\r\n\r\nThis PR branch has been used for testing with the [SRI (Stratum V2 Reference Implementation)](https://github.com/stratum-mining/stratum), but it has been limited to regtest and some tests on testnet. This branch is considered far from complete.\r\n\r\n## Context\r\n\r\nStratum V2 is a proposed evolution of the stratum mining protocol, it has several benefits over its predecessor:\r\n\r\n- By default, it uses secure communication, which can protect against man-in-the-middle-attacks, e.g. [hashrate hijacking](https://braiins.com/blog/hashrate-robbery-stratum-v2-fixes-this-and-more)                                                           \r\n\r\n- It uses a binary protocol instead of JSON, optimizing data transfer between all parties\r\n\r\n- It allows miners/downstream connections to propose their own transaction sets to mining pools                                                                                                                                    \r\n\r\n- It can reduce occurrence of empty mined blocks\r\n\r\nLinks below for further reference:\r\n\r\n- Stratum V2 specification: https://github.com/stratum-mining/sv2-spec\r\n- SRI (Stratum V2 Reference Implementation): https://github.com/stratum-mining/stratum\r\n- Stratum V2 overview: https://stratumprotocol.org/\r\n\r\n## Motivation\r\n                                                                                                                                                                                                                  \r\nThe motivation for this PR and potential future work is to allow Bitcoin Core to run as a Sv2 TP. This will enable downstream Sv2 connections to be able to connect and receive/submit valid work over the Sv2 protocol.\r\n\r\nBelow is an outline of a few pros/cons regarding the Sv2 TP  in Bitcoin Core.\r\n\r\nPros:\r\n\r\n- Running Bitcoin Core with a config flag to enable the Sv2 TP could be arguably easier for adoption. A user would only need to be able to compile and run Bitcoin Core and its dependencies to be able to extract valid work and broadcast legitimate work over the Sv2 protocol\r\n\r\n- The Sv2 TP being as close as possible to the mempool and p2p network benefits downstream connections so that they can start new work quickly. The time between a node learning of a  new best block and then sending new work downstream should be as minimal as possible\r\n\r\n- Implementing the Sv2 TP in C++ means it should be (hopefully) easier for a wider range of contributors/reviewers to be able to maintain and build. The Sv2 TP only uses a small subset of messages from the entire Sv2 Rust library. Therefore, we realized that re-implementing a subset of the messages in C++ and implementing a server carries less external dependency risk and less architectural complexity\r\n\r\n- No additional external dependencies are required\r\n\r\nCons:\r\n\r\n- The Sv2 TP in core will need to be kept up to date with changes in the SRI, coordination would be required to prevent any potential versioning issues\r\n\r\n- Adds  another thread/sub-module that will need to access the mempool to build candidate blocks, so there would be another area of the code attempting to acquire `cs_main` via `BlockAssembler`\r\n\r\n- Another architectural approach other than a new thread and server for the Sv2 TP might be preferred such as the current work in the [multiprocess project](https://github.com/bitcoin-core/bitcoin-devwiki/wiki/Process-Separation)\r\n\r\n\r\n## Build\r\n\r\nTo run the Sv2 TP on this branch, Bitcoin needs to be configured with `./configure --enable-template-provider`.\r\n\r\n## Future work\r\n\r\nIf there is sufficient approach/concept ACK or support in general. Then the below points are outstanding future work and existing nits.\r\n\r\nFuture work:\r\n\r\n- A noise implementation from the noise protocol framework needs to be introduced for secure communication between the Sv2 TP and downstream connections. The [noise spec for Sv2 has been reworked](https://github.com/stratum-mining/sv2-spec/blob/main/04-Protocol-Security.md#43-choice-of-cryptographic-primitives) to accommodate resources currently available in core e.g. `secp256k1` and `BIP 340 schnorrsig`\r\n\r\n- There are current working changes proposed to the Sv2 TP spec, to allow downstream connections to send shorttxid  sets, allowing miners/downstream connections to present their own tx sets \r\n\r\n- Perhaps the Sv2 TP should be adapted to current work in the Bitcoin Core architecture. The new thread has been helpful for testing against the current SRI stack, it seems like the server implementation can adapt easily to different architectural needs\r\n\r\nExisting/known nits:\r\n\r\n- The server implementation has no limit on the number of downstream connections, it needs to be added\r\n\r\n- There could be potential conflict with functional tests. The Sv2 TP responds to the best new block change by reaching into the mempool and building a new block for downstream. My guess is that it would be acceptable to disable the Sv2 TP when running functional tests that asserts mempool state and then enable the Sv2 TP when it needs to specifically run its functional tests\r\n\r\n- Getting the full merkle path is required in the [NewTemplate](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md#72-newtemplate-server---client) message. I noticed that this was previously possible with the old implementation that was moved to [merkle_test.cpp](https://github.com/bitcoin/bitcoin/blob/2026301405f83c925ca68db6a3cd5134ed619ca7/src/test/merkle_tests.cpp#L114) , the current implementation does an in-place calculation to just return the root.  I was wondering if anyone has any suggestions or insight to a preferred solution? e.g. Move back  the old functions from merkle_tests or write a new implementation?\r\n \r\nThank you to all who helped contribute to the process of building this branch including working on the SRI, using this branch for testing and refining the Sv2 specs.\r\n\r\nAny feedback or reviews from nits to overall approach would be very much appreciated.\r\n",
          "user": {
            "login": "ccdle12",
            "id": 18324680,
            "node_id": "MDQ6VXNlcjE4MzI0Njgw",
            "avatar_url": "https://avatars.githubusercontent.com/u/18324680?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ccdle12",
            "html_url": "https://github.com/ccdle12",
            "followers_url": "https://api.github.com/users/ccdle12/followers",
            "following_url": "https://api.github.com/users/ccdle12/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ccdle12/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ccdle12/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ccdle12/subscriptions",
            "organizations_url": "https://api.github.com/users/ccdle12/orgs",
            "repos_url": "https://api.github.com/users/ccdle12/repos",
            "events_url": "https://api.github.com/users/ccdle12/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ccdle12/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 118378960,
              "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
              "name": "Mining",
              "color": "c7def8",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 20,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27854",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27854",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27854.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27854.patch"
          },
          "created_at": "2023-06-11T08:54:19Z",
          "updated_at": "2023-07-27T22:52:22Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "labeled",
      "id": 9828121384,
      "node_id": "LE_lADOABII585Fi6uozwAAAAJJzTso",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9828121384",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-15T10:36:55Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10027016280,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAJVqCBY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10027016280",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-07T17:31:15Z"
    },
    {
      "event": "reviewed",
      "id": 1566674806,
      "node_id": "PRR_kwDOABII585dYY92",
      "url": null,
      "actor": null,
      "commit_id": "8368a74f533db25ea6a02ad95221545c1f93f7be",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#pullrequestreview-1566674806",
      "submitted_at": "2023-08-08T07:36:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZmOGI3ZDQ4NWUwYjIxNmE1ZGRmNWUwOTJhYjVlMjYyNGY4NDVmYTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ff8b7d485e0b216a5ddf5e092ab5e2624f845fa4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ff8b7d485e0b216a5ddf5e092ab5e2624f845fa4",
      "tree": {
        "sha": "dcf6d4c72084af149cacff8b9208cb51822b1de3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dcf6d4c72084af149cacff8b9208cb51822b1de3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b565485c24c0feacae559a7f6f7b83d7516ca58d",
          "sha": "b565485c24c0feacae559a7f6f7b83d7516ca58d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b565485c24c0feacae559a7f6f7b83d7516ca58d"
        }
      ],
      "message": "Add a \"tx output spender\" index\n\nAdds an outpoint -> txid index, which can be used to find which transactions spent a given output.\nThis is extremely useful for Lightning and more generally for layer-2 protocol that rely on chains of unpublished transactions.\nIf enabled, this index will be used by `gettxspendingprevout` when it does not find a spending transaction in the mempool.",
      "committer": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2023-08-08T12:31:04Z"
      },
      "author": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2022-03-10T09:26:57Z"
      },
      "sha": "ff8b7d485e0b216a5ddf5e092ab5e2624f845fa4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAyZjg5NTBkOThkZjBlYzQ1ZDliMTUzMjYwNGVlOGVlMmEwZjYwMDg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/02f8950d98df0ec45d9b1532604ee8ee2a0f6008",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/02f8950d98df0ec45d9b1532604ee8ee2a0f6008",
      "tree": {
        "sha": "0a53908120452f34274418cf8736e5b9d4f1208a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0a53908120452f34274418cf8736e5b9d4f1208a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ff8b7d485e0b216a5ddf5e092ab5e2624f845fa4",
          "sha": "ff8b7d485e0b216a5ddf5e092ab5e2624f845fa4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ff8b7d485e0b216a5ddf5e092ab5e2624f845fa4"
        }
      ],
      "message": "Warn if a spending tx was found but the index was not synced yet\n\nThis spending tx may be removed or replaced by a reorg that has not been synced yet.",
      "committer": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2023-08-08T12:31:04Z"
      },
      "author": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2022-12-01T18:30:26Z"
      },
      "sha": "02f8950d98df0ec45d9b1532604ee8ee2a0f6008"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ4ZDgyOTQ4NGViOWZjMGE2M2ZkMDQwODNkOTJmNmEzMDA1ZWM0OTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "tree": {
        "sha": "1881c97f3cbfe250008bde2e89eb24e453c3ecad",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1881c97f3cbfe250008bde2e89eb24e453c3ecad"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/02f8950d98df0ec45d9b1532604ee8ee2a0f6008",
          "sha": "02f8950d98df0ec45d9b1532604ee8ee2a0f6008",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/02f8950d98df0ec45d9b1532604ee8ee2a0f6008"
        }
      ],
      "message": "Do not require -txindex for -txospenderindex\n\nThis makes -txospenderindex compatible with pruning too.",
      "committer": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2023-08-08T12:31:04Z"
      },
      "author": {
        "name": "sstone",
        "email": "fabrice.drouin@acinq.fr",
        "date": "2022-12-02T13:32:23Z"
      },
      "sha": "48d829484eb9fc0a63fd04083d92f6a3005ec491"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10035051703,
      "node_id": "HRFPE_lADOABII585Fi6uozwAAAAJWIry3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10035051703",
      "actor": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-08T12:39:38Z"
    },
    {
      "event": "unlabeled",
      "id": 10036392813,
      "node_id": "UNLE_lADOABII585Fi6uozwAAAAJWNzNt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10036392813",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-08T14:32:49Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-09T17:19:54Z",
      "updated_at": "2023-08-09T17:19:54Z",
      "source": {
        "issue": {
          "id": 1842817294,
          "node_id": "PR_kwDOABII585Xg45g",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28241/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28241",
          "number": 28241,
          "state": "open",
          "state_reason": null,
          "title": "Silent payment index (for light wallets and consistency check)",
          "body": "This PR adds an index with the silent payment tweak for every transaction. It builds on top of #28122, but \"borrows\" some stuff from other PRs.\r\n\r\nThis index serves two purposes:\r\n1. Light client support, see [BIP 352](https://github.com/josibake/bips/blob/silent-payments-bip/bip-0352.mediawiki#user-content-Tweak_Data)\r\n2. A more thorough check than the test vectors; e.g. by comparing a checksum of the index for all of mainnet.\r\n\r\nBased on the index that was originally part of #24897.\r\n\r\n_~Not~ barely ready for review._\r\n\r\nTODO:\r\n\r\n- [ ] change #28122 to provide the helper functions we need here\r\n- [ ] provide a way to dump the index, e.g. using a `getsilentpaymentblockdata` RPC like in 782d7eb215ee37049b636aa3dce82f16615312bd (but getting data from the index)\r\n- [ ] make index more efficient (rather than by indexing by tx hash, use block height and position in block?)",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28241",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28241",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28241.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28241.patch"
          },
          "created_at": "2023-08-09T09:13:55Z",
          "updated_at": "2023-08-09T17:19:54Z"
        },
        "type": "issue"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825489966",
      "pull_request_review_id": 908174478,
      "id": 825489966,
      "node_id": "PRRC_kwDOABII584xM_ou",
      "diff_hunk": "@@ -857,6 +866,8 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Should use DEFAULT_TXOSPENDERINDEX",
      "created_at": "2022-03-13T18:58:24Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825489966",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825489966"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 869,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825490023",
      "pull_request_review_id": 908174478,
      "id": 825490023,
      "node_id": "PRRC_kwDOABII584xM_pn",
      "diff_hunk": "@@ -1397,6 +1408,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n         LogPrintf(\"* Using %.1f MiB for transaction index database\\n\", cache_sizes.tx_index * (1.0 / 1024 / 1024));\n     }\n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX)) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "DEFAULT_TXOSPENDERINDEX here as well",
      "created_at": "2022-03-13T18:59:04Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825490023",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825490023"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494247",
      "pull_request_review_id": 908174478,
      "id": 825494247,
      "node_id": "PRRC_kwDOABII584xNArn",
      "diff_hunk": "@@ -268,6 +269,43 @@ static RPCHelpMan getrawtransaction()\n     };\n }\n \n+static RPCHelpMan gettxospender()\n+{\n+    return RPCHelpMan{\"gettxospender\",\n+                \"\\nReturns the id of the transaction that spend the provided outpoint.\\n\",\n+                {\n+                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The outpoint transaction id\"},\n+                    {\"index\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The outpoint output index\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::STR_HEX, \"\", \"The id of the transaction that spend the provided outpoint\"},",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "spends",
      "created_at": "2022-03-13T19:38:19Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494247",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494247"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 281,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494466",
      "pull_request_review_id": 908174478,
      "id": 825494466,
      "node_id": "PRRC_kwDOABII584xNAvC",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txindex database (indexes/txindex/) */",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "update comment",
      "created_at": "2022-03-13T19:39:48Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494466",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494466"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494504",
      "pull_request_review_id": 908174478,
      "id": 825494504,
      "node_id": "PRRC_kwDOABII584xNAvo",
      "diff_hunk": "@@ -0,0 +1,44 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+/**\n+ * TxIndex is used to look up transactions included in the blockchain by hash.",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 11,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "update comment",
      "created_at": "2022-03-13T19:40:00Z",
      "updated_at": "2022-03-13T21:25:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825494504",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825494504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797435",
      "pull_request_review_id": 908575857,
      "id": 825797435,
      "node_id": "PRRC_kwDOABII584xOKs7",
      "diff_hunk": "@@ -857,6 +866,8 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825489966,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:28:47Z",
      "updated_at": "2022-03-14T10:28:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797435",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797435"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 869,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797563",
      "pull_request_review_id": 908576025,
      "id": 825797563,
      "node_id": "PRRC_kwDOABII584xOKu7",
      "diff_hunk": "@@ -1397,6 +1408,9 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n     if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n         LogPrintf(\"* Using %.1f MiB for transaction index database\\n\", cache_sizes.tx_index * (1.0 / 1024 / 1024));\n     }\n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXINDEX)) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825490023,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:28:57Z",
      "updated_at": "2022-03-14T10:28:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797563",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797563"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797688",
      "pull_request_review_id": 908576192,
      "id": 825797688,
      "node_id": "PRRC_kwDOABII584xOKw4",
      "diff_hunk": "@@ -268,6 +269,43 @@ static RPCHelpMan getrawtransaction()\n     };\n }\n \n+static RPCHelpMan gettxospender()\n+{\n+    return RPCHelpMan{\"gettxospender\",\n+                \"\\nReturns the id of the transaction that spend the provided outpoint.\\n\",\n+                {\n+                    {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The outpoint transaction id\"},\n+                    {\"index\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The outpoint output index\"},\n+                },\n+                RPCResult{\n+                    RPCResult::Type::STR_HEX, \"\", \"The id of the transaction that spend the provided outpoint\"},",
      "path": "src/rpc/rawtransaction.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825494247,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:29:06Z",
      "updated_at": "2022-03-14T10:29:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797688",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797688"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 281,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797820",
      "pull_request_review_id": 908576381,
      "id": 825797820,
      "node_id": "PRRC_kwDOABII584xOKy8",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txindex database (indexes/txindex/) */",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825494466,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:29:15Z",
      "updated_at": "2022-03-14T10:29:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797820",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797820"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 12,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797928",
      "pull_request_review_id": 908576548,
      "id": 825797928,
      "node_id": "PRRC_kwDOABII584xOK0o",
      "diff_hunk": "@@ -0,0 +1,44 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+/**\n+ * TxIndex is used to look up transactions included in the blockchain by hash.",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 11,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "aa9f96370eb0294b918a3ee17e6928bace23a131",
      "in_reply_to_id": 825494504,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/1b82b7e503a193802373003db8fe5c220cb99eb9",
      "created_at": "2022-03-14T10:29:23Z",
      "updated_at": "2022-03-14T10:29:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r825797928",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/825797928"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856687862",
      "pull_request_review_id": 950732877,
      "id": 856687862,
      "node_id": "PRRC_kwDOABII584zEAT2",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the gettxospender RPC call.\n+\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    find_vout_for_address,\n+)\n+\n+class GetTxoSpenderTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-txindex\", \"-txospenderindex\"],\n+            [\"-txindex\"],\n+        ]\n+        # whitelist all peers to speed up tx relay / mempool sync\n+        for args in self.extra_args:\n+            args.append(\"-whitelist=noban@127.0.0.1\")\n+\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "path": "test/functional/rpc_txospender.py",
      "position": null,
      "original_position": 31,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "RPC tests shouldn't require wallet, please use `MiniWallet`",
      "created_at": "2022-04-23T00:40:54Z",
      "updated_at": "2022-04-23T00:41:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r856687862",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/856687862"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 30,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857127463",
      "pull_request_review_id": 951206356,
      "id": 857127463,
      "node_id": "PRRC_kwDOABII584zFron",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the gettxospender RPC call.\n+\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    find_vout_for_address,\n+)\n+\n+class GetTxoSpenderTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-txindex\", \"-txospenderindex\"],\n+            [\"-txindex\"],\n+        ]\n+        # whitelist all peers to speed up tx relay / mempool sync\n+        for args in self.extra_args:\n+            args.append(\"-whitelist=noban@127.0.0.1\")\n+\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "path": "test/functional/rpc_txospender.py",
      "position": null,
      "original_position": 31,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "in_reply_to_id": 856687862,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've translated the test to MiniWallet. If you take it, make sure to rebase on current master first, as it is using new MiniWallet functions.\r\n\r\nAlso, I am removing not needed stuff. Let me know if you have any questions. And no need to mention me in the commit as author.\r\n\r\n```diff\r\ndiff --git a/test/functional/rpc_txospender.py b/test/functional/rpc_txospender.py\r\nindex 1d7157e9bf..c063b4e502 100755\r\n--- a/test/functional/rpc_txospender.py\r\n+++ b/test/functional/rpc_txospender.py\r\n@@ -10,57 +10,36 @@ from test_framework.test_framework import BitcoinTestFramework\r\n from test_framework.util import (\r\n     assert_equal,\r\n     assert_raises_rpc_error,\r\n-    find_vout_for_address,\r\n )\r\n+from test_framework.wallet import MiniWallet\r\n+\r\n \r\n class GetTxoSpenderTest(BitcoinTestFramework):\r\n     def set_test_params(self):\r\n-        self.setup_clean_chain = True\r\n         self.num_nodes = 2\r\n         self.extra_args = [\r\n             [\"-txindex\", \"-txospenderindex\"],\r\n             [\"-txindex\"],\r\n         ]\r\n-        # whitelist all peers to speed up tx relay / mempool sync\r\n-        for args in self.extra_args:\r\n-            args.append(\"-whitelist=noban@127.0.0.1\")\r\n-\r\n         self.supports_cli = False\r\n \r\n-    def skip_test_if_missing_module(self):\r\n-        self.skip_if_no_wallet()\r\n-\r\n-    def setup_network(self):\r\n-        super().setup_network()\r\n-        self.connect_nodes(0, 1)\r\n-\r\n     def run_test(self):\r\n-        self.log.info(\"Prepare some coins for multiple *rawtransaction commands\")\r\n-        self.generate(self.nodes[1], 1)\r\n-        self.generate(self.nodes[0], COINBASE_MATURITY + 1)\r\n-        self.sync_all()\r\n-        self.generate(self.nodes[0], 5)\r\n+        self.wallet = MiniWallet(self.nodes[1])\r\n+        self.wallet.rescan_utxos()\r\n \r\n         self.gettxospender_tests()\r\n \r\n     def gettxospender_tests(self):\r\n-        addr = self.nodes[1].getnewaddress()\r\n-        txid = self.nodes[0].sendtoaddress(addr, 10)\r\n-        self.generate(self.nodes[0], 1)\r\n-        vout = find_vout_for_address(self.nodes[1], txid, addr)\r\n-        rawTx = self.nodes[1].createrawtransaction([{'txid': txid, 'vout': vout}], {self.nodes[1].getnewaddress(): 9.999})\r\n-        rawTxSigned = self.nodes[1].signrawtransactionwithwallet(rawTx)\r\n-        txId = self.nodes[1].sendrawtransaction(rawTxSigned['hex'])\r\n-        self.generateblock(self.nodes[0], output=self.nodes[0].getnewaddress(), transactions=[rawTxSigned['hex']])\r\n+        partially_spent_tx = self.wallet.send_self_transfer_multi(from_node=self.nodes[1], num_outputs=2)\r\n+        num_out = 1\r\n+        spending_txid = self.wallet.send_self_transfer(from_node=self.nodes[1], utxo_to_spend=partially_spent_tx[\"new_utxos\"][num_out])[\"txid\"]\r\n+        self.generate(self.wallet, 1)\r\n \r\n-        for n in [0, 1]:\r\n-            self.log.info(f\"Test gettxospender {'with' if n == 0 else 'without'} -txospenderindex\")\r\n+        self.log.info(f\"Test gettxospender with -txospenderindex\")\r\n+        assert_equal(self.nodes[0].gettxospender(partially_spent_tx[\"txid\"], num_out), spending_txid)\r\n+        self.log.info(f\"Test gettxospender without -txospenderindex\")\r\n+        assert_raises_rpc_error(-8, \"This RPC call requires -txospenderindex to be enabled.\", self.nodes[1].gettxospender, partially_spent_tx[\"txid\"], num_out)\r\n \r\n-            if n == 0:\r\n-                assert_equal(self.nodes[n].gettxospender(txid, vout), txId)\r\n-            else:\r\n-                # Without -txospenderindex, expect to raise.\r\n-                assert_raises_rpc_error(-8, \"This RPC call requires -txospenderindex to be enabled.\", self.nodes[n].gettxospender, txid, vout)\r\n \r\n-if __name__ == '__main__':\r\n+if __name__ == \"__main__\":\r\n     GetTxoSpenderTest().main()\r\n",
      "created_at": "2022-04-24T13:34:15Z",
      "updated_at": "2022-04-24T13:34:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r857127463",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857127463"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 30,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857855347",
      "pull_request_review_id": 952206496,
      "id": 857855347,
      "node_id": "PRRC_kwDOABII584zIdVz",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2021 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test the gettxospender RPC call.\n+\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+    find_vout_for_address,\n+)\n+\n+class GetTxoSpenderTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 2\n+        self.extra_args = [\n+            [\"-txindex\", \"-txospenderindex\"],\n+            [\"-txindex\"],\n+        ]\n+        # whitelist all peers to speed up tx relay / mempool sync\n+        for args in self.extra_args:\n+            args.append(\"-whitelist=noban@127.0.0.1\")\n+\n+        self.supports_cli = False\n+\n+    def skip_test_if_missing_module(self):\n+        self.skip_if_no_wallet()",
      "path": "test/functional/rpc_txospender.py",
      "position": null,
      "original_position": 31,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "e021b6bc77315bc0c148b21c301882fa5dd68c05",
      "in_reply_to_id": 856687862,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks! I've rebased on https://github.com/bitcoin/bitcoin/pull/24408 and used your code to extend its RPC test",
      "created_at": "2022-04-25T17:16:43Z",
      "updated_at": "2022-04-25T17:16:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r857855347",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/857855347"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 30,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862144297",
      "pull_request_review_id": 958241302,
      "id": 862144297,
      "node_id": "PRRC_kwDOABII584zY0cp",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>",
      "path": "src/index/txospenderindex.cpp",
      "position": 7,
      "original_position": 1,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Missing copyright/license header",
      "created_at": "2022-04-29T20:54:08Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862144297",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862144297"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862146611",
      "pull_request_review_id": 958241302,
      "id": 862146611,
      "node_id": "PRRC_kwDOABII584zY1Az",
      "diff_hunk": "@@ -1574,6 +1588,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\n+        if (!args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-txospenderindex requires -txindex.\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Maybe(?) should SoftSetArg in param interaction",
      "created_at": "2022-04-29T20:56:36Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862146611",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862146611"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1584,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862149848",
      "pull_request_review_id": 958241302,
      "id": 862149848,
      "node_id": "PRRC_kwDOABII584zY1zY",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Suggest moving this below where it's actually needed/used.\r\n\r\nNote this is non-trivial: we shouldn't re-\"block\" for each outpoint, and lock order might matter.",
      "created_at": "2022-04-29T21:01:26Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862149848",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862149848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 651,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862150115",
      "pull_request_review_id": 958241302,
      "id": 862150115,
      "node_id": "PRRC_kwDOABII584zY13j",
      "diff_hunk": "@@ -0,0 +1,121 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+         self.num_nodes = 3\n+         self.extra_args = [\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\"],\n+         ]",
      "path": "test/functional/rpc_mempool_info.py",
      "position": null,
      "original_position": 23,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Block indented 1 space too many",
      "created_at": "2022-04-29T21:01:51Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862150115",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862150115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 18,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862152877",
      "pull_request_review_id": 958241302,
      "id": 862152877,
      "node_id": "PRRC_kwDOABII584zY2it",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 1,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Wrong year range",
      "created_at": "2022-04-29T21:05:34Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862152877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862152877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862156731",
      "pull_request_review_id": 958241302,
      "id": 862156731,
      "node_id": "PRRC_kwDOABII584zY3e7",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: Space at the end instead of punctuation",
      "created_at": "2022-04-29T21:13:19Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862156731",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862156731"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862157126",
      "pull_request_review_id": 958241302,
      "id": 862157126,
      "node_id": "PRRC_kwDOABII584zY3lG",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Doesn't say *which* output triggers it, and blocks partial results.\r\n\r\nSuggest something like a \"warnings\" key on the output result.",
      "created_at": "2022-04-29T21:14:09Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862157126",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862157126"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862187808",
      "pull_request_review_id": 958241302,
      "id": 862187808,
      "node_id": "PRRC_kwDOABII584zY_Eg",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "RPC_INVALID_ADDRESS_OR_KEY seems like the wrong code to use",
      "created_at": "2022-04-29T21:46:18Z",
      "updated_at": "2022-04-29T22:47:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862187808",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862187808"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862487923",
      "pull_request_review_id": 958601762,
      "id": 862487923,
      "node_id": "PRRC_kwDOABII584zaIVz",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index",
      "path": "src/rpc/mempool.cpp",
      "position": 70,
      "original_position": 88,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps a new field could be added to the response indicating whether the transaction is in the mempool or not?\r\nSomething like:\r\n```c++\r\no.pushKV(\"in_mempool\", true); // or false\r\n```",
      "created_at": "2022-05-01T15:15:10Z",
      "updated_at": "2022-05-01T15:16:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862487923",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862487923"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 693,
      "original_line": 693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862938062",
      "pull_request_review_id": 959202584,
      "id": 862938062,
      "node_id": "PRRC_kwDOABII584zb2PO",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is there any reason to use `std::make_pair(DB_TXOSPENDERINDEX, tuple.first)`  as the key instead of just  `tuple.first` ?\r\n\r\n`DB_TXOSPENDERINDEX` seems redundant.",
      "created_at": "2022-05-02T15:18:20Z",
      "updated_at": "2022-05-02T15:18:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r862938062",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/862938062"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863085647",
      "pull_request_review_id": 959413555,
      "id": 863085647,
      "node_id": "PRRC_kwDOABII584zcaRP",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 23,
      "original_position": 35,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": null,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This message needs to be changed, as the transaction may not be in the mempool, but in the blocks.\r\nThis field is no longer optional in this PR.\r\n\r\n```suggestion\r\n                    {RPCResult::Type::STR_HEX, \"spendingtxid\", \"the id of the transaction that spends the output\"},\r\n```",
      "created_at": "2022-05-02T18:34:59Z",
      "updated_at": "2022-05-02T18:49:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r863085647",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/863085647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 619,
      "original_line": 619,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864062496",
      "pull_request_review_id": 960797515,
      "id": 864062496,
      "node_id": "PRRC_kwDOABII584zgIwg",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>",
      "path": "src/index/txospenderindex.cpp",
      "position": 7,
      "original_position": 1,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862144297,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks! I've applied your patch and updated python tests",
      "created_at": "2022-05-03T18:14:52Z",
      "updated_at": "2022-05-03T18:14:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864062496",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864062496"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864075572",
      "pull_request_review_id": 960826186,
      "id": 864075572,
      "node_id": "PRRC_kwDOABII584zgL80",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862149848,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "That what I tried at first but could not get it to work without triggering a deadlock:\r\n```\r\nPOTENTIAL DEADLOCK DETECTED\r\nPrevious lock order was:\r\n(2) 'cs_main' in node/chainstate.cpp:30 (in thread 'qt-init')\r\n(1) 'cs' in txmempool.cpp:709 (in thread 'qt-init')\r\nCurrent lock order is:\r\n(1) 'mempool.cs' in rpc/mempool.cpp:676 (in thread 'qt-rpcconsole')\r\n(2) 'cs_main' in index/base.cpp:331 (in thread 'qt-rpcconsole')\r\n```",
      "created_at": "2022-05-03T18:32:54Z",
      "updated_at": "2022-05-03T18:32:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864075572",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864075572"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 651,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076176",
      "pull_request_review_id": 960829245,
      "id": 864076176,
      "node_id": "PRRC_kwDOABII584zgMGQ",
      "diff_hunk": "@@ -0,0 +1,121 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2014-2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test RPCs that retrieve information from the mempool.\"\"\"\n+\n+from test_framework.blocktools import COINBASE_MATURITY\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+\n+\n+class RPCMempoolInfoTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+         self.num_nodes = 3\n+         self.extra_args = [\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\", \"-txospenderindex\"],\n+             [\"-txindex\"],\n+         ]",
      "path": "test/functional/rpc_mempool_info.py",
      "position": null,
      "original_position": 23,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862150115,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:33:46Z",
      "updated_at": "2022-05-03T18:33:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076176",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076176"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 18,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076237",
      "pull_request_review_id": 960829715,
      "id": 864076237,
      "node_id": "PRRC_kwDOABII584zgMHN",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 1,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862152877,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:33:53Z",
      "updated_at": "2022-05-03T18:33:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076237",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076237"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076338",
      "pull_request_review_id": 960830357,
      "id": 864076338,
      "node_id": "PRRC_kwDOABII584zgMIy",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862156731,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:34:01Z",
      "updated_at": "2022-05-03T18:34:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076338",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076338"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076573",
      "pull_request_review_id": 960831256,
      "id": 864076573,
      "node_id": "PRRC_kwDOABII584zgMMd",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862157126,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:34:14Z",
      "updated_at": "2022-05-03T18:34:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076573",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076573"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076726",
      "pull_request_review_id": 960831665,
      "id": 864076726,
      "node_id": "PRRC_kwDOABII584zgMO2",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"No spending tx for the provided outpoint. Transactions spenders are still in the process of being indexed \");",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862187808,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:34:22Z",
      "updated_at": "2022-05-03T18:34:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864076726",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864076726"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 672,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864078378",
      "pull_request_review_id": 960835258,
      "id": 864078378,
      "node_id": "PRRC_kwDOABII584zgMoq",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},\n+                }},\n+            }\n+        },\n+        RPCExamples{\n+            HelpExampleCli(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+            + HelpExampleRpc(\"gettxspendingprevout\", \"\\\"[{\\\\\\\"txid\\\\\\\":\\\\\\\"a08e6907dbbd3d809776dbfc5d82e371b764ed838b5655e72f463568df1aadf0\\\\\\\",\\\\\\\"vout\\\\\\\":3}]\\\"\")\n+        },\n+        [&](const RPCHelpMan& self, const JSONRPCRequest& request) -> UniValue\n+        {\n+            RPCTypeCheckArgument(request.params[0], UniValue::VARR);\n+            const UniValue& output_params = request.params[0];\n+            if (output_params.empty()) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, outputs are missing\");\n+            }\n+\n+            std::vector<COutPoint> prevouts;\n+            prevouts.reserve(output_params.size());\n+\n+            for (unsigned int idx = 0; idx < output_params.size(); idx++) {\n+                const UniValue& o = output_params[idx].get_obj();\n+\n+                RPCTypeCheckObj(o,\n+                                {\n+                                    {\"txid\", UniValueType(UniValue::VSTR)},\n+                                    {\"vout\", UniValueType(UniValue::VNUM)},\n+                                });\n+\n+                const uint256 txid(ParseHashO(o, \"txid\"));\n+                const int nOutput = find_value(o, \"vout\").get_int();\n+                if (nOutput < 0) {\n+                    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid parameter, vout cannot be negative\");\n+                }\n+\n+                prevouts.emplace_back(txid, nOutput);\n+            }\n+\n+            bool f_txospenderindex_ready = g_txospenderindex ? g_txospenderindex->BlockUntilSyncedToCurrentChain() : false;\n+\n+            const CTxMemPool& mempool = EnsureAnyMemPool(request.context);\n+            LOCK(mempool.cs);\n+\n+            UniValue result{UniValue::VARR};\n+\n+            for (const COutPoint& prevout : prevouts) {\n+                UniValue o(UniValue::VOBJ);\n+                o.pushKV(\"txid\", prevout.hash.ToString());\n+                o.pushKV(\"vout\", (uint64_t)prevout.n);\n+\n+                const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n+                if (spendingTx != nullptr) {\n+                    o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index",
      "path": "src/rpc/mempool.cpp",
      "position": 70,
      "original_position": 88,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862487923,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm not sure it is needed: caller will receive a list of tx ids and will call `getrawtransaction` which will include number of confirmations etc....",
      "created_at": "2022-05-03T18:35:53Z",
      "updated_at": "2022-05-03T18:35:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864078378",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864078378"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 693,
      "original_line": 693,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864081172",
      "pull_request_review_id": 960838860,
      "id": 864081172,
      "node_id": "PRRC_kwDOABII584zgNUU",
      "diff_hunk": "@@ -0,0 +1,60 @@\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 862938062,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is how all other indexes work even when there is just one possible key. Maybe because it makes it easier to add new record type later with a new key prefix ?",
      "created_at": "2022-05-03T18:37:45Z",
      "updated_at": "2022-05-03T18:37:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864081172",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864081172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864083637",
      "pull_request_review_id": 960840371,
      "id": 864083637,
      "node_id": "PRRC_kwDOABII584zgN61",
      "diff_hunk": "@@ -587,6 +588,99 @@ static RPCHelpMan getmempoolentry()\n     };\n }\n \n+static RPCHelpMan gettxspendingprevout()\n+{\n+    return RPCHelpMan{\"gettxspendingprevout\",\n+        \"Scans the mempool to find transactions spending any of the given outputs\",\n+        {\n+            {\"outputs\", RPCArg::Type::ARR, RPCArg::Optional::NO, \"The transaction outputs that we want to check, and within each, the txid (string) vout (numeric).\",\n+                {\n+                    {\"\", RPCArg::Type::OBJ, RPCArg::Optional::OMITTED, \"\",\n+                        {\n+                            {\"txid\", RPCArg::Type::STR_HEX, RPCArg::Optional::NO, \"The transaction id\"},\n+                            {\"vout\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"The output number\"},\n+                        },\n+                    },\n+                },\n+            },\n+        },\n+        RPCResult{\n+            RPCResult::Type::ARR, \"\", \"\",\n+            {\n+                {RPCResult::Type::OBJ, \"\", \"\",\n+                {\n+                    {RPCResult::Type::STR_HEX, \"txid\", \"the transaction id of the spent output\"},\n+                    {RPCResult::Type::NUM, \"vout\", \"the vout value of the spent output\"},\n+                    {RPCResult::Type::STR_HEX, \"spendingtxid\", /*optional=*/true, \"the transaction id of the mempool transaction spending this output (omitted if unspent)\"},",
      "path": "src/rpc/mempool.cpp",
      "position": 23,
      "original_position": 35,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "7805cfd193fefbab3e8b6ecd82e3a63864f012f8",
      "in_reply_to_id": 863085647,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/commit/84c1e67c7b6a7fa618325e2767b243f97cab0e45",
      "created_at": "2022-05-03T18:39:10Z",
      "updated_at": "2022-05-03T18:39:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r864083637",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/864083637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 619,
      "original_line": 619,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994483806",
      "pull_request_review_id": 1140554364,
      "id": 994483806,
      "node_id": "PRRC_kwDOABII5847Rp5e",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit\r\n```suggestion\r\n    for (const auto& [outPoint, hash] : items) {\r\n        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, outPoint), hash);\r\n```",
      "created_at": "2022-10-13T10:51:21Z",
      "updated_at": "2022-10-13T11:44:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r994483806",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994483806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994567590",
      "pull_request_review_id": 1140673527,
      "id": 994567590,
      "node_id": "PRRC_kwDOABII5847R-Wm",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994483806,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "we use snake_case, so if this suggestion is taken, it should be `outpoint` or `out_point`",
      "created_at": "2022-10-13T12:16:40Z",
      "updated_at": "2022-10-13T12:16:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r994567590",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994567590"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994569142",
      "pull_request_review_id": 1140675810,
      "id": 994569142,
      "node_id": "PRRC_kwDOABII5847R-u2",
      "diff_hunk": "@@ -881,6 +890,8 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit for new code: (only if you retouch)\r\n```suggestion\r\n        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\r\n```",
      "created_at": "2022-10-13T12:18:14Z",
      "updated_at": "2022-10-13T12:20:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r994569142",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994569142"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 893,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994570253",
      "pull_request_review_id": 1140675810,
      "id": 994570253,
      "node_id": "PRRC_kwDOABII5847R_AN",
      "diff_hunk": "@@ -644,6 +672,30 @@ static RPCHelpMan gettxspendingprevout()\n                 const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n                 if (spendingTx != nullptr) {\n                     o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (mempool_only.value_or(false)) {\n+                    // do nothing\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit (only if you retouch):\r\n```suggestion\r\n                    if (g_txospenderindex->FindSpender(prevout, spendingtxid)) {\r\n```",
      "created_at": "2022-10-13T12:19:24Z",
      "updated_at": "2022-10-13T12:20:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r994570253",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/994570253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 680,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000327209",
      "pull_request_review_id": 1148815922,
      "id": 1000327209,
      "node_id": "PRRC_kwDOABII5847n8gp",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994483806,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks! I'll use your suggestions next time I rebase",
      "created_at": "2022-10-20T08:48:19Z",
      "updated_at": "2022-10-20T08:48:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1000327209",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1000327209"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028538250",
      "pull_request_review_id": 1188968612,
      "id": 1028538250,
      "node_id": "PRRC_kwDOABII5849Tj-K",
      "diff_hunk": "@@ -644,6 +672,30 @@ static RPCHelpMan gettxspendingprevout()\n                 const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n                 if (spendingTx != nullptr) {\n                     o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (mempool_only.value_or(false)) {\n+                    // do nothing\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        if (mempool_only.has_value()) {  // NOTE: value is false here\n+                            throw JSONRPCError(RPC_MISC_ERROR, strprintf(\"No spending tx for the outpoint %s:%d found, and txospenderindex is still being synced.\", prevout.hash.GetHex(), prevout.n));\n+                        } else {\n+                            UniValue warnings(UniValue::VARR);\n+                            warnings.push_back(\"txospenderindex is still being synced.\");\n+                            o.pushKV(\"warnings\", warnings);\n+                        }\n+                    }",
      "path": "src/rpc/mempool.cpp",
      "position": 88,
      "original_position": 82,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI think we should be warning if the spending txid was found, but the index was not yet synced? It seems like it would be possible for a spend to have been recorded in the index, but was removed/changed by a reorg that has not been synced by the index yet.",
      "created_at": "2022-11-21T21:38:48Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028538250",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028538250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": 703,
      "original_start_line": 682,
      "start_side": "RIGHT",
      "line": 711,
      "original_line": 711,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028539576",
      "pull_request_review_id": 1188968612,
      "id": 1028539576,
      "node_id": "PRRC_kwDOABII5849TkS4",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+bool TxoSpenderIndex::CustomAppend(const interfaces::BlockInfo& block)\n+{\n+    std::vector<std::pair<COutPoint, uint256>> items;\n+    items.reserve(block.data->vtx.size());\n+\n+    for (const auto& tx : block.data->vtx) {",
      "path": "src/index/txospenderindex.cpp",
      "position": 61,
      "original_position": 49,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nThis should skip coinbase transactions.",
      "created_at": "2022-11-21T21:40:42Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028539576",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028539576"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 61,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028541621",
      "pull_request_review_id": 1188968612,
      "id": 1028541621,
      "node_id": "PRRC_kwDOABII5849Tky1",
      "diff_hunk": "@@ -1520,6 +1534,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\n+        if (!args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-txospenderindex requires -txindex.\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI don't think it's necessary to require that txindex when enabling txospenderindex. There isn't anything in the txospenderindex that inherently requires the txindex (i.e. it isn't storing information specific to the txindex). I get that it isn't as useful without the txindex enabled, but that isn't really a reason to restrict it.\r\n\r\nRemoving this restriction would also allow txospenderindex to be enabled with pruning.",
      "created_at": "2022-11-21T21:43:30Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028541621",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028541621"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1584,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028542275",
      "pull_request_review_id": 1188968612,
      "id": 1028542275,
      "node_id": "PRRC_kwDOABII5849Tk9D",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 25,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI don't see a technical reason for why the txospenderindex should not work with pruning (other than the current requirement of -txindex). It doesn't store any information related to the block files.",
      "created_at": "2022-11-21T21:44:23Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028542275",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028542275"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028544839",
      "pull_request_review_id": 1188968612,
      "id": 1028544839,
      "node_id": "PRRC_kwDOABII5849TllH",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }\n+\n+protected:\n+    bool CustomAppend(const interfaces::BlockInfo& block) override;",
      "path": "src/index/txospenderindex.h",
      "position": 28,
      "original_position": 28,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI think this will need to implement `CustomRewind` as well so that reorgs can be handled. Otherwise, as it is now, a reorg that removes a spend and does not replace it with a conflicting one will leave the original spend in the index. However it would be incorrect to say that that txo has been spent as in the main chain following the reorg, the txo was not spent.\r\n\r\nSo `CustomRewind` is needed in order to remove those records.\r\n\r\nA test for this condition would also be nice.",
      "created_at": "2022-11-21T21:48:01Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028544839",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028544839"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028547783",
      "pull_request_review_id": 1188968612,
      "id": 1028547783,
      "node_id": "PRRC_kwDOABII5849TmTH",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nWrong date range here.",
      "created_at": "2022-11-21T21:52:11Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028547783",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028547783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028548977",
      "pull_request_review_id": 1188968612,
      "id": 1028548977,
      "node_id": "PRRC_kwDOABII5849Tmlx",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <index/txospenderindex.h>\n+#include <script/standard.h>\n+#include <test/util/setup_common.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(txospenderindex_tests)\n+\n+BOOST_FIXTURE_TEST_CASE(txospenderindex_initial_sync, TestChain100Setup)\n+{\n+    TxoSpenderIndex txospenderindex(interfaces::MakeChain(m_node), 1 << 20, true);\n+    // Mine blocks for coinbase maturity, so we can spend some coinbase outputs in the test.\n+     for (int i = 0; i < 50; i++) {\n+         std::vector<CMutableTransaction> no_txns;\n+         CreateAndProcessBlock(no_txns, this->m_coinbase_txns[i]->vout[0].scriptPubKey);\n+     }\n+    std::vector<COutPoint> spent(10);\n+    std::vector<CMutableTransaction> spender(spent.size());\n+\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        spent[i] = COutPoint(this->m_coinbase_txns[i]->GetHash(), 0);\n+        spender[i].nVersion = 1;\n+        spender[i].vin.resize(1);\n+        spender[i].vin[0].prevout.hash = spent[i].hash;\n+        spender[i].vin[0].prevout.n = spent[i].n;\n+        spender[i].vout.resize(1);\n+        spender[i].vout[0].nValue = this->m_coinbase_txns[i]->GetValueOut();\n+        spender[i].vout[0].scriptPubKey = this->m_coinbase_txns[i]->vout[0].scriptPubKey;\n+\n+        // Sign:\n+        std::vector<unsigned char> vchSig;\n+        const uint256 hash = SignatureHash(this->m_coinbase_txns[i]->vout[0].scriptPubKey, spender[i], 0, SIGHASH_ALL, 0, SigVersion::BASE);\n+        coinbaseKey.Sign(hash, vchSig);\n+        vchSig.push_back((unsigned char)SIGHASH_ALL);\n+        spender[i].vin[0].scriptSig << vchSig;\n+    }\n+\n+    CreateAndProcessBlock(spender, this->m_coinbase_txns[0]->vout[0].scriptPubKey);\n+    uint256 txid;\n+\n+    // Transaction should not be found in the index before it is started.\n+    for (const auto& outpoint : spent) {\n+        BOOST_CHECK(!txospenderindex.FindSpender(outpoint, txid));\n+    }\n+\n+    // BlockUntilSyncedToCurrentChain should return false before txindex is started.",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 53,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\ns/txindex/txospenderindex",
      "created_at": "2022-11-21T21:53:45Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028548977",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028548977"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028552792",
      "pull_request_review_id": 1188968612,
      "id": 1028552792,
      "node_id": "PRRC_kwDOABII5849TnhY",
      "diff_hunk": "@@ -60,8 +65,13 @@ def create_tx(**kwargs):\n             assert_equal(txid in mempool, True)\n \n         self.log.info(\"Find transactions spending outputs\")\n+        # spending transactions are found in the mempool of node 0 but not 1 and 2\n         result = self.nodes[0].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n         assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'spendingtxid' : txidA}, {'txid' : txidA, 'vout' : 1, 'spendingtxid' : txidC} ])\n+        result = self.nodes[1].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        result = self.nodes[2].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'warnings': ['txospenderindex is unavailable.']}, {'txid' : txidA, 'vout' : 1, 'warnings': ['txospenderindex is unavailable.']} ])",
      "path": "test/functional/rpc_mempool_info.py",
      "position": null,
      "original_position": 24,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In 16b5cb0b9d343de1080ec4761bd8f20d668059ee \"Add a \"tx output spender\" index\"\r\n\r\nI don't see why the spends wouldn't be in nodes 1 and 2's mempools, other than that this is a race.",
      "created_at": "2022-11-21T21:59:11Z",
      "updated_at": "2022-11-21T22:01:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1028552792",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1028552792"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 71,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540125",
      "pull_request_review_id": 1190363982,
      "id": 1029540125,
      "node_id": "PRRC_kwDOABII5849XYkd",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994483806,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:09:46Z",
      "updated_at": "2022-11-22T16:09:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029540125",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540125"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 38,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540434",
      "pull_request_review_id": 1190364412,
      "id": 1029540434,
      "node_id": "PRRC_kwDOABII5849XYpS",
      "diff_hunk": "@@ -881,6 +890,8 @@ bool AppInitParameterInteraction(const ArgsManager& args, bool use_syscall_sandb\n     if (args.GetIntArg(\"-prune\", 0)) {\n         if (args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX))\n             return InitError(_(\"Prune mode is incompatible with -txindex.\"));\n+        if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX))",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994569142,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:02Z",
      "updated_at": "2022-11-22T16:10:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029540434",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540434"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 893,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540643",
      "pull_request_review_id": 1190364734,
      "id": 1029540643,
      "node_id": "PRRC_kwDOABII5849XYsj",
      "diff_hunk": "@@ -644,6 +672,30 @@ static RPCHelpMan gettxspendingprevout()\n                 const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n                 if (spendingTx != nullptr) {\n                     o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (mempool_only.value_or(false)) {\n+                    // do nothing\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {",
      "path": "src/rpc/mempool.cpp",
      "position": null,
      "original_position": 72,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 994570253,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:13Z",
      "updated_at": "2022-11-22T16:10:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029540643",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 680,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540948",
      "pull_request_review_id": 1190365157,
      "id": 1029540948,
      "node_id": "PRRC_kwDOABII5849XYxU",
      "diff_hunk": "@@ -0,0 +1,64 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <index/txospenderindex.h>\n+\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <util/system.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) :\n+    BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& tuple : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, tuple.first), tuple.second);\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+bool TxoSpenderIndex::CustomAppend(const interfaces::BlockInfo& block)\n+{\n+    std::vector<std::pair<COutPoint, uint256>> items;\n+    items.reserve(block.data->vtx.size());\n+\n+    for (const auto& tx : block.data->vtx) {",
      "path": "src/index/txospenderindex.cpp",
      "position": 61,
      "original_position": 49,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028539576,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:29Z",
      "updated_at": "2022-11-22T16:10:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029540948",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029540948"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 61,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029541298",
      "pull_request_review_id": 1190365575,
      "id": 1029541298,
      "node_id": "PRRC_kwDOABII5849XY2y",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028547783,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:44Z",
      "updated_at": "2022-11-22T16:10:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029541298",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029541298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029541433",
      "pull_request_review_id": 1190365757,
      "id": 1029541433,
      "node_id": "PRRC_kwDOABII5849XY45",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2021 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <index/txospenderindex.h>\n+#include <script/standard.h>\n+#include <test/util/setup_common.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(txospenderindex_tests)\n+\n+BOOST_FIXTURE_TEST_CASE(txospenderindex_initial_sync, TestChain100Setup)\n+{\n+    TxoSpenderIndex txospenderindex(interfaces::MakeChain(m_node), 1 << 20, true);\n+    // Mine blocks for coinbase maturity, so we can spend some coinbase outputs in the test.\n+     for (int i = 0; i < 50; i++) {\n+         std::vector<CMutableTransaction> no_txns;\n+         CreateAndProcessBlock(no_txns, this->m_coinbase_txns[i]->vout[0].scriptPubKey);\n+     }\n+    std::vector<COutPoint> spent(10);\n+    std::vector<CMutableTransaction> spender(spent.size());\n+\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        spent[i] = COutPoint(this->m_coinbase_txns[i]->GetHash(), 0);\n+        spender[i].nVersion = 1;\n+        spender[i].vin.resize(1);\n+        spender[i].vin[0].prevout.hash = spent[i].hash;\n+        spender[i].vin[0].prevout.n = spent[i].n;\n+        spender[i].vout.resize(1);\n+        spender[i].vout[0].nValue = this->m_coinbase_txns[i]->GetValueOut();\n+        spender[i].vout[0].scriptPubKey = this->m_coinbase_txns[i]->vout[0].scriptPubKey;\n+\n+        // Sign:\n+        std::vector<unsigned char> vchSig;\n+        const uint256 hash = SignatureHash(this->m_coinbase_txns[i]->vout[0].scriptPubKey, spender[i], 0, SIGHASH_ALL, 0, SigVersion::BASE);\n+        coinbaseKey.Sign(hash, vchSig);\n+        vchSig.push_back((unsigned char)SIGHASH_ALL);\n+        spender[i].vin[0].scriptSig << vchSig;\n+    }\n+\n+    CreateAndProcessBlock(spender, this->m_coinbase_txns[0]->vout[0].scriptPubKey);\n+    uint256 txid;\n+\n+    // Transaction should not be found in the index before it is started.\n+    for (const auto& outpoint : spent) {\n+        BOOST_CHECK(!txospenderindex.FindSpender(outpoint, txid));\n+    }\n+\n+    // BlockUntilSyncedToCurrentChain should return false before txindex is started.",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 53,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028548977,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done  in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:10:50Z",
      "updated_at": "2022-11-22T16:10:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029541433",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029541433"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 53,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029542286",
      "pull_request_review_id": 1190367024,
      "id": 1029542286,
      "node_id": "PRRC_kwDOABII5849XZGO",
      "diff_hunk": "@@ -60,8 +65,13 @@ def create_tx(**kwargs):\n             assert_equal(txid in mempool, True)\n \n         self.log.info(\"Find transactions spending outputs\")\n+        # spending transactions are found in the mempool of node 0 but not 1 and 2\n         result = self.nodes[0].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n         assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'spendingtxid' : txidA}, {'txid' : txidA, 'vout' : 1, 'spendingtxid' : txidC} ])\n+        result = self.nodes[1].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        result = self.nodes[2].gettxspendingprevout([ {'txid' : confirmed_utxo['txid'], 'vout' : 0}, {'txid' : txidA, 'vout' : 1} ])\n+        assert_equal(result, [ {'txid' : confirmed_utxo['txid'], 'vout' : 0, 'warnings': ['txospenderindex is unavailable.']}, {'txid' : txidA, 'vout' : 1, 'warnings': ['txospenderindex is unavailable.']} ])",
      "path": "test/functional/rpc_mempool_info.py",
      "position": null,
      "original_position": 24,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028552792,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "you're right, thanks! fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/965bc7ef2e8548fd9abe609a752cadf7c44b8c00",
      "created_at": "2022-11-22T16:11:34Z",
      "updated_at": "2022-11-22T16:11:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029542286",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029542286"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 71,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029549049",
      "pull_request_review_id": 1190376797,
      "id": 1029549049,
      "node_id": "PRRC_kwDOABII5849Xav5",
      "diff_hunk": "@@ -1520,6 +1534,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\n+        if (!args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-txospenderindex requires -txindex.\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028541621,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I did not see a use case for `txospenderindex` without `txindex` as you would always want you fetch the spending tx but I guess people could want to know that a tx was confirmed and spent and nothing more.",
      "created_at": "2022-11-22T16:17:27Z",
      "updated_at": "2022-11-22T16:17:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029549049",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029549049"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1584,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029553655",
      "pull_request_review_id": 1190383600,
      "id": 1029553655,
      "node_id": "PRRC_kwDOABII5849Xb33",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 25,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028542275,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I will experiment with not requiring txindex and pruning support and add a separate commit for that.  ",
      "created_at": "2022-11-22T16:21:31Z",
      "updated_at": "2022-11-22T16:21:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1029553655",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1029553655"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1030752512",
      "pull_request_review_id": 1192099078,
      "id": 1030752512,
      "node_id": "PRRC_kwDOABII5849cAkA",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }\n+\n+protected:\n+    bool CustomAppend(const interfaces::BlockInfo& block) override;",
      "path": "src/index/txospenderindex.h",
      "position": 28,
      "original_position": 28,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028544839,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/5957f992b7afe20dca250c398bb28ad0ae52f868\r\n\r\nI may have missed something, but it seems that if the chain tip is reorged out, `CustomRewind` won't be called until a new block is added to the chain. Until then, our txospenderindex (and I guess this might be true for other indexes) will return stale results. In our case, you'll be able to see that the spending tx has 0 confirmations and could be replaced, but it makes me wonder how usable this index is if you cannot tell if spending txs are confirmed or not. So yes technically `txospenderindex` does not require `txindex` but could it really be usable in practice without it ?",
      "created_at": "2022-11-23T18:09:37Z",
      "updated_at": "2022-11-23T18:09:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1030752512",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1030752512"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038197461",
      "pull_request_review_id": 1202581582,
      "id": 1038197461,
      "node_id": "PRRC_kwDOABII58494aLV",
      "diff_hunk": "@@ -644,6 +672,30 @@ static RPCHelpMan gettxspendingprevout()\n                 const CTransaction* spendingTx = mempool.GetConflictTx(prevout);\n                 if (spendingTx != nullptr) {\n                     o.pushKV(\"spendingtxid\", spendingTx->GetHash().ToString());\n+                } else if (mempool_only.value_or(false)) {\n+                    // do nothing\n+                } else if (g_txospenderindex) {\n+                    // no spending tx in mempool, query txospender index\n+                    uint256 spendingtxid;\n+                    if(g_txospenderindex->FindSpender(prevout, spendingtxid)) {\n+                        o.pushKV(\"spendingtxid\", spendingtxid.GetHex());\n+                    } else if (!f_txospenderindex_ready) {\n+                        if (mempool_only.has_value()) {  // NOTE: value is false here\n+                            throw JSONRPCError(RPC_MISC_ERROR, strprintf(\"No spending tx for the outpoint %s:%d found, and txospenderindex is still being synced.\", prevout.hash.GetHex(), prevout.n));\n+                        } else {\n+                            UniValue warnings(UniValue::VARR);\n+                            warnings.push_back(\"txospenderindex is still being synced.\");\n+                            o.pushKV(\"warnings\", warnings);\n+                        }\n+                    }",
      "path": "src/rpc/mempool.cpp",
      "position": 88,
      "original_position": 82,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028538250,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done  in https://github.com/bitcoin/bitcoin/pull/24539/commits/15e850c0a41c295683c90b42b5b8d97033e68be7",
      "created_at": "2022-12-02T14:28:05Z",
      "updated_at": "2022-12-02T14:28:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1038197461",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038197461"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": 703,
      "original_start_line": 682,
      "start_side": "RIGHT",
      "line": 711,
      "original_line": 711,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038198878",
      "pull_request_review_id": 1202583500,
      "id": 1038198878,
      "node_id": "PRRC_kwDOABII58494ahe",
      "diff_hunk": "@@ -1520,6 +1534,16 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\n         }\n     }\n \n+    if (args.GetBoolArg(\"-txospenderindex\", DEFAULT_TXOSPENDERINDEX)) {\n+        if (!args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX)) {\n+            return InitError(_(\"-txospenderindex requires -txindex.\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028541621,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/24539/commits/2d6f407fb70e6afe004cfcdc563a6fab00f29e42 removes the requirement on `-txindex`",
      "created_at": "2022-12-02T14:29:24Z",
      "updated_at": "2022-12-02T14:29:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1038198878",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038198878"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1584,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038200079",
      "pull_request_review_id": 1202585275,
      "id": 1038200079,
      "node_id": "PRRC_kwDOABII58494a0P",
      "diff_hunk": "@@ -0,0 +1,46 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INDEX_TXOSPENDERINDEX_H\n+#define BITCOIN_INDEX_TXOSPENDERINDEX_H\n+\n+#include <index/base.h>\n+\n+static constexpr bool DEFAULT_TXOSPENDERINDEX{false};\n+\n+/**\n+ * TxoSpenderIndex is used to look up which transaction spent a given output.\n+ * The index is written to a LevelDB database and, for each input of each transaction in a block,\n+ * records the outpoint that is spent and the hash of the spending transaction.\n+ */\n+class TxoSpenderIndex final : public BaseIndex\n+{\n+protected:\n+    class DB;\n+\n+private:\n+    const std::unique_ptr<DB> m_db;\n+\n+    bool AllowPrune() const override { return false; }",
      "path": "src/index/txospenderindex.h",
      "position": null,
      "original_position": 25,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "16b5cb0b9d343de1080ec4761bd8f20d668059ee",
      "in_reply_to_id": 1028542275,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/24539/commits/2d6f407fb70e6afe004cfcdc563a6fab00f29e42 makes this index compatible with pruning.",
      "created_at": "2022-12-02T14:30:35Z",
      "updated_at": "2022-12-02T14:30:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1038200079",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1038200079"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039669931",
      "pull_request_review_id": 1204651133,
      "id": 1039669931,
      "node_id": "PRRC_kwDOABII5849-Bqr",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <index/txospenderindex.h>\n+#include <script/standard.h>\n+#include <test/util/setup_common.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(txospenderindex_tests)\n+\n+BOOST_FIXTURE_TEST_CASE(txospenderindex_initial_sync, TestChain100Setup)\n+{\n+    TxoSpenderIndex txospenderindex(interfaces::MakeChain(m_node), 1 << 20, true);\n+    // Mine blocks for coinbase maturity, so we can spend some coinbase outputs in the test.\n+     for (int i = 0; i < 50; i++) {\n+         std::vector<CMutableTransaction> no_txns;\n+         CreateAndProcessBlock(no_txns, this->m_coinbase_txns[i]->vout[0].scriptPubKey);\n+     }\n+    std::vector<COutPoint> spent(10);\n+    std::vector<CMutableTransaction> spender(spent.size());\n+\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        spent[i] = COutPoint(this->m_coinbase_txns[i]->GetHash(), 0);\n+        spender[i].nVersion = 1;\n+        spender[i].vin.resize(1);\n+        spender[i].vin[0].prevout.hash = spent[i].hash;\n+        spender[i].vin[0].prevout.n = spent[i].n;\n+        spender[i].vout.resize(1);\n+        spender[i].vout[0].nValue = this->m_coinbase_txns[i]->GetValueOut();\n+        spender[i].vout[0].scriptPubKey = this->m_coinbase_txns[i]->vout[0].scriptPubKey;\n+\n+        // Sign:\n+        std::vector<unsigned char> vchSig;\n+        const uint256 hash = SignatureHash(this->m_coinbase_txns[i]->vout[0].scriptPubKey, spender[i], 0, SIGHASH_ALL, 0, SigVersion::BASE);\n+        coinbaseKey.Sign(hash, vchSig);\n+        vchSig.push_back((unsigned char)SIGHASH_ALL);\n+        spender[i].vin[0].scriptSig << vchSig;\n+    }\n+\n+    CreateAndProcessBlock(spender, this->m_coinbase_txns[0]->vout[0].scriptPubKey);\n+    uint256 txid;\n+\n+    // Transaction should not be found in the index before it is started.\n+    for (const auto& outpoint : spent) {\n+        BOOST_CHECK(!txospenderindex.FindSpender(outpoint, txid));\n+    }\n+\n+    // BlockUntilSyncedToCurrentChain should return false before txospenderindex is started.\n+    BOOST_CHECK(!txospenderindex.BlockUntilSyncedToCurrentChain());\n+\n+    BOOST_REQUIRE(txospenderindex.Start());\n+\n+\n+    // Allow tx index to catch up with the block index.\n+    constexpr int64_t timeout_ms = 10 * 1000;\n+    int64_t time_start = GetTimeMillis();\n+    while (!txospenderindex.BlockUntilSyncedToCurrentChain()) {\n+        BOOST_REQUIRE(time_start + timeout_ms > GetTimeMillis());\n+        UninterruptibleSleep(std::chrono::milliseconds{100});\n+    }\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        BOOST_CHECK(txospenderindex.FindSpender(spent[i], txid) && txid == spender[i].GetHash());\n+    }\n+\n+    // shutdown sequence (c.f. Shutdown() in init.cpp)\n+    txospenderindex.Stop();\n+\n+    // Let scheduler events finish running to avoid accessing any memory related to txindex after it is destructed\n+    SyncWithValidationInterfaceQueue();",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 74,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "47e60750e7de54365dba3651b412716af552f85f",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit if you retouch: Looks like the order was changed in the other tests.\r\n\r\n\r\n```cpp\r\n    // It is not safe to stop and destroy the index until it finishes handling\r\n    // the last BlockConnected notification. The BlockUntilSyncedToCurrentChain()\r\n    // call above is sufficient to ensure this, but the\r\n    // SyncWithValidationInterfaceQueue() call below is also needed to ensure\r\n    // TSAN always sees the test thread waiting for the notification thread, and\r\n    // avoid potential false positive reports.\r\n    SyncWithValidationInterfaceQueue();\r\n\r\n    // Shutdown sequence (c.f. Shutdown() in init.cpp)\r\n    coin_stats_index.Stop();\r\n```\r\n\r\nSee 861cb3fadce88cfaee27088185a48f03fb9dafe7",
      "created_at": "2022-12-05T14:27:58Z",
      "updated_at": "2022-12-05T14:27:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1039669931",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1039669931"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1043428164",
      "pull_request_review_id": 1210191997,
      "id": 1043428164,
      "node_id": "PRRC_kwDOABII584-MXNE",
      "diff_hunk": "@@ -0,0 +1,77 @@\n+// Copyright (c) 2017-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <index/txospenderindex.h>\n+#include <script/standard.h>\n+#include <test/util/setup_common.h>\n+#include <util/time.h>\n+#include <validation.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(txospenderindex_tests)\n+\n+BOOST_FIXTURE_TEST_CASE(txospenderindex_initial_sync, TestChain100Setup)\n+{\n+    TxoSpenderIndex txospenderindex(interfaces::MakeChain(m_node), 1 << 20, true);\n+    // Mine blocks for coinbase maturity, so we can spend some coinbase outputs in the test.\n+     for (int i = 0; i < 50; i++) {\n+         std::vector<CMutableTransaction> no_txns;\n+         CreateAndProcessBlock(no_txns, this->m_coinbase_txns[i]->vout[0].scriptPubKey);\n+     }\n+    std::vector<COutPoint> spent(10);\n+    std::vector<CMutableTransaction> spender(spent.size());\n+\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        spent[i] = COutPoint(this->m_coinbase_txns[i]->GetHash(), 0);\n+        spender[i].nVersion = 1;\n+        spender[i].vin.resize(1);\n+        spender[i].vin[0].prevout.hash = spent[i].hash;\n+        spender[i].vin[0].prevout.n = spent[i].n;\n+        spender[i].vout.resize(1);\n+        spender[i].vout[0].nValue = this->m_coinbase_txns[i]->GetValueOut();\n+        spender[i].vout[0].scriptPubKey = this->m_coinbase_txns[i]->vout[0].scriptPubKey;\n+\n+        // Sign:\n+        std::vector<unsigned char> vchSig;\n+        const uint256 hash = SignatureHash(this->m_coinbase_txns[i]->vout[0].scriptPubKey, spender[i], 0, SIGHASH_ALL, 0, SigVersion::BASE);\n+        coinbaseKey.Sign(hash, vchSig);\n+        vchSig.push_back((unsigned char)SIGHASH_ALL);\n+        spender[i].vin[0].scriptSig << vchSig;\n+    }\n+\n+    CreateAndProcessBlock(spender, this->m_coinbase_txns[0]->vout[0].scriptPubKey);\n+    uint256 txid;\n+\n+    // Transaction should not be found in the index before it is started.\n+    for (const auto& outpoint : spent) {\n+        BOOST_CHECK(!txospenderindex.FindSpender(outpoint, txid));\n+    }\n+\n+    // BlockUntilSyncedToCurrentChain should return false before txospenderindex is started.\n+    BOOST_CHECK(!txospenderindex.BlockUntilSyncedToCurrentChain());\n+\n+    BOOST_REQUIRE(txospenderindex.Start());\n+\n+\n+    // Allow tx index to catch up with the block index.\n+    constexpr int64_t timeout_ms = 10 * 1000;\n+    int64_t time_start = GetTimeMillis();\n+    while (!txospenderindex.BlockUntilSyncedToCurrentChain()) {\n+        BOOST_REQUIRE(time_start + timeout_ms > GetTimeMillis());\n+        UninterruptibleSleep(std::chrono::milliseconds{100});\n+    }\n+    for (size_t i = 0; i < spent.size(); i++) {\n+        BOOST_CHECK(txospenderindex.FindSpender(spent[i], txid) && txid == spender[i].GetHash());\n+    }\n+\n+    // shutdown sequence (c.f. Shutdown() in init.cpp)\n+    txospenderindex.Stop();\n+\n+    // Let scheduler events finish running to avoid accessing any memory related to txindex after it is destructed\n+    SyncWithValidationInterfaceQueue();",
      "path": "src/test/txospenderindex_tests.cpp",
      "position": null,
      "original_position": 74,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "47e60750e7de54365dba3651b412716af552f85f",
      "in_reply_to_id": 1039669931,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "done in https://github.com/bitcoin/bitcoin/pull/24539/commits/1ea70b814d641deb63746044795001d1bd3d709b",
      "created_at": "2022-12-08T14:38:49Z",
      "updated_at": "2022-12-08T14:38:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1043428164",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1043428164"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286722759",
      "pull_request_review_id": 1566674806,
      "id": 1286722759,
      "node_id": "PRRC_kwDOABII585MsdTH",
      "diff_hunk": "@@ -0,0 +1,109 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <common/args.h>\n+#include <index/txospenderindex.h>\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+    bool EraseSpenderInfos(const std::vector<COutPoint>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) : BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{\n+}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{\n+}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& [outpoint, hash] : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, outpoint), hash);\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+bool TxoSpenderIndex::DB::EraseSpenderInfos(const std::vector<COutPoint>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& outpoint : items) {\n+        batch.Erase(std::make_pair(DB_TXOSPENDERINDEX, outpoint));\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+bool TxoSpenderIndex::CustomAppend(const interfaces::BlockInfo& block)\n+{\n+    std::vector<std::pair<COutPoint, uint256>> items;\n+    items.reserve(block.data->vtx.size());\n+\n+    for (const auto& tx : block.data->vtx) {\n+        if (tx->IsCoinBase()) {\n+            continue;\n+        }\n+        for (const auto& input : tx->vin) {\n+            items.emplace_back(input.prevout, tx->GetHash());\n+        }\n+    }\n+    return m_db->WriteSpenderInfos(items);\n+}\n+\n+bool TxoSpenderIndex::CustomRewind(const interfaces::BlockKey& current_tip, const interfaces::BlockKey& new_tip)\n+{\n+    LOCK(cs_main);\n+    const CBlockIndex* iter_tip{m_chainstate->m_blockman.LookupBlockIndex(current_tip.hash)};\n+    const CBlockIndex* new_tip_index{m_chainstate->m_blockman.LookupBlockIndex(new_tip.hash)};\n+\n+    do {\n+        CBlock block;\n+        if (!m_chainstate->m_blockman.ReadBlockFromDisk(block, *iter_tip)) {\n+            return error(\"%s: Failed to read block %s from disk\",\n+                         __func__, iter_tip->GetBlockHash().ToString());",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 81,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "8368a74f533db25ea6a02ad95221545c1f93f7be",
      "in_reply_to_id": null,
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n            return error(\"Failed to read block %s from disk\",\r\n                         iter_tip->GetBlockHash().ToString());\r\n```\r\n\r\nnit: For new code there is no need to add `__func__`, because users can set `-logsourcelocations` if they want. Also, missing include `#include \"logging.h\" ` for `error()`, see CI failure?",
      "created_at": "2023-08-08T07:36:19Z",
      "updated_at": "2023-08-08T07:36:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1286722759",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1286722759"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 80,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1288027509",
      "pull_request_review_id": 1568862443,
      "id": 1288027509,
      "node_id": "PRRC_kwDOABII585Mxb11",
      "diff_hunk": "@@ -0,0 +1,109 @@\n+// Copyright (c) 2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <chainparams.h>\n+#include <common/args.h>\n+#include <index/txospenderindex.h>\n+#include <index/disktxpos.h>\n+#include <node/blockstorage.h>\n+#include <validation.h>\n+\n+constexpr uint8_t DB_TXOSPENDERINDEX{'s'};\n+\n+std::unique_ptr<TxoSpenderIndex> g_txospenderindex;\n+\n+/** Access to the txo spender index database (indexes/txospenderindex/) */\n+class TxoSpenderIndex::DB : public BaseIndex::DB\n+{\n+public:\n+    explicit DB(size_t n_cache_size, bool f_memory = false, bool f_wipe = false);\n+\n+    bool WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items);\n+    bool EraseSpenderInfos(const std::vector<COutPoint>& items);\n+};\n+\n+TxoSpenderIndex::DB::DB(size_t n_cache_size, bool f_memory, bool f_wipe) : BaseIndex::DB(gArgs.GetDataDirNet() / \"indexes\" / \"txospenderindex\", n_cache_size, f_memory, f_wipe)\n+{\n+}\n+\n+TxoSpenderIndex::TxoSpenderIndex(std::unique_ptr<interfaces::Chain> chain, size_t n_cache_size, bool f_memory, bool f_wipe)\n+    : BaseIndex(std::move(chain), \"txospenderindex\"), m_db(std::make_unique<TxoSpenderIndex::DB>(n_cache_size, f_memory, f_wipe))\n+{\n+}\n+\n+TxoSpenderIndex::~TxoSpenderIndex() {}\n+\n+bool TxoSpenderIndex::DB::WriteSpenderInfos(const std::vector<std::pair<COutPoint, uint256>>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& [outpoint, hash] : items) {\n+        batch.Write(std::make_pair(DB_TXOSPENDERINDEX, outpoint), hash);\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+bool TxoSpenderIndex::DB::EraseSpenderInfos(const std::vector<COutPoint>& items)\n+{\n+    CDBBatch batch(*this);\n+    for (const auto& outpoint : items) {\n+        batch.Erase(std::make_pair(DB_TXOSPENDERINDEX, outpoint));\n+    }\n+    return WriteBatch(batch);\n+}\n+\n+bool TxoSpenderIndex::CustomAppend(const interfaces::BlockInfo& block)\n+{\n+    std::vector<std::pair<COutPoint, uint256>> items;\n+    items.reserve(block.data->vtx.size());\n+\n+    for (const auto& tx : block.data->vtx) {\n+        if (tx->IsCoinBase()) {\n+            continue;\n+        }\n+        for (const auto& input : tx->vin) {\n+            items.emplace_back(input.prevout, tx->GetHash());\n+        }\n+    }\n+    return m_db->WriteSpenderInfos(items);\n+}\n+\n+bool TxoSpenderIndex::CustomRewind(const interfaces::BlockKey& current_tip, const interfaces::BlockKey& new_tip)\n+{\n+    LOCK(cs_main);\n+    const CBlockIndex* iter_tip{m_chainstate->m_blockman.LookupBlockIndex(current_tip.hash)};\n+    const CBlockIndex* new_tip_index{m_chainstate->m_blockman.LookupBlockIndex(new_tip.hash)};\n+\n+    do {\n+        CBlock block;\n+        if (!m_chainstate->m_blockman.ReadBlockFromDisk(block, *iter_tip)) {\n+            return error(\"%s: Failed to read block %s from disk\",\n+                         __func__, iter_tip->GetBlockHash().ToString());",
      "path": "src/index/txospenderindex.cpp",
      "position": null,
      "original_position": 81,
      "commit_id": "48d829484eb9fc0a63fd04083d92f6a3005ec491",
      "original_commit_id": "8368a74f533db25ea6a02ad95221545c1f93f7be",
      "in_reply_to_id": 1286722759,
      "user": {
        "login": "sstone",
        "id": 1573866,
        "node_id": "MDQ6VXNlcjE1NzM4NjY=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1573866?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sstone",
        "html_url": "https://github.com/sstone",
        "followers_url": "https://api.github.com/users/sstone/followers",
        "following_url": "https://api.github.com/users/sstone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sstone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sstone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sstone/subscriptions",
        "organizations_url": "https://api.github.com/users/sstone/orgs",
        "repos_url": "https://api.github.com/users/sstone/repos",
        "events_url": "https://api.github.com/users/sstone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sstone/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks! rebased and fixed in https://github.com/bitcoin/bitcoin/pull/24539/commits/ff8b7d485e0b216a5ddf5e092ab5e2624f845fa4",
      "created_at": "2023-08-09T06:51:27Z",
      "updated_at": "2023-08-09T06:51:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/24539#discussion_r1288027509",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1288027509"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24539"
        }
      },
      "start_line": null,
      "original_start_line": 80,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    }
  ]
}