{
  "type": "issue",
  "issue": {
    "id": 197267689,
    "node_id": "MDU6SXNzdWUxOTcyNjc2ODk=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9409",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9409/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9409/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9409/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/9409",
    "number": 9409,
    "state": "closed",
    "state_reason": "completed",
    "title": "Pruned wallet support",
    "body": "This describes a proposed enhancement.\r\n\r\nWith the ability to import keys without full rescan or load an old wallet\r\nwithout a rescan (e.g. with pruning), the user of a wallet is exposed to\r\nthe possiblity that there will be wallet txn that they don't know about.\r\n\r\nEven if the user intentionally put the wallet in this state, they may\r\nforget months later (esp. if managing multiple wallets).  \r\n\r\nFailure to know about this can result funds loss (thinking keys don't\r\nhave funds when they do), and even if there is a UTXO scan, issues may\r\nremain: The user may falsely think they didn't pay someone and then\r\npay again, the user may falsely think they weren't paid and falsely\r\ndemand payment.  The user might screw up their taxes or business\r\nrecords and get themselves in trouble. In short: \"the wallet gives you a complete history\r\nof your transactions, except when it doesn't\" is a somewhat dangerous interface.\r\n\r\nI believe we can avoid these issues by establishing clear behavior.\r\n\r\nTo do this we define a pruned wallet: A pruned wallet knows every\r\nwallet transaction up to height X, and before that only knows about\r\ncoins.\r\n\r\nIn the transaction list there would be a top most entry that\r\nsays something like \"Prior history not shown due to pruning\"\r\nand perhaps a correcting ledger entry that showed the amount\r\nof coins available at the point of pruning.  RPC would provide\r\nthe pruning state via getwalletinfo and potentially a correcting\r\nledger entry at the earliest point in listtransactions.\r\n\r\nAny wallet could be pruned to any height at any time. Any\r\npruned wallet could be unpruned with a rescan.\r\n\r\nIf you import keys in the UI or load a old wallet the GUI could\r\nprompt the user to allow rescan or prune-- or if the age is beyond\r\ntheir blockchain prune depth, allow them to prune or abort.\r\n\r\n(or even rescan by fetching blocks ... wee!)\r\n\r\n(Potentially a wallet could have an unknown pruned state where\r\n a notice is displayed that says it doesn't know if its pruned or not,\r\n allowing the current behavior.)\r\n\r\nThis would also be attractive to large commercial parties\r\nwho have ended up with wallets that are hundreds of megs in size.\r\n(most of that is transaction data that would be eliminated by pruning)\r\n\r\nSome thought might be given to preserving labels for pruned transactions. They don't take much space, and might just be worth preserving.",
    "user": {
      "login": "gmaxwell",
      "id": 858454,
      "node_id": "MDQ6VXNlcjg1ODQ1NA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/858454?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gmaxwell",
      "html_url": "https://github.com/gmaxwell",
      "followers_url": "https://api.github.com/users/gmaxwell/followers",
      "following_url": "https://api.github.com/users/gmaxwell/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/gmaxwell/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/gmaxwell/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/gmaxwell/subscriptions",
      "organizations_url": "https://api.github.com/users/gmaxwell/orgs",
      "repos_url": "https://api.github.com/users/gmaxwell/repos",
      "events_url": "https://api.github.com/users/gmaxwell/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/gmaxwell/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 5,
    "closed_at": "2022-12-16T22:31:22Z",
    "created_at": "2016-12-22T21:13:47Z",
    "updated_at": "2022-12-16T22:31:22Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 903681744,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDkwMzY4MTc0NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/903681744",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-12-23T01:06:08Z",
      "label": {
        "name": "Wallet",
        "color": "02d7e1"
      }
    },
    {
      "event": "commented",
      "id": 268984513,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI2ODk4NDUxMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/268984513",
      "actor": {
        "login": "rebroad",
        "id": 1530283,
        "node_id": "MDQ6VXNlcjE1MzAyODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rebroad",
        "html_url": "https://github.com/rebroad",
        "followers_url": "https://api.github.com/users/rebroad/followers",
        "following_url": "https://api.github.com/users/rebroad/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rebroad/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rebroad/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
        "organizations_url": "https://api.github.com/users/rebroad/orgs",
        "repos_url": "https://api.github.com/users/rebroad/repos",
        "events_url": "https://api.github.com/users/rebroad/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rebroad/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-12-23T12:42:14Z",
      "updated_at": "2016-12-23T12:42:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "I like this idea... I'm also wondering if perhaps some of the code from the SPV-hybrid PR I saw recently could be used to optionally allow the user to fill in the blind spots either as SPV (open to abuse) or from a trusted/whitelisted node (e.g. I run a pruned node and a full-node, and I suspect I may not alone with this setup).",
      "user": {
        "login": "rebroad",
        "id": 1530283,
        "node_id": "MDQ6VXNlcjE1MzAyODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rebroad",
        "html_url": "https://github.com/rebroad",
        "followers_url": "https://api.github.com/users/rebroad/followers",
        "following_url": "https://api.github.com/users/rebroad/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rebroad/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rebroad/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
        "organizations_url": "https://api.github.com/users/rebroad/orgs",
        "repos_url": "https://api.github.com/users/rebroad/repos",
        "events_url": "https://api.github.com/users/rebroad/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rebroad/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-268984513",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9409"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-12-26T12:15:08Z",
      "updated_at": "2016-12-26T12:15:08Z",
      "source": {
        "issue": {
          "id": 197580798,
          "node_id": "MDU6SXNzdWUxOTc1ODA3OTg=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9429",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9429/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9429/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9429/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/9429",
          "number": 9429,
          "state": "closed",
          "state_reason": "completed",
          "title": "[Wallet] Implment Wallet Pruning",
          "body": "As mentioned by @gmaxwell on IRC: https://botbot.me/freenode/bitcoin-core-dev/2016-12-22/?msg=78338240&page=4\r\n\r\nA pruned wallet is a wallet that has had some transactions removed.\r\n\r\nThe is very useful for merchants who deal with very large (say 500mb+) wallets.\r\n\r\nPossible command:\r\n\r\nPrune Wallet:  (possibly a useful command for privacy)\r\n[int: start block height] - Start Range (inclusive)\r\n[int: end block height] - End Range - (exclusive)\r\n(bool: keep unspent, default true) - If transaction has unspent output, exclude from removal.\r\n(bool: test run, default true) - Return transactions that would be removed, but don't execute.\r\n(list of txid: excluded transactions) - List of transactions that should be not removed.\r\n(bool: error if excluded txid not found, default true) - If excluded txid not found, don't continue.",
          "user": {
            "login": "da2ce7",
            "id": 691439,
            "node_id": "MDQ6VXNlcjY5MTQzOQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/691439?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/da2ce7",
            "html_url": "https://github.com/da2ce7",
            "followers_url": "https://api.github.com/users/da2ce7/followers",
            "following_url": "https://api.github.com/users/da2ce7/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/da2ce7/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/da2ce7/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/da2ce7/subscriptions",
            "organizations_url": "https://api.github.com/users/da2ce7/orgs",
            "repos_url": "https://api.github.com/users/da2ce7/repos",
            "events_url": "https://api.github.com/users/da2ce7/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/da2ce7/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 2,
          "closed_at": "2016-12-26T14:30:55Z",
          "created_at": "2016-12-26T12:02:25Z",
          "updated_at": "2021-09-08T12:25:12Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-12-26T12:19:31Z",
      "updated_at": "2016-12-26T12:19:31Z",
      "source": {
        "issue": {
          "id": 197551335,
          "node_id": "MDU6SXNzdWUxOTc1NTEzMzU=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9425",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9425/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9425/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9425/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/9425",
          "number": 9425,
          "state": "closed",
          "state_reason": "completed",
          "title": "[Wallet] Add set of unscanned-block-height-ranges to key metadata",
          "body": "To assist querying keys in the wallet, the key metadata should keep track of what block height ranges it MAY not know the transactions for.\r\n\r\nUpon a full-rescan: all keys should have their 'unscanned' ranges cleared.\r\n\r\nUpon 'pruning' a set of translations in a wallet: all related keys in the wallet should be updated with the appropriate 'unscanned' ranges.\r\n\r\nIf upon opening a wallet the client cannot connect an appropriate hash and rescan (such as when changing wallets on a pruned node).  All keys in the wallet should be set to include the unscanned range upto where then node keeps full-blocks (and can rescan from).\r\n\r\nThe ranges should be conservative so that the wallet can be quite confident that it knows about all the transactions that are not inside the unscanned ranges.  The wallet may also know about transactions that are inside the unscanned ranges.\r\n\r\nNote: Updated upon @sipa 's comments that the wallets already have implement many similar behaviour to what is described.",
          "user": {
            "login": "da2ce7",
            "id": 691439,
            "node_id": "MDQ6VXNlcjY5MTQzOQ==",
            "avatar_url": "https://avatars.githubusercontent.com/u/691439?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/da2ce7",
            "html_url": "https://github.com/da2ce7",
            "followers_url": "https://api.github.com/users/da2ce7/followers",
            "following_url": "https://api.github.com/users/da2ce7/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/da2ce7/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/da2ce7/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/da2ce7/subscriptions",
            "organizations_url": "https://api.github.com/users/da2ce7/orgs",
            "repos_url": "https://api.github.com/users/da2ce7/repos",
            "events_url": "https://api.github.com/users/da2ce7/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/da2ce7/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 5,
          "closed_at": "2020-05-08T19:20:50Z",
          "created_at": "2016-12-26T07:41:24Z",
          "updated_at": "2022-02-15T11:03:21Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 269217068,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI2OTIxNzA2OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/269217068",
      "actor": {
        "login": "da2ce7",
        "id": 691439,
        "node_id": "MDQ6VXNlcjY5MTQzOQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/691439?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/da2ce7",
        "html_url": "https://github.com/da2ce7",
        "followers_url": "https://api.github.com/users/da2ce7/followers",
        "following_url": "https://api.github.com/users/da2ce7/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/da2ce7/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/da2ce7/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/da2ce7/subscriptions",
        "organizations_url": "https://api.github.com/users/da2ce7/orgs",
        "repos_url": "https://api.github.com/users/da2ce7/repos",
        "events_url": "https://api.github.com/users/da2ce7/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/da2ce7/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2016-12-26T14:43:01Z",
      "updated_at": "2016-12-26T14:43:01Z",
      "author_association": "NONE",
      "body": "From my issue (made in error without noticing this issue).  I think that this is a very useful idea.\r\n\r\n(an proposed api):\r\n\r\n(in brackets optional arguments)\r\n\r\nPrune Wallet:\r\n- [**integer**: start block height] - _Start Range (inclusive)_\r\n- [**integer**: end block height] - _End Range - (exclusive)_\r\n- (**boolean**: test run, default: true) - Return transactions that would be removed, but don't execute.\r\n- (**boolean**: keep unspent, default: true) - If transaction has unspent output, exclude from removal.\r\n- (**list of txid**: excluded transactions) - List of transactions that should be not removed.\r\n- (**boolean**: error if excluded txid not found, default: true) - If excluded txid not found, don't continue.",
      "user": {
        "login": "da2ce7",
        "id": 691439,
        "node_id": "MDQ6VXNlcjY5MTQzOQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/691439?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/da2ce7",
        "html_url": "https://github.com/da2ce7",
        "followers_url": "https://api.github.com/users/da2ce7/followers",
        "following_url": "https://api.github.com/users/da2ce7/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/da2ce7/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/da2ce7/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/da2ce7/subscriptions",
        "organizations_url": "https://api.github.com/users/da2ce7/orgs",
        "repos_url": "https://api.github.com/users/da2ce7/repos",
        "events_url": "https://api.github.com/users/da2ce7/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/da2ce7/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-269217068",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9409"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-02-09T22:47:29Z",
      "updated_at": "2017-02-09T22:47:29Z",
      "source": {
        "issue": {
          "id": 199236636,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTAwNDg3NjIx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9483",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9483/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9483/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9483/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/9483",
          "number": 9483,
          "state": "closed",
          "state_reason": null,
          "title": "Complete hybrid full block SPV mode",
          "body": "This is the complete patch-set for the **hybrid full block SPV mode**.\r\n\r\nIf one enables the SPV mode with `-spv=1` it does...\r\n* ...first sync all headers (no block downloads during that phase)\r\n* ...requests and persist all blocks that are relevant for the wallet (down to the dept of the older wallet key)\r\n* ...scan the block for relevant transactions and flag them with `validated = false` (visible in `listtransactions` etc).\r\n* ... continue with IBD (initial block download) after all wallet relevant blocks have been processed\r\n\r\nPure full block SPV mode is possible by setting `-autorequestblocks=0`, in that mode, no blocks for validating the chain will be downloaded, resulting in a SPV only mode.\r\n\r\nFor better testing, this PR also includes a bump to 0.0005 for the default fallback fee.\r\n\r\nIncluding all required GUI changes and RPC tests:\r\n\r\nScreenshots:\r\n\r\n<img width=\"962\" alt=\"bildschirmfoto 2017-01-06 um 17 21 24\" src=\"https://cloud.githubusercontent.com/assets/178464/21725297/1a101eae-d438-11e6-91c6-04eca0f0a553.png\">\r\n\r\n\r\n![untitled-1](https://cloud.githubusercontent.com/assets/178464/21725116/4fe62b78-d437-11e6-8f1e-80ba02405a64.png)\r\n\r\n<img width=\"732\" alt=\"bildschirmfoto 2017-01-06 um 17 34 09\" src=\"https://cloud.githubusercontent.com/assets/178464/21725281/09088916-d438-11e6-8bf3-390e62ea2648.png\">\r\n\r\n\r\n![untitled-2](https://cloud.githubusercontent.com/assets/178464/21725151/727ec398-d437-11e6-851b-8577df1b6a15.png)\r\n",
          "user": {
            "login": "jonasschnelli",
            "id": 178464,
            "node_id": "MDQ6VXNlcjE3ODQ2NA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/jonasschnelli",
            "html_url": "https://github.com/jonasschnelli",
            "followers_url": "https://api.github.com/users/jonasschnelli/followers",
            "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
            "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
            "repos_url": "https://api.github.com/users/jonasschnelli/repos",
            "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135946,
              "node_id": "MDU6TGFiZWwxMzU5NDY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
              "name": "GUI",
              "color": "02d7e1",
              "default": false
            },
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 749416508,
              "node_id": "MDU6TGFiZWw3NDk0MTY1MDg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Up%20for%20grabs",
              "name": "Up for grabs",
              "color": "99a810",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 33,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/9483",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/9483",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/9483.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/9483.patch"
          },
          "closed_at": "2018-12-03T16:54:25Z",
          "created_at": "2017-01-06T16:44:43Z",
          "updated_at": "2021-12-16T14:54:35Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 296673878,
      "node_id": "MDEyOklzc3VlQ29tbWVudDI5NjY3Mzg3OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/296673878",
      "actor": {
        "login": "praxeology-guy",
        "id": 25991988,
        "node_id": "MDQ6VXNlcjI1OTkxOTg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/25991988?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/praxeology-guy",
        "html_url": "https://github.com/praxeology-guy",
        "followers_url": "https://api.github.com/users/praxeology-guy/followers",
        "following_url": "https://api.github.com/users/praxeology-guy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/praxeology-guy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/praxeology-guy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/praxeology-guy/subscriptions",
        "organizations_url": "https://api.github.com/users/praxeology-guy/orgs",
        "repos_url": "https://api.github.com/users/praxeology-guy/repos",
        "events_url": "https://api.github.com/users/praxeology-guy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/praxeology-guy/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-04-24T13:48:41Z",
      "updated_at": "2017-04-24T13:48:41Z",
      "author_association": "NONE",
      "body": "Here is a proposed data structure that can handle working on utxo set data and works well with ryanofsky's hybrid full/spv mode:\r\n[https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-April/014230.html](https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2017-April/014230.html)\r\n\r\nTo keep the historical data pruned, prune ranges would need to be stored in the wallet meta data as da2ce7 proposed.",
      "user": {
        "login": "praxeology-guy",
        "id": 25991988,
        "node_id": "MDQ6VXNlcjI1OTkxOTg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/25991988?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/praxeology-guy",
        "html_url": "https://github.com/praxeology-guy",
        "followers_url": "https://api.github.com/users/praxeology-guy/followers",
        "following_url": "https://api.github.com/users/praxeology-guy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/praxeology-guy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/praxeology-guy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/praxeology-guy/subscriptions",
        "organizations_url": "https://api.github.com/users/praxeology-guy/orgs",
        "repos_url": "https://api.github.com/users/praxeology-guy/repos",
        "events_url": "https://api.github.com/users/praxeology-guy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/praxeology-guy/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-296673878",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9409"
    },
    {
      "event": "commented",
      "id": 352001876,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjAwMTg3Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352001876",
      "actor": {
        "login": "frankforte",
        "id": 898430,
        "node_id": "MDQ6VXNlcjg5ODQzMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/898430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/frankforte",
        "html_url": "https://github.com/frankforte",
        "followers_url": "https://api.github.com/users/frankforte/followers",
        "following_url": "https://api.github.com/users/frankforte/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/frankforte/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/frankforte/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/frankforte/subscriptions",
        "organizations_url": "https://api.github.com/users/frankforte/orgs",
        "repos_url": "https://api.github.com/users/frankforte/repos",
        "events_url": "https://api.github.com/users/frankforte/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/frankforte/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-15T13:09:21Z",
      "updated_at": "2017-12-15T13:09:21Z",
      "author_association": "NONE",
      "body": "After a rescan, is the wallet meta data updated with the last scanned block?  This way the next time that same wallet is imported, it can continue the scan from that block, rather than from the beginning?\r\nSorry if I am misunderstanding how scans work.",
      "user": {
        "login": "frankforte",
        "id": 898430,
        "node_id": "MDQ6VXNlcjg5ODQzMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/898430?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/frankforte",
        "html_url": "https://github.com/frankforte",
        "followers_url": "https://api.github.com/users/frankforte/followers",
        "following_url": "https://api.github.com/users/frankforte/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/frankforte/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/frankforte/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/frankforte/subscriptions",
        "organizations_url": "https://api.github.com/users/frankforte/orgs",
        "repos_url": "https://api.github.com/users/frankforte/repos",
        "events_url": "https://api.github.com/users/frankforte/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/frankforte/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-352001876",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9409"
    },
    {
      "event": "commented",
      "id": 352008028,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjAwODAyOA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352008028",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-15T13:39:49Z",
      "updated_at": "2017-12-15T13:39:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "> After a rescan, is the wallet meta data updated with the last scanned block?\r\n\r\nYes, wallet saves the location of the last block it has data from (see https://github.com/bitcoin/bitcoin/blob/df7181952436a90a7f300f2b673321e2ac92ef56/src/wallet/walletdb.cpp#L116).\r\n\r\nWhen the wallet is running it will continually receive blocks from the network, and scan them for thansactions and update the last block. If it gets shut down and restarted it will automatically rescan starting from the last block.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/9409#issuecomment-352008028",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/9409"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-16T12:58:32Z",
      "updated_at": "2022-09-16T12:58:32Z",
      "source": {
        "issue": {
          "id": 1205670471,
          "node_id": "PR_kwDOABII5842S6wl",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24865",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24865/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24865/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24865/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24865",
          "number": 24865,
          "state": "closed",
          "state_reason": null,
          "title": "rpc: Enable wallet import on pruned nodes and add test",
          "body": "Reopens #16037 \r\n\r\nI have rebased the PR, addressed the comments of the original PR and added a functional test.\r\n\r\n> Before this change importwallet fails if any block is pruned. This PR makes it possible to importwallet if all required blocks aren't pruned. This is possible because the dump format includes key timestamps.\r\n\r\nFor reviewers: \r\n`python test/functional/wallet_pruning.py --nocleanup` will generate a large blockchain (~700MB) that can be used to manually test wallet imports on a pruned node. Node0 is not pruned, while node1 is.",
          "user": {
            "login": "aureleoules",
            "id": 22493292,
            "node_id": "MDQ6VXNlcjIyNDkzMjky",
            "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/aureleoules",
            "html_url": "https://github.com/aureleoules",
            "followers_url": "https://api.github.com/users/aureleoules/followers",
            "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
            "organizations_url": "https://api.github.com/users/aureleoules/orgs",
            "repos_url": "https://api.github.com/users/aureleoules/repos",
            "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/aureleoules/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 26,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24865",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24865",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24865.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24865.patch"
          },
          "closed_at": "2022-12-16T22:31:21Z",
          "created_at": "2022-04-15T15:38:30Z",
          "updated_at": "2023-01-12T11:51:48Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "connected",
      "id": 7403139468,
      "node_id": "COE_lADOABII584LwhDpzwAAAAG5QvGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/7403139468",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-09-16T13:14:25Z"
    },
    {
      "event": "closed",
      "id": 8060275459,
      "node_id": "CE_lADOABII584LwhDpzwAAAAHgbgsD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8060275459",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-16T22:31:22Z"
    }
  ]
}