{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200",
    "id": 1895929433,
    "node_id": "PR_kwDOABII585xAZZZ",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30200",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30200.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30200.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/03300a478771ca1b2495cf2c8c48a5ea4eec3886",
    "number": 30200,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Introduce Mining interface",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Introduce a `Mining` interface for the `getblocktemplate`, `generateblock` and other mining RPCs to use now, and for Stratum v2 to use later.\r\n\r\nSuggested here: https://github.com/bitcoin/bitcoin/pull/29346#issuecomment-2108528652\r\n\r\nThe selection of methods added to the interface is mostly based on what the Template Provider in #29432 uses. It could be expanded further so that `rpc/mining.cpp` no longer needs `EnsureMemPool` and `EnsureChainman`.\r\n\r\nThis PR should be a pure refactor.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      },
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      }
    ],
    "created_at": "2024-05-30T12:34:31Z",
    "updated_at": "2024-06-17T10:20:36Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "3c5565a26484379ffa168a8f3556b8c170a08600",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2024/05/miner-interface",
      "ref": "2024/05/miner-interface",
      "sha": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 239903,
        "default_branch": "sv2",
        "open_issues_count": 3,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-17T10:18:04Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2024-06-07T15:16:27Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2c79abc7ad4850e9e3ba32a04c530155cda7f980",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35525,
        "stargazers_count": 76969,
        "watchers_count": 76969,
        "size": 261670,
        "default_branch": "master",
        "open_issues_count": 687,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-06-17T10:18:07Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-06-17T10:09:16Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 222,
    "deletions": 51,
    "changed_files": 20,
    "commits": 9,
    "review_comments": 27,
    "comments": 12
  },
  "events": [
    {
      "event": "commented",
      "id": 2139458980,
      "node_id": "IC_kwDOABII585_hY2k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2139458980",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T12:34:34Z",
      "updated_at": "2024-06-17T10:18:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30200).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2140862734), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2116792265) |\n| Stale ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2116692613), [tdb3](https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2120845152) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28843](https://github.com/bitcoin/bitcoin/pull/28843) ([refactor] Remove BlockAssembler m_mempool member by TheCharlatan)\n* [#10102](https://github.com/bitcoin/bitcoin/pull/10102) (Multiprocess bitcoin by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2139458980",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "commented",
      "id": 2139459750,
      "node_id": "IC_kwDOABII585_hZCm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2139459750",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T12:35:03Z",
      "updated_at": "2024-05-30T12:35:12Z",
      "author_association": "MEMBER",
      "body": "The first commit is all the boilerplate plus a single method `isTestChain()` that's used by the `getblocktemplate` RPC.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2139459750",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T12:35:28Z",
      "updated_at": "2024-05-30T12:35:28Z",
      "source": {
        "issue": {
          "id": 2105856059,
          "node_id": "PR_kwDOABII585lWGHe",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29346/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29346",
          "number": 29346,
          "state": "open",
          "state_reason": null,
          "title": "Stratum v2 Noise Protocol",
          "body": "Parent PR #29432 \r\n\r\nThis is the first part of the Stratum v2 Template Provider change that can be a standalone pull request.\r\n\r\nThe Noise Protocol Framework is defined here: https://noiseprotocol.org/noise.html\r\n\r\nIt's quite similar to BIP324. The main differences are explained here, including why Stratum v2 can't use BIP234 (yet): https://delvingbitcoin.org/t/stratum-v2-noise-protocol-bip324-nuggets/413\r\n\r\nThe implementation is based on revision 38, 2018-07-11 (most recent at the time of writing).\r\n\r\nThe Stratum v2 spec defines the specific choice of ciphers: https://github.com/stratum-mining/sv2-spec/blob/main/04-Protocol-Security.md\r\n\r\nThis protocol has been implemented in the Stratum Reference Implementation (SRI, using [rust-bitcoin](https://github.com/rust-bitcoin/rust-bitcoin)). https://github.com/stratum-mining/stratum\r\n\r\nIt has also been (independently) implemented in BraiinsOS. This part is currently not open source, and it's behind on some recent changes.\r\n\r\nThe classes in `sv2_noise.h` attempt to stay close to the paper, whereas the test and fuzzer code borrow heavily from BIP324.\r\n\r\nIt's ready for review, but not for merge:\r\n\r\n1. The parent PR may need more conceptual review (and perhaps the entire spec, but that would really slow things down)\r\n2. We could decide to not support Noise encryption at all and require users to install separate software for that. Code review of this PR could help inform that decision.\r\n\r\nYou can see this code in action in the parent PR #29432.\r\n\r\nInitial seed corpus: https://github.com/bitcoin-core/qa-assets/pull/169\r\n\r\n---\r\n\r\nThe following spec change is already implemented in this PR and in SRI:\r\n\r\n* The spec is being modified to use EllSwift (instead of regular x-only) for the encoding of public keys and ECDH: https://github.com/stratum-mining/sv2-spec/pull/66",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29346",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29346",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29346.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29346.patch"
          },
          "created_at": "2024-01-29T16:14:50Z",
          "updated_at": "2024-06-12T22:35:28Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12987643549,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMGH7ad",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12987643549",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T15:08:58Z"
    },
    {
      "event": "ready_for_review",
      "id": 12987684427,
      "node_id": "RFRE_lADOABII586KnWy7zwAAAAMGIFZL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12987684427",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T15:10:38Z"
    },
    {
      "event": "commented",
      "id": 2140187315,
      "node_id": "IC_kwDOABII585_kKqz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2140187315",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T16:34:12Z",
      "updated_at": "2024-05-30T16:34:12Z",
      "author_association": "MEMBER",
      "body": "Let me know if I should expand the interface to cover more of `rpc/mining.cpp` or stick to this for now.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2140187315",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "reviewed",
      "id": 2088822400,
      "node_id": "PRR_kwDOABII5858gOaA",
      "url": null,
      "actor": null,
      "commit_id": "f04cf9f75054573c204245f7bb1e6813cce1fed8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2088822400",
      "submitted_at": "2024-05-30T16:36:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "reviewed",
      "id": 2088829216,
      "node_id": "PRR_kwDOABII5858gQEg",
      "url": null,
      "actor": null,
      "commit_id": "b30a8aca5191186f56eb1e9bd8f1a1d899a07039",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2088829216",
      "submitted_at": "2024-05-30T16:40:43Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "commented",
      "id": 2140862734,
      "node_id": "IC_kwDOABII585_mvkO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2140862734",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-30T21:05:18Z",
      "updated_at": "2024-05-30T21:05:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2140862734",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T06:59:28Z",
      "updated_at": "2024-05-31T06:59:28Z",
      "source": {
        "issue": {
          "id": 2029493410,
          "node_id": "PR_kwDOABII585hWvMx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29015/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29015",
          "number": 29015,
          "state": "closed",
          "state_reason": null,
          "title": "kernel: Streamline util library",
          "body": "Remove `fees.h`, `errors.h`, and `spanparsing.h` from the util library. Specifically:\r\n\r\n- Move `Split` functions from `util/spanparsing.h` to `util/string.h`, using `util` namespace for clarity.\r\n- Move remaining spanparsing functions to `script/parsing.h` since they are used for descriptor and miniscript parsing.\r\n- Combine `util/fees.h` and `util/errors.h` into `common/messages.h` so there is a place for simple functions that generate user messages to live, and these functions are not part of the util library.\r\n\r\nMotivation for this change is that the util library is a dependency of the kernel, and we should remove functionality from util that shouldn't be called by kernel code or kernel applications. These changes should also improve code organization and make functions easier to discover. Some of these same moves are (or were) part of #28690, but did not help with code organization, or made it worse, so it is better to move them and clean them up in the same PR so code only has to change one time.\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 6861582155,
              "node_id": "LA_kwDOABII588AAAABmPtvSw",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20CMake%20port",
              "name": "Needs CMake port",
              "description": "",
              "color": "0e8a16",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 35,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29015",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29015",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29015.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29015.patch"
          },
          "closed_at": "2024-06-12T21:13:17Z",
          "created_at": "2023-12-06T22:26:39Z",
          "updated_at": "2024-06-12T21:13:17Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T07:22:57Z",
      "updated_at": "2024-05-31T07:22:57Z",
      "source": {
        "issue": {
          "id": 1987412902,
          "node_id": "PR_kwDOABII585fITQi",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28843",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28843/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28843/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28843/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28843",
          "number": 28843,
          "state": "open",
          "state_reason": null,
          "title": "[refactor] Remove BlockAssembler m_mempool member",
          "body": "Instead, pass the mempool pointer as an argument to CreateNewBlock and pass that on to addPackageTxs. Before, addPackageTxs had access to both the m_mempool member and the passed in mempool, which could be confusing. This was noticed in this PR review: https://github.com/bitcoin/bitcoin/pull/25223#discussion_r898164322.\r\n\r\n",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28843",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28843",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28843.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28843.patch"
          },
          "created_at": "2023-11-10T11:06:22Z",
          "updated_at": "2024-06-15T21:16:56Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-31T23:49:10Z",
      "updated_at": "2024-05-31T23:49:10Z",
      "source": {
        "issue": {
          "id": 2328028595,
          "node_id": "PR_kwDOABII585xIynT",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30214/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/30214",
          "number": 30214,
          "state": "open",
          "state_reason": null,
          "title": "refactor: Improve assumeutxo state representation",
          "body": "This PR contains the first part of #28608, which tries to make assumeutxo code more maintainable, and improve it by not locking `cs_main` for a long time when the snapshot block is connected, and by deleting the snapshot validation chainstate when it is no longer used, instead of waiting until the next restart.\r\n\r\nThe changes in this PR are just refactoring. They make `Chainstate` objects self-contained, so for example, it is possible to determine what blocks to connect to a chainstate without querying `ChainstateManager`, and to determine whether a Chainstate is validated without basing it on inferences like `&cs != &ActiveChainstate()` or `GetAll().size() == 1`.\r\n\r\nThe PR also tries to make assumeutxo terminology less confusing, using \"current chainstate\" to refer to the chainstate targeting the current network tip, and \"historical chainstate\" to refer to the chainstate downloading old blocks and validating the assumeutxo snapshot. It removes uses of the terms \"active chainstate,\" \"usable chainstate,\" \"disabled chainstate,\" \"ibd chainstate,\" and \"snapshot chainstate\" which are confusing for various reasons.",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30214",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/30214",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/30214.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/30214.patch"
          },
          "created_at": "2024-05-31T14:53:10Z",
          "updated_at": "2024-06-10T15:31:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 2096918003,
      "node_id": "PRR_kwDOABII5858_G3z",
      "url": null,
      "actor": null,
      "commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 87ba70a2731951a16432ca2d8d55c62bad87dd41\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2140187315\r\n\r\n> Let me know if I should expand the interface to cover more of `rpc/mining.cpp` or stick to this for now.\r\n\r\nI think it's just important for the interface to be usable for stratum code so is not too tied to node internals. It should be ok for RPC code to go around the interface and not use it for everything.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2096918003",
      "submitted_at": "2024-06-04T17:41:24Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "review_requested",
      "id": 13039893045,
      "node_id": "RRE_lADOABII586KnWy7zwAAAAMJPPo1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13039893045",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-04T17:41:27Z",
      "requested_reviewer": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13078207514,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMLhZwa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078207514",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T09:55:48Z"
    },
    {
      "event": "commented",
      "id": 2154504861,
      "node_id": "IC_kwDOABII586AayKd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2154504861",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T09:57:00Z",
      "updated_at": "2024-06-07T10:54:27Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky thanks for the review! I rebased and changed a few things to address comments, see inline.\r\n\r\nI'll cherry-pick this into #29432 to see if we need anything more.\r\n\r\n---\r\n\r\nSwitched back to draft.\r\n\r\nI need to add `IsInitialBlockDownload`, which was the last thing `Sv2TemplateProvider` still needs `ChainstateManager& m_chainman;` for.\r\n\r\nI also need to be able to pass `BlockAssembler::Options` into `createNewBlock` (in a serialisable way).\r\n\r\nForgot to rename `miner` on `NodeContext`, and `makeMiner` to `makeMining` in `init.h`. \r\n\r\nAdditionally the template provider needs to wait, to see if there's a new tip, with `g_best_block_cv.wait_until`. How would I go about moving that into this interface?",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2154504861",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "mentioned",
      "id": 13078222849,
      "node_id": "MEE_lADOABII586KnWy7zwAAAAMLhdgB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078222849",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T09:57:01Z"
    },
    {
      "event": "subscribed",
      "id": 13078222865,
      "node_id": "SE_lADOABII586KnWy7zwAAAAMLhdgR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078222865",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T09:57:02Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T10:00:52Z",
      "updated_at": "2024-06-07T10:00:52Z",
      "source": {
        "issue": {
          "id": 2134155715,
          "node_id": "PR_kwDOABII585m2Xsr",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29432/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29432",
          "number": 29432,
          "state": "open",
          "state_reason": null,
          "title": "Stratum v2 Template Provider (take 3)",
          "body": "Based on on @Fi3's https://github.com/bitcoin/bitcoin/compare/master...Fi3:bitcoin:PatchTemplates which is based on @ccdle12's #27854. I rebased it and re-wrote the commit history. Compared to #28983 it introduces EllSwift in the handshake and fixes various bugs. I used that opportunity to change the branch name, which makes testing against [SRI](https://github.com/stratum-mining/stratum) slightly easier. There's no conceptual discussion on #28983 so it can be ignored by reviewers.\r\n\r\nSee [docs/stratum-v2.md](https://github.com/Sjors/bitcoin/blob/sv2/doc/stratum-v2.md) for a brief description of Stratum v2 and the role of Bitcoin Core in that system..\r\n\r\n## What to test and review?\r\n\r\nI'll make separate pull requests for parts that are ready for detailed review.\r\n\r\n- [ ] #29346\r\n- [ ] #30200\r\n- [ ] #29295\r\n- [ ] Custom signet mining improvement: #29032\r\n- [ ] Make nested pull-requests easier: #29274\r\n\r\nSee the [testing guide](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md#testing-guide) for various ways to test this PR. This branch is actively used by (testnet) pools, so it should be ready for high level review.\r\n\r\n### Related useful PRs\r\n\r\n- [ ] #30205\r\n\r\n### Related useful issues\r\n\r\n- [ ] #30209\r\n\r\n## Implementation notes\r\n\r\nThere's roughly three layers:\r\n\r\n1. Noise encryption #29346\r\n2. Messages and transport layer\r\n3. The Template Provider\r\n\r\n* the `ci:` commits (#29274) are there to facilitate PR's against this branch, but they are not blocking for Stratum v2\r\n* the commits that move `transport.h` and some other stuff from `node` to `common` are not blocking. But in the longer run I'd like to see process separation between the node and the template provider.\r\n* I will occasionally add commits to _undo_ bug fixes, in order to stay compatible with the SRI `main` branch. Those will get dropped over time and can be ignored. \r\n\r\n## Contributing\r\n\r\nIf you want to help out with any of the issues below, please open a PR to my fork. I will then squash your commits into my own where needed. \r\n\r\n## Things left todo\r\n\r\n### Spec\r\n\r\n- [ ] modify spec to use `ProvideMissingTransactions`? (followup?)\r\n- [ ] pick a good default for `default_coinbase_tx_additional_output_size` (see `getblocktemplate` RPC)\r\n\r\n### Networking\r\n\r\n- [ ] add `-sv2bind` and `-sv2allowip`\r\n- [ ] optional `-sv2cert`\r\n- [ ] drop `Sv2TemplateProvider::SendBuf`, reuse p2p socket handling if possible\r\n- [ ] limit number of connected clients\r\n- [ ] maybe limit (number of) `coinbase_output_max_additional_size`\r\n- [ ] TMP / TODO comments at the top of `sv2_messages.h`\r\n\r\n### Testing\r\n\r\n- [ ] expand sv2_template_provider_tests\r\n- [ ] add transport fuzzer\r\n- [ ] add template provider fuzzer\r\n\r\n### Template generation and updating\r\n\r\n- [ ] group templates with the same `coinbase_tx_additional_output_size`\r\n- [ ] don't generate templates when no client is connected\r\n\r\n### Misc\r\n\r\n- [ ] move / refactor `GetMerklePathForCoinbase` helper (see Future Work in original PR, and https://github.com/stratum-mining/stratum/issues/567)\r\n- [ ] truncate long trace messages\r\n\r\n## Potential followups\r\n\r\n- [ ] implement Noise protocol and mock client in Python, add functional tests (based on `test/sv2_template_provider_tests.cpp`)\r\n- [ ] use process separation, e.g. a `bitcoin-tp` binary, see [multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/design/multiprocess.md?plain=1)\r\n- [ ] make template updates push based, on top of Cluster Mempool, see [docs/stratum-v2.md](https://github.com/Sjors/bitcoin/blob/2023/11/sv2-poll/doc/stratum-v2.md) (for new blocks it's already push based)\r\n- [ ] push empty template for the next block (downstream can ignore or use, https://github.com/stratum-mining/stratum/issues/715)\r\n  - send prevhash for this template as soon as any new block arrives\r\n- [ ] push optimistic template for the next block\r\n  - send prevhash if and only if our template won (i.e. we got a `SubmitSolution` message)",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 17,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29432",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29432",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29432.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29432.patch"
          },
          "created_at": "2024-02-14T11:34:49Z",
          "updated_at": "2024-06-12T22:34:24Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "renamed",
      "id": 13078274580,
      "node_id": "RTE_lADOABII586KnWy7zwAAAAMLhqIU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078274580",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T10:01:08Z",
      "rename": {
        "from": "Introduce Miner interface",
        "to": "Introduce Mining interface"
      }
    },
    {
      "event": "convert_to_draft",
      "id": 13078468506,
      "node_id": "CTDE_lADOABII586KnWy7zwAAAAMLiZea",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13078468506",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T10:16:49Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13081451302,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMLtxsm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13081451302",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T13:57:53Z"
    },
    {
      "event": "commented",
      "id": 2154903353,
      "node_id": "IC_kwDOABII586AcTc5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2154903353",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T13:57:56Z",
      "updated_at": "2024-06-07T13:57:56Z",
      "author_association": "MEMBER",
      "body": "All the above should be fixed now, except for `g_best_block_cv.wait_until` (but that's not blocking).\r\n\r\nThe biggest change is in 914c26bbd4d7e87af4e0d0edf9af69ae76668b7e. It now makes the `options` argument mandatory for `BlockAssembler` constructor, dropping implicit handling of `ArgsManager`. The caller i.e. the `Mining` interface implementation now handles this.\r\n\r\nIn Stratum v2 the pool communicates how many extra bytes it needs for its own outputs (payouts, extra commitments, etc). This needs to be subtracted from what the user set as -blockmaxweight. To achieve that the caller would have to pass in an options object, and not forget to also process `-blockmintxfee` - a mistake I made in #29432.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2154903353",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "commented",
      "id": 2154948888,
      "node_id": "IC_kwDOABII586AcekY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2154948888",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T14:20:29Z",
      "updated_at": "2024-06-07T15:16:57Z",
      "author_association": "MEMBER",
      "body": "You can see the interface in action in https://github.com/bitcoin/bitcoin/pull/29432/commits/5078e51f4ad3c6bd01580d583274dd5faaf01c70, with one additional argument added to `createNewBlock ` in https://github.com/bitcoin/bitcoin/pull/29432/commits/41ac95ea547eef8c79eb8d2e995df8241f53c030\r\n\r\n--- \r\n\r\nOops, 914c26bbd4d7e87af4e0d0edf9af69ae76668b7e broke some tests, e.g. `test/functional/rpc_generate.py` ...",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2154948888",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "ready_for_review",
      "id": 13081793442,
      "node_id": "RFRE_lADOABII586KnWy7zwAAAAMLvFOi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13081793442",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T14:20:30Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13082327651,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMLxHpj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13082327651",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T15:04:10Z"
    },
    {
      "event": "labeled",
      "id": 13082328585,
      "node_id": "LE_lADOABII586KnWy7zwAAAAMLxH4J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13082328585",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T15:04:15Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2155027685,
      "node_id": "IC_kwDOABII586Acxzl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2155027685",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T15:04:18Z",
      "updated_at": "2024-06-07T15:05:11Z",
      "author_association": "MEMBER",
      "body": "The `generateblock` RPC relies on not passing the mempool to `BlockAssembler`, in order to allow manual transaction selection. So I added `bool use_mempool = true` to `createNewBlock`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2155027685",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "unlabeled",
      "id": 13084879056,
      "node_id": "UNLE_lADOABII586KnWy7zwAAAAML62jQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13084879056",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T19:42:31Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-07T21:08:11Z",
      "updated_at": "2024-06-07T21:08:11Z",
      "source": {
        "issue": {
          "id": 2312700303,
          "node_id": "PR_kwDOABII585wUc8Y",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30157",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30157/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30157/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30157/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/30157",
          "number": 30157,
          "state": "open",
          "state_reason": null,
          "title": "Fee Estimation via Fee rate Forecasters",
          "body": "### This PR aims at improving Bitcoin Core fee estimation\r\n\r\n\r\n### The objectives of this improvement are to:\r\n\r\n- Reduce overestimation done by the current `CBlockPolicyEstimator`\r\n- Make the fee estimator aware of the state of the mempool, allowing it to respond to changing conditions immediately.\r\n- Empower node users to be self-sovereign and use their node's estimates, as is now, the majority rely on third parties for fee estimation.\r\n- Simplify the process of adding new fee estimation strategies in the future.\r\n\r\nThe PR creates a new `FeeEstimator` class which is responsible for getting estimates from one or more subscribed `Forcaster`'s.\r\n\r\nA `Forcaster` will register with the `FeeEstimator` as being able to provide estimates, and when an estimate is requested, should return two fee rate estimates (high and low) and a confidence level.\r\n\r\nThe estimator will then take (currently undecided):\r\n1. the lowest estimated rate, or\r\n1. the weighted average of all the estimated rates\r\n\r\n...and return the two 'high' and 'low' estimations to the user.\r\n\r\nThe `FeeEstimator` also owns access to the legacy estimator, accessible via a pointer.\r\n\r\nThis PR deliberately does **not** try to modify existing fee estimation code, but instead uses new modules with cleaner seperation. This will make new code and interfaces much easier to introduce, and also make it easier to, if desired in the future, drop legacy estimation code.\r\n\r\n### Currently, this PR implements two forecasters:\r\n\r\n1. Mempool-based forecaster (`MemPoolForecaster`): It estimates fees simply by generating a block template from the node's mempool and returns the 25th and 50th percentile mining scores as low-priority and high-priority fee estimates, respectively.\r\n1. Last 6 Blocks forecaster (`BlockForecaster`): Uses the transactions from the previous six blocks _which were also seen in the node's mempool_, to make an estimate.\r\n\r\n    It listens to the validation interface notifications for removed mempool transactions, linearizes the transactions using a mini miner, and saves the 25th and 50th percentile mining scores. When estimating fees, it averages the mining scores of the percentiles from the last six mined blocks.\r\n    \r\n    NB. As this **excludes** transactions that never entered the node's mempool, it's likely to undershoot slightly\r\n\r\nThese two forecasters both estimate fees for (1, 2) block confirmation targets, referred to as \"as soon as possible (ASAP)\" fee rate estimates.\r\n\r\nFor both forcasters use of RBF is strongly recommended in order that transactions can be fee-bumped if desired.\r\n\r\n### Next steps:\r\n\r\n- Give some statistics of estimates \"missing the block\" (~percentage of estimates below the 5th percentile mining score of the confirmed block) and \"over paying\" (~percentage of estimates above the 25th 50th and 75th percentiles mining score) \r\n\r\n- Extend the feature to the wallet; currently it's only exposed in an RPC `estimatefee`.\r\n- Update forecasters to return confidence levels in their estimates.\r\n\r\n### Confidence levels\r\n\r\nConfidence levels are determined by heuristics.\r\n\r\nFor the mempool-based forecaster:\r\n\r\n- Suspected high mining score transactions should be confirmed but aren't.\r\n- Most transactions in previously mined blocks were in our node's mempool.\r\n- High mining score mempool transactions are confirmed.\r\n\r\nFor the last 6 blocks forecaster:\r\n\r\n- Presence of empty blocks in the last 6 blocks.\r\n- Most of the last 6 blocks' transactions were seen in the node's mempool or not.\r\n\r\nThe fee estimator  will select the fee rate from the forecasters based on confidence level instead of just taking the lowest fee rate estimate.\r\n\r\n\r\n### How does this fit in with `CBlockPolicyEstimator`?\r\n\r\nThis fee estimator owns the legacy `CBlockPolicyEstimator` and does not change any of its interfaces. The wallet still uses `estimatesmartfee`, and RPCs also access it through the Fee Estimator.\r\nHowever, this will change when we switch to using estimates from `GetFeeEstimateFromForecasters`, which works much better than the `estimatesmartfee` in (1, 2) confirmation target scenarios.\r\n\r\nMoreover, when we have another forecaster that supports confirmation targets beyond (1, 2) and works better than `estimatesmartfee`, we will eventually phase out `CBlockPolicyEstimator` as the new Fee Estimator module makes it easy to do so.\r\n\r\nThis PR addresses two open issues and has been requested by users in the past.\r\n\r\n#27995\r\n#30009\r\n\r\n### FAQ\r\n\r\n1. **Will miners broadcast high fee rate transactions, and then evict them with a conflicting transaction in the next block, trick users of this fee estimator into making transactions with high fees?**\r\n   https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/6?u=ismaelsadeeq\r\n\r\n   This PR addresses this concern by ensuring that the fee estimate does not surge immediately whenever this happens the mempool based forecaster estimate will be higher than last 6 block forecaster estimate. As such the last six blocks forecaster estimate will be returned, preventing users to be victims of this attack.\r\n\r\n2. **In times of high confirmation times or high block space demand, fee estimates tend to rise. If the mempool-based forecaster estimate rises, the fee estimator will fall back to the last six blocks fee estimate, if it's low, will that make transactions constructed with the estimate get stuck in the mempool?**\r\nThe ASAP fee estimate provides an estimate for transactions to confirm in the next one or two blocks. During periods of high confirmation times, fee rates rise due to congestion. Once a block is mined, the mempool clears high mining score transactions, making room for lower fee rate transactions. If congestion recurs and the transaction is time-sensitive, users can safely fee bump assuming it's an RBF-enabled transaction.\r\nIn times of immediate high block demand, if the mempool-based fee estimate surges while the last six blocks fee estimate is low, users can fee bump their transactions if they take longer to confirm. As more blocks are mined, the last six blocks forecaster will adjust and reflect the higher fee rates. When demand decreases, the mempool forecaster will immediately respond to the new conditions by providing a lower fee estimate and the fee estimator will return it instead.\r\n\r\n3. **Currently, getting a block template is expensive. How do you tackle that in the mempool-based forecaster?**\r\nThe forecaster cache the recently generated fee rate estimates and only generate a new block template when the time delta between the recent estimate and the current time exceeds 30 seconds.\r\n\r\n---\r\nThis is a collaborative work with @willcl-ark and a result of collecting insight from other contributors.\r\n",
          "user": {
            "login": "ismaelsadeeq",
            "id": 48946461,
            "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
            "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ismaelsadeeq",
            "html_url": "https://github.com/ismaelsadeeq",
            "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
            "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
            "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
            "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
            "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30157",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/30157",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/30157.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/30157.patch"
          },
          "created_at": "2024-05-23T11:44:09Z",
          "updated_at": "2024-06-11T12:20:29Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 2107880187,
      "node_id": "PRR_kwDOABII5859o7L7",
      "url": null,
      "actor": null,
      "commit_id": "febd3d1c3d41cf6083baf990fb2a3a69cade364a",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK febd3d1c3d41cf6083baf990fb2a3a69cade364a\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2107880187",
      "submitted_at": "2024-06-10T14:45:02Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13104019386,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMND3e6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13104019386",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-10T16:00:29Z"
    },
    {
      "event": "commented",
      "id": 2160080256,
      "node_id": "IC_kwDOABII586AwDWA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2160080256",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T08:14:14Z",
      "updated_at": "2024-06-11T08:14:14Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky do you have any thoughts on this (for this PR or a followup)?\r\n\r\n> Additionally the template provider needs to wait, to see if there's a new tip, with g_best_block_cv.wait_until. How would I go about moving that into this interface?\r\n\r\n",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2160080256",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "mentioned",
      "id": 13112658169,
      "node_id": "MEE_lADOABII586KnWy7zwAAAAMNk0j5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13112658169",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T08:14:15Z"
    },
    {
      "event": "subscribed",
      "id": 13112658186,
      "node_id": "SE_lADOABII586KnWy7zwAAAAMNk0kK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13112658186",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T08:14:16Z"
    },
    {
      "event": "labeled",
      "id": 13113054870,
      "node_id": "LE_lADOABII586KnWy7zwAAAAMNmVaW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13113054870",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T08:42:34Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "labeled",
      "id": 13113057424,
      "node_id": "LE_lADOABII586KnWy7zwAAAAMNmWCQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13113057424",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T08:42:45Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "commented",
      "id": 2160764070,
      "node_id": "IC_kwDOABII586AyqSm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2160764070",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T13:25:39Z",
      "updated_at": "2024-06-11T13:25:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > Additionally the template provider needs to wait, to see if there's a new tip, with g_best_block_cv.wait_until. How would I go about moving that into this interface?\r\n\r\nMaybe the simplest way to do it would be to have a waitTipChanged() method that just blocks waiting for a new tip, and would be interrupted when the node shuts down or the mining interface is destroyed. If needed, the waiting interface could have more features and accept a timeout or return an object with wait() and cancel() methods.\r\n\r\nAnother alternative would be to provide a callback interface instead of a waiting interface like interfaces::Node:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/0fbb8043ce0d6a931d5ce4bc877b6b596976a908/src/interfaces/node.h#L256-L259",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2160764070",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-12T05:50:40Z",
      "updated_at": "2024-06-12T05:50:40Z",
      "source": {
        "issue": {
          "id": 217385623,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTEyODQ2NDMx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/10102",
          "number": 10102,
          "state": "open",
          "state_reason": null,
          "title": "Multiprocess bitcoin",
          "body": "**This is a draft PR because it is based on #29409.** The non-base commits are:\r\n\r\n- [`b031746518c8` doc: multiprocess documentation improvements](https://github.com/bitcoin/bitcoin/pull/10102/commits/b031746518c885c8bd390566a158035393d521c0)\r\n- [`a491cea18ee6` build: Suppress warnings from boost and capnproto in multiprocess code](https://github.com/bitcoin/bitcoin/pull/10102/commits/a491cea18ee63e514359a5ba699e8cc159664efc)\r\n- [`cbe853506ccf` test: Increase feature_block.py and feature_taproot.py timeouts](https://github.com/bitcoin/bitcoin/pull/10102/commits/cbe853506ccfd434a07be76240997f5ee4fd37e9)\r\n- [`5e00588e5385` test: Fix multiprocess test for unclean shutdown on kill](https://github.com/bitcoin/bitcoin/pull/10102/commits/5e00588e538501516d9886e1663efd5b96302246)\r\n- [`3e6c61fdc283` depends: Update libmultiprocess library](https://github.com/bitcoin/bitcoin/pull/10102/commits/3e6c61fdc2839bdb74563538aaf0a5e7d0e07ea3)\r\n- [`93059c379b7f` util: Add util::Result workaround to be compatible with libmultiprocess](https://github.com/bitcoin/bitcoin/pull/10102/commits/93059c379b7ffc3706ebbcaf8a527b1d80134b7c)\r\n- [`657ad6ac59e4` multiprocess: Add capnp serialization code for bitcoin types](https://github.com/bitcoin/bitcoin/pull/10102/commits/657ad6ac59e4b589bf4d2c1f1c57c12d611423b4)\r\n- [`ec5717b2a417` multiprocess: Add capnp wrapper for Wallet interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/ec5717b2a417f7aa83b79e1de163447f07cdd141)\r\n- [`e20dc1746b78` multiprocess: Add capnp wrapper for Node interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/e20dc1746b78a661bff5f9ed459333d197fa81c3)\r\n- [`115c550d7cfa` multiprocess: Make bitcoin-gui spawn a bitcoin-node process](https://github.com/bitcoin/bitcoin/pull/10102/commits/115c550d7cfaf3bb218ff8a55babf344728c4f0e)\r\n- [`312d8de5fd35` multiprocess: Make bitcoin-node spawn a bitcoin-wallet process](https://github.com/bitcoin/bitcoin/pull/10102/commits/312d8de5fd358f6468435d4ca445990e94746222)\r\n- [`9154fcef3574` multiprocess: Add debug.log .wallet/.gui suffixes](https://github.com/bitcoin/bitcoin/pull/10102/commits/9154fcef3574cef0724c3481135fb6a75da894ae)\r\n- [`4a0528bbdcba` doc: Multiprocess misc doc and comment updates](https://github.com/bitcoin/bitcoin/pull/10102/commits/4a0528bbdcbaa26d996d3c4339ed8658947a710e)\r\n- [`c023ffefec05` combine_logs: Handle multiprocess wallet log files](https://github.com/bitcoin/bitcoin/pull/10102/commits/c023ffefec05b94a00997d27179ea06a18edb7ea)\r\n\r\n---\r\n\r\nThis PR adds an `--enable-multiprocess` configure option which builds new `bitcoin-node`, `bitcoin-wallet`, and `bitcoin-gui` executables with relevant functionality isolated into different processes. See [doc/design/multiprocess.md](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/doc/design/multiprocess.md) for usage details and future plans.\r\n\r\nThe change is implemented by adding a new [`Init`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/init.h) interface that spawns new wallet and node subprocesses that can be controlled over a [socketpair](http://man7.org/linux/man-pages/man2/socketpair.2.html) by calling [`Node`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/node.h), [`Wallet`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/wallet.h), and [`ChainClient`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/chain.h) methods. When running with split processes, you can see the IPC messages going back and forth in `-debug=1` output. Followup PR's #19460 and #19461 add `-ipcbind` and `-ipcconnect` options that allow more flexibility in how processes are connected.\r\n\r\nThe IPC protocol used is Cap'n Proto, but this could be swapped out for another protocol. Cap'n Proto types and libraries are only accessed in the [src/ipc/capnp/](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/src/ipc/capnp) directory, and not in any public headers or other parts of bitcoin code.\r\n\r\nSlides from a presentation describing this change are available on [google drive](https://docs.google.com/presentation/d/1AeJ-7gD-dItUgs5yH-HoEzLvXaEWe_2ZiGUUxYIXcws/edit). Demo code used in the presentation was from an older version this PR (tag [ipc.21](https://github.com/ryanofsky/bitcoin/releases/tag/pr%2Fipc.21), [commits](https://github.com/ryanofsky/bitcoin/compare/master...pr/ipc.21)).\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135946,
              "node_id": "MDU6TGFiZWwxMzU5NDY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
              "name": "GUI",
              "color": "02d7e1",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 88,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10102",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/10102",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/10102.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/10102.patch"
          },
          "created_at": "2017-03-27T21:48:26Z",
          "updated_at": "2024-06-14T13:18:59Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 2113260997,
      "node_id": "PRR_kwDOABII58599c3F",
      "url": null,
      "actor": null,
      "commit_id": "4f9c3369a453f7e5f0c12179dd629ee8fc042379",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 4f9c3369a453f7e5f0c12179dd629ee8fc042379. Only changes since last review are: restoring ApplyArgsManOptions function and inconclusive-not-best-prevblk check order, splitting up an internal commit, and improving some commit messages.\r\n",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2113260997",
      "submitted_at": "2024-06-12T14:43:03Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "labeled",
      "id": 13138018514,
      "node_id": "LE_lADOABII586KnWy7zwAAAAMPFkDS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13138018514",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-12T22:26:28Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13148205833,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMPsbMJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13148205833",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-13T14:48:57Z"
    },
    {
      "event": "commented",
      "id": 2165900439,
      "node_id": "IC_kwDOABII586BGQSX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2165900439",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-13T14:49:32Z",
      "updated_at": "2024-06-13T14:49:32Z",
      "author_association": "MEMBER",
      "body": "Thanks for the review, and for the suggestions. I might add that later to this PR or as a followup.\r\n\r\nTrivial rebase after #29015.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2165900439",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "unlabeled",
      "id": 13148780331,
      "node_id": "UNLE_lADOABII586KnWy7zwAAAAMPuncr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13148780331",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-13T15:24:06Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2116692613,
      "node_id": "PRR_kwDOABII585-KiqF",
      "url": null,
      "actor": null,
      "commit_id": "5666af2c6e4924bf8e358ab5121c88d14cb085df",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 5666af2c6e4924bf8e358ab5121c88d14cb085df, just rebased since last review",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2116692613",
      "submitted_at": "2024-06-13T18:59:40Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "reviewed",
      "id": 2116792265,
      "node_id": "PRR_kwDOABII585-K6_J",
      "url": null,
      "actor": null,
      "commit_id": "5666af2c6e4924bf8e358ab5121c88d14cb085df",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2116792265",
      "submitted_at": "2024-06-13T19:57:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "reviewed",
      "id": 2120845152,
      "node_id": "PRR_kwDOABII585-aYdg",
      "url": null,
      "actor": null,
      "commit_id": "5666af2c6e4924bf8e358ab5121c88d14cb085df",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 5666af2c6e4924bf8e358ab5121c88d14cb085df\r\nGreat job laying groundwork for Sv2.\r\n\r\nLeft some comments (mostly nits).  Ran unit and functional tests (passed).\r\n\r\nOther than running unit/functional tests and exercising test networks (e.g. regtest for `generate` calls), any other good ways you'd like to see these changes exercised `getblocktemplate()` is a pretty crucial RPC, so being extra paranoid here could be prudent.\r\n\r\np.s. May want to update the description, since RPC functions beyond `getblocktemplate()` and `gererateblock()` also use the new Mining interface (e.g. `submitblock()`, `generatetodescriptor()`, `generatetoaddress()`, etc.)\r\n\r\n",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#pullrequestreview-2120845152",
      "submitted_at": "2024-06-15T21:18:15Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
    },
    {
      "event": "review_requested",
      "id": 13172209466,
      "node_id": "RRE_lADOABII586KnWy7zwAAAAMRH_c6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13172209466",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-15T21:18:19Z",
      "requested_reviewer": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "commented",
      "id": 2172702822,
      "node_id": "IC_kwDOABII586BgNBm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2172702822",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T08:41:16Z",
      "updated_at": "2024-06-17T10:20:36Z",
      "author_association": "MEMBER",
      "body": "> any other good ways you'd like to see these changes exercised `getblocktemplate()` is a pretty crucial RPC\r\n\r\nYou could test #27433 on top of the changes here. Or try solo CPU mining on a custom signet, e.g. using [pooler/cpuminer](https://github.com/pooler/cpuminer) and then:\r\n\r\n```sh\r\n./minerd -u bitcoin -p bitcoin -o http://127.0.0.1:38332 --coinbase-addr $ADDRESS --no-stratum --algo=sha256d\r\n```\r\n\r\nThe latter requires `signetchallenge=51` and a patch setting `#define GBT_RULES \"[\\\"segwit\\\", \\\"signet\\\"]\"`.\r\n\r\n> update the description\r\n\r\nDone\r\n\r\n---\r\n\r\nPushed an update to add Doxygen comments for functions that take at least one parameter. Also renamed `scriptPubKeyIn` to `script_pub_key`.\r\n\r\nI changed 38315fc9439ec18f3cb21e2c87c1c590dba78ee2 to have `getTipHash()` return an optional. Now that there's only two calls to it, it's not too tedious to (sanity) check for a missing tip.\r\n\r\n\r\nReview [hint](https://github.com/bitcoin/bitcoin/blob/master/doc/productivity.md#diff-the-diffs-with-git-range-diff):\r\n\r\n```sh\r\nPREV=5666af2 N=9 && git range-diff `git merge-base --all HEAD $PREV`...$PREV HEAD~$N...HEAD\r\n```",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#issuecomment-2172702822",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30200"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA1ZTNhM2YyMjVmNjEwOTlmNTkxMGU2NDkwZWUwYzQ4NjE1YTE4NGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/05e3a3f225f61099f5910e6490ee0c48615a184a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/05e3a3f225f61099f5910e6490ee0c48615a184a",
      "tree": {
        "sha": "2d1ffb04bec5214d6eaa6c814a1be49f92cf6115",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2d1ffb04bec5214d6eaa6c814a1be49f92cf6115"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2d1ffb04bec5214d6eaa6c814a1be49f92cf6115\nparent 080a47cb8a8db27328bbdf57aa80cc4b4127a370\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717752164 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1718619106 +0200\n\nIntroduce Mining interface\n\nStart out with a single method isTestChain() that's used by the getblocktemplate RPC.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZwC+IACgkQV/+b28ww\nEAnqpw/9FOqU7Uz4mlZuXw37GQy1/wMjipavEUo/o73VlWAIHLe8ChI/VHZcBBKf\n44wrYNPKBhmUlQj7CZ7z9VUQ4QkpOLNIQkh4OxvgBXmxAfb2bqI05i4UmrT/KooX\nQTuXTH5uYqVxRswBxC5fKgz+UL4omHEdrIc+Lugytd3IvB61giX/qMB+1V7HeG3z\naoZ53B4YfwNnEf6v6KBqBlAMQS7GW5tXhXxhXCA8Wp9d6ATZQbqXpebJQ4b5ZYUY\n9YYqdeUphlg4jqWW9Tqig4kdhTdsB3bGvfYjsAk4c7VhlqEhy2kHaSh6CbVqjLdR\nR3G9fAAs0KpYfJc6h2sn5K+1c5eGiMWHXzrkEDJy1ONIA2QuSiorTpfQxitPJ2Ao\np7ZMoWV+RqX7o3eJhfHo9C8/RaNNPjpMrQUVQQmvZ01Hn/gs5foNmLr1DhQPPu0m\n4FuIBl3aJ862wnJHg8ffMmJYviKOy9KRfGBl8vSdWgxdXKw1hHo0LhRLE0xDgsKa\n9zhWBJp+FXlWLov1wD44tncrGne0CxDrhgOFTi7PMdsU8l8lZLY9SLTmBdckfHOu\nELtmZCXwYNdt8sMj6FfqHKb+sAyMNyVYmMx3PwlLXvHrIoMr6XSYPmzDZEqJO5Q0\nyhrp9HS6ExP55vni42D/AjAyK67gJ10mN/9nRPSPC22Ljg8TFxc=\n=oYKc\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/080a47cb8a8db27328bbdf57aa80cc4b4127a370",
          "sha": "080a47cb8a8db27328bbdf57aa80cc4b4127a370",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/080a47cb8a8db27328bbdf57aa80cc4b4127a370"
        }
      ],
      "message": "Introduce Mining interface\n\nStart out with a single method isTestChain() that's used by the getblocktemplate RPC.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:11:46Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T09:22:44Z"
      },
      "sha": "05e3a3f225f61099f5910e6490ee0c48615a184a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM2MWNiNDg1NWY1Y2EwMGE0OWNiZjMzZTA4NDA5ODNlOTU5MGU1MjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/361cb4855f5ca00a49cbf33e0840983e9590e525",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/361cb4855f5ca00a49cbf33e0840983e9590e525",
      "tree": {
        "sha": "16f66c66c8494ac0dcc6f1bc9dad958e39785e8a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/16f66c66c8494ac0dcc6f1bc9dad958e39785e8a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 16f66c66c8494ac0dcc6f1bc9dad958e39785e8a\nparent 05e3a3f225f61099f5910e6490ee0c48615a184a\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718035093 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1718619106 +0200\n\nrpc: call TestBlockValidity via miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZwC+IACgkQV/+b28ww\nEAlh4w//c/QnmvSwXPxSDUETEPWtn79AJD1NU8lxF7nnlsUKjqnw2TSq7qdffLUy\nYgyKKrB3RYKvLvukFSLzHkTdq4QPYzWM/LbZISgycBFRJkVaB7pZ1K1TBGKl2bhR\nRA++ipGotmJoQCDJREwLrZXOabMxuTTTxdTPaQuZQmA4K9+kcbxkCGzZ0Zf8RwTm\najW7YWXsHZgPME0fZnYMXdjzjULDHAc/e0QfH7booaAaR0UizHeTQqNfxs+y3Hkz\nN6uBecUriZkpnO27XLk0S1wz0K/1XAnId0yK0t1n7sif7RjHPmQe5GtjiehA1dyq\nHw0eHmBIouw2fq8h//MgM7RsTYM+sZZVjMgFOV+SwVT66+FBZ96rkbw7Nvj8En6L\nGsRVGWr2rM3Td4iNIceQTtz5EfH1nqnk7qEy9FlfWP6ENKPyq/0HK575H6u4iGwj\nwoxMRuIG2Rk1xuAMRSccXAjYzPP4yvkfZwqBSnCRSuzCW1arGUP7CH2SDsnkXEgm\nB8j42kCULUaC/vFYn949JL+uE3x90Xo9d8D8vnXBYeDgeHLF8qbHChco3OkFcpKt\nNjdOlRQVP8XvGOGu9CKCARw9vEIMYKZIwElusHvsblWby/x4b0RovYc99WROOyPL\nhFLBWAbM0wPnDMyv4JvWU3ra3Mesn2zAkUvv1wLBHMU3PeFrKZ4=\n=uvge\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/05e3a3f225f61099f5910e6490ee0c48615a184a",
          "sha": "05e3a3f225f61099f5910e6490ee0c48615a184a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/05e3a3f225f61099f5910e6490ee0c48615a184a"
        }
      ],
      "message": "rpc: call TestBlockValidity via miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:11:46Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-10T15:58:13Z"
      },
      "sha": "361cb4855f5ca00a49cbf33e0840983e9590e525"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRkYjAyNzFhZDYwY2M4YWRhZGFmYjNjYmNmNGQ5ZDYyZDY1Y2M4YWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ddb0271ad60cc8adadafb3cbcf4d9d62d65cc8aa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ddb0271ad60cc8adadafb3cbcf4d9d62d65cc8aa",
      "tree": {
        "sha": "e1102f8b3ff0de7085708cf88719f63ec72fa6eb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e1102f8b3ff0de7085708cf88719f63ec72fa6eb"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e1102f8b3ff0de7085708cf88719f63ec72fa6eb\nparent 361cb4855f5ca00a49cbf33e0840983e9590e525\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717077302 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1718619106 +0200\n\nrpc: getblocktemplate getTipHash() via Miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZwC+IACgkQV/+b28ww\nEAlLvhAAlzWHjHvJ+dPyUAHDFlO33xgECHpIovN/jUC9YsEc3YLlf+xK0MQHYtuU\nOkB53MdbNgWBXwyG84/P4aJFEDey1Q99D28xcxp+Brl7u3iHJk4RZFQDcXDw7c3D\nr+LnYsNWcBdD+c2lhBnZSR43i7/zLtneNZnqvmY7HvgiIeJlV3+a5xB8E491DpFf\niLbvHw4vIlcNGOtxuxExFgtoQ+VblURIOXERK5d9gd6lFRtLZAaxzn8OnGSkhRsk\nQnlji/sI/P+T3h1tdLnqmPC7qOq/HeI4jSkpvDxDIiHfII3rxZwkvgF6rSfZyPsZ\ncc/FLD6zcJr5Ls0ZXDbwV7yLFb2DTRFdIolxAZtDHwqR5JOTRu+AMARUmcDTrfG7\nAFwkkgqm9tcNKLZUHVk0B4F8OQRIT1z1W9XzP5cfP6QlMjX68m09JzRUBxF31+kd\nMGECYmrotCfverIphjEtJyaXmPGJcRrBHHtWsWRKpA9lIinIk906ZjIPn7y4Eu2x\nzpVgJQkNAsaX3N1H5jwG+wcKq4M7ER0YuFOlj8/igI2sm8DA6CMwm9WOFwWmiEta\n3QWdoidsjyzVsRiQlvt7fbnP6tspRH296jQjrQnRAkXhYONCBafq9PkQ++cqAUuv\n1/UpQxaS6NeQvi52qBeyqkJstmHQWL0i5rVMrZYt6/zezZlsO+o=\n=pwxj\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/361cb4855f5ca00a49cbf33e0840983e9590e525",
          "sha": "361cb4855f5ca00a49cbf33e0840983e9590e525",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/361cb4855f5ca00a49cbf33e0840983e9590e525"
        }
      ],
      "message": "rpc: getblocktemplate getTipHash() via Miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:11:46Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-05-30T13:55:02Z"
      },
      "sha": "ddb0271ad60cc8adadafb3cbcf4d9d62d65cc8aa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM5MWU5Y2ViMGJiOWFkMDdiZjgyN2FmMjA4YmYwOWUxYTZhOTA4OTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c91e9ceb0bb9ad07bf827af208bf09e1a6a90897",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c91e9ceb0bb9ad07bf827af208bf09e1a6a90897",
      "tree": {
        "sha": "e8d1469854625434464ad8c170b2e8ad63131d08",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e8d1469854625434464ad8c170b2e8ad63131d08"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e8d1469854625434464ad8c170b2e8ad63131d08\nparent ddb0271ad60cc8adadafb3cbcf4d9d62d65cc8aa\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718031813 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1718619107 +0200\n\nrpc: call CreateNewBlock via miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZwC+MACgkQV/+b28ww\nEAmWBA/+OAc6gR/F6yiU8X09ftzWtSqmZSYNtzZ9W2xgcJQGswjD6+vqehr7r7i3\nX3p7u3rMGKmUQjeF1kwmK/9Xu4cidLb1yr7BQMmOcG314m8mLUl/vCxAEQKGiT3Z\nsqOq4Ddnm3xQNwd1DE2LIM3kBce1JUuNGOKxSF8usc7bMF+orDnlIDRmub1KZMGO\n034GQg8qlXDhOBOU/Sfvjx6DRSa0SxogbfNn9Hw8EGtYNHbUVkPW/GcH7Hu0wvwG\nicYYspAtzxKExq+BIALKEV3uTW38a/ezFReVG6llwBy/FE9tItV4wEWGpUiLMCo0\n+7/rob4TiQYBIQ/SDuZsQ9Bk3METHN54hof8SmgzBQ0YQ2CqEUiuwyeMiE8L8MGu\nfJsD2xXuJhXWr7U85aIW7yElGamUeyjAGWri3e6bIX6LgV8uag831FREoZKfx9Ja\nvxVm3vMSD6ayCXvZHd0YkAAWz+mBoHQGkqLDnhl6jUnyryX0otE6OuHAdBviE30d\n3B+qLxw7t6ADtbSTGc+YLi8Hwxwt4T6bVp+M1G5+oyWXT6VMLmQm6G6Sgn/9oGqy\nR5SU1Y1nI5AKemhd/kAo+nemqhZCz7/F0qMYrrXrkjcxvaP3MyZkRzTqlWvpE0tj\nVpWHoHY0xu9BguFV3JH1REyImCI+WBGDKQcabUgbd/Ui1+WsxgI=\n=2iIM\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ddb0271ad60cc8adadafb3cbcf4d9d62d65cc8aa",
          "sha": "ddb0271ad60cc8adadafb3cbcf4d9d62d65cc8aa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ddb0271ad60cc8adadafb3cbcf4d9d62d65cc8aa"
        }
      ],
      "message": "rpc: call CreateNewBlock via miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:11:47Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-10T15:03:33Z"
      },
      "sha": "c91e9ceb0bb9ad07bf827af208bf09e1a6a90897"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU1MzNkODY1MzYxNzU2M2I3MDJlMGNkOWMzMDA5ZThhNjJhNmFiODQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e533d8653617563b702e0cd9c3009e8a62a6ab84",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e533d8653617563b702e0cd9c3009e8a62a6ab84",
      "tree": {
        "sha": "22a61677ac57279185b3e1244a06082cd84c3f41",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/22a61677ac57279185b3e1244a06082cd84c3f41"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 22a61677ac57279185b3e1244a06082cd84c3f41\nparent c91e9ceb0bb9ad07bf827af208bf09e1a6a90897\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718033232 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1718619107 +0200\n\nAlways pass options to BlockAssembler constructor\n\nThis makes the options argument for BlockAssembler constructor mandatory,\ndropping implicit use of ArgsManager. The caller i.e. the Mining\ninterface implementation now handles this.\n\nIn a future Stratum v2 change the Options object needs to be\nmofified after arguments have been processed. Specifically\nthe pool communicates how many extra bytes it needs for\nits own outputs (payouts, extra commitments, etc). This will need\nto be substracted from what the user set as -blockmaxweight.\n\nSuch a change can be implemented in createNewBlock, after\nApplyArgsManOptions.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZwC+MACgkQV/+b28ww\nEAnDxQ//aQL+z1WmIBIMctkDMKagczORCnABp8Ur47iNCbpaUemzixq73Lm/NMQJ\nyd/e0wVRNMnYw9fy+v5e/4T9X1Dkd39jAyZxLmgAeUwNdEXdvQRlWd8rJWkN0rXM\nDa0MYW4EdrSuKhjoJCrkW38P+qdvFQsI+bm9IrL5/XLV9iP2GD2vsqDndIuOrLDX\nvRmF2pGJFEf3peVfrWU21+a4avDgG1/mXjJKP4tdDX7HA5bzOr8pPcOJZsZVsJOf\nYiVdnJujSyMFBOZ/TRiFh/VipXzPoFq0nhB9Gu+dHmpVPnXjo9tf9tKk+enX82N0\nrL60AYffpAwjXfpsuKwdL1coM4RYRyu2Qt7Nv+VAsogdBJc1T6YzweQtMH9/eF0z\n9q/Z7BVSZsRIgnkGAvv+oPICfkGrBey5knCycxvi1ANzPSQ8y5IHhlN642v/PTPj\nbWPBXCoZLQ0Nw9BNLm6wj0jfBZWhApnP1RMGr6ENUxuTGtV9ehStEDN60g2EdnlD\nHm4DaVDpMXlhY+2wqX2tpX/hmkFCOtIHPW7e6jx96ZiYwyXcYzA+9e/lfhcIanAq\ntSheiI2anfrhCmjMr6qwzkiQFkEUPEiTwlhPkdA0B2Y2EjPydz5S6V9/Wb0OXTWC\n9cKUHv+CgvGwz/WF9coSEl2OkIGMx6jcdetk5Fw+c/uV8Xg+tJ4=\n=idUY\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c91e9ceb0bb9ad07bf827af208bf09e1a6a90897",
          "sha": "c91e9ceb0bb9ad07bf827af208bf09e1a6a90897",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c91e9ceb0bb9ad07bf827af208bf09e1a6a90897"
        }
      ],
      "message": "Always pass options to BlockAssembler constructor\n\nThis makes the options argument for BlockAssembler constructor mandatory,\ndropping implicit use of ArgsManager. The caller i.e. the Mining\ninterface implementation now handles this.\n\nIn a future Stratum v2 change the Options object needs to be\nmofified after arguments have been processed. Specifically\nthe pool communicates how many extra bytes it needs for\nits own outputs (payouts, extra commitments, etc). This will need\nto be substracted from what the user set as -blockmaxweight.\n\nSuch a change can be implemented in createNewBlock, after\nApplyArgsManOptions.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:11:47Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-10T15:27:12Z"
      },
      "sha": "e533d8653617563b702e0cd9c3009e8a62a6ab84"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA4NjY4N2NjMzM2NGIxZTYxMzgxOGJiNDkzNDY5NTdlMzA2MDNlOTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/086687cc3364b1e613818bb49346957e30603e99",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/086687cc3364b1e613818bb49346957e30603e99",
      "tree": {
        "sha": "873649a8313704c05c2dffea0e500f7fcbdd22c7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/873649a8313704c05c2dffea0e500f7fcbdd22c7"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 873649a8313704c05c2dffea0e500f7fcbdd22c7\nparent e533d8653617563b702e0cd9c3009e8a62a6ab84\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717080389 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1718619107 +0200\n\nrpc: getTransactionsUpdated via miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZwC+MACgkQV/+b28ww\nEAlJ3A/9Eua9psEa1IieK8+mMaesxhJkGx3Sv87f77i5rCR41XYEdhqmWJQuIlEo\nbGxrvkU+S5atItcydtW9vrpz05o5mCdee0Sl4Ro9fxlCWYuS3vALWoQN1TOj+Vsc\n2P3Ieal4HnKKPoGcbuEXRIob12gqWhurRes5kUMURHAezm4ya2XNtQzLszt8wng4\nwfI0rc7c+gpEgi0PtDNkwZZym5QMjrtgTdcDRv3Mb5QQLhI76oFDm7jItBhOdHVV\nMJdTx6uEJkQbkKypj55Hkhw2y93TQXA4HnCZQs04y738LWp/4IgGyh88Odx/vW2W\nZxAPg8i9IMAAsour4Z5RmM6Pqnjgm7f+pO5xo6hc7cOx3U/60sJP7WSuAptrMtv5\n5JbqBa14w1Nk52umb7Yd4wH/UyS7WUm/JclGEKxQpk4Fa/SaiojqedmBFJUJXW+v\naFE6qGY8ZafjLZLr8uj20iRbTr3Vo0t1Gi7eKrU5wB4SXgyc0qNrc9vPLUKhv84A\nalq6o/CROcXPDfs1IfZEfuDcW/2msOwtje95+b/co1PSbIAZZKHYplCtyl2iohqu\nHF18MT8xwn66szGGQaSF+kNiDGjgfmT85MrnWPK5PQ1AOV1Qc7CfBS6zOnmaQJ0h\nZbuoxqsJ9lSVZ8QS6GZSpDbTXcpLuTIY/Vk+5r3OdsbHExpzr7w=\n=phT/\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e533d8653617563b702e0cd9c3009e8a62a6ab84",
          "sha": "e533d8653617563b702e0cd9c3009e8a62a6ab84",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e533d8653617563b702e0cd9c3009e8a62a6ab84"
        }
      ],
      "message": "rpc: getTransactionsUpdated via miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:11:47Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-05-30T14:46:29Z"
      },
      "sha": "086687cc3364b1e613818bb49346957e30603e99"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVkZGIzYmM2N2YzMGNkOGFhODAwOGQ5Y2EwNWIzNmZhMjJjNDQwNTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eddb3bc67f30cd8aa8008d9ca05b36fa22c44052",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/eddb3bc67f30cd8aa8008d9ca05b36fa22c44052",
      "tree": {
        "sha": "adbb0d0ba81e171405e797a0fb16359b709e0d48",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/adbb0d0ba81e171405e797a0fb16359b709e0d48"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree adbb0d0ba81e171405e797a0fb16359b709e0d48\nparent 086687cc3364b1e613818bb49346957e30603e99\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717081619 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1718619107 +0200\n\nrpc: call processNewBlock via miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZwC+MACgkQV/+b28ww\nEAkAuhAAmmQn0mA9nWz7A9jr/r/o1ov1Ikz/MVIOaLUKTM8b2Tlo0LSHvk+04RVR\n2nbnfYs3wo9FRKKfiXAkl6dY80BbAIsJzKiTs0lfbx/Ou2EpCQPUd0v5yETSF0E4\nTOncFYXUmDMqptR3uh0LP+WtIfLQi79KbDPBOsiQ8tFFbM/jRbPNstXFHRByttgY\nddiq2lHgm//c57C6TvOAtiuXSWe+R080E0zdy/DYZk9SKM0tbKCbSBfCkFvuypkv\nz/2qD9ZB9MwAw2ERrO7t+tGWu5KjLunKhLkfv0Q/xjstlp5mFDBrtvkssa3t58gR\nTnscUQr4FYgan/zsQ587oR3faJBtnPTag0iZiU/eJu9r//K4bSCjIWqQsHSv3DWz\nVn1XoRYG/MZ9vuavYGsn081WStokBM/3qq7TfEKhJC1MpL2nsU19G8jmdDNjBoXR\nTx9pb2wwSFtjSrWqYa79BjHBleDs515p5sJxIMvu8+fU2s2yR+xWmUmKnalSOaKq\njbeNPWjEWjr7EDMyMqrRb700HmUD/Sj07GwC8yUWkm2VnV2xTbUEvXstSVrVhicQ\nGU1EnjJD7V/Xg6elg917DClmIqIje7nD31kO1BUDtItMYe+kPHyFRkYwg6uRC9oX\n50v4KUHp1dBNNiX82lU/ThWagPM6UXz5i/T2sdbi6hwCyu6wzNA=\n=G0au\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/086687cc3364b1e613818bb49346957e30603e99",
          "sha": "086687cc3364b1e613818bb49346957e30603e99",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/086687cc3364b1e613818bb49346957e30603e99"
        }
      ],
      "message": "rpc: call processNewBlock via miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:11:47Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-05-30T15:06:59Z"
      },
      "sha": "eddb3bc67f30cd8aa8008d9ca05b36fa22c44052"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM4MzE1ZmM5NDM5ZWMxOGYzY2IyMWUyYzg3YzFjNTkwZGJhNzhlZTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/38315fc9439ec18f3cb21e2c87c1c590dba78ee2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/38315fc9439ec18f3cb21e2c87c1c590dba78ee2",
      "tree": {
        "sha": "d1a7aa3fbaac11aa1e9542373801a78a72da9f5e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d1a7aa3fbaac11aa1e9542373801a78a72da9f5e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d1a7aa3fbaac11aa1e9542373801a78a72da9f5e\nparent eddb3bc67f30cd8aa8008d9ca05b36fa22c44052\nauthor Sjors Provoost <sjors@sprovoost.nl> 1717753878 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1718619283 +0200\n\nrpc: minize getTipHash() calls in gbt\n\nSet tip at the start of the function and only update it for a long poll.\n\nAdditionally have getTipHash return an optional, so the\ncaller can explicitly check that a tip exists.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZwDOkACgkQV/+b28ww\nEAl1dQ/6A0JdoXy8qX3AG1DCPptoR0fogSPh3h+qxzdlaCVM/GoufczzJehaKbPJ\nNl4UGUjhk/oHsLgEls73VV9Ty/2k16kGuNYtr8M1UXhClkH+SvKMeqgPOEqaRlR5\nSkSFlvBogBMQS5SFc80DLoDwjN0QUmmAnHZdAPCchMhixJ3/f09JoayI0jRoXY9o\nvqy64719pYYHNVsp2FTENjC4QGm3DYbQGghIX1d6grKIagxsxXMzpIBbR+ydxFEK\nOWKVfa+hkr0zmMYPTgtzA08tsRszAZvOJElZuiGiPPpqklF+7FnOElJwhcXC85fb\nJm+X3A9mfEurmF/aEYnSAl2SWeXlT83WwyU1ItBlGdaE09A/QbCoqVY2SttY4nYt\n6zhAY6DKG7RTOf/yYloLMLD6TdTIwngPbFmz+j3UjOaEsP1fKH7HJn0GtFPueD+p\nJvRZVHVGaj47SMfGmlHBaSYJ+CdyAVsjFh4eXgZWKtUY6lZKEV2UXdxfl0xqZLM2\nDODa1xzqZjdZrrkogw7rPryTrZfilXzGPrCUBlnmKOtHEX85T7vtnLliS+PfP+kf\nWCAfsXk6cuzSsvioxq7p5kJyIONhj1yBq3jtjFO732tm+NeEDpUTFLLYqqIclydW\nBeQra6EpuZ8vWT8xxSqnFLDgJ66i1pr4NJ22KMwz333/Jc2KSV8=\n=OAXF\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eddb3bc67f30cd8aa8008d9ca05b36fa22c44052",
          "sha": "eddb3bc67f30cd8aa8008d9ca05b36fa22c44052",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/eddb3bc67f30cd8aa8008d9ca05b36fa22c44052"
        }
      ],
      "message": "rpc: minize getTipHash() calls in gbt\n\nSet tip at the start of the function and only update it for a long poll.\n\nAdditionally have getTipHash return an optional, so the\ncaller can explicitly check that a tip exists.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:14:43Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-07T09:51:18Z"
      },
      "sha": "38315fc9439ec18f3cb21e2c87c1c590dba78ee2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAzMzAwYTQ3ODc3MWNhMWIyNDk1Y2YyYzhjNDhhNWVhNGVlYzM4ODY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "tree": {
        "sha": "1bdea9b60cd55ed1c038ebeccfff8599fdd85e14",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1bdea9b60cd55ed1c038ebeccfff8599fdd85e14"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1bdea9b60cd55ed1c038ebeccfff8599fdd85e14\nparent 38315fc9439ec18f3cb21e2c87c1c590dba78ee2\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718619243 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1718619370 +0200\n\nrpc: call IsInitialBlockDownload via miner interface\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmZwDOoACgkQV/+b28ww\nEAkj3BAAlcGo2GpT+gYzb32/scVt2B9xNj8LrCtSaHT1LPjzxOXymTo8wrsBCIfa\nmOZtXYwBK35X0qskoqVzE2BAa6nz7GnlzDCmv6NGgoTQFK1npGZ5I+X2tQhZyxdD\nlQzBI8f5jhwWC1dXe1qUKCjwuZxVL/BOS34FPdb/FBOq9e1bMFvxm6EkzWmKNWZy\nk37tALowiDHr3ozSAxpfxyCGRwXt/ykHa02SC2OiTv4g000QACpYcGGy4lcgwcDx\nyKvT8lrjXXApCHzPxQamXFJ5SV9+fiqZ4Vec4j2I9Ixl07Fd7n9TA8vdPbdG9CRG\nwGXMl1zXK4hUzbQQ+VCnQgfO8y2YWUJtAQVnh4yuOGs51Ua4J3CfN2GvI90L8njw\niFBNfq8SEo/vYn23uy9kBGaBmcQXbqTPXNFKcUSPj67Cgszil78CdeaHuV0mRX1S\nrGU9n2Hrn1oe6QFa7WbA/mG2kbkG5y0D9RS9Jox/l1Y/zo8Yq61y5CVElMVYvC1y\noosliFaxi/wNzWJLvtGeEDpJJf+i/1LBNRpWO9yE/qm+FWgFziozM7PIRoh1HLYQ\nuMscGY8e8wyTh3WUepsikn6A710sqNXqQaLrnIfdTDvzE/bckHCqB070nBSJ1GO/\nHm+y+SyY6FZZrOAO68nFbqWq4fXekbfbCUxIn1FHLYzp5ZuPyN0=\n=eHuk\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/38315fc9439ec18f3cb21e2c87c1c590dba78ee2",
          "sha": "38315fc9439ec18f3cb21e2c87c1c590dba78ee2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/38315fc9439ec18f3cb21e2c87c1c590dba78ee2"
        }
      ],
      "message": "rpc: call IsInitialBlockDownload via miner interface",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:16:10Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-17T10:14:03Z"
      },
      "sha": "03300a478771ca1b2495cf2c8c48a5ea4eec3886"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13183415769,
      "node_id": "HRFPE_lADOABII586KnWy7zwAAAAMRyvXZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13183415769",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-17T10:18:06Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1621067334",
      "pull_request_review_id": 2088822400,
      "id": 1621067334,
      "node_id": "PRRC_kwDOABII585gn4ZG",
      "diff_hunk": "@@ -854,6 +856,13 @@ class MinerImpl : public Miner\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, chainman().ActiveChain().Tip(), /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& scriptPubKeyIn) override\n+    {\n+        LOCK(::cs_main);\n+        // TODO pass mempool sanely\n+        return BlockAssembler{chainman().ActiveChainstate(), &*(context()->mempool)}.CreateNewBlock(scriptPubKeyIn);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "f04cf9f75054573c204245f7bb1e6813cce1fed8",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "f04cf9f75054573c204245f7bb1e6813cce1fed8: I guess I should change the `BlockAssembler` constructor",
      "created_at": "2024-05-30T16:36:58Z",
      "updated_at": "2024-05-30T16:36:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1621067334",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1621067334"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 863,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1621071328",
      "pull_request_review_id": 2088829216,
      "id": 1621071328,
      "node_id": "PRRC_kwDOABII585gn5Xg",
      "diff_hunk": "@@ -31,6 +34,7 @@ ChainstateManager& EnsureAnyChainman(const std::any& context);\n CBlockPolicyEstimator& EnsureFeeEstimator(const node::NodeContext& node);\n CBlockPolicyEstimator& EnsureAnyFeeEstimator(const std::any& context);\n CConnman& EnsureConnman(const node::NodeContext& node);\n+interfaces::Miner& EnsureMiner(const node::NodeContext& node);",
      "path": "src/rpc/server_util.h",
      "position": null,
      "original_position": 14,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "b30a8aca5191186f56eb1e9bd8f1a1d899a07039",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "@ryanofsky I'm not sure what the design philophy is behind `Ensure` and `EnsureAny`. The other methods here return more low level objects.\r\n\r\nPerhaps related to what you said in https://github.com/bitcoin/bitcoin/pull/29346#issuecomment-2110376536:\r\n\r\n> I think of \"Context\" as being a passive container for state instead of an object you would call methods on. The top level interfaces like `interfaces::Chain` `interface::Node` `interfaces::Wallet` are actually stateless themselves, and only point to state stored in other places. (The idea is to let interface instances be created and destroyed freely, since with multiprocess support new processes can connect and create interface pointers that get destroyed on disconnection, and the state of the node shouldn't be affected too much from connections and disconnections. Anyway, the mining interface could follow this pattern.)",
      "created_at": "2024-05-30T16:40:43Z",
      "updated_at": "2024-05-30T16:41:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1621071328",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1621071328"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626320289",
      "pull_request_review_id": 2096918003,
      "id": 1626320289,
      "node_id": "PRRC_kwDOABII585g762h",
      "diff_hunk": "@@ -31,6 +34,7 @@ ChainstateManager& EnsureAnyChainman(const std::any& context);\n CBlockPolicyEstimator& EnsureFeeEstimator(const node::NodeContext& node);\n CBlockPolicyEstimator& EnsureAnyFeeEstimator(const std::any& context);\n CConnman& EnsureConnman(const node::NodeContext& node);\n+interfaces::Miner& EnsureMiner(const node::NodeContext& node);",
      "path": "src/rpc/server_util.h",
      "position": null,
      "original_position": 14,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "b30a8aca5191186f56eb1e9bd8f1a1d899a07039",
      "in_reply_to_id": 1621071328,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1621071328\r\n\r\nIn commit \"Introduce Miner interface\" (b30a8aca5191186f56eb1e9bd8f1a1d899a07039)\r\n\r\n> @ryanofsky I'm not sure what the design philophy is behind `Ensure` and `EnsureAny`. The other methods here return more low level objects.\r\n\r\nThis looks good to me. Ensure functions are just supposed to make it possible to access node/wallet state from RPCs in a type-safe way. There are similar functions for the wallet in src/wallet/rpc/util.h.\r\n\r\nIt is true that existing RPC methods just call node and wallet functions directly, instead of going through interface classes like the GUI does, because there hasn't been a need for preventing RPC methods from accessing node or wallet internals.\r\n\r\nBut it would be nice if we could prevent Stratum code from accessing node internals, so having a mining interface seems useful, and having the mining RPCs use the interface is a nice way to test it and make sure it is full-featured.",
      "created_at": "2024-06-04T16:43:01Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626320289",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626320289"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 37,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626328774",
      "pull_request_review_id": 2096918003,
      "id": 1626328774,
      "node_id": "PRRC_kwDOABII585g787G",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INTERFACES_MINER_H\n+#define BITCOIN_INTERFACES_MINER_H\n+\n+namespace node {\n+struct CBlockTemplate;\n+struct NodeContext;\n+} // namespace node\n+\n+class CBlockIndex;\n+class BlockValidationState;\n+class CBlockIndex;\n+\n+namespace interfaces {\n+\n+//! Interface giving clients (RPC, Stratum v2 Template Provider in the future)\n+//! ability to create block templates.\n+\n+class Miner\n+{\n+public:\n+    virtual ~Miner() {}\n+\n+    /** If this chain is exclusively used for testing */\n+    virtual bool isTestChain() = 0;\n+\n+    //! Returns the index entry for the tip of this chain, or nullptr if none.\n+    virtual CBlockIndex* getTip() = 0;",
      "path": "src/interfaces/miner.h",
      "position": null,
      "original_position": 31,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: getblocktemplate getTip() via Miner interface\" (d5b354ed93266d76ab9e2dd2af9c9b611583a1ee)\r\n\r\nIt looks like all the other `Miner` parameters and return values are serializable except this CBlockIndex pointer. \r\n\r\nThis is fine for this PR, but if you wanted to support stratum code running in another process and calling this, you could change this return value to a struct containing whatever information the miner needs to know about the tip (block hash, previous block hash, block time, etc), instead returning of this pointer to a tree of blocks, which can't easily be used from another process.",
      "created_at": "2024-06-04T16:50:24Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626328774",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626328774"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626346904",
      "pull_request_review_id": 2096918003,
      "id": 1626346904,
      "node_id": "PRRC_kwDOABII585g8BWY",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INTERFACES_MINER_H\n+#define BITCOIN_INTERFACES_MINER_H\n+\n+namespace node {\n+struct CBlockTemplate;\n+struct NodeContext;\n+} // namespace node\n+\n+class CBlockIndex;\n+class BlockValidationState;\n+class CBlockIndex;\n+\n+namespace interfaces {\n+\n+//! Interface giving clients (RPC, Stratum v2 Template Provider in the future)\n+//! ability to create block templates.\n+\n+class Miner",
      "path": "src/interfaces/miner.h",
      "position": null,
      "original_position": 22,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"Introduce Miner interface\" (b30a8aca5191186f56eb1e9bd8f1a1d899a07039)\r\n\r\nNot important, but could consider renaming this class.\r\n\r\n- interfaces::Node is an interface used by the gui to control the node\r\n- interfaces::Wallet is an interface used by the gui to control the node\r\n- interface::Chain is an interface used by the wallet and indexes to sync with the chain\r\n\r\ninterfaces::Miner sounds like an interface that would be used to control a miner, which is not really what this is. Maybe interfaces::Mining or interfaces::MiningService would be better.",
      "created_at": "2024-06-04T17:05:24Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626346904",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626346904"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626351637",
      "pull_request_review_id": 2096918003,
      "id": 1626351637,
      "node_id": "PRRC_kwDOABII585g8CgV",
      "diff_hunk": "@@ -694,6 +696,7 @@ static RPCHelpMan getblocktemplate()\n                 throw JSONRPCError(RPC_DESERIALIZATION_ERROR, \"Block decode failed\");\n \n             uint256 hash = block.GetHash();\n+",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "d880aa0ebe374394b2f8c061ebc7d428f899b59b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: call TestBlockValidity via miner interface\" (d880aa0ebe374394b2f8c061ebc7d428f899b59b)\r\n\r\nMaybe unintended whitespace change here",
      "created_at": "2024-06-04T17:09:37Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626351637",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626351637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 699,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626371955",
      "pull_request_review_id": 2096918003,
      "id": 1626371955,
      "node_id": "PRRC_kwDOABII585g8Hdz",
      "diff_hunk": "@@ -761,7 +759,7 @@ static RPCHelpMan getblocktemplate()\n         else\n         {\n             // NOTE: Spec does not specify behaviour for non-string longpollid, but this makes testing easier\n-            hashWatchedChain = active_chain.Tip()->GetBlockHash();\n+            hashWatchedChain = miner.getTip()->GetBlockHash();",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "d5b354ed93266d76ab9e2dd2af9c9b611583a1ee",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: getblocktemplate getTip() via Miner interface\" (d5b354ed93266d76ab9e2dd2af9c9b611583a1ee)\r\n\r\nWould suggest introducing a `CBlockIndex* tip{miner.getTip()};` variable, using it where possible, and updating it as needed instead of calling `miner.getTip()` repeatedly in this function.\r\n\r\nIt seems like the reason it is ok to make multiple getTip() calls is that cs_main is locked for most of this function. But more ideally, this function would not be locking cs_main directly, only calling interface methods which lock cs_main internally. Using a tip variable in this code, instead of just assuming tip cannot change, would get closer to this state.",
      "created_at": "2024-06-04T17:24:56Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626371955",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626371955"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 762,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626379012",
      "pull_request_review_id": 2096918003,
      "id": 1626379012,
      "node_id": "PRRC_kwDOABII585g8JME",
      "diff_hunk": "@@ -854,6 +856,13 @@ class MinerImpl : public Miner\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, chainman().ActiveChain().Tip(), /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& scriptPubKeyIn) override\n+    {\n+        LOCK(::cs_main);\n+        // TODO pass mempool sanely\n+        return BlockAssembler{chainman().ActiveChainstate(), &*(context()->mempool)}.CreateNewBlock(scriptPubKeyIn);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "f04cf9f75054573c204245f7bb1e6813cce1fed8",
      "in_reply_to_id": 1621067334,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1621067334\r\n\r\n> I guess I should change the `BlockAssembler` constructor\r\n\r\nIn commit \"rpc: call CreateNewBlock via miner interface\" (f04cf9f75054573c204245f7bb1e6813cce1fed8)\r\n\r\nI don't actually understand the TODO here. The way the mempool is passed seems ok. You could do mempool.get() instead of &*mempool, but both should be equivalent.",
      "created_at": "2024-06-04T17:30:34Z",
      "updated_at": "2024-06-04T17:41:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1626379012",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1626379012"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 863,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967421",
      "pull_request_review_id": 2104138088,
      "id": 1630967421,
      "node_id": "PRRC_kwDOABII585hNpZ9",
      "diff_hunk": "@@ -761,7 +759,7 @@ static RPCHelpMan getblocktemplate()\n         else\n         {\n             // NOTE: Spec does not specify behaviour for non-string longpollid, but this makes testing easier\n-            hashWatchedChain = active_chain.Tip()->GetBlockHash();\n+            hashWatchedChain = miner.getTip()->GetBlockHash();",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "d5b354ed93266d76ab9e2dd2af9c9b611583a1ee",
      "in_reply_to_id": 1626371955,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I'm now setting `uint256 tip{miner.getTipHash()};` at the top. For long polls it's updated after the wait. See d1be135e568605539fa3932da6e7c5032816825b.",
      "created_at": "2024-06-07T09:56:37Z",
      "updated_at": "2024-06-07T09:56:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1630967421",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967421"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 762,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967487",
      "pull_request_review_id": 2104138185,
      "id": 1630967487,
      "node_id": "PRRC_kwDOABII585hNpa_",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INTERFACES_MINER_H\n+#define BITCOIN_INTERFACES_MINER_H\n+\n+namespace node {\n+struct CBlockTemplate;\n+struct NodeContext;\n+} // namespace node\n+\n+class CBlockIndex;\n+class BlockValidationState;\n+class CBlockIndex;\n+\n+namespace interfaces {\n+\n+//! Interface giving clients (RPC, Stratum v2 Template Provider in the future)\n+//! ability to create block templates.\n+\n+class Miner",
      "path": "src/interfaces/miner.h",
      "position": null,
      "original_position": 22,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "in_reply_to_id": 1626346904,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Renamed to `Mining`",
      "created_at": "2024-06-07T09:56:40Z",
      "updated_at": "2024-06-07T09:56:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1630967487",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967487"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967663",
      "pull_request_review_id": 2104138482,
      "id": 1630967663,
      "node_id": "PRRC_kwDOABII585hNpdv",
      "diff_hunk": "@@ -0,0 +1,66 @@\n+// Copyright (c) 2024 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_INTERFACES_MINER_H\n+#define BITCOIN_INTERFACES_MINER_H\n+\n+namespace node {\n+struct CBlockTemplate;\n+struct NodeContext;\n+} // namespace node\n+\n+class CBlockIndex;\n+class BlockValidationState;\n+class CBlockIndex;\n+\n+namespace interfaces {\n+\n+//! Interface giving clients (RPC, Stratum v2 Template Provider in the future)\n+//! ability to create block templates.\n+\n+class Miner\n+{\n+public:\n+    virtual ~Miner() {}\n+\n+    /** If this chain is exclusively used for testing */\n+    virtual bool isTestChain() = 0;\n+\n+    //! Returns the index entry for the tip of this chain, or nullptr if none.\n+    virtual CBlockIndex* getTip() = 0;",
      "path": "src/interfaces/miner.h",
      "position": null,
      "original_position": 31,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "87ba70a2731951a16432ca2d8d55c62bad87dd41",
      "in_reply_to_id": 1626328774,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I replaced `getTip()` with `getTipHash()`. `Sv2TemplateProvider` doesn't need it, so for now I use it in a few places in `rpc/mining.cpp`, but then fall back to `chainman.m_blockman.LookupBlockIndex(miner.getTipHash())` where we need more info.\r\n\r\nA future refactor could move more of `getblocktemplate` implementation details out of the RPC.",
      "created_at": "2024-06-07T09:56:48Z",
      "updated_at": "2024-06-07T09:56:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1630967663",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967783",
      "pull_request_review_id": 2104138685,
      "id": 1630967783,
      "node_id": "PRRC_kwDOABII585hNpfn",
      "diff_hunk": "@@ -854,6 +856,13 @@ class MinerImpl : public Miner\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, chainman().ActiveChain().Tip(), /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& scriptPubKeyIn) override\n+    {\n+        LOCK(::cs_main);\n+        // TODO pass mempool sanely\n+        return BlockAssembler{chainman().ActiveChainstate(), &*(context()->mempool)}.CreateNewBlock(scriptPubKeyIn);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 24,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "f04cf9f75054573c204245f7bb1e6813cce1fed8",
      "in_reply_to_id": 1621067334,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, replaced it with `get()`.",
      "created_at": "2024-06-07T09:56:55Z",
      "updated_at": "2024-06-07T09:56:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1630967783",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1630967783"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 863,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633296276",
      "pull_request_review_id": 2107880187,
      "id": 1633296276,
      "node_id": "PRRC_kwDOABII585hWh-U",
      "diff_hunk": "@@ -703,12 +706,14 @@ static RPCHelpMan getblocktemplate()\n                 return \"duplicate-inconclusive\";\n             }\n \n+            BlockValidationState state;\n+            miner.testBlockValidity(state, block, /*check_merkle_root=*/true);",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "8589e6c44726d6b5760095d72c37934e4be3315c",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: call TestBlockValidity via miner interface\" (8589e6c44726d6b5760095d72c37934e4be3315c)\r\n\r\nWhy is the `testBlockValidity` check being moved before the block.hashPrevBlock != tip check? The previous ordering seemed more straightforward and consistent with \"TestBlockValidity only supports blocks built on the current Tip\" comment",
      "created_at": "2024-06-10T13:54:43Z",
      "updated_at": "2024-06-10T14:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1633296276",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633296276"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 710,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633297880",
      "pull_request_review_id": 2107880187,
      "id": 1633297880,
      "node_id": "PRRC_kwDOABII585hWiXY",
      "diff_hunk": "@@ -25,6 +26,9 @@ class Mining\n     /** If this chain is exclusively used for testing */\n     virtual bool isTestChain() = 0;\n \n+    //! Returns the hash for the tip of this chain, 0 if none\n+    virtual uint256 getTipHash() = 0;",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 13,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "9c226c5c3818ef157fc50a5f6ecc534a612ac1d0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: getblocktemplate getTip() via Miner interface\" (9c226c5c3818ef157fc50a5f6ecc534a612ac1d0)\r\n\r\nCommit message could be updated since this now called getTipHash",
      "created_at": "2024-06-10T13:55:39Z",
      "updated_at": "2024-06-10T14:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1633297880",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633297880"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633318785",
      "pull_request_review_id": 2107880187,
      "id": 1633318785,
      "node_id": "PRRC_kwDOABII585hWneB",
      "diff_hunk": "@@ -203,9 +202,6 @@ int64_t UpdateTime(CBlockHeader* pblock, const Consensus::Params& consensusParam\n \n /** Update an old GenerateCoinbaseCommitment from CreateNewBlock after the block txs have changed */\n void RegenerateCommitments(CBlock& block, ChainstateManager& chainman);\n-\n-/** Apply -blockmintxfee and -blockmaxweight options from ArgsManager to BlockAssembler options. */\n-void ApplyArgsManOptions(const ArgsManager& gArgs, BlockAssembler::Options& options);",
      "path": "src/node/miner.h",
      "position": null,
      "original_position": 14,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "f375fb9a0dff7ccead80626f4aee853db7799e6f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: call CreateNewBlock via miner interface\" (f375fb9a0dff7ccead80626f4aee853db7799e6f)\r\n\r\nIt might be good to keep this ApplyArgsManOptions function for more consistency with other options parsing code. The node/interfaces.cpp createNewBlock function could call ApplyArgsManOptions instead of parsing options itself. The current approach also seems ok though if you prefer it.",
      "created_at": "2024-06-10T14:08:15Z",
      "updated_at": "2024-06-10T14:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1633318785",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633318785"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 208,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633363110",
      "pull_request_review_id": 2107880187,
      "id": 1633363110,
      "node_id": "PRRC_kwDOABII585hWySm",
      "diff_hunk": "@@ -856,6 +859,20 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, chainman().ActiveChain().Tip(), /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& scriptPubKeyIn, bool use_mempool) override\n+    {\n+        BlockAssembler::Options options;\n+\n+        // Block resource limits\n+        options.nBlockMaxWeight = gArgs.GetIntArg(\"-blockmaxweight\", options.nBlockMaxWeight);\n+        if (const auto blockmintxfee{gArgs.GetArg(\"-blockmintxfee\")}) {\n+            if (const auto parsed{ParseMoney(*blockmintxfee)}) options.blockMinFeeRate = CFeeRate{*parsed};\n+        }",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "f375fb9a0dff7ccead80626f4aee853db7799e6f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"rpc: call CreateNewBlock via miner interface\" (f375fb9a0dff7ccead80626f4aee853db7799e6f)\r\n\r\nI'm not clear how this implementation lines up with the commit description which says \"the pool communicates how many extra bytes it needs for its own outputs (payouts, extra commitments, etc). This needs to be substracted from what the user set as -blockmaxweight.\"\r\n\r\nIs the commit description just saying that this implementation is not complete and it will need to be extended in the future? Would be helpful to clarify.",
      "created_at": "2024-06-10T14:34:50Z",
      "updated_at": "2024-06-10T14:45:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1633363110",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633363110"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": 867,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 870,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633391557",
      "pull_request_review_id": 2108037087,
      "id": 1633391557,
      "node_id": "PRRC_kwDOABII585hW5PF",
      "diff_hunk": "@@ -856,6 +859,20 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, chainman().ActiveChain().Tip(), /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& scriptPubKeyIn, bool use_mempool) override\n+    {\n+        BlockAssembler::Options options;\n+\n+        // Block resource limits\n+        options.nBlockMaxWeight = gArgs.GetIntArg(\"-blockmaxweight\", options.nBlockMaxWeight);\n+        if (const auto blockmintxfee{gArgs.GetArg(\"-blockmintxfee\")}) {\n+            if (const auto parsed{ParseMoney(*blockmintxfee)}) options.blockMinFeeRate = CFeeRate{*parsed};\n+        }",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "f375fb9a0dff7ccead80626f4aee853db7799e6f",
      "in_reply_to_id": 1633363110,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Yes, this is a reference to the future change in sv2. I reworded it in 6b7c8c3e27ae529306d18019e7bd94b4ae5b9a21.",
      "created_at": "2024-06-10T14:52:05Z",
      "updated_at": "2024-06-10T16:01:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1633391557",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633391557"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": 867,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 870,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633492530",
      "pull_request_review_id": 2108202167,
      "id": 1633492530,
      "node_id": "PRRC_kwDOABII585hXR4y",
      "diff_hunk": "@@ -203,9 +202,6 @@ int64_t UpdateTime(CBlockHeader* pblock, const Consensus::Params& consensusParam\n \n /** Update an old GenerateCoinbaseCommitment from CreateNewBlock after the block txs have changed */\n void RegenerateCommitments(CBlock& block, ChainstateManager& chainman);\n-\n-/** Apply -blockmintxfee and -blockmaxweight options from ArgsManager to BlockAssembler options. */\n-void ApplyArgsManOptions(const ArgsManager& gArgs, BlockAssembler::Options& options);",
      "path": "src/node/miner.h",
      "position": null,
      "original_position": 14,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "f375fb9a0dff7ccead80626f4aee853db7799e6f",
      "in_reply_to_id": 1633318785,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I split f375fb9a0dff7ccead80626f4aee853db7799e6f in two parts:\r\n\r\n1. 6d6ddcb759465c7375ff772faa960cf92805468a simply adds and uses the interface\r\n2. 6b7c8c3e27ae529306d18019e7bd94b4ae5b9a21 drops the `BlockAssembler` constructor without `options` argument\r\n\r\nI changed this second commit to keep `ApplyArgsManOptions`.",
      "created_at": "2024-06-10T16:00:46Z",
      "updated_at": "2024-06-10T16:00:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1633492530",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633492530"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 208,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633492626",
      "pull_request_review_id": 2108202322,
      "id": 1633492626,
      "node_id": "PRRC_kwDOABII585hXR6S",
      "diff_hunk": "@@ -25,6 +26,9 @@ class Mining\n     /** If this chain is exclusively used for testing */\n     virtual bool isTestChain() = 0;\n \n+    //! Returns the hash for the tip of this chain, 0 if none\n+    virtual uint256 getTipHash() = 0;",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 13,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "9c226c5c3818ef157fc50a5f6ecc534a612ac1d0",
      "in_reply_to_id": 1633297880,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2024-06-10T16:00:51Z",
      "updated_at": "2024-06-10T16:00:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1633492626",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633492626"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633492703",
      "pull_request_review_id": 2108202457,
      "id": 1633492703,
      "node_id": "PRRC_kwDOABII585hXR7f",
      "diff_hunk": "@@ -703,12 +706,14 @@ static RPCHelpMan getblocktemplate()\n                 return \"duplicate-inconclusive\";\n             }\n \n+            BlockValidationState state;\n+            miner.testBlockValidity(state, block, /*check_merkle_root=*/true);",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 38,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "8589e6c44726d6b5760095d72c37934e4be3315c",
      "in_reply_to_id": 1633296276,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I think that was by accident. Moved it back in 609c9ca052d90d029435e24ec3331ef145c11fcf.",
      "created_at": "2024-06-10T16:00:55Z",
      "updated_at": "2024-06-10T16:01:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1633492703",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1633492703"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 710,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1641433677",
      "pull_request_review_id": 2120845152,
      "id": 1641433677,
      "node_id": "PRRC_kwDOABII585h1kpN",
      "diff_hunk": "@@ -22,6 +25,13 @@ class Mining\n     /** If this chain is exclusively used for testing */\n     virtual bool isTestChain() = 0;\n \n+    /**\n+     * Check a block is completely valid from start to finish.\n+     * Only works on top of our current best block.\n+     * Does not check proof-of-work.\n+     * */\n+    virtual bool testBlockValidity(BlockValidationState& state, const CBlock& block, bool check_merkle_root) = 0;",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 19,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "2833c3ccf6ea0b43c296b5dd4f8e3107697590ff",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:  Since this is an interface, to maximize clarity it might be good to add Doxygen-ey style `@param` and `@returns` statements in the function comment, similar to `processNewBlock()`.\r\nSame for `createNewBlock()`.\r\n\r\nAlso, would it make sense to provide a default value for `check_merkle_root` (e.g. default true)?  Or do we want users of the interface to explicitly state whether or not they want merkle root checking performed?",
      "created_at": "2024-06-15T19:59:22Z",
      "updated_at": "2024-06-15T21:19:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1641433677",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1641433677"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": 28,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1641438112",
      "pull_request_review_id": 2120845152,
      "id": 1641438112,
      "node_id": "PRRC_kwDOABII585h1lug",
      "diff_hunk": "@@ -706,10 +708,11 @@ static RPCHelpMan getblocktemplate()\n \n             CBlockIndex* const pindexPrev = active_chain.Tip();\n             // TestBlockValidity only supports blocks built on the current Tip\n-            if (block.hashPrevBlock != pindexPrev->GetBlockHash())\n+            if (block.hashPrevBlock != pindexPrev->GetBlockHash()) {\n                 return \"inconclusive-not-best-prevblk\";\n+            }\n             BlockValidationState state;\n-            TestBlockValidity(state, chainman.GetParams(), active_chainstate, block, pindexPrev, false, true);\n+            miner.testBlockValidity(state, block, /*check_merkle_root=*/true);",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "2833c3ccf6ea0b43c296b5dd4f8e3107697590ff",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: If a default value for `check_merkle_root` is added to `testBlockValidity()`, this call could be updated as well.",
      "created_at": "2024-06-15T20:17:22Z",
      "updated_at": "2024-06-15T21:18:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1641438112",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1641438112"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 715,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1641440653",
      "pull_request_review_id": 2120845152,
      "id": 1641440653,
      "node_id": "PRRC_kwDOABII585h1mWN",
      "diff_hunk": "@@ -844,6 +844,14 @@ class MinerImpl : public Mining\n         return chainman().GetParams().IsTestChain();\n     }\n \n+    uint256 getTipHash() override\n+    {\n+        LOCK(::cs_main);\n+        CBlockIndex* tip{chainman().ActiveChain().Tip()};\n+        if (!tip) return uint256{0};\n+        return tip->GetBlockHash();",
      "path": "src/node/interfaces.cpp",
      "position": 59,
      "original_position": 9,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "a78bc3ac4f600e656bf839aad9989c8bce51ae71",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Although extraordinarily improbable, is the value of 0 reserved as an invalid hash (maybe I'm forgetting something)? If not, maybe it's worth updating this function to return something like `std::optional<uint256>` instead?",
      "created_at": "2024-06-15T20:29:39Z",
      "updated_at": "2024-06-15T21:18:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1641440653",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1641440653"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 859,
      "original_line": 859,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1641492827",
      "pull_request_review_id": 2120845152,
      "id": 1641492827,
      "node_id": "PRRC_kwDOABII585h1zFb",
      "diff_hunk": "@@ -816,9 +815,10 @@ static RPCHelpMan getblocktemplate()\n \n         // Create new block\n         CScript scriptDummy = CScript() << OP_TRUE;\n-        pblocktemplate = BlockAssembler{active_chainstate, &mempool}.CreateNewBlock(scriptDummy);\n-        if (!pblocktemplate)\n+        pblocktemplate = miner.createNewBlock(scriptDummy);\n+        if (!pblocktemplate) {\n             throw JSONRPCError(RPC_OUT_OF_MEMORY, \"Out of memory\");\n+        }\n \n         // Need to update only after we know CreateNewBlock succeeded",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 70,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "9c7402bba8a6320bbe095e4b585c33a99f02315f",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:  this comment (and the one on 811) still mention `CreateNewBlock` rather than the new `createNewBlock`.  Feel free to ignore unless touching this file for something else.",
      "created_at": "2024-06-15T20:54:42Z",
      "updated_at": "2024-06-15T21:18:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1641492827",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1641492827"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 823,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1642458226",
      "pull_request_review_id": 2122321591,
      "id": 1642458226,
      "node_id": "PRRC_kwDOABII585h5exy",
      "diff_hunk": "@@ -844,6 +844,14 @@ class MinerImpl : public Mining\n         return chainman().GetParams().IsTestChain();\n     }\n \n+    uint256 getTipHash() override\n+    {\n+        LOCK(::cs_main);\n+        CBlockIndex* tip{chainman().ActiveChain().Tip()};\n+        if (!tip) return uint256{0};\n+        return tip->GetBlockHash();",
      "path": "src/node/interfaces.cpp",
      "position": 59,
      "original_position": 9,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "a78bc3ac4f600e656bf839aad9989c8bce51ae71",
      "in_reply_to_id": 1641440653,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`GetBlockHash()`, which was called directly before this commit, has an `assert` that `tip` must exist. So `return uint256{0};` should never happen. An optional does seem more robust though, will look into it.\r\n\r\nUpdate: done",
      "created_at": "2024-06-17T09:00:48Z",
      "updated_at": "2024-06-17T10:18:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1642458226",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1642458226"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 859,
      "original_line": 859,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1642459287",
      "pull_request_review_id": 2122323356,
      "id": 1642459287,
      "node_id": "PRRC_kwDOABII585h5fCX",
      "diff_hunk": "@@ -22,6 +25,13 @@ class Mining\n     /** If this chain is exclusively used for testing */\n     virtual bool isTestChain() = 0;\n \n+    /**\n+     * Check a block is completely valid from start to finish.\n+     * Only works on top of our current best block.\n+     * Does not check proof-of-work.\n+     * */\n+    virtual bool testBlockValidity(BlockValidationState& state, const CBlock& block, bool check_merkle_root) = 0;",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 19,
      "commit_id": "03300a478771ca1b2495cf2c8c48a5ea4eec3886",
      "original_commit_id": "2833c3ccf6ea0b43c296b5dd4f8e3107697590ff",
      "in_reply_to_id": 1641433677,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I added a default `true` to mimic `TestBlockValidity` in `validation.h`.",
      "created_at": "2024-06-17T09:01:43Z",
      "updated_at": "2024-06-17T09:01:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30200#discussion_r1642459287",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1642459287"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30200"
        }
      },
      "start_line": null,
      "original_start_line": 28,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 33,
      "side": "RIGHT"
    }
  ]
}