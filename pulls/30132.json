{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132",
    "id": 1876248708,
    "node_id": "PR_kwDOABII585v1UiE",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30132",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30132.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30132.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30132",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30132/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/133bf46b313d62b662a373a58dd3075391ebeb47",
    "number": 30132,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "indexes: Don't wipe indexes again when continuing a prior reindex",
    "user": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "When restarting `bitcoind` during an ongoing reindex without setting the `-reindex` flag again, the block and coins db is left intact, but any data from the optional indexes is discarded. While not a bug per se, wiping the data again is\r\nwasteful, both in terms of having to write it again,  as well as potentially leading to longer startup times. So keep the  index data instead when continuing a prior reindex.\r\n\r\nAlso includes some smaller code cleanups around the reindexing code.",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      }
    ],
    "created_at": "2024-05-17T20:08:17Z",
    "updated_at": "2024-05-17T20:08:22Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "256f43162c93b05ee246c9f20423b8f697e7e832",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "TheCharlatan:preserveIndexOnRestart",
      "ref": "preserveIndexOnRestart",
      "sha": "133bf46b313d62b662a373a58dd3075391ebeb47",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 94456368,
        "node_id": "MDEwOlJlcG9zaXRvcnk5NDQ1NjM2OA==",
        "name": "bitcoin",
        "full_name": "TheCharlatan/bitcoin",
        "owner": {
          "login": "TheCharlatan",
          "id": 8421793,
          "node_id": "MDQ6VXNlcjg0MjE3OTM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/TheCharlatan",
          "html_url": "https://github.com/TheCharlatan",
          "followers_url": "https://api.github.com/users/TheCharlatan/followers",
          "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
          "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
          "repos_url": "https://api.github.com/users/TheCharlatan/repos",
          "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/TheCharlatan/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/TheCharlatan/bitcoin",
        "archive_url": "https://api.github.com/repos/TheCharlatan/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/TheCharlatan/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/TheCharlatan/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/TheCharlatan/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/TheCharlatan/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/events",
        "forks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/TheCharlatan/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/TheCharlatan/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/TheCharlatan/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/TheCharlatan/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/TheCharlatan/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/TheCharlatan/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/TheCharlatan/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/TheCharlatan/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/TheCharlatan/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:TheCharlatan/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/TheCharlatan/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/TheCharlatan/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/TheCharlatan/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/hooks",
        "svn_url": "https://github.com/TheCharlatan/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 237684,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-05-17T20:25:38Z",
        "created_at": "2017-06-15T16:03:35Z",
        "updated_at": "2024-05-11T08:42:28Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "058af75874ffa2b4064e3d6d30cc50f0ec754ba8",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35412,
        "stargazers_count": 76421,
        "watchers_count": 76421,
        "size": 258605,
        "default_branch": "master",
        "open_issues_count": 683,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-05-17T20:39:29Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-05-17T20:31:57Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30132"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 4,
    "deletions": 17,
    "changed_files": 2,
    "commits": 3,
    "review_comments": 0,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcyODE5ODU3MzFmMGQ5ZmZlNTFlZjM1NjgxOGQwMjRjMzIxOTg4Yjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7281985731f0d9ffe51ef356818d024c321988b8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7281985731f0d9ffe51ef356818d024c321988b8",
      "tree": {
        "sha": "7cf262f8b63c9b2d61d66c1d595a9dc83557ceca",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7cf262f8b63c9b2d61d66c1d595a9dc83557ceca"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7cf262f8b63c9b2d61d66c1d595a9dc83557ceca\nparent b47bd959207e82555f07e028cc2246943d32d4c3\nauthor TheCharlatan <seb.kung@gmail.com> 1715939938 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1715939950 +0200\n\n[refactor] Simplify setting load chainstate reindex option\n\nThe reindex option for ChainstateLoadOptions is currently set in a\nconfusing way. By using the reindex atomic, it is not obvious in which\nscenario it is true or false.\n\nThe atomic is controlled by both the user passing the -reindex option,\nand by reading the reindexing flag from the block tree database in\nLoadBlockIndexDB. In practice this read is done through the chainstate\nmodule's CompleteChainstateInitialization's call to LoadBlockIndex.\nSince this is only done after the reindex option is set already, it does\nnot have an effect on it.\n\nMake this clear by using the reindex option from the blockman opts which\nis only controlled by the user.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmZHMWsACgkQm3m0VpHb\nQXO9RBAAkYFM7SKzQ0t/D8TyRFuCS8/E5v0Kffb5nVvBMLBFjooH0SU5gFi2KZbM\nyQF4S6kYF8SqNW1hqPLTwtxAboDXR0xryl/VTmKTAvPHkIPNEYRRS19FZCssW9P1\ndYXF9c3UWnrXymOmTDkivhHd5UWuiJRbfy6rSe23hQdolx5+v0/Vn4BZg513b1AB\nm23nPNezOByHxOWLItQEKHqjHHoP/oy5AX5gYQkpPe7isCIwhRZSUeWRu+nbiNc8\nLF4Gnqq7cVnlCit7tJu4myq8zJhlXxmm/D5qvD+g0JHGMdDYwY0hKqFWWLGBEnEx\ntQZB2a2Xf/OYfr3U2lIS0S6NVRrw7z/Lr45UnQQPKUDRvOPDn6eQrtkBeLoxkrEi\nmEUM4bqSslBhL39FL1kJ/PTlRr+7LYcSltrryJyhW+gJXmrNgMpaAJbUwleRKZJY\n4WXCvuRAt7hGCPtIookrPvLDEvrtFkckY13lmh9nkGPZdVXu+51MIgdmKLOZaa4A\nu6Q20MxUXBs5J5lnMDmLHFZsEl9zW3nOLopjtBst+D6ezBZacSDitXgJXiQM0sFp\npXMlYZjJ8059N8THBxEShC/ctGlWWVnuwwMLc0COeLy8CzoZsMoBR5jly83yO9J+\npy033EiGmadDoObpPOc0J4vYATwvoZDn1y3HZbuWQyEG0w/zSs4=\n=fN5/\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b47bd959207e82555f07e028cc2246943d32d4c3",
          "sha": "b47bd959207e82555f07e028cc2246943d32d4c3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b47bd959207e82555f07e028cc2246943d32d4c3"
        }
      ],
      "message": "[refactor] Simplify setting load chainstate reindex option\n\nThe reindex option for ChainstateLoadOptions is currently set in a\nconfusing way. By using the reindex atomic, it is not obvious in which\nscenario it is true or false.\n\nThe atomic is controlled by both the user passing the -reindex option,\nand by reading the reindexing flag from the block tree database in\nLoadBlockIndexDB. In practice this read is done through the chainstate\nmodule's CompleteChainstateInitialization's call to LoadBlockIndex.\nSince this is only done after the reindex option is set already, it does\nnot have an effect on it.\n\nMake this clear by using the reindex option from the blockman opts which\nis only controlled by the user.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-17T09:59:10Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-17T09:58:58Z"
      },
      "sha": "7281985731f0d9ffe51ef356818d024c321988b8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ0NzA5YmE1ZWJlYzdmMTljYjhjODBkYjQ1OTJkZmIzZWM3N2VhMjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d4709ba5ebec7f19cb8c80db4592dfb3ec77ea28",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d4709ba5ebec7f19cb8c80db4592dfb3ec77ea28",
      "tree": {
        "sha": "5144088ba4cab4f40df466c3957fa62913147ca0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5144088ba4cab4f40df466c3957fa62913147ca0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 5144088ba4cab4f40df466c3957fa62913147ca0\nparent 7281985731f0d9ffe51ef356818d024c321988b8\nauthor TheCharlatan <seb.kung@gmail.com> 1715963745 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1715963804 +0200\n\nvalidation: Remove needs_init from LoadBlockIndex\n\nIt does not control any actual logic and the log message as well as the\ncomment are obsolete, since no database initialization takes place there\nanymore. Log messages indicating when indexes and chainstate databases\nare loaded exist in other places.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmZHpJ8ACgkQm3m0VpHb\nQXNgJw//Zrb9BxL5ETdmZQvbKK5kJyK/BlViE3Ye2qhy6l4iYKR+8yMboNVpBvRc\nZpt/XqiflQfnEhQUG/s/sUEbi7JCJ4NE4LJJkvLQyr/dt4/cK7fZFtRSRnT4dSDc\nZTAACHEr6FQbyfikVutm2rQHPSVOkySqxcVKwOLzBLxiksXor5wGdA24EG6tjKlW\nJ/pMZhwgZPBTPUGyPezCKkCs1wq91LULfypOwfvzceDDLTlNd8er20ZpI0O3Sm7H\nzkuMhHfSwU8GGwxGhATL6v62IKI/066iAYBOfGaCS87hTytf8lN/fIeEorvoqnod\nzDsgCpef9jGtphkrP25fPpGbXczM+rJGTIBe/pCIgZDaAajWXDfJk1n750WZjvOB\nuokxetNOJAdK+3qEfW2kkXBc+vJZh9Oh1m+mdTYsWRPVPMm2bEsPHB7Z1HUv/DmC\nxYbObm1JXsnZ7jE5v0JCYHk7wPR530M6sqA+fT6nSHGBjypOvEIKYfV55CNMKs6a\n2KwZi8oY96Z5lyH8TnDRklbat6SVrfqySomxuVsirpYH4x5rP17i5OKzho6f6FzS\nCqriS4hT0VtIc588mPj2tfeTdhh8FcR1uUv1siblEcqIc+MipEfep7HpXAOsaVNe\njkQnoaf1c0NRp+PEgbb7mrNOd2WL4xvY1FFxRTGcFf7aI0+vnCY=\n=0+tA\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7281985731f0d9ffe51ef356818d024c321988b8",
          "sha": "7281985731f0d9ffe51ef356818d024c321988b8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7281985731f0d9ffe51ef356818d024c321988b8"
        }
      ],
      "message": "validation: Remove needs_init from LoadBlockIndex\n\nIt does not control any actual logic and the log message as well as the\ncomment are obsolete, since no database initialization takes place there\nanymore. Log messages indicating when indexes and chainstate databases\nare loaded exist in other places.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-17T16:36:44Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-17T16:35:45Z"
      },
      "sha": "d4709ba5ebec7f19cb8c80db4592dfb3ec77ea28"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDEzM2JmNDZiMzEzZDYyYjY2MmEzNzNhNThkZDMwNzUzOTFlYmViNDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/133bf46b313d62b662a373a58dd3075391ebeb47",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/133bf46b313d62b662a373a58dd3075391ebeb47",
      "tree": {
        "sha": "3896d0febeaed898636df2076f36c35fa1e433a1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3896d0febeaed898636df2076f36c35fa1e433a1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3896d0febeaed898636df2076f36c35fa1e433a1\nparent d4709ba5ebec7f19cb8c80db4592dfb3ec77ea28\nauthor TheCharlatan <seb.kung@gmail.com> 1715942889 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1715971534 +0200\n\nindexes: Don't wipe indexes again when already reindexing\n\nBefore this change continuing a reindex without the -reindex flag set\nwould leave the block and coins db intact, but discard the data of the\noptional indexes. While not a bug per se, wiping the data again is\nwasteful, both in terms of having to write it again, and potentially\nleading to longer startup times.\n\nWhen initially running a reindex, both the block index and any further\nactivated indexes are wiped. On an index's Init(), both the best block\nstored by the index and the chain's tip are null. An index's m_synced\nmember is therefore true. This means that it will process blocks through\nvalidation events while the reindex is running.\n\nCurrently, if the reindex is restarted without the user re-specifying\nthe reindex flag, the block index is preserved but further index data is\nwiped. This leads to the stored best block being null, but the chain tip\nexisting. The m_synced member will be set to false. The index will not\nprocess blocks through the validation interface, but instead use the\nbackground sync once the reindex is completed.\n\nIf the index is preserved (this change) after a restart its best block\nmay potentially match the chain tip. The m_synced member will be set to\ntrue and the index can process validation events during the rest of the\nreindex.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmZHqbUACgkQm3m0VpHb\nQXM90xAAs2By8DfaW/xKT+Ijnlm6xqcDv6v61wlqxXrSjcf8tBmJFYyv960VfeO0\n49aCqxFy2rV3wjbP9sw4lfa2HJdr4C8E12om4e0CCP5EqaqBfdgQB6Trh0ycjxm6\ngKr25gy95Zt0psgG7CikjPe3SwFB+oQQ/Yh4tmLjyO7KeQcWjUjj6E/y3Ooa0/d5\nHgYGqF3kyC0OyMRJnzQg6CUvGYJoy8oEtH+xYj7MTEPZsZFfvqUqfZM/Y+KxJevR\nVRLrTjSNSwG3X5mqmeFc3XQh6e9tOGyShujxGVTpBV2jIfscwoDrvWjGj0nzXftR\ngU4qebtfGBD3v9j0UDtNd3pivc7ffHQYzsfc3JULud3pwWgDekf/5JreKapbDSUe\n8gQBQYHsk+PAGs5qjZl1fmqeH7ll1xvnLQB4XX9DpIG9lKoGbBgJv1OxLxkRYPcL\n4uWt7JTfL5b8WgOMBvNGIurbkTxbiIdzBTJMEI+Q4jck1QxMBjBFw5FeGt2nSAoX\neZw9Q6l24glC9Amdrm195DrvHBJAd5DZ73kP12zCqZUBtYVvbgeVhKWPos45KJ5H\nEoO7M5eUh7vRwa6kAkfQm3fJK2+GHahosaG06WR10MdQmUzqfWUjpWxw4Dinjhio\nyZjd3XeygAuBj9JKEV2uN5xXC3akQ5lkuNmj1X7B8Aw8rIwzlC0=\n=3m8t\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d4709ba5ebec7f19cb8c80db4592dfb3ec77ea28",
          "sha": "d4709ba5ebec7f19cb8c80db4592dfb3ec77ea28",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d4709ba5ebec7f19cb8c80db4592dfb3ec77ea28"
        }
      ],
      "message": "indexes: Don't wipe indexes again when already reindexing\n\nBefore this change continuing a reindex without the -reindex flag set\nwould leave the block and coins db intact, but discard the data of the\noptional indexes. While not a bug per se, wiping the data again is\nwasteful, both in terms of having to write it again, and potentially\nleading to longer startup times.\n\nWhen initially running a reindex, both the block index and any further\nactivated indexes are wiped. On an index's Init(), both the best block\nstored by the index and the chain's tip are null. An index's m_synced\nmember is therefore true. This means that it will process blocks through\nvalidation events while the reindex is running.\n\nCurrently, if the reindex is restarted without the user re-specifying\nthe reindex flag, the block index is preserved but further index data is\nwiped. This leads to the stored best block being null, but the chain tip\nexisting. The m_synced member will be set to false. The index will not\nprocess blocks through the validation interface, but instead use the\nbackground sync once the reindex is completed.\n\nIf the index is preserved (this change) after a restart its best block\nmay potentially match the chain tip. The m_synced member will be set to\ntrue and the index can process validation events during the rest of the\nreindex.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-17T18:45:34Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-05-17T10:48:09Z"
      },
      "sha": "133bf46b313d62b662a373a58dd3075391ebeb47"
    },
    {
      "event": "commented",
      "id": 2118312524,
      "node_id": "IC_kwDOABII585-QuJM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118312524",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-17T20:08:20Z",
      "updated_at": "2024-05-17T20:08:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30132).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30132#issuecomment-2118312524",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30132"
    },
    {
      "event": "labeled",
      "id": 12852900442,
      "node_id": "LE_lADOABII586JTKoOzwAAAAL-F7Ja",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12852900442",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-17T20:08:22Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    }
  ],
  "comments": []
}