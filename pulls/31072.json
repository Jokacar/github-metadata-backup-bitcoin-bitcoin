{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31072",
    "id": 2119587212,
    "node_id": "PR_kwDOABII585-VlWM",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31072",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31072.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31072.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31072",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31072/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31072/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31072/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/9a101d2928d14e39365064dc976615b4b9674ca5",
    "number": 31072,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "scripted-diff: Replace strprintf(Untranslated(...)) with Untranslated(strprintf(...))",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This PR is just a scripted-diff replacing strprintf calls like:\r\n\r\n```c++\r\nstrprintf(Untranslated(\"Error parsing command line arguments: %s\"), error))\r\n```\r\n\r\nwith:\r\n\r\n```c++\r\nUntranslated(strprintf(\"Error parsing command line arguments: %s\", error))\r\n```\r\n\r\nCurrently code is inconsistent and uses a mix of both styles, but second style is better because:\r\n\r\n1. It scans more cleanly. It is easier to read the strprintf call, and easier to think about because the whole string, not just one part, is passed to `Untranslated()` to convert from `std::string` to `bilingual_str`.\r\n2. It lets the compiler prevent janky UX where non-english fragments are inserted into english messages. One potential case where a `bilingual_str` was substituted into an english format string is fixed in the first commit of this PR.\r\n3. It doesn't waste work formatting the same string twice.\r\n4. It simplifies the translation API after [#31061](https://github.com/bitcoin/bitcoin/pull/31061). Instead of `Untranslated()` function sometimes returning a `bilingual_str`, other times returning a `Translatable<false>` struct with a different set of fields, it can stay the way it is and simply convert `std::string` to `bilingual_str`.\r\n5. It simplifies the implementation of [#31061](https://github.com/bitcoin/bitcoin/pull/31061), allowing two commits faf71be89ad9d07c0848d13da51fc71c11395984 and fae6acacc0216aa07f5a4a0ee75fbade620d7023 to be dropped, as well as other changes in other commits.\r\n\r\nOne potential downside of this change, pointed out https://github.com/bitcoin/bitcoin/pull/31061#discussion_r1795269088, is that after this PR if you want to change an untranslated format string to a translated one (or vice versa), you will have to to add `_()` around the format string and drop `Untranslate()` around the formatted string, instead of just literally replacing `Untranslated` with `_`. But I think this is good, because the change is still easy to make, and it lets you consider whether other parts of the `strprintf` call also should switch to translated strings to avoid jank of non-translated messages being embedded in translated strings (or vice versa).\r\n\r\nAn alternative to this PR could be a scripted-diff switching all code to use `strprintf(Untranslated(...))` instead of `Untranslated(strprintf(...))`. I think this alternative would also be an improvement over the status quo, since it would also make the code more consistent, also simplify [#31061](https://github.com/bitcoin/bitcoin/pull/31061), and also avoid needing to overload `Untranslated()` there to return objects with incompatible types. But I think this PR is better than the alternative for reasons 1-3 above, and better because it lets `Untranslated` remain a simple one-liner that converts a `std::string` to `bilingual_str` and is not involved in formatting.\r\n\r\nNote: The scripted diff in this PR only removes current `strprintf(Untranslated(...))` calls without adding enforcement to prevent new ones. But adding enforcement is easy with [#31061](https://github.com/bitcoin/bitcoin/pull/31061) and simplifies that PR by dropping support for the `strprintf(Untranslated(...))` syntax.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "created_at": "2024-10-11T12:19:46Z",
    "updated_at": "2024-10-11T23:49:19Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "7323deb20a72e67116f845c68732f7f21da3ac30",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ryanofsky:pr/bfmt",
      "ref": "pr/bfmt",
      "sha": "9a101d2928d14e39365064dc976615b4b9674ca5",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 69901633,
        "node_id": "MDEwOlJlcG9zaXRvcnk2OTkwMTYzMw==",
        "name": "bitcoin",
        "full_name": "ryanofsky/bitcoin",
        "owner": {
          "login": "ryanofsky",
          "id": 7133040,
          "node_id": "MDQ6VXNlcjcxMzMwNDA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ryanofsky",
          "html_url": "https://github.com/ryanofsky",
          "followers_url": "https://api.github.com/users/ryanofsky/followers",
          "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
          "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
          "repos_url": "https://api.github.com/users/ryanofsky/repos",
          "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/ryanofsky/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ryanofsky/bitcoin",
        "archive_url": "https://api.github.com/repos/ryanofsky/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ryanofsky/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ryanofsky/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ryanofsky/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ryanofsky/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ryanofsky/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ryanofsky/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ryanofsky/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ryanofsky/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ryanofsky/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ryanofsky/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ryanofsky/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ryanofsky/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ryanofsky/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ryanofsky/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ryanofsky/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ryanofsky/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ryanofsky/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ryanofsky/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ryanofsky/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ryanofsky/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ryanofsky/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ryanofsky/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ryanofsky/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ryanofsky/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ryanofsky/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ryanofsky/bitcoin/hooks",
        "svn_url": "https://github.com/ryanofsky/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 14,
        "watchers_count": 14,
        "size": 267817,
        "default_branch": "master",
        "open_issues_count": 3,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-10-11T18:37:36Z",
        "created_at": "2016-10-03T19:05:43Z",
        "updated_at": "2024-09-28T22:54:37Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "d8b835cf18ce459f1179354d1695c34d9f2b03f0",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36239,
        "stargazers_count": 78813,
        "watchers_count": 78813,
        "size": 269888,
        "default_branch": "master",
        "open_issues_count": 685,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-10-11T12:46:43Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-10-11T22:45:54Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31072"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 59,
    "deletions": 57,
    "changed_files": 14,
    "commits": 3,
    "review_comments": 3,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE5N2RhMWZlODkzOWJhMWFmYTIyYjJiZGI5NzEwNDQ5ZTYxMjJiZTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/197da1fe8939ba1afa22b2bdb9710449e6122be8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/197da1fe8939ba1afa22b2bdb9710449e6122be8",
      "tree": {
        "sha": "be778089c5d5a4f3c97d6802fa72364d5402eca7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/be778089c5d5a4f3c97d6802fa72364d5402eca7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d8b835cf18ce459f1179354d1695c34d9f2b03f0",
          "sha": "d8b835cf18ce459f1179354d1695c34d9f2b03f0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d8b835cf18ce459f1179354d1695c34d9f2b03f0"
        }
      ],
      "message": "refactor: Don't embed translated string in untranslated string.\n\nThis could produce an english error message containing non-english string fragments.\n\nThis change is needed to make an upcoming scripted-diff commit compile, and\nmakes it easier to add compile-time checking to enforce that format strings\ncontain the right specifiers, because it stops using Untranslated() to create\nthe format string, so the Untranslated() function will not need to get involved\nin formatting.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-10-11T08:59:09Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-10-09T14:09:08Z"
      },
      "sha": "197da1fe8939ba1afa22b2bdb9710449e6122be8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE5ZjQ5ZjEzOGM0NzU2YjUyMTllNzE1ZDg3NDlkMTViZTA3ZTJjODE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/19f49f138c4756b5219e715d8749d15be07e2c81",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/19f49f138c4756b5219e715d8749d15be07e2c81",
      "tree": {
        "sha": "eeeb29e1db185784fbfadff03c7a54e8096b0443",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/eeeb29e1db185784fbfadff03c7a54e8096b0443"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/197da1fe8939ba1afa22b2bdb9710449e6122be8",
          "sha": "197da1fe8939ba1afa22b2bdb9710449e6122be8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/197da1fe8939ba1afa22b2bdb9710449e6122be8"
        }
      ],
      "message": "refactor: Use + instead of strformat to concatenate Untranslated strings\n\nThis change is needed to make an upcoming scripted-diff commit compile, and\nmakes it easier to add compile-time checking to enforce that format strings\ncontain the right specifiers, because it stops using Untranslated() to create\nthe format string, so the Untranslated() function will not need to get involved\nin formatting.\n\nIt should also make code slightly shorter and easier to read.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-10-11T08:59:09Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-10-09T14:09:08Z"
      },
      "sha": "19f49f138c4756b5219e715d8749d15be07e2c81"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDlhMTAxZDI5MjhkMTRlMzkzNjUwNjRkYzk3NjYxNWI0Yjk2NzRjYTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9a101d2928d14e39365064dc976615b4b9674ca5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9a101d2928d14e39365064dc976615b4b9674ca5",
      "tree": {
        "sha": "d0d6906b286333da3b4e0de4308c059f05000e1b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d0d6906b286333da3b4e0de4308c059f05000e1b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/19f49f138c4756b5219e715d8749d15be07e2c81",
          "sha": "19f49f138c4756b5219e715d8749d15be07e2c81",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/19f49f138c4756b5219e715d8749d15be07e2c81"
        }
      ],
      "message": "scripted-diff: Replace strprintf(Untranslated) with Untranslated(strprintf)\n\nSee PR description for rationale behind this change, but summary is that it\nmakes code more consistent and makes it easier to add compile-time checking to\nenforce that format strings contain the right specifiers, because it stops\nusing Untranslated() to create the format string, so the Untranslated()\nfunction will not need to get involved in formatting.\n\n-BEGIN VERIFY SCRIPT-\nquote='\"[^\"]+\"'\nquotes=\"(?:$quote|\\\\W)*\"\nnonparens=\"[^()]*\"\nsingle_level_paren=\"\\($nonparens\\)\"\ndouble_level_paren=\"\\($nonparens\\($nonparens\\)$nonparens\\)\"\nexprs=\"(?:$double_level_paren|$single_level_paren|$nonparens)*\"\ngit grep -l 'Untranslated' | xargs perl -0777 -i -pe \"s/strprintf\\((\\\\W*)Untranslated\\(($quotes)\\)($exprs)(\\))/Untranslated(\\1strprintf(\\2\\3))/gs\"\n-END VERIFY SCRIPT-",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-10-11T08:59:09Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2024-10-09T14:27:32Z"
      },
      "sha": "9a101d2928d14e39365064dc976615b4b9674ca5"
    },
    {
      "event": "commented",
      "id": 2407296693,
      "node_id": "IC_kwDOABII586PfG61",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2407296693",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-11T12:19:48Z",
      "updated_at": "2024-10-11T23:49:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/31072).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/762](https://github.com/bitcoin-core/gui/pull/762) (Update about logo icon (colour) to denote the chain type of the QT instance in About/ Help Message Window/ Dialog by pablomartin4btc)\n* [#31074](https://github.com/bitcoin/bitcoin/pull/31074) (util: Check bilingual_str format strings at compile time by ryanofsky)\n* [#31061](https://github.com/bitcoin/bitcoin/pull/31061) (refactor: Check translatable format strings at compile-time by maflcko)\n* [#30988](https://github.com/bitcoin/bitcoin/pull/30988) (Split CConnman by vasild)\n* [#29770](https://github.com/bitcoin/bitcoin/pull/29770) (index: Check all necessary block data is available before starting to sync by fjahr)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n* [#28710](https://github.com/bitcoin/bitcoin/pull/28710) (Remove the legacy wallet and BDB dependency by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31072#issuecomment-2407296693",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31072"
    },
    {
      "event": "labeled",
      "id": 14607931686,
      "node_id": "LE_lADOABII586Z2sF7zwAAAANms1km",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14607931686",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-11T12:19:51Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "reviewed",
      "id": 2362888700,
      "node_id": "PRR_kwDOABII586M1tH8",
      "url": null,
      "actor": null,
      "commit_id": "9a101d2928d14e39365064dc976615b4b9674ca5",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "I don't mind the changes here, but I don't think the motivation is correct and it seems verbose and misleading.\r\n\r\nI don't think it matters much whether this is merged or not, but you could just replace the motivation with:\r\n\r\n\"This replacement makes the implementation of some compile-time checks in the future easier. Also, it makes the code a bit more consistent in that `Untranslated` isn't allowed as a format-string anymore, only plain `std::string`s, or translated strings. The downside would be that developers may have to use `operator+` more often, making it a bit harder to write code involving formatting of (un)translated strings. However, if it becomes too annoying, the changes here should be easy to revert.\"",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31072#pullrequestreview-2362888700",
      "submitted_at": "2024-10-11T14:06:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31072"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1797005420",
      "pull_request_review_id": 2362888700,
      "id": 1797005420,
      "node_id": "PRRC_kwDOABII585rHCBs",
      "diff_hunk": "@@ -901,7 +901,9 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     // Warn if unrecognized section name are present in the config file.\n     bilingual_str warnings;\n     for (const auto& section : args.GetUnrecognizedSections()) {\n-        warnings += strprintf(Untranslated(\"%s:%i \") + _(\"Section [%s] is not recognized.\") + Untranslated(\"\\n\"), section.m_file, section.m_line, section.m_name);\n+        warnings += Untranslated(strprintf(\"%s:%i \", section.m_file, section.m_line)) +\n+                    strprintf(_(\"Section [%s] is not recognized.\"), section.m_name) +",
      "path": "src/init.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "9a101d2928d14e39365064dc976615b4b9674ca5",
      "original_commit_id": "19f49f138c4756b5219e715d8749d15be07e2c81",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "in commit \" refactor: Use + instead of strformat to concatenate Untranslated strings \":\r\n\r\nI still don't think this is correct. You are using `+` to concatenate `Untranslated` and `_()` (translated), possibly mixing English strings with non-English ones. Also, this compiles, so there are no compile-time checks preventing the \"mix\".",
      "created_at": "2024-10-11T14:00:59Z",
      "updated_at": "2024-10-11T14:06:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31072#discussion_r1797005420",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1797005420"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31072"
        }
      },
      "start_line": 904,
      "original_start_line": 904,
      "start_side": "RIGHT",
      "line": 905,
      "original_line": 905,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1797036507",
      "pull_request_review_id": 2362940676,
      "id": 1797036507,
      "node_id": "PRRC_kwDOABII585rHJnb",
      "diff_hunk": "@@ -901,7 +901,9 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     // Warn if unrecognized section name are present in the config file.\n     bilingual_str warnings;\n     for (const auto& section : args.GetUnrecognizedSections()) {\n-        warnings += strprintf(Untranslated(\"%s:%i \") + _(\"Section [%s] is not recognized.\") + Untranslated(\"\\n\"), section.m_file, section.m_line, section.m_name);\n+        warnings += Untranslated(strprintf(\"%s:%i \", section.m_file, section.m_line)) +\n+                    strprintf(_(\"Section [%s] is not recognized.\"), section.m_name) +",
      "path": "src/init.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "9a101d2928d14e39365064dc976615b4b9674ca5",
      "original_commit_id": "19f49f138c4756b5219e715d8749d15be07e2c81",
      "in_reply_to_id": 1797005420,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> I still don't think this is correct.\r\n\r\nWhat part of this is not correct? Is there a specific sentence or something?\r\n\r\n> You are using `+` to concatenate `Untranslated` and `_()` (translated), possibly mixing English strings with non-English ones. Also, this compiles, so there are no compile-time checks preventing the \"mix\".\r\n\r\nThere is nothing in this commit message (19f49f138c4756b5219e715d8749d15be07e2c81) which mentions mixing English or non-english strings.\r\n\r\nAs a whole, this PR is updating around 30 strprintf calls to be more readable and consistent and to, yes, make 27 of them now trigger compiler errors if there is an attempt to pass a `bilingual_str` as a `strprintf` parameter, preventing accidental mixing English and non-english strings.\r\n\r\nObviously it should not be compile error to intentionally mix translated and non-translated strings, and this is still possible with `+`, which the code is now using in 3 more places.\r\n\r\n",
      "created_at": "2024-10-11T14:24:24Z",
      "updated_at": "2024-10-11T14:24:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31072#discussion_r1797036507",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1797036507"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31072"
        }
      },
      "start_line": 904,
      "original_start_line": 904,
      "start_side": "RIGHT",
      "line": 905,
      "original_line": 905,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1797046367",
      "pull_request_review_id": 2362957542,
      "id": 1797046367,
      "node_id": "PRRC_kwDOABII585rHMBf",
      "diff_hunk": "@@ -901,7 +901,9 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n     // Warn if unrecognized section name are present in the config file.\n     bilingual_str warnings;\n     for (const auto& section : args.GetUnrecognizedSections()) {\n-        warnings += strprintf(Untranslated(\"%s:%i \") + _(\"Section [%s] is not recognized.\") + Untranslated(\"\\n\"), section.m_file, section.m_line, section.m_name);\n+        warnings += Untranslated(strprintf(\"%s:%i \", section.m_file, section.m_line)) +\n+                    strprintf(_(\"Section [%s] is not recognized.\"), section.m_name) +",
      "path": "src/init.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "9a101d2928d14e39365064dc976615b4b9674ca5",
      "original_commit_id": "19f49f138c4756b5219e715d8749d15be07e2c81",
      "in_reply_to_id": 1797005420,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> > I still don't think this is correct.\r\n> \r\n> What part of this is not correct? Is there a specific sentence or something?\r\n\r\nSorry for being unclear. The commit title says\r\n\r\n\"refactor: Use + instead of strformat to concatenate Untranslated strings\".\r\n\r\nIt should say:\r\n\r\n\"refactor: Use + instead of strformat to concatenate bilingual strings, which may be Untranslated or translated (_)\"",
      "created_at": "2024-10-11T14:31:44Z",
      "updated_at": "2024-10-11T14:31:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31072#discussion_r1797046367",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1797046367"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31072"
        }
      },
      "start_line": 904,
      "original_start_line": 904,
      "start_side": "RIGHT",
      "line": 905,
      "original_line": 905,
      "side": "RIGHT"
    }
  ]
}