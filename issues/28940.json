{
  "type": "issue",
  "issue": {
    "id": 2010792387,
    "node_id": "I_kwDOABII58532kHD",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28940",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28940/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28940/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28940/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28940",
    "number": 28940,
    "state": "closed",
    "state_reason": "completed",
    "title": "`AddrManSelectByNetwork` benchmark fails on Windows",
    "body": "When compiling without external signer support, the resulted `bench_bitcoin.exe` fails on Windows:\r\n```\r\n>.\\bench_bitcoin.exe -filter=AddrManSelectByNetwork\r\nError: bad optional access\r\n```\r\n\r\nSteps to reproduce the failure:\r\n- cross compiling on Ubuntu 22.04:\r\n```\r\n$ make -j $(nproc) -C depends HOST=x86_64-w64-mingw32 NO_QT=1\r\n$ ./autogen.sh\r\n$ ./configure CONFIG_SITE=$PWD/depends/x86_64-w64-mingw32/share/config.site --disable-external-signer\r\n$ make -j $(nproc)\r\n```\r\n- compiling natively on Windows:\r\n\r\nApply the diff as follows:\r\n```diff\r\n--- a/build_msvc/bitcoin_config.h.in\r\n+++ b/build_msvc/bitcoin_config.h.in\r\n@@ -41,9 +41,6 @@\r\n /* Define this symbol to enable ZMQ functions */\r\n #define ENABLE_ZMQ 1\r\n \r\n-/* define if external signer support is enabled (requires Boost::Process) */\r\n-#define ENABLE_EXTERNAL_SIGNER /**/\r\n-\r\n /* Define to 1 if you have the declaration of `be16toh', and to 0 if you\r\n    don't. */\r\n #define HAVE_DECL_BE16TOH 0\r\n```\r\nThen\r\n```\r\n>py -3 build_msvc\\msvc-autogen.py\r\n>msbuild build_msvc\\bitcoin.sln -property:Configuration=Release -verbosity:minimal\r\n>src\\bench_bitcoin.exe -filter=AddrManSelectByNetwork\r\nError: bad optional access\r\n```\r\n\r\n---\r\n\r\nThe failure does not manifest itself when running `bench_bitcoin.exe` using Wine on Linux.",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 234877,
        "node_id": "MDU6TGFiZWwyMzQ4Nzc=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Windows",
        "name": "Windows",
        "color": "884400",
        "default": false
      },
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 3,
    "closed_at": "2023-11-29T17:14:41Z",
    "created_at": "2023-11-25T20:48:23Z",
    "updated_at": "2023-11-29T17:14:41Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 11061430226,
      "node_id": "LE_lADOABII58532kHDzwAAAAKTUAfS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11061430226",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-25T20:48:23Z",
      "label": {
        "name": "Windows",
        "color": "884400"
      }
    },
    {
      "event": "labeled",
      "id": 11061430228,
      "node_id": "LE_lADOABII58532kHDzwAAAAKTUAfU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11061430228",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-25T20:48:23Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-25T20:51:55Z",
      "updated_at": "2023-11-25T20:51:55Z",
      "source": {
        "issue": {
          "id": 1897386070,
          "node_id": "PR_kwDOABII585aYuI8",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28486",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28486/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28486/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28486/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28486",
          "number": 28486,
          "state": "closed",
          "state_reason": null,
          "title": "test, bench: Initialize and terminate use of Winsock properly",
          "body": "On the master branch, when compiling without external signer support, the `bench_bitcoin.exe` does not initialize Winsock DLL that is required, for example, here: https://github.com/bitcoin/bitcoin/blob/459272d639b9547f68000d2b9a5a0d991d477de5/src/bench/addrman.cpp#L124\r\n\r\nMoreover, Windows docs explicitly [state](https://learn.microsoft.com/en-us/windows/win32/api/winsock/nf-winsock-wsacleanup) that `WSAStartup` and `WSACleanup` must be balanced:\r\n> There must be a call to `WSACleanup` for each successful call to `WSAStartup`. Only the final `WSACleanup` function call performs the actual cleanup. The preceding calls simply decrement an internal reference count in the WS2_32.DLL.\r\n\r\nThat is not the case for our unit tests because the `SetupNetworking()` call is a part of the `BasicTestingSetup` fixture and is invoked multiple times, while `~CNetCleanup()` is invoked once only, at the end of the test binary execution.\r\n\r\nThis PR fixes Winsock DLL initialization and termination.\r\n\r\nMore docs:\r\n- https://learn.microsoft.com/en-us/windows/win32/winsock/initializing-winsock\r\n- https://learn.microsoft.com/en-us/windows/win32/api/winsock/nf-winsock-wsastartup\r\n- https://learn.microsoft.com/en-us/windows/win32/api/winsock/nf-winsock-wsacleanup\r\n\r\nFix https://github.com/bitcoin/bitcoin/issues/28940.",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 31,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28486",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28486",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28486.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28486.patch"
          },
          "closed_at": "2023-11-29T17:14:44Z",
          "created_at": "2023-09-14T22:08:00Z",
          "updated_at": "2023-11-29T17:17:01Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1828249319,
      "node_id": "IC_kwDOABII585s-N7n",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1828249319",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T16:57:31Z",
      "updated_at": "2023-11-27T18:30:50Z",
      "author_association": "MEMBER",
      "body": "Yep, this makes sense to me.\r\n\r\nSee boost asio: https://github.com/boostorg/asio/blob/develop/include/boost/asio/detail/impl/winsock_init.ipp#L39\r\n\r\nAnd a static instance of that is created here: https://github.com/boostorg/asio/blob/develop/include/boost/asio/detail/winsock_init.hpp#L116\r\n\r\nAnd I see those being included by`<boost/process.hpp>` from `run_command.cpp`. So I'm guessing boost has been quietly initializing our network stack :(\r\n\r\nEdit:\r\n```bash\r\n$ objdump -tC common/libbitcoin_common_a-run_command.o | grep WSA\r\n[1059](sec  0)(fl 0x00)(ty    0)(scl   2) (nx 0) 0x0000000000000000 __imp_WSACleanup\r\n[1060](sec  0)(fl 0x00)(ty    0)(scl   2) (nx 0) 0x0000000000000000 __imp_WSAStartup\r\n```",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28940#issuecomment-1828249319",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28940"
    },
    {
      "event": "commented",
      "id": 1828260119,
      "node_id": "IC_kwDOABII585s-QkX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1828260119",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-27T17:03:44Z",
      "updated_at": "2023-11-27T17:03:44Z",
      "author_association": "MEMBER",
      "body": "YUCK.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28940#issuecomment-1828260119",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28940"
    },
    {
      "event": "commented",
      "id": 1829481222,
      "node_id": "IC_kwDOABII585tC6sG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1829481222",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T10:00:31Z",
      "updated_at": "2023-11-28T10:00:31Z",
      "author_association": "MEMBER",
      "body": "I think the only logical thing to do here is to disable external signer for windows, and fixup our code. Looking upstream at Boost Process, maintainence cetainly hasn't improved, and it looks like it's only leaning further into using Boost ASIO.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28940#issuecomment-1829481222",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28940"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-28T10:05:09Z",
      "updated_at": "2023-11-28T10:05:09Z",
      "source": {
        "issue": {
          "id": 1207111512,
          "node_id": "I_kwDOABII585H8w9Y",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24907",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24907/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24907/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24907/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/24907",
          "number": 24907,
          "state": "open",
          "state_reason": null,
          "title": "RFC: Replacing Boost Process",
          "body": "Boost Process is currently relatively poorly maintained; bugs are remaining unfixed for multiple Boost releases, the code and issue tracking is [confusingly](https://github.com/boostorg/process/pull/243) spread across multiple repositories, see https://github.com/boostorg/process/ and https://github.com/klemens-morgenstern/boost-process), which themselves each have different versions of the code.\r\n\r\nThere's been no recent \"modernization\" of the module, i.e an option use `std::filesystem` over `boost::filesystem`, like other Boost modules, which is why we no-longer support external signing on Windows, see #24065. \r\n\r\nIt's inclusion in our project is also a downside to our Boost consolidation / removal, i.e #24742, as Process's own dependencies (filesystem, system, win-api, + others) pull in even more Boost modules (i.e asio), which in turn pull in further modules..\r\n\r\nIf we are going to continue to use/expand our usage of it, I think we need some sort of plan, addressing the above, rather than leaving it ignored while we start accumulating workarounds, i.e #24523, in our own code to support it, and it's presence potentially blocks other project goals.\r\n\r\nOne potential alternative is https://github.com/arun11299/cpp-subprocess.",
          "user": {
            "login": "fanquake",
            "id": 863730,
            "node_id": "MDQ6VXNlcjg2MzczMA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fanquake",
            "html_url": "https://github.com/fanquake",
            "followers_url": "https://api.github.com/users/fanquake/followers",
            "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
            "organizations_url": "https://api.github.com/users/fanquake/orgs",
            "repos_url": "https://api.github.com/users/fanquake/repos",
            "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fanquake/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 64584,
              "node_id": "MDU6TGFiZWw2NDU4NA==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Brainstorming",
              "name": "Brainstorming",
              "color": "ebd775",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 13,
          "created_at": "2022-04-18T14:34:42Z",
          "updated_at": "2023-11-28T10:05:09Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 11096419459,
      "node_id": "REFE_lADOABII58532kHDzwAAAAKVZeyD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11096419459",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "798b2bd492ccfbd8be8f5f577dd48d16ec6fcc9f",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/798b2bd492ccfbd8be8f5f577dd48d16ec6fcc9f",
      "created_at": "2023-11-29T13:28:04Z"
    },
    {
      "event": "referenced",
      "id": 11096564305,
      "node_id": "REFE_lADOABII58532kHDzwAAAAKVaCJR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11096564305",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "3d415322b2847bdb709fbdf50890abaafddb3784",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/3d415322b2847bdb709fbdf50890abaafddb3784",
      "created_at": "2023-11-29T13:39:58Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-29T14:05:49Z",
      "updated_at": "2023-11-29T14:05:49Z",
      "source": {
        "issue": {
          "id": 2016671496,
          "node_id": "PR_kwDOABII585grHvf",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28967",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28967/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28967/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28967/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28967",
          "number": 28967,
          "state": "open",
          "state_reason": null,
          "title": "build: disable external-signer for Windows",
          "body": "It's come to light that Boost ASIO (a Boost Process sub dep) has in some\r\ninstances, been quietly  initialising our network stack on Windows (see\r\nPR https://github.com/bitcoin/bitcoin/pull/28486 and discussion in https://github.com/bitcoin/bitcoin/issues/28940).\r\n\r\nThis has been shielding a bug in our own code, but the larger issue\r\nis that Boost Process/ASIO is running code before main, and doing things\r\nlike setting up networking. This undermines our own assumptions about\r\nhow our binary works, happens before we run any sanity checks,\r\nand before we call our own code to setup networking. Note that ASIO also\r\ncalls WSAStartup with version `2.0`, whereas we call with `2.2`.\r\n\r\nIt's also not clear why a feature like external signer would have a\r\ndependency that would be doing anything network/socket related,\r\ngiven it only exists to spawn a local process.\r\n\r\nSee also the discussion in https://github.com/bitcoin/bitcoin/issues/24907. Note that the maintaince of Boost Process in general,\r\nhas not really improved. For example, rather than fixing bugs like https://github.com/boostorg/process/issues/111, \r\ni.e, https://github.com/boostorg/process/pull/317, the maintainer chooses to just wrap exception causing overflows\r\nin try-catch blocks: https://github.com/boostorg/process/commit/0c42a58eacab6a96b19196e399307bad8a938a27. These changes get merged in large,\r\nunreviewed PRs, i.e https://github.com/boostorg/process/pull/319.\r\n\r\nThis PR disables external-signer on Windows for now. If, in future, someone\r\nchanges how Boost Process works, or replaces it entirely with some\r\nproperly reviewed and maintained code, we could reenable this feature on\r\nWindows.",
          "user": {
            "login": "fanquake",
            "id": 863730,
            "node_id": "MDQ6VXNlcjg2MzczMA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fanquake",
            "html_url": "https://github.com/fanquake",
            "followers_url": "https://api.github.com/users/fanquake/followers",
            "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
            "organizations_url": "https://api.github.com/users/fanquake/orgs",
            "repos_url": "https://api.github.com/users/fanquake/repos",
            "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fanquake/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28967",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28967",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28967.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28967.patch"
          },
          "created_at": "2023-11-29T14:05:49Z",
          "updated_at": "2023-11-29T17:19:07Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 11099177501,
      "node_id": "REFE_lADOABII58532kHDzwAAAAKVkAId",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11099177501",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "02895a89f60ad7994b422406ee2c2f9f6fd69d7d",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/02895a89f60ad7994b422406ee2c2f9f6fd69d7d",
      "created_at": "2023-11-29T17:00:51Z"
    },
    {
      "event": "closed",
      "id": 11099330341,
      "node_id": "CE_lADOABII58532kHDzwAAAAKVklcl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11099330341",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "dd73c229763927cddc56b19ef7b1a311ff952a60",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/dd73c229763927cddc56b19ef7b1a311ff952a60",
      "created_at": "2023-11-29T17:14:41Z"
    },
    {
      "event": "referenced",
      "id": 11099374307,
      "node_id": "REFE_lADOABII58532kHDzwAAAAKVkwLj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11099374307",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "9ff589c60c931a8cb19cb984cc69a223186181ca",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/9ff589c60c931a8cb19cb984cc69a223186181ca",
      "created_at": "2023-11-29T17:18:44Z"
    }
  ]
}