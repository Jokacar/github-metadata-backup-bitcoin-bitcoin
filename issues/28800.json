{
  "type": "issue",
  "issue": {
    "id": 1978213692,
    "node_id": "I_kwDOABII58516SU8",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28800",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28800/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28800/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28800/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28800",
    "number": 28800,
    "state": "closed",
    "state_reason": "completed",
    "title": "test: wallet_miniscript.py fails with thread sanitizer ",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nUsing clang version 15.0.7 on Ubuntu and enabling the thread sanitizer, the `wallet_miniscript.py --descriptors` test consistently fails with a timeout.\n\n### Expected behaviour\n\nDon't timeout.\r\n\r\nI could of course increate the timeouts, but this is the only test with that issue.\r\n\r\nAs an aside, the log output contains extremely long descriptors which should probably be truncated.\n\n### Steps to reproduce\n\n```\r\n./autogen\r\n./configure CC=clang CXX=clang++ --enable-suppress-external-warnings --with-sanitizers=thread --without-gui\r\nmake -j33\r\ntest/functional/wallet_miniscript.py --descriptors\r\n```\n\n### Relevant log output\n\nFull log: https://termbin.com/p81f\r\n\r\n```\r\n2023-11-06T03:18:08.275000Z TestFramework (ERROR): JSONRPC error\r\nTraceback (most recent call last):\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 151, in _get_response\r\n    http_response = self.__conn.getresponse()\r\n  File \"/home/sjors/.pyenv/versions/3.9.18/lib/python3.9/http/client.py\", line 1377, in getresponse\r\n    response.begin()\r\n  File \"/home/sjors/.pyenv/versions/3.9.18/lib/python3.9/http/client.py\", line 320, in begin\r\n    version, status, reason = self._read_status()\r\n  File \"/home/sjors/.pyenv/versions/3.9.18/lib/python3.9/http/client.py\", line 281, in _read_status\r\n    line = str(self.fp.readline(_MAXLINE + 1), \"iso-8859-1\")\r\n  File \"/home/sjors/.pyenv/versions/3.9.18/lib/python3.9/socket.py\", line 704, in readinto\r\n    return self._sock.recv_into(b)\r\nsocket.timeout: timed out\r\n\r\nDuring handling of the above exception, another exception occurred:\r\n\r\nTraceback (most recent call last):\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 132, in main\r\n    self.run_test()\r\n  File \"/home/sjors/dev/bitcoin/test/functional/wallet_miniscript.py\", line 386, in run_test\r\n    self.signing_test(desc, None, None, 1, 3, None)\r\n  File \"/home/sjors/dev/bitcoin/test/functional/wallet_miniscript.py\", line 258, in signing_test\r\n    res = self.ms_sig_wallet.importdescriptors(\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 127, in __call__\r\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 106, in _request\r\n    return self._get_response()\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 153, in _get_response\r\n    raise JSONRPCException({\r\ntest_framework.authproxy.JSONRPCException: 'importdescriptors' RPC took longer than 240.000000 seconds. Consider using larger timeout for calls that take longer to return. (-344)\r\n2023-11-06T03:18:08.335000Z TestFramework (INFO): Stopping nodes\r\n2023-11-06T03:18:08.335000Z TestFramework.node0 (ERROR): Unable to stop node.\r\nTraceback (most recent call last):\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 361, in stop_node\r\n    self.stop(wait=wait)\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/coverage.py\", line 50, in __call__\r\n    return_val = self.auth_service_proxy_instance.__call__(*args, **kwargs)\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 127, in __call__\r\n    response, status = self._request('POST', self.__url.path, postdata.encode('utf-8'))\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/authproxy.py\", line 105, in _request\r\n    self.__conn.request(method, path, postdata, headers)\r\n  File \"/home/sjors/.pyenv/versions/3.9.18/lib/python3.9/http/client.py\", line 1285, in request\r\n    self._send_request(method, url, body, headers, encode_chunked)\r\n  File \"/home/sjors/.pyenv/versions/3.9.18/lib/python3.9/http/client.py\", line 1296, in _send_request\r\n    self.putrequest(method, url, **skips)\r\n  File \"/home/sjors/.pyenv/versions/3.9.18/lib/python3.9/http/client.py\", line 1122, in putrequest\r\n    raise CannotSendRequest(self.__state)\r\nhttp.client.CannotSendRequest: Request-sent\r\n```\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@953d302a242381ae13112ea42f87d57e6e796147\n\n### Operating system and version\n\nUbuntu 23.04\n\n### Machine specifications\n\nAMD Ryzen 7950x\r\n`/tmp` is mounted to tmpfs",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 2,
    "closed_at": "2023-11-06T20:19:04Z",
    "created_at": "2023-11-06T03:28:08Z",
    "updated_at": "2023-11-06T20:19:04Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 1794029975,
      "node_id": "IC_kwDOABII585q7rmX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1794029975",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T03:29:24Z",
      "updated_at": "2023-11-06T05:12:57Z",
      "author_association": "MEMBER",
      "body": "I'll try if @theStack's #28799 helps.\r\n\r\nUpdate: it does! Test finishes in 45 seconds rather than timing out after 240 seconds.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28800#issuecomment-1794029975",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28800"
    },
    {
      "event": "mentioned",
      "id": 10867241269,
      "node_id": "MEE_lADOABII58516SU8zwAAAAKHvPE1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10867241269",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T03:29:25Z"
    },
    {
      "event": "subscribed",
      "id": 10867241273,
      "node_id": "SE_lADOABII58516SU8zwAAAAKHvPE5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10867241273",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T03:29:25Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T05:32:40Z",
      "updated_at": "2023-11-06T05:32:40Z",
      "source": {
        "issue": {
          "id": 1978017104,
          "node_id": "PR_kwDOABII585eoPEg",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28799",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28799/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28799/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28799/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28799",
          "number": 28799,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: cache descriptor ID to avoid repeated descriptor string creation",
          "body": "Right now a wallet descriptor is converted to its string representation (via `Descriptor::ToString`) repeatedly at different instances:\r\n- on finding a `DescriptorScriptPubKeyMan` for a given descriptor (`CWallet::GetDescriptorScriptPubKeyMan`, e.g. used by the `importdescriptors` RPC); the string representation is created once for each spkm in the wallet and at each iteration again for the searched descriptor (`DescriptorScriptPubKeyMan::HasWalletDescriptor`)\r\n- whenever `DescriptorScriptPubKeyMan::GetID()` is called, e.g. in `TopUp` or any instances where a descriptor is written to the DB to determine the database key, also at less obvious places like `FastWalletRescanFilter` etc.\r\n\r\nAs there is no good reason to calculate a fixed descriptor's string/ID more than once, add the ID as a field to `WalletDescriptor` and calculate it immediately at initialization (or deserialization). `HasWalletDescriptor` is changed to compare the spkm's and searched descriptor's ID instead of the string to take use of that.\r\n\r\nThis speeds up the functional test `wallet_miniscript.py` by a factor of 5-6x on my machine (3m30.95s on master vs. 0m38.02s on PR). The recently introduced \"max-size TapMiniscript\" test-case introduced a descriptor that takes 2-3 seconds to create a string representation, so the repeated calls to that were significantly hurting the performance.\r\n\r\nFixes https://github.com/bitcoin/bitcoin/issues/28800.",
          "user": {
            "login": "theStack",
            "id": 91535,
            "node_id": "MDQ6VXNlcjkxNTM1",
            "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/theStack",
            "html_url": "https://github.com/theStack",
            "followers_url": "https://api.github.com/users/theStack/followers",
            "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
            "organizations_url": "https://api.github.com/users/theStack/orgs",
            "repos_url": "https://api.github.com/users/theStack/repos",
            "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/theStack/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignee": {
            "login": "achow101",
            "id": 3782274,
            "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/achow101",
            "html_url": "https://github.com/achow101",
            "followers_url": "https://api.github.com/users/achow101/followers",
            "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
            "organizations_url": "https://api.github.com/users/achow101/orgs",
            "repos_url": "https://api.github.com/users/achow101/repos",
            "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/achow101/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "achow101",
              "id": 3782274,
              "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
              "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/achow101",
              "html_url": "https://github.com/achow101",
              "followers_url": "https://api.github.com/users/achow101/followers",
              "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
              "organizations_url": "https://api.github.com/users/achow101/orgs",
              "repos_url": "https://api.github.com/users/achow101/repos",
              "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/achow101/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28799",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28799",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28799.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28799.patch"
          },
          "closed_at": "2023-11-06T20:19:05Z",
          "created_at": "2023-11-05T23:05:13Z",
          "updated_at": "2023-11-06T20:19:06Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T05:43:28Z",
      "updated_at": "2023-11-06T05:43:28Z",
      "source": {
        "issue": {
          "id": 1978336976,
          "node_id": "I_kwDOABII58516wbQ",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28801",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28801/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28801/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28801/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/28801",
          "number": 28801,
          "state": "closed",
          "state_reason": "completed",
          "title": "p2p_segwit.py fails with thread sanitizer",
          "body": "### Current behaviour\r\n\r\nUsing clang version 15.0.7 on Ubuntu and enabling the thread sanitizer, the `p2p_segwit.py --descriptors` test consistently fails.\r\n\r\nIt fails during the `Subtest: test_wtxid_relay (Segwit active = True)`.\r\n\r\nIt's different from #28800 in that this isn't a timeout. The subtests fails after about 5 seconds.\r\n\r\n```\r\nNode returned unexpected exit code (66) vs (0) when stopping\r\n```\r\n\r\n### Expected behaviour\r\n\r\nDon't fail.\r\n\r\n### Steps to reproduce\r\n\r\n```\r\nexport TSAN_OPTIONS=\"suppressions=$(pwd)/test/sanitizer_suppressions/tsan:halt_on_error=1:second_deadlock_stack=1\"\r\n./autogen\r\n./configure CC=clang CXX=clang++ --enable-suppress-external-warnings --with-sanitizers=thread --without-gui\r\nmake -j33\r\ntest/functional/p2p_segwit.py\r\n```\r\n\r\n### Relevant log output\r\n\r\n```\r\nstderr:\r\nTraceback (most recent call last):\r\n  File \"/home/sjors/dev/bitcoin/test/functional/p2p_segwit.py\", line 2070, in <module>\r\n    SegWitTest().main()\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 155, in main\r\n    exit_code = self.shutdown()\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 314, in shutdown\r\n    self.stop_nodes()\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/test_framework.py\", line 580, in stop_nodes\r\n    node.wait_until_stopped()\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 409, in wait_until_stopped\r\n    wait_until_helper_internal(lambda: self.is_node_stopped(expected_ret_code=expected_ret_code, **kwargs), timeout=timeout, timeout_factor=self.timeout_factor)\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/util.py\", line 264, in wait_until_helper_internal\r\n    if predicate():\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 409, in <lambda>\r\n    wait_until_helper_internal(lambda: self.is_node_stopped(expected_ret_code=expected_ret_code, **kwargs), timeout=timeout, timeout_factor=self.timeout_factor)\r\n  File \"/home/sjors/dev/bitcoin/test/functional/test_framework/test_node.py\", line 389, in is_node_stopped\r\n    assert return_code == expected_ret_code, self._node_msg(\r\nAssertionError: [node 0] Node returned unexpected exit code (66) vs (0) when stopping\r\n```\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nmaster@953d302a242381ae13112ea42f87d57e6e796147\r\n\r\n### Operating system and version\r\n\r\nUbuntu 23.04\r\n\r\n### Machine specifications\r\n\r\nAMD Ryzen 7950x",
          "user": {
            "login": "Sjors",
            "id": 10217,
            "node_id": "MDQ6VXNlcjEwMjE3",
            "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Sjors",
            "html_url": "https://github.com/Sjors",
            "followers_url": "https://api.github.com/users/Sjors/followers",
            "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
            "organizations_url": "https://api.github.com/users/Sjors/orgs",
            "repos_url": "https://api.github.com/users/Sjors/repos",
            "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Sjors/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 2,
          "closed_at": "2023-11-06T06:13:20Z",
          "created_at": "2023-11-06T05:43:27Z",
          "updated_at": "2023-11-06T06:14:32Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1794386419,
      "node_id": "IC_kwDOABII585q9Cnz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1794386419",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-06T09:19:18Z",
      "updated_at": "2023-11-06T09:19:18Z",
      "author_association": "MEMBER",
      "body": "This also happens on the qemu-s390x and valgrind CI tasks",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/28800#issuecomment-1794386419",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28800"
    },
    {
      "event": "closed",
      "id": 10878130926,
      "node_id": "CE_lADOABII58516SU8zwAAAAKIYxru",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10878130926",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "0f5e31ce7d743683527ede1c9c8033e22cd4554a",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/0f5e31ce7d743683527ede1c9c8033e22cd4554a",
      "created_at": "2023-11-06T20:19:04Z"
    }
  ]
}