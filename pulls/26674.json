{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26674",
    "id": 1156404182,
    "node_id": "PR_kwDOABII585E7VPW",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/26674",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/26674.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/26674.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26674/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26674/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/6d7052863a55ff19059bfc1260f75df149eb8455",
    "number": 26674,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "Add reindex=auto flag to automatically reindex corrupt data",
    "user": {
      "login": "AaronDewes",
      "id": 67546953,
      "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
      "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/AaronDewes",
      "html_url": "https://github.com/AaronDewes",
      "followers_url": "https://api.github.com/users/AaronDewes/followers",
      "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
      "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
      "repos_url": "https://api.github.com/users/AaronDewes/repos",
      "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "This allows the reindex flag to be set to auto, which automatically starts a reindex if the chain state or block index are corrupt. This can be especially useful for Raspberry Pi based full nodes, which often experience power outages or similar issues which can corrupt data.\r\n\r\nIt allows full node operators to make Bitcoin Core reindex automatically, without having to worry about removing the reindex flag again. (Which isn't much effort, but can be annoying to forget).\r\n\r\nIn case this error message is printed, pretty much nothing else except a reindex can be done, so adding this feature would make user experience slightly better.\r\n\r\nRebased version of #22072.",
    "labels": [],
    "created_at": "2022-12-09T17:35:02Z",
    "updated_at": "2023-04-25T15:42:07Z",
    "closed_at": "2023-04-25T15:42:06Z",
    "mergeable_state": "unknown",
    "merge_commit_sha": "793c045c9c1776253752cbb829d9fcb88764db51",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "AaronDewes:auto-recovery",
      "ref": "auto-recovery",
      "sha": "6d7052863a55ff19059bfc1260f75df149eb8455",
      "user": {
        "login": "AaronDewes",
        "id": 67546953,
        "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AaronDewes",
        "html_url": "https://github.com/AaronDewes",
        "followers_url": "https://api.github.com/users/AaronDewes/followers",
        "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
        "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
        "repos_url": "https://api.github.com/users/AaronDewes/repos",
        "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 370946537,
        "node_id": "MDEwOlJlcG9zaXRvcnkzNzA5NDY1Mzc=",
        "name": "bitcoin",
        "full_name": "AaronDewes/bitcoin",
        "owner": {
          "login": "AaronDewes",
          "id": 67546953,
          "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
          "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/AaronDewes",
          "html_url": "https://github.com/AaronDewes",
          "followers_url": "https://api.github.com/users/AaronDewes/followers",
          "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
          "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
          "repos_url": "https://api.github.com/users/AaronDewes/repos",
          "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/AaronDewes/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/AaronDewes/bitcoin",
        "archive_url": "https://api.github.com/repos/AaronDewes/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/AaronDewes/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/AaronDewes/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/AaronDewes/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/AaronDewes/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/AaronDewes/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/AaronDewes/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/AaronDewes/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/AaronDewes/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/AaronDewes/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/AaronDewes/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/AaronDewes/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/AaronDewes/bitcoin/events",
        "forks_url": "https://api.github.com/repos/AaronDewes/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/AaronDewes/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/AaronDewes/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/AaronDewes/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/AaronDewes/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/AaronDewes/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/AaronDewes/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/AaronDewes/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/AaronDewes/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/AaronDewes/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/AaronDewes/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/AaronDewes/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/AaronDewes/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/AaronDewes/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/AaronDewes/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/AaronDewes/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:AaronDewes/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/AaronDewes/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/AaronDewes/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/AaronDewes/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/AaronDewes/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/AaronDewes/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/AaronDewes/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/AaronDewes/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/AaronDewes/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/AaronDewes/bitcoin/hooks",
        "svn_url": "https://github.com/AaronDewes/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 215243,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2022-12-09T16:40:22Z",
        "created_at": "2021-05-26T07:34:19Z",
        "updated_at": "2021-10-18T11:25:27Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "9e229a542ff2107be43eff2e4b992841367f0366",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35476,
        "stargazers_count": 70608,
        "watchers_count": 70608,
        "size": 236222,
        "default_branch": "master",
        "open_issues_count": 673,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2023-08-03T00:03:27Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2023-08-02T18:21:18Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26674"
      }
    },
    "author_association": "NONE",
    "draft": false,
    "additions": 17,
    "deletions": 9,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 0,
    "comments": 11
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZkNzA1Mjg2M2E1NWZmMTkwNTliZmMxMjYwZjc1ZGYxNDllYjg0NTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d7052863a55ff19059bfc1260f75df149eb8455",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6d7052863a55ff19059bfc1260f75df149eb8455",
      "tree": {
        "sha": "9dd59edc24bc8c9bbea633ecf3bd7edface24e29",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9dd59edc24bc8c9bbea633ecf3bd7edface24e29"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9e229a542ff2107be43eff2e4b992841367f0366",
          "sha": "9e229a542ff2107be43eff2e4b992841367f0366",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9e229a542ff2107be43eff2e4b992841367f0366"
        }
      ],
      "message": "Add reindex=auto flag to automatically reindex corrupt data\n\nThis allows the reindex flag to be set to auto, which automatically starts a reindex if the chain state or block index are corrupt.\nThis can be especially useful for Raspberry Pi based full nodes, which often experience power outages or similar issues which can corrupt data.\nIt allows full node operators to make Bitcoin Core reindex automatically, without having to worry about removing the reindex flag again. (Which isn't much effort, but can be annoying to forget)\nIn case this error message is printed, pretty much nothing else except a reindex can be done, so adding this feature would make user experience slightly better.",
      "committer": {
        "name": "AaronDewes",
        "email": "aaron.dewes@protonmail.com",
        "date": "2022-12-09T16:39:01Z"
      },
      "author": {
        "name": "Aaron Dewes",
        "email": "aaron.dewes@web.de",
        "date": "2021-05-26T07:32:17Z"
      },
      "sha": "6d7052863a55ff19059bfc1260f75df149eb8455"
    },
    {
      "event": "commented",
      "id": 1344578861,
      "node_id": "IC_kwDOABII585QJKUt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1344578861",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-09T17:35:05Z",
      "updated_at": "2023-04-13T14:44:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#25977](https://github.com/bitcoin/bitcoin/pull/25977) (refactor: Replace `std::optional<bilingual_str>` with `util::Result` by ryanofsky)\n* [#25722](https://github.com/bitcoin/bitcoin/pull/25722) (refactor: Use util::Result class for wallet loading by ryanofsky)\n* [#25665](https://github.com/bitcoin/bitcoin/pull/25665) (refactor: Add util::Result failure values, multiple error and warning messages by ryanofsky)\n* [#25193](https://github.com/bitcoin/bitcoin/pull/25193) (indexes: Read the locator's top block during init, allow interaction with reindex-chainstate by mzumsande)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1344578861",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "commented",
      "id": 1344736570,
      "node_id": "IC_kwDOABII585QJw06",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1344736570",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-09T20:08:20Z",
      "updated_at": "2022-12-09T20:08:20Z",
      "author_association": "MEMBER",
      "body": "Not an argument against this PR, but I feel that if you're running on a system where the chainstate is continuously corrupted, you should investigate what's causing that and/or switch to non-broken hardware.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1344736570",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T09:35:45Z",
      "updated_at": "2022-12-10T09:35:45Z",
      "source": {
        "issue": {
          "id": 1313204802,
          "node_id": "PR_kwDOABII58472hm-",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25665",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25665/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25665/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25665/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25665",
          "number": 25665,
          "state": "open",
          "state_reason": null,
          "title": "refactor: Add util::Result failure values, multiple error and warning messages",
          "body": "Add `util::Result` support for returning more error information and make use of it in [LoadChainstate method](https://github.com/bitcoin/bitcoin/pull/25665/commits/584e3fa4ea8ca15b3a8b46e023f218c5e0ed73b0) as an initial application. Followup PR [#25722](https://github.com/bitcoin/bitcoin/pull/25722) uses it more broadly to return errors and warnings from wallet loading functions as well.\r\n\r\nThis change adds two major features to the result class:\r\n\r\n- For better error handling, adds the ability to return a value on failure, not just a value on success. This is a key missing feature that makes the result class not useful for functions like `LoadChainstate()` which produce different errors that need to be handled differently [^1].\r\n\r\n[^1]: Ability to return error values was actually present in the original implementation of [#25218](https://github.com/bitcoin/bitcoin/pull/25218), but unfortunately removed in later iterations.\r\n\r\n- For better error reporting, adds the ability to return warning messages and multiple errors, not just a single error string. This provides a way for functions to report errors and warnings in a standard way, and simplifies interfaces:\r\n\r\n    ```diff\r\n    -virtual std::unique_ptr<Wallet> loadWallet(const std::string& name, bilingual_str& error, std::vector<bilingual_str>& warnings) = 0;\r\n    +virtual util::Result<std::unique_ptr<Wallet>> loadWallet(const std::string& name) = 0;\r\n    ```\r\n\r\n    ```diff\r\n    -std::unique_ptr<WalletDatabase> MakeDatabase(const fs::path& path, const DatabaseOptions& options, DatabaseStatus& status, bilingual_str& error);\r\n    +util::Result<std::unique_ptr<WalletDatabase>, DatabaseError> MakeDatabase(const fs::path& path, const DatabaseOptions& options);\r\n   ```\r\n\r\nThis change also makes some more minor improvements:\r\n\r\n- Smaller type size. `util::Result<int>` is 16 bytes, and `util::Result<void>` is 8 bytes. Previously both were 72 bytes.\r\n\r\n- Broader type compatibility. Supports noncopyable and nonmovable success and error types.\r\n\r\n### Alternatives & design notes\r\n\r\nThe main goal for the `util::Result` class is to provide a standard way for functions to report error and warnings strings. The interface tries to make it easy to provide detailed error feedback to end users, without cluttering code or making it harder to return other result information. There have been multiple iterations of the design using different internal representations and providing different capabilities:\r\n\r\n|   | Representation (approximate)                   | Notes |\r\n|---|------------------------------------------------|-------|\r\n| _(1)_ | `tuple<T,optional<bilingual_str>>`        | Original #25218 implementation in da98fd2efc1a6b9c6e876cf3e227a8c2e9a10827. Good capabilities, but larger type size. Supports error standardized error reporting and customized error handling with failure values. |\r\n| _(2)_ | `variant<T,bilingual_str>`                | Final #25218 implementation in 7a45c33d1f8a758850cf8e7bd6ad508939ba5c0d. No support for returning failure values so not useful in many cases.\r\n| _(3)_ | `variant<monostate,T,F>`                 | Pending #25601 implementation that allows choosing whether to use standardized error reporting or return custom failure values, but doesn't support having both at the same time, like approaches _(1)_, _(4)_, _(5)_, _(6)_ do. |\r\n | _(4)_ | `tuple<variant<T,F>,bilingual_str>`      | Original #25608 implementation in c29d3008de9314dd463ed08e8bff39fe55324498. Basically the same as _(1)_ except it uses separate success and failure types instead of the same type. Using separate success and failure types makes the result class a little less flexible but can help avoid some ambiguity and inconsistent result states. |\r\n| _(5)_ | `tuple<T,optional<bilingual_str>>`        | Final #25608 implementation in dd91f294206ac87b213d23bb76656a0a5f0f4781. Essentially the same as original implementation _(1)_ except has some usability improvements. |\r\n| _(6)_ | `tuple<T,unique_ptr<tuple<F,bilingual_str>>` | Pending #25665 implementation (this PR). Supports returning failure values, uses separate success and failure types to avoid ambiguity, uses `unique_ptr` to reduce result type size, and avoids heap allocation in the happy path. |\r\n\r\n### Prior discussions & history\r\n\r\n- _furszy_ introduced a `BResult` class providing a standard error reporting mechanism in [#25218](https://github.com/bitcoin/bitcoin/pull/25218). It was renamed to `util::Result` in [#25721](https://github.com/bitcoin/bitcoin/pull/25721) but kept the same representation and capabilities.\r\n\r\n- _MarcoFalke_ suggested using `BResult` for the `LoadChainstate` function in [#25308 (comment)](https://github.com/bitcoin/bitcoin/pull/25308#issuecomment-1181674645). Inability to use `BResult` there due to lack of support for failure values led to initial work on [#25608](https://github.com/bitcoin/bitcoin/pull/25608).\r\n\r\n- _w0xlt_ wrote a `StructuredResult` class in [#25308](https://github.com/bitcoin/bitcoin/pull/25601) adding the ability to return failure values but sacrificing standard error reporting, which led to more work on [#25608](https://github.com/bitcoin/bitcoin/pull/25608).\r\n\r\n- _martinus_ suggested a space optimization in [#25608 (comment)](https://github.com/bitcoin/bitcoin/pull/25608#discussion_r921049409) that also made it easier to support distinct failure & success types, leading to [#25665](https://github.com/bitcoin/bitcoin/pull/25665) as a replacement for [#25608](https://github.com/bitcoin/bitcoin/pull/25608).",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 19,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25665",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25665",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25665.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25665.patch"
          },
          "created_at": "2022-07-21T12:46:09Z",
          "updated_at": "2023-08-02T23:52:38Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T09:57:11Z",
      "updated_at": "2022-12-10T09:57:11Z",
      "source": {
        "issue": {
          "id": 1273097730,
          "node_id": "PR_kwDOABII5845wIiV",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25386",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25386/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25386/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25386/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25386",
          "number": 25386,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Extract MIB_BYTES constant for init.cpp",
          "body": "This is a common concept which is more communicative and explicit if articulated, IMO.\r\n\r\nThis could be applied elsewhere if there is a better place to reference it in common, but I don't see it. \r\n\r\nPulled from #25315 to ease review there.",
          "user": {
            "login": "Empact",
            "id": 5470,
            "node_id": "MDQ6VXNlcjU0NzA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5470?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/Empact",
            "html_url": "https://github.com/Empact",
            "followers_url": "https://api.github.com/users/Empact/followers",
            "following_url": "https://api.github.com/users/Empact/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/Empact/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/Empact/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/Empact/subscriptions",
            "organizations_url": "https://api.github.com/users/Empact/orgs",
            "repos_url": "https://api.github.com/users/Empact/repos",
            "events_url": "https://api.github.com/users/Empact/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/Empact/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25386",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25386",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25386.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25386.patch"
          },
          "closed_at": "2023-04-25T15:41:05Z",
          "created_at": "2022-06-16T06:09:20Z",
          "updated_at": "2023-04-25T15:41:06Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1345205623,
      "node_id": "IC_kwDOABII585QLjV3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345205623",
      "actor": {
        "login": "AaronDewes",
        "id": 67546953,
        "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AaronDewes",
        "html_url": "https://github.com/AaronDewes",
        "followers_url": "https://api.github.com/users/AaronDewes/followers",
        "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
        "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
        "repos_url": "https://api.github.com/users/AaronDewes/repos",
        "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T10:03:06Z",
      "updated_at": "2022-12-10T10:03:06Z",
      "author_association": "NONE",
      "body": "> Not an argument against this PR, but I feel that if you're running on a system where the chainstate is continuously corrupted, you should investigate what's causing that and/or switch to non-broken hardware.\r\n\r\nThis was also mentioned in the original PR, but in my opinion, it helps especially for the Raspberry Pi users, who often don't have protections against power outages (Using software like runcitadel or Umbrel). So while checking the hardware should be necessary, this could help improve the user experience for users on such projects or users who are fine with the risk.",
      "user": {
        "login": "AaronDewes",
        "id": 67546953,
        "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AaronDewes",
        "html_url": "https://github.com/AaronDewes",
        "followers_url": "https://api.github.com/users/AaronDewes/followers",
        "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
        "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
        "repos_url": "https://api.github.com/users/AaronDewes/repos",
        "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345205623",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T10:11:29Z",
      "updated_at": "2022-12-10T10:11:29Z",
      "source": {
        "issue": {
          "id": 1245716041,
          "node_id": "PR_kwDOABII5844Umrw",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25193",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25193/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25193/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25193/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25193",
          "number": 25193,
          "state": "closed",
          "state_reason": null,
          "title": "indexes: Read the locator's top block during init, allow interaction with reindex-chainstate",
          "body": "This makes two improvements to the index init phase:\r\n\r\n**1) Prevent index corruption in case a reorg happens when the index was switched off**:\r\nThis is done by reading in the top block stored in the locator instead of looking for a fork point already in `BaseIndex::Init()`.\r\nBefore, we'd just go back to the fork point by calling `FindForkInGlobalIndex()`, which would have corrupted the coinstatsindex because its saved muhash needs to be reverted step by step by un-applying all blocks in between, which wasn't done before. This is now being done a bit later in  `ThreadSync()`, which has existing logic to call the custom `Rewind()` method when going back along the chain to the forking point (thanks ryanofsky for pointing this out to me!).\r\n\r\n**2) Allow using the `-reindex-chainstate` option without needing to disabling indexes**:\r\nWith `BaseIndex::Init()` not calling `FindForkInGlobalIndex()` anymore, we can allow `reindex-chainstate` with active indexes. `reindex-chainstate` deletes the chain and rebuilds it later in `ThreadImport`, so there is no chain available during `BaseIndex::Init()`, which would lead to problems (see #24789).\r\nBut now we'll only need the chain a bit later in `BaseIndex::ThreadSync`, which will wait for the reindex-chainstate in `ThreadImport` to finish and will continue syncing after that.",
          "user": {
            "login": "mzumsande",
            "id": 48763452,
            "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
            "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/mzumsande",
            "html_url": "https://github.com/mzumsande",
            "followers_url": "https://api.github.com/users/mzumsande/followers",
            "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
            "organizations_url": "https://api.github.com/users/mzumsande/orgs",
            "repos_url": "https://api.github.com/users/mzumsande/repos",
            "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/mzumsande/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 97470796,
              "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
              "name": "UTXO Db and Indexes",
              "color": "fbca04",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 15,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25193",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25193",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25193.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25193.patch"
          },
          "closed_at": "2023-05-17T17:27:55Z",
          "created_at": "2022-05-23T21:27:22Z",
          "updated_at": "2023-06-29T09:30:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1345231674,
      "node_id": "IC_kwDOABII585QLps6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345231674",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T10:22:00Z",
      "updated_at": "2022-12-10T10:22:00Z",
      "author_association": "MEMBER",
      "body": "Concept ~0\r\n\r\n> you should investigate what's causing that and/or switch to non-broken hardware.\r\n\r\nI agree.\r\n\r\n> (Using software like runcitadel or Umbrel). \r\n\r\nSounds like an option that might just be (ab)used by node in a box producers, (i.e on by default) to stop people complaining to them about hardware issues.\r\n\r\n> protections against power outages \r\n> or users who are fine with the risk.\r\n\r\nUsers who are fine with these risks can also introduce their own solutions to this problem (i.e some system service/watchdog that doesn't need to be a part of Bitcoin Core). There are also non-software solutions to freuqent/sudden power outages, i.e a UPS.\r\n\r\nI don't think allowing users to blindly ignore known/recurring problems and continue on, is something we should be supporting.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345231674",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "commented",
      "id": 1345234418,
      "node_id": "IC_kwDOABII585QLqXy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345234418",
      "actor": {
        "login": "AaronDewes",
        "id": 67546953,
        "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AaronDewes",
        "html_url": "https://github.com/AaronDewes",
        "followers_url": "https://api.github.com/users/AaronDewes/followers",
        "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
        "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
        "repos_url": "https://api.github.com/users/AaronDewes/repos",
        "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T10:35:28Z",
      "updated_at": "2022-12-10T10:35:28Z",
      "author_association": "NONE",
      "body": "> i.e some system service/watchdog that doesn't need to be a part of Bitcoin Core\r\n\r\nYes, but implementing something like this would probably be a lot more complicated than just having this feature in Bitcoin Core (It would probably work by reading log messages, but if these change, the script would need to be changed, also, such a script would also need to check if the database still needs a reindex when Core restarts).\r\n\r\n> I don't think allowing users to blindly ignore known/recurring problems and continue on, is something we should be supporting.\r\n\r\nFor some, it may be a one-time issue. And in my opinion, it could benefit node-in-a-box providers a lot. I wouldn't call that \"abusing a feature\". It definitely won't help with users having HW issues.\r\n\r\nAs a former member of the Umbrel team, I know that on such software, HW issues caused a lot of other problems. A reindex was in almost every case only needed because of a power outage, which happens sometimes, but not often for most users.",
      "user": {
        "login": "AaronDewes",
        "id": 67546953,
        "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AaronDewes",
        "html_url": "https://github.com/AaronDewes",
        "followers_url": "https://api.github.com/users/AaronDewes/followers",
        "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
        "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
        "repos_url": "https://api.github.com/users/AaronDewes/repos",
        "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345234418",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "commented",
      "id": 1345234725,
      "node_id": "IC_kwDOABII585QLqcl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345234725",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T10:37:28Z",
      "updated_at": "2022-12-10T10:38:14Z",
      "author_association": "MEMBER",
      "body": "I think it would be more useful to *refuse* a reindex on two subsequent starts, see https://github.com/bitcoin/bitcoin/pull/22072#issuecomment-849315383 . It is common for users to set the flag, then start, wait for the reindex to finish and then forget about the flag. On the next restart they will see that their whole sync progress is thrown away without warning, forcing them to wait hours/days/weeks (depending on their hardware) for no reason.",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345234725",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "commented",
      "id": 1345234999,
      "node_id": "IC_kwDOABII585QLqg3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345234999",
      "actor": {
        "login": "AaronDewes",
        "id": 67546953,
        "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AaronDewes",
        "html_url": "https://github.com/AaronDewes",
        "followers_url": "https://api.github.com/users/AaronDewes/followers",
        "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
        "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
        "repos_url": "https://api.github.com/users/AaronDewes/repos",
        "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T10:39:02Z",
      "updated_at": "2022-12-10T10:39:02Z",
      "author_association": "NONE",
      "body": "> I also think it would be more useful to refuse a reindex on two subsequent starts\r\n\r\nWhere would you store such data? In a separate lock file? ",
      "user": {
        "login": "AaronDewes",
        "id": 67546953,
        "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AaronDewes",
        "html_url": "https://github.com/AaronDewes",
        "followers_url": "https://api.github.com/users/AaronDewes/followers",
        "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
        "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
        "repos_url": "https://api.github.com/users/AaronDewes/repos",
        "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345234999",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "commented",
      "id": 1345235360,
      "node_id": "IC_kwDOABII585QLqmg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345235360",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T10:41:08Z",
      "updated_at": "2022-12-10T10:41:08Z",
      "author_association": "MEMBER",
      "body": "It might be sufficient to just shut down right after the reindex has started",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345235360",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "commented",
      "id": 1345236066,
      "node_id": "IC_kwDOABII585QLqxi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345236066",
      "actor": {
        "login": "AaronDewes",
        "id": 67546953,
        "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AaronDewes",
        "html_url": "https://github.com/AaronDewes",
        "followers_url": "https://api.github.com/users/AaronDewes/followers",
        "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
        "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
        "repos_url": "https://api.github.com/users/AaronDewes/repos",
        "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T10:45:31Z",
      "updated_at": "2022-12-10T10:45:31Z",
      "author_association": "NONE",
      "body": "> It might be sufficient to just shut down right after the reindex has started\r\n\r\nDo you mean after it finished? I was talking about how Core should know it reindexed on the previous start. I don't understand how a shutdown could help?",
      "user": {
        "login": "AaronDewes",
        "id": 67546953,
        "node_id": "MDQ6VXNlcjY3NTQ2OTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/67546953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/AaronDewes",
        "html_url": "https://github.com/AaronDewes",
        "followers_url": "https://api.github.com/users/AaronDewes/followers",
        "following_url": "https://api.github.com/users/AaronDewes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/AaronDewes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/AaronDewes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/AaronDewes/subscriptions",
        "organizations_url": "https://api.github.com/users/AaronDewes/orgs",
        "repos_url": "https://api.github.com/users/AaronDewes/repos",
        "events_url": "https://api.github.com/users/AaronDewes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/AaronDewes/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345236066",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "commented",
      "id": 1345237799,
      "node_id": "IC_kwDOABII585QLrMn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1345237799",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-12-10T10:54:59Z",
      "updated_at": "2022-12-10T10:54:59Z",
      "author_association": "MEMBER",
      "body": "It just seems better UX if the user can do both edits (adding and removing the flag) in the shortest time possible.\r\n\r\nPrevious workflow:\r\n\r\n* User adds reindex -> reindex for 2 weeks -> ... -> Restart node -> Another accidental reindex for 2 weeks -> ...\r\n\r\nProposed workflow:\r\n\r\n* User adds reindex -> Program shuts down -> User removes reindex -> Program continues reindex (just once, instead of N times)",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1345237799",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-21T04:31:24Z",
      "updated_at": "2023-01-21T04:31:24Z",
      "source": {
        "issue": {
          "id": 1359327472,
          "node_id": "PR_kwDOABII584-PJqZ",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25977",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25977/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25977/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25977/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25977",
          "number": 25977,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Replace `std::optional<bilingual_str>` with `util::Result`",
          "body": "Replace uses of `std::optional<bilingual_str>` with `util::Result` as suggested https://github.com/bitcoin/bitcoin/pull/25648#discussion_r936311768, https://github.com/bitcoin/bitcoin/pull/27632#discussion_r1192007516, https://github.com/bitcoin/bitcoin/pull/27632#discussion_r1194858242, https://github.com/bitcoin/bitcoin/pull/24313#discussion_r1204047087\r\n\r\n\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignee": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "ryanofsky",
              "id": 7133040,
              "node_id": "MDQ6VXNlcjcxMzMwNDA=",
              "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/ryanofsky",
              "html_url": "https://github.com/ryanofsky",
              "followers_url": "https://api.github.com/users/ryanofsky/followers",
              "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
              "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
              "repos_url": "https://api.github.com/users/ryanofsky/repos",
              "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25977",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25977",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25977.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25977.patch"
          },
          "closed_at": "2023-05-26T12:09:41Z",
          "created_at": "2022-09-01T19:47:18Z",
          "updated_at": "2023-05-29T08:12:12Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-21T05:17:16Z",
      "updated_at": "2023-01-21T05:17:16Z",
      "source": {
        "issue": {
          "id": 1320033494,
          "node_id": "PR_kwDOABII5848NBt5",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25722",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25722/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25722/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25722/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25722",
          "number": 25722,
          "state": "open",
          "state_reason": null,
          "title": "refactor: Use util::Result class for wallet loading",
          "body": "**This is based on #25665.** The non-base commits are:\r\n\r\n- [`1a540b591c74` refactor: Use util::Result class for wallet loading](https://github.com/bitcoin/bitcoin/pull/25722/commits/1a540b591c742594cca285ef9b8b16c6d8507d58)\r\n\r\n---\r\n\r\nWallet loading functions up and down the stack have lots of error and warning parameters, and return error information in different ways. This PR makes them uniformly return `util::Result`, without changing behavior.",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25722",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25722",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25722.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25722.patch"
          },
          "created_at": "2022-07-27T19:26:58Z",
          "updated_at": "2023-08-02T15:08:15Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1522021327,
      "node_id": "IC_kwDOABII585auDPP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1522021327",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-25T15:42:06Z",
      "updated_at": "2023-04-25T15:42:06Z",
      "author_association": "MEMBER",
      "body": "The feature request didn't seem to attract much attention in the past. Also, the issue seems not important enough right now to keep it sitting around idle in the list of open issues.\r\n\r\nClosing due to lack of interest. Pull requests with improvements are always welcome.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26674#issuecomment-1522021327",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26674"
    },
    {
      "event": "closed",
      "id": 9093956549,
      "node_id": "CE_lADOABII585Yo_9jzwAAAAIeCsPF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9093956549",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-25T15:42:07Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-03T12:41:33Z",
      "updated_at": "2023-05-03T12:41:33Z",
      "source": {
        "issue": {
          "id": 1590648067,
          "node_id": "PR_kwDOABII585KSHhz",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27125",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27125/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27125/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27125/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27125",
          "number": 27125,
          "state": "closed",
          "state_reason": null,
          "title": "refactor, kernel: Decouple ArgsManager from blockstorage",
          "body": "The libbitcoin_kernel library should not rely on the `ArgsManager`, but rather use option structs that can be passed to the various classes it uses. This PR removes reliance on the `ArgsManager` from the `blockstorage.*` files. Like similar prior work, it uses the options struct in the `BlockManager` that can be populated with `ArgsManager` values.\r\n\r\nSome related prior work: https://github.com/bitcoin/bitcoin/pull/26889 https://github.com/bitcoin/bitcoin/pull/25862 https://github.com/bitcoin/bitcoin/pull/25527 https://github.com/bitcoin/bitcoin/pull/25487\r\n\r\nRelated PR removing blockstorage globals: https://github.com/bitcoin/bitcoin/pull/25781",
          "user": {
            "login": "TheCharlatan",
            "id": 8421793,
            "node_id": "MDQ6VXNlcjg0MjE3OTM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/TheCharlatan",
            "html_url": "https://github.com/TheCharlatan",
            "followers_url": "https://api.github.com/users/TheCharlatan/followers",
            "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
            "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
            "repos_url": "https://api.github.com/users/TheCharlatan/repos",
            "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 35,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27125",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27125",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27125.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27125.patch"
          },
          "closed_at": "2023-05-11T09:29:03Z",
          "created_at": "2023-02-19T11:10:11Z",
          "updated_at": "2023-05-11T09:29:03Z"
        },
        "type": "issue"
      }
    }
  ],
  "comments": []
}