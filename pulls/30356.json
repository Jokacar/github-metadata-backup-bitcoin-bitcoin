{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356",
    "id": 1943909110,
    "node_id": "PR_kwDOABII585z3bL2",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30356",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30356.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30356.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/e67e4669a9e263d90f0e276c8e65e93c39170375",
    "number": 30356,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor: add coinbase constraints to BlockAssembler::Options",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "When generating a block template through e.g. getblocktemplate RPC, we reserve 4000 weight units and 400 sigops. Pools use this space for their coinbase outputs.\r\n\r\nAt least one pool patched their Bitcoin Core node to adjust these hardcoded values. They eventually [produced an invalid block](https://bitcoin.stackexchange.com/questions/117837/how-many-sigops-are-in-the-invalid-block-783426) which exceeded the sigops limit.\r\n\r\nThe existince of such patches suggests it may be useful to make this value configurable. This PR would make such a change easier. However, the main motivation is that in the Stratum v2 spec requires the pool to communicate the maximum bytes they intend\r\nto add to the coinbase outputs.\r\n\r\nSpecifically the `CoinbaseOutputDataSize` message which is part of the [Template Distribution Protocol](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md#71-coinbaseoutputdatasize-client---server) has a field `coinbase_output_max_additional_size`.\r\n\r\nA proposed change to the spec adds the max additional sigops as well: https://github.com/stratum-mining/sv2-spec/pull/86. Whether that change makes it into the spec is not important though, as adding both to `BlockAssembler::Options` makes sense.\r\n\r\nThe first commit is a test refactor followup for #30335, related to the code that's changed here, but not required.\r\n\r\nThe second commit adds `coinbase_output_max_additional_size` and `coinbase_output_max_additional_sigops ` to `BlockAssembler::Options`, with their defaults set to the existing hardcoded values. \r\n\r\nThe third commit introduces `util/mining.h` as a place to store these defaults in a place where both the RPC and node interface can access them. I picked `libbitcoin_util` instead of `libbitcoin_common` to avoid a future dependency of the Stratum v2 Template Provider (#29432) on `libbitcoin_common`. The latter goal requires additional changes and is mostly just nice to have (the important bit is not depending on `libbitcoin_node`).\r\n\r\nThe last commit adds the two arguments to the mining interface. By default it uses the originally hardcoded values, and no existing caller overrides these defaults. This changes in #29432.",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      }
    ],
    "created_at": "2024-06-28T08:56:31Z",
    "updated_at": "2024-07-12T10:30:37Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "799733a235d511bd8708c3fe3e9a3004343e7330",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Sjors:2024/06/coinbase-constraints",
      "ref": "2024/06/coinbase-constraints",
      "sha": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 92390696,
        "node_id": "MDEwOlJlcG9zaXRvcnk5MjM5MDY5Ng==",
        "name": "bitcoin",
        "full_name": "Sjors/bitcoin",
        "owner": {
          "login": "Sjors",
          "id": 10217,
          "node_id": "MDQ6VXNlcjEwMjE3",
          "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Sjors",
          "html_url": "https://github.com/Sjors",
          "followers_url": "https://api.github.com/users/Sjors/followers",
          "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
          "organizations_url": "https://api.github.com/users/Sjors/orgs",
          "repos_url": "https://api.github.com/users/Sjors/repos",
          "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Sjors/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/Sjors/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Sjors/bitcoin",
        "archive_url": "https://api.github.com/repos/Sjors/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Sjors/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Sjors/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Sjors/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Sjors/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Sjors/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Sjors/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Sjors/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Sjors/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Sjors/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Sjors/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Sjors/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Sjors/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Sjors/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Sjors/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Sjors/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Sjors/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Sjors/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Sjors/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Sjors/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Sjors/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Sjors/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Sjors/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Sjors/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Sjors/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Sjors/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Sjors/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Sjors/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Sjors/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Sjors/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Sjors/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Sjors/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Sjors/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Sjors/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Sjors/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Sjors/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Sjors/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Sjors/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Sjors/bitcoin/hooks",
        "svn_url": "https://github.com/Sjors/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 241966,
        "default_branch": "sv2",
        "open_issues_count": 5,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": false,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-12T09:28:08Z",
        "created_at": "2017-05-25T10:05:54Z",
        "updated_at": "2024-07-11T14:15:11Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "9b480f7a25a737c9c4ebc33401e94d66c2da9ec3",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35631,
        "stargazers_count": 77168,
        "watchers_count": 77168,
        "size": 263003,
        "default_branch": "master",
        "open_issues_count": 681,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-07-12T10:37:29Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-07-12T09:28:52Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 53,
    "deletions": 10,
    "changed_files": 7,
    "commits": 4,
    "review_comments": 10,
    "comments": 11
  },
  "events": [
    {
      "event": "commented",
      "id": 2196446059,
      "node_id": "IC_kwDOABII586C6xtr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2196446059",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T08:56:34Z",
      "updated_at": "2024-07-11T14:48:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30356).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2211824602) |\n| Concept ACK | [itornaza](https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2167070268) |\n| Approach ACK | [tdb3](https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2148873843) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30409](https://github.com/bitcoin/bitcoin/pull/30409) (Introduce waitTipChanged() mining interface, replace RPCNotifyBlockChange and drop CRPCSignals by Sjors)\n* [#29432](https://github.com/bitcoin/bitcoin/pull/29432) (Stratum v2 Template Provider (take 3) by Sjors)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2196446059",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "labeled",
      "id": 13328705456,
      "node_id": "LE_lADOABII586N2u5qzwAAAAMac-ew",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13328705456",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-28T08:56:36Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "reviewed",
      "id": 2148873843,
      "node_id": "PRR_kwDOABII586AFTZz",
      "url": null,
      "actor": null,
      "commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK\r\nThis adds flexibility for SV2, and having less magic numbers is better.  I support adding a configuration parameter for this (would prevent others from needing to fork).\r\n\r\nLeft a couple small nits for now, but plan to test/exercise in more detail.",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2148873843",
      "submitted_at": "2024-06-28T21:14:22Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "commented",
      "id": 2198761717,
      "node_id": "IC_kwDOABII586DDnD1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2198761717",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-30T21:23:44Z",
      "updated_at": "2024-07-01T08:37:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I picked libbitcoin_util instead of libbitcoin_common to avoid a future dependency of the Stratum v2 Template Provider (https://github.com/bitcoin/bitcoin/pull/29432) on libbitcoin_common. The latter goal requires additional changes and is mostly just nice to have (the important bit is not depending on libbitcoin_node).\r\n\r\nSo I guess it should ideally only have the kernel as a dependency? It is not quite clear to me yet how this is going to be achieved. The current mining interface requires knowledge of a `CBlockTemplate`, which I don't think should be part of the kernel in the future.\r\n\r\nEDIT: To be clear, since the constants are given a new header, there is no new hard library dependency introduced no matter which directory you choose to put them into. It just feels weird to put something very specific to the inner workings of our mining code into a directory called `util`.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2198761717",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "reviewed",
      "id": 2150772443,
      "node_id": "PRR_kwDOABII586AMi7b",
      "url": null,
      "actor": null,
      "commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2150772443",
      "submitted_at": "2024-07-01T08:37:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "commented",
      "id": 2199576083,
      "node_id": "IC_kwDOABII586DGt4T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2199576083",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T08:42:56Z",
      "updated_at": "2024-07-01T08:42:56Z",
      "author_association": "MEMBER",
      "body": "@TheCharlatan happy to put the constants somewhere else... see https://github.com/Sjors/bitcoin/pull/47 for an attempt at introducing `libbitcoin_net`, which might reduce the dependencies of a future `libbitcoin_sv2` to `libbitcoin_net`, `libbitcoin_crypto` and `libbitcoin_util`. I got stuck there on where to put `XOnlyPubKey` and a few other things.\r\n\r\nA similar problem might exist for `CBlockTemplate` if I actually tried to make `libbitcoin_sv2`, which I haven't done yet.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2199576083",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "mentioned",
      "id": 13347593594,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMblB16",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13347593594",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T08:42:57Z"
    },
    {
      "event": "subscribed",
      "id": 13347593615,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMblB2P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13347593615",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T08:42:57Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13349130413,
      "node_id": "HRFPE_lADOABII586N2u5qzwAAAAMbq5Ct",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349130413",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:54Z"
    },
    {
      "event": "commented",
      "id": 2199791658,
      "node_id": "IC_kwDOABII586DHigq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2199791658",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:56Z",
      "updated_at": "2024-07-01T10:35:03Z",
      "author_association": "MEMBER",
      "body": "I renamed `coinbase_output_max_additional_size` to `coinbase_max_additional_weight`. With the current [Stratum v2 spec](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md#71-coinbaseoutputdatasize-client---server) the latter could be calculated as follows:\r\n\r\n`coinbase_max_additional_weight = (coinbase_output_max_additional_size + 100 + 0 + 2) * 4`\r\n\r\n- `coinbase_output_max_additional_size * 4`: Coinbase outputs are not part of the witness so their weight is simply the number of bytes specificied in the `CoinbaseOutputDataSize` message times 4.\r\n\r\n- `100 * 4`: the spec also requires taking into account a \"maximally-sized (100 byte) coinbase field\", which refers to the _scriptSig_ of the coinbase. It currently doesn't allow for setting a custom coinbase _witness_.\r\n\r\n- `0 * 4`: a [CompactSize](https://bitcoin.stackexchange.com/a/114585/4948) encodes the size of the above \"coinbase field\" (the spec is ambiguous whether this is included). Given the maximum of 100 its always encoded with 1 byte, so no _additional_ weight units are needed.\r\n\r\n- `2 * 4`: \"Further, the Template Provider MUST consider the maximum additional bytes required in the output count variable-length integer in the coinbase transaction when complying with the size limits.\" - this is tricky because we don't know how _many_ outputs the pool intends to add, and we might want to add an arbitrary number of outputs ourselves. Since there can't be more than 1 million outputs, 3 bytes is always enough to encode the number of outputs. So that's 2 _additional_ bytes in the worst case.\r\n\r\nThe spec should probably be clarified a bit, cc @TheBlueMatt, @Fi3.\r\n\r\nIn any case, tracking coinbase reserved space in term of weight units here should be enough to support Stratum v2 later, and even allow for using the coinbase witness.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2199791658",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "mentioned",
      "id": 13349131267,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMbq5QD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349131267",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:58Z"
    },
    {
      "event": "subscribed",
      "id": 13349131283,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMbq5QT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349131283",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:58Z"
    },
    {
      "event": "mentioned",
      "id": 13349131308,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMbq5Qs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349131308",
      "actor": {
        "login": "Fi3",
        "id": 6207037,
        "node_id": "MDQ6VXNlcjYyMDcwMzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6207037?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fi3",
        "html_url": "https://github.com/Fi3",
        "followers_url": "https://api.github.com/users/Fi3/followers",
        "following_url": "https://api.github.com/users/Fi3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fi3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fi3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fi3/subscriptions",
        "organizations_url": "https://api.github.com/users/Fi3/orgs",
        "repos_url": "https://api.github.com/users/Fi3/repos",
        "events_url": "https://api.github.com/users/Fi3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fi3/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:58Z"
    },
    {
      "event": "subscribed",
      "id": 13349131320,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMbq5Q4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13349131320",
      "actor": {
        "login": "Fi3",
        "id": 6207037,
        "node_id": "MDQ6VXNlcjYyMDcwMzc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6207037?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Fi3",
        "html_url": "https://github.com/Fi3",
        "followers_url": "https://api.github.com/users/Fi3/followers",
        "following_url": "https://api.github.com/users/Fi3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Fi3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Fi3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Fi3/subscriptions",
        "organizations_url": "https://api.github.com/users/Fi3/orgs",
        "repos_url": "https://api.github.com/users/Fi3/repos",
        "events_url": "https://api.github.com/users/Fi3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Fi3/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-01T10:30:58Z"
    },
    {
      "event": "labeled",
      "id": 13372222329,
      "node_id": "LE_lADOABII586N2u5qzwAAAAMdC-t5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13372222329",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-02T21:49:44Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13390001428,
      "node_id": "HRFPE_lADOABII586N2u5qzwAAAAMeGzUU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13390001428",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T06:35:43Z"
    },
    {
      "event": "commented",
      "id": 2208225151,
      "node_id": "IC_kwDOABII586Dntd_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2208225151",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T06:36:04Z",
      "updated_at": "2024-07-04T06:36:04Z",
      "author_association": "MEMBER",
      "body": "Rebased after #30324.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2208225151",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "commented",
      "id": 2208252561,
      "node_id": "IC_kwDOABII586Dn0KR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2208252561",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T06:57:34Z",
      "updated_at": "2024-07-04T06:57:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "Is there a reason why\r\n```\r\nBlockAssembler::Options options;\r\nApplyArgsManOptions(gArgs, options);\r\n```\r\nhas to be inside the block assembler class? Why not construct them externally and pass a reference of the options to the `BlockAssembler`? This seems a bit more efficient, since the options don't have to be constructed and the arguments not read every time a template is retrieved.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2208252561",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "unlabeled",
      "id": 13390274883,
      "node_id": "UNLE_lADOABII586N2u5qzwAAAAMeH2FD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13390274883",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T07:03:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2208349301,
      "node_id": "IC_kwDOABII586DoLx1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2208349301",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T07:59:10Z",
      "updated_at": "2024-07-04T07:59:10Z",
      "author_association": "MEMBER",
      "body": "cc @glozow who added this as part of #26695.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2208349301",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "mentioned",
      "id": 13390912505,
      "node_id": "MEE_lADOABII586N2u5qzwAAAAMeKRv5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13390912505",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T07:59:11Z"
    },
    {
      "event": "subscribed",
      "id": 13390912525,
      "node_id": "SE_lADOABII586N2u5qzwAAAAMeKRwN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13390912525",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T07:59:12Z"
    },
    {
      "event": "commented",
      "id": 2208382368,
      "node_id": "IC_kwDOABII586DoT2g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2208382368",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-04T08:17:31Z",
      "updated_at": "2024-07-04T08:17:31Z",
      "author_association": "MEMBER",
      "body": "> Is there a reason why\r\n> \r\n> ```\r\n> BlockAssembler::Options options;\r\n> ApplyArgsManOptions(gArgs, options);\r\n> ```\r\n> \r\n> has to be inside the block assembler class?\r\n\r\nIt doesn't need to be inside `BlockAssembler`. Prior to #26695, the ctor was using the global `gArgs` to decide on parameters (yuck!). We didn't have the node/*args kernel/*opts conventions at the time and I was pretty happy adding an `ApplyArgsMan` that didn't do that.\r\n\r\n> Why not construct them externally and pass a reference of the options to the `BlockAssembler`?\r\n\r\nThat sounds fine.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2208382368",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "commented",
      "id": 2211824602,
      "node_id": "IC_kwDOABII586D1cPa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2211824602",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-06T17:21:19Z",
      "updated_at": "2024-07-06T17:21:19Z",
      "author_association": "MEMBER",
      "body": "Weak approach NACK. This is just limiting the max block weight, which is already a configurable parameter. Having two params for the same thing seems like a poor way to do it. I'm not sure it avoids the risk of bugs producing invalid blocks, either - it just moves the bug risk from one place to another equally probable.\r\n\r\nInstead, maybe just perform the block weight cap on initialization rather than block assembly?",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2211824602",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "commented",
      "id": 2214078752,
      "node_id": "IC_kwDOABII586D-Ckg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2214078752",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-08T13:27:56Z",
      "updated_at": "2024-07-08T13:32:44Z",
      "author_association": "MEMBER",
      "body": "> This is just limiting the max block weight\r\n\r\nThis had me confused initially, and I tried to combine them, but there's really two different things:\r\n\r\n1. The max block weight demanded by the user via `-blockmaxweight`\r\n2. Weight units reserved for the coinbase\r\n\r\nWith stratum v1 the distinction isn't very important. We just subtract (2) from (1). We could indeed do that at initialization.\r\n\r\nBut with Stratum v2 (2) is a per-client setting communicated to us (the Template Provider) via the [CoinbaseOutputDataSize](https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md) message. We can set it at connection time, but not during node initialization.\r\n\r\n> I'm not sure it avoids the risk of bugs producing invalid blocks, either - it just moves the bug risk from one place to another equally probable.\r\n\r\nThe fact that Stratum v2 makes this configurable introduces that risk. But removing that ability from the protocol would probably just cause miners to roll their own extension and do it anyway. At 500 sats/byte and $50K per coin, squeezing in an extra 1000 vbyte gets you $250 per block. Pennies in front of steamrollers perhaps, but we've seen miners do this with the current code. \r\n\r\n>> Why not construct them externally and pass a reference of the options to the BlockAssembler?\r\n\r\n> That sounds fine.\r\n\r\nHappy to take patches.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2214078752",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "reviewed",
      "id": 2165021550,
      "node_id": "PRR_kwDOABII586BC5tu",
      "url": null,
      "actor": null,
      "commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "lozanopo",
        "id": 123916116,
        "node_id": "U_kgDOB2LPVA",
        "avatar_url": "https://avatars.githubusercontent.com/u/123916116?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lozanopo",
        "html_url": "https://github.com/lozanopo",
        "followers_url": "https://api.github.com/users/lozanopo/followers",
        "following_url": "https://api.github.com/users/lozanopo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lozanopo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lozanopo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lozanopo/subscriptions",
        "organizations_url": "https://api.github.com/users/lozanopo/orgs",
        "repos_url": "https://api.github.com/users/lozanopo/repos",
        "events_url": "https://api.github.com/users/lozanopo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lozanopo/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2165021550",
      "submitted_at": "2024-07-09T05:05:17Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "reviewed",
      "id": 2167070268,
      "node_id": "PRR_kwDOABII586BKt48",
      "url": null,
      "actor": null,
      "commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "Concept ACK d89637eceab0145a64c2d1af1139ace204a3ab3c\r\n\r\nGiving the option to assign the values of `coinbase_max_additional_weight` and `coinbase_output_max_additional_sigops` needed by the Stratum V2 protocol is essential for its integration. I understand the risks involved by having two parameters for the same thing:\r\n\r\n>     1. The max block weight demanded by the user via -blockmaxweight\r\n>     2. Weight units reserved for the coinbase\r\n\r\nbut it seems unavoidable at a first glance due to their different invocation domains. During the node initialisation for the former and connection time for the later.\r\n\r\nLeft some small nit that only applies if the intended name for the variable was `coinbase_max_additional_weight` instead of `coinbase_max_addition_weight`\r\n\r\n\r\n",
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#pullrequestreview-2167070268",
      "submitted_at": "2024-07-09T18:45:27Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdkNzY1ODlhY2VjY2E4NzIyYzAwMGU4MjQ2NmIwMjI0YmUwZmI2ZmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7d76589acecca8722c000e82466b0224be0fb6fd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7d76589acecca8722c000e82466b0224be0fb6fd",
      "tree": {
        "sha": "65bfcf52bd38426d8a7df7ded7cf0b5666007371",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/65bfcf52bd38426d8a7df7ded7cf0b5666007371"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 65bfcf52bd38426d8a7df7ded7cf0b5666007371\nparent 9b480f7a25a737c9c4ebc33401e94d66c2da9ec3\nauthor Sjors Provoost <sjors@sprovoost.nl> 1719563713 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1720687370 +0200\n\nrefactor: use CHECK_NONFATAL to avoid single-use symbol\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmaPmwsACgkQV/+b28ww\nEAnGng/+NSIfjIFV7bh8fN45Ujhi3jE1FfEUihjDacy+tL4nMDDv2YXatWG4sxdr\nMgr7vfDeGCBAYKPXxBY6W+0G+uocpi4yQkOTX7vn3GHUzcSzv6Avn1xOy1myUN57\nHQBPNEgVa5F6fNputP5GKAkA+wKVuvLK08RoohtgWmM/stqAVJMzK1YQdP2+C8HM\n2tITeP+axn/l5kjmRd6lHVJObSrn03kIrAOOjrp4Ag/QOd8CKOviiFQYHkVoCmHf\n92s28CYWqBdfFmdTMedg4a8Sip2jZtPhYDUFDW8EZiMmGUbIJz4UFCs3CmX86Bh0\nXUvuUccF7ffCbTvSIUj28VHCH+YsdHsa+UPs4ZLSDoamIYBBVxTpDHhhtfFUsDzy\nOwXnaIIUY5bK9I9xMiDONEYCPd3bMYQ5FaQQlLMUPypiYDm+xjxfhFnxknq8Qndn\nENkLNGjsiypqhXIMNGjVF2e+IafBcAw0EmlXMRCgmG/kYaBHD9Bcel2JEG6xd+0b\nOdOdmRMauIs8VM7jAJKIhHQRzwylxnTF4dqTAB2mrPXm3LQHY7jchtJPWSMhqW6j\nRNVoXdOHOXi4hS5T+9GAp+/0kvRHw//EQaeCof6VihEDU46T03MUBtDzZ/t0+Pcl\n+vknW28mp19+aF+/edDo0FeJ9h8qjQs3OgbRc7mwnCOKNvPp5g0=\n=8192\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9b480f7a25a737c9c4ebc33401e94d66c2da9ec3",
          "sha": "9b480f7a25a737c9c4ebc33401e94d66c2da9ec3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9b480f7a25a737c9c4ebc33401e94d66c2da9ec3"
        }
      ],
      "message": "refactor: use CHECK_NONFATAL to avoid single-use symbol",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-11T08:42:50Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T08:35:13Z"
      },
      "sha": "7d76589acecca8722c000e82466b0224be0fb6fd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFmM2Y4NWZiMGY4MzRhM2NiMGE2OTgyN2ZmMzRmOGJjMmM4ZmM1NjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565",
      "tree": {
        "sha": "c9a7b7fd24e822be94b5a9e700077652bc992f25",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c9a7b7fd24e822be94b5a9e700077652bc992f25"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c9a7b7fd24e822be94b5a9e700077652bc992f25\nparent 7d76589acecca8722c000e82466b0224be0fb6fd\nauthor Sjors Provoost <sjors@sprovoost.nl> 1719562149 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1720687371 +0200\n\nrefactor: add coinbase constraints to BlockAssembler::Options\n\nWhen generating a block template through e.g. getblocktemplate RPC,\nwe reserve 4000 weight units and 400 sigops. Pools use this space\nfor their coinbase outputs.\n\nAt least one pool patched their Bitcoin Core node to adjust\nthese hardcoded values. They eventually produced an invalid\nblock which exceeded the sigops limit.\nhttps://bitcoin.stackexchange.com/questions/117837/how-many-sigops-are-in-the-invalid-block-783426\n\nThe existince of such patches suggests it may be useful to\nmake this value configurable. This commit would make such a\nchange easier.\n\nThe main motivation however is that the Stratum v2 spec\nrequires the pool to communicate the maximum bytes they intend\nto add to the coinbase outputs. A proposed change to the spec\nwould also require them to communicate the maximum number of sigops.\n\nThis commit adds both to BlockAssembler::Options. The default\nis the same as the previously hardcode values.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmaPmwsACgkQV/+b28ww\nEAmBMBAAhcCLw4FA7Vx6wMjE0fmGFCVqsI/gvYlgkI2bPbuoAMirFxaHkFsXbsLI\nBnQuHYDtXnz9Q3cknaK3JGyiamtjhJIOCPhtJZt+u/CbCFjvC9DQ4K5KBAK4p9xC\nygvWjKMHsuZ2zM6aP4T20FtSCPIhxj1P2lJozZ2ZNovm4EDRUZdI2mLB59S8iCwR\nKb2MGpsZIOfWs4h7kZlxxc2qUXqBOVB1Sk41EZa8gPzvSJ9BnX1JrZUaH7KycEGZ\nLusWJoc6SDlW2nHRwKg8WbVSaEB4s1XqReHPZS4GBcLA0JmYUbRUY5cD815iuVaK\nL5+8QzU5CJJnA79/5deJabVuekapCUkYXnkDcme7cFVOEQRd+bCKYHPprTEwFr2s\n5Hmqj9YwrytPzomIvtUjmmK8tmTVsvm7NdK1FLJxF6UgEus+4n9iMq9R4NWz/U3b\nepIg6LnuiIr+OzqHFh4XCb92jO/z5gfEuMcPxc7tTe+O5sKMMCnCfEHxAlbmiCPo\nGN0k2GG4yStRWGDFMHwJPEu8a65iBB5fdG2M/v8anRoQ7GPIUJTFMMxBlVCUueDx\nFAL9fwcwxSxoh7bd8F7Ysb/wNL6h95P2Yc5yEkPAHZj7IP0j5pTU5KXJVRAEit6w\nC7DOKMRZWNtkU4URBggYGbWynK9kxmT2cu8VUQxyKCwN7CXXwDU=\n=Dq57\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7d76589acecca8722c000e82466b0224be0fb6fd",
          "sha": "7d76589acecca8722c000e82466b0224be0fb6fd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7d76589acecca8722c000e82466b0224be0fb6fd"
        }
      ],
      "message": "refactor: add coinbase constraints to BlockAssembler::Options\n\nWhen generating a block template through e.g. getblocktemplate RPC,\nwe reserve 4000 weight units and 400 sigops. Pools use this space\nfor their coinbase outputs.\n\nAt least one pool patched their Bitcoin Core node to adjust\nthese hardcoded values. They eventually produced an invalid\nblock which exceeded the sigops limit.\nhttps://bitcoin.stackexchange.com/questions/117837/how-many-sigops-are-in-the-invalid-block-783426\n\nThe existince of such patches suggests it may be useful to\nmake this value configurable. This commit would make such a\nchange easier.\n\nThe main motivation however is that the Stratum v2 spec\nrequires the pool to communicate the maximum bytes they intend\nto add to the coinbase outputs. A proposed change to the spec\nwould also require them to communicate the maximum number of sigops.\n\nThis commit adds both to BlockAssembler::Options. The default\nis the same as the previously hardcode values.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-11T08:42:51Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-28T08:09:09Z"
      },
      "sha": "af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdlMWQ3Y2QxYWE4ODM4ZDI1OTZmNDY5ZTA5OTJhMjJkMDVhNTdiMTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7e1d7cd1aa8838d2596f469e0992a22d05a57b18",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7e1d7cd1aa8838d2596f469e0992a22d05a57b18",
      "tree": {
        "sha": "997b9e1745ca78ef1301be5054ddf9adc14fffbf",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/997b9e1745ca78ef1301be5054ddf9adc14fffbf"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 997b9e1745ca78ef1301be5054ddf9adc14fffbf\nparent af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565\nauthor Sjors Provoost <sjors@sprovoost.nl> 1718720678 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1720687371 +0200\n\nAdd util/mining.h for default coinbase constraints\n\nThese defaults are needed by the Mining interface in the next commit.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmaPmwsACgkQV/+b28ww\nEAk9Rw//XZ2rxp62QM9eCT2eTjvInCPrz3dkebS05Dj3r5e7fvX3XbFfOVBs0FD1\nP/ehVL+eK4UddMaw0xOK1LBofJK6PFjfwM1D/ZBSiqILlekc6xhjv20+j2sUXDSJ\nnOyJsubqthhhlWCdZxeZ5Bya8hDAJyRNd0W4nsm8iDTLFECajBB9zaORAavcieZg\nslUUxCVcpFGfZnqr6KXyhtgiDFDkhmRj4/ofHdxdsqLITRPT47RnH3Ljcfzxsap5\nSeKBYWR+nKCcOfSFuGzl29Vk0038Z0Uz/wzrP+liUIUfuWA3n01spAYelb9t2WOm\n/HebQVcOZDiPChw3NgmPc68S8bcnjDvv/O+DwUXM3Bg3cGI3rZFh3Br6X1dSpY4V\nNkQS9s66VgQALofphukIB35TlK/vDyL5dNNQcUPCPBEemw1aekSNQ70UQLDiof+C\ne2MZ9BCdUh6N3R5F2ZuJcW2vyaBugJlvakBF502mT5pk6MJ3R73Z0N7uJMNk+rzv\nMYUnQx6bWMt6X0lVu+xsMyHkHr9AhIw9EX8dJY+gZ+xgpdnkN3BBr7gTWdg7YbeW\nAZctV9kO7L6MO2G7oZEzGL7TdX9E79znfoOcV9EEpOLWgPxdrKpU+2k3Zy+MzAXr\niJ/tGOOGxmFKRSS3c3kKcdKIatNgu91YK7+1XUkR/xAVNZxpQwo=\n=G+J+\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565",
          "sha": "af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/af3f85fb0f834a3cb0a69827ff34f8bc2c8fc565"
        }
      ],
      "message": "Add util/mining.h for default coinbase constraints\n\nThese defaults are needed by the Mining interface in the next commit.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-11T08:42:51Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-06-18T14:24:38Z"
      },
      "sha": "7e1d7cd1aa8838d2596f469e0992a22d05a57b18"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU2N2U0NjY5YTllMjYzZDkwZjBlMjc2YzhlNjVlOTNjMzkxNzAzNzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e67e4669a9e263d90f0e276c8e65e93c39170375",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e67e4669a9e263d90f0e276c8e65e93c39170375",
      "tree": {
        "sha": "27929190ee2f0ec4d8028c22f0a79998f41780db",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/27929190ee2f0ec4d8028c22f0a79998f41780db"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 27929190ee2f0ec4d8028c22f0a79998f41780db\nparent 7e1d7cd1aa8838d2596f469e0992a22d05a57b18\nauthor Sjors Provoost <sjors@sprovoost.nl> 1720687509 +0200\ncommitter Sjors Provoost <sjors@sprovoost.nl> 1720687509 +0200\n\nPass coinbase constraints to createNewBlock\n\nExisting callers of createNewBlock use the defaults,\nso this commit does not change behavior and the\nAssume(s) won't be false.\n\nThis commit also documents what happens when\n-blockmaxweight is lower than the coinbase\nreserved value.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEE7ZvfetalXiMuhFJCV/+b28wwEAkFAmaPm5YACgkQV/+b28ww\nEAmrDg//YbFb/Fuxxaivyrp5i52g8LOObhfpwGAvbThjBgcuND+Rgbt/Pl310eAB\nzBb3MsZasPeRzb+cf7zwxxvy3H/dNP9+sEkLt6gWoqFHiG4fn4xzM4XWkbe5mPgj\nTiGFSXakZvHoYiRDv3/pZ7mYfy8c8WRFJwgEFU2q39vuFMPMy9qZNWa+iq2kbgLb\n/+dVq51o35I2sM6cyxGBTLroAlY8y+iSYSahQf2PeAwGmiBZeHmzw2KztnhuPjdE\nxg8C/M6LYjVTr3eAbCeQeTr5DkXssfMf2T2fDieo1iu4n0GMzUW5Z+Zb7qworB8V\n2D436/Zqpb2Q+vmoEk8h6B12Vgv0fYBi3neT3tgRtbAiHZYCfhBymc/6UOJUuL91\nsv6Ch+SXHv0m9fG1ImDqSEWQ/JJaRGS9eCPzqmriATiWYVwAQLm9SDYUZiO2bbTu\nOh4zJhhxCoxNAlESaU+JYfOzqls6n8ACq6iPsTE2kdklxDPpcEwl9rvZnLP+MY/K\nZt/tLoRF6pkS2zZvqXlbJ8b45ca/1p90UMPaIvzFuEijDHBYBtCDyBKzGY1odN7z\nNIrM4YzNTKTFXsDwl0ZDY1reHq2rh87MuzSDVrmc4gQYyDoK1w/3ZMSgsdR6GtVU\nl9dNf/K+YL+v+EzShMKP0BThadgreA7reQBpuD06lVPIGO4rPdE=\n=W8x3\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7e1d7cd1aa8838d2596f469e0992a22d05a57b18",
          "sha": "7e1d7cd1aa8838d2596f469e0992a22d05a57b18",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7e1d7cd1aa8838d2596f469e0992a22d05a57b18"
        }
      ],
      "message": "Pass coinbase constraints to createNewBlock\n\nExisting callers of createNewBlock use the defaults,\nso this commit does not change behavior and the\nAssume(s) won't be false.\n\nThis commit also documents what happens when\n-blockmaxweight is lower than the coinbase\nreserved value.",
      "committer": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-11T08:45:09Z"
      },
      "author": {
        "name": "Sjors Provoost",
        "email": "sjors@sprovoost.nl",
        "date": "2024-07-11T08:45:09Z"
      },
      "sha": "e67e4669a9e263d90f0e276c8e65e93c39170375"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13468298979,
      "node_id": "HRFPE_lADOABII586N2u5qzwAAAAMixe7j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13468298979",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T08:45:21Z"
    },
    {
      "event": "commented",
      "id": 2222490758,
      "node_id": "IC_kwDOABII586EeISG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2222490758",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-11T09:42:57Z",
      "updated_at": "2024-07-11T09:42:57Z",
      "author_association": "MEMBER",
      "body": "Spurious CI / ASan failure, see #30419.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#issuecomment-2222490758",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30356"
    },
    {
      "event": "labeled",
      "id": 13479913013,
      "node_id": "LE_lADOABII586N2u5qzwAAAAMjdyY1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13479913013",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-12T01:16:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 13485339962,
      "node_id": "UNLE_lADOABII586N2u5qzwAAAAMjyfU6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13485339962",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-12T10:30:37Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1659263337",
      "pull_request_review_id": 2148873843,
      "id": 1659263337,
      "node_id": "PRRC_kwDOABII585i5llp",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_output_max_additional_size maximum additional serialized bytes which the pool will add in coinbase transaction outputs",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:  Is it comprehensive using the term \"pool\" here, or would it be better to keep things generic (and perhaps mention a pool as an example)?  This is reserving space in the template for the coinbase and the entity requesting the template could be a pool or a solo miner (albeit less commonly), right?  Maybe something like `maximum additional serialized bytes the block requestor can add in coinbase transaction outputs (for example, to enable pool payouts)`.\r\n\r\nnit:  weight and bytes seem to be used interchangeably here and in the function definition.  It might prevent confusion to stick to one nomenclature.",
      "created_at": "2024-06-28T20:04:30Z",
      "updated_at": "2024-06-28T21:15:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1659263337",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1659263337"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660679371",
      "pull_request_review_id": 2150769727,
      "id": 1660679371,
      "node_id": "PRRC_kwDOABII585i-_TL",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_output_max_additional_size maximum additional serialized bytes which the pool will add in coinbase transaction outputs",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": 1659263337,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I agree something like \"block requestor\" is more generic than \"pool\", but also more confusing.\r\n\r\n> weight and bytes seem to be used interchangeably here and in the function definition\r\n\r\nThese bytes all go in the output which doesn't have a witness discount, so each byte counts as 4 weight units. I think we should prefer the term \"bytes\", but make sure it's used correctly since we use weight units for internal accounting.",
      "created_at": "2024-07-01T08:36:09Z",
      "updated_at": "2024-07-01T08:36:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1660679371",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660679371"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660681030",
      "pull_request_review_id": 2150772443,
      "id": 1660681030,
      "node_id": "PRRC_kwDOABII585i-_tG",
      "diff_hunk": "@@ -883,11 +883,24 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, tip, /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n-    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool) override\n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool,\n+                                                   size_t coinbase_output_max_additional_size,\n+                                                   size_t coinbase_output_max_additional_sigops) override\n     {\n         BlockAssembler::Options options;\n         ApplyArgsManOptions(gArgs, options);\n \n+        Assume(coinbase_output_max_additional_size <= DEFAULT_BLOCK_MAX_WEIGHT);",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This probably needs to be `DEFAULT_BLOCK_MAX_WEIGHT / 4`, let me check the spec as well...",
      "created_at": "2024-07-01T08:37:23Z",
      "updated_at": "2024-07-01T08:37:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1660681030",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660681030"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 893,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660691098",
      "pull_request_review_id": 2150788974,
      "id": 1660691098,
      "node_id": "PRRC_kwDOABII585i_CKa",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_output_max_additional_size maximum additional serialized bytes which the pool will add in coinbase transaction outputs",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": 1659263337,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "See also: https://github.com/stratum-mining/sv2-spec/blob/main/07-Template-Distribution-Protocol.md#71-coinbaseoutputdatasize-client---server\r\n\r\nWhich has a few more hairy details:\r\n\r\n> The Template Provider MUST NOT provide NewMiningJob messages which would represent consensus-invalid blocks once this additional size — **along with a maximally-sized (100 byte) coinbase field** — is added. Further, the Template Provider MUST consider the maximum additional bytes required in the **output count variable-length integer** in the coinbase transaction when complying with the size limits.",
      "created_at": "2024-07-01T08:45:03Z",
      "updated_at": "2024-07-01T08:48:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1660691098",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660691098"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660833557",
      "pull_request_review_id": 2151020955,
      "id": 1660833557,
      "node_id": "PRRC_kwDOABII585i_k8V",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_output_max_additional_size maximum additional serialized bytes which the pool will add in coinbase transaction outputs",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "4c57f2707e00bbfd2e2d2a6d3e05ea0bbb0609cd",
      "in_reply_to_id": 1659263337,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I ended up renaming `coinbase_output_max_additional_size` to `coinbase_max_additional_weight` to account for these issues, see below.",
      "created_at": "2024-07-01T10:31:57Z",
      "updated_at": "2024-07-01T10:31:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1660833557",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1660833557"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670984170",
      "pull_request_review_id": 2167070268,
      "id": 1670984170,
      "node_id": "PRRC_kwDOABII585jmTHq",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_max_addition_weight maximum additional weight which the pool will add to the coinbase transaction",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": null,
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I take it you wanted to rename it to `coinbase_max_additional_weight` instead",
      "created_at": "2024-07-09T18:25:44Z",
      "updated_at": "2024-07-09T18:45:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1670984170",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670984170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670985574",
      "pull_request_review_id": 2167070268,
      "id": 1670985574,
      "node_id": "PRRC_kwDOABII585jmTdm",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_max_addition_weight maximum additional weight which the pool will add to the coinbase transaction\n+     * @param[in] coinbase_output_max_additional_sigops maximum additional sigops which the pool will add in coinbase transaction outputs\n      * @returns a block template\n      */\n-    virtual std::unique_ptr<node::CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool = true) = 0;\n+    virtual std::unique_ptr<node::CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool = true,\n+                                                                 size_t coinbase_max_addition_weight = DEFAULT_COINBASE_MAX_ADDITIONAL_WEIGHT,",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 18,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": null,
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Same here, did you meant to name it `coinbase_max_additional_weight`?",
      "created_at": "2024-07-09T18:26:47Z",
      "updated_at": "2024-07-09T18:45:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1670985574",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670985574"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 51,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670987152",
      "pull_request_review_id": 2167070268,
      "id": 1670987152,
      "node_id": "PRRC_kwDOABII585jmT2Q",
      "diff_hunk": "@@ -883,11 +883,24 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, tip, /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n-    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool) override\n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool,\n+                                                   size_t coinbase_max_addition_weight,",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": null,
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Again, should it be `coinbase_max_additional_weight?`?",
      "created_at": "2024-07-09T18:28:04Z",
      "updated_at": "2024-07-09T18:45:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1670987152",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670987152"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 887,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670987990",
      "pull_request_review_id": 2167070268,
      "id": 1670987990,
      "node_id": "PRRC_kwDOABII585jmUDW",
      "diff_hunk": "@@ -883,11 +883,24 @@ class MinerImpl : public Mining\n         return TestBlockValidity(state, chainman().GetParams(), chainman().ActiveChainstate(), block, tip, /*fCheckPOW=*/false, check_merkle_root);\n     }\n \n-    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool) override\n+    std::unique_ptr<CBlockTemplate> createNewBlock(const CScript& script_pub_key, bool use_mempool,\n+                                                   size_t coinbase_max_addition_weight,\n+                                                   size_t coinbase_output_max_additional_sigops) override\n     {\n         BlockAssembler::Options options;\n         ApplyArgsManOptions(gArgs, options);\n \n+        Assume(coinbase_max_addition_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+        options.coinbase_max_additional_weight = coinbase_max_addition_weight;",
      "path": "src/node/interfaces.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": null,
      "user": {
        "login": "itornaza",
        "id": 11520757,
        "node_id": "MDQ6VXNlcjExNTIwNzU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/11520757?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/itornaza",
        "html_url": "https://github.com/itornaza",
        "followers_url": "https://api.github.com/users/itornaza/followers",
        "following_url": "https://api.github.com/users/itornaza/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/itornaza/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/itornaza/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/itornaza/subscriptions",
        "organizations_url": "https://api.github.com/users/itornaza/orgs",
        "repos_url": "https://api.github.com/users/itornaza/repos",
        "events_url": "https://api.github.com/users/itornaza/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/itornaza/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "`coinbase_max_additional_weight`?",
      "created_at": "2024-07-09T18:28:47Z",
      "updated_at": "2024-07-09T18:45:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1670987990",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1670987990"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 894,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1673640115",
      "pull_request_review_id": 2171287948,
      "id": 1673640115,
      "node_id": "PRRC_kwDOABII585jwbiz",
      "diff_hunk": "@@ -42,9 +43,13 @@ class Mining\n      *\n      * @param[in] script_pub_key the coinbase output\n      * @param[in] use_mempool set false to omit mempool transactions\n+     * @param[in] coinbase_max_addition_weight maximum additional weight which the pool will add to the coinbase transaction",
      "path": "src/interfaces/mining.h",
      "position": null,
      "original_position": 12,
      "commit_id": "e67e4669a9e263d90f0e276c8e65e93c39170375",
      "original_commit_id": "d89637eceab0145a64c2d1af1139ace204a3ab3c",
      "in_reply_to_id": 1670984170,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks.",
      "created_at": "2024-07-11T08:43:29Z",
      "updated_at": "2024-07-11T08:43:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30356#discussion_r1673640115",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1673640115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30356"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    }
  ]
}