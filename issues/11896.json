{
  "type": "issue",
  "issue": {
    "id": 282046781,
    "node_id": "MDU6SXNzdWUyODIwNDY3ODE=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11896",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11896/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11896/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11896/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/11896",
    "number": 11896,
    "state": "closed",
    "state_reason": "completed",
    "title": "macOS: client v0.15.1 still go in App Nap mode",
    "body": "Currently the Bitcoin Core client, v0.15.1 (64-bit) on macOS Sierra 10.12.6 still go in App Nap mode after being hidden behind other applications or docked in the macOS dock bar. Keeping the app in foreground will obviously avoid the App Nap mode. At the moment it is even impossible to disable per-app Nap Mode via the Get Info dialog because there is no option to do that with the Bitcoin client app.\r\n\r\nThe App Nap issue was already addressed and solved in few previous ticket (#3182, #5041, #5804).\r\n\r\nI don't really know how App Nap can interfere with the client performance, at the moment i'm syncing the whole blockchain and it's taking a lot.\r\n\r\n![screen shot 2017-12-14 at 10 59 56](https://user-images.githubusercontent.com/385030/33986928-6cd532a2-e0bf-11e7-8723-1850cfa56142.png)\r\n\r\n",
    "user": {
      "login": "fernetmatt",
      "id": 385030,
      "node_id": "MDQ6VXNlcjM4NTAzMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/385030?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fernetmatt",
      "html_url": "https://github.com/fernetmatt",
      "followers_url": "https://api.github.com/users/fernetmatt/followers",
      "following_url": "https://api.github.com/users/fernetmatt/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fernetmatt/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fernetmatt/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fernetmatt/subscriptions",
      "organizations_url": "https://api.github.com/users/fernetmatt/orgs",
      "repos_url": "https://api.github.com/users/fernetmatt/repos",
      "events_url": "https://api.github.com/users/fernetmatt/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fernetmatt/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 234879,
        "node_id": "MDU6TGFiZWwyMzQ4Nzk=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/macOS",
        "name": "macOS",
        "description": "",
        "color": "660000",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 4,
    "closed_at": "2019-05-29T21:50:02Z",
    "created_at": "2017-12-14T10:13:25Z",
    "updated_at": "2021-12-16T14:58:53Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 1387668497,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDEzODc2Njg0OTc=",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/1387668497",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-14T13:22:48Z",
      "label": {
        "name": "MacOSX",
        "color": "660000"
      }
    },
    {
      "event": "commented",
      "id": 352148399,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjE0ODM5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352148399",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-16T01:06:57Z",
      "updated_at": "2017-12-16T01:06:57Z",
      "author_association": "MEMBER",
      "body": "From a quick search, it looks like Apple has removed the ability to disable AppNap completely via plist, I can no longer find mention of \"LSAppNapIsDisabled\" in any documentation. \r\n\r\nNot sure if we want to revisit something like #5804. More info here: https://developer.apple.com/library/content/documentation/Performance/Conceptual/power_efficiency_guidelines_osx/AppNap.html",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11896#issuecomment-352148399",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11896"
    },
    {
      "event": "commented",
      "id": 352190386,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM1MjE5MDM4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/352190386",
      "actor": {
        "login": "fernetmatt",
        "id": 385030,
        "node_id": "MDQ6VXNlcjM4NTAzMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/385030?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fernetmatt",
        "html_url": "https://github.com/fernetmatt",
        "followers_url": "https://api.github.com/users/fernetmatt/followers",
        "following_url": "https://api.github.com/users/fernetmatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fernetmatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fernetmatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fernetmatt/subscriptions",
        "organizations_url": "https://api.github.com/users/fernetmatt/orgs",
        "repos_url": "https://api.github.com/users/fernetmatt/repos",
        "events_url": "https://api.github.com/users/fernetmatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fernetmatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2017-12-16T15:30:42Z",
      "updated_at": "2017-12-16T15:52:44Z",
      "author_association": "NONE",
      "body": "Why not temporary enable the \"Prevent App Nap\" option in App Info? App Nap is causing major slow down to the blockchain sync, when in nap mode the app progress like 0.5%/day, when it's in foreground the progress improve dramatically.\r\n\r\n![screen shot 2017-12-16 at 16 20 56](https://user-images.githubusercontent.com/385030/34071890-19e80d42-e27e-11e7-9051-dfb36d70e61e.png)\r\n\r\nAt the moment i've just run this command to disable it:\r\n`default write org.bitcoinfoundation.Bitcoin-Qt NSAppSleepDisabled -bool YES`\r\n",
      "user": {
        "login": "fernetmatt",
        "id": 385030,
        "node_id": "MDQ6VXNlcjM4NTAzMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/385030?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fernetmatt",
        "html_url": "https://github.com/fernetmatt",
        "followers_url": "https://api.github.com/users/fernetmatt/followers",
        "following_url": "https://api.github.com/users/fernetmatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fernetmatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fernetmatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fernetmatt/subscriptions",
        "organizations_url": "https://api.github.com/users/fernetmatt/orgs",
        "repos_url": "https://api.github.com/users/fernetmatt/repos",
        "events_url": "https://api.github.com/users/fernetmatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fernetmatt/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11896#issuecomment-352190386",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11896"
    },
    {
      "event": "commented",
      "id": 382943536,
      "node_id": "MDEyOklzc3VlQ29tbWVudDM4Mjk0MzUzNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/382943536",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-04-20T02:07:28Z",
      "updated_at": "2018-04-20T02:07:28Z",
      "author_association": "MEMBER",
      "body": "Should be resolved by #12783.",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11896#issuecomment-382943536",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11896"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ManfredKarrer",
        "id": 1449498,
        "node_id": "MDQ6VXNlcjE0NDk0OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1449498?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ManfredKarrer",
        "html_url": "https://github.com/ManfredKarrer",
        "followers_url": "https://api.github.com/users/ManfredKarrer/followers",
        "following_url": "https://api.github.com/users/ManfredKarrer/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ManfredKarrer/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ManfredKarrer/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ManfredKarrer/subscriptions",
        "organizations_url": "https://api.github.com/users/ManfredKarrer/orgs",
        "repos_url": "https://api.github.com/users/ManfredKarrer/repos",
        "events_url": "https://api.github.com/users/ManfredKarrer/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ManfredKarrer/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2018-09-20T17:11:38Z",
      "updated_at": "2018-09-20T17:11:38Z",
      "source": {
        "issue": {
          "id": 361902683,
          "node_id": "MDU6SXNzdWUzNjE5MDI2ODM=",
          "url": "https://api.github.com/repos/bisq-network/bisq/issues/1701",
          "repository_url": "https://api.github.com/repos/bisq-network/bisq",
          "labels_url": "https://api.github.com/repos/bisq-network/bisq/issues/1701/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bisq-network/bisq/issues/1701/comments",
          "events_url": "https://api.github.com/repos/bisq-network/bisq/issues/1701/events",
          "html_url": "https://github.com/bisq-network/bisq/issues/1701",
          "number": 1701,
          "state": "closed",
          "state_reason": "completed",
          "title": "OSX App Nap mode causes Bisq to lose network connections",
          "body": "It seems that Apple changed the behavior of standby mode so that network connections get lost while in standby mode (even if only display is set to sleep).\r\n\r\nThis is pretty bad as if you have offers open those offers will get removed when your Bisq app is running but has no network access. I am not 100% sure how it is handled as it seems that only the P2P nodes get disconnected but not the Bitcoin nodes. So it might be some special handling for limiting the resources and not completely preventing network activity.\r\n\r\nWhat is really annoying that there is zero information about those hidden behaviors (experienced similar issues with the iOS notification app). It is really a shame how Apple developed over the last years. Time to move to Linux....\r\n\r\nHere is one of the few discussion about that issue: \r\nhttps://forums.macrumors.com/threads/mac-looses-connection-when-sleeping.1414285/\r\n\r\nHere are the settings I use.\r\n<img width=\"665\" alt=\"screen shot 2018-09-19 at 14 39 59\" src=\"https://user-images.githubusercontent.com/1449498/45776897-eb23db00-bc19-11e8-93a6-58d8d6f9686b.png\">\r\n\r\nDoes anyone has an idea how to solve that?\r\n\r\nSeems that app \"Caffeinate\" is build so solve that issue, testing it out now (costs 2 USD).\r\n\r\nMaybe putting the display into lock screen by ctrl-shift-eject and leave the standby setting to never helps as well as one user posted in the link above:\r\n\"You can put just the display to sleep (ctrl-shift-eject does this). This will turn off the display and conserve power whilst still keeping the Mac turned on and thus the network connection(s).\"\r\n",
          "user": {
            "login": "ManfredKarrer",
            "id": 1449498,
            "node_id": "MDQ6VXNlcjE0NDk0OTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1449498?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ManfredKarrer",
            "html_url": "https://github.com/ManfredKarrer",
            "followers_url": "https://api.github.com/users/ManfredKarrer/followers",
            "following_url": "https://api.github.com/users/ManfredKarrer/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ManfredKarrer/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ManfredKarrer/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ManfredKarrer/subscriptions",
            "organizations_url": "https://api.github.com/users/ManfredKarrer/orgs",
            "repos_url": "https://api.github.com/users/ManfredKarrer/repos",
            "events_url": "https://api.github.com/users/ManfredKarrer/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ManfredKarrer/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignee": {
            "login": "ManfredKarrer",
            "id": 1449498,
            "node_id": "MDQ6VXNlcjE0NDk0OTg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/1449498?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ManfredKarrer",
            "html_url": "https://github.com/ManfredKarrer",
            "followers_url": "https://api.github.com/users/ManfredKarrer/followers",
            "following_url": "https://api.github.com/users/ManfredKarrer/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ManfredKarrer/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ManfredKarrer/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ManfredKarrer/subscriptions",
            "organizations_url": "https://api.github.com/users/ManfredKarrer/orgs",
            "repos_url": "https://api.github.com/users/ManfredKarrer/repos",
            "events_url": "https://api.github.com/users/ManfredKarrer/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ManfredKarrer/received_events",
            "type": "User",
            "site_admin": false
          },
          "assignees": [
            {
              "login": "ManfredKarrer",
              "id": 1449498,
              "node_id": "MDQ6VXNlcjE0NDk0OTg=",
              "avatar_url": "https://avatars.githubusercontent.com/u/1449498?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/ManfredKarrer",
              "html_url": "https://github.com/ManfredKarrer",
              "followers_url": "https://api.github.com/users/ManfredKarrer/followers",
              "following_url": "https://api.github.com/users/ManfredKarrer/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/ManfredKarrer/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/ManfredKarrer/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/ManfredKarrer/subscriptions",
              "organizations_url": "https://api.github.com/users/ManfredKarrer/orgs",
              "repos_url": "https://api.github.com/users/ManfredKarrer/repos",
              "events_url": "https://api.github.com/users/ManfredKarrer/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/ManfredKarrer/received_events",
              "type": "User",
              "site_admin": false
            }
          ],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 17,
          "closed_at": "2018-09-22T04:55:00Z",
          "created_at": "2018-09-19T19:53:44Z",
          "updated_at": "2018-09-22T04:55:00Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "closed",
      "id": 2376538754,
      "node_id": "MDExOkNsb3NlZEV2ZW50MjM3NjUzODc1NA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/2376538754",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-05-29T21:50:02Z"
    },
    {
      "event": "commented",
      "id": 497293951,
      "node_id": "MDEyOklzc3VlQ29tbWVudDQ5NzI5Mzk1MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/497293951",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2019-05-30T11:07:52Z",
      "updated_at": "2019-05-30T11:07:52Z",
      "author_association": "MEMBER",
      "body": "It's indeed solved. A related problem remains, which is that MacBooks auto suspend by default, even when plugged in. That can be \"fixed\" with better instructions though: #16125.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/11896#issuecomment-497293951",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/11896"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "i-to-r",
        "id": 66136696,
        "node_id": "MDQ6VXNlcjY2MTM2Njk2",
        "avatar_url": "https://avatars.githubusercontent.com/u/66136696?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/i-to-r",
        "html_url": "https://github.com/i-to-r",
        "followers_url": "https://api.github.com/users/i-to-r/followers",
        "following_url": "https://api.github.com/users/i-to-r/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/i-to-r/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/i-to-r/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/i-to-r/subscriptions",
        "organizations_url": "https://api.github.com/users/i-to-r/orgs",
        "repos_url": "https://api.github.com/users/i-to-r/repos",
        "events_url": "https://api.github.com/users/i-to-r/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/i-to-r/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-07T14:47:47Z",
      "updated_at": "2021-06-07T14:47:47Z",
      "source": {
        "issue": {
          "id": 913631893,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NjYzNjMzODI5",
          "url": "https://api.github.com/repos/aither64/haveclip-core/issues/1",
          "repository_url": "https://api.github.com/repos/aither64/haveclip-core",
          "labels_url": "https://api.github.com/repos/aither64/haveclip-core/issues/1/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/aither64/haveclip-core/issues/1/comments",
          "events_url": "https://api.github.com/repos/aither64/haveclip-core/issues/1/events",
          "html_url": "https://github.com/aither64/haveclip-core/pull/1",
          "number": 1,
          "state": "closed",
          "state_reason": null,
          "title": "[macOS] Fix 10 sec delay between auto-syncs (Nagle’s Algorithm + Delayed ACK, App Nap)",
          "body": "## Issue\r\n\r\nCase:\r\n\r\n- **problem** (macOS → Win):\r\n  1. copy (**macOS** v10.14, HaveClip v0.14)\r\n  2. paste (Windows, HaveClip v0.13)\r\n- ok (Win → macOS):\r\n  1. copy (Windows, HaveClip v0.13)\r\n  2. paste (**macOS** v10.14, HaveClip v0.14)\r\n\r\nAt first, it looked like the HaveClip copies (synchronizes) every other time. I'd been having to copy the same thing several times:\r\n\r\n1. macOS: copy, copy [, copy]\r\n2. Windows: paste\r\n\r\nBut the first copy (after HaveClip launch) is always fine.\r\n\r\nI wanted to find out on which side (macOS or Win) the problem occurs, i.e. do _network packets_ reach Windows?\r\n\r\n1. I started [Process Explorer](https://docs.microsoft.com/en-us/sysinternals/downloads/process-explorer) (Win)\r\n2. went to \"Performance Graph\" tab in Properties of `haveclip.exe` process\r\n3. copied (macOS)\r\n\r\nNothing. I had already started thinking about ... until I saw the receive of _packet_:\r\n\r\n![I/O Bytes History: 10 sec delay; on macOS side: HaveClip restart, first copy — ok, …, copy — delay](https://user-images.githubusercontent.com/66136696/121034954-4255a980-c7cf-11eb-8597-b6eb836f078b.png)<!-- delay-process_explorer.png -->\r\n\r\nSo, the _packets_ reach, but with the **10 second delay** and the **problem is on macOS side** (I checked this by opening the \"Network\" tab of `Activity Monitor.app` — the network activity graph is similar to Process Explorer graph, i.e. the moments of packet transmission and reception coincide).\r\n\r\n## locating a bug and searching for a solution\r\n**The first guess.** It is related to [TCP Performance problems caused by interaction between Nagle’s Algorithm and Delayed ACK](http://www.stuartcheshire.org/papers/NagleDelayedAck/):\r\n\r\n> In this document I describe my latest encounter with this bad interaction between Nagle’s Algorithm and Delayed ACK: a testing program used in WiFi conformance testing. This program tests the speed of a WiFi implementation by repeatedly sending 100,000 bytes of data over TCP and then waiting for an application-layer ack from the other to confirm its reception. Windows achieved the 3.5Mb/s required to pass the test; Mac OS X got just 2.7Mb/s and failed. The naive (and wrong) conclusion would be that Windows is fast, and Mac OS X is slow, and that’s that. The truth is not so simple. The true explanation was that the test was flawed, and Mac OS X happened to expose the problem, while Windows, basically through luck, did not.\r\n> \r\n> Engineers found that reducing the buffer size from 100,000 bytes to 99,912 bytes made the measured speed jump to 5.2Mb/s, easily passing the test. At 99,913 bytes the test got 2.7Mb/s and failed. Clearly what’s going on here is more interesting than just a slow wireless card and/or driver […](http://www.stuartcheshire.org/papers/NagleDelayedAck/)\r\n\r\nThe _10 second delay_ in our case is orders of magnitude greater than the delay ([100-200 ms](http://www.stuartcheshire.org/papers/NagleDelayedAck/)) that the Nagle’s Algorithm + Delayed ACK can cause. However, let's run the test with the Nagle's algorithm [disabled](https://en.wikipedia.org/wiki/Nagle%27s_algorithm?oldid=1000860850#Negative_effect_on_larger_writes).\r\n\r\nTest: set the `TCP_NODELAY` socket option (*\"[Fix 10 sec delay between auto-syncs> disable Nagle’s Algorithm](https://github.com/aither64/haveclip-core/pull/1/commits/d03e878289036956c95fa94bb7ab456fba2387be)\"* commit) and repeat the previous test (with Process Explorer).\r\n\r\nResult: better!<sup>*[why?]*</sup> The delay is gone … but after some time of idle, it comes back.\r\n\r\n**The second guess.** It is caused by App Nap. After opening the \"Energy\" tab of `Activity Monitor.app`, I see that App Nap switches from \"No\" to \"Yes\".\r\n\r\nThe moment of switching:\r\n![after App Nap is activated, the 10 sec delay appears](https://user-images.githubusercontent.com/66136696/121035703-f5be9e00-c7cf-11eb-9344-f5b962d7c7ff.png)<!-- delay-disable_nagle-process_explorer-activity_monitor.png -->\r\n\r\nThe second commit *\"[Fix 10 sec delay between auto-syncs> \\[macOS\\] disable App Nap](https://github.com/aither64/haveclip-core/pull/1/commits/33392f74efe18800f05fa4f937cfa479c77ac1e2)\"* completely eliminates the _10 second delay_ problem.\r\n\r\n**Note:** I work on different things (different areas of knowledge) so I always keep references (on the basis of which the decision was made) to quickly \"restore context\" in the future.\r\n\r\n<details><summary>Based on … (the to read before modify list)</summary>\r\n\r\n_A copy of the references from comments in the code._\r\n\r\nApp Nap:\r\n\r\n- [Pure solution in C (no Objective-C compiler needed)](https://stackoverflow.com/questions/22784886/what-can-make-nanosleep-drift-with-exactly-10-sec-on-mac-os-x-10-9/22785076#22785076)\r\n- [Keep-alive timers on sockets that weren’t firing every 5 seconds with App Nap](https://github.com/robbiehanson/CocoaAsyncSocket/issues/276#issuecomment-59842364)\r\n- [`beginActivityWithOptions:reason:` documentation](https://developer.apple.com/documentation/foundation/nsprocessinfo/1415995-beginactivitywithoptions)\r\n- [What App Nap does & how it works](https://developer.apple.com/library/archive/documentation/Performance/Conceptual/power_efficiency_guidelines_osx/AppNap.html)\r\n- [QTimer and App Nap](https://forum.qt.io/post/213085) (add `LIBS += -framework Foundation` and `CONFIG += objective_c` to \".pro\" file)\r\n  - solution (AppNapSuspender class) doesn't work since it doesn't use ARC nor manual retain/release → activity is \"autorelease\"ed after 3‑4 minutes  \r\n    [ARC solution](https://stackoverflow.com/questions/19847293/disable-app-nap-in-macos-10-9-mavericks-application) (in [comment](https://stackoverflow.com/questions/19847293/disable-app-nap-in-macos-10-9-mavericks-application#20100906))\r\n- [It would be nice if Qt Support disabling App Nap](https://bugreports.qt.io/browse/QTBUG-43861?focusedCommentId=296871#comment-296871) (Utility class to wrap AppNap activities)  \r\n  [(see `ActivityOption` in \"qmacactivity.h\" and `NSActivityOptions` enum in \"qmacactivity.mm\")](https://codereview.qt-project.org/c/qt/qtmacextras/+/106306)\r\n  - [Automatic & Sudden Termination](https://developer.apple.com/library/archive/documentation/General/Conceptual/MOSXAppProgrammingGuide/CoreAppDesign/CoreAppDesign.html#//apple_ref/doc/uid/TP40010543-CH3-SW22)\r\n- About plist keys  \r\n  Didn’t work (in Terminal):\r\n  ```bash\r\n  defaults write cz.havefun.HaveClip NSAppSleepDisabled -bool YES\r\n  defaults write cz.havefun.HaveClip LSAppNapIsDisabled -bool YES\r\n  ```\r\n  - performancecopilot/pcp#20\r\n  - bitcoin/bitcoin#11896\r\n  - https://git.gnu.io/gnu/emacs/commit/04a7977f700fc46cf29d5a41bc7dcffef71044c6\r\n- Some more examples\r\n  - [manual retain/release with ARC](https://github.com/krab/bitcoin/blob/1e0f3c44992fb82e6bf36c2ef9277b0759c17c4c/src/qt/macos_appnap.mm#L20-L53), `id` vs `id<NSObject>` vs `NSObject*`  \r\n    from bitcoin/bitcoin#12783\r\n  - `[retain]` blundering/iTerm2-snippets@b9d98c44e281c9be9ee080a7c32726e562f2fe8a\r\n\r\nMemory Management in Objective-C:\r\n\r\n- [autorelease/retain/release](https://stackoverflow.com/questions/7076247/retain-release-of-returned-objects)\r\n- [Qt doesn’t use Automated Reference Counting (ARC)](https://wiki.qt.io/Apple_Platforms_Coding_Conventions#ARC_.28Automated_Reference_Counting.29)\r\n\r\nqmake (\".pro\" file):\r\n\r\n- [`OBJECTIVE_SOURCES`,](https://doc.qt.io/qt-5.12/qmake-variable-reference.html#objective-sources) [`OBJECTIVE_HEADERS`](https://doc.qt.io/qt-5.12/qmake-variable-reference.html#objective-headers)  \r\n  `OBJECTIVE_SOURCES` is obsolete since Qt5.6 ([QTBUG-36575](https://codereview.qt-project.org/c/qt/qtbase/+/77117/): Branch 5.6, \"INCLUDED IN\" button),  \r\n  before Qt5.6 it only shows the warning:\r\n  - https://git.sailfishos.org/mer-core/qtbase/commit/9ff1310af51814e521572fa3de4e086907633a90#d3f63b68f1cab108e699dad6a6cc2c3797a6ebf3\r\n  - https://codereview.qt-project.org/c/qt/qtbase/+/77117/13/mkspecs/features/mac/objective_c.prf#b4\r\n</details>\r\n\r\n## …It works fine now\r\n\r\nSo, after I have:\r\n\r\n1. [setup dev environment](https://gist.github.com/shoogle/750a330c851bd1a924dfe1346b0b4a08):\r\n   1. installed Command Line Tools: `xcode-select --install` (since qt/qtbase@fa7626713b3a943609453459190e16c49d61dfd3)\r\n   2. setup Qt 5 […](https://gist.github.com/shoogle/750a330c851bd1a924dfe1346b0b4a08#step-3---make-sure-qt-creator-uses-the-correct-c-compiler) […](https://doc.qt.io/qt-5/macos.html)\r\n      - [Can’t skip login in Qt installer?](https://superuser.com/questions/1524977/cant-skip-login-in-qt-installer) — Qt v5.12.* is the [latest LTS Qt release](https://www.qt.io/blog/qt-offering-changes-2020) that can be installed w/o a Qt account (simply disconnect from a LAN/Wi-Fi network before installation)\r\n      - 5.12.* Offline Installers:\r\n        - https://www.qt.io/offline-installers\r\n          - http://download.qt.io/official_releases/qt/5.12/5.12.8/qt-opensource-mac-x64-5.12.8.dmg\r\n          - http://download.qt.io/official_releases/qt/5.12/5.12.8/qt-opensource-mac-x64-5.12.8.dmg.mirrorlist\r\n        - http://master.qt.io/archive/qt/5.12/5.12.8/\r\n   3. installed OpenSSL from Homebrew\r\n2. made N fixes — just to _build_ w/o errors and _run_ w/o \"segmentation faults\" current version (0.15.0) of HaveClip\r\n3. applied this fix\r\n4. made other M fixes\r\n\r\nIt works fine now <sup>2020-07-07</sup> with Qt v5.12.8 and OpenSSL v1.1.1g on macOS Mojave.",
          "user": {
            "login": "i-to-r",
            "id": 66136696,
            "node_id": "MDQ6VXNlcjY2MTM2Njk2",
            "avatar_url": "https://avatars.githubusercontent.com/u/66136696?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/i-to-r",
            "html_url": "https://github.com/i-to-r",
            "followers_url": "https://api.github.com/users/i-to-r/followers",
            "following_url": "https://api.github.com/users/i-to-r/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/i-to-r/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/i-to-r/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/i-to-r/subscriptions",
            "organizations_url": "https://api.github.com/users/i-to-r/orgs",
            "repos_url": "https://api.github.com/users/i-to-r/repos",
            "events_url": "https://api.github.com/users/i-to-r/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/i-to-r/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 11,
          "pull_request": {
            "url": "https://api.github.com/repos/aither64/haveclip-core/pulls/1",
            "html_url": "https://github.com/aither64/haveclip-core/pull/1",
            "diff_url": "https://github.com/aither64/haveclip-core/pull/1.diff",
            "patch_url": "https://github.com/aither64/haveclip-core/pull/1.patch"
          },
          "closed_at": "2021-06-07T18:10:47Z",
          "created_at": "2021-06-07T14:47:47Z",
          "updated_at": "2021-07-18T15:31:56Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "locked",
      "id": 5778948170,
      "node_id": "LOE_lADOABII584Qz7E9zwAAAAFYc8BK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/5778948170",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-12-16T14:58:53Z",
      "lock_reason": "resolved"
    }
  ]
}