{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998",
    "id": 1630493708,
    "node_id": "PR_kwDOABII585hL1wM",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28998",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28998.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28998.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28998",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28998/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/fbb02be4e39109da3c302a6f7a3487707c43ad05",
    "number": 28998,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "rpc: addpeeraddress tried return error on failure",
    "user": {
      "login": "0xB10C",
      "id": 19157360,
      "node_id": "MDQ6VXNlcjE5MTU3MzYw",
      "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/0xB10C",
      "html_url": "https://github.com/0xB10C",
      "followers_url": "https://api.github.com/users/0xB10C/followers",
      "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
      "organizations_url": "https://api.github.com/users/0xB10C/orgs",
      "repos_url": "https://api.github.com/users/0xB10C/repos",
      "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/0xB10C/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "When trying to add an address to the IP address manager tried table, it's first added to the new table and then moved to the tried table. Previously, adding a conflicting address to the address manager's tried table with test-only `addpeeraddress tried=true` RPC would return `{ \"success\": true }`. However, the address would not be added to the tried table, but would remain in the new table. This caused, e.g., issue #28964.\r\n\r\nThis is fixed by new returning `{ \"success\":  false, \"error\": \"...\" }` for failed tried table additions. Since the address remaining in the new table can't be removed (the address manager interface does not support removing addresses at the moment and adding this seems to be a bigger effort), an error message is returned. This indicates to a user why the RPC failed and allows accounting for the extra address in the new table. This is done in the functional test for the `getrawaddrman` RPC.\r\n\r\nFixes #28964 ",
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2023-12-05T14:21:54Z",
    "updated_at": "2024-03-12T13:43:18Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "51ff270c1f25735b3381a0f0464a2abc0547b671",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "0xB10C:2023-12-addpeeraddress-return-error",
      "ref": "2023-12-addpeeraddress-return-error",
      "sha": "fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 184896538,
        "node_id": "MDEwOlJlcG9zaXRvcnkxODQ4OTY1Mzg=",
        "name": "bitcoin",
        "full_name": "0xB10C/bitcoin",
        "owner": {
          "login": "0xB10C",
          "id": 19157360,
          "node_id": "MDQ6VXNlcjE5MTU3MzYw",
          "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/0xB10C",
          "html_url": "https://github.com/0xB10C",
          "followers_url": "https://api.github.com/users/0xB10C/followers",
          "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
          "organizations_url": "https://api.github.com/users/0xB10C/orgs",
          "repos_url": "https://api.github.com/users/0xB10C/repos",
          "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/0xB10C/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/0xB10C/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/0xB10C/bitcoin",
        "archive_url": "https://api.github.com/repos/0xB10C/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/0xB10C/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/0xB10C/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/0xB10C/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/0xB10C/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/0xB10C/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/0xB10C/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/0xB10C/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/0xB10C/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/0xB10C/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/0xB10C/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/0xB10C/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/0xB10C/bitcoin/events",
        "forks_url": "https://api.github.com/repos/0xB10C/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/0xB10C/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/0xB10C/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/0xB10C/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/0xB10C/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/0xB10C/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/0xB10C/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/0xB10C/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/0xB10C/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/0xB10C/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/0xB10C/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/0xB10C/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/0xB10C/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/0xB10C/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/0xB10C/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/0xB10C/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:0xB10C/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/0xB10C/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/0xB10C/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/0xB10C/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/0xB10C/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/0xB10C/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/0xB10C/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/0xB10C/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/0xB10C/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/0xB10C/bitcoin/hooks",
        "svn_url": "https://github.com/0xB10C/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 238480,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-03-12T13:13:54Z",
        "created_at": "2019-05-04T13:11:05Z",
        "updated_at": "2022-08-30T07:36:49Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "d14c7286b653ad09a5a196aa351b325f97db546b",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 34806,
        "stargazers_count": 74705,
        "watchers_count": 74705,
        "size": 252964,
        "default_branch": "master",
        "open_issues_count": 699,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-03-12T13:48:07Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-03-12T13:22:32Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": true,
    "additions": 33,
    "deletions": 13,
    "changed_files": 2,
    "commits": 2,
    "review_comments": 7,
    "comments": 5
  },
  "events": [
    {
      "event": "commented",
      "id": 1840889202,
      "node_id": "IC_kwDOABII585tub1y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1840889202",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-05T14:21:57Z",
      "updated_at": "2024-02-07T21:44:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28998).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [pablomartin4btc](https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1765800678), [jonatack](https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1766137449), [stratospher](https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1842434756), [amitiuttarwar](https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1850781513) |\n| Approach ACK | [sr-gi](https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1868852542) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#29007](https://github.com/bitcoin/bitcoin/pull/29007) (test: create deterministic addrman in the functional tests by stratospher)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1840889202",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28998"
    },
    {
      "event": "labeled",
      "id": 11154045610,
      "node_id": "LE_lADOABII5854xz0VzwAAAAKY1Tqq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11154045610",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-05T14:22:00Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-05T14:23:31Z",
      "updated_at": "2023-12-05T14:23:31Z",
      "source": {
        "issue": {
          "id": 2016099906,
          "node_id": "I_kwDOABII5854Kz5C",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28964",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28964/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28964/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28964/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/28964",
          "number": 28964,
          "state": "closed",
          "state_reason": "completed",
          "title": "rpc_net.py intemittent failure /                                        assert_equal(len(getrawaddrman[table_name]), len(table_info[\"entries\"]))",
          "body": "https://cirrus-ci.com/task/5884375213015040?logs=ci#L4022\r\n\r\n```\r\n test  2023-11-28T23:28:31.543000Z TestFramework (ERROR): Assertion failed \r\n                                   Traceback (most recent call last):\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/test_framework.py\", line 131, in main\r\n                                       self.run_test()\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/rpc_net.py\", line 71, in run_test\r\n                                       self.test_getrawaddrman()\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/rpc_net.py\", line 506, in test_getrawaddrman\r\n                                       check_getrawaddrman_entries(expected)\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/rpc_net.py\", line 424, in check_getrawaddrman_entries\r\n                                       assert_equal(len(getrawaddrman[table_name]), len(table_info[\"entries\"]))\r\n                                     File \"/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/test/functional/test_framework/util.py\", line 57, in assert_equal\r\n                                       raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\r\n                                   AssertionError: not(3 == 2)",
          "user": {
            "login": "maflcko",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/maflcko",
            "html_url": "https://github.com/maflcko",
            "followers_url": "https://api.github.com/users/maflcko/followers",
            "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
            "organizations_url": "https://api.github.com/users/maflcko/orgs",
            "repos_url": "https://api.github.com/users/maflcko/repos",
            "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/maflcko/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 11,
          "closed_at": "2024-03-11T19:11:35Z",
          "created_at": "2023-11-29T08:49:38Z",
          "updated_at": "2024-03-11T19:11:35Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1765221105,
      "node_id": "PRR_kwDOABII585pNyLx",
      "url": null,
      "actor": null,
      "commit_id": "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1765221105",
      "submitted_at": "2023-12-05T14:31:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
    },
    {
      "event": "reviewed",
      "id": 1765800678,
      "node_id": "PRR_kwDOABII585pP_rm",
      "url": null,
      "actor": null,
      "commit_id": "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n",
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1765800678",
      "submitted_at": "2023-12-05T18:06:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
    },
    {
      "event": "reviewed",
      "id": 1766137449,
      "node_id": "PRR_kwDOABII585pRR5p",
      "url": null,
      "actor": null,
      "commit_id": "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1766137449",
      "submitted_at": "2023-12-05T21:25:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T03:49:41Z",
      "updated_at": "2023-12-06T03:49:41Z",
      "source": {
        "issue": {
          "id": 2027551012,
          "node_id": "PR_kwDOABII585hQFye",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29007",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29007/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29007/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29007/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/29007",
          "number": 29007,
          "state": "closed",
          "state_reason": null,
          "title": "test: create deterministic addrman in the functional tests",
          "body": "An address is placed in a `[bucket,position]` in the addrman table (new table or tried table) using the `addpeeraddress` RPC. This `[bucket,position]` is calculated using `nKey`(and other metrics) for the addrman which is chosen randomly during every run.\r\n\r\nSupposing there are 2 addresses to be placed in an addrman table. During every test run, a different `[bucket,position]` would be calculated for each address.These calculated `[bucket,position]` could even be the same for the 2 addresses in some test runs and result in collisions in the addrman. We wouldn't be able to predict when the collisions are going to happen because we can't predict the `nKey` value which is chosen at random. This can cause flaky tests.\r\n\r\nBecause of these non deterministic collisions, we are limited in what we can do to test addrman functionality. Currently in our tests don't add a second address to prevent these collisions from happening - we only keep 1 address in the new table and 1 address in the tried table. See https://github.com/bitcoin/bitcoin/pull/26988#discussion_r1091145647, https://github.com/bitcoin/bitcoin/pull/23084, [#22831(comment)](https://github.com/bitcoin/bitcoin/pull/22831/files#r708302639). \r\n\r\nThis PR lets us create a deterministic addrman with fixed `nKey` so that we can know the `[bucket,position]` collisions beforehand, safely add more addresses in an addrman table and write more extensive tests.",
          "user": {
            "login": "stratospher",
            "id": 44024636,
            "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
            "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/stratospher",
            "html_url": "https://github.com/stratospher",
            "followers_url": "https://api.github.com/users/stratospher/followers",
            "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
            "organizations_url": "https://api.github.com/users/stratospher/orgs",
            "repos_url": "https://api.github.com/users/stratospher/repos",
            "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/stratospher/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/66",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/66",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/66/labels",
            "id": 10314936,
            "node_id": "MI_kwDOABII584AnWS4",
            "number": 66,
            "state": "open",
            "title": "28.0",
            "creator": {
              "login": "DrahtBot",
              "id": 39886733,
              "node_id": "MDQ6VXNlcjM5ODg2NzMz",
              "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/DrahtBot",
              "html_url": "https://github.com/DrahtBot",
              "followers_url": "https://api.github.com/users/DrahtBot/followers",
              "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
              "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
              "repos_url": "https://api.github.com/users/DrahtBot/repos",
              "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 10,
            "closed_issues": 3,
            "created_at": "2023-12-15T12:08:23Z",
            "updated_at": "2024-03-12T10:05:15Z"
          },
          "locked": false,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29007",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/29007",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/29007.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/29007.patch"
          },
          "closed_at": "2024-03-11T14:29:44Z",
          "created_at": "2023-12-06T02:55:43Z",
          "updated_at": "2024-03-12T13:19:23Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1842434756,
      "node_id": "IC_kwDOABII585t0VLE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1842434756",
      "actor": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T08:42:07Z",
      "updated_at": "2023-12-06T08:42:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK. it's nice to clearly define success/failure paths for `addpeeraddress`. hopefully after #29007, these rare collisions won't happen since a fixed `nKey` can be used.",
      "user": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1842434756",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28998"
    },
    {
      "event": "commented",
      "id": 1842629300,
      "node_id": "IC_kwDOABII585t1Eq0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1842629300",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T10:48:25Z",
      "updated_at": "2023-12-06T10:57:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "Maybe get #29007 in first. ~This allows us to remove the getrawaddrman-test retry logic (possibly do it there). Makes the `getrawaddrman` test simpler.~ edit: I just noticed that 29007 already does that!\r\n\r\nI've addressed the minor comments here, but I think it makes sense to draft this PR for now until #29007 is in. With #29007 we can test the collision case when `addpeeraddress tried` returns `{\"success\": false, \"error\": \"failed-adding-to-tried\"}` as discussed in https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1417047413. ",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1842629300",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28998"
    },
    {
      "event": "convert_to_draft",
      "id": 11166560266,
      "node_id": "CTDE_lADOABII5854xz0VzwAAAAKZlDAK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11166560266",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T10:48:34Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11166779376,
      "node_id": "HRFPE_lADOABII5854xz0VzwAAAAKZl4fw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11166779376",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-06T11:09:23Z"
    },
    {
      "event": "commented",
      "id": 1850781513,
      "node_id": "IC_kwDOABII585uUK9J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1850781513",
      "actor": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-11T19:52:23Z",
      "updated_at": "2023-12-11T19:52:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "approach ACK \r\n\r\n> (the address manager interface does not support removing addresses at the moment and adding this seems to be a bigger effort)\r\n\r\nsince right now the only way addresses are kicked off is triggered by a collision, removing addresses from addrman would require introducing new test-only code paths. in addition to being a bigger effort, it would increase the surface area of potential issues in the future. eg. if someone tried to use it with mainnet code. when I was learning addrman, it took a while for me to wrap my head around the only-removed-by-collision logic (how it works, the reasoning, etc.), and I find it valuable for the tests to encourage devs familiarizing with the pattern that's used in the wild.\r\n\r\nthis is to provide some context behind my approach ACK. the solution proposed here is scoped to the RPC code, which is appropriate for improving the currently misleading RPC interface. ",
      "user": {
        "login": "amitiuttarwar",
        "id": 1500952,
        "node_id": "MDQ6VXNlcjE1MDA5NTI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1500952?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amitiuttarwar",
        "html_url": "https://github.com/amitiuttarwar",
        "followers_url": "https://api.github.com/users/amitiuttarwar/followers",
        "following_url": "https://api.github.com/users/amitiuttarwar/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amitiuttarwar/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amitiuttarwar/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amitiuttarwar/subscriptions",
        "organizations_url": "https://api.github.com/users/amitiuttarwar/orgs",
        "repos_url": "https://api.github.com/users/amitiuttarwar/repos",
        "events_url": "https://api.github.com/users/amitiuttarwar/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amitiuttarwar/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1850781513",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28998"
    },
    {
      "event": "labeled",
      "id": 11494455445,
      "node_id": "LE_lADOABII5854xz0VzwAAAAKtH3iV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11494455445",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-16T05:59:55Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1868852542,
      "node_id": "PRR_kwDOABII585vZG0-",
      "url": null,
      "actor": null,
      "commit_id": "4f251842dd33ac8b6e845ced948b2ccc79d1f8a8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Approach ACK\r\n\r\nIt is a pity that `\"failed-adding-to-tried\"` cannot be tested on demand, however, this at least gets rid of the intermittent failure when a collision is found in `tried`.\r\n\r\nI think the tests can be made more exhaustive though, check comment inline.",
      "user": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#pullrequestreview-1868852542",
      "submitted_at": "2024-02-07T21:44:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
    },
    {
      "event": "commented",
      "id": 1935600643,
      "node_id": "IC_kwDOABII585zXuwD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1935600643",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-09T09:35:05Z",
      "updated_at": "2024-02-09T09:35:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the review @sr-gi! You might want to take a look at #29007 first - this allows us to also test `failed-adding-to-tried`. Once this is merged, I'll continue to work on this PR. ",
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#issuecomment-1935600643",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28998"
    },
    {
      "event": "mentioned",
      "id": 11755751223,
      "node_id": "MEE_lADOABII5854xz0VzwAAAAK8soc3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11755751223",
      "actor": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-09T09:35:06Z"
    },
    {
      "event": "subscribed",
      "id": 11755751236,
      "node_id": "SE_lADOABII5854xz0VzwAAAAK8sodE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11755751236",
      "actor": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-09T09:35:06Z"
    },
    {
      "event": "labeled",
      "id": 12074663116,
      "node_id": "LE_lADOABII5854xz0VzwAAAALPtLzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12074663116",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-11T14:34:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBlNjFkZWRmMjYyNWVhYjYxYWY5MDNlNmM5N2UxMjg3Nzg5ZWU4YTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0e61dedf2625eab61af903e6c97e1287789ee8a0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0e61dedf2625eab61af903e6c97e1287789ee8a0",
      "tree": {
        "sha": "1cbfcb5f4a16744080ba2ed30498f0f814d9547a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1cbfcb5f4a16744080ba2ed30498f0f814d9547a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1cbfcb5f4a16744080ba2ed30498f0f814d9547a\nparent e70590988a7b19aca2e3cc2c91d067347b1915ec\nauthor 0xb10c <b10c@b10c.me> 1701701800 +0100\ncommitter 0xb10c <b10c@b10c.me> 1710248780 +0100\n\nrpc: \"addpeeraddress tried\" return error on failure\n\nWhen trying to add an address to the IP address manager tried table,\nit's first added to the new table and then moved to the tried table.\nPreviously, adding a conflicting address to the address manager's\ntried table with test-only `addpeeraddress tried=true` RPC would\nreturn `{ \"success\": true }`. However, the address would not be added\nto the tried table, but would remain in the new table. This caused,\ne.g., issue 28964.\n\nThis is fixed by returning `{ \"success\": false, \"error\":\n\"failed-adding-to-tried\" }` for failed tried table additions. Since\nthe address remaining in the new table can't be removed (the address\nmanager interface does not support removing addresses at the moment\nand adding this seems to be a bigger effort), an error message is\nreturned. This indicates to a user why the RPC failed and allows\naccounting for the extra address in the new table.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEEDMuq/Xai7OLM0xQd4v/VsdiMqX0FAmXwU0wACgkQ4v/VsdiM\nqX1O0w//f6fK565WAFldG3RvX5bLIOjWWL08VS6x6au3aJ5p0yLAd6V3lHr9nkFJ\naA+Cqz6UFASw6Kvq1ZPTFhBTy9RftxLy5c4gQ7e7bT+FYuOceRh33aYVCVxNo33N\nDcjt4SyILiyUxMC/3aZZd/nLVvInr/2pbuqXNtUuS6DNiV/pv0hFkSDTzRYedlh/\nY/yfIGOtwmmm51iMmFSe2E9H/1TamKsm0ALfoqgjVTGgUt5sJzVm8UyoC81tuKDM\nwVat9Kao5hbEYmR3hP4ayzKZMFZ+EVhklcAYAFlhjGha7HvnTDN/rDY3Z3FyfF8V\n9lAH4FULpOVCCD9fEVfL6/s+tRp+gJ0NT8sncSNi+Jz8Qfjt8S9Ftfttgyq8ShvV\nqA1Fbce6mMsU+RO/rLgwB2k+k9pIPAi7d3oWMWTVJLG9XZ8BB70zAm2pQEIrAL6S\nEUbjwT9TFDlywYigt6C+hv9htacQcvGJKnPmRJgGn8Lm+4lui5ZY2Q9HyMjdVkSW\n2taMiXgJa5tT4iAWfdqkkVmh5fLHAceFYLVB5mGoL3SM9pU85H/4P2iVn8v9Q2LL\nKmYDi86WibT9SSgIon+fOIqp3cetJrIN57gUilewiEcP56zS6fqnZFYjmIbWoSnJ\nbMT+EUmFHzXm1KN5sPWFJOcDNtRwbYEAq6javBaFdL95J55fFN8=\n=2OXa\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIN1tH1VoPbArMID22hWGkR/Z7XIFgcULiqJo9At5XCk0CP/wEI7clwTGHUoF\nAxIgqc5YcBoI8SBPm/7q6d9esoPCOOIWm/GEt5C8fYYj9J1QIrfkPWDlaQjxBGXw\nU0/wCANSQ2skXP9YAIPf4w0u+QyOIyJodHRwczovL2J0Yy5jYWxlbmRhci5jYXRh\nbGxheHkuY29t//AQrPkGz8tBPb5AOqEU1MOPJQjxICP9sg8EoNe8M/PZyDrcbNrk\nEwa1jmKypEISuTl4cGQUCPEEZfBTT/AIQPWvgq4fiZUAg9/jDS75DI4sK2h0dHBz\nOi8vYm9iLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0YW1wcy5vcmf/8BC3IGSCk59T\n4/3cNwTcXRiyCPEgvv3cUBnxHsOZICP6ExfVmUGH/AvSlB68HAJkrN2U79cI8CDa\nh+tZjOELy1b8qgz/XsiO3kf2QP+pyK0Eq0/cKNDLawjxBGXwU0/wCB1ShgvUhv+k\nAIPf4w0u+QyOLi1odHRwczovL2FsaWNlLmJ0Yy5jYWxlbmRhci5vcGVudGltZXN0\nYW1wcy5vcmfwEMwXGAfQjCnVTKg8qNfqPSAI8CBMcvEwHdkHc7a2QaufgWU5gGmA\n/4+qAV1OYtnOvQt0iQjxBGXwU0/wCBFGtV/+6+mjAIPf4w0u+QyOKShodHRwczov\nL2Zpbm5leS5jYWxlbmRhci5ldGVybml0eXdhbGwuY29t\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e70590988a7b19aca2e3cc2c91d067347b1915ec",
          "sha": "e70590988a7b19aca2e3cc2c91d067347b1915ec",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e70590988a7b19aca2e3cc2c91d067347b1915ec"
        }
      ],
      "message": "rpc: \"addpeeraddress tried\" return error on failure\n\nWhen trying to add an address to the IP address manager tried table,\nit's first added to the new table and then moved to the tried table.\nPreviously, adding a conflicting address to the address manager's\ntried table with test-only `addpeeraddress tried=true` RPC would\nreturn `{ \"success\": true }`. However, the address would not be added\nto the tried table, but would remain in the new table. This caused,\ne.g., issue 28964.\n\nThis is fixed by returning `{ \"success\": false, \"error\":\n\"failed-adding-to-tried\" }` for failed tried table additions. Since\nthe address remaining in the new table can't be removed (the address\nmanager interface does not support removing addresses at the moment\nand adding this seems to be a bigger effort), an error message is\nreturned. This indicates to a user why the RPC failed and allows\naccounting for the extra address in the new table.",
      "committer": {
        "name": "0xb10c",
        "email": "b10c@b10c.me",
        "date": "2024-03-12T13:06:20Z"
      },
      "author": {
        "name": "0xb10c",
        "email": "b10c@b10c.me",
        "date": "2023-12-04T14:56:40Z"
      },
      "sha": "0e61dedf2625eab61af903e6c97e1287789ee8a0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZiYjAyYmU0ZTM5MTA5ZGEzYzMwMmE2ZjdhMzQ4NzcwN2M0M2FkMDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "tree": {
        "sha": "fb12c08b70aefa92f48a5303888816bee330200b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fb12c08b70aefa92f48a5303888816bee330200b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree fb12c08b70aefa92f48a5303888816bee330200b\nparent 0e61dedf2625eab61af903e6c97e1287789ee8a0\nauthor 0xb10c <b10c@b10c.me> 1710247340 +0100\ncommitter 0xb10c <b10c@b10c.me> 1710248783 +0100\n\ntest: don't log-assert in addpeeraddress tests\n\nTo check the number of addresses in each addrman table,\nthe addrman checks were re-run and the log output of this check\nwas asserted. Ideally, logs shouldn't be used as an interface\nin automated tests. To avoid asserting the logs, use the getaddrmaninfo\nand getrawaddrman RPCs (which weren't implemented when the test was added).\n\nRemoving the \"getnodeaddress\" calls would also remove the addrman checks\nfrom the test, which could reduce the test coverage. To avoid this,\nthey are kept.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIyBAABCgAdFiEEDMuq/Xai7OLM0xQd4v/VsdiMqX0FAmXwU1AACgkQ4v/VsdiM\nqX3v6g/3dVPbyflGWGXWYOYEHZOTsrGcYtwH7m7KQLOt3YgeYfbgJVvNg98hryMz\nv79yyvhCrfPz6Aj+aNL17SZM3NZjFXeGOuc8icqXVD1foru0JHSSjLKm71sk0/ZH\nnHpswoy2N7eJezreqFLl0SDOmodG59PY0DUitnYcPwIrr6RVAFjIbo101ylBhUIK\n9008/gVdXp5pGT7UL6Srj6Zuq2uKjli8XhXiHYQhmq84S3pvTNgYInggGJQZYS/U\nMtZDTJAiVrK8za9tvHsXAG5MsyImp2QEqy7EZkrmoSuGXJpXzU40RdyLF3QSUV8u\nlZNc/qS4TRW/Mf00KdWfdI0Y3hWanEB4GBZrMZiIPv9RQMfoqNKBWqxdwSO7wU8T\neCl4LCtTUvFneRoNO1KiKRMrRLu/WlMjIXRVqTrqSdBUNkwysDJ+CDIoKVh/FY0W\nIWTDWheeoCEP/oZJX9fWhFMNC42mTWyT4FK5NwrbfNEfL37LpztDochUxJUjkBZs\n1kkgo1N01OM2WmIn7lnmdxtZDZoWkLHtgKmuG4nqO/reTfiyhw+6fIhctJDikyHi\nETDkt5qoAwujqJ5eWjPorEOd74DQBRHEMoP0dKmMQ3+aaMD4GHp7H9k1eACB3a3q\nxzDelMYt3ssoI0ltYEKMevl4JRk509aJZ2yX6dE/lGPTYiYcaw==\n=24JJ\n-----END PGP SIGNATURE-----\n-----BEGIN OPENTIMESTAMPS GIT TIMESTAMP-----\n\nAQHwIOr/Ix64uXGpSMuD/jKnUsUXJMzP3gte1enp7e5BcdUqCP/wEBaifoYoefrG\nv9jrCpqrrM0I8QRl8FNS8AgE5XbBmy2jzwCD3+MNLvkMjiMiaHR0cHM6Ly9idGMu\nY2FsZW5kYXIuY2F0YWxsYXh5LmNvbf/wEE0umTAFs8Ql+JdVVsfdvu0I8CAwpNzX\nHdoKRbacgDsNnwZvj+s4vs78C/bo77zod5aaNwjxBGXwU1LwCODHOo00bKTtAIPf\n4w0u+QyOKShodHRwczovL2Zpbm5leS5jYWxlbmRhci5ldGVybml0eXdhbGwuY29t\n//AQqFKMKX9RLNnRQ6psv+7/2QjxIH7M+XmWFGI6U4JxeeaFMgzd1SA3YFxkqNr3\nl584h/c8CPAgzfybezjTAfMwgqpBh+952AyFzHgu53UgzJ+mNWkSgngI8QRl8FNS\n8Aj1oMCFUNCviwCD3+MNLvkMji4taHR0cHM6Ly9hbGljZS5idGMuY2FsZW5kYXIu\nb3BlbnRpbWVzdGFtcHMub3Jn8BDZ+Nf9jpCsnUqGQZQyNPQrCPEEZfBTUvAIYSpw\n/kwa3/YAg9/jDS75DI4sK2h0dHBzOi8vYm9iLmJ0Yy5jYWxlbmRhci5vcGVudGlt\nZXN0YW1wcy5vcmc=\n-----END OPENTIMESTAMPS GIT TIMESTAMP-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0e61dedf2625eab61af903e6c97e1287789ee8a0",
          "sha": "0e61dedf2625eab61af903e6c97e1287789ee8a0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0e61dedf2625eab61af903e6c97e1287789ee8a0"
        }
      ],
      "message": "test: don't log-assert in addpeeraddress tests\n\nTo check the number of addresses in each addrman table,\nthe addrman checks were re-run and the log output of this check\nwas asserted. Ideally, logs shouldn't be used as an interface\nin automated tests. To avoid asserting the logs, use the getaddrmaninfo\nand getrawaddrman RPCs (which weren't implemented when the test was added).\n\nRemoving the \"getnodeaddress\" calls would also remove the addrman checks\nfrom the test, which could reduce the test coverage. To avoid this,\nthey are kept.",
      "committer": {
        "name": "0xb10c",
        "email": "b10c@b10c.me",
        "date": "2024-03-12T13:06:23Z"
      },
      "author": {
        "name": "0xb10c",
        "email": "b10c@b10c.me",
        "date": "2024-03-12T12:42:20Z"
      },
      "sha": "fbb02be4e39109da3c302a6f7a3487707c43ad05"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12089085732,
      "node_id": "HRFPE_lADOABII5854xz0VzwAAAALQkM8k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12089085732",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-12T13:13:55Z"
    },
    {
      "event": "unlabeled",
      "id": 12089536016,
      "node_id": "UNLE_lADOABII5854xz0VzwAAAALQl64Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12089536016",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-12T13:43:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415701162",
      "pull_request_review_id": 1765221105,
      "id": 1415701162,
      "node_id": "PRRC_kwDOABII585UYeKq",
      "diff_hunk": "@@ -944,7 +944,7 @@ static RPCHelpMan getnodeaddresses()\n static RPCHelpMan addpeeraddress()\n {\n     return RPCHelpMan{\"addpeeraddress\",\n-        \"\\nAdd the address of a potential peer to the address manager. This RPC is for testing only.\\n\",\n+        \"\\nAdd the address of a potential peer to an address manager table. This RPC is for testing only.\\n\",",
      "path": "src/rpc/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "original_commit_id": "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit: no need for those\r\n\r\n```suggestion\r\n        \"Add the address of a potential peer to an address manager table. This RPC is for testing only.\",\r\n```",
      "created_at": "2023-12-05T14:26:34Z",
      "updated_at": "2023-12-05T14:31:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1415701162",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415701162"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 947,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415708737",
      "pull_request_review_id": 1765221105,
      "id": 1415708737,
      "node_id": "PRRC_kwDOABII585UYgBB",
      "diff_hunk": "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:\n                     table_info[\"entries\"][1][\"port\"] = port\n                     self.log.debug(f\"Added {table_info['entries'][1]['address']} to {table_name} table\")\n                     break\n                 else:\n+                    self.log.debug(f\"Failed to add {table_info['entries'][1]['address']} to {table_name} table\")\n+                    # When trying to add an address to the tried table, it's first added to the\n+                    # new table and then moved to the tried table. If the move to the tried table\n+                    # fails, the address still remains in the new table.\n+                    if table_name == \"tried\" and result[\"error\"] == \"faild-adding-to-tried\":\n+                        entry = table_info[\"entries\"][1]",
      "path": "test/functional/rpc_net.py",
      "position": null,
      "original_position": 25,
      "commit_id": "fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "original_commit_id": "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Is a copy the right way, or does it need to be removed from the expected tried table?\r\n\r\nMaybe add steps to reproduce the test code?",
      "created_at": "2023-12-05T14:30:58Z",
      "updated_at": "2023-12-05T14:31:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1415708737",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1415708737"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 509,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416294937",
      "pull_request_review_id": 1766137449,
      "id": 1416294937,
      "node_id": "PRRC_kwDOABII585UavIZ",
      "diff_hunk": "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:\n                     table_info[\"entries\"][1][\"port\"] = port\n                     self.log.debug(f\"Added {table_info['entries'][1]['address']} to {table_name} table\")\n                     break\n                 else:\n+                    self.log.debug(f\"Failed to add {table_info['entries'][1]['address']} to {table_name} table\")\n+                    # When trying to add an address to the tried table, it's first added to the\n+                    # new table and then moved to the tried table. If the move to the tried table\n+                    # fails, the address still remains in the new table.\n+                    if table_name == \"tried\" and result[\"error\"] == \"faild-adding-to-tried\":",
      "path": "test/functional/rpc_net.py",
      "position": null,
      "original_position": 24,
      "commit_id": "fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "original_commit_id": "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n                    if table_name == \"tried\" and result[\"error\"] == \"failed-adding-to-tried\":\r\n```\r\n\r\n(edit, seems this should be covered by a test in every case)",
      "created_at": "2023-12-05T21:24:53Z",
      "updated_at": "2023-12-05T21:27:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1416294937",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416294937"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 508,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416295706",
      "pull_request_review_id": 1766137449,
      "id": 1416295706,
      "node_id": "PRRC_kwDOABII585UavUa",
      "diff_hunk": "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:",
      "path": "test/functional/rpc_net.py",
      "position": null,
      "original_position": 15,
      "commit_id": "fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "original_commit_id": "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Not sure, maybe test explicitly for `True` rather than just truthy\r\n\r\n```suggestion\r\n                if result[\"success\"] is True:\r\n```",
      "created_at": "2023-12-05T21:25:37Z",
      "updated_at": "2023-12-05T21:25:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1416295706",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1416295706"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 499,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417047413",
      "pull_request_review_id": 1767179279,
      "id": 1417047413,
      "node_id": "PRRC_kwDOABII585Udm11",
      "diff_hunk": "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:\n                     table_info[\"entries\"][1][\"port\"] = port\n                     self.log.debug(f\"Added {table_info['entries'][1]['address']} to {table_name} table\")\n                     break\n                 else:\n+                    self.log.debug(f\"Failed to add {table_info['entries'][1]['address']} to {table_name} table\")\n+                    # When trying to add an address to the tried table, it's first added to the\n+                    # new table and then moved to the tried table. If the move to the tried table\n+                    # fails, the address still remains in the new table.\n+                    if table_name == \"tried\" and result[\"error\"] == \"faild-adding-to-tried\":\n+                        entry = table_info[\"entries\"][1]",
      "path": "test/functional/rpc_net.py",
      "position": null,
      "original_position": 25,
      "commit_id": "fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "original_commit_id": "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "in_reply_to_id": 1415708737,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "> Is a copy the right way, or does it need to be removed from the expected tried table?\r\n\r\nJust removing the address from the _expected_ tried table does not work. It's still in the new table. So the question would rather be: \"Do we need to retry adding the address to the tried table?\". I guess that's debatable. We're only running into this case very rarely when there's a collision - all other runs test that this works. This should be solved with #29007.\r\n\r\n> Maybe add steps to reproduce the test code?\r\n\r\nYes, I think we should have that. Especially with typos like https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1416294937. Due to addrman non-determinism, this isn't really doable. Again, #29007 helps here. \r\n",
      "created_at": "2023-12-06T10:11:43Z",
      "updated_at": "2023-12-06T10:11:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1417047413",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1417047413"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 509,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482129839",
      "pull_request_review_id": 1868852542,
      "id": 1482129839,
      "node_id": "PRRC_kwDOABII585YV4Gv",
      "diff_hunk": "@@ -336,7 +336,7 @@ def test_addpeeraddress(self):\n \n         self.log.debug(\"Test that adding an already-present tried address to the new and tried tables fails\")\n         for value in [True, False]:\n-            assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=value, port=8333), {\"success\": False})\n+            assert_equal(node.addpeeraddress(address=\"1.2.3.4\", tried=value, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})",
      "path": "test/functional/rpc_net.py",
      "position": 31,
      "original_position": 5,
      "commit_id": "fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "original_commit_id": "4f251842dd33ac8b6e845ced948b2ccc79d1f8a8",
      "in_reply_to_id": null,
      "user": {
        "login": "sr-gi",
        "id": 6665628,
        "node_id": "MDQ6VXNlcjY2NjU2Mjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6665628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sr-gi",
        "html_url": "https://github.com/sr-gi",
        "followers_url": "https://api.github.com/users/sr-gi/followers",
        "following_url": "https://api.github.com/users/sr-gi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sr-gi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sr-gi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sr-gi/subscriptions",
        "organizations_url": "https://api.github.com/users/sr-gi/orgs",
        "repos_url": "https://api.github.com/users/sr-gi/repos",
        "events_url": "https://api.github.com/users/sr-gi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sr-gi/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This is a non-exhaustive case now. There are two potential error outcomes that can be triggered on demand, from which only one is being tested:\r\n\r\n- a) The address is already in `new` and we are trying to add it again (to any table)\r\n- b) The address is already in `tried` and we are trying to add it again (to any table)\r\n\r\nIn this case, only `b)` is being tested: we do so both with and without the \"try to add to tried\" flag, but the reality is that the reason why the function is failing is the entry is already present in `tried`, even when we try to add it to `new`. Given how the addrman works, we cannot really try to add things to `tried` multiple times on demand, given it would need to be added to `new` first and that would fail.\r\n\r\nSo I think the only way to properly test this would be to add two different addresses twice. e.g:\r\n\r\n```python\r\n# Try that the same address cannot be added twice to `new`\r\nassert_equal(node.addpeeraddress(address=\"1.2.3.5\", tried=False, port=8333), {\"success\": True})\r\nassert_equal(node.addpeeraddress(address=\"1.2.3.5\", tried=False, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})\r\n# Try that the same address cannot be added twice to `tried`\r\nassert_equal(node.addpeeraddress(address=\"1.2.3.6\", tried=True, port=8333), {\"success\": True})\r\nassert_equal(node.addpeeraddress(address=\"1.2.3.6\", tried=True, port=8333), {\"success\": False, \"error\": \"failed-adding-to-new\"})\r\n```",
      "created_at": "2024-02-07T21:39:26Z",
      "updated_at": "2024-02-07T21:44:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1482129839",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1482129839"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 357,
      "original_line": 357,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1521458993",
      "pull_request_review_id": 1931055070,
      "id": 1521458993,
      "node_id": "PRRC_kwDOABII585ar58x",
      "diff_hunk": "@@ -495,11 +495,20 @@ def check_getrawaddrman_entries(expected):\n             # added. Incrementing the port changes the position in the new table bucket (bucket\n             # stays the same) and changes both the bucket and the position in the tried table.\n             while True:\n-                if node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")[\"success\"]:\n+                result = node.addpeeraddress(address=table_info[\"entries\"][1][\"address\"], port=port, tried=table_name == \"tried\")\n+                if result[\"success\"]:\n                     table_info[\"entries\"][1][\"port\"] = port\n                     self.log.debug(f\"Added {table_info['entries'][1]['address']} to {table_name} table\")\n                     break\n                 else:\n+                    self.log.debug(f\"Failed to add {table_info['entries'][1]['address']} to {table_name} table\")\n+                    # When trying to add an address to the tried table, it's first added to the\n+                    # new table and then moved to the tried table. If the move to the tried table\n+                    # fails, the address still remains in the new table.\n+                    if table_name == \"tried\" and result[\"error\"] == \"faild-adding-to-tried\":\n+                        entry = table_info[\"entries\"][1]",
      "path": "test/functional/rpc_net.py",
      "position": null,
      "original_position": 25,
      "commit_id": "fbb02be4e39109da3c302a6f7a3487707c43ad05",
      "original_commit_id": "cf54bc7aaace7f17d851b38415844b03b773e1a4",
      "in_reply_to_id": 1415708737,
      "user": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Resolving this with the rebase on-top of #29007 as this code was removed in 2cc8ca19f4185490f30a49516c890b2289fbab71. The addresses are now added in [seed_addrman()](https://github.com/bitcoin/bitcoin/pull/29007/commits/2cc8ca19f4185490f30a49516c890b2289fbab71#diff-355d4500a3163e554fc3c3051b21b6bc9a97bcb35b146bff17d5fc1b4e4fd650R44) and ([currently](https://github.com/bitcoin/bitcoin/pull/29007/commits/2cc8ca19f4185490f30a49516c890b2289fbab71#r1521452867)) can't produce a collision.",
      "created_at": "2024-03-12T13:23:17Z",
      "updated_at": "2024-03-12T13:23:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28998#discussion_r1521458993",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1521458993"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28998"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 509,
      "side": "RIGHT"
    }
  ]
}