{
  "type": "issue",
  "issue": {
    "id": 1811732361,
    "node_id": "I_kwDOABII585r_NeJ",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28104",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28104/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28104/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28104/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/28104",
    "number": 28104,
    "state": "closed",
    "state_reason": "completed",
    "title": "win: non-static libssp in libbitcoinconsensus DLL",
    "body": "If you Guix build for Windows, and call objdump on `libbitcoinconsensus-0.dll`, you'll find it uses a non-static libssp:\r\n```bash\r\nobjdump -x src/.libs/libbitcoinconsensus-0.dll\r\n...\r\nThe Import Tables (interpreted .idata section contents)\r\n vma:            Hint    Time      Forward  DLL       First\r\n                 Table   Stamp     Chain    Name      Thunk\r\n 00263000\t00263050 00000000 00000000 0026409c 00263490\r\n\r\n\tDLL Name: libssp-0.dll\r\n\tvma:  Hint/Ord Member-Name Bound-To\r\n\t2638d0\t    3  __memcpy_chk\r\n\t2638e0\t    7  __stack_chk_fail\r\n\t2638f4\t    8  __stack_chk_guard\r\n```\r\n\r\nDLLs should be built with a static libgcc/stdc++/ssp:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/84c5416b03248c91aa7efe46555699f9f121d8a4/configure.ac#L724-L730\r\n\r\nThis has been an issue since we switched to using Guix for the 22.0 release.",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 234877,
        "node_id": "MDU6TGFiZWwyMzQ4Nzc=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Windows",
        "name": "Windows",
        "color": "884400",
        "default": false
      },
      {
        "id": 61889416,
        "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
        "name": "Build system",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 0,
    "closed_at": "2023-11-22T17:17:20Z",
    "created_at": "2023-07-19T11:18:38Z",
    "updated_at": "2023-11-22T17:17:20Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 9861287162,
      "node_id": "LE_lADOABII585r_NeJzwAAAAJLx0z6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9861287162",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T11:18:38Z",
      "label": {
        "name": "Windows",
        "color": "884400"
      }
    },
    {
      "event": "labeled",
      "id": 9861287164,
      "node_id": "LE_lADOABII585r_NeJzwAAAAJLx0z8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9861287164",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-19T11:18:38Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-12T14:46:46Z",
      "updated_at": "2023-09-12T14:46:46Z",
      "source": {
        "issue": {
          "id": 1892683340,
          "node_id": "PR_kwDOABII585aI4F4",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28461",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28461/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28461/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28461/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28461",
          "number": 28461,
          "state": "closed",
          "state_reason": null,
          "title": "build: Windows SSP roundup",
          "body": "I was expecting this to fail to compile somewhere, maybe in the CI, but that doesn't seem to be the case? \r\nSeems workable given the SSP related changes in the newer mingw-w64 headers (which are in Guix):\r\n> Implement some of the stack protector functions/variables so -lssp is now optional when _FORTIFY_SOURCE or -fstack-protector-strong is used.\r\n\r\nHowever I think this would still be broken in some older environments, so we might have to wait for a compiler bump, or similar. The optional -lssp also seems to work when using older headers, which doesn't make sense.\r\n\r\nWould fix #28104.",
          "user": {
            "login": "fanquake",
            "id": 863730,
            "node_id": "MDQ6VXNlcjg2MzczMA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fanquake",
            "html_url": "https://github.com/fanquake",
            "followers_url": "https://api.github.com/users/fanquake/followers",
            "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
            "organizations_url": "https://api.github.com/users/fanquake/orgs",
            "repos_url": "https://api.github.com/users/fanquake/repos",
            "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fanquake/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 234877,
              "node_id": "MDU6TGFiZWwyMzQ4Nzc=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Windows",
              "name": "Windows",
              "color": "884400",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28461",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28461",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28461.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28461.patch"
          },
          "closed_at": "2023-11-22T17:17:22Z",
          "created_at": "2023-09-12T14:46:46Z",
          "updated_at": "2023-11-22T17:17:52Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "closed",
      "id": 11039257780,
      "node_id": "CE_lADOABII585r_NeJzwAAAAKR_bS0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11039257780",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "5d13b9586eb97f59d9bb53aae1d8c27dc052b61e",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5d13b9586eb97f59d9bb53aae1d8c27dc052b61e",
      "created_at": "2023-11-22T17:17:21Z"
    }
  ]
}