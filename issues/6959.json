{
  "type": "issue",
  "issue": {
    "id": 115469682,
    "node_id": "MDU6SXNzdWUxMTU0Njk2ODI=",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6959",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6959/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6959/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6959/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/6959",
    "number": 6959,
    "state": "closed",
    "state_reason": "completed",
    "title": "Mempool trimming regression: removes local wallet transactions",
    "body": "#6722 introduces the possibility of removing transactions generated by the local wallet from its mempool, but fails to update CMerkleTx::GetDepthInMainChain which assumes a transaction neither in the blockchain nor the mempool must be conflicted. Since the wallet transaction is now assumed to be conflicted, the wallet will happily produce a double-spend using the same inputs again.\n",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": true,
    "active_lock_reason": "resolved",
    "comments": 5,
    "closed_at": "2020-04-27T00:04:30Z",
    "created_at": "2015-11-06T09:37:47Z",
    "updated_at": "2022-02-15T11:03:01Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 154364614,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDM2NDYxNA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154364614",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-11-06T09:45:53Z",
      "updated_at": "2015-11-06T09:45:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "During another case i was also stumbling over a `GetDepthInMainChain()` inconsistency. IMO the wallet should keep it's own height cache or even it's own headers-only-chain (anyways required in case of process separation).\n\nBut anyways; the bitcoin-core local wallet (and other wallets) need to find a way to handle removed transactions from the mempool without marking them as conflicted.\n\nBut you are saying using inputs from a conflicted transaction results in a double-spend? The transaction was removed from the mempool and is not in the chain,... that means it's available again for coin selection, isn't it?\n",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/6959#issuecomment-154364614",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6959"
    },
    {
      "event": "commented",
      "id": 154366233,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDM2NjIzMw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154366233",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-11-06T09:50:31Z",
      "updated_at": "2015-11-06T09:50:31Z",
      "author_association": "MEMBER",
      "body": "In most cases, it means the wallet wishes to keep it in the mempool and rebroadcast until it is mined.\n",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/6959#issuecomment-154366233",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6959"
    },
    {
      "event": "commented",
      "id": 154369861,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDM2OTg2MQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154369861",
      "actor": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-11-06T10:09:24Z",
      "updated_at": "2015-11-06T10:09:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Yes. Such use cases, together with the FSS-RBF (or CPFP) need to be handled by the wallet.\n",
      "user": {
        "login": "jonasschnelli",
        "id": 178464,
        "node_id": "MDQ6VXNlcjE3ODQ2NA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/178464?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonasschnelli",
        "html_url": "https://github.com/jonasschnelli",
        "followers_url": "https://api.github.com/users/jonasschnelli/followers",
        "following_url": "https://api.github.com/users/jonasschnelli/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonasschnelli/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonasschnelli/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonasschnelli/subscriptions",
        "organizations_url": "https://api.github.com/users/jonasschnelli/orgs",
        "repos_url": "https://api.github.com/users/jonasschnelli/repos",
        "events_url": "https://api.github.com/users/jonasschnelli/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonasschnelli/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/6959#issuecomment-154369861",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6959"
    },
    {
      "event": "labeled",
      "id": 456784086,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ1Njc4NDA4Ng==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/456784086",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-11-06T10:40:17Z",
      "label": {
        "name": "Wallet",
        "color": "02d7e1"
      }
    },
    {
      "event": "commented",
      "id": 154399726,
      "node_id": "MDEyOklzc3VlQ29tbWVudDE1NDM5OTcyNg==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/154399726",
      "actor": {
        "login": "jgarzik",
        "id": 494411,
        "node_id": "MDQ6VXNlcjQ5NDQxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/494411?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jgarzik",
        "html_url": "https://github.com/jgarzik",
        "followers_url": "https://api.github.com/users/jgarzik/followers",
        "following_url": "https://api.github.com/users/jgarzik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jgarzik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jgarzik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jgarzik/subscriptions",
        "organizations_url": "https://api.github.com/users/jgarzik/orgs",
        "repos_url": "https://api.github.com/users/jgarzik/repos",
        "events_url": "https://api.github.com/users/jgarzik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jgarzik/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-11-06T12:43:16Z",
      "updated_at": "2015-11-06T12:43:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Yes - this problem was the same one that merge-blocked mempool janitor...  Need to solve for local wallet\n",
      "user": {
        "login": "jgarzik",
        "id": 494411,
        "node_id": "MDQ6VXNlcjQ5NDQxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/494411?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jgarzik",
        "html_url": "https://github.com/jgarzik",
        "followers_url": "https://api.github.com/users/jgarzik/followers",
        "following_url": "https://api.github.com/users/jgarzik/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jgarzik/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jgarzik/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jgarzik/subscriptions",
        "organizations_url": "https://api.github.com/users/jgarzik/orgs",
        "repos_url": "https://api.github.com/users/jgarzik/repos",
        "events_url": "https://api.github.com/users/jgarzik/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jgarzik/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/6959#issuecomment-154399726",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6959"
    },
    {
      "event": "labeled",
      "id": 456889599,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ1Njg4OTU5OQ==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/456889599",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-11-06T13:01:29Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "morcos",
        "id": 4360349,
        "node_id": "MDQ6VXNlcjQzNjAzNDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4360349?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/morcos",
        "html_url": "https://github.com/morcos",
        "followers_url": "https://api.github.com/users/morcos/followers",
        "following_url": "https://api.github.com/users/morcos/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/morcos/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/morcos/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/morcos/subscriptions",
        "organizations_url": "https://api.github.com/users/morcos/orgs",
        "repos_url": "https://api.github.com/users/morcos/repos",
        "events_url": "https://api.github.com/users/morcos/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/morcos/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-11-10T01:45:57Z",
      "updated_at": "2015-11-10T01:45:57Z",
      "source": {
        "issue": {
          "id": 115855348,
          "node_id": "MDU6SXNzdWUxMTU4NTUzNDg=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6972",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6972/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6972/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6972/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/6972",
          "number": 6972,
          "state": "closed",
          "state_reason": "completed",
          "title": "Mempool trimming regression: Rejects my own high prority 0-fee transactions",
          "body": "Bitcoin was started like this a few days ago, after compiling latest version from git (4ee149a):\nbitcoind -daemon -txconfirmtarget=3 -sendfreetransactions -spendzeroconfchange=0 \n\nAfter running a few days, mempool trimming has begun:\n$ bitcoin-cli getmempoolinfo\n{\n  \"size\": 12167,\n  \"bytes\": 137785057,\n  \"usage\": 297081872,\n  \"maxmempool\": 300000000,\n  \"mempoolminfee\": 0.00001034\n}\n\nAnd now it rejects my own transactions.  I have a lot of old unspent coins in my wallet, which often result in high enough priority for a free transaction:\n\n$ bitcoin-cli sendfrom \"\" 1[redacted] 1.05\nerror code: -4\nerror message:\nError: The transaction was rejected! This might happen if some of the coins in your wallet were already spent, such as if you used a copy of wallet.dat and coins were spent in the copy but not marked as spent here.\n\nIt was clearly rejected:\n$ bitcoin-cli listtransactions \"\" 1\n[\n  {\n    \"account\": \"\",\n    \"address\": \"1[redacted]\",\n    \"category\": \"send\",\n    \"amount\": -1.05000000,\n    \"vout\": 0,\n    \"fee\": 0.00000000,\n    \"confirmations\": -1,\n    \"txid\": \"...\",\n    \"walletconflicts\": [\n    ],\n    \"time\": 1447066461,\n    \"timereceived\": 1447066461\n  }\n]\n\nBut this can not be trusted!  After a restart of bitcoind, the transaction shows up again, now with 0 confirmations.  This can lead to double transmissions if the user think the first attempt actually failed:\n[\n  {\n    \"account\": \"\",\n    \"address\": \"1[redacted]\",\n    \"category\": \"send\",\n    \"amount\": -1.05000000,\n    \"vout\": 0,\n    \"fee\": 0.00000000,\n    \"confirmations\": 0,\n    \"txid\": \"...\",\n    \"walletconflicts\": [\n    ],\n    \"time\": 1447066461,\n    \"timereceived\": 1447066461\n  }\n]\n\nPrivate details about the transaction available on request.\n\nSuggestion:\n0. Revert the current mempool trimming.  It is dangerous.\n1. Take priority into account when trimming.  Keep transactions with sufficient priority to get mined before the transactions which are removed due to low fee, using estimatefee and estimatepriority as guidance.  This will help prioritize non-spammy transactions as well.\n2. Give own transactions infinite priority.  If you are mining, this will make sure your own transactions will always be included if you leave room for free transactions.\n",
          "user": {
            "login": "sturles",
            "id": 15728135,
            "node_id": "MDQ6VXNlcjE1NzI4MTM1",
            "avatar_url": "https://avatars.githubusercontent.com/u/15728135?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sturles",
            "html_url": "https://github.com/sturles",
            "followers_url": "https://api.github.com/users/sturles/followers",
            "following_url": "https://api.github.com/users/sturles/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sturles/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sturles/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sturles/subscriptions",
            "organizations_url": "https://api.github.com/users/sturles/orgs",
            "repos_url": "https://api.github.com/users/sturles/repos",
            "events_url": "https://api.github.com/users/sturles/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sturles/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 14,
          "closed_at": "2019-02-12T20:59:54Z",
          "created_at": "2015-11-09T11:15:33Z",
          "updated_at": "2021-12-16T14:05:54Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-11-10T10:21:41Z",
      "updated_at": "2015-11-10T10:21:41Z",
      "source": {
        "issue": {
          "id": 108451549,
          "node_id": "MDU6SXNzdWUxMDg0NTE1NDk=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6725",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6725/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6725/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6725/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/6725",
          "number": 6725,
          "state": "closed",
          "state_reason": "completed",
          "title": "Mempool should not reject wallet created transactions with sufficient fee",
          "body": "Steps to reproduce on 48efbdb:\n\n```\n-> settxfee 0.04\n<- true\n\n-> sendtoaddress mwEHWzBhaPYiErWWhmWW7QCjGoKNPaQQax 16\n<- Error: The transaction was rejected! This might happen if some of the coins in your wallet were already spent, such as if you used a copy of wallet.dat and coins were spent in the copy but not marked as spent here. (code -4)\n```\n",
          "user": {
            "login": "MarcoFalke",
            "id": 6399679,
            "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
            "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/MarcoFalke",
            "html_url": "https://github.com/MarcoFalke",
            "followers_url": "https://api.github.com/users/MarcoFalke/followers",
            "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
            "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
            "repos_url": "https://api.github.com/users/MarcoFalke/repos",
            "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 82428251,
              "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
              "name": "TX fees and policy",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 164208572,
              "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
              "name": "Mempool",
              "color": "fef2c0",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 11,
          "closed_at": "2016-03-14T00:35:20Z",
          "created_at": "2015-09-26T09:16:19Z",
          "updated_at": "2021-09-08T12:23:55Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "sturles",
        "id": 15728135,
        "node_id": "MDQ6VXNlcjE1NzI4MTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15728135?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sturles",
        "html_url": "https://github.com/sturles",
        "followers_url": "https://api.github.com/users/sturles/followers",
        "following_url": "https://api.github.com/users/sturles/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sturles/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sturles/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sturles/subscriptions",
        "organizations_url": "https://api.github.com/users/sturles/orgs",
        "repos_url": "https://api.github.com/users/sturles/repos",
        "events_url": "https://api.github.com/users/sturles/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sturles/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2015-11-12T19:10:41Z",
      "updated_at": "2015-11-12T19:10:41Z",
      "source": {
        "issue": {
          "id": 116414863,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NTA0MzIwMDY=",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6992",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6992/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6992/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6992/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/6992",
          "number": 6992,
          "state": "closed",
          "state_reason": null,
          "title": "[WIP] [Mempool] Add space for priority transactions",
          "body": "This is a work-in-progress that certainly needs more testing and cleanup -- sharing now in light of discussions happening elsewhere (#6972) about some of the drawbacks from introducing mempool limiting in #6722.\n\nOverall I agree with @sturles in that the existing notion of priority is largely a useful one to differentiate transactions that might be part of an attack from ones that likely are not.  On the other hand, coming up with a mempool limiting algorithm like #6722 that we believe is robust against attack was challenging enough without having to also try to maintain this particular existing policy.\n\nHowever after further thought I think we can restore some of the useful features of priority without major re-engineering of the mempool.  I propose to reserve some fraction of the mempool (defaults to the blockprioritysize/blockmaxsize) for transactions that have no unconfirmed parents.  Transactions in that space will be sorted by priority at the time of entry to the mempool.\n\nIf the priority space in the mempool exceeds its limit, priority transactions will be moved to the feerate portion of the mempool (where they will be sorted based on their feerate and the feerate of any descendants).  Once moved to the feerate area, transactions never move back to the priority area.\n\nNew transactions that don't meet the mempool reject fee must meet the new GetMinPriority(), which is increased when priority transactions are moved to the feerate part of the mempool, and decayed as time passes (just like the mempool's minimum fee).\n\nNote that this relies on the rate limiting of free transactions to prevent relay bandwidth DoS attacks using priority transactions.\n",
          "user": {
            "login": "sdaftuar",
            "id": 7463573,
            "node_id": "MDQ6VXNlcjc0NjM1NzM=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7463573?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/sdaftuar",
            "html_url": "https://github.com/sdaftuar",
            "followers_url": "https://api.github.com/users/sdaftuar/followers",
            "following_url": "https://api.github.com/users/sdaftuar/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/sdaftuar/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/sdaftuar/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/sdaftuar/subscriptions",
            "organizations_url": "https://api.github.com/users/sdaftuar/orgs",
            "repos_url": "https://api.github.com/users/sdaftuar/repos",
            "events_url": "https://api.github.com/users/sdaftuar/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/sdaftuar/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "active_lock_reason": "resolved",
          "comments": 30,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/6992",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/6992",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/6992.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/6992.patch"
          },
          "closed_at": "2015-11-12T19:34:56Z",
          "created_at": "2015-11-11T20:28:15Z",
          "updated_at": "2021-09-08T11:18:27Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 462883598,
      "node_id": "MDE1OlJlZmVyZW5jZWRFdmVudDQ2Mjg4MzU5OA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/462883598",
      "actor": {
        "login": "sturles",
        "id": 15728135,
        "node_id": "MDQ6VXNlcjE1NzI4MTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15728135?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sturles",
        "html_url": "https://github.com/sturles",
        "followers_url": "https://api.github.com/users/sturles/followers",
        "following_url": "https://api.github.com/users/sturles/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sturles/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sturles/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sturles/subscriptions",
        "organizations_url": "https://api.github.com/users/sturles/orgs",
        "repos_url": "https://api.github.com/users/sturles/repos",
        "events_url": "https://api.github.com/users/sturles/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sturles/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "b79c9f2be69917e67a135a6518ea14a416969f2d",
      "commit_url": "https://api.github.com/repos/morcos/bitcoin/commits/b79c9f2be69917e67a135a6518ea14a416969f2d",
      "created_at": "2015-11-12T20:27:04Z"
    },
    {
      "event": "commented",
      "id": 619646137,
      "node_id": "MDEyOklzc3VlQ29tbWVudDYxOTY0NjEzNw==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/619646137",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-27T00:04:30Z",
      "updated_at": "2020-04-27T00:04:30Z",
      "author_association": "MEMBER",
      "body": "Is this still an issue with a recent version of Bitcoin Core? If yes, what are the steps to reproduce?",
      "user": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/6959#issuecomment-619646137",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/6959"
    },
    {
      "event": "closed",
      "id": 3273525320,
      "node_id": "MDExOkNsb3NlZEV2ZW50MzI3MzUyNTMyMA==",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/3273525320",
      "actor": {
        "login": "MarcoFalke",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MarcoFalke",
        "html_url": "https://github.com/MarcoFalke",
        "followers_url": "https://api.github.com/users/MarcoFalke/followers",
        "following_url": "https://api.github.com/users/MarcoFalke/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MarcoFalke/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MarcoFalke/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MarcoFalke/subscriptions",
        "organizations_url": "https://api.github.com/users/MarcoFalke/orgs",
        "repos_url": "https://api.github.com/users/MarcoFalke/repos",
        "events_url": "https://api.github.com/users/MarcoFalke/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MarcoFalke/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2020-04-27T00:04:30Z"
    },
    {
      "event": "locked",
      "id": 6074006050,
      "node_id": "LOE_lADOABII584G4e1yzwAAAAFqCfoi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/6074006050",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2022-02-15T11:03:01Z",
      "lock_reason": "resolved"
    }
  ]
}