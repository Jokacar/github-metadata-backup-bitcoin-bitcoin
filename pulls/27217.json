{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217",
    "id": 1265273155,
    "node_id": "PR_kwDOABII585LaolD",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/27217",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/27217.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/27217.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
    "number": 27217,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "wallet: Replace use of purpose strings with an enum",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false
    },
    "body": "Instead of storing and passing around fixed strings for the purpose of an address, use an enum.",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "created_at": "2023-03-06T22:28:58Z",
    "updated_at": "2024-04-12T12:42:26Z",
    "closed_at": "2023-04-12T09:31:28Z",
    "mergeable_state": "unknown",
    "merged_at": "2023-04-12T09:31:28Z",
    "merge_commit_sha": "cae0608ad4b195652e0cfcc905e19b50197d43ab",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "achow101:address-purpose-enums",
      "ref": "address-purpose-enums",
      "sha": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "repo": {
        "id": 45006379,
        "node_id": "MDEwOlJlcG9zaXRvcnk0NTAwNjM3OQ==",
        "name": "bitcoin",
        "full_name": "achow101/bitcoin",
        "owner": {
          "login": "achow101",
          "id": 3782274,
          "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/achow101",
          "html_url": "https://github.com/achow101",
          "followers_url": "https://api.github.com/users/achow101/followers",
          "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
          "organizations_url": "https://api.github.com/users/achow101/orgs",
          "repos_url": "https://api.github.com/users/achow101/repos",
          "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/achow101/received_events",
          "type": "User",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/achow101/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/achow101/bitcoin",
        "archive_url": "https://api.github.com/repos/achow101/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/achow101/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/achow101/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/achow101/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/achow101/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/achow101/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/achow101/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/achow101/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/achow101/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/achow101/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/achow101/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/achow101/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/achow101/bitcoin/events",
        "forks_url": "https://api.github.com/repos/achow101/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/achow101/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/achow101/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/achow101/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/achow101/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/achow101/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/achow101/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/achow101/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/achow101/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/achow101/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/achow101/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/achow101/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/achow101/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/achow101/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/achow101/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/achow101/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:achow101/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/achow101/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/achow101/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/achow101/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/achow101/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/achow101/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/achow101/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/achow101/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/achow101/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/achow101/bitcoin/hooks",
        "svn_url": "https://github.com/achow101/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 10,
        "stargazers_count": 36,
        "watchers_count": 36,
        "size": 268768,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-04-11T14:58:30Z",
        "created_at": "2015-10-27T00:20:28Z",
        "updated_at": "2024-04-04T14:22:50Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "27dcc07c08a77eba53ccc91e5521ff674f1bd198",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 35075,
        "stargazers_count": 75433,
        "watchers_count": 75433,
        "size": 254721,
        "default_branch": "master",
        "open_issues_count": 693,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2024-04-12T12:42:50Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2024-04-12T12:25:34Z",
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 233,
    "deletions": 152,
    "changed_files": 25,
    "commits": 4,
    "review_comments": 56,
    "comments": 6
  },
  "events": [
    {
      "event": "commented",
      "id": 1457117597,
      "node_id": "IC_kwDOABII585W2dmd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1457117597",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-06T22:29:01Z",
      "updated_at": "2023-04-12T08:45:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [josibake](https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1504894418) |\n| Stale ACK | [aureleoules](https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1357917977), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1377763599), [Xekyo](https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1503974799) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/723](https://github.com/bitcoin-core/gui/pull/723) (Add warnings for non-active addresses in receive tab and address book by pinheadmz)\n* [#bitcoin-core/gui/650](https://github.com/bitcoin-core/gui/pull/650) (Add Import to Wallet GUI by KolbyML)\n* [#27286](https://github.com/bitcoin/bitcoin/pull/27286) (wallet: Keep track of the wallet's own transaction outputs in memory by achow101)\n* [#27224](https://github.com/bitcoin/bitcoin/pull/27224) (refactor: Remove CAddressBookData::destdata by ryanofsky)\n* [#26840](https://github.com/bitcoin/bitcoin/pull/26840) (refactor: importpubkey, importprivkey, importaddress, importmulti, and importdescriptors rpc by KolbyML)\n* [#26836](https://github.com/bitcoin/bitcoin/pull/26836) (wallet: finish addressbook encapsulation by furszy)\n* [#25620](https://github.com/bitcoin/bitcoin/pull/25620) (wallet: Introduce AddressBookManager by furszy)\n* [#25297](https://github.com/bitcoin/bitcoin/pull/25297) (wallet: group independent db writes on single batched db transaction by furszy)\n* [#24914](https://github.com/bitcoin/bitcoin/pull/24914) (wallet: Load database records in a particular order by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1457117597",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "labeled",
      "id": 8679476080,
      "node_id": "LE_lADOABII585gGfvjzwAAAAIFVktw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8679476080",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-06T22:29:03Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "reviewed",
      "id": 1327941131,
      "node_id": "PRR_kwDOABII585PJsYL",
      "url": null,
      "actor": null,
      "commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "nits",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1327941131",
      "submitted_at": "2023-03-07T09:15:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T10:08:20Z",
      "updated_at": "2023-03-07T10:08:20Z",
      "source": {
        "issue": {
          "id": 1332190397,
          "node_id": "PR_kwDOEEET9c481L0T",
          "url": "https://api.github.com/repos/bitcoin-core/gui/issues/650",
          "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
          "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/650/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/650/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/650/events",
          "html_url": "https://github.com/bitcoin-core/gui/pull/650",
          "number": 650,
          "state": "closed",
          "state_reason": null,
          "title": "Add Import to Wallet GUI",
          "body": "resolves #19 \r\n\r\nThis PR does a few things\r\n- Refactors importmulti and importdescripters RPC code\r\n- Adds functions to interfaces\r\n- Adds GUI's for importpubkey, importprivkey, importaddress, importmulti, and importdescriptors RPCs\r\n- Adds QT Tests for all 5 import GUI's\r\n\r\n#### Things to get this merged\r\n- [ ] get the refactor merge on https://github.com/bitcoin/bitcoin/pull/26840\r\n- [ ] after that is done I will split the GUI PR into (importpubkey, importprivkey, importaddress), importmulti, importdescriptors each PR will have its respective tests. I will rebase to remove the commit for the refactor in those PR's it is in this PR so people can test. This is for easier code review\r\n\r\nThe dialogs are located under File -> Import to Wallet...\r\nThe options vary based on what is supported with your specific wallet type.\r\n\r\n| Dialogs are Located  |  Import Public Key Dialog  |\r\n|---|---|\r\n| ![image](https://user-images.githubusercontent.com/31669092/183477017-0423b0db-f84c-4729-9a73-b47544d88aaf.png)  | ![image](https://user-images.githubusercontent.com/31669092/183477129-0c212955-bbf3-4bc9-8089-cf2c1da7644d.png)  |\r\n\r\n| Import Private Key Dialog  | Import Address Dialog  |\r\n|---|---|\r\n|![image](https://user-images.githubusercontent.com/31669092/183477391-84ea6224-e7f5-4fba-a830-2e7fe3effcec.png)   |  ![image](https://user-images.githubusercontent.com/31669092/183477525-c3ba8cdc-ae0f-4113-8e0b-86db548f1e33.png) |\r\n\r\n| Import Multi Dialog scriptPubKey Tab  | Import Multi Dialog Descriptor Tab  |\r\n|---|---|\r\n| ![image](https://user-images.githubusercontent.com/31669092/183477928-232be9c4-fd64-4a20-91ba-00ebe41d66a6.png)  | ![image](https://user-images.githubusercontent.com/31669092/183478127-0b3c8aed-54d9-4fb4-a583-0a6bb5a46d28.png)  |\r\n\r\n|  Import Descriptors Dialog  |\r\n|---|\r\n|  ![image](https://user-images.githubusercontent.com/31669092/183478374-7f9c174d-0067-4812-9556-9e34e813b362.png) |\r\n\r\nFor Range before I had a lineedit with placeholders begin and end, @achow101 suggested I used QSpinBox, but it doesn't have placeholder text. So Currently if both are default value it counts as no input. It would look very nice if I implemented a custom QAbstractSpinBox with placeholder text, but I am not sure if it is overkill for this PR.",
          "user": {
            "login": "KolbyML",
            "id": 31669092,
            "node_id": "MDQ6VXNlcjMxNjY5MDky",
            "avatar_url": "https://avatars.githubusercontent.com/u/31669092?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/KolbyML",
            "html_url": "https://github.com/KolbyML",
            "followers_url": "https://api.github.com/users/KolbyML/followers",
            "following_url": "https://api.github.com/users/KolbyML/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/KolbyML/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/KolbyML/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/KolbyML/subscriptions",
            "organizations_url": "https://api.github.com/users/KolbyML/orgs",
            "repos_url": "https://api.github.com/users/KolbyML/repos",
            "events_url": "https://api.github.com/users/KolbyML/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/KolbyML/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 2145506980,
              "node_id": "MDU6TGFiZWwyMTQ1NTA2OTgw",
              "url": "https://api.github.com/repos/bitcoin-core/gui/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 2335257565,
              "node_id": "MDU6TGFiZWwyMzM1MjU3NTY1",
              "url": "https://api.github.com/repos/bitcoin-core/gui/labels/Up%20for%20grabs",
              "name": "Up for grabs",
              "description": "",
              "color": "99a810",
              "default": false
            },
            {
              "id": 2927906211,
              "node_id": "MDU6TGFiZWwyOTI3OTA2MjEx",
              "url": "https://api.github.com/repos/bitcoin-core/gui/labels/Wallet",
              "name": "Wallet",
              "description": "",
              "color": "08a781",
              "default": false
            },
            {
              "id": 5353934559,
              "node_id": "LA_kwDOEEET9c8AAAABPx6O3w",
              "url": "https://api.github.com/repos/bitcoin-core/gui/labels/CI%20failed",
              "name": "CI failed",
              "color": "ededed",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/gui/pulls/650",
            "html_url": "https://github.com/bitcoin-core/gui/pull/650",
            "diff_url": "https://github.com/bitcoin-core/gui/pull/650.diff",
            "patch_url": "https://github.com/bitcoin-core/gui/pull/650.patch"
          },
          "closed_at": "2024-03-20T00:37:27Z",
          "created_at": "2022-08-08T17:43:21Z",
          "updated_at": "2024-03-22T09:40:05Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T10:39:23Z",
      "updated_at": "2023-03-07T10:39:23Z",
      "source": {
        "issue": {
          "id": 1612221855,
          "node_id": "PR_kwDOABII585LaUXb",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27215",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27215/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27215/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27215/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27215",
          "number": 27215,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Turn `destdata` entries into  `CAddressBookData` fields",
          "body": "`destdata` is a generic strings map in `CAddressBookEntry`. It is opaque and thus hard to know what is actually being stored in a `CAddressBookEntry`. It is a map with fixed fields, but these are not documented nor are they immediately obvious when looking at the class definition. This PR changes those to be member variables inside of `CAddressBookEntry` to make it easier to understand what kind of data is being stored.",
          "user": {
            "login": "achow101",
            "id": 3782274,
            "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/achow101",
            "html_url": "https://github.com/achow101",
            "followers_url": "https://api.github.com/users/achow101/followers",
            "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
            "organizations_url": "https://api.github.com/users/achow101/orgs",
            "repos_url": "https://api.github.com/users/achow101/repos",
            "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/achow101/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27215",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27215",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27215.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27215.patch"
          },
          "closed_at": "2023-03-15T16:58:37Z",
          "created_at": "2023-03-06T21:19:53Z",
          "updated_at": "2024-03-14T12:38:28Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T12:36:30Z",
      "updated_at": "2023-03-07T12:36:30Z",
      "source": {
        "issue": {
          "id": 1525922049,
          "node_id": "PR_kwDOABII585G_oZW",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26858",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26858/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26858/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26858/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26858",
          "number": 26858,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Use defined purposes instead of inlining",
          "body": "Based on this comment https://github.com/bitcoin/bitcoin/pull/26761#discussion_r1062447532.\r\n\r\nThis PR stores the currently inlined address purposes as constants and use them accordingly.",
          "user": {
            "login": "aureleoules",
            "id": 22493292,
            "node_id": "MDQ6VXNlcjIyNDkzMjky",
            "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/aureleoules",
            "html_url": "https://github.com/aureleoules",
            "followers_url": "https://api.github.com/users/aureleoules/followers",
            "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
            "organizations_url": "https://api.github.com/users/aureleoules/orgs",
            "repos_url": "https://api.github.com/users/aureleoules/repos",
            "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/aureleoules/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": true,
          "comments": 5,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26858",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26858",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26858.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26858.patch"
          },
          "closed_at": "2023-03-26T00:12:06Z",
          "created_at": "2023-01-09T16:30:06Z",
          "updated_at": "2024-03-25T12:39:59Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T12:40:14Z",
      "updated_at": "2023-03-07T12:40:14Z",
      "source": {
        "issue": {
          "id": 1523382830,
          "node_id": "PR_kwDOABII585G3Hol",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26840",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26840/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26840/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26840/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26840",
          "number": 26840,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: importpubkey, importprivkey, importaddress, importmulti, and importdescriptors rpc",
          "body": "This is a wallet rpc refactor from my gui pr https://github.com/bitcoin-core/gui/pull/650\r\n\r\nI was told by a contributor I should make a pr here for anything not in src/qt except for makefile/.ui stuff\r\n\r\nSo this pr refactors the RPC code so that it can be used through interfaces so there isn't a ton of code duplication more details would be in my bitcoin-core/gui pr.\r\n\r\nFor context this is apart of my Summer of Bitcoin project achow101 was my mentor.\r\n",
          "user": {
            "login": "KolbyML",
            "id": 31669092,
            "node_id": "MDQ6VXNlcjMxNjY5MDky",
            "avatar_url": "https://avatars.githubusercontent.com/u/31669092?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/KolbyML",
            "html_url": "https://github.com/KolbyML",
            "followers_url": "https://api.github.com/users/KolbyML/followers",
            "following_url": "https://api.github.com/users/KolbyML/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/KolbyML/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/KolbyML/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/KolbyML/subscriptions",
            "organizations_url": "https://api.github.com/users/KolbyML/orgs",
            "repos_url": "https://api.github.com/users/KolbyML/repos",
            "events_url": "https://api.github.com/users/KolbyML/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/KolbyML/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 4,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26840",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26840",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26840.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26840.patch"
          },
          "closed_at": "2024-03-20T00:37:56Z",
          "created_at": "2023-01-07T01:24:33Z",
          "updated_at": "2024-03-20T00:37:57Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T12:43:51Z",
      "updated_at": "2023-03-07T12:43:51Z",
      "source": {
        "issue": {
          "id": 1522557576,
          "node_id": "PR_kwDOABII585G0Yzm",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26836",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26836/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26836/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26836/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26836",
          "number": 26836,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: batch and simplify addressbook migration process",
          "body": "Commits decoupled from #28574, focused on the address book cloning process\r\n\r\nIncludes:\r\n\r\n1) DB batch operations and flow simplification for the address book migration process.\r\n2) Code improvements to `CWallet::DelAddressBook` and `Wallet::SetAddrBookWithDB` methods.\r\n\r\nThese changes will let us consolidate all individual write operations that take place during the wallet migration process into a single db txn in the future.",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 14,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26836",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26836",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26836.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26836.patch"
          },
          "closed_at": "2024-02-08T14:35:56Z",
          "created_at": "2023-01-06T13:05:27Z",
          "updated_at": "2024-02-08T15:30:12Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T13:11:57Z",
      "updated_at": "2023-03-07T13:11:57Z",
      "source": {
        "issue": {
          "id": 1496702678,
          "node_id": "PR_kwDOABII585FdB03",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26699",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26699/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26699/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26699/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/26699",
          "number": 26699,
          "state": "closed",
          "state_reason": null,
          "title": "wallet, gui: bugfix, getAvailableBalance skips selected coins",
          "body": "Fixes https://github.com/bitcoin-core/gui/issues/688 and https://github.com/bitcoin/bitcoin/issues/26687.\r\n\r\nFirst Issue Description (https://github.com/bitcoin-core/gui/issues/688):\r\n\r\nThe previous behavior for `getAvailableBalance`, when the coin control had selected coins, was to return the sum of them. Instead, we are currently returning the wallet's available total balance minus the selected coins total amount.\r\n\r\nReason:\r\nMissed to update the `GetAvailableBalance` function to include the coin control selected coins on #25685.\r\n\r\nContext:\r\nSince #25685 we skip the selected coins inside `AvailableCoins`, the reason is that there is no need to waste resources walking through the entire wallet's txes map just to get coins that could have gotten by just doing a simple `mapWallet.find`).\r\n\r\nPlaces Where This Generates Issues (only when the user manually select coins via coin control):\r\n1) The GUI balance check prior the transaction creation process.\r\n2) The GUI \"useAvailableBalance\" functionality.\r\n\r\nNote 1:\r\nAs the GUI uses a balance cache since https://github.com/bitcoin-core/gui/pull/598, this issue does not affect the regular spending process. Only arises when the user manually select coins.\r\n\r\nNote 2:\r\nAdded test coverage for the `useAvailableBalance` functionality.\r\n\r\n----------------------------------\r\n\r\nSecond Issue Description (https://github.com/bitcoin/bitcoin/issues/26687):\r\n\r\nAs we are using a cached balance on `WalletModel::getAvailableBalance`,\r\nthe function needs to include the watch-only available balance for wallets\r\nwith private keys disabled.\r\n",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/56",
            "html_url": "https://github.com/bitcoin/bitcoin/milestone/56",
            "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/56/labels",
            "id": 7733968,
            "node_id": "MI_kwDOABII584AdgLQ",
            "number": 56,
            "state": "closed",
            "title": "25.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 38,
            "created_at": "2022-03-03T18:51:29Z",
            "updated_at": "2023-05-25T13:24:42Z",
            "closed_at": "2023-05-25T13:24:42Z"
          },
          "locked": false,
          "comments": 13,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26699",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/26699",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/26699.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/26699.patch"
          },
          "closed_at": "2023-04-11T18:06:25Z",
          "created_at": "2022-12-14T14:07:01Z",
          "updated_at": "2024-02-19T14:53:20Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8687551702,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIF0YTW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8687551702",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T15:56:52Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T16:02:23Z",
      "updated_at": "2023-03-07T16:02:23Z",
      "source": {
        "issue": {
          "id": 1306015823,
          "node_id": "PR_kwDOABII5847eEyL",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25620",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25620/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25620/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25620/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25620",
          "number": 25620,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Introduce AddressBookManager",
          "body": "Finishing the encapsulation work started in #25337. Please review https://github.com/bitcoin/bitcoin/pull/26836 first.\r\n\r\n#### Context\r\n\r\nWe are currently using the address book for different purposes and features in the wallet such us:\r\n\r\n1) Store and retrieve own receive addresses with a label.\r\n2) Store and retrieve external addresses with a label.\r\n3) Store and retrieve payment requests.\r\n4) Mark addresses/destinations as 'used' if they appear on the blockchain (part of the “avoid re-use” feature).\r\n5) Know whether an output is a change or not based on the encoded script.\r\n\r\nSome of these points aren’t well known by many because this code has been spread and obfuscated across the wallet’s sources. (and created in a Frankenstein style).\r\n\r\n#### PR Goals\r\n\r\nEncapsulate the address book functionalities into its own `AddressBookManager` class, so we are able to distinguish properly the address book responsibilities and capabilities.\r\n\r\nBe able to decouple the address book dependency on the wallet’s main mutex (up to a certain point, because we are still using the same db connection).\r\n\r\nClean up the wallet sources further.\r\n\r\nBe able to unit/fuzz test the address book manager implementation isolated from the wallet flows.\r\n\r\nAnd create a new class that can be easily upgraded/replaced, and even different implementations can be used in parallel in different local wallets, by just providing a different manager instance to the wallet in the constructor.\r\n\r\n#### Next steps\r\n\r\nAfter this PR, will be working on improve the ‘change output’ flow which, at least for now, is strictly connected to this process (goal will be to remove the strict dependency).\r\n\r\n#### Pending work (still under WIP, almost there)\r\n\r\n* [ ] Add manager class description.\r\n* [ ] Clean CAddressBookData.\r\n* [ ] Cover the class with unit tests.\r\n* [ ] Double-check commits order.\r\n* [ ] Add addrbook purposes enum.\r\n* [ ] Make cs_addrbook RecursiveMutex a Mutex?\r\n",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 12,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25620",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25620",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25620.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25620.patch"
          },
          "closed_at": "2023-09-20T17:33:59Z",
          "created_at": "2022-07-15T13:06:04Z",
          "updated_at": "2023-09-20T17:34:15Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T16:21:24Z",
      "updated_at": "2023-03-07T16:21:24Z",
      "source": {
        "issue": {
          "id": 1263730107,
          "node_id": "PR_kwDOABII5845REBZ",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25297",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25297/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25297/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25297/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25297",
          "number": 25297,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: group independent db writes on single batched db transaction",
          "body": "The block connection process, same as many other wallet processes, contains plenty individual db writes.\r\n\r\nThis PR batches all the db transaction that occurs along each wallet workflow. Dumping all the information to disk at once atomically at the end of the process.\r\n\r\nThen, for BDB, fixed places where we are flushing to db directly on individual writes. e.g we do it in the in the chain sync/scan process, when an output that belongs to the wallet is found if the address is not inside the address book. \r\n\r\nPlus, in several places across the wallet flows, we create new `WalletBatch` objects. Which, internally, mean: Increasing the db references number, try to open the db and, for SQLite, setup and bind the statements.\r\nThis PR avoids all this overhead by sharing the same db handler instance through each entire workflow.",
          "user": {
            "login": "furszy",
            "id": 5377650,
            "node_id": "MDQ6VXNlcjUzNzc2NTA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/furszy",
            "html_url": "https://github.com/furszy",
            "followers_url": "https://api.github.com/users/furszy/followers",
            "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
            "organizations_url": "https://api.github.com/users/furszy/orgs",
            "repos_url": "https://api.github.com/users/furszy/repos",
            "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/furszy/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25297",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25297",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25297.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25297.patch"
          },
          "closed_at": "2023-11-18T18:12:38Z",
          "created_at": "2022-06-07T18:55:49Z",
          "updated_at": "2023-11-18T18:12:39Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T16:40:20Z",
      "updated_at": "2023-03-07T16:40:20Z",
      "source": {
        "issue": {
          "id": 1207463736,
          "node_id": "PR_kwDOABII5842Yh4P",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24914",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24914/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24914/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/24914/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/24914",
          "number": 24914,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Load database records in a particular order",
          "body": "Currently when we load a wallet, we just iterate through all of the records in the database and add them completely statelessly. However we have some records which do rely on other records being loaded before they are. To deal with this, we use `CWalletScanState` to hold things temporarily until all of the records have been read and then we load the stateful things.\r\n\r\nHowever this can be slow, and with some future improvements, can cause some pretty drastic slowdowns to retain this pattern. So this PR changes the way we load records by choosing to load the records in a particular order. This lets us do things such as loading a descriptor record, then finding and loading that descriptor's cache and key records. In the future, this will also let us use `IsMine` when loading transactions as then `IsMine` will actually be working as we now always load keys and descriptors before transactions.\r\n\r\nIn order to get records of a specific type, this PR includes some refactors to how we do database cursors. Functionality is also added to retrieve a cursor that will give us records beginning with a specified prefix.\r\n\r\nLastly, one thing that iterating the entire database let us do was to find unknown records. However even if unknown records were found, we would not do anything with this information except output a number in a log line. With this PR, we would no longer be aware of any unknown records. This does not change functionality as we don't do anything with unknown records, and having unknown records is not an error. Now we would just not be aware that unknown records even exist.",
          "user": {
            "login": "achow101",
            "id": 3782274,
            "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/achow101",
            "html_url": "https://github.com/achow101",
            "followers_url": "https://api.github.com/users/achow101/followers",
            "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
            "organizations_url": "https://api.github.com/users/achow101/orgs",
            "repos_url": "https://api.github.com/users/achow101/repos",
            "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/achow101/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 23,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/24914",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/24914",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/24914.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/24914.patch"
          },
          "closed_at": "2023-06-27T23:03:39Z",
          "created_at": "2022-04-18T21:18:28Z",
          "updated_at": "2023-10-29T11:56:44Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T18:05:57Z",
      "updated_at": "2023-03-07T18:05:57Z",
      "source": {
        "issue": {
          "id": 652547610,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDQ1NTk1Mjk3",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19461",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19461/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19461/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19461/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19461",
          "number": 19461,
          "state": "open",
          "state_reason": null,
          "title": "multiprocess: Add bitcoin-gui -ipcconnect option",
          "body": "**This is a draft PR because it is based on #10102 + #19460.** The non-base commits are:\r\n\r\n- [`5f91aa3d8b47` multiprocess: Add bitcoin-gui -ipcconnect option](https://github.com/bitcoin/bitcoin/pull/19461/commits/5f91aa3d8b47cee97e625c3b5689a37dbd941eff)\r\n\r\n---\r\n\r\nBuilding on #10102, this adds an `-ipcconnect` option to `bitcoin-gui` that connects the GUI to an existing `bitcoin-node` process already running in the background instead of spawning a new `bitcoin-node` process. This allows the GUI to be started and stopped independently of the node. By default with this change, `bitcoin-gui` will check if a `<datadir>/sockets/node.sock` socket exists and try to connect to that. If that doesn't work, it will spawn a new node process and start up the same way it did before this PR.\r\n\r\nThe default `bitcoin-gui` connect option is `-ipcconnect=auto`, which tries to connect if possible as described above, and spawns a new `bitcoin-node` process if not possible. Other supported options are `-noipcconnect` to never connect to an existing node and always spawn a new one, `-ipcconnect` to require a connection and fail if it can't be established, and `-ipcconnect=unix:<socket>` to require a connection and use a custom socket path.\r\n\r\nWith this PR, basic functionality works and gui instances can connect and disconnect from a running node. But there are rough edges: If a gui process doesn't shut down cleanly, the node can see unhandled IpcExceptions, and if node command line options are passed to `bitcoin-gui` and `bitcoin-gui` connects to an exiting bitcoin-node process instead of spawning a new one, the node options will be silently ignored. \r\n\r\nThese changes require multiprocess support and this PR has no effect unless bitcoin is configured with `--enable-multiprocess` as described in [doc/multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/multiprocess.md)\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135946,
              "node_id": "MDU6TGFiZWwxMzU5NDY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
              "name": "GUI",
              "color": "02d7e1",
              "default": false
            },
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 11,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19461",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19461",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19461.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19461.patch"
          },
          "created_at": "2020-07-07T19:00:11Z",
          "updated_at": "2024-01-22T00:52:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T18:07:51Z",
      "updated_at": "2023-03-07T18:07:51Z",
      "source": {
        "issue": {
          "id": 652543635,
          "node_id": "MDExOlB1bGxSZXF1ZXN0NDQ1NTkyMDUz",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19460",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19460/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19460/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/19460/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/19460",
          "number": 19460,
          "state": "open",
          "state_reason": null,
          "title": "multiprocess: Add bitcoin-wallet -ipcconnect option",
          "body": "**This is a draft PR because it is based on #10102.** The non-base commits are:\r\n\r\n- [`bbefbd3c199b` multiprocess: Add -ipcconnect and -ipcbind options](https://github.com/bitcoin/bitcoin/pull/19460/commits/bbefbd3c199b189188d6427b4564b17477c6d50e)\r\n\r\n---\r\n\r\nBuilding on #10102, this adds an `-ipcconnect` option to `bitcoin-wallet` and an `-ipcbind` option to `bitcoin-node` (both enabled by default in multiprocess builds) so bitcoin node will listen on a `<datadir>/sockets/node.sock` unix socket, and `bitcoin-wallet` will connect to it.\r\n\r\nThe idea is that `bitcoin-wallet` can be extended in the future to have some online functionality. For example, there could be a `bitcoin-wallet sync` command that will update balances and sync latest transactions to an unloaded wallet, or a `bitcoin-wallet serve` subcommand that loads a wallet and serves RPC requests, or a `bitcoin-wallet shell` subcommand that allows running RPC methods interactively like the GUI console, or just general support for `bitcoin-wallet <rpc method> <rpc params>` invocations suggested https://github.com/bitcoin/bitcoin/pull/13926#issuecomment-455187379.\r\n\r\nThis PR is small and doesn't do much. The only visible change is that `bitcoin-wallet` now checks whether a node socket exists on startup and prints \"Connected to IPC address\" if it can connect it it.\r\n\r\nThe default `bitcoin-wallet` connect option is `-ipcconnect=auto`, which connects if possible as described above, and proceeds offline if not possible. Other supported options are `-noipcconnect` to disable ipc, `-ipcconnect` to require a connection and fail if it can't be established, and `-ipcconnect=unix:<socket>` to require a connection and use a custom socket path.\r\n\r\nThese changes require multiprocess support and this PR has no effect unless bitcoin is configured with `--enable-multiprocess` as described in [doc/multiprocess.md](https://github.com/bitcoin/bitcoin/blob/master/doc/multiprocess.md)\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 61889416,
              "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
              "name": "Build system",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 241832923,
              "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
              "name": "Utils/log/libs",
              "description": "",
              "color": "5319e7",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/19460",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/19460",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/19460.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/19460.patch"
          },
          "created_at": "2020-07-07T18:53:19Z",
          "updated_at": "2024-01-22T00:52:31Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-07T18:33:13Z",
      "updated_at": "2023-03-07T18:33:13Z",
      "source": {
        "issue": {
          "id": 217385623,
          "node_id": "MDExOlB1bGxSZXF1ZXN0MTEyODQ2NDMx",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/10102/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/10102",
          "number": 10102,
          "state": "open",
          "state_reason": null,
          "title": "Multiprocess bitcoin",
          "body": "**This is a draft PR because it is based on #28921 and #28929.** The non-base commits are:\r\n\r\n- [`ee4b9138c837` doc: multiprocess documentation improvements](https://github.com/bitcoin/bitcoin/pull/10102/commits/ee4b9138c837f6dc6b8f063b0df27573736d6578)\r\n- [`df27e301e603` Increase feature_block.py and feature_taproot.py timeouts](https://github.com/bitcoin/bitcoin/pull/10102/commits/df27e301e603d460cbd187056aeff20087cefe3e)\r\n- [`cbc5e366a216` Add util::Result workaround to be compatible with libmultiprocess](https://github.com/bitcoin/bitcoin/pull/10102/commits/cbc5e366a21660601bee8270b5f1d183c148d092)\r\n- [`3427e7e0a965` Add capnp serialization code for bitcoin types](https://github.com/bitcoin/bitcoin/pull/10102/commits/3427e7e0a96502b9c8c6a9d74e5f21a8d84de928)\r\n- [`b6516c454f70` Add capnp wrapper for Handler interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/b6516c454f70d8ef3091ee2ef0bdaede3b0f5893)\r\n- [`5cf30e5357fc` Add capnp wrapper for Chain interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/5cf30e5357fcc3d0ffb871b237e47b79fedd317a)\r\n- [`b5fd425e075a` Add capnp wrapper for Wallet interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/b5fd425e075a3b21bc5e5b4f25209d8abacbeb58)\r\n- [`329b34c85ac6` Add capnp wrapper for Node interface](https://github.com/bitcoin/bitcoin/pull/10102/commits/329b34c85ac6c3718a5a575a48615ed29cfee2fc)\r\n- [`dde2a2211038` Make bitcoin-gui spawn a bitcoin-node process](https://github.com/bitcoin/bitcoin/pull/10102/commits/dde2a221103894606c77017d3e865f1aec3bfb10)\r\n- [`f3349a24e5ac` Make bitcoin-node spawn a bitcoin-wallet process](https://github.com/bitcoin/bitcoin/pull/10102/commits/f3349a24e5ac59913fbcf4ebeb8eaf8df75c604f)\r\n- [`6ea638ca4f28` multiprocess: Add debug.log .wallet/.gui suffixes](https://github.com/bitcoin/bitcoin/pull/10102/commits/6ea638ca4f2834d30853d731c8ed0bc98421d3ce)\r\n- [`622acd03b043` doc: Multiprocess misc doc and comment updates](https://github.com/bitcoin/bitcoin/pull/10102/commits/622acd03b043b238e3fa544167d0d612f1a08715)\r\n- [`755ca62696a4` combine_logs: Handle multiprocess wallet log files](https://github.com/bitcoin/bitcoin/pull/10102/commits/755ca62696a4a15cde7046f36425319ae4ca50ea)\r\n- [`56ef459b5734` Update libmultiprocess library](https://github.com/bitcoin/bitcoin/pull/10102/commits/56ef459b573461087fbe4f39d9b0a7108936335f)\r\n\r\n---\r\n\r\nThis PR adds an `--enable-multiprocess` configure option which builds new `bitcoin-node`, `bitcoin-wallet`, and `bitcoin-gui` executables with relevant functionality isolated into different processes. See [doc/design/multiprocess.md](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/doc/design/multiprocess.md) for usage details and future plans.\r\n\r\nThe change is implemented by adding a new [`Init`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/init.h) interface that spawns new wallet and node subprocesses that can be controlled over a [socketpair](http://man7.org/linux/man-pages/man2/socketpair.2.html) by calling [`Node`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/node.h), [`Wallet`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/wallet.h), and [`ChainClient`](https://github.com/ryanofsky/bitcoin/blob/pr/ipc/src/interfaces/chain.h) methods. When running with split processes, you can see the IPC messages going back and forth in `-debug=1` output. Followup PR's #19460 and #19461 add `-ipcbind` and `-ipcconnect` options that allow more flexibility in how processes are connected.\r\n\r\nThe IPC protocol used is Cap'n Proto, but this could be swapped out for another protocol. Cap'n Proto types and libraries are only accessed in the [src/ipc/capnp/](https://github.com/ryanofsky/bitcoin/tree/pr/ipc/src/ipc/capnp) directory, and not in any public headers or other parts of bitcoin code.\r\n\r\nSlides from a presentation describing this change are available on [google drive](https://docs.google.com/presentation/d/1AeJ-7gD-dItUgs5yH-HoEzLvXaEWe_2ZiGUUxYIXcws/edit). Demo code used in the presentation was from an older version this PR (tag [ipc.21](https://github.com/ryanofsky/bitcoin/releases/tag/pr%2Fipc.21), [commits](https://github.com/ryanofsky/bitcoin/compare/master...pr/ipc.21)).\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135946,
              "node_id": "MDU6TGFiZWwxMzU5NDY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
              "name": "GUI",
              "color": "02d7e1",
              "default": false
            },
            {
              "id": 98279177,
              "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
              "name": "RPC/REST/ZMQ",
              "color": "0052cc",
              "default": false
            },
            {
              "id": 955867938,
              "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 84,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/10102",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/10102",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/10102.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/10102.patch"
          },
          "created_at": "2017-03-27T21:48:26Z",
          "updated_at": "2024-01-23T19:04:48Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-08T08:35:40Z",
      "updated_at": "2023-03-08T08:35:40Z",
      "source": {
        "issue": {
          "id": 1614263156,
          "node_id": "PR_kwDOABII585LhNqA",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27224",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27224/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27224/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27224/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27224",
          "number": 27224,
          "state": "closed",
          "state_reason": null,
          "title": "refactor: Remove CAddressBookData::destdata",
          "body": "This is cleanup that doesn't change external behavior. Benefits of the cleanup are:\r\n\r\n- Removes awkward `StringMap` intermediate representation for wallet address metadata.\r\n- Simplifies `CWallet`, deals with used address and received request serialization in `walletdb.cpp` instead of higher level wallet code\r\n- Adds test coverage and documentation\r\n\r\nThis PR doesn't change externally observable behavior. Internally, the only change in behavior is that `EraseDestData` deletes rows directly from the database because they are no longer stored in memory. This is more direct and efficient because it uses a single lookup and scan instead of multiple lookups.\r\n\r\nMotivation for this cleanup is making changes like #18550, #18192, #13756 easier to reason about and less likely to result in unintended behavior and bugs\r\n\r\n---\r\n\r\nThis PR is a rebased copy of #18608. For some reason that PR is locked and couldn't be reopened or commented on.\r\n\r\nThis PR is an alternative to #27215 with differences described in https://github.com/bitcoin/bitcoin/pull/27215#pullrequestreview-1329028143\r\n",
          "user": {
            "login": "ryanofsky",
            "id": 7133040,
            "node_id": "MDQ6VXNlcjcxMzMwNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/ryanofsky",
            "html_url": "https://github.com/ryanofsky",
            "followers_url": "https://api.github.com/users/ryanofsky/followers",
            "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
            "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
            "repos_url": "https://api.github.com/users/ryanofsky/repos",
            "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135961,
              "node_id": "MDU6TGFiZWwxMzU5NjE=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
              "name": "Refactoring",
              "color": "E6F6D6",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 6,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27224",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27224",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27224.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27224.patch"
          },
          "closed_at": "2023-05-01T12:17:51Z",
          "created_at": "2023-03-07T21:51:45Z",
          "updated_at": "2023-05-01T17:17:42Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1335473435,
      "node_id": "PRR_kwDOABII585PmbUb",
      "url": null,
      "actor": null,
      "commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "This is a nice change, and I started reviewing 44a2ae100b600bc9c9f4c956223fab3b1948ea8d, but it looks like there are a lot of functions taking `optional<AddressPurpose>` values that should more properly take `AddressPurpose` values for simplicity and better type checking. (Basically `NotifyAddressBookChanged` and all the functions it calls). I think this might stem from not having separate SetAddressBook and UpdateAddressBook functions, so I want to look into this before reviewing more of the PR. (Having separate functions could help because Set function could make purpose a required parameter, while the Update function could let it be it optional).",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1335473435",
      "submitted_at": "2023-03-10T20:03:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "commented",
      "id": 1467021441,
      "node_id": "IC_kwDOABII585XcPiB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1467021441",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-13T21:57:27Z",
      "updated_at": "2023-03-13T21:57:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "I made some changes to this in a branch that could be adopted https://github.com/ryanofsky/bitcoin/commits/review.27217.1-edit\r\n\r\n- Tries to split commits and add a lot of comments so this is easier to review\r\n- Make enum a public wallet type instead of putting it in interfaces/ so wallet/ code does not depend on interfaces/wallet code and `interfaces::Wallet::AddressPurpose` becomes just `wallet::AddressPurpose`\r\n- Replaced `std::optional<AddressPurpose>` with plain `AddressPurpose` in many places where purpose is known or can be derived from IsMine, to simplify code and avoid bugs.\r\n- Dropped `AddressPurpose::UNKNOWN` to avoid defining an enum value that doesn't have any corresponding value in the wallet database.\r\n- Added `AddressPurpse::REFUND` enum value to be able to load old wallets that may have refund addresses without errors or warnings.\r\n- Changed assert(0) failure when loading wallets with unrecognized purpose strings with a warning.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1467021441",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8758032457,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIKBPhJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8758032457",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-15T17:10:15Z"
    },
    {
      "event": "commented",
      "id": 1470427455,
      "node_id": "IC_kwDOABII585XpPE_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1470427455",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-15T17:10:23Z",
      "updated_at": "2023-03-15T17:10:23Z",
      "author_association": "MEMBER",
      "body": "> I made some changes to this in a branch that could be adopted https://github.com/ryanofsky/bitcoin/commits/review.27217.1-edit\r\n\r\nI've adopted these changes.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1470427455",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "reviewed",
      "id": 1342339656,
      "node_id": "PRR_kwDOABII585QAnpI",
      "url": null,
      "actor": null,
      "commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK db521d3e89b23046f73410a875bb9660178e3842. Thanks for adopting suggested changes. I left some new suggestions, but they are not important and can be ignored.\r\n\r\nI think this PR should be straightforward for others to review now, and nice because it should demystify the purpose field and wallet address book as a whole.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1342339656",
      "submitted_at": "2023-03-15T21:07:30Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8782429638,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAILeT3G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8782429638",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-17T21:10:34Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8782463183,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAILecDP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8782463183",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-17T21:17:42Z"
    },
    {
      "event": "reviewed",
      "id": 1348830142,
      "node_id": "PRR_kwDOABII585QZYO-",
      "url": null,
      "actor": null,
      "commit_id": "0d18142f595b43070bd07b608d43c9ed9b37cdcc",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 0d18142f595b43070bd07b608d43c9ed9b37cdcc. Suggested a few comment/whitespace tweaks, but this is also fine as-is.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1348830142",
      "submitted_at": "2023-03-20T15:47:08Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8797080340,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIMWMsU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8797080340",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-20T16:57:06Z"
    },
    {
      "event": "reviewed",
      "id": 1349139267,
      "node_id": "PRR_kwDOABII585QajtD",
      "url": null,
      "actor": null,
      "commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK a48010f1fd6d8a430b8234789ac3c91ec9d06972. Just comment and whitespace changes since last review",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1349139267",
      "submitted_at": "2023-03-20T18:03:31Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-21T04:09:19Z",
      "updated_at": "2023-03-21T04:09:19Z",
      "source": {
        "issue": {
          "id": 1632858009,
          "node_id": "PR_kwDOABII585MfYTP",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27286",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27286/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27286/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27286/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/27286",
          "number": 27286,
          "state": "open",
          "state_reason": null,
          "title": "wallet: Keep track of the wallet's own transaction outputs in memory",
          "body": "Currently, the wallet is not actually aware about its own transaction outputs. Instead, it will iterate all of the transactions stored in `mapWallet`, and then all of the outputs of those transactions, in order to figure out what belongs to it for the purposes of coin selection and balance calculation. For balance calculation, there is caching that results in it only iterating all of the transactions, but not all of the outputs. However when the cache is dirty, everything is iterated. This is especially problematic for wallets that have a lot of transactions, or transactions that have a lot of unrelated outputs (as may occur with coinjoins or batched payments).\r\n\r\nThis PR helps to resolve this issue by making the wallet track all of the outputs that belong to it in a new member `m_txos`. Note that this includes outputs that may have already been spent. Both balance calculation (`GetBalance`) and coin selection (`AvailableCoins`) are updated to iterate `m_txos`. This is generally faster since it ignores all of the unrelated outputs, and it is not slower as in the worst case of wallets containing only single output transactions, it's exactly the same number of outputs iterated.\r\n\r\n`m_txos` is memory only, and it is populated during wallet loading. When each transaction is loaded, all of its outputs are checked to see if it is `IsMine`, and if so, an entry added to `m_txos`. When new transactions are received, the same procedure is done.\r\n\r\nSince imports can change the `IsMine` status of a transaction (although they can only be \"promoted\" from watchonly to spendable), all of the import RPCs will be a bit slower as they re-iterate all transactions and all outputs to update `m_txos`.\r\n\r\nEach output in `m_txos` is stored in a new `WalletTXO` class. This class contains references to the parent `CWalletTx` and the `CTxOut` itself. It also caches the `IsMine` value of the txout. This should be safe as `IsMine` should not change unless there are imports. This allows us to have additional performance improvements in places that use these `WalletTXO`s as they can use the cached `IsMine` rather than repeatedly calling `IsMine` which can be expensive.\r\n\r\nThe existing `WalletBalance` benchmark demonstrates the performance improvement that this PR makes. The existing `WalletAvailableCoins` benchmark doesn't as all of the outputs used in that benchmark belong to the test wallet. I've updated that benchmark to have a bunch of unrelated outputs in each transaction so that the difference is demonstrated.\r\n\r\nThis is part of a larger project to have the wallet actually track and store a set of its UTXOs.\r\n\r\nBuilt on #24914 as it requires loading the txs last in order for `m_txos` to be built correctly.\r\n\r\n***\r\n\r\n## Benchmarks:\r\n\r\nMaster:\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|---------------:|--------:|----------:|:----------\r\n|       92,245,141.50 |               10.84 |    0.1% |  988,823,975.00 |  66,803,340.50 |    0.0% |      2.04 | `WalletAvailableCoins`\r\n|            5,709.90 |          175,134.50 |    0.5% |       80,968.24 |      25,539.15 |    0.1% |      0.01 | `WalletBalanceClean`\r\n|          139,396.17 |            7,173.80 |    0.6% |    1,383,390.50 |     430,276.86 |    0.0% |      0.01 | `WalletBalanceDirty`\r\n|            5,055.80 |          197,792.47 |    0.3% |       80,968.10 |      25,539.02 |    0.1% |      0.01 | `WalletBalanceMine`\r\n|                9.79 |      102,152,396.19 |    0.1% |          161.00 |          37.00 |    0.0% |      0.01 | `WalletBalanceWatch`\r\n|        1,552,736.00 |              644.02 |    1.5% |   20,316,315.80 |     618,545.80 |    0.6% |      0.08 | `WalletCreateTxUseOnlyPresetInputs`\r\n|      114,114,732.00 |                8.76 |    0.5% |1,291,047,717.60 | 320,244,602.00 |    0.0% |      6.30 | `WalletCreateTxUsePresetInputsAndCoinSelection`\r\n|      359,315,754.00 |                2.78 |    0.1% |4,339,447,818.00 | 136,619,757.00 |    0.7% |      1.80 | `WalletLoadingDescriptors`\r\n|       98,230,601.00 |               10.18 |    0.1% |  537,688,964.00 |  97,332,266.00 |    0.3% |      0.49 | `WalletLoadingLegacy`\r\n\r\nPR:\r\n\r\n|               ns/op |                op/s |    err% |          ins/op |         bra/op |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|---------------:|--------:|----------:|:----------\r\n|       75,319,868.50 |               13.28 |    0.2% |  863,758,229.00 |  30,892,593.00 |    0.2% |      1.66 | `WalletAvailableCoins`\r\n|            2,367.62 |          422,364.95 |    1.0% |       35,785.05 |       9,893.01 |    0.2% |      0.01 | `WalletBalanceClean`\r\n|            2,685.58 |          372,359.55 |    0.2% |       36,501.05 |      10,027.01 |    0.1% |      0.01 | `WalletBalanceDirty`\r\n|            3,462.24 |          288,830.68 |    2.7% |       35,785.06 |       9,893.01 |    0.3% |      0.01 | `WalletBalanceMine`\r\n|               11.65 |       85,838,176.97 |    0.1% |          180.00 |          42.00 |    0.0% |      0.01 | `WalletBalanceWatch`\r\n|        1,563,092.60 |              639.76 |    1.5% |   20,426,154.40 |     649,953.80 |    0.6% |      0.09 | `WalletCreateTxUseOnlyPresetInputs`\r\n|       58,367,804.40 |               17.13 |    0.9% |  587,164,005.00 | 107,905,843.80 |    0.1% |      3.21 | `WalletCreateTxUsePresetInputsAndCoinSelection`\r\n|      365,302,636.00 |                2.74 |    0.2% |4,349,345,147.00 | 138,730,668.00 |    0.8% |      1.83 | `WalletLoadingDescriptors`\r\n|      124,995,585.00 |                8.00 |    1.2% |  801,998,316.00 | 103,210,721.00 |    0.3% |      0.63 | `WalletLoadingLegacy`\r\n",
          "user": {
            "login": "achow101",
            "id": 3782274,
            "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
            "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/achow101",
            "html_url": "https://github.com/achow101",
            "followers_url": "https://api.github.com/users/achow101/followers",
            "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
            "organizations_url": "https://api.github.com/users/achow101/orgs",
            "repos_url": "https://api.github.com/users/achow101/repos",
            "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/achow101/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "MEMBER",
          "locked": false,
          "comments": 7,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27286",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/27286",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/27286.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/27286.patch"
          },
          "created_at": "2023-03-20T21:02:45Z",
          "updated_at": "2024-04-09T13:16:34Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-03-24T21:32:56Z",
      "updated_at": "2023-03-24T21:32:56Z",
      "source": {
        "issue": {
          "id": 1639876657,
          "node_id": "PR_kwDOEEET9c5M2-Ur",
          "url": "https://api.github.com/repos/bitcoin-core/gui/issues/723",
          "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
          "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/723/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/723/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/723/events",
          "html_url": "https://github.com/bitcoin-core/gui/pull/723",
          "number": 723,
          "state": "closed",
          "state_reason": null,
          "title": "Add warnings for non-active addresses in receive tab and address book",
          "body": "Closes https://github.com/bitcoin/bitcoin/issues/3314\r\nBuilt off of https://github.com/bitcoin/bitcoin/pull/27216 (== first two commits of this PR, required core updates)\r\n\r\nThis PR adds a \"warnings\" column in the receive coins dialog (recent requests table) and the address book receive page. Hovering over the ⚠️ if present shows a tooltip with a list of warnings.  We also add a \"warnings\" field in the receive request dialog (shown after double-clicking an address in the first table) with the same message.\r\n\r\nThe warnings shown can be anything implemented in new methods `GetWarnings()` but for now the only message we show there is:\r\n\r\n> This address should not be used. It was derived from an inactive seed, was imported, or may have been stored unencrypted.\r\n\r\nExample screenshots:\r\n\r\n# 1. Create new unencrypted wallet, get new receive address\r\n\r\n![1](https://user-images.githubusercontent.com/2084648/229900643-52c49c2c-589a-450c-b78d-1d3f5489bf63.png)\r\n\r\n# 2. Encrypt wallet\r\n\r\nNotice how the first address is immediately flagged.\r\n\r\n![2](https://user-images.githubusercontent.com/2084648/229900642-b3a02025-39fa-4679-913d-e8cd9984a5ab.png)\r\n\r\n# 3. Get new receive address after encrypting wallet\r\n\r\nNew address is not flagged, it is active and safe to use.\r\n\r\n![3](https://user-images.githubusercontent.com/2084648/229900641-4dd59d82-c9a9-4134-bb5a-155dc90811d2.png)\r\n\r\n\r\n\r\n\r\n\r\n",
          "user": {
            "login": "pinheadmz",
            "id": 2084648,
            "node_id": "MDQ6VXNlcjIwODQ2NDg=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/pinheadmz",
            "html_url": "https://github.com/pinheadmz",
            "followers_url": "https://api.github.com/users/pinheadmz/followers",
            "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
            "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
            "repos_url": "https://api.github.com/users/pinheadmz/repos",
            "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 2145506980,
              "node_id": "MDU6TGFiZWwyMTQ1NTA2OTgw",
              "url": "https://api.github.com/repos/bitcoin-core/gui/labels/Needs%20rebase",
              "name": "Needs rebase",
              "description": "",
              "color": "cccccc",
              "default": false
            },
            {
              "id": 2927906211,
              "node_id": "MDU6TGFiZWwyOTI3OTA2MjEx",
              "url": "https://api.github.com/repos/bitcoin-core/gui/labels/Wallet",
              "name": "Wallet",
              "description": "",
              "color": "08a781",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 10,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/gui/pulls/723",
            "html_url": "https://github.com/bitcoin-core/gui/pull/723",
            "diff_url": "https://github.com/bitcoin-core/gui/pull/723.diff",
            "patch_url": "https://github.com/bitcoin-core/gui/pull/723.patch"
          },
          "closed_at": "2023-10-12T14:51:01Z",
          "created_at": "2023-03-24T18:47:32Z",
          "updated_at": "2023-10-12T14:51:01Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "reviewed",
      "id": 1357917977,
      "node_id": "PRR_kwDOABII585Q8C8Z",
      "url": null,
      "actor": null,
      "commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK a48010f1fd6d8a430b8234789ac3c91ec9d06972, looks good to me.",
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1357917977",
      "submitted_at": "2023-03-26T00:11:47Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "reviewed",
      "id": 1359373444,
      "node_id": "PRR_kwDOABII585RBmSE",
      "url": null,
      "actor": null,
      "commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK https://github.com/bitcoin/bitcoin/pull/27217/commits/a48010f1fd6d8a430b8234789ac3c91ec9d06972\r\n\r\nAbsolutely love this. Death to strings. \r\n\r\nLooks good from a code review standpoint, also did some light testing with the GUI and RPC calls, planning on doing more.",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1359373444",
      "submitted_at": "2023-03-27T15:54:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "reviewed",
      "id": 1376251729,
      "node_id": "PRR_kwDOABII585SB-9R",
      "url": null,
      "actor": null,
      "commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "~This PR has 3 acks so maybe it is ready to be merged.~ I think this PR basically looks good as is but it would be a little better if it avoided changing behavior for refund addresses in translateTransactionType (see comment below)",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1376251729",
      "submitted_at": "2023-04-07T15:16:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8964325962,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIWUMJK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8964325962",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-10T14:40:22Z"
    },
    {
      "event": "reviewed",
      "id": 1377763599,
      "node_id": "PRR_kwDOABII585SHwEP",
      "url": null,
      "actor": null,
      "commit_id": "98821a7aca88ac9401786e848899866b71446460",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 98821a7aca88ac9401786e848899866b71446460. Just suggested changes since last review, the main one being changing `translateTransactionType` to use a switch statement.\r\n\r\nThis had 3 reviews before, so it would be nice to have reacks and hopefully merge this soon.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1377763599",
      "submitted_at": "2023-04-10T16:05:47Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "review_requested",
      "id": 8965001168,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIWWw_Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8965001168",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-10T16:05:52Z",
      "requested_reviewer": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 8965001210,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIWWw_6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8965001210",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-10T16:05:52Z",
      "requested_reviewer": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "reviewed",
      "id": 1377895422,
      "node_id": "PRR_kwDOABII585SIQP-",
      "url": null,
      "actor": null,
      "commit_id": "98821a7aca88ac9401786e848899866b71446460",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 98821a7aca88ac9401786e848899866b71446460",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1377895422",
      "submitted_at": "2023-04-10T18:28:39Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8968269769,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIWjO_J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8968269769",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T00:44:12Z"
    },
    {
      "event": "commented",
      "id": 1502967998,
      "node_id": "IC_kwDOABII585ZlXi-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1502967998",
      "actor": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:14:53Z",
      "updated_at": "2023-04-11T09:14:53Z",
      "author_association": "MEMBER",
      "body": "ACK https://github.com/bitcoin/bitcoin/pull/27217/commits/635c50a57b3f72f83f1ee681f6a4b7766b8988f6",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1502967998",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "review_request_removed",
      "id": 8971224227,
      "node_id": "RRRE_lADOABII585gGfvjzwAAAAIWugSj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8971224227",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:14:59Z",
      "requested_reviewer": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 8971224425,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIWugVp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8971224425",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:15:00Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "review_requested",
      "id": 8971224453,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIWugWF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8971224453",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T09:15:00Z",
      "requested_reviewer": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "labeled",
      "id": 8977157724,
      "node_id": "LE_lADOABII585gGfvjzwAAAAIXFI5c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8977157724",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T18:51:02Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1503974799,
      "node_id": "IC_kwDOABII585ZpNWP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1503974799",
      "actor": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T19:23:57Z",
      "updated_at": "2023-04-11T19:23:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "reACK https://github.com/bitcoin/bitcoin/commit/635c50a57b3f72f83f1ee681f6a4b7766b8988f6\r\n\r\nbut appears to need rebase",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1503974799",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "review_request_removed",
      "id": 8977412240,
      "node_id": "RRRE_lADOABII585gGfvjzwAAAAIXGHCQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8977412240",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T19:24:02Z",
      "requested_reviewer": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg3NDE1MjJlNmM3NWEwYWQwYzk2ZjQ0ZTU2NjhiZWZjMTYyNGZiMGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8741522e6c75a0ad0c96f44e5668befc1624fb0b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8741522e6c75a0ad0c96f44e5668befc1624fb0b",
      "tree": {
        "sha": "7a48af86e753e88f2222883c1e38c6ab06c02883",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7a48af86e753e88f2222883c1e38c6ab06c02883"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/27dcc07c08a77eba53ccc91e5521ff674f1bd198",
          "sha": "27dcc07c08a77eba53ccc91e5521ff674f1bd198",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/27dcc07c08a77eba53ccc91e5521ff674f1bd198"
        }
      ],
      "message": "wallet: Add wallet/types.h for simple public enum and struct types\n\nMove isminetype and isminefilter there this commit, add WalletPurpose type next\ncommit.",
      "committer": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-04-11T19:52:25Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2023-03-13T15:53:33Z"
      },
      "sha": "8741522e6c75a0ad0c96f44e5668befc1624fb0b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJmODAwMDUxMzY3NTQ2N2U2MmJlZTlkMGY4MzZkMmZlZmNjNDc5YWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f8000513675467e62bee9d0f836d2fefcc479af",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2f8000513675467e62bee9d0f836d2fefcc479af",
      "tree": {
        "sha": "1f22faf5b539285bdfc708db70752308fa2a6561",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1f22faf5b539285bdfc708db70752308fa2a6561"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8741522e6c75a0ad0c96f44e5668befc1624fb0b",
          "sha": "8741522e6c75a0ad0c96f44e5668befc1624fb0b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8741522e6c75a0ad0c96f44e5668befc1624fb0b"
        }
      ],
      "message": "wallet: add AddressPurpose enum to replace string values",
      "committer": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-04-11T19:52:25Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2023-03-13T19:35:04Z"
      },
      "sha": "2f8000513675467e62bee9d0f836d2fefcc479af"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU4M2JhYmUzYjg1YjIyZTIzNjBhOTlmOTgyN2IyYjBkMTA3YWQwZmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "tree": {
        "sha": "67baf57399f7b1c386c64317164a0360976d1451",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/67baf57399f7b1c386c64317164a0360976d1451"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f8000513675467e62bee9d0f836d2fefcc479af",
          "sha": "2f8000513675467e62bee9d0f836d2fefcc479af",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2f8000513675467e62bee9d0f836d2fefcc479af"
        }
      ],
      "message": "wallet: Replace use of purpose strings with an enum\n\nInstead of storing and passing around fixed strings for the purpose of\nan address, use an enum.\n\nThis also rationalizes the CAddressBookData struct, documenting all fields and\nmaking them public, and simplifying the representation to avoid bugs like\nhttps://github.com/bitcoin/bitcoin/pull/26761#discussion_r1134615114 and make\nit not possible to invalid address data like change addresses with labels.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-04-11T19:55:31Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-02-20T22:45:32Z"
      },
      "sha": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE4ZmM3MWEzYWRlZTVkZTBmNzRiYTZmZjE4ZjVlZDMxYmE3OWE2NDY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "tree": {
        "sha": "7a82ac65013947eaa7a5c432b921b7eeca380b40",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7a82ac65013947eaa7a5c432b921b7eeca380b40"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
          "sha": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e83babe3b85b22e2360a99f9827b2b0d107ad0fa"
        }
      ],
      "message": "doc: Release note for purpose string restriction",
      "committer": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-04-11T19:55:32Z"
      },
      "author": {
        "name": "Andrew Chow",
        "email": "github@achow101.com",
        "date": "2023-03-17T21:10:18Z"
      },
      "sha": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8977698248,
      "node_id": "HRFPE_lADOABII585gGfvjzwAAAAIXHM3I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8977698248",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T20:01:36Z"
    },
    {
      "event": "unlabeled",
      "id": 8978108261,
      "node_id": "UNLE_lADOABII585gGfvjzwAAAAIXIw9l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8978108261",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-11T20:56:03Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1504894418,
      "node_id": "IC_kwDOABII585Zst3S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1504894418",
      "actor": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-12T08:45:17Z",
      "updated_at": "2023-04-12T08:45:17Z",
      "author_association": "MEMBER",
      "body": "reACK https://github.com/bitcoin/bitcoin/commit/18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#issuecomment-1504894418",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/27217"
    },
    {
      "event": "review_requested",
      "id": 8982978332,
      "node_id": "RRE_lADOABII585gGfvjzwAAAAIXbV8c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8982978332",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-12T08:45:23Z",
      "requested_reviewer": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false
      }
    },
    {
      "event": "merged",
      "id": 8983442832,
      "node_id": "ME_lADOABII585gGfvjzwAAAAIXdHWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8983442832",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "cae0608ad4b195652e0cfcc905e19b50197d43ab",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/cae0608ad4b195652e0cfcc905e19b50197d43ab",
      "created_at": "2023-04-12T09:31:28Z"
    },
    {
      "event": "closed",
      "id": 8983442858,
      "node_id": "CE_lADOABII585gGfvjzwAAAAIXdHWq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8983442858",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-12T09:31:28Z"
    },
    {
      "event": "referenced",
      "id": 8990745115,
      "node_id": "REFE_lADOABII585gGfvjzwAAAAIX4-Ib",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8990745115",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "130e81ac1022224267241db8d1c2b53f0d0bc90c",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/130e81ac1022224267241db8d1c2b53f0d0bc90c",
      "created_at": "2023-04-12T23:06:42Z"
    },
    {
      "event": "reviewed",
      "id": 1382653264,
      "node_id": "PRR_kwDOABII585SaZ1Q",
      "url": null,
      "actor": null,
      "commit_id": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "denavila",
        "id": 123340139,
        "node_id": "U_kgDOB1oFaw",
        "avatar_url": "https://avatars.githubusercontent.com/u/123340139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/denavila",
        "html_url": "https://github.com/denavila",
        "followers_url": "https://api.github.com/users/denavila/followers",
        "following_url": "https://api.github.com/users/denavila/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/denavila/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/denavila/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/denavila/subscriptions",
        "organizations_url": "https://api.github.com/users/denavila/orgs",
        "repos_url": "https://api.github.com/users/denavila/repos",
        "events_url": "https://api.github.com/users/denavila/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/denavila/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#pullrequestreview-1382653264",
      "submitted_at": "2023-04-13T05:29:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T09:17:11Z",
      "updated_at": "2023-04-13T09:17:11Z",
      "source": {
        "issue": {
          "id": 1666041091,
          "node_id": "I_kwDOEEET9c5jTcUD",
          "url": "https://api.github.com/repos/bitcoin-core/gui/issues/725",
          "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
          "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/725/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/725/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/725/events",
          "html_url": "https://github.com/bitcoin-core/gui/issues/725",
          "number": 725,
          "state": "closed",
          "state_reason": "completed",
          "title": "Crash using getnewaddress in the console",
          "body": "Calling `getnewaddress` in the GUI console currently crashes bitcoin-qt. Reported here: https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1165016111.\r\n\r\n```bash\r\n* thread #35, name = 'b-qt-rpcconsole', stop reason = hit program assert\r\n    frame #4: 0x00000001000e9150 bitcoin-qt`NotifyAddressBookChanged(walletmodel=0x0000600003d270c0, address=<unavailable>, label=<unavailable>, isMine=<unavailable>, purpose=<unavailable>, status=CT_NEW) at walletmodel.cpp:392:5 [opt]\r\n   389 \t                              Q_ARG(bool, isMine),\r\n   390 \t                              Q_ARG(wallet::AddressPurpose, purpose),\r\n   391 \t                              Q_ARG(int, status));\r\n-> 392 \t    assert(invoked);\r\n   393 \t}\r\n   394 \t\r\n   395 \tstatic void NotifyTransactionChanged(WalletModel *walletmodel, const uint256 &hash, ChangeType status)\r\nTarget 0: (bitcoin-qt) stopped.\r\n```",
          "user": {
            "login": "fanquake",
            "id": 863730,
            "node_id": "MDQ6VXNlcjg2MzczMA==",
            "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/fanquake",
            "html_url": "https://github.com/fanquake",
            "followers_url": "https://api.github.com/users/fanquake/followers",
            "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
            "organizations_url": "https://api.github.com/users/fanquake/orgs",
            "repos_url": "https://api.github.com/users/fanquake/repos",
            "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/fanquake/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin-core/gui/milestones/9",
            "html_url": "https://github.com/bitcoin-core/gui/milestone/9",
            "labels_url": "https://api.github.com/repos/bitcoin-core/gui/milestones/9/labels",
            "id": 7846283,
            "node_id": "MI_kwDOEEET9c4Ad7mL",
            "number": 9,
            "state": "closed",
            "title": "25.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 3,
            "created_at": "2022-04-06T16:31:55Z",
            "updated_at": "2024-02-15T11:11:10Z",
            "closed_at": "2024-02-15T11:11:10Z"
          },
          "locked": false,
          "comments": 0,
          "closed_at": "2023-04-13T13:41:43Z",
          "created_at": "2023-04-13T09:17:10Z",
          "updated_at": "2023-04-14T20:42:05Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-04-13T11:04:36Z",
      "updated_at": "2023-04-13T11:04:36Z",
      "source": {
        "issue": {
          "id": 1666201759,
          "node_id": "PR_kwDOEEET9c5OOGPC",
          "url": "https://api.github.com/repos/bitcoin-core/gui/issues/726",
          "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
          "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/726/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/726/comments",
          "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/726/events",
          "html_url": "https://github.com/bitcoin-core/gui/pull/726",
          "number": 726,
          "state": "closed",
          "state_reason": null,
          "title": "Register `wallet::AddressPurpose` type",
          "body": "This PR is a follow up of bitcoin/bitcoin#27217.\r\n\r\nFixes #725.",
          "user": {
            "login": "hebasto",
            "id": 32963518,
            "node_id": "MDQ6VXNlcjMyOTYzNTE4",
            "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/hebasto",
            "html_url": "https://github.com/hebasto",
            "followers_url": "https://api.github.com/users/hebasto/followers",
            "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
            "organizations_url": "https://api.github.com/users/hebasto/orgs",
            "repos_url": "https://api.github.com/users/hebasto/repos",
            "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/hebasto/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [],
          "assignees": [],
          "author_association": "MEMBER",
          "milestone": {
            "url": "https://api.github.com/repos/bitcoin-core/gui/milestones/9",
            "html_url": "https://github.com/bitcoin-core/gui/milestone/9",
            "labels_url": "https://api.github.com/repos/bitcoin-core/gui/milestones/9/labels",
            "id": 7846283,
            "node_id": "MI_kwDOEEET9c4Ad7mL",
            "number": 9,
            "state": "closed",
            "title": "25.0",
            "description": "",
            "creator": {
              "login": "laanwj",
              "id": 126646,
              "node_id": "MDQ6VXNlcjEyNjY0Ng==",
              "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
              "gravatar_id": "",
              "url": "https://api.github.com/users/laanwj",
              "html_url": "https://github.com/laanwj",
              "followers_url": "https://api.github.com/users/laanwj/followers",
              "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
              "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
              "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
              "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
              "organizations_url": "https://api.github.com/users/laanwj/orgs",
              "repos_url": "https://api.github.com/users/laanwj/repos",
              "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
              "received_events_url": "https://api.github.com/users/laanwj/received_events",
              "type": "User",
              "site_admin": false
            },
            "open_issues": 0,
            "closed_issues": 3,
            "created_at": "2022-04-06T16:31:55Z",
            "updated_at": "2024-02-15T11:11:10Z",
            "closed_at": "2024-02-15T11:11:10Z"
          },
          "locked": true,
          "comments": 2,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin-core/gui/pulls/726",
            "html_url": "https://github.com/bitcoin-core/gui/pull/726",
            "diff_url": "https://github.com/bitcoin-core/gui/pull/726.diff",
            "patch_url": "https://github.com/bitcoin-core/gui/pull/726.patch"
          },
          "closed_at": "2023-04-13T13:41:44Z",
          "created_at": "2023-04-13T11:04:36Z",
          "updated_at": "2023-04-20T09:11:59Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "referenced",
      "id": 8997100907,
      "node_id": "REFE_lADOABII585gGfvjzwAAAAIYRN1r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8997100907",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "19764dc143281376ea08e954018479ed10405b72",
      "commit_url": "https://api.github.com/repos/bitcoin-core/gui/commits/19764dc143281376ea08e954018479ed10405b72",
      "created_at": "2023-04-13T13:41:44Z"
    },
    {
      "event": "referenced",
      "id": 8997522250,
      "node_id": "REFE_lADOABII585gGfvjzwAAAAIYS0tK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8997522250",
      "actor": {
        "login": "sidhujag",
        "id": 6238042,
        "node_id": "MDQ6VXNlcjYyMzgwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6238042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sidhujag",
        "html_url": "https://github.com/sidhujag",
        "followers_url": "https://api.github.com/users/sidhujag/followers",
        "following_url": "https://api.github.com/users/sidhujag/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sidhujag/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sidhujag/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sidhujag/subscriptions",
        "organizations_url": "https://api.github.com/users/sidhujag/orgs",
        "repos_url": "https://api.github.com/users/sidhujag/repos",
        "events_url": "https://api.github.com/users/sidhujag/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sidhujag/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": "58b94f3a10d4ba361335d56d094ee16fccaeedc9",
      "commit_url": "https://api.github.com/repos/syscoin/syscoin/commits/58b94f3a10d4ba361335d56d094ee16fccaeedc9",
      "created_at": "2023-04-13T14:14:57Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-20T13:44:58Z",
      "updated_at": "2023-07-20T13:44:58Z",
      "source": {
        "issue": {
          "id": 1359015170,
          "node_id": "PR_kwDOABII584-OGE6",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25973",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25973/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25973/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/25973/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/25973",
          "number": 25973,
          "state": "closed",
          "state_reason": null,
          "title": "wallet: Filter-out \"send\" addresses from `listreceivedby*`",
          "body": "`listreceivedbyaddress` & `listreceivedbylabel` RPCs list balances by receiving address and label respectively. That works by creating a tally (`mapTally[address]`) from all the transaction outputs in the wallet and then cross-reference that with the address book in order to calculate which addresses received funds.\r\n\r\nIf an address is in the address book but not in the tally, it's considered empty (never received funds) and is not returned unless `include_empty=true`. That effectively means that when `include_empty=true` the entire address book is included in the result.\r\n\r\n**This creates 2 issues:**\r\n\r\n1. As reported in https://github.com/bitcoin/bitcoin/issues/16159, the address book also includes addresses with a \"send\" purpose which should not be part of the response.\r\n2. As reported in https://github.com/bitcoin/bitcoin/issues/10468, if `include_watchonly=false` [the watchonly addresses are not included in `mapTally`](https://github.com/bitcoin/bitcoin/blob/fa5c224d444802dabec5841009e029b9754c92f1/src/wallet/rpc/transactions.cpp#L120-L122 ) leading to them being considered empty during the subsequent cross-reference with the address book thus becoming part of the result when `include_empty=true`.\r\n\r\nThis PR fixes https://github.com/bitcoin/bitcoin/issues/16159 by filtering-out \"send\" addresses, see https://github.com/bitcoin/bitcoin/issues/16159#issuecomment-1234405923 for more details on the issue. I haven't thought of a nice solution to fix (2) yet.\r\n\r\n**Edit**: Split `wallet_listreceivedby.py` tests for code maintainability as tests for more than one RPC have been added since the creation of the file. Added test coverage for the introduced change.",
          "user": {
            "login": "kouloumos",
            "id": 18506343,
            "node_id": "MDQ6VXNlcjE4NTA2MzQz",
            "avatar_url": "https://avatars.githubusercontent.com/u/18506343?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/kouloumos",
            "html_url": "https://github.com/kouloumos",
            "followers_url": "https://api.github.com/users/kouloumos/followers",
            "following_url": "https://api.github.com/users/kouloumos/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/kouloumos/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/kouloumos/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/kouloumos/subscriptions",
            "organizations_url": "https://api.github.com/users/kouloumos/orgs",
            "repos_url": "https://api.github.com/users/kouloumos/repos",
            "events_url": "https://api.github.com/users/kouloumos/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/kouloumos/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 149424,
              "node_id": "MDU6TGFiZWwxNDk0MjQ=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
              "name": "Wallet",
              "color": "08a781",
              "default": false
            },
            {
              "id": 749416508,
              "node_id": "MDU6TGFiZWw3NDk0MTY1MDg=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Up%20for%20grabs",
              "name": "Up for grabs",
              "color": "99a810",
              "default": false
            },
            {
              "id": 1394163608,
              "node_id": "MDU6TGFiZWwxMzk0MTYzNjA4",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Waiting%20for%20author",
              "name": "Waiting for author",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 8,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/25973",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/25973",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/25973.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/25973.patch"
          },
          "closed_at": "2023-09-20T15:59:01Z",
          "created_at": "2022-09-01T15:15:02Z",
          "updated_at": "2023-09-20T15:59:11Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "locked",
      "id": 12449065893,
      "node_id": "LOE_lADOABII585gGfvjzwAAAALmBaul",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12449065893",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-12T12:42:26Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127561494",
      "pull_request_review_id": 1327941131,
      "id": 1127561494,
      "node_id": "PRRC_kwDOABII585DNTkW",
      "diff_hunk": "@@ -71,6 +71,10 @@ def run_test(self):\n         node = self.nodes[0]\n         assert_equal(len(node.listunspent()), 0)\n \n+        self.log.info(\"Checking listlabels' invalid parameters\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"notavalidpurpose\");\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"unknown\");",
      "path": "test/functional/wallet_labels.py",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "nit:\r\n\r\n```\r\ntest/functional/wallet_labels.py:76:132: E703 statement ends with a semicolon",
      "created_at": "2023-03-07T09:11:40Z",
      "updated_at": "2023-03-07T09:15:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1127561494",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127561494"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127564320",
      "pull_request_review_id": 1327941131,
      "id": 1127564320,
      "node_id": "PRRC_kwDOABII585DNUQg",
      "diff_hunk": "@@ -206,10 +207,48 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};\n+\n+public:\n+    CAddressBookData() {}\n+\n+    static std::string PurposeToString(interfaces::Wallet::AddressPurpose p)\n+    {\n+        switch(p) {\n+        case interfaces::Wallet::AddressPurpose::UNKNOWN:\n+            return \"unknown\";\n+        case interfaces::Wallet::AddressPurpose::RECEIVE:\n+            return \"receive\";\n+        case interfaces::Wallet::AddressPurpose::SEND:\n+            return \"send\";\n+        // no default case so the compiler will warn when a new enum as added\n+        }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 30,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n        } // no default case so the compiler will warn when a new enum is added\r\n        \r\n```\r\n\r\nnit: typo",
      "created_at": "2023-03-07T09:14:07Z",
      "updated_at": "2023-03-07T09:15:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1127564320",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127564320"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 226,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 227,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127566183",
      "pull_request_review_id": 1327941131,
      "id": 1127566183,
      "node_id": "PRRC_kwDOABII585DNUtn",
      "diff_hunk": "@@ -206,10 +207,48 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};\n+\n+public:\n+    CAddressBookData() {}\n+\n+    static std::string PurposeToString(interfaces::Wallet::AddressPurpose p)\n+    {\n+        switch(p) {\n+        case interfaces::Wallet::AddressPurpose::UNKNOWN:\n+            return \"unknown\";\n+        case interfaces::Wallet::AddressPurpose::RECEIVE:\n+            return \"receive\";\n+        case interfaces::Wallet::AddressPurpose::SEND:\n+            return \"send\";\n+        // no default case so the compiler will warn when a new enum as added\n+        }\n+        assert(false);\n+    }\n+    static interfaces::Wallet::AddressPurpose PurposeFromString(const std::string& s)\n+    {\n+        if (s == \"unknown\") {\n+            return interfaces::Wallet::AddressPurpose::UNKNOWN;\n+        } else if (s == \"receive\") {\n+            return interfaces::Wallet::AddressPurpose::RECEIVE;\n+        } else if (s == \"send\") {\n+            return interfaces::Wallet::AddressPurpose::SEND;\n+        } else {\n+            // Any other string is a programming error",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 42,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "```suggestion\r\n            // Any other string is a programming error or disk corruption\r\n```\r\n\r\nnit: This could also happen on disk corruption, no?",
      "created_at": "2023-03-07T09:15:42Z",
      "updated_at": "2023-03-07T09:15:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1127566183",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1127566183"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128102630",
      "pull_request_review_id": 1328900697,
      "id": 1128102630,
      "node_id": "PRRC_kwDOABII585DPXrm",
      "diff_hunk": "@@ -71,6 +71,10 @@ def run_test(self):\n         node = self.nodes[0]\n         assert_equal(len(node.listunspent()), 0)\n \n+        self.log.info(\"Checking listlabels' invalid parameters\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"notavalidpurpose\");\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"unknown\");",
      "path": "test/functional/wallet_labels.py",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": 1127561494,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2023-03-07T15:56:50Z",
      "updated_at": "2023-03-07T15:56:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1128102630",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128102630"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128102852",
      "pull_request_review_id": 1328901063,
      "id": 1128102852,
      "node_id": "PRRC_kwDOABII585DPXvE",
      "diff_hunk": "@@ -206,10 +207,48 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};\n+\n+public:\n+    CAddressBookData() {}\n+\n+    static std::string PurposeToString(interfaces::Wallet::AddressPurpose p)\n+    {\n+        switch(p) {\n+        case interfaces::Wallet::AddressPurpose::UNKNOWN:\n+            return \"unknown\";\n+        case interfaces::Wallet::AddressPurpose::RECEIVE:\n+            return \"receive\";\n+        case interfaces::Wallet::AddressPurpose::SEND:\n+            return \"send\";\n+        // no default case so the compiler will warn when a new enum as added\n+        }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 30,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": 1127564320,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-07T15:56:57Z",
      "updated_at": "2023-03-07T15:56:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1128102852",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128102852"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 226,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 227,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128103018",
      "pull_request_review_id": 1328901385,
      "id": 1128103018,
      "node_id": "PRRC_kwDOABII585DPXxq",
      "diff_hunk": "@@ -206,10 +207,48 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};\n+\n+public:\n+    CAddressBookData() {}\n+\n+    static std::string PurposeToString(interfaces::Wallet::AddressPurpose p)\n+    {\n+        switch(p) {\n+        case interfaces::Wallet::AddressPurpose::UNKNOWN:\n+            return \"unknown\";\n+        case interfaces::Wallet::AddressPurpose::RECEIVE:\n+            return \"receive\";\n+        case interfaces::Wallet::AddressPurpose::SEND:\n+            return \"send\";\n+        // no default case so the compiler will warn when a new enum as added\n+        }\n+        assert(false);\n+    }\n+    static interfaces::Wallet::AddressPurpose PurposeFromString(const std::string& s)\n+    {\n+        if (s == \"unknown\") {\n+            return interfaces::Wallet::AddressPurpose::UNKNOWN;\n+        } else if (s == \"receive\") {\n+            return interfaces::Wallet::AddressPurpose::RECEIVE;\n+        } else if (s == \"send\") {\n+            return interfaces::Wallet::AddressPurpose::SEND;\n+        } else {\n+            // Any other string is a programming error",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 42,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "87f8f8be652f66e22bf4df5241222b4554c2c9d6",
      "in_reply_to_id": 1127566183,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-07T15:57:03Z",
      "updated_at": "2023-03-07T15:57:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1128103018",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1128103018"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132779833",
      "pull_request_review_id": 1335473435,
      "id": 1132779833,
      "node_id": "PRRC_kwDOABII585DhNk5",
      "diff_hunk": "@@ -57,6 +57,12 @@ using WalletValueMap = std::map<std::string, std::string>;\n class Wallet\n {\n public:\n+    enum class AddressPurpose : uint8_t {\n+        UNKNOWN = 0,",
      "path": "src/interfaces/wallet.h",
      "position": null,
      "original_position": 5,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nLet's get rid of this unknown enum value. It looks like it was never written to disk and was purely an in-memory value. There are only two `WalletBatch::WritePurpose` calls in the codebase and if you check their callers you can see they are always passing hardcoded \"send\" and \"receive\" or \"\" values. This goes back to #2539 when purpose rows were first added to the database.\r\n\r\nHaving this UNKNOWN value would just be confusing and could be a footgun because you couldn't write a function taking an `AddressPurpose` argument and have the compiler guarantee it was passed a known value.",
      "created_at": "2023-03-10T19:12:00Z",
      "updated_at": "2023-03-10T20:03:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132779833",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132779833"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 61,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132788102",
      "pull_request_review_id": 1335473435,
      "id": 1132788102,
      "node_id": "PRRC_kwDOABII585DhPmG",
      "diff_hunk": "@@ -57,6 +57,12 @@ using WalletValueMap = std::map<std::string, std::string>;\n class Wallet\n {\n public:\n+    enum class AddressPurpose : uint8_t {\n+        UNKNOWN = 0,\n+        RECEIVE = 1,\n+        SEND = 2,",
      "path": "src/interfaces/wallet.h",
      "position": null,
      "original_position": 7,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nIn #2539 there was also a [\"refund\"](https://github.com/bitcoin/bitcoin/blob/a41d5fe01947f2f878c055670986a165af800f9a/src/qt/paymentserver.cpp#L536) purpose, so it might make sense to add a REFUND enum value to allow those wallets to be loaded without triggering an `assert(false)` error in PurposeFromString.",
      "created_at": "2023-03-10T19:20:56Z",
      "updated_at": "2023-03-10T20:03:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132788102",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132788102"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132795600",
      "pull_request_review_id": 1335473435,
      "id": 1132795600,
      "node_id": "PRRC_kwDOABII585DhRbQ",
      "diff_hunk": "@@ -52,16 +52,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(const std::optional<interfaces::Wallet::AddressPurpose>& purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (!purpose.has_value() || purpose.value() == interfaces::Wallet::AddressPurpose::UNKNOWN) { // if purpose not set, guess\n+        addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    } else if (purpose.value() == interfaces::Wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == interfaces::Wallet::AddressPurpose::RECEIVE) {",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nCode style comment: It is a little inconsistent to call .value() in one case but not the other. Personally, I think it would be clearest to write this as `if (purpose == SEND) ... else if (purpose == RECEIVE) else ... ` like the original code, instead of being overly verbose and paranoid about null values, which are already handled sanely by [`operator==`](https://en.cppreference.com/w/cpp/utility/optional/operator_cmp)",
      "created_at": "2023-03-10T19:28:16Z",
      "updated_at": "2023-03-10T20:04:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132795600",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132795600"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 62,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 63,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132814936",
      "pull_request_review_id": 1335473435,
      "id": 1132814936,
      "node_id": "PRRC_kwDOABII585DhWJY",
      "diff_hunk": "@@ -347,7 +347,9 @@ ReadKeyValue(CWallet* pwallet, DataStream& ssKey, CDataStream& ssValue,\n         } else if (strType == DBKeys::PURPOSE) {\n             std::string strAddress;\n             ssKey >> strAddress;\n-            ssValue >> pwallet->m_address_book[DecodeDestination(strAddress)].purpose;\n+            std::string purpose_str;\n+            ssValue >> purpose_str;\n+            pwallet->m_address_book[DecodeDestination(strAddress)].SetPurposeFromString(purpose_str);",
      "path": "src/wallet/walletdb.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nIt seems like it would be better to do something like log a warning or return an error message if an unrecognized purpose is set here, rather than crashing with an assert.",
      "created_at": "2023-03-10T19:49:35Z",
      "updated_at": "2023-03-10T20:03:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132814936",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132814936"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 352,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132816332",
      "pull_request_review_id": 1335473435,
      "id": 1132816332,
      "node_id": "PRRC_kwDOABII585DhWfM",
      "diff_hunk": "@@ -206,10 +207,47 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 13,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nShould this older purpose field be dropped?",
      "created_at": "2023-03-10T19:51:36Z",
      "updated_at": "2023-03-10T20:03:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132816332",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132816332"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 210,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132822542",
      "pull_request_review_id": 1335473435,
      "id": 1132822542,
      "node_id": "PRRC_kwDOABII585DhYAO",
      "diff_hunk": "@@ -206,10 +207,47 @@ class CAddressBookData\n private:\n     bool m_change{true};\n     std::string m_label;\n-public:\n     std::string purpose;\n+    //! The purpose of this address\n+    interfaces::Wallet::AddressPurpose m_purpose{interfaces::Wallet::AddressPurpose::UNKNOWN};",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 15,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "44a2ae100b600bc9c9f4c956223fab3b1948ea8d",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (44a2ae100b600bc9c9f4c956223fab3b1948ea8d)\r\n\r\nIt seems a little misleading to set default address book entry purpose to UNKNOWN, because the purpose of addresses with default entries are known: they are just change addresses used to hold avoid_reuse bookkeeping info.\r\n\r\nSo I think it would probably be better to change type of `m_purpose` field to `optional<AddressPurpose>` and leave it unset, when `m_change` is true, rather making the purpose seem unknown.\r\n\r\nAlternately, could be more ambitious and add an `AddressPurpose::CHANGE` enum value and drop `bool m_change` entirely.\r\n\r\n---\r\n\r\nEDIT: I forgot to mention the other case when purpose will be is UNKNOWN here. It will be UNKNOWN not just for change addresses with avoid_reuse info, but also for addresses from old wallet databases that do not contain \"purpose\" rows. In this latter case, UNKNOWN values would actually be descriptive and not misleading. However, I still think the two suggested alternatives above that drop UNKNOWN would be preferable, because UNKNOWN is misleading in some cases, even if it is not misleading in every case.",
      "created_at": "2023-03-10T19:59:48Z",
      "updated_at": "2023-03-10T20:23:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1132822542",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1132822542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137712523",
      "pull_request_review_id": 1342339656,
      "id": 1137712523,
      "node_id": "PRRC_kwDOABII585D0B2L",
      "diff_hunk": "@@ -352,11 +353,11 @@ struct WalletAddress\n {\n     CTxDestination dest;\n     wallet::isminetype is_mine;\n+    wallet::AddressPurpose purpose;\n     std::string name;\n-    std::string purpose;\n \n-    WalletAddress(CTxDestination dest, wallet::isminetype is_mine, std::string name, std::string purpose)\n-        : dest(std::move(dest)), is_mine(is_mine), name(std::move(name)), purpose(std::move(purpose))\n+    WalletAddress(CTxDestination dest, wallet::isminetype is_mine, wallet::AddressPurpose purpose, std::string name)",
      "path": "src/interfaces/wallet.h",
      "position": 45,
      "original_position": 45,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nNote for reviewers: in a few places in this PR, struct order or argument order is changed so the `AddressPurpose` field follows IsMine or IsChange fields. This is done because the fields hold overlapping information, and in most cases new code should rely on the other fields instead of `AddressPurpose`.",
      "created_at": "2023-03-15T20:06:38Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137712523",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137712523"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 359,
      "original_line": 359,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137726714",
      "pull_request_review_id": 1342339656,
      "id": 1137726714,
      "node_id": "PRRC_kwDOABII585D0FT6",
      "diff_hunk": "@@ -189,29 +189,34 @@ class WalletImpl : public Wallet\n     bool getAddress(const CTxDestination& dest,\n         std::string* name,\n         isminetype* is_mine,\n-        std::string* purpose) override\n+        AddressPurpose* purpose) override\n     {\n         LOCK(m_wallet->cs_wallet);\n         const auto& entry = m_wallet->FindAddressBookEntry(dest, /*allow_change=*/false);\n         if (!entry) return false; // addr not found\n         if (name) {\n             *name = entry->GetLabel();\n         }\n+        std::optional<isminetype> dest_is_mine;\n+        if (is_mine || purpose) {\n+            dest_is_mine = m_wallet->IsMine(dest);\n+        }\n         if (is_mine) {\n-            *is_mine = m_wallet->IsMine(dest);\n+            *is_mine = *dest_is_mine;\n         }\n         if (purpose) {\n-            *purpose = entry->purpose;\n+            *purpose = entry->purpose ? *entry->purpose : *dest_is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND;",
      "path": "src/wallet/interfaces.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nWould maybe add a comment like \"// In very old wallets, address purpose may not recorded, so derive it from IsMine value\"",
      "created_at": "2023-03-15T20:16:08Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137726714",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137726714"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137728596",
      "pull_request_review_id": 1342339656,
      "id": 1137728596,
      "node_id": "PRRC_kwDOABII585D0FxU",
      "diff_hunk": "@@ -189,29 +189,34 @@ class WalletImpl : public Wallet\n     bool getAddress(const CTxDestination& dest,\n         std::string* name,\n         isminetype* is_mine,\n-        std::string* purpose) override\n+        AddressPurpose* purpose) override\n     {\n         LOCK(m_wallet->cs_wallet);\n         const auto& entry = m_wallet->FindAddressBookEntry(dest, /*allow_change=*/false);\n         if (!entry) return false; // addr not found\n         if (name) {\n             *name = entry->GetLabel();\n         }\n+        std::optional<isminetype> dest_is_mine;\n+        if (is_mine || purpose) {\n+            dest_is_mine = m_wallet->IsMine(dest);\n+        }\n         if (is_mine) {\n-            *is_mine = m_wallet->IsMine(dest);\n+            *is_mine = *dest_is_mine;\n         }\n         if (purpose) {\n-            *purpose = entry->purpose;\n+            *purpose = entry->purpose ? *entry->purpose : *dest_is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND;\n         }\n         return true;\n     }\n     std::vector<WalletAddress> getAddresses() const override\n     {\n         LOCK(m_wallet->cs_wallet);\n         std::vector<WalletAddress> result;\n-        m_wallet->ForEachAddrBookEntry([&](const CTxDestination& dest, const std::string& label, const std::string& purpose, bool is_change) EXCLUSIVE_LOCKS_REQUIRED(m_wallet->cs_wallet) {\n+        m_wallet->ForEachAddrBookEntry([&](const CTxDestination& dest, const std::string& label, bool is_change, const std::optional<AddressPurpose>& purpose) EXCLUSIVE_LOCKS_REQUIRED(m_wallet->cs_wallet) {\n             if (is_change) return;\n-            result.emplace_back(dest, m_wallet->IsMine(dest), label, purpose);\n+            isminetype is_mine = m_wallet->IsMine(dest);\n+            result.emplace_back(dest, is_mine, purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND, label);",
      "path": "src/wallet/interfaces.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nCould add the same comment here (\"In very old wallets, address purpose may not recorded, so derive it from IsMine value\")",
      "created_at": "2023-03-15T20:18:11Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137728596",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137728596"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137732694",
      "pull_request_review_id": 1342339656,
      "id": 1137732694,
      "node_id": "PRRC_kwDOABII585D0GxW",
      "diff_hunk": "@@ -677,7 +677,7 @@ RPCHelpMan getaddressesbylabel()\n             // std::set in O(log(N))), UniValue::__pushKV is used instead,\n             // which currently is O(1).\n             UniValue value(UniValue::VOBJ);\n-            value.pushKV(\"purpose\", _purpose);\n+            value.pushKV(\"purpose\", _purpose ? PurposeToString(*_purpose) : \"unknown\");",
      "path": "src/wallet/rpc/addresses.cpp",
      "position": 35,
      "original_position": 35,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nNote for reviewers: this is preserving previous behavior. Default value for `CAddressBook::purpose` field previously was `\"unknown\"` when a purpose was not recorded, and now it is null which is translated to `\"unknown\"`",
      "created_at": "2023-03-15T20:22:14Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137732694",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137732694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 680,
      "original_line": 680,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137736576",
      "pull_request_review_id": 1342339656,
      "id": 1137736576,
      "node_id": "PRRC_kwDOABII585D0HuA",
      "diff_hunk": "@@ -721,9 +721,15 @@ RPCHelpMan listlabels()\n \n     LOCK(pwallet->cs_wallet);\n \n-    std::string purpose;\n+    std::optional<AddressPurpose> purpose;\n     if (!request.params[0].isNull()) {\n-        purpose = request.params[0].get_str();\n+        std::string purpose_str = request.params[0].get_str();\n+        if (!purpose_str.empty()) {\n+            if (!IsValidPurposeString(purpose_str)) {\n+                throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\");\n+            }\n+            purpose = PurposeFromString(purpose_str);",
      "path": "src/wallet/rpc/addresses.cpp",
      "position": 49,
      "original_position": 52,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nIf not updating the code above, would be good to add `assert(purpose)` or a similar check here, because that condition would indicate a bug.",
      "created_at": "2023-03-15T20:25:44Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137736576",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137736576"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 728,
      "original_line": 728,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137745598",
      "pull_request_review_id": 1342339656,
      "id": 1137745598,
      "node_id": "PRRC_kwDOABII585D0J6-",
      "diff_hunk": "@@ -721,9 +721,15 @@ RPCHelpMan listlabels()\n \n     LOCK(pwallet->cs_wallet);\n \n-    std::string purpose;\n+    std::optional<AddressPurpose> purpose;\n     if (!request.params[0].isNull()) {\n-        purpose = request.params[0].get_str();\n+        std::string purpose_str = request.params[0].get_str();\n+        if (!purpose_str.empty()) {\n+            if (!IsValidPurposeString(purpose_str)) {",
      "path": "src/wallet/rpc/addresses.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nI think it might be a little better to drop the IsValidPurposeString function and just write:\r\n\r\n```\r\npurpose = PurposeFromString(purpose_str);\r\nif (!purpose) {\r\n    throw JSONRPCError(RPC_INVALID_PARAMETER, \"Invalid purpose argument, must a known purpose string, typically 'send' or 'receive'.\");\r\n}\r\n```\r\n\r\nsince underlying code should work for any past purpose string like \"refund\", or future ones.",
      "created_at": "2023-03-15T20:35:39Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137745598",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137745598"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 728,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137754658",
      "pull_request_review_id": 1342339656,
      "id": 1137754658,
      "node_id": "PRRC_kwDOABII585D0MIi",
      "diff_hunk": "@@ -57,7 +57,7 @@ using isminefilter = std::underlying_type<isminetype>::type;\n  * interfaces and saved for new addresses. It is basically redundant with an\n  * address's IsMine() result.\n  */\n-enum class AddressPurpose : uint8_t {",
      "path": "src/wallet/types.h",
      "position": null,
      "original_position": 4,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nThis change should be moved to previous commit \"wallet: add AddressPurpose enum to replace string values\" (2932d7be3cdf3de79b2767735a91180192d4efce), instead of being here. Alternately, could also keep the fixed width type, though IMO it is not helpful.",
      "created_at": "2023-03-15T20:46:03Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137754658",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137754658"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137756043",
      "pull_request_review_id": 1342339656,
      "id": 1137756043,
      "node_id": "PRRC_kwDOABII585D0MeL",
      "diff_hunk": "@@ -2399,35 +2399,39 @@ DBErrors CWallet::ZapSelectTx(std::vector<uint256>& vHashIn, std::vector<uint256\n     return DBErrors::LOAD_OK;\n }\n \n-bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::string& strPurpose)\n+bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::optional<AddressPurpose>& new_purpose)\n {\n     bool fUpdated = false;\n     bool is_mine;\n+    std::optional<AddressPurpose> purpose;\n     {\n         LOCK(cs_wallet);\n         std::map<CTxDestination, CAddressBookData>::iterator mi = m_address_book.find(address);\n         fUpdated = (mi != m_address_book.end() && !mi->second.IsChange());\n         m_address_book[address].SetLabel(strName);\n-        if (!strPurpose.empty()) /* update purpose only if requested */\n-            m_address_book[address].purpose = strPurpose;\n         is_mine = IsMine(address) != ISMINE_NO;\n+        if (new_purpose) { /* update purpose only if requested */\n+            purpose = m_address_book[address].purpose = new_purpose;\n+        } else {\n+            purpose = m_address_book[address].purpose;\n+        }\n     }\n     NotifyAddressBookChanged(address, strName, is_mine,\n-                             strPurpose, (fUpdated ? CT_UPDATED : CT_NEW));\n-    if (!strPurpose.empty() && !batch.WritePurpose(EncodeDestination(address), strPurpose))\n+                             purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND,\n+                             (fUpdated ? CT_UPDATED : CT_NEW));",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nCould add the same comment suggested previously here above NotifyAddressBookChanged (\"In very old wallets, address purpose may not recorded, so derive it from IsMine value\")",
      "created_at": "2023-03-15T20:47:31Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137756043",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137756043"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 2419,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2423,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137760371",
      "pull_request_review_id": 1342339656,
      "id": 1137760371,
      "node_id": "PRRC_kwDOABII585D0Nhz",
      "diff_hunk": "@@ -200,28 +201,75 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change address for fee\n+     * bumping and listing transactions.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spend from if the",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 44,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\ns/spend/spent/",
      "created_at": "2023-03-15T20:51:49Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137760371",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137760371"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 228,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137773684",
      "pull_request_review_id": 1342339656,
      "id": 1137773684,
      "node_id": "PRRC_kwDOABII585D0Qx0",
      "diff_hunk": "@@ -71,6 +71,10 @@ def run_test(self):\n         node = self.nodes[0]\n         assert_equal(len(node.listunspent()), 0)\n \n+        self.log.info(\"Checking listlabels' invalid parameters\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"notavalidpurpose\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"unknown\")",
      "path": "test/functional/wallet_labels.py",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (db521d3e89b23046f73410a875bb9660178e3842)\r\n\r\nI think the PR might benefit from a release note, or at least a summary of behavior changes in the PR description like, 'Wallet loading code will now issue warnings if addresses have unrecognized purpose strings other than \"send\" \"receive\" and \"refund\" and `listlabels` RPC will raise an error if an unrecognized purpose is requested.'",
      "created_at": "2023-03-15T21:06:49Z",
      "updated_at": "2023-03-15T21:07:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1137773684",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1137773684"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 74,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711112",
      "pull_request_review_id": 1346742213,
      "id": 1140711112,
      "node_id": "PRRC_kwDOABII585D_d7I",
      "diff_hunk": "@@ -189,29 +189,34 @@ class WalletImpl : public Wallet\n     bool getAddress(const CTxDestination& dest,\n         std::string* name,\n         isminetype* is_mine,\n-        std::string* purpose) override\n+        AddressPurpose* purpose) override\n     {\n         LOCK(m_wallet->cs_wallet);\n         const auto& entry = m_wallet->FindAddressBookEntry(dest, /*allow_change=*/false);\n         if (!entry) return false; // addr not found\n         if (name) {\n             *name = entry->GetLabel();\n         }\n+        std::optional<isminetype> dest_is_mine;\n+        if (is_mine || purpose) {\n+            dest_is_mine = m_wallet->IsMine(dest);\n+        }\n         if (is_mine) {\n-            *is_mine = m_wallet->IsMine(dest);\n+            *is_mine = *dest_is_mine;\n         }\n         if (purpose) {\n-            *purpose = entry->purpose;\n+            *purpose = entry->purpose ? *entry->purpose : *dest_is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND;",
      "path": "src/wallet/interfaces.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137726714,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:10:34Z",
      "updated_at": "2023-03-17T21:10:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711112",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711112"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 209,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711178",
      "pull_request_review_id": 1346742273,
      "id": 1140711178,
      "node_id": "PRRC_kwDOABII585D_d8K",
      "diff_hunk": "@@ -189,29 +189,34 @@ class WalletImpl : public Wallet\n     bool getAddress(const CTxDestination& dest,\n         std::string* name,\n         isminetype* is_mine,\n-        std::string* purpose) override\n+        AddressPurpose* purpose) override\n     {\n         LOCK(m_wallet->cs_wallet);\n         const auto& entry = m_wallet->FindAddressBookEntry(dest, /*allow_change=*/false);\n         if (!entry) return false; // addr not found\n         if (name) {\n             *name = entry->GetLabel();\n         }\n+        std::optional<isminetype> dest_is_mine;\n+        if (is_mine || purpose) {\n+            dest_is_mine = m_wallet->IsMine(dest);\n+        }\n         if (is_mine) {\n-            *is_mine = m_wallet->IsMine(dest);\n+            *is_mine = *dest_is_mine;\n         }\n         if (purpose) {\n-            *purpose = entry->purpose;\n+            *purpose = entry->purpose ? *entry->purpose : *dest_is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND;\n         }\n         return true;\n     }\n     std::vector<WalletAddress> getAddresses() const override\n     {\n         LOCK(m_wallet->cs_wallet);\n         std::vector<WalletAddress> result;\n-        m_wallet->ForEachAddrBookEntry([&](const CTxDestination& dest, const std::string& label, const std::string& purpose, bool is_change) EXCLUSIVE_LOCKS_REQUIRED(m_wallet->cs_wallet) {\n+        m_wallet->ForEachAddrBookEntry([&](const CTxDestination& dest, const std::string& label, bool is_change, const std::optional<AddressPurpose>& purpose) EXCLUSIVE_LOCKS_REQUIRED(m_wallet->cs_wallet) {\n             if (is_change) return;\n-            result.emplace_back(dest, m_wallet->IsMine(dest), label, purpose);\n+            isminetype is_mine = m_wallet->IsMine(dest);\n+            result.emplace_back(dest, is_mine, purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND, label);",
      "path": "src/wallet/interfaces.cpp",
      "position": null,
      "original_position": 45,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137728596,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:10:39Z",
      "updated_at": "2023-03-17T21:10:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711178",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711178"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 221,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711535",
      "pull_request_review_id": 1346742671,
      "id": 1140711535,
      "node_id": "PRRC_kwDOABII585D_eBv",
      "diff_hunk": "@@ -721,9 +721,15 @@ RPCHelpMan listlabels()\n \n     LOCK(pwallet->cs_wallet);\n \n-    std::string purpose;\n+    std::optional<AddressPurpose> purpose;\n     if (!request.params[0].isNull()) {\n-        purpose = request.params[0].get_str();\n+        std::string purpose_str = request.params[0].get_str();\n+        if (!purpose_str.empty()) {\n+            if (!IsValidPurposeString(purpose_str)) {",
      "path": "src/wallet/rpc/addresses.cpp",
      "position": null,
      "original_position": 49,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137745598,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:05Z",
      "updated_at": "2023-03-17T21:11:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711535",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 728,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711618",
      "pull_request_review_id": 1346742759,
      "id": 1140711618,
      "node_id": "PRRC_kwDOABII585D_eDC",
      "diff_hunk": "@@ -57,7 +57,7 @@ using isminefilter = std::underlying_type<isminetype>::type;\n  * interfaces and saved for new addresses. It is basically redundant with an\n  * address's IsMine() result.\n  */\n-enum class AddressPurpose : uint8_t {",
      "path": "src/wallet/types.h",
      "position": null,
      "original_position": 4,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137754658,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:11Z",
      "updated_at": "2023-03-17T21:11:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711618",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711618"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711716",
      "pull_request_review_id": 1346742838,
      "id": 1140711716,
      "node_id": "PRRC_kwDOABII585D_eEk",
      "diff_hunk": "@@ -2399,35 +2399,39 @@ DBErrors CWallet::ZapSelectTx(std::vector<uint256>& vHashIn, std::vector<uint256\n     return DBErrors::LOAD_OK;\n }\n \n-bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::string& strPurpose)\n+bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::optional<AddressPurpose>& new_purpose)\n {\n     bool fUpdated = false;\n     bool is_mine;\n+    std::optional<AddressPurpose> purpose;\n     {\n         LOCK(cs_wallet);\n         std::map<CTxDestination, CAddressBookData>::iterator mi = m_address_book.find(address);\n         fUpdated = (mi != m_address_book.end() && !mi->second.IsChange());\n         m_address_book[address].SetLabel(strName);\n-        if (!strPurpose.empty()) /* update purpose only if requested */\n-            m_address_book[address].purpose = strPurpose;\n         is_mine = IsMine(address) != ISMINE_NO;\n+        if (new_purpose) { /* update purpose only if requested */\n+            purpose = m_address_book[address].purpose = new_purpose;\n+        } else {\n+            purpose = m_address_book[address].purpose;\n+        }\n     }\n     NotifyAddressBookChanged(address, strName, is_mine,\n-                             strPurpose, (fUpdated ? CT_UPDATED : CT_NEW));\n-    if (!strPurpose.empty() && !batch.WritePurpose(EncodeDestination(address), strPurpose))\n+                             purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND,\n+                             (fUpdated ? CT_UPDATED : CT_NEW));",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137756043,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:18Z",
      "updated_at": "2023-03-17T21:11:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 2419,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 2423,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711786",
      "pull_request_review_id": 1346742910,
      "id": 1140711786,
      "node_id": "PRRC_kwDOABII585D_eFq",
      "diff_hunk": "@@ -200,28 +201,75 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change address for fee\n+     * bumping and listing transactions.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spend from if the",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 44,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137760371,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:22Z",
      "updated_at": "2023-03-17T21:11:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711786",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 228,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711857",
      "pull_request_review_id": 1346742995,
      "id": 1140711857,
      "node_id": "PRRC_kwDOABII585D_eGx",
      "diff_hunk": "@@ -71,6 +71,10 @@ def run_test(self):\n         node = self.nodes[0]\n         assert_equal(len(node.listunspent()), 0)\n \n+        self.log.info(\"Checking listlabels' invalid parameters\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"notavalidpurpose\")\n+        assert_raises_rpc_error(-8, \"Invalid 'purpose' argument, must be one of 'send', or 'receive'.\", node.listlabels, \"unknown\")",
      "path": "test/functional/wallet_labels.py",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "db521d3e89b23046f73410a875bb9660178e3842",
      "in_reply_to_id": 1137773684,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-17T21:11:27Z",
      "updated_at": "2023-03-17T21:11:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1140711857",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1140711857"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 74,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142308217",
      "pull_request_review_id": 1348830142,
      "id": 1142308217,
      "node_id": "PRRC_kwDOABII585EFj15",
      "diff_hunk": "@@ -108,8 +110,30 @@ static inline int TxStateSerializedIndex(const TxState& state)\n }\n \n \n+/**\n+ * Cachable amount subdivided into watchonly and spendable parts.\n+ */\n+struct CachableAmount\n+{\n+    // NO and ALL are never (supposed to be) cached\n+    std::bitset<ISMINE_ENUM_ELEMENTS> m_cached;\n+    CAmount m_value[ISMINE_ENUM_ELEMENTS];\n+    inline void Reset()\n+    {\n+        m_cached.reset();\n+    }\n+    void Set(isminefilter filter, CAmount value)\n+    {\n+        m_cached.set(filter);\n+        m_value[filter] = value;\n+    }\n+};\n+\n+\n typedef std::map<std::string, std::string> mapValue_t;\n \n+\n+",
      "path": "src/wallet/transaction.h",
      "position": null,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "f00f5dad29d81b9700dd84ec08a6e72f915988a0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Add wallet/types.h for simple public enum and struct types\" (f00f5dad29d81b9700dd84ec08a6e72f915988a0)\r\n\r\nLooks like there might be an extra 3 lines of space instead of 2 (but fine to keep if that's intentional)\r\n\r\n",
      "created_at": "2023-03-20T15:32:11Z",
      "updated_at": "2023-03-20T15:47:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142308217",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142308217"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 136,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142325608",
      "pull_request_review_id": 1348830142,
      "id": 1142325608,
      "node_id": "PRRC_kwDOABII585EFoFo",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change address for fee",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 27,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ea3cc035ddf8f15fd18407231c3ff9edde8891c1",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (ea3cc035ddf8f15fd18407231c3ff9edde8891c1)\r\n\r\ns/address/addresses/",
      "created_at": "2023-03-20T15:41:02Z",
      "updated_at": "2023-03-20T15:47:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142325608",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142325608"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142331004",
      "pull_request_review_id": 1348830142,
      "id": 1142331004,
      "node_id": "PRRC_kwDOABII585EFpZ8",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+Wallet\n+------\n+\n+* Purposes strings are restricted to the currently known values of \"send\", \"receive\", and \"refund\".",
      "path": "doc/release-notes-27217.md",
      "position": null,
      "original_position": 4,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "0d18142f595b43070bd07b608d43c9ed9b37cdcc",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"doc: Release note for purpose string restriction\" (0d18142f595b43070bd07b608d43c9ed9b37cdcc)\r\n\r\nMaybe s/restricted/now restricted/ to be clear this is new behavior not background information.",
      "created_at": "2023-03-20T15:44:52Z",
      "updated_at": "2023-03-20T15:47:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142331004",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142331004"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432253",
      "pull_request_review_id": 1349028134,
      "id": 1142432253,
      "node_id": "PRRC_kwDOABII585EGCH9",
      "diff_hunk": "@@ -108,8 +110,30 @@ static inline int TxStateSerializedIndex(const TxState& state)\n }\n \n \n+/**\n+ * Cachable amount subdivided into watchonly and spendable parts.\n+ */\n+struct CachableAmount\n+{\n+    // NO and ALL are never (supposed to be) cached\n+    std::bitset<ISMINE_ENUM_ELEMENTS> m_cached;\n+    CAmount m_value[ISMINE_ENUM_ELEMENTS];\n+    inline void Reset()\n+    {\n+        m_cached.reset();\n+    }\n+    void Set(isminefilter filter, CAmount value)\n+    {\n+        m_cached.set(filter);\n+        m_value[filter] = value;\n+    }\n+};\n+\n+\n typedef std::map<std::string, std::string> mapValue_t;\n \n+\n+",
      "path": "src/wallet/transaction.h",
      "position": null,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "f00f5dad29d81b9700dd84ec08a6e72f915988a0",
      "in_reply_to_id": 1142308217,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed",
      "created_at": "2023-03-20T16:57:05Z",
      "updated_at": "2023-03-20T16:57:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142432253",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 136,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432364",
      "pull_request_review_id": 1349028277,
      "id": 1142432364,
      "node_id": "PRRC_kwDOABII585EGCJs",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change address for fee",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 27,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ea3cc035ddf8f15fd18407231c3ff9edde8891c1",
      "in_reply_to_id": 1142325608,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-20T16:57:10Z",
      "updated_at": "2023-03-20T16:57:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142432364",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432364"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 212,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432481",
      "pull_request_review_id": 1349028434,
      "id": 1142432481,
      "node_id": "PRRC_kwDOABII585EGCLh",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+Wallet\n+------\n+\n+* Purposes strings are restricted to the currently known values of \"send\", \"receive\", and \"refund\".",
      "path": "doc/release-notes-27217.md",
      "position": null,
      "original_position": 4,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "0d18142f595b43070bd07b608d43c9ed9b37cdcc",
      "in_reply_to_id": 1142331004,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done",
      "created_at": "2023-03-20T16:57:15Z",
      "updated_at": "2023-03-20T16:57:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1142432481",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1142432481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1148451397",
      "pull_request_review_id": 1357917977,
      "id": 1148451397,
      "node_id": "PRRC_kwDOABII585Ec_pF",
      "diff_hunk": "@@ -2399,35 +2399,40 @@ DBErrors CWallet::ZapSelectTx(std::vector<uint256>& vHashIn, std::vector<uint256\n     return DBErrors::LOAD_OK;\n }\n \n-bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::string& strPurpose)\n+bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::optional<AddressPurpose>& new_purpose)\n {\n     bool fUpdated = false;\n     bool is_mine;\n+    std::optional<AddressPurpose> purpose;\n     {\n         LOCK(cs_wallet);\n         std::map<CTxDestination, CAddressBookData>::iterator mi = m_address_book.find(address);\n         fUpdated = (mi != m_address_book.end() && !mi->second.IsChange());\n         m_address_book[address].SetLabel(strName);\n-        if (!strPurpose.empty()) /* update purpose only if requested */\n-            m_address_book[address].purpose = strPurpose;\n         is_mine = IsMine(address) != ISMINE_NO;\n+        if (new_purpose) { /* update purpose only if requested */\n+            purpose = m_address_book[address].purpose = new_purpose;\n+        } else {\n+            purpose = m_address_book[address].purpose;\n+        }\n     }\n+    // In very old wallets, address purpose may not be recorded so we derive it from IsMine\n     NotifyAddressBookChanged(address, strName, is_mine,\n-                             strPurpose, (fUpdated ? CT_UPDATED : CT_NEW));\n-    if (!strPurpose.empty() && !batch.WritePurpose(EncodeDestination(address), strPurpose))\n+                             purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND,",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": null,
      "user": {
        "login": "aureleoules",
        "id": 22493292,
        "node_id": "MDQ6VXNlcjIyNDkzMjky",
        "avatar_url": "https://avatars.githubusercontent.com/u/22493292?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aureleoules",
        "html_url": "https://github.com/aureleoules",
        "followers_url": "https://api.github.com/users/aureleoules/followers",
        "following_url": "https://api.github.com/users/aureleoules/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aureleoules/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aureleoules/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aureleoules/subscriptions",
        "organizations_url": "https://api.github.com/users/aureleoules/orgs",
        "repos_url": "https://api.github.com/users/aureleoules/repos",
        "events_url": "https://api.github.com/users/aureleoules/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aureleoules/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Could use `purpose.value_or(is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND)` instead.\r\nSame for other instances.",
      "created_at": "2023-03-25T23:59:31Z",
      "updated_at": "2023-03-26T00:11:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1148451397",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1148451397"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1149457810",
      "pull_request_review_id": 1359373444,
      "id": 1149457810,
      "node_id": "PRRC_kwDOABII585Eg1WS",
      "diff_hunk": "@@ -52,16 +53,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (purpose == wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == wallet::AddressPurpose::RECEIVE) {\n         addressType = AddressTableEntry::Receiving;\n-    else if (strPurpose == \"unknown\" || strPurpose == \"\") // if purpose not set, guess\n+    } else {\n         addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    }",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": null,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "IIRC, don't we get all sorts of compiler goodness if we use `switch` with an enum, like compiler warnings for unhandled cases? Would be nice, in the event we ever add a new case to the enum (although seems unlikely for this specific use-case).\r\n\r\nI always prefer using `switch` with enums, but feel free to ignore if you don't feel like retouching/don't share the same opinion.",
      "created_at": "2023-03-27T15:50:49Z",
      "updated_at": "2023-03-27T15:54:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1149457810",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1149457810"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1149481491",
      "pull_request_review_id": 1359408658,
      "id": 1149481491,
      "node_id": "PRRC_kwDOABII585Eg7IT",
      "diff_hunk": "@@ -52,16 +53,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (purpose == wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == wallet::AddressPurpose::RECEIVE) {\n         addressType = AddressTableEntry::Receiving;\n-    else if (strPurpose == \"unknown\" || strPurpose == \"\") // if purpose not set, guess\n+    } else {\n         addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    }",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": 1149457810,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wswitch-enum , super nice and still warns for unhandled cases even when you have a default.",
      "created_at": "2023-03-27T16:09:20Z",
      "updated_at": "2023-03-27T16:09:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1149481491",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1149481491"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160736280",
      "pull_request_review_id": 1376251729,
      "id": 1160736280,
      "node_id": "PRRC_kwDOABII585FL24Y",
      "diff_hunk": "@@ -52,16 +53,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (purpose == wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == wallet::AddressPurpose::RECEIVE) {\n         addressType = AddressTableEntry::Receiving;\n-    else if (strPurpose == \"unknown\" || strPurpose == \"\") // if purpose not set, guess\n+    } else {\n         addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    }",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": 1149457810,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (ccddce7582a51fd2857ce4d142076167631e9cfe)\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1149457810\r\n\r\nI think I agree with the suggestion to use a switch statement here. Also:\r\n\r\n- It looks like behavior of this code has been changed unintentionally to no longer return hidden in the \"refund\" case.\r\n- The \"if purpose not set, guess\" logic is no longer here needed because it is implemented at the lower layer\r\n\r\nSo this could be written as:\r\n\r\n```c++\r\n/* Determine address type from address purpose */\r\nstatic AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose)\r\n{\r\n    // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\r\n    switch (purpose) {\r\n        case wallet::AddressPurpose::RECEIVE: return AddressTableEntry::Receiving;\r\n        case wallet::AddressPurpose::SEND:    return AddressTableEntry::Sending;\r\n        case wallet::AddressPurpose::REFUND:  return AddressTableEntry::Hidden;\r\n    }\r\n}\r\n```",
      "created_at": "2023-04-07T14:22:14Z",
      "updated_at": "2023-04-07T15:16:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1160736280",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160736280"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160747569",
      "pull_request_review_id": 1376251729,
      "id": 1160747569,
      "node_id": "PRRC_kwDOABII585FL5ox",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ccddce7582a51fd2857ce4d142076167631e9cfe",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (ccddce7582a51fd2857ce4d142076167631e9cfe)\r\n\r\nIt would be good to make it more explicit that value is null for change addresses. Could say:\r\n\r\n```c++\r\n/**\r\n * Address label which is always nullopt for change addresses. For sending\r\n * and receiving addresses, it will be set to an arbitrary label string\r\n * provided by the user, or to \"\", which is the default label. The presence\r\n * or absence of a label is used to distinguish change addresses from\r\n * non-change addresses by wallet transaction listing and fee bumping code.\r\n */\r\nstd::optional<std::string> label;\r\n```",
      "created_at": "2023-04-07T14:39:05Z",
      "updated_at": "2023-04-07T15:16:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1160747569",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160747569"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160759069",
      "pull_request_review_id": 1376251729,
      "id": 1160759069,
      "node_id": "PRRC_kwDOABII585FL8cd",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change addresses for fee\n+     * bumping and listing transactions.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"p\" if present. This is set on",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 43,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ccddce7582a51fd2857ce4d142076167631e9cfe",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "In commit \"wallet: Replace use of purpose strings with an enum\" (ccddce7582a51fd2857ce4d142076167631e9cfe)\r\n\r\nTo be more accurate, comment should say `with values set to \"1\" or \"p\" if present`. Value was inadvertently changed from `\"p\"` to `\"1\"` in f5ba424cd44619d9b9be88b8593d69a7ba96db26 from #21353",
      "created_at": "2023-04-07T14:57:13Z",
      "updated_at": "2023-04-07T15:16:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1160759069",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1160759069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 227,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161777870",
      "pull_request_review_id": 1377632092,
      "id": 1161777870,
      "node_id": "PRRC_kwDOABII585FP1LO",
      "diff_hunk": "@@ -2399,35 +2399,40 @@ DBErrors CWallet::ZapSelectTx(std::vector<uint256>& vHashIn, std::vector<uint256\n     return DBErrors::LOAD_OK;\n }\n \n-bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::string& strPurpose)\n+bool CWallet::SetAddressBookWithDB(WalletBatch& batch, const CTxDestination& address, const std::string& strName, const std::optional<AddressPurpose>& new_purpose)\n {\n     bool fUpdated = false;\n     bool is_mine;\n+    std::optional<AddressPurpose> purpose;\n     {\n         LOCK(cs_wallet);\n         std::map<CTxDestination, CAddressBookData>::iterator mi = m_address_book.find(address);\n         fUpdated = (mi != m_address_book.end() && !mi->second.IsChange());\n         m_address_book[address].SetLabel(strName);\n-        if (!strPurpose.empty()) /* update purpose only if requested */\n-            m_address_book[address].purpose = strPurpose;\n         is_mine = IsMine(address) != ISMINE_NO;\n+        if (new_purpose) { /* update purpose only if requested */\n+            purpose = m_address_book[address].purpose = new_purpose;\n+        } else {\n+            purpose = m_address_book[address].purpose;\n+        }\n     }\n+    // In very old wallets, address purpose may not be recorded so we derive it from IsMine\n     NotifyAddressBookChanged(address, strName, is_mine,\n-                             strPurpose, (fUpdated ? CT_UPDATED : CT_NEW));\n-    if (!strPurpose.empty() && !batch.WritePurpose(EncodeDestination(address), strPurpose))\n+                             purpose ? *purpose : is_mine ? AddressPurpose::RECEIVE : AddressPurpose::SEND,",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 46,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": 1148451397,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Changed here and elsewhere",
      "created_at": "2023-04-10T14:40:39Z",
      "updated_at": "2023-04-10T14:40:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161777870",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161777870"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2421,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161777986",
      "pull_request_review_id": 1377632385,
      "id": 1161777986,
      "node_id": "PRRC_kwDOABII585FP1NC",
      "diff_hunk": "@@ -52,16 +53,17 @@ struct AddressTableEntryLessThan\n };\n \n /* Determine address type from address purpose */\n-static AddressTableEntry::Type translateTransactionType(const QString &strPurpose, bool isMine)\n+static AddressTableEntry::Type translateTransactionType(wallet::AddressPurpose purpose, bool isMine)\n {\n     AddressTableEntry::Type addressType = AddressTableEntry::Hidden;\n     // \"refund\" addresses aren't shown, and change addresses aren't returned by getAddresses at all.\n-    if (strPurpose == \"send\")\n+    if (purpose == wallet::AddressPurpose::SEND) {\n         addressType = AddressTableEntry::Sending;\n-    else if (strPurpose == \"receive\")\n+    } else if (purpose == wallet::AddressPurpose::RECEIVE) {\n         addressType = AddressTableEntry::Receiving;\n-    else if (strPurpose == \"unknown\" || strPurpose == \"\") // if purpose not set, guess\n+    } else {\n         addressType = (isMine ? AddressTableEntry::Receiving : AddressTableEntry::Sending);\n+    }",
      "path": "src/qt/addresstablemodel.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a48010f1fd6d8a430b8234789ac3c91ec9d06972",
      "in_reply_to_id": 1149457810,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done as suggested",
      "created_at": "2023-04-10T14:40:47Z",
      "updated_at": "2023-04-10T14:40:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161777986",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161777986"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 60,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161778269",
      "pull_request_review_id": 1377633080,
      "id": 1161778269,
      "node_id": "PRRC_kwDOABII585FP1Rd",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 26,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ccddce7582a51fd2857ce4d142076167631e9cfe",
      "in_reply_to_id": 1160747569,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done as suggested",
      "created_at": "2023-04-10T14:41:06Z",
      "updated_at": "2023-04-10T14:41:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161778269",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161778269"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 211,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161778333",
      "pull_request_review_id": 1377633254,
      "id": 1161778333,
      "node_id": "PRRC_kwDOABII585FP1Sd",
      "diff_hunk": "@@ -200,28 +201,70 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label for sending and receiving addresses, most commonly set to\n+     * \"\", which is the default label. Change addresses do not have labels, and\n+     * wallet code uses lack of a label to identify change addresses for fee\n+     * bumping and listing transactions.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"p\" if present. This is set on",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 43,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "ccddce7582a51fd2857ce4d142076167631e9cfe",
      "in_reply_to_id": 1160759069,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done as suggested",
      "created_at": "2023-04-10T14:41:11Z",
      "updated_at": "2023-04-10T14:41:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161778333",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161778333"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 227,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161939317",
      "pull_request_review_id": 1377895422,
      "id": 1161939317,
      "node_id": "PRRC_kwDOABII585FQcl1",
      "diff_hunk": "@@ -48,6 +48,20 @@ enum isminetype : unsigned int {\n };\n /** used for bitflags of isminetype */\n using isminefilter = std::underlying_type<isminetype>::type;\n+\n+/**\n+ * Address purpose field that has been been stored with wallet sending and\n+ * receiving addreses since BIP70 payment protocol support was added in",
      "path": "src/wallet/types.h",
      "position": null,
      "original_position": 7,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "af47fff6804defb1d7a8b538d6f2e7a39c6aa213",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit, typo:\r\n```suggestion\r\n * receiving addresses since BIP70 payment protocol support was added in\r\n```",
      "created_at": "2023-04-10T17:53:20Z",
      "updated_at": "2023-04-10T18:28:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161939317",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161939317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 54,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161952231",
      "pull_request_review_id": 1377895422,
      "id": 1161952231,
      "node_id": "PRRC_kwDOABII585FQfvn",
      "diff_hunk": "@@ -200,28 +201,71 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label which is always nullopt for change addresses. For sending\n+     * and receiving addresses, it will be set to an arbitrary label string\n+     * provided by the user, or to \"\", which is the default label. The presence\n+     * or absence of a label is used to distinguish change addresses from\n+     * non-change addresses by wallet transaction listing and fee bumping code.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"1\" or \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spent from if the\n+     *       avoid_reuse option is enabled\n+     *\n+     *   \"rr##\" keys where ## is a decimal number, with serialized\n+     *       RecentRequestEntry objects as values\n+     */\n     typedef std::map<std::string, std::string> StringMap;\n     StringMap destdata;\n \n-    bool IsChange() const { return m_change; }\n-    const std::string& GetLabel() const { return m_label; }\n-    void SetLabel(const std::string& label) {\n-        m_change = false;\n-        m_label = label;\n-    }\n+    /** Accessor methods. */\n+    bool IsChange() const { return !label; }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 61,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a52f20224f8054f3e6f628fe228284e6f3b7ce7e",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I thought here first that if the user does not set a label, we might treat an address as change. However, I realized that an empty string `\"\"` is truthy, while no string being set is falsy, i.e. even if the address label is set to `\"\"` which appears to be the case for any receive addresses, it’ll be truthy.",
      "created_at": "2023-04-10T18:09:06Z",
      "updated_at": "2023-04-10T18:28:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161952231",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161952231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161954369",
      "pull_request_review_id": 1377895422,
      "id": 1161954369,
      "node_id": "PRRC_kwDOABII585FQgRB",
      "diff_hunk": "@@ -200,28 +201,71 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label which is always nullopt for change addresses. For sending\n+     * and receiving addresses, it will be set to an arbitrary label string\n+     * provided by the user, or to \"\", which is the default label. The presence\n+     * or absence of a label is used to distinguish change addresses from\n+     * non-change addresses by wallet transaction listing and fee bumping code.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"1\" or \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spent from if the\n+     *       avoid_reuse option is enabled\n+     *\n+     *   \"rr##\" keys where ## is a decimal number, with serialized\n+     *       RecentRequestEntry objects as values\n+     */\n     typedef std::map<std::string, std::string> StringMap;\n     StringMap destdata;\n \n-    bool IsChange() const { return m_change; }\n-    const std::string& GetLabel() const { return m_label; }\n-    void SetLabel(const std::string& label) {\n-        m_change = false;\n-        m_label = label;\n-    }\n+    /** Accessor methods. */\n+    bool IsChange() const { return !label; }\n+    std::string GetLabel() const { return label ? *label : std::string{}; }\n+    void SetLabel(std::string name) { label = std::move(name); }\n };\n \n+inline std::string PurposeToString(AddressPurpose p)\n+{\n+    switch(p) {\n+    case AddressPurpose::RECEIVE:\n+        return \"receive\";\n+    case AddressPurpose::SEND:\n+        return \"send\";\n+    case AddressPurpose::REFUND:\n+        return \"refund\";\n+    } // no default case so the compiler will warn when a new enum as added\n+    assert(false);\n+}\n+\n+inline std::optional<AddressPurpose> PurposeFromString(std::string_view s)\n+{\n+    if (s == \"receive\") {\n+        return AddressPurpose::RECEIVE;\n+    } else if (s == \"send\") {\n+        return AddressPurpose::SEND;\n+    } else if (s == \"refund\") {\n+        return AddressPurpose::REFUND;\n+    }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 87,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a52f20224f8054f3e6f628fe228284e6f3b7ce7e",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Nit, since each immediately returns, this may be more readable:\r\n\r\n```suggestion\r\n    if (s == \"receive\") return AddressPurpose::RECEIVE;\r\n    if (s == \"send\") return AddressPurpose::SEND;\r\n    if (s == \"refund\") return AddressPurpose::REFUND;\r\n```",
      "created_at": "2023-04-10T18:11:51Z",
      "updated_at": "2023-04-10T18:28:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161954369",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161954369"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 259,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161967546",
      "pull_request_review_id": 1377895422,
      "id": 1161967546,
      "node_id": "PRRC_kwDOABII585FQje6",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+Wallet\n+------\n+\n+* Purposes strings are now restricted to the currently known values of \"send\", \"receive\", and \"refund\".\n+  Wallets that have unrecognized purpose strings will have loading warnings, and the `listlabels`\n+  RPC will raise an error if an unrecognized purpose is requested.",
      "path": "doc/release-notes-27217.md",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "98821a7aca88ac9401786e848899866b71446460",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Perhaps mention that the “purpose string” appears in the context of addresses, at least for me that would not necessarily have been obvious just from this release note without reviewing the PR.",
      "created_at": "2023-04-10T18:28:27Z",
      "updated_at": "2023-04-10T18:28:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1161967546",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1161967546"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 4,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 6,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194379",
      "pull_request_review_id": 1378299830,
      "id": 1162194379,
      "node_id": "PRRC_kwDOABII585FRa3L",
      "diff_hunk": "@@ -48,6 +48,20 @@ enum isminetype : unsigned int {\n };\n /** used for bitflags of isminetype */\n using isminefilter = std::underlying_type<isminetype>::type;\n+\n+/**\n+ * Address purpose field that has been been stored with wallet sending and\n+ * receiving addreses since BIP70 payment protocol support was added in",
      "path": "src/wallet/types.h",
      "position": null,
      "original_position": 7,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "af47fff6804defb1d7a8b538d6f2e7a39c6aa213",
      "in_reply_to_id": 1161939317,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed.",
      "created_at": "2023-04-11T00:44:10Z",
      "updated_at": "2023-04-11T00:44:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1162194379",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194379"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 54,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194453",
      "pull_request_review_id": 1378299949,
      "id": 1162194453,
      "node_id": "PRRC_kwDOABII585FRa4V",
      "diff_hunk": "@@ -200,28 +201,71 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label which is always nullopt for change addresses. For sending\n+     * and receiving addresses, it will be set to an arbitrary label string\n+     * provided by the user, or to \"\", which is the default label. The presence\n+     * or absence of a label is used to distinguish change addresses from\n+     * non-change addresses by wallet transaction listing and fee bumping code.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"1\" or \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spent from if the\n+     *       avoid_reuse option is enabled\n+     *\n+     *   \"rr##\" keys where ## is a decimal number, with serialized\n+     *       RecentRequestEntry objects as values\n+     */\n     typedef std::map<std::string, std::string> StringMap;\n     StringMap destdata;\n \n-    bool IsChange() const { return m_change; }\n-    const std::string& GetLabel() const { return m_label; }\n-    void SetLabel(const std::string& label) {\n-        m_change = false;\n-        m_label = label;\n-    }\n+    /** Accessor methods. */\n+    bool IsChange() const { return !label; }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 61,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a52f20224f8054f3e6f628fe228284e6f3b7ce7e",
      "in_reply_to_id": 1161952231,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I've made this clearer by using `has_value()`.",
      "created_at": "2023-04-11T00:44:27Z",
      "updated_at": "2023-04-11T00:44:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1162194453",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194453"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194642",
      "pull_request_review_id": 1378300228,
      "id": 1162194642,
      "node_id": "PRRC_kwDOABII585FRa7S",
      "diff_hunk": "@@ -200,28 +201,71 @@ class ReserveDestination\n     void KeepDestination();\n };\n \n-/** Address book data */\n-class CAddressBookData\n+/**\n+ * Address book data.\n+ */\n+struct CAddressBookData\n {\n-private:\n-    bool m_change{true};\n-    std::string m_label;\n-public:\n-    std::string purpose;\n+    /**\n+     * Address label which is always nullopt for change addresses. For sending\n+     * and receiving addresses, it will be set to an arbitrary label string\n+     * provided by the user, or to \"\", which is the default label. The presence\n+     * or absence of a label is used to distinguish change addresses from\n+     * non-change addresses by wallet transaction listing and fee bumping code.\n+     */\n+    std::optional<std::string> label;\n \n-    CAddressBookData() : purpose(\"unknown\") {}\n+    /**\n+     * Address purpose which was originally recorded for payment protocol\n+     * support but now serves as a cached IsMine value. Wallet code should\n+     * not rely on this field being set.\n+     */\n+    std::optional<AddressPurpose> purpose;\n \n+    /**\n+     * Additional address metadata map that can currently hold two types of keys:\n+     *\n+     *   \"used\" keys with values always set to \"1\" or \"p\" if present. This is set on\n+     *       IsMine addresses that have already been spent from if the\n+     *       avoid_reuse option is enabled\n+     *\n+     *   \"rr##\" keys where ## is a decimal number, with serialized\n+     *       RecentRequestEntry objects as values\n+     */\n     typedef std::map<std::string, std::string> StringMap;\n     StringMap destdata;\n \n-    bool IsChange() const { return m_change; }\n-    const std::string& GetLabel() const { return m_label; }\n-    void SetLabel(const std::string& label) {\n-        m_change = false;\n-        m_label = label;\n-    }\n+    /** Accessor methods. */\n+    bool IsChange() const { return !label; }\n+    std::string GetLabel() const { return label ? *label : std::string{}; }\n+    void SetLabel(std::string name) { label = std::move(name); }\n };\n \n+inline std::string PurposeToString(AddressPurpose p)\n+{\n+    switch(p) {\n+    case AddressPurpose::RECEIVE:\n+        return \"receive\";\n+    case AddressPurpose::SEND:\n+        return \"send\";\n+    case AddressPurpose::REFUND:\n+        return \"refund\";\n+    } // no default case so the compiler will warn when a new enum as added\n+    assert(false);\n+}\n+\n+inline std::optional<AddressPurpose> PurposeFromString(std::string_view s)\n+{\n+    if (s == \"receive\") {\n+        return AddressPurpose::RECEIVE;\n+    } else if (s == \"send\") {\n+        return AddressPurpose::SEND;\n+    } else if (s == \"refund\") {\n+        return AddressPurpose::REFUND;\n+    }",
      "path": "src/wallet/wallet.h",
      "position": null,
      "original_position": 87,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "a52f20224f8054f3e6f628fe228284e6f3b7ce7e",
      "in_reply_to_id": 1161954369,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "I prefer the `else if` style, but have collapsed this and `PurposeToString` to be more readable.",
      "created_at": "2023-04-11T00:45:02Z",
      "updated_at": "2023-04-11T00:45:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1162194642",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194642"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 259,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 265,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194740",
      "pull_request_review_id": 1378300341,
      "id": 1162194740,
      "node_id": "PRRC_kwDOABII585FRa80",
      "diff_hunk": "@@ -0,0 +1,6 @@\n+Wallet\n+------\n+\n+* Purposes strings are now restricted to the currently known values of \"send\", \"receive\", and \"refund\".\n+  Wallets that have unrecognized purpose strings will have loading warnings, and the `listlabels`\n+  RPC will raise an error if an unrecognized purpose is requested.",
      "path": "doc/release-notes-27217.md",
      "position": null,
      "original_position": 6,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "98821a7aca88ac9401786e848899866b71446460",
      "in_reply_to_id": 1161967546,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Done.",
      "created_at": "2023-04-11T00:45:16Z",
      "updated_at": "2023-04-11T00:45:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1162194740",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1162194740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": 4,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 6,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165016111",
      "pull_request_review_id": 1382653264,
      "id": 1165016111,
      "node_id": "PRRC_kwDOABII585FcLwv",
      "diff_hunk": "@@ -377,18 +377,17 @@ static void NotifyKeyStoreStatusChanged(WalletModel *walletmodel)\n \n static void NotifyAddressBookChanged(WalletModel *walletmodel,\n         const CTxDestination &address, const std::string &label, bool isMine,\n-        const std::string &purpose, ChangeType status)\n+        wallet::AddressPurpose purpose, ChangeType status)\n {\n     QString strAddress = QString::fromStdString(EncodeDestination(address));\n     QString strLabel = QString::fromStdString(label);\n-    QString strPurpose = QString::fromStdString(purpose);\n \n-    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + strPurpose + \" status=\" + QString::number(status);\n+    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + QString::number(static_cast<uint8_t>(purpose)) + \" status=\" + QString::number(status);\n     bool invoked = QMetaObject::invokeMethod(walletmodel, \"updateAddressBook\",\n                               Q_ARG(QString, strAddress),\n                               Q_ARG(QString, strLabel),\n                               Q_ARG(bool, isMine),\n-                              Q_ARG(QString, strPurpose),\n+                              Q_ARG(wallet::AddressPurpose, purpose),",
      "path": "src/qt/walletmodel.cpp",
      "position": 41,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "in_reply_to_id": null,
      "user": {
        "login": "denavila",
        "id": 123340139,
        "node_id": "U_kgDOB1oFaw",
        "avatar_url": "https://avatars.githubusercontent.com/u/123340139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/denavila",
        "html_url": "https://github.com/denavila",
        "followers_url": "https://api.github.com/users/denavila/followers",
        "following_url": "https://api.github.com/users/denavila/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/denavila/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/denavila/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/denavila/subscriptions",
        "organizations_url": "https://api.github.com/users/denavila/orgs",
        "repos_url": "https://api.github.com/users/denavila/repos",
        "events_url": "https://api.github.com/users/denavila/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/denavila/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "This change appears to trigger this assert when executing \"getnewaddress\" from the Console:\r\nAssertion failed: (invoked), function NotifyAddressBookChanged, file walletmodel.cpp, line 392.\r\n\r\ndebug.log shows this error message:\r\nGUI: QMetaMethod::invoke: Unable to handle unregistered datatype 'wallet::AddressPurpose'",
      "created_at": "2023-04-13T05:29:01Z",
      "updated_at": "2023-04-13T05:29:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1165016111",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165016111"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 390,
      "original_line": 390,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165251694",
      "pull_request_review_id": 1383002967,
      "id": 1165251694,
      "node_id": "PRRC_kwDOABII585FdFRu",
      "diff_hunk": "@@ -377,18 +377,17 @@ static void NotifyKeyStoreStatusChanged(WalletModel *walletmodel)\n \n static void NotifyAddressBookChanged(WalletModel *walletmodel,\n         const CTxDestination &address, const std::string &label, bool isMine,\n-        const std::string &purpose, ChangeType status)\n+        wallet::AddressPurpose purpose, ChangeType status)\n {\n     QString strAddress = QString::fromStdString(EncodeDestination(address));\n     QString strLabel = QString::fromStdString(label);\n-    QString strPurpose = QString::fromStdString(purpose);\n \n-    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + strPurpose + \" status=\" + QString::number(status);\n+    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + QString::number(static_cast<uint8_t>(purpose)) + \" status=\" + QString::number(status);\n     bool invoked = QMetaObject::invokeMethod(walletmodel, \"updateAddressBook\",\n                               Q_ARG(QString, strAddress),\n                               Q_ARG(QString, strLabel),\n                               Q_ARG(bool, isMine),\n-                              Q_ARG(QString, strPurpose),\n+                              Q_ARG(wallet::AddressPurpose, purpose),",
      "path": "src/qt/walletmodel.cpp",
      "position": 41,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "in_reply_to_id": 1165016111,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Thanks, opened an issue here to follow up: https://github.com/bitcoin-core/gui/issues/725.",
      "created_at": "2023-04-13T09:17:25Z",
      "updated_at": "2023-04-13T09:17:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1165251694",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165251694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 390,
      "original_line": 390,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165367412",
      "pull_request_review_id": 1383174091,
      "id": 1165367412,
      "node_id": "PRRC_kwDOABII585Fdhh0",
      "diff_hunk": "@@ -377,18 +377,17 @@ static void NotifyKeyStoreStatusChanged(WalletModel *walletmodel)\n \n static void NotifyAddressBookChanged(WalletModel *walletmodel,\n         const CTxDestination &address, const std::string &label, bool isMine,\n-        const std::string &purpose, ChangeType status)\n+        wallet::AddressPurpose purpose, ChangeType status)\n {\n     QString strAddress = QString::fromStdString(EncodeDestination(address));\n     QString strLabel = QString::fromStdString(label);\n-    QString strPurpose = QString::fromStdString(purpose);\n \n-    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + strPurpose + \" status=\" + QString::number(status);\n+    qDebug() << \"NotifyAddressBookChanged: \" + strAddress + \" \" + strLabel + \" isMine=\" + QString::number(isMine) + \" purpose=\" + QString::number(static_cast<uint8_t>(purpose)) + \" status=\" + QString::number(status);\n     bool invoked = QMetaObject::invokeMethod(walletmodel, \"updateAddressBook\",\n                               Q_ARG(QString, strAddress),\n                               Q_ARG(QString, strLabel),\n                               Q_ARG(bool, isMine),\n-                              Q_ARG(QString, strPurpose),\n+                              Q_ARG(wallet::AddressPurpose, purpose),",
      "path": "src/qt/walletmodel.cpp",
      "position": 41,
      "original_position": 41,
      "commit_id": "18fc71a3adee5de0f74ba6ff18f5ed31ba79a646",
      "original_commit_id": "e83babe3b85b22e2360a99f9827b2b0d107ad0fa",
      "in_reply_to_id": 1165016111,
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "body": "Fixed in https://github.com/bitcoin-core/gui/pull/726.",
      "created_at": "2023-04-13T11:05:03Z",
      "updated_at": "2023-04-13T11:05:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/27217#discussion_r1165367412",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1165367412"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/27217"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 390,
      "original_line": 390,
      "side": "RIGHT"
    }
  ]
}