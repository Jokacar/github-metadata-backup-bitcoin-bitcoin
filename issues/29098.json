{
  "type": "issue",
  "issue": {
    "id": 2044663416,
    "node_id": "I_kwDOABII58553xZ4",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29098",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29098/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29098/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29098/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/29098",
    "number": 29098,
    "state": "open",
    "state_reason": null,
    "title": "Performance decrease after tapscript miniscript",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\n@eriknylund noticed while testing large multisigs that after 4f473ea515bc77b9138323dab8a741c063d32e8f `sendtoaddress` causes a timeout for much smaller (though still rather large) multisigs than before.\r\n\r\nhttps://github.com/bitcoin/bitcoin/pull/28212#discussion_r1428484311\n\n### Expected behaviour\n\nNot sure, perhaps the performance decrease is justified. Ideally it would not slow down.\r\n\r\nSince these descriptors don't involve any miniscript-specific operations, perhaps it's possible to return earlier in whatever parsing / signing algorithm is involved here. \n\n### Steps to reproduce\n\nRun the large multisig test in the above mentioned PR before and after the commit.\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@4f473ea515bc77b9138323dab8a741c063d32e8f\n\n### Operating system and version\n\nmacOS and CI\n\n### Machine specifications\n\n_No response_",
    "user": {
      "login": "Sjors",
      "id": 10217,
      "node_id": "MDQ6VXNlcjEwMjE3",
      "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Sjors",
      "html_url": "https://github.com/Sjors",
      "followers_url": "https://api.github.com/users/Sjors/followers",
      "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
      "organizations_url": "https://api.github.com/users/Sjors/orgs",
      "repos_url": "https://api.github.com/users/Sjors/repos",
      "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Sjors/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 0,
    "created_at": "2023-12-16T08:28:56Z",
    "updated_at": "2023-12-16T08:28:56Z"
  },
  "events": [
    {
      "event": "mentioned",
      "id": 11265330547,
      "node_id": "MEE_lADOABII58553xZ4zwAAAAKfd01z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11265330547",
      "actor": {
        "login": "eriknylund",
        "id": 20860124,
        "node_id": "MDQ6VXNlcjIwODYwMTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/20860124?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eriknylund",
        "html_url": "https://github.com/eriknylund",
        "followers_url": "https://api.github.com/users/eriknylund/followers",
        "following_url": "https://api.github.com/users/eriknylund/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/eriknylund/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/eriknylund/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/eriknylund/subscriptions",
        "organizations_url": "https://api.github.com/users/eriknylund/orgs",
        "repos_url": "https://api.github.com/users/eriknylund/repos",
        "events_url": "https://api.github.com/users/eriknylund/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/eriknylund/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-16T08:28:56Z"
    },
    {
      "event": "subscribed",
      "id": 11265330550,
      "node_id": "SE_lADOABII58553xZ4zwAAAAKfd012",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11265330550",
      "actor": {
        "login": "eriknylund",
        "id": 20860124,
        "node_id": "MDQ6VXNlcjIwODYwMTI0",
        "avatar_url": "https://avatars.githubusercontent.com/u/20860124?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eriknylund",
        "html_url": "https://github.com/eriknylund",
        "followers_url": "https://api.github.com/users/eriknylund/followers",
        "following_url": "https://api.github.com/users/eriknylund/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/eriknylund/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/eriknylund/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/eriknylund/subscriptions",
        "organizations_url": "https://api.github.com/users/eriknylund/orgs",
        "repos_url": "https://api.github.com/users/eriknylund/repos",
        "events_url": "https://api.github.com/users/eriknylund/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/eriknylund/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-16T08:28:57Z"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-16T08:29:27Z",
      "updated_at": "2023-12-16T08:29:27Z",
      "source": {
        "issue": {
          "id": 1835372853,
          "node_id": "PR_kwDOABII585XIGrR",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28212",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28212/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28212/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28212/events",
          "html_url": "https://github.com/bitcoin/bitcoin/pull/28212",
          "number": 28212,
          "state": "open",
          "state_reason": null,
          "title": "test: verify spend from 999-of-999 taproot multisig wallet",
          "body": "Verify that a 999-of-999 taproot multisig wallet is possible and can spend from it, and that neither a 1-of-0 nor 1-of-1000 is allowed.\r\n\r\nThe tests will require some time to run. On my Mac M1 the new tests run in about 40 seconds.\r\n\r\nHad to bump fee rate to resolve assertions in sendtoaddress and psbt methods:\r\n- code -5: assert rpc_online.gettransaction(txid)[\"confirmations\"] > 0\r\n- code -26: min relay fee not met\r\n\r\nFixes #28179 ",
          "user": {
            "login": "eriknylund",
            "id": 20860124,
            "node_id": "MDQ6VXNlcjIwODYwMTI0",
            "avatar_url": "https://avatars.githubusercontent.com/u/20860124?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/eriknylund",
            "html_url": "https://github.com/eriknylund",
            "followers_url": "https://api.github.com/users/eriknylund/followers",
            "following_url": "https://api.github.com/users/eriknylund/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/eriknylund/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/eriknylund/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/eriknylund/subscriptions",
            "organizations_url": "https://api.github.com/users/eriknylund/orgs",
            "repos_url": "https://api.github.com/users/eriknylund/repos",
            "events_url": "https://api.github.com/users/eriknylund/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/eriknylund/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 62963516,
              "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
              "name": "Tests",
              "color": "d4c5f9",
              "default": false
            },
            {
              "id": 5334691551,
              "node_id": "LA_kwDOABII588AAAABPfju3w",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
              "name": "CI failed",
              "description": "",
              "color": "cccccc",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "CONTRIBUTOR",
          "locked": false,
          "comments": 3,
          "pull_request": {
            "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28212",
            "html_url": "https://github.com/bitcoin/bitcoin/pull/28212",
            "diff_url": "https://github.com/bitcoin/bitcoin/pull/28212.diff",
            "patch_url": "https://github.com/bitcoin/bitcoin/pull/28212.patch"
          },
          "created_at": "2023-08-03T16:26:06Z",
          "updated_at": "2023-12-16T08:29:27Z"
        },
        "type": "issue"
      }
    }
  ]
}