{
  "type": "issue",
  "issue": {
    "id": 2178143693,
    "node_id": "I_kwDOABII586B09XN",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29618",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29618/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29618/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29618/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/29618",
    "number": 29618,
    "state": "open",
    "state_reason": null,
    "title": "V2 Only Option",
    "body": "### Please describe the feature you'd like to see added.\n\nI'd like to see the ability to specify that only V2 protocol connections are allowed.\n\n### Is your feature related to a problem, if so please describe it.\n\n_No response_\n\n### Describe the solution you'd like\n\nPerhaps a setting like listenonly=v2\n\n### Describe any alternatives you've considered\n\n_No response_\n\n### Please leave any additional context\n\nThis would be extremely helpful for those who depend on V2 for confirming a connection is a \"bonafide\" node.",
    "user": {
      "login": "iotamega",
      "id": 101424448,
      "node_id": "U_kgDOBgudQA",
      "avatar_url": "https://avatars.githubusercontent.com/u/101424448?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/iotamega",
      "html_url": "https://github.com/iotamega",
      "followers_url": "https://api.github.com/users/iotamega/followers",
      "following_url": "https://api.github.com/users/iotamega/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/iotamega/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/iotamega/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/iotamega/subscriptions",
      "organizations_url": "https://api.github.com/users/iotamega/orgs",
      "repos_url": "https://api.github.com/users/iotamega/repos",
      "events_url": "https://api.github.com/users/iotamega/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/iotamega/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 2,
    "created_at": "2024-03-11T03:22:24Z",
    "updated_at": "2024-03-12T16:59:53Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 12067652061,
      "node_id": "LE_lADOABII586B09XNzwAAAALPScHd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12067652061",
      "actor": {
        "login": "iotamega",
        "id": 101424448,
        "node_id": "U_kgDOBgudQA",
        "avatar_url": "https://avatars.githubusercontent.com/u/101424448?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/iotamega",
        "html_url": "https://github.com/iotamega",
        "followers_url": "https://api.github.com/users/iotamega/followers",
        "following_url": "https://api.github.com/users/iotamega/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/iotamega/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/iotamega/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/iotamega/subscriptions",
        "organizations_url": "https://api.github.com/users/iotamega/orgs",
        "repos_url": "https://api.github.com/users/iotamega/repos",
        "events_url": "https://api.github.com/users/iotamega/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/iotamega/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-11T03:22:24Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "commented",
      "id": 1988076800,
      "node_id": "IC_kwDOABII5852f6UA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1988076800",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-11T10:24:06Z",
      "updated_at": "2024-03-11T10:24:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "To me it seems that this could partition the network. In the addresses database of my node there are 2778 addresses that have advertised v2 out of 72821 total.\r\n\r\n> This would be extremely helpful for those who depend on V2 for confirming a connection is a \"bonafide\" node.\r\n\r\nTrying to better understand your usecase. Do you want to check a connection to a particular node (e.g. one that you control or \"trust\")? Note that if that node supports v2, then bitcoind will already connect to it using v2 currently. Note also that even if v2 is used, this alone does not mean that MITM did not happen. You have to manually verify the session ids for that.\r\n\r\nFor ensuring you really connect to the intended node (avoid MITM) using Tor or I2P may be easier or better alternative. In those networks the address represents the peer's public key and naturally when you establish a connection you know you are talking to the one who possesses the private key which corresponds to the address / public key.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1988076800",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29618"
    },
    {
      "event": "commented",
      "id": 1992135814,
      "node_id": "IC_kwDOABII5852vZSG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1992135814",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-12T16:59:52Z",
      "updated_at": "2024-03-12T16:59:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "> To me it seems that this could partition the network. In the addresses database of my node there are 2778 addresses that have advertised v2 out of 72821 total.\r\n\r\nIt would only partition the network if almost all v2 nodes had v2-only enabled. As long as this option defaults to off, I don't see any real risk of that happening.\r\n\r\n> Note also that even if v2 is used, this alone does not mean that MITM did not happen. You have to manually verify the session ids for that.\r\n\r\nThe fact that people can check session ids is a reasonable deterrent to MITM attacks, as many attackers would not want their attack to be detected. I think it's fine to have a default-off option to enforce this to get a bit of extra privacy.",
      "user": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/29618#issuecomment-1992135814",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29618"
    }
  ]
}