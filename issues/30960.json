{
  "type": "issue",
  "issue": {
    "id": 2545812879,
    "node_id": "I_kwDOABII586XvgWP",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30960",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30960/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30960/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30960/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/30960",
    "number": 30960,
    "state": "closed",
    "state_reason": "completed",
    "title": "log/dump more information if a CheckQueue failure occurs",
    "body": "I recently saw this on a node running master (90a5786bba4baac1c0270e1f4bf5bb8c790e10de iirc):\r\n```bash\r\n2024-09-23T13:12:14Z UpdateTip: new best=00000000000000000000d3ebbca24c44745cfa14153e758d29af82275e00c00f height=862523 version=0x20026000 log2_work=95.170324 tx=1084781037 date='2024-09-23T13:03:46Z' progress=0.999997 cache=302.1MiB(2120379txo)\r\n2024-09-23T13:12:14Z UpdateTip: new best=0000000000000000000164dcfef37624f2cc6b177032bbca57631285c2cd0267 height=862524 version=0x20150000 log2_work=95.170337 tx=1084782848 date='2024-09-23T13:05:37Z' progress=0.999998 cache=302.4MiB(2117708txo)\r\n2024-09-23T13:12:15Z New outbound-full-relay v1 peer connected: version: 70016, blocks=862524, peer=25\r\n2024-09-23T13:13:09Z Saw new header hash=00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084 height=862525\r\n2024-09-23T13:13:09Z Saw new cmpctblock header hash=00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084 peer=1\r\n2024-09-23T13:13:10Z ERROR: ConnectBlock: CheckQueue failed\r\n2024-09-23T13:13:10Z InvalidChainFound: invalid block=00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084  height=862525  log2_work=95.170350  date=2024-09-23T13:12:13Z\r\n2024-09-23T13:13:10Z InvalidChainFound:  current best=0000000000000000000164dcfef37624f2cc6b177032bbca57631285c2cd0267  height=862524  log2_work=95.170337  date=2024-09-23T13:05:37Z\r\n2024-09-23T13:13:10Z [error] ConnectTip: ConnectBlock 00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084 failed, block-validation-failed\r\n2024-09-23T13:13:10Z InvalidChainFound: invalid block=00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084  height=862525  log2_work=95.170350  date=2024-09-23T13:12:13Z\r\n2024-09-23T13:13:10Z InvalidChainFound:  current best=0000000000000000000164dcfef37624f2cc6b177032bbca57631285c2cd0267  height=862524  log2_work=95.170337  date=2024-09-23T13:05:37Z\r\n2024-09-23T13:13:16Z New outbound-full-relay v2 peer connected: version: 70016, blocks=862525, peer=27\r\n2024-09-23T13:13:23Z New outbound-full-relay v1 peer connected: version: 70016, blocks=862525, peer=28\r\n```\r\n\r\nIn this case it was possible to restart the node with `-par=1`, to output the actual failure:\r\n```bash\r\n2024-09-23T14:19:04Z [error] ConnectTip: ConnectBlock 00000000000000000000f9892b8210cc52b3f71c1f37ffcfcecc2dab746b6084 failed, mandatory-script-verify-flag-failed (Script evaluated without error but finished with a false/empty top stack element)\r\n```\r\n\r\nHowever it would also be useful to get that information in either case. The cause of the `ConnectBlock` failure here has currently been put down to hardware.",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 0,
    "closed_at": "2024-12-03T20:22:49Z",
    "closed_by": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "created_at": "2024-09-24T16:05:59Z",
    "updated_at": "2024-12-03T20:22:49Z"
  },
  "events": [
    {
      "event": "closed",
      "id": 15515572119,
      "node_id": "CE_lADOABII586XvgWPzwAAAAOczNeX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15515572119",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3867d2421ae45c9093ceb355f5373c09e6f93c5d",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/3867d2421ae45c9093ceb355f5373c09e6f93c5d",
      "created_at": "2024-12-03T20:22:49Z"
    },
    {
      "event": "referenced",
      "id": 15515765625,
      "node_id": "REFE_lADOABII586XvgWPzwAAAAOcz8t5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15515765625",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3867d2421ae45c9093ceb355f5373c09e6f93c5d",
      "commit_url": "https://api.github.com/repos/hebasto/bitcoin/commits/3867d2421ae45c9093ceb355f5373c09e6f93c5d",
      "created_at": "2024-12-03T20:40:01Z"
    }
  ]
}